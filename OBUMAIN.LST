A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE     1


MACRO ASSEMBLER A51 V8.00d
OBJECT MODULE PLACED IN OBUMAIN.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE OBUMAIN.ASM SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     ;**********************************************************************
                       2     ;59 °å³ÌÐòÖÐ¶ÏÇ¿ÆÈÌø»ØÖ÷³ÌÐò£¬¶ÑÕ»SP»áÂÒ£¬ËùÒÔÇ¿ÆÈÖÃ SP = 0A7h + 002H
                       3     ;ÐÝÃß²ðÐ¶ÖÐ¶Ï»½ÐÑºó£¬Ó¦¶Ô 5830 ÖØÐÂ³õÊ¼»¯
                       4     ;×¢Òâ:  1.      59 °åµÄºìµÆÓëÖÐ¶ÏP3.3(EX1),ÔÚ¿ªEX1ÖÐ¶ÏÇ°ÐëÇåIE1±êÊ¶£¬ÔÚ¿ªex1ÖÐ¶Ïºó²»ÄÜÁÁºìµ
                             Æ,ÔÚÊÕµ½bstºó£¬³·ex1ÖÐ¶ÏÊ¹ÄÜ¡£
                       5     ;       2.      ÔÚ ½ÓÊÕ¹³ÌÖÐ¿ªÍâ²¿ÖÐ¶ÏEX0¡¢EX1ºÍ¶¨Ê±Æ÷ÖÐ¶ÏT0,EX0ÎªÊ¾Ý½ÓÊÕpin,ex1Îª²å¿¨ºÍ²ðÐ
                             ¶pin¡£
                       6     ;       3.      ÔÚ ÐÝÃßÇ°ÃðºìµÆ,ÇåIE1±êÊ¶£¬¿ªIE1ÖÐ¶ÏÊ¹ÄÜ¡£
                       7     ;       
                       8     ;ÃèÊö£ºOBU Ö÷³ÌÐò¼¯
                       9     ;º¯ÊÉêÇë
                      10     ;_FUN_OBUMAIN_MASTER                                    ---     OBU Ö÷³ÌÐò
                      11     ;       ¸½Êô³ÌÐò¶Î:SEG_OBUMAIN_CDACTIVE                 ---     ²ð¶¯¼¤»î
                      12     ;       ¸½Êô³ÌÐò¶Î:SEG_OBUMAIN_CARDACTIVE               ---     ²å¿¨¼¤»î
                      13     ;       ¸½Êô³ÌÐò¶Î:SEG_OBUMAin_WAVEACTIVE               ---     Î¢²¨¼¤»î
                      14     ;       
                      15     ;_FUN_OBUMAIN_INITSYS                                   ---     ÏµÍ³³õÊ¼»¯(¼Ä´æÆ÷¡¢±äÁ¿µÈ³õ
                             Ê¼»¯)
                      16     ;_FUN_OBUMain_BASEINIT                                  ---     Ó¦ÓÃ³õÊ¼»¯
                      17     ;_FUN_OBUMain_CARDPreDeal                               ---     ¿¨Æ¬Ô¤´¦Àí
                      18     ;_FUN_OBUMain_CardInfoDisplay                           ---     ¿¨ÐÅÏ¢ÏÔÊ¾
                      19     ;½»Ò×²»Ë³£¬»á³öÏÖ³µÅÆ²»Ò»ÖÂ
                      20     ;°´ÏÂ²ð¶¯£¬½»Ò×»á²»Ë³
                      21     ;**********************************************************************
                      22     ;$include (OBUMAIN.INC)
                +1    23     ;--- ¶Î¶¨Òå---
                +1    24     ?pr?OBUMAIN?tf0_timer_1         SEGMENT CODE
                +1    25     ?pr?OBUMAIN?Mater               SEGMENT CODE
                +1    26     ?dt?OBUMAIN?dataVarD            SEGMENT DATA
                +1    27     ?ba?OBUMAIN?BitD                SEGMENT DATA    BitAddressable
                +1    28     ?dt?OBUMAIN?dataD               SEGMENT DATA
                +1    29     ?idt?OBUMAIN?idataD             SEGMENT IDATA
                +1    30     ?xdt?OBUMAIN?xdataD             SEGMENT XDATA
                +1    31     ?co?OBUMAIN?STR                 SEGMENT CODE
                +1    32     ;?dt?OBUMAIN?dataDv             SEGMENT DATA
                +1    33     
                +1    34     ;--- ³£Á¿¶¨Òå---
                +1    35     ;0 - 31                                                                                    
                                  ¹¤×÷Çø
                +1    36     ;32 - 47                                                                                   
                                  Î»¿ÉÑ°Ö·
                +1    37     ;30 - 7F                                                                                   
                                  Ê¾Ýç·³åÇø
                +1    38     ;Çë×¢ÒâÒÔÏÂ´ÓCONST_LEN_WORKBUFµ½CONST_LEN_TXBUFÒò51±àÒëµÄÎÊÌâºÍ³ÌÐòµÄÐèÇó,ÔÚcommon.incÖÐÖØ¸
                             ´¶¨Òå
                +1    39     ;ËùÒÔÒª¸ÄÒªÒ»Æð¸Ä
  0008          +1    40     CONST_LEN_WORKBUF1              EQU     8                                                  
                                  ;¹¤×÷Çø1´óÐ¡
  0000          +1    41     CONST_LEN_WORKBUF2              EQU     0;8                                                
                                  ;¹¤×÷Çø2´óÐ¡
  0008          +1    42     CONST_LEN_WORKBUF               EQU     CONST_LEN_WORKBUF1+CONST_LEN_WORKBUF2              
                                  ;¹¤×÷Çø×Ü´óÐ¡8
  0018          +1    43     CONST_LEN_VARBUF                EQU     32-CONST_LEN_WORKBUF                               
                                  ;ÄÚ´æ±äÁ¿Çø24+8
  0006          +1    44     CONST_LEN_BITBUF                EQU     6;5;4                                              
                                  ;Î»¿ÉÑ°Ö·¿Õ¼ä´óÐ¡6+32
  0080          +1    45     CONST_LEN_RXBUF                 EQU     128                                                
                                  ;¶Áç·³å´óÐ¡ 38Æð
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE     2

  005A          +1    46     CONST_LEN_RXBUFPRE              EQU     128-CONST_LEN_WORKBUF-CONST_LEN_VARBUF-CONST_LEN_BI
                             TBUF ;¶Áç·³å¿é1´óÐ¡128+38
  0026          +1    47     CONST_LEN_RXBUFEND              EQU     CONST_LEN_RXBUF-CONST_LEN_RXBUFPRE                 
                                  ;¶Áç·³å¿é2´óÐ¡2,ÊÇÎªÁËCRC1 CRC2166+2
  0002          +1    48     CONST_LEN_RXCRC                 EQU     2                                                  
                                  ;ÔÚHDLC½ÓÊÕÊ±,Òª¼ÓÁËCRCµÄ³¤¶È
  0001          +1    49     CONST_LEN_POWUP                 EQU     1                                                  
                                  ;168+1
  0057          +1    50     CONST_LEN_STACK                 EQU     128 - CONST_LEN_RXBUFEND - CONST_LEN_RXCRC - CONST_
                             LEN_POWUP    ;¶ÑÕ»ç·³å´óÐ¡, 256-169=87
                +1    51     
                +1    52     
                +1    53     ;XDATA
  0080          +1    54     CONST_LEN_TXBUF                 EQU     128                                                
                                  ;·¢ËÍç·³å´óÐ¡,ÊÇÎªÁËCRC1 CRC2
  0002          +1    55     CONST_LEN_TXCRC                 EQU     2
  007D          +1    56     CON_LEN_BUFLEN                  EQU     256 - CONST_LEN_TXBUF - CONST_LEN_TXCRC - 1        
                                  ;2010-05-16
                +1    57     
                +1    58     ;--- ÄÚÍâ´æµØÖ·¶¨Òå ---
----            +1    59             RSEG    ?dt?OBUMAIN?dataVarD
0000            +1    60     DATA_WORKBUF2:                  DS      CONST_LEN_WORKBUF2
0000            +1    61     DATA_VER:                       DS      CONST_LEN_VARBUF
  0000          +1    62     DATA_VARBAUDHALF                EQU     DATA_VER                                           
                                  ;1 BYTE ²¨ÌØÂÊ  ´úÂë¼ûcommon.inc¶¨Òå)
  0001          +1    63     DATA_VARBAUDFULL                EQU     DATA_VARBAUDHALF + 1                               
                                  ;1 BYTE ²¨ÌØÂÊ  ´úÂë¼ûcommon.inc¶¨Òå)
  0002          +1    64     Money                           EQU     DATA_VARBAUDFULL + 1                               
                                  ;4 BYTE
  0006          +1    65     DATA_DSRCTXLEN                  EQU     MONEY + 4                                          
                                  ;1 BYTE ÓÃÓÚ¼ÇÂ¼DSRC·¢ËÍ³¤¶È£¬ÒÔ±ãÔÚÖØ·¢Ê±Ê¹ÓÃ
  0007          +1    66     DATA_DSRCRXLEN                  EQU     DATA_DSRCTXLEN + 1                                 
                                  ;1 BYTE ÓÃÓÚ¼ÇÂ¼DSRC½ÓÊÕ³¤¶È£¬ÒÔ±ãÔÚÖØ·¢Ê±Ê¹ÓÃ
  0008          +1    67     DATA_DATAP                      EQU     DATA_DSRCRXLEN + 1                                 
                                  ;1 BYTE ÓÃÓÚÄÚ´æÖ¸Õë
  0009          +1    68     DATA_XDATAP                     EQU     DATA_DATAP + 1                                     
                                  ;1 BYTE ÓÃÓÚÍâ´æÖ¸Õë
  000A          +1    69     DATA_OBUID                      EQU     DATA_XDATAP + 1                                    
                                  ;4 OBUID
                +1    70     ;DATA_CARDTYPE                  EQU     DATA_OBUID + 4                                     
                                  ;1 BYTE ¿¨ÀàÐÍ£¬=23±íÊ¾¼ÇÕË¿¨£¬=22±íÊ¾Í¨ÐÐ¿¨
                +1    71     ;DATA_IRQEN                     EQU     DATA_CARDTYPE + 1                                  
                                  ;1 BYTE ÖÐ¶ÏÊ¹ÄÜ
  000E          +1    72     DATA_IRQEN                      EQU     DATA_OBUID + 4                                     
                                  ;1 BYTE ÖÐ¶ÏÊ¹ÄÜ
  000F          +1    73     DATA_CardNO                     EQU     DATA_IRQEN + 1                                     
                                  ;5 BYTE ·Ç½Ó´¥¿¨ºÅ
  0014          +1    74     DATA_CMDTYPE                    EQU     DATA_CardNO + 5                                    
                                  ;1 BYTE
  0015          +1    75     DATA_MFCOM                      EQU     DATA_CMDTYPE + 1                                   
                                  ;1 BYTE
  0016          +1    76     DATA_NCONTACTTYPE               EQU     DATA_MFCOM + 1                                     
                                  ;1 BYTE ·Ç½Ó´¥¿¨ÀàÐÍ(Pro »ò MF)
  0017          +1    77     DATA_PowerONTimer               EQU     DATA_NCONTACTTYPE + 1                              
                                  ;1 BYTE ÉÏµç¶¨Ê±Æ÷Òç³ö´ÎÊ£¬ÉÏÏÞÓÉCONST_SYS_PowerONTimerÖµ¾ö¶¨
                +1    78             
----            +1    79             RSEG    ?ba?OBUMAIN?BitD
0000            +1    80     BITDBUF01:                      DS      1                                                  
                                  ;Î»¿Õ¼ä
  0007          +1    81     BIT_BUFADDR                     BIT     BITDBUF01.7                                        
                                  ;±íÊ¾µ±Ç°²Ù×÷µÄ´æ´¢Çø,=0ÄÚ´æ;=1Íâ´æ
  0006          +1    82     BIT_SERIALOVERTIMERX            BIT     BITDBUF01.6                                        
                                  ;Èí´®¿ÚµÈ´½ÓÊÕÊÇ·ñÓÐÊ±¼ä,ÏÞÖÆ=0Ã»ÓÐÏÞÖÆ;=1ÓÐÊ±¼äÏÞÖÆ
  0005          +1    83     BIT_VERIFY                      BIT     BITDBUF01.5                                        
                                  ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑéÎ»,=0²»Òª£¬=1Òª
  0004          +1    84     BIT_HARDFLAG                    BIT     BITDBUF01.4                                        
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE     3

                                  ;Ó²´®¿Ú½ÓÊÕÍê³É±ê¼Ç=1Íê³É;=0Î´Íê³É½ÓÊÕ(Æ½Ê±Îª0)
  0003          +1    85     BIT_CDJH                        BIT     BITDBUF01.3                                        
                                  ;=0±íÊ¾Ã»ÓÐ²ð¹£»=1±íÊ¾ÒÑ²ð¹
  0002          +1    86     BIT_FIRSTTX                     BIT     BITDBUF01.2                                        
                                  ;Ó²´®¿Ú·¢ËÍµÚÒ»¸ö×Ö½Ú±ê¼Ç=0±íÊ¾»¹Ã»·¢ËÍµÚÒ»¸ö×Ö½Ú£¬=1±íÊ¾ÒÑ·¢ËÍ
  0001          +1    87     BIT_T0T1                        BIT     BITDBUF01.1                                        
                                  ;µ±Ç°¿¨Æ¬Ð­Òé=1±íÊ¾T1;  =0±íÊ¾T0Ð­Òé;
                +1    88     ;(½èÓÃBIT_T0T1)
  0001          +1    89     BIT_TMP                         BIT     BITDBUF01.1
  0000          +1    90     BIT_9600                        BIT     BITDBUF01.0                                        
                                  ;=1µ±Ç°²¨ÌØÂÊÊÇ9600;=0µ±Ç°²¨ÌØÂÊ²»ÊÇ9600
                +1    91     
0001            +1    92     BITDBUF02:                      DS      1                                                  
                                  ;Î»¿Õ¼ä
  000F          +1    93     BIT_CHANNELFLAG                 BIT     BITDBUF02.7                                        
                                  ;= 1±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ1,  =0 ±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ0
                +1    94     ;BIT_HDLC_BST_FIRST             BIT     BITDBUF02.6                                        
                                  ;¼ÇÂ¼HDLCÉÏÒ»´ÎµÄµçÆ½×´Ì¬
  000D          +1    95     BIT_ESAMICC                     BIT     BITDBUF02.5                                        
                                  ;µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
  000C          +1    96     BIT_SERFIRBYTE                  BIT     BITDBUF02.4                                        
                                  ;µ±Ç°ÊÇ·ñÕÔÚ¼ìË÷´®¿ÚµÚÒ»¸ö×Ö½Ú=1±íÊ¾ÊÇ;=0±íÊ¾²»ÊÇ
  000B          +1    97     BIT_N                           BIT     BITDBUF02.3                                        
                                  ;DSRC½ÓÊÕµ½µÄNÎ»
  000A          +1    98     BIT_INSERTCARD                  BIT     BITDBUF02.2                                        
                                  ;=1±íÊ¾µ±Ç°OBU²å¿¨;=0±íÊ¾µ±Ç°OBUÃ»²å¿¨;
  0009          +1    99     BIT_ISFRX                       BIT     BITDBUF02.1                                        
                                  ;=0±íÊ¾´®¿ÚµÚÒ»¸ö×Ö½Ú½ÓÊÕ   ;1±íÊ¾µÚÒ»¸ö×Ö½Ú²»½ÓÊÕ      
  0008          +1   100     BIT_ISRXNB                      BIT     BITDBUF02.0                                        
                                  ;=1 ±íÊ¾Î´ÊÕµ½¹·Ç¹ã²¥µØÖ· =0 ±íÊ¾ÒÑ¾­ÊÕµ½¹·Ç¹ã²¥µØÖ·
                +1   101     
0002            +1   102     BITDBUF03:                      DS      1
  0017          +1   103     BIT_ACCESS                      BIT     BITDBUF03.7                                        
                                  ; ¼ÇÂ¼·Ç¹ã²¥µØÖ·ÖÐ 'ACTION.request'µÚÈÎ» ¡®accessCredentials¡¯µÄÖµ
  0016          +1   104     BIT_KEY                         BIT     BITDBUF03.6                                        
                                  ; ¼ÇÂ¼·Ç¹ã²¥µØÖ·ÖÐ 'fill'µÚ7Î» ¡®keyedForEncrypt¡¯µÄÖµ
  0015          +1   105     BIT_SETMMI                      BIT     BITDBUF03.5                                        
                                  ; =0±íÃ»ÓÐÊÕµ½¹SetMMI,=1SetMMI
  0014          +1   106     BIT_ESAM                        BIT     BITDBUF03.4                                        
                                  ; =1±íÊ¾ÓÐESAM =0 ±íÊ¾Ã»ÓÐESAM¿¨
  0013          +1   107     BIT_ESAMErr                     BIT     BITDBUF03.3                                        
                                  ;=0±íÊ¾²»ÏÔÊ¾£¬=1±íÊ¾ÒªÏÔÊ¾
  0012          +1   108     BIT_GETRESULT                   BIT     BITDBUF03.2                                        
                                  ; =1±íÊ¾È¡T0Ê±£¬È¡·µ»Ø½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û
  0011          +1   109     BIT_ProMF                       BIT     BITDBUF03.1                                        
                                  ; =1 ±íÊ¾ÊÇpro¿¨£¬=0±íÊ¾£¬MF¿¨
  0010          +1   110     BIT_ERR_flag                    BIT     BITDBUF03.0
                +1   111     
0003            +1   112     BITDBUF04:                      DS      1
  001F          +1   113     BIT_PROF                        BIT     BITDBUF04.7                                        
                                  ; Pro¿¨·¢ËÍÐòºÅ
  001E          +1   114     BIT_ISContact                   BIT     BITDBUF04.6                                        
                                  ; ÉÏÒ»´Î¼°±¾´Î²å¿¨ÀàÐÍ£¬=1ÊÇ½Ó´¥¿¨=0ÊÇ·Ç½Ó´¥¿¨
  001D          +1   115     BIT_GetSecure                   BIT     BITDBUF04.5                                        
                                  ; =1±íÊ¾ÊÕµ½GetSecureÖ¸Áî£¬=0±íÊ¾Ã»ÓÐÊÕµ½GetSecure
  001C          +1   116     BIT_BST                         BIT     BITDBUF04.4                                        
                                  ; =1±íÊ¾ÊÕµ½¹bst,=0±íÊ¾Ã»ÓÐÊÕµ½¹bst
                +1   117     ;BIT_ContactIssue               BIT     BITDBUF04.3                                        
                                  ; ·¢ÐÐ¿ªÊ¼±ê¼Ç  =0£¬Ã»ÓÐ½ÓÊÕ·¢ÐÐÐÅÏ¢£¬=1½ÓÊÕµ½·¢ÐÐÐÅÏ¢
  001B          +1   118     BIT_HaveRecordCellID            BIT     BITDBUF04.3                                        
                                  ;0±íÊ¾»¹Ã»ÓÐ¼ÇÂ¼CELLID£¬=1±íÊ¾ÒÑ¾­¼ÇÂ¼CELLID
  001A          +1   119     BIT_rstype                      BIT     BITDBUF04.2                                        
                                  ; CPU¿¨¸´Î»Ê±£¬ÊÇ·ñÓÐBCC£»=1 ±íÊ¾ÓÐ£»=0 ±íÊ¾Ã»ÓÐ
  0019          +1   120     BIT_RXSerialBaud                BIT     BITDBUF04.1                                        
                                  ; ÊÇ·ñÊÕµ½¹¸´Î»²¨ÌØÂÊ=0Ã»ÓÐ;=1±íÊ¾ÓÐ
  0018          +1   121     BIT_gbICCInfo                   BIT     BITDBUF04.0
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE     4

                +1   122     
0004            +1   123     BITDBUF05:                      DS      1
  0027          +1   124     BIT_privateInfo                 BIT     BITDBUF05.7
  0026          +1   125     BIT_CD                          BIT     BITDBUF05.6                                        
                                  ;=0±íÊ¾Î´±»²ð¶¯£¬=1 ±»²ð¶¯
  0025          +1   126     BIT_ACTIVECARD                  BIT     BITDBUF05.5                                        
                                  ;=0 ·Ç²ð¶¯¼¤»î;=1 ²ð¶¯¼¤»î
  0024          +1   127     BIT_ESAMOK                      BIT     BITDBUF05.4                                        
                                  ;=0 ESAMÊµ¼Ê²Ù×÷²»³É¹¦ ;= ESAMÊµ¼Ê²Ù×÷²»³É¹¦
                +1   128     
  0023          +1   129     BIT_BJPRE                       BIT     BITDBUF05.3                                        
                                  ;=0 ±íÊ¾±±¾©¿¨Ã»ÓÐÔ¤¶Á;=1±íÊ¾±±¾©¿¨ÓÐÔ¤¶Á
  0022          +1   130     BIT_BJ1219                      BIT     BITDBUF05.2                                        
                                  ;=0 ±íÊ¾±±¾©¿¨Ô¤¶Á0012;=1 ±íÊ¾±±¾©¿¨Ô¤¶Á0019
  0021          +1   131     BIT_InsertEr                    BIT     BITDBUF05.1                                        
                                  ;=0³µÅÆÏà·û     =1³µÅÆ²»·û
  0020          +1   132     BIT_CD_sw                       BIT     BITDBUF05.0                                        
                                  ;=0±íÊ¾Î´±»²ð¶¯£¬=1 ±»²ð¶¯
                +1   133     
0005            +1   134     BITDBUF06:                      DS      1
  002F          +1   135     BIT_PPS                         BIT     BITDBUF06.7                                        
                                  ;=0 Ã»×öPPS£¬=1×ö¹pps
  002E          +1   136     BIT_MMITIRMSTART                BIT     BITDBUF06.6                                        
                                  ;=0 Ã»Æô¶¯ =1Æô¶¯
  002D          +1   137     BIT_esamtran                    BIT     BITDBUF06.5                                        
                                  ;=1 Ê¹ÓÃ¹esamÍ¨µÀ;=0 Ê¹ÓÃ¹esamÍ¨µÀ
                +1   138     
  002C          +1   139     BIT_Cellinfo                    BIT     BITDBUF06.4
                +1   140     ;BIT_CKXT                       BIT     BITDBUF06.4                                        
                                  ;=0 ÏàÍ¬£¬=1 ²»ÏàÍ¬
                +1   141     
  002B          +1   142     BIT_Sel1001                     BIT     BITDBUF06.3                                        
                                  ;=0Ã»ÓÐÑ¡¹1001Ä¿Â¼£¬=1±íÊ¾Ñ¡¹1001Ä¿Â¼
                +1   143     
  002A          +1   144     BIT_5823RX_flag                 BIT     BITDBUF06.2                                        
                                  ;=0±íÊ¾Î´½ÓÊÕ;=1±íÊ¾ÒÑ½ÓÊÕ
  0029          +1   145     BIT_INITCard                    BIT     BITDBUF06.1
  0028          +1   146     BIT_USEROK                      BIT     BITDBUF06.0                                        
                                  ;=1 ÓÃ»§¿¨Ô¤¶Á³É¹¦;;=0 ÓÃ»§¿¨Ô¤¶ÁÊ§°Ü;
                +1   147     
                +1   148     
                +1   149     
                +1   150     
----            +1   151             RSEG    ?dt?OBUMAIN?dataD
0000            +1   152     DATA_RXBUF:                     DS      CONST_LEN_RXBUFPRE                                 
                                  ;¶Áç·³å¿é1
  0003          +1   153     DATA_RXBUFCPUSTART              EQU     DATA_RXBUF + 3  
                +1   154             
----            +1   155             RSEG    ?idt?OBUMAIN?idataD
0000            +1   156     IDATA_RXBUFTWOBLOCK:            DS      CONST_LEN_RXBUFEND                                 
                                  ;¶Áç·³å¿é2
0026            +1   157     IDATA_RXCRC:                    DS      CONST_LEN_RXCRC                                    
                                  ;CRC
0028            +1   158     IDATA_POWUP:                    DS      CONST_LEN_POWUP                                    
                                  ;ÉÏµç±êÖ¾
0029            +1   159     IDATA_STACK:                    DS      CONST_LEN_STACK                                    
                                  ;¶ÑÕ»¿Õ¼ä
                +1   160     
                +1   161     ; Íâ´æ¶¨Òå
----            +1   162             RSEG    ?xdt?OBUMAIN?xdataD
0000            +1   163     XDATA_TXBUF:                    DS      CONST_LEN_TXBUF                                    
                                  ; ·¢ËÍç·³å
0080            +1   164     IDATA_TXCRC:                    DS      CONST_LEN_TXCRC                                    
                                  ; CRC
0082            +1   165     XDATA_BUF:                      DS      CON_LEN_BUFLEN                                     
                                  ; 
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE     5

00FF            +1   166     XDATA_TFTINIT_FLAG:             DS      1                                                  
                                  ; TFT_LCD ÊÇ·ñ³õÊ¼»¯±êÖ¾
                +1   167     
                +1   168     ;==========================================================================================
                             =====
  0082          +1   169     XDATA_VARSTART                  EQU     XDATA_TXBUF + CONST_LEN_TXBUF + CONST_LEN_TXCRC
  0082          +1   170     XDATA_BeaconID                  EQU     XDATA_VARSTART                                     
                                  ;4 Byte  ÌìÏßID
  0086          +1   171     XDATA_UnixTime                  EQU     XDATA_BeaconID + 4                                 
                                  ;4 Byte  unix time
  008A          +1   172     XDATA_NUM                       EQU     XDATA_UnixTime + 4                                 
                                  ;1 Byte ²âÊÔÓÃ£¬¿´OBUÖØ·¢´ÎÊ
  008B          +1   173     XDATA_SOFTFIRSTSCANTIME         EQU     XDATA_NUM + 1                                      
                                  ;1 Byte´®¿ÚËÑË÷×î´óÊ±¼ä
  008C          +1   174     XDATA_SoftSerialP               EQU     XDATA_SOFTFIRSTSCANTIME + 1                        
                                  ;1 Byte ÓÃÓÚÈí¿Ú´®¿Ú½ÓÊÕ³ÌÐò¼ÇÂ¼ÆôÊ¼µØÖ·
  008D          +1   175     XDATA_FIX                       EQU     XDATA_SoftSerialP + 1                              
                                  ;1 Byte ²ð¿¨Î»
                +1   176     ; XDATA_SysParam                        EQU     XDATA_FIX + 1                              
                                          ;1 ¼õ¼ÇÊ±ê¼Ç[ ÔÝÊ±´æ·Å¼õ¼ÇÊµÄ´ÎÊ£¬Èç¹ûOBU´ÓÎ´²ð¶¯¹£¬ÔòÎªFFH ]
  008E          +1   177     XDATA_IssueRSCTL                EQU     XDATA_FIX + 1                                      
                                  ;ÓÐÏß·¢ÐÐÐòºÅ
  008F          +1   178     XDATA_IssueCMD                  EQU     XDATA_IssueRSCTL + 1                               
                                  ;ÓÐÏß·¢ÐÐÃüÁî×Ö
  0090          +1   179     XDATA_HighBaud                  EQU     XDATA_IssueCMD + 1                                 
                                  ; ÓÃ»§¿¨¸´Î»·µ»ØµÄµÚÈ¸ö×Ö½Ú
  0091          +1   180     XDATA_VSTNUM                    EQU     XDATA_HighBaud + 1                                 
                                  ; ·¢ËÍVSTµÄ¸öÊ
  0092          +1   181     XDATA_RAND                      EQU     XDATA_VSTNUM + 1                                   
                                  ; ÓÃÓÚËæ»úÑÓÊ±
  0093          +1   182     XDATA_Power                     EQU     XDATA_RAND + 1                                     
                                  ; 3 ¸ö×Ö½Ú£¬ÓÃÓÚ¼ÇÂ¼µçÁ¿
                +1   183     ; XDATA_VSTNUM
                +1   184     ; DATA_WK                       EQU     XDATA_Power + 3                                    
                                  ;
  0096          +1   185     XDATA_SETMMI                    EQU     XDATA_Power + 3                                    
                                  ; ±íÊ¾ÊÕµ½setmmi
  0097          +1   186     XDATA_BSTNUM                    EQU     XDATA_SETMMI + 1                                   
                                  ; ±£Áô
  0098          +1   187     XDATA_SC                        EQU     XDATA_BSTNUM + 1                                   
                                  ; ±£Áô
                +1   188             
  0099          +1   189     XDATA_RTCTime                   EQU     XDATA_SC + 1                                       
                                  ; 
  009A          +1   190     XDATA_RTCMode                   EQU     XDATA_RTCTime + 1                                  
                                  ; 
  009B          +1   191     XDATA_TOTALNUMH                 EQU     XDATA_RTCMode + 1
  009C          +1   192     XDATA_TOTALNUML                 EQU     XDATA_TOTALNUMH + 1
                +1   193     ;XDATA_GSMMode                  EQU     XDATA_RTCMode + 1                                  
                                  ; 
  009D          +1   194     XDATA_SP                        EQU     XDATA_TOTALNUML + 1     
  009E          +1   195     XDATA_54                        EQU     XDATA_SP + 1    
  009F          +1   196     XDATA_433rxnum                  EQU     XDATA_54 + 1    
  00A0          +1   197     XDATA_setmminum                 EQU     XDATA_433rxnum + 1
                +1   198     ;XDATA_CL                       EQU     xdata_setmminum + 1
  00A1          +1   199     XDATA_LastBeaconID              EQU     XDATA_setmminum + 1
  00A9          +1   200     XDATA_LoadCellToUser            EQU     XDATA_LastBeaconID+8                               
                                  ;=0±íÊ¾ ´ÓESAM¿¨µ¼³öÊ¾Ýµ½ÓÃ»§¿¨³É¹¦
  00AA          +1   201     XDATA_VSTDELAY                  EQU     XDATA_LoadCellToUser+1                             
                                  ;µ±Ç°Ëæ»úÑÓÊ±ºÀÃëÊ
  00AB          +1   202     XDATA_CELLID                    EQU     XDATA_VSTDELAY+1                                   
                                  ;CELL ID
  00AD          +1   203     XDATA_HOLD                      EQU     XDATA_CELLID + 2
                +1   204     
                +1   205     ;==========================================================================================
                             =====
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE     6

                +1   206     ;--- ÊäÈë¶¨Òå ---
                +1   207     ;--- CC1101 ---
                +1   208     EXTRN   CODE(_Fun_GSM_RTCEn)
                +1   209     EXTRN   CODE(_FUN_CC1101_CZ)
                +1   210     EXTRN   CODE(_FUN_CC1101_RVWR02)
                +1   211     EXTRN   CODE(_FUN_CC1101_RX)                          
                +1   212     EXTRN   CODE(_FUN_CC1101_RESET)                 ;¸´Î»
                +1   213     EXTRN   CODE(_FUN_CC1101_INIT)                  ;³õÊ¼»¯ CC1101
                +1   214     EXTRN   CODE(_FUN_CC1101_SetWakeUpTime)         ;³õÊ¼»¯1101»½ÐÑÊ±¼ä
                +1   215     EXTRN   CODE(_FUN_CC1101_RVOn)                  ;´ò¿ª½ÓÊÕ       
                +1   216     EXTRN   CODE(_FUN_CC1101_RVOff)                 ;¹Ø±Õ½ÓÊÕ
                +1   217     EXTRN   CODE(_FUN_CC1101_RVWR)                  ;»Ø¶Á
                +1   218     EXTRN   CODE(_FUN_CC1101_Idle)                  ;ÉèÖÃµ±Ç°Îª¿ÕÏÐ×´Ì¬
                +1   219     EXTRN   CODE(_FUN_CC1101_WakeUP)                ;ÉèÖÃµ±Ç°Îª»½ÐÑ×´Ì¬
                +1   220     EXTRN   CODE(_FUN_CC1101_spioSoftRXCC1101RXCC1101)
                +1   221     ;extrn  code(_FUN_CC1101_spioSingleSoft)
                +1   222     
                +1   223     ;--- GSM ---
                +1   224     extrn   code(STR_chang)
                +1   225     EXTRN   CODE(STR_GSM_VotaLow)
                +1   226     EXTRN   CODE(STR_GSM_RRing)
                +1   227     EXTRN   CODE(_FUN_GSM_Insert)
                +1   228     EXTRN   CODE(_FUN_GSM_GetOffset)
                +1   229     EXTRN   CODE(_FUN_GSM_RTCON)
                +1   230     EXTRN   CODE(_FUN_GSM_RTCOFF)
                +1   231             
                +1   232     ;--- LIB ---
                +1   233     EXTRN   CODE(_FUN_LIB_1MSDELAYC)
                +1   234     ;extrn  CODE(_FUN_LIB_1MSDELAYC)
                +1   235     EXTRN   CODE(_FUN_LIB_PowerPer)
                +1   236     EXTRN   CODE(_FUN_LIB_RANDDELAY)
                +1   237     extrn   code(_FUN_LIB_RAND)
                +1   238     EXTRN   CODE(_FUN_LIB_DELAY)                                                               
                                  ;ÑÓÊ±º¯Ê1
                +1   239     EXTRN   CODE(_FUN_LIB_DELAYSIMPLAY)                                                        
                                  
                +1   240             
                +1   241     ;EXTRN  CODE(_getrsuadcrc)                                                                 
                                  ;¼ÆËãCRC        
                +1   242     EXTRN   CODE(_FUN_LIB_BEEP)                                                                
                                  ;ÏìÁåÖ¸Áî
                +1   243     EXTRN   CODE(_FUN_LIB_XDATATODATA)                                                         
                                  ;¸´ÖÆÊ¾Ý´ÓÍâ´æµ½ÄÚ´æ
                +1   244     EXTRN   CODE(_FUN_LIB_DATATOXDATA)                                                         
                                  ;¸´ÖÆÊ¾Ý´ÓÄÚ´æµ½Íâ´æ
                +1   245     EXTRN   CODE(_FUN_LIB_FLASHTODATA)                                                         
                                  ;¸´ÖÆÊ¾Ý´ÓFLASHµ½ÄÚ´æ(FALSH Ê¾Ý¶¨ÒåÐèÎª ³¤¶È + Ê¾Ý)
                +1   246     EXTRN   CODE(_FUN_LIB_FLASHTOXDATA)                                                        
                                  ;¸´ÖÆÊ¾Ý´ÓFLASHµ½Íâ´æ(FALSH Ê¾Ý¶¨ÒåÐèÎª ³¤¶È + Ê¾Ý)
                +1   247     EXTRN   CODE(_FUN_LIB_CompareTime)
                +1   248     ;EXTRN  CODE(_FUN_LIB_POWERDOWN)
                +1   249     EXTRN   CODE(_FUN_LIB_FLASHTODATAEX)
                +1   250     EXTRN   CODE(_FUN_LIB_PowerADD)
                +1   251     EXTRN   CODE(_FUN_LIB_ESAMErr)
                +1   252     
                +1   253     ;--- Serial ---
                +1   254     EXTRN   CODE(_FUN_SERIAL_AudioTXSOFT)
                +1   255     EXTRN   CODE(_FUN_SERIAL_TXSOFT)                                                           
                                  ;Èí´®¿Ú·¢ËÍÊ¾Ý
                +1   256     EXTRN   CODE(_FUN_SERIAL_RXSOFT)                                                           
                                  ;Èí´®¿Ú½ÓÊÕÊ¾Ý
                +1   257     EXTRN   CODE(_FUN_SERIAL_RXTXINTERRUPT)                                                    
                                  ;Ó²´®¿Ú·¢ËÍ½ÓÊÕÖÐ¶Ï´¦Àí³ÌÐò
                +1   258     EXTRN   CODE(_FUN_SERIAL_INIT)                                                             
                                  ;´®¿ÚÏà¹Ø¼Ä´æÆ÷³õÊ¼»¯
                +1   259     EXTRN   CODE(_FUN_SERIAL_TXHARD)                                                           
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE     7

                                  ;Ó²´®¿Ú·¢ËÍÊ¾Ý
                +1   260     EXTRN   CODE(_FUN_SERIAL_RXHARD)        
                +1   261     EXTRN   CODE(_FUN_SERIAL_RXSOFTRST)                                                        
                                  ;Ó²´®¿Ú½ÓÊÕÊ¾Ý
                +1   262     
                +1   263     ;--- CPU CARD ---
                +1   264     EXTRN   CODE(_FUN_Contact_INIT)                                                            
                                  ;³õÊ¼»¯CPU¿¨
                +1   265     EXTRN   CODE(_FUN_Contact_Channel0)                                                        
                                  ;T0¿¨²Ù×÷º¯Ê
                +1   266     EXTRN   CODE(_FUN_Contact_Channel1)                                                        
                                  ;T1¿¨²Ù×÷º¯Ê
                +1   267     EXTRN   CODE(_FUN_Contact_PPS)                                                             
                                  ;PPS[ÉèÖÃÖ¸Áî]
                +1   268     EXTRN   CODE(_FUN_Contact_CHANGEBAUD)
                +1   269     EXTRN   CODE(_FUN_Contact_Channel)                                                         
                                  ;¿¨²Ù×÷[Èí·¢ËÍ£¬Ó²½ÓÊÕ])
                +1   270     
                +1   271     ;--- HDLC ---
                +1   272     EXTRN   CODE(_FUN_HDLC_ISSleepMod)
                +1   273     EXTRN   CODE(_FUN_HDLC_CLOSECLR)
                +1   274     EXTRN   CODE(_FUN_HDLC_RXSetMMI)
                +1   275     EXTRN   CODE(_FUN_HDLC_Frexiaodui)
                +1   276     EXTRN   CODE(_Enter_Sleep_Mode)
                +1   277     EXTRN   CODE(_FUN_HDLC_CheckReg9To18)
                +1   278     ;EXTRN  CODE(_FUN_HDLC_5822Init)
                +1   279     ;---EXTRN       CODE(_FUN_HDLC_RXSetMMI)
                +1   280     EXTRN   CODE(_FUN_HDLC_RX)                                                                 
                                  ;HDLC½ÓÊÕº¯Ê
                +1   281     ;EXTRN  CODE(_FUN_HDLC_RXForBST)
                +1   282     EXTRN   CODE(_FUN_HDLC_TX)                                                                 
                                  ;HDLC·¢ËÍº¯Ê
                +1   283     EXTRN   CODE(_FUN_HDLC_5830Init)
                +1   284     EXTRN   CODE(_FUN_HDLC_CHANGECHANNEL)
                +1   285     
                +1   286     ;--- GSM ---
                +1   287     EXTRN   CODE(GSM_SerialINTRX_RXRight)
                +1   288     EXTRN   CODE(STR_GSM_SRR)
                +1   289     EXTRN   CODE(_Fun_GSM_GetCellIDEN)
                +1   290     ;EXTRN  CODE(_Fun_GSM_GetCellID)
                +1   291     ;-----BK5822-----------
                +1   292     ;EXTRN  CODE(_AutoASKReg)
                +1   293     ;EXTRN  CODE(_Enter_TX_Carrier_Mode)
                +1   294     ;EXTRN  CODE(_Enter_Sleep_Mode)
                +1   295     ;EXTRN  CODE(_TXDIOpin)
                +1   296     ;EXTRN  CODE(_Enter_Receive_Mode)
                +1   297     
                +1   298     ;EXTRN  CODE(_AutoASKReg_read)
                +1   299     ;EXTRN  CODE(_AutoASKReg_uppower)
                +1   300     EXTRN   CODE(Rx_En)
                +1   301     ;EXTRN  CODE(_Enable_Wake_Up)
                +1   302     ;EXTRN  CODE(_BK5822_RST)       ;¸´Î»BK5822 ¼Ä´æÆ÷
                +1   303     ;EXTRN  CODE(_BK5822_RXTX)      ;R7=0 ½øÈë½ÓÊÕÄ£Ê½      R7=1 ½øÈë·¢ËÍÄ£Ê½
                +1   304     
                +1   305     ;--- LCD ---
                +1   306     EXTRN   CODE(_Func_LCD_Display)
                +1   307     EXTRN   CODE(STR_HV02)
                +1   308     EXTRN   CODE(STR_LOWVo)
                +1   309     EXTRN   CODE(STR_NOXCARD)
                +1   310     EXTRN   CODE(_dspmoney)
                +1   311     EXTRN   CODE(_Func_LCD_INIT)
                +1   312     EXTRN   CODE(_FUN_LCD_DisplayExMoney)
                +1   313     EXTRN   CODE(_dspERRNUM)
                +1   314     EXTRN   CODE(_FUN_LCD_DisplayExChina)
                +1   315     EXTRN   CODE(STR_LoGCard)
                +1   316     EXTRN   CODE(STR_VHDif)
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE     8

                +1   317     EXTRN   CODE(STR_IsNotSC)
                +1   318     EXTRN   CODE(STR_ActiveOK)
                +1   319     EXTRN   CODE(STR_ActiveFail)
                +1   320     EXTRN   CODE(STR_InputOk)
                +1   321     EXTRN   CODE(STR_InputFail)
                +1   322     EXTRN   CODE(STR_IllegalInputCard)
                +1   323     EXTRN   CODE(STR_InputCardInvalid)
                +1   324     EXTRN   CODE(STR_IllegalACTCard)
                +1   325     EXTRN   CODE(STR_ACTCardInvalid)
                +1   326     EXTRN   CODE(STR_AlreadyWRIn)
                +1   327     EXTRN   CODE(STR_RXCardEr)
                +1   328     EXTRN   CODE(STR_SetMMIEr)
                +1   329     EXTRN   CODE(STR_ReWrOK)
                +1   330             
                +1   331     ;EXTRN  CODE(_COLOR_Func_LCD_Display)
                +1   332     ;EXTRN  CODE(_COLOR256_Func_LCD_Display)
                +1   333             
                +1   334     EXTRN   CODE(_FUN_LCD_ICON)
                +1   335     EXTRN   CODE(STR_SET)
                +1   336     EXTRN   CODE(STR_NOCARD)
                +1   337     EXTRN   CODE(STR_ERROR)
                +1   338     EXTRN   CODE(STR_PASS)
                +1   339     EXTRN   CODE(STR_LOWV)
                +1   340     EXTRN   CODE(STR_UNFIX)
                +1   341     EXTRN   CODE(STR_INFLAG)
                +1   342     EXTRN   CODE(STR_CLR)
                +1   343     EXTRN   CODE(STR_ErrCARD)
                +1   344     EXTRN   CODE(STR_MoveCARD)
                +1   345     EXTRN   CODE(STR_CPBF)
                +1   346     
                +1   347     EXTRN   CODE(STR_ICON_BJ)
                +1   348     EXTRN   CODE(STR_COLOR_1)
                +1   349     EXTRN   CODE(STR_COLOR256_1)
                +1   350     EXTRN   CODE(STR_COLOR256_2)
                +1   351     ;EXTRN  CODE(STR_card_miss)
                +1   352     ;EXTRN  CODE(STR_card1_miss)
                +1   353     ;EXTRN  CODE(STR_COLOR_1)
                +1   354     ;EXTRN  CODE(STR_card_miss)
                +1   355     ;EXTRN  CODE(_COLOR_Func_LCD_Display)
                +1   356     ;--- FALSH ---
                +1   357     EXTRN   CODE(_rdflash)                                                                     
                                  ;¶ÁFlashµ½ÄÚ´æ
                +1   358     EXTRN   CODE(_rdflashxr)                                                                   
                                  ;¶ÁFlashµ½Íâ´æ
                +1   359     EXTRN   CODE(_wrflash)                                                                     
                                  ;Ð´Flashµ½ÄÚ´æ
                +1   360     EXTRN   CODE(_wrflashxr)                                                                   
                                  ;Ð´Flashµ½Íâ´æ
                +1   361     EXTRN   CODE(_eraseflash)                                                                  
                                  ;²Á³Flash
                +1   362     
                +1   363     ;--- DSRC ---
                +1   364     EXTRN   CODE(_FUN_DSRC_VST)
                +1   365     ;EXTRN  CODE(_FUN_DSRC_GetSecure)
                +1   366     ;EXTRN  CODE(_FUN_DSRC_SetSecure)
                +1   367     ;EXTRN  CODE(_FUN_DSRC_GetRand)
                +1   368     ;EXTRN  CODE(_FUN_DSRC_TransferChannel)
                +1   369     ;EXTRN  CODE(_FUN_DSRC_SetMMI)
                +1   370     EXTRN   CODE(_FUN_DSRC_NSpecial)
                +1   371             
                +1   372     ;--- CardAPP ---
                +1   373     EXTRN   CODE(_FUN_CARDAPP_ReadBinary02)
                +1   374     EXTRN   CODE(FUN_LCD_HVTransfer)
                +1   375     EXTRN   CODE(_FUN_CARDAPP_SelectFile)                                                      
                                  ;Ñ¡Ä¿Â¼»òÎÄ¼þ
                +1   376     EXTRN   CODE(_FUN_CARDAPP_ReadBinary)                                                      
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE     9

                                  ;¶Á¶þ½øÖÆÎÄ¼þ
                +1   377     EXTRN   CODE(_FUN_CARDAPP_GetBalance)
                +1   378     EXTRN   CODE(_FUN_CARDAPP_ReadRecord)
                +1   379     EXTRN   CODE(_FUN_CARDAPP_CardChannel)
                +1   380     EXTRN   CODE(_FUN_CARDAPP_DECCounter)
                +1   381     EXTRN   CODE(_FUN_CARDAPP_ACTIVEOBU)
                +1   382     EXTRN   CODE(_FUN_CARDAPP_GDFXOBU)
                +1   383     EXTRN   CODE(_FUN_CARDAPP_ISInOrACT)
                +1   384             
                +1   385     ;--- NContact ---
                +1   386     EXTRN   CODE(_FUN_NContact_Rc500Rst)
                +1   387     EXTRN   CODE(_FUN_NContact_Rc500Config)
                +1   388     EXTRN   CODE(_FUN_NContact_Rc500Request)
                +1   389     EXTRN   CODE(_FUN_NContact_Rc500AntiColl)
                +1   390     EXTRN   CODE(_FUN_NContact_Rc500Select)
                +1   391             
                +1   392     ;--- PRO ---
                +1   393     EXTRN   CODE(_FUN_ProCard_rats)
                +1   394     EXTRN   CODE(_FUN_Pro_PPS)
                +1   395     EXTRN   CODE(_FUN_NContact_Rc500_PPS_Config)
                +1   396             
                +1   397     ;--- Contact Issue ---
                +1   398     EXTRN   CODE(_FUN_ContactIssue_INITDown)
                +1   399     EXTRN   CODE(_FUN_ContactIssue_INIT02)
                +1   400     EXTRN   CODE(_FUN_ContactIssue_INIT)                    ;       ·¢ÐÐ³õÊ¼»¯
                +1   401     EXTRN   CODE(_FUN_ContactIssue_Release)
                +1   402     EXTRN   CODE(_FUN_ContactIssue_RXBST)                   ;       ·¢ÐÐ_½ÓÊÕBST
                +1   403     EXTRN   CODE(_FUN_ContactIssue_RX)                      ;       ½ÓÊÕ·¢ÐÐÐÅÏ¢£¨´ÓPC£©
                +1   404     EXTRN   CODE(_FUN_ContactIssue_TX)                      ;       ·¢ËÍ·¢ÐÐ»ØÓ¦ÐÅÏ¢£¨µ½PC£©   
                                                  ·¢ËÍ·¢ÐÐ»ØÓ¦ÐÅÏ¢£¨µ½PC£©
                +1   405             
                +1   406     ;--- Audio ---
                +1   407     EXTRN   CODE(_Fun_GSM_Audio)
                +1   408     EXTRN   CODE(STR_GSM_Input)
                +1   409     EXTRN   CODE(STR_GSM_Output)
                +1   410             
                +1   411     ;--- test ---
                +1   412     EXTRN   CODE(TEST_SerialTX03_issue)
                +1   413     EXTRN   CODE(_FUN_TEST_SerialTX03)
                +1   414     EXTRN   CODE(TEST_5823_Loop)
                +1   415     EXTRN   CODE(_FUN_TEST_RED)
                +1   416     extrn   code(_FUN_TEST_DISPLAY02)
                +1   417     EXTRN   CODE(_FUN_TEST_GSMTX)
                +1   418     EXTRN   CODE(_FUN_TEST_Master)
                +1   419     EXTRN   CODE(_FUN_TEST_DISPLAY)
                +1   420     extrn   code(_FUN_TEST_checkrtcmode)
                +1   421     ;EXTRN  CODE(STR_FileInfo)
                +1   422     ;EXTRN  CODE(_rxfromrsu)
                +1   423     EXTRN   CODE(_FUN_TEST_BEEP)
                +1   424     EXTRN   CODE(_FUN_TESTCARDAPP_SelectFile)
                +1   425     EXTRN   CODE(_FUN_MF_Channel)
                +1   426     extrn   code(_FUN_CARDAPP_UpdateBinary)
                +1   427     ;--- GSM ---
                +1   428     EXTRN   CODE(_FUN_GSM_SerialINTRX)
                +1   429     extrn   code(_Power_Up)
                +1   430     extrn   code(Tx_Carrier_En)
                +1   431     ;EXTRN  CODE(_rxfromrsu_bit_lp1_42)
                +1   432     ;---Êä³ö¶¨Òå---
                +1   433     ;PUBLIC xdata_flag
                +1   434     ;PUBLIC rxing
                +1   435     ;CODE
                +1   436     ;PUBLIC BIT_RTC_TMP
                +1   437     ;PUBLIC BIT_CKXT
                +1   438     PUBLIC  OBUMAIN_MASTER_MAINSleep
                +1   439     PUBLIC  BIT_Cellinfo
                +1   440     ;PUBLIC BIT_SysRST
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    10

                +1   441     PUBLIC  SLEEP
                +1   442     public  XDATA_433rxnum
                +1   443     public  XDATA_54
                +1   444     PUBLIC  BIT_5823RX_flag
                +1   445     PUBLIC  AP_start
                +1   446     ;PUBLIC _FUN_OBUMain_PWRLowDis
                +1   447     ;PUBLIC OBUMAIN_MASTER_MAINSleep
                +1   448     PUBLIC  BIT_PPS
                +1   449     ;PUBLIC _FUN_OBUMain_PPS
                +1   450     PUBLIC  _FUN_OBUMAIN_INITSYS
                +1   451     PUBLIC  _Fun_OBUmain_SysUNSleep
                +1   452     PUBLIC  XDATA_RTCMode
                +1   453     PUBLIC  start_user
                +1   454     ;PUBLIC AP_START
                +1   455     PUBLIC  _FUN_OBUMAIN_BASEINIT
                +1   456     PUBLIC  CONST_LEN_RXBUF
                +1   457     PUBLIC  CONST_LEN_TXBUF,DATA_OBUID
                +1   458             
                +1   459     ;DATA   
                +1   460     ;PUBLIC DATA_VARTMP1
                +1   461     PUBLIC  XDATA_TOTALNUMH
                +1   462     PUBLIC  XDATA_TOTALNUML
                +1   463     PUBLIC  DATA_VARBAUDHALF
                +1   464     PUBLIC  DATA_VARBAUDFULL
                +1   465     PUBLIC  DATA_RXBUF
                +1   466     PUBLIC  MONEY
                +1   467     PUBLIC  DATA_DSRCTXLEN
                +1   468     PUBLIC  DATA_DSRCRXLEN
                +1   469     PUBLIC  DATA_DATAP
                +1   470     PUBLIC  DATA_XDATAP
                +1   471     PUBLIC  DATA_IRQEN
                +1   472     PUBLIC  DATA_CardNO
                +1   473     PUBLIC  DATA_CMDTYPE
                +1   474     PUBLIC  DATA_MFCOM
                +1   475     PUBLIC  DATA_PowerONTimer
                +1   476     PUBLIC  XDATA_Power
                +1   477             
                +1   478     ;XDATA
                +1   479     PUBLIC  XDATA_RAND
                +1   480     PUBLIC  XDATA_TXBUF
                +1   481             
                +1   482     PUBLIC  XDATA_TFTINIT_FLAG
                +1   483             
                +1   484     PUBLIC  XDATA_BeaconID
                +1   485     PUBLIC  XDATA_UnixTime
                +1   486     ;PUBLIC XDATA_TXBUFCPUSTART
                +1   487     PUBLIC  XDATA_NUM
                +1   488     PUBLIC  XDATA_SOFTFIRSTSCANTIME
                +1   489     PUBLIC  XDATA_SOFTSERIALP
                +1   490     PUBLIC  XDATA_FIX
                +1   491     PUBLIC  XDATA_IssueRSCTL                ;ÓÐÏß·¢ÐÐÐòºÅ
                +1   492     PUBLIC  XDATA_IssueCMD                  ;ÓÐÏß·¢ÐÐÃüÁî×Ö
                +1   493     PUBLIC  XDATA_HighBaud
                +1   494     PUBLIC  XDATA_HOLD
                +1   495     PUBLIC  XDATA_CELLID
                +1   496     ;PUBLIC XDATA_SYSPARAM
                +1   497             
                +1   498     ;BIT
                +1   499     PUBLIC  BIT_ESAMOK
                +1   500     PUBLIC  BIT_BUFADDR
                +1   501     PUBLIC  BIT_SERIALOVERTIMERX
                +1   502     PUBLIC  BIT_VERIFY
                +1   503     PUBLIC  BIT_HARDFLAG
                +1   504     ;PUBLIC BIT_HDLC_BST_FIRST
                +1   505     PUBLIC  BIT_CHANNELFLAG
                +1   506     PUBLIC  BIT_FIRSTTX
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    11

                +1   507     ;PUBLIC BIT_LASTF
                +1   508     PUBLIC  BIT_T0T1
                +1   509     PUBLIC  BIT_TMP
                +1   510     PUBLIC  BIT_9600
                +1   511     ;PUBLIC BIT_HDLCLASTD
                +1   512     PUBLIC  BIT_ESAMICC
                +1   513     PUBLIC  BIT_SERFIRBYTE
                +1   514     PUBLIC  BIT_INSERTCARD
                +1   515     PUBLIC  BIT_ISFRX
                +1   516     PUBLIC  BIT_ACCESS
                +1   517     PUBLIC  BIT_KEY
                +1   518     PUBLIC  BIT_N
                +1   519     PUBLIC  BIT_SETMMI
                +1   520     PUBLIC  BIT_GETRESULT
                +1   521     PUBLIC  BIT_proMF
                +1   522     PUBLIC  BIT_ERR_flag
                +1   523     PUBLIC  BIT_PROF
                +1   524     PUBLIC  BIT_ISContact
                +1   525     PUBLIC  BIT_BST
                +1   526             
                +1   527     ;PUBLIC BIT_ContactIssue
                +1   528     PUBLIC  BIT_rstype
                +1   529     PUBLIC  BIT_RXSerialBaud
                +1   530     PUBLIC  BIT_privateInfo
                +1   531     PUBLIC  BIT_gbICCInfo
                +1   532     PUBLIC  BIT_CD
                +1   533     PUBLIC  BIT_BJ1219
                +1   534     PUBLIC  BIT_ESAMERR
                +1   535     ;String 
                +1   536     PUBLIC  STR_SYS_OBUID,OBUMAIN_MASTER_MEMORYCLR
                +1   537     PUBLIC  XDATA_RTCTime
                +1   538     PUBLIC  BIT_HaveRecordCellID
                +1   539             
                +1   540     ;////////////////////////////////////////////////////////////////////////////////////////
----            +1   541             cseg at 2fh                     ; 2FH   ;30H
002F            +1   542     STR_SYS_OBUID:                          ; OBUID
002F 0401A1FF   +1   543             DB      04H,01H,0a1H,0FFH,0FFH  ; 
0033 FF                      
                +1   544                                             ; 
----            +1   545             RSEG    ?co?OBUMAIN?STR         ; 
                +1   546     ;/////////////////////////////FOR TEST/////////////////////////////////////////////////////
                             /    
                +1   547     ;STR_DSRC_VST2:         ;VST»ù±¾×é³É
                +1   548     ;       DB      00eH                    ;³¤¶È
                +1   549     ;       DB      001H,0FEH,0FEH,0FEH     ;MACµØÖ·
                +1   550     ;       DB      0C0H                    ;MAC¿ØÖÆÓò
                +1   551     ;       DB      003H                    ;LLC¿ØÖÆÓò
                +1   552             
                +1   553     ;       DB      091H                    ;×Ö¶Î×ÖÍ·
                +1   554     ;       DB      0D0H
                +1   555     ;       DB      000H
                +1   556     ;       DB      001H
                +1   557     ;       DB      0C1H
                +1   558     ;       DB      001H
                +1   559     ;       DB      0FFH
                +1   560     ;       DB      027H
                +1   561     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////////////
                +1   562     ;Ö¸ÁîÀàÐÍ       ÉÈÇøºÅ  ¿éºÅ    "A"/"B"(41H|42H)        ÃÜÔ¿    UUU
0000            +1   563     STR_ReadBlock01:
0000 0A         +1   564             DB      0AH             
0001 00000141   +1   565             DB      000H,000H,001H,041H,0A0H,0A1H,0A2H,0A3H,0A4H,0A5H
0005 A0A1A2A3                
0009 A4A5                    
000B            +1   566     STR_ReadBlock04:
000B 0A         +1   567             DB      0AH
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    12

000C 00000441   +1   568             DB      000H,000H,004H,041H,080H,008H,090H,009H,0A0H,00AH       
0010 80089009                
0014 A00A                    
0016            +1   569     STR_ReadBlock10:
0016 0A         +1   570             DB      0AH
0017 00001041   +1   571             DB      000H,000H,010H,041H,0A0H,0A1H,0A2H,0A3H,0A4H,0A5H
001B A0A1A2A3                
001F A4A5                    
                +1   572             
0021            +1   573     STR_DSRC_SELDF:         ;VST»ù±¾×é³É
0021 05         +1   574             DB      005H                    ;³¤¶È
0022 00A40000   +1   575             DB      000h,0a4h,000h,000h,002h
0026 02                      
                +1   576             
0027            +1   577     STR_DSRC_DF:            ;VST»ù±¾×é³É
0027 02         +1   578             DB      002H                    ;³¤¶È
0028 DF01       +1   579             DB      0dfh,001h 
                +1   580             
002A            +1   581     STR_CARDAPP_time:
002A 04         +1   582             db      4
002B 00000002   +1   583             db      00,00,00,02
                +1   584             
002F            +1   585     STR_CARDAPP_time02:
002F 04         +1   586             db      4
0030 00000101   +1   587             db      00,00,01,01
0034            +1   588     str_cmdup:
                +1   589             ;db     6ah
                +1   590     ;       db      6ah
                +1   591     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh
                +1   592     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh          
                +1   593     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh  
                +1   594     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh  
                +1   595     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh  
                +1   596     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh  
                +1   597     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,00Bh
                +1   598             
                     599     
                     600     ;$include (COMMON.INC)
                +1   601             
  009C          +1   602     BRT                                     EQU     09CH
  009C          +1   603     Reg_Sys_BRT                             EQU     09CH
                +1   604     ;RegBit_SysBRT_S1BRS                    BIT     Reg_Sys_BRT.1
                +1   605     
  009A          +1   606     S2CON                                   EQU     09AH
  009B          +1   607     S2BUF                                   EQU     09BH
  00AF          +1   608     IE2                                     EQU     0AFH
  00EA          +1   609     RELOAD2_CONTR                           EQU     0EAH
                +1   610             
  0001          +1   611     CONST_TIMEER02                          EQU     1       ;Ò»ÖÜ6Ãë
  00FE          +1   612     CONST_TIMEER03                          EQU     254;245
  0001          +1   613     CONST_TIMEER04                          EQU     1
                +1   614     
  00A2          +1   615     REG_51_AUXR1                            EQU     0A2H
  00AE          +1   616     EPCAI                                   BIT     IE.6
                +1   617     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////
                +1   618     ;NEW LCD
                +1   619     ;PIN_Sys_IsDownload                     BIT     P3.7
                +1   620     ;PIN_LCD_OLEDD1                         BIT     P1.2
                +1   621     ;PIN_LCD_OLEDD0                         BIT     P1.3
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    13

                +1   622     ;PIN_LCD_OLEDDC                         BIT     P1.4
                +1   623     ;PIN_LCD_OLEDRES                        BIT     P1.5
                +1   624     ;PIN_LCD_OLEDCS                         BIT     P4.3
                +1   625     ;PIN_LCD_BG                             BIT     P1.1
                +1   626     ;PIN_OLED_ENSY7208                      BIT     P4.0
  00C0          +1   627     P4                                      EQU     0C0H
                +1   628     ;------------------------------------------------------------------------------------------
                             -----
  0005          +1   629     CONST_MAX_RXNUM                         EQU     5
                +1   630     ;TI_CCxxx0_SRES                         EQU     30H
                +1   631     ;Configuration Registers                
  0046          +1   632     CONST_GDO2_VALUE                        EQU     46h;046H        ;06H
  0002          +1   633     CONST_GDO2_MCSM2                        EQU     2;03H
  00C0          +1   634     read_burst                              EQU     0C0H
  0000          +1   635     TI_CCxxx0_IOCFG2                        EQU     00H        ;GDO2 output pin configuration
  0001          +1   636     TI_CCxxx0_IOCFG1                        EQU     01H        ;GDO1 output pin configuration
  0002          +1   637     TI_CCxxx0_IOCFG0                        EQU     02H        ;GDO0 output pin configuration
  0003          +1   638     TI_CCxxx0_FIFOTHR                       EQU     03H        ;RX FIFO and TX FIFO thresholds
  0004          +1   639     TI_CCxxx0_SYNC1                         EQU     04H        ;Sync word, high byte
  0005          +1   640     TI_CCxxx0_SYNC0                         EQU     05H        ;Sync word, low byte
  0006          +1   641     TI_CCxxx0_PKTLEN                        EQU     06H        ;Packet length
  0007          +1   642     TI_CCxxx0_PKTCTRL1                      EQU     07H        ;Packet automation control
  0008          +1   643     TI_CCxxx0_PKTCTRL0                      EQU     08H        ;Packet automation control
  0009          +1   644     TI_CCxxx0_ADDR                          EQU     09H        ;Device address
  000A          +1   645     TI_CCxxx0_CHANNR                        EQU     0AH        ;Channel number
  000B          +1   646     TI_CCxxx0_FSCTRL1                       EQU     0BH        ;Frequency synthesizer control
  000C          +1   647     TI_CCxxx0_FSCTRL0                       EQU     0CH        ;Frequency synthesizer control
  000D          +1   648     TI_CCxxx0_FREQ2                         EQU     0DH        ;Frequency control word, high by
                             te
  000E          +1   649     TI_CCxxx0_FREQ1                         EQU     0EH        ;Frequency control word, middle 
                             byte
  000F          +1   650     TI_CCxxx0_FREQ0                         EQU     0FH        ;Frequency control word, low byt
                             e
  0010          +1   651     TI_CCxxx0_MDMCFG4                       EQU     10H        ;Modem configuration
  0011          +1   652     TI_CCxxx0_MDMCFG3                       EQU     11H        ;Modem configuration
  0012          +1   653     TI_CCxxx0_MDMCFG2                       EQU     12H        ;Modem configuration
  0013          +1   654     TI_CCxxx0_MDMCFG1                       EQU     13H        ;Modem configuration
  0014          +1   655     TI_CCxxx0_MDMCFG0                       EQU     14H        ;Modem configuration
  0015          +1   656     TI_CCxxx0_DEVIATN                       EQU     15H        ;Modem deviation setting
  0016          +1   657     TI_CCxxx0_MCSM2         EQU     16H        ;Main Radio Cntrl State Machine config
  0017          +1   658     TI_CCxxx0_MCSM1         EQU     17H        ;Main Radio Cntrl State Machine config
  0018          +1   659     TI_CCxxx0_MCSM0         EQU     18H        ;Main Radio Cntrl State Machine config
  0019          +1   660     TI_CCxxx0_FOCCFG        EQU     19H        ;Frequency Offset Compensation config
  001A          +1   661     TI_CCxxx0_BSCFG         EQU     1AH        ;Bit Synchronization configuration
  001B          +1   662     TI_CCxxx0_AGCCTRL2      EQU     1BH        ;AGC control
  001C          +1   663     TI_CCxxx0_AGCCTRL1      EQU     1CH        ;AGC control
  001D          +1   664     TI_CCxxx0_AGCCTRL0      EQU     1DH        ;AGC control
  001E          +1   665     TI_CCxxx0_WOREVT1       EQU     1EH        ;High byte Event 0 timeout
  001F          +1   666     TI_CCxxx0_WOREVT0       EQU     1FH        ;Low byte Event 0 timeout
  0020          +1   667     TI_CCxxx0_WORCTRL       EQU     20H        ;Wake On Radio control
  0021          +1   668     TI_CCxxx0_FREND1        EQU     21H        ;Front end RX configuration
  0022          +1   669     TI_CCxxx0_FREND0        EQU     22H        ;Front end TX configuration
  0023          +1   670     TI_CCxxx0_FSCAL3        EQU     23H        ;Frequency synthesizer calibration
  0024          +1   671     TI_CCxxx0_FSCAL2        EQU     24H        ;Frequency synthesizer calibration
  0025          +1   672     TI_CCxxx0_FSCAL1        EQU     25H        ;Frequency synthesizer calibration
  0026          +1   673     TI_CCxxx0_FSCAL0        EQU     26H        ;Frequency synthesizer calibration
  0027          +1   674     TI_CCxxx0_RCCTRL1       EQU     27H        ;RC oscillator configuration
  0028          +1   675     TI_CCxxx0_RCCTRL0       EQU     28H        ;RC oscillator configuration
  0029          +1   676     TI_CCxxx0_FSTEST        EQU     29H        ;Frequency synthesizer cal control
  002A          +1   677     TI_CCxxx0_PTEST         EQU     2AH        ;Production test
  002B          +1   678     TI_CCxxx0_AGCTEST       EQU     2BH        ;AGC test
  002C          +1   679     TI_CCxxx0_TEST2         EQU     2CH        ;Various test settings       
  002D          +1   680     TI_CCxxx0_TEST1         EQU     2DH        ;Various test settings
  002E          +1   681     TI_CCxxx0_TEST0         EQU     2EH        ;Various test settings
                +1   682     
                +1   683     ;Strobe commands
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    14

  0030          +1   684     TI_CCxxx0_SRES          EQU     30H        ;Reset chip.
  0032          +1   685     TI_CCxxx0_SXOFF         EQU     32H        ;Turn off crystal oscillator.
  0033          +1   686     TI_CCxxx0_SCAL          EQU     33H        ;Calibrate freq synthesizer & disable
  0034          +1   687     TI_CCxxx0_SRX           EQU     34H        ;Enable RX.
  0035          +1   688     TI_CCxxx0_STX           EQU     35H        ;Enable TX.
  0036          +1   689     TI_CCxxx0_SIDLE         EQU     36H        ;Exit RX / TX
  0037          +1   690     TI_CCxxx0_SAFC          EQU     37H        ;AFC adjustment of freq synthesizer
  0038          +1   691     TI_CCxxx0_SWOR          EQU     38H        ;Start automatic RX polling sequence
  0039          +1   692     TI_CCxxx0_SPWD          EQU     39H        ;Enter pwr down mode when CSn goes hi
  003A          +1   693     TI_CCxxx0_SFRX          EQU     3AH        ;Flush the RX FIFO buffer.
  003B          +1   694     TI_CCxxx0_SFTX          EQU     3BH        ;Flush the TX FIFO buffer.
  003C          +1   695     TI_CCxxx0_SWORRST       EQU     3CH        ;Reset real time clock.
  003D          +1   696     TI_CCxxx0_SNOP          EQU     3DH        ;No operation.
                +1   697             
                +1   698     ;Status_registers
  0030          +1   699     TI_CCxxx0_PARTNUM                       EQU     30H        ;Part number
  0031          +1   700     TI_CCxxx0_VERSION                       EQU     31H        ;Current version number
  0032          +1   701     TI_CCxxx0_FREQEST                       EQU     32H        ;Frequency offset estimate
  0033          +1   702     TI_CCxxx0_LQI                           EQU     33H        ;Demodulator estimate for link q
                             uality
  0034          +1   703     TI_CCxxx0_RSSI                          EQU     34H        ;Received signal strength indica
                             tion
  0035          +1   704     TI_CCxxx0_MARCSTATE                     EQU     35H        ;Control state machine state
  0036          +1   705     TI_CCxxx0_WORTIME1                      EQU     36H        ;High byte of WOR timer
  0037          +1   706     TI_CCxxx0_WORTIME0                      EQU     37H        ;Low byte of WOR timer
  0038          +1   707     TI_CCxxx0_PKTSTATUS                     EQU     38H        ;Current GDOx status and packet 
                             status
  0039          +1   708     TI_CCxxx0_VCO_VC_DAC                    EQU     39H        ;Current setting from PLL cal mo
                             dule
  003A          +1   709     TI_CCxxx0_TXBYTES                       EQU     3AH        ;Underflow and # of bytes in TXF
                             IFO
  003B          +1   710     TI_CCxxx0_RXBYTES                       EQU     3BH        ;Overflow and # of bytes in RXFI
                             FO
  007F          +1   711     TI_CCxxx0_NUM_RXBYTES                   EQU     7FH        ;Mask "# of bytes" field in _RXB
                             YTES
                +1   712             
                +1   713     ;Other memory locations
  003E          +1   714     TI_CCxxx0_PATABLE                       EQU     3EH
  003F          +1   715     TI_CCxxx0_TXFIFO                        EQU     3FH
  003F          +1   716     TI_CCxxx0_RXFIFO                        EQU     3FH
                +1   717             
  0082          +1   718     PIN_WAVE_RX                             BIT     p0.2;P2.0;p0.1;p1.0
  00B4          +1   719     PIN_OUTPUT_CLK                          BIT     P3.4;P1.0
  008F          +1   720     REG_WAKE_CLK0                           EQU     08FH
  000F          +1   721     CONST_DATA_VALUE1                       EQU     15;20;20;20
  00DE          +1   722     CONST_DATA_VALUE2                       EQU     208+14;14;255;208+14;14
                +1   723     ;------------------------------------------------------------------------------------------
                             -----
                +1   724     ;µçÔ´¿ØÖÆ
  0095          +1   725     PIN_PWRDWN_LCD                          BIT     p1.5;p1.3        
  00A4          +1   726     Pin_pwrdwn                              BIT     p2.4;P2.7        
  00A3          +1   727     PIN_PWR_GSM                             BIT     p2.3;P2.4        
                +1   728             
                +1   729     ;--- Active ---
  00B5          +1   730     Pin_unfix                               BIT     P3.5     
  00B3          +1   731     PIN_card_exist                          BIT     p3.3    
  00B2          +1   732     WKO_BK                                  BIT     P3.2     
  0095          +1   733     PIN_PWR_LOWIO                           BIT     p1.5;P2.1        
                +1   734             
                +1   735     ;--- ESAM ---
  0083          +1   736     PIN_ESAM_TX                             BIT     p0.3;P2.6        
  0083          +1   737     PIN_ESAM_RX                             BIT     p0.3;P2.6        
  0085          +1   738     PIN_ESAM_RST                            BIT     p0.5;P2.5        
                +1   739             
                +1   740     ;--- Éù¹â¿ØÖÆ ---
  00C5          +1   741     Pin_Red                                 BIT     p4.5;P4.1        
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    15

  00C4          +1   742     Pin_Gre                                 BIT     p4.4;P4.5
                +1   743     
  0095          +1   744     PIN_BELL_01                             BIT     p1.5;P0.3        
  0095          +1   745     PIN_BELL_02                             BIT     p1.5;P0.2        
                +1   746             
                +1   747     ;--- CC1101 ---
                +1   748     ;Pin_CC1101_SS                          BIT     p3.6     
                +1   749     ;PIN_CC1101_SCLK                                BIT     P2.2     
                +1   750     ;PIN_CC1101_MOSI                                BIT     P2.3     
                +1   751     ;PIN_CC1101_MISO                                BIT     p3.7     
                +1   752     ;PIN_CC1101_GDO2                                BIT     P1.6     
                +1   753             
                +1   754     ;--- Òº¾§Ò½Å ---
  0095          +1   755     Pin_LCD_CS                              BIT     p1.5;p1.4        
  0095          +1   756     Pin_LCD_RST                             BIT     P1.5;    
  0095          +1   757     Pin_LCD_DC                              BIT     p1.5;p1.7       
  0095          +1   758     Pin_LCD_SCL                             BIT     p1.5;p3.4       
  0095          +1   759     Pin_LCD_SDA                             BIT     p1.5;p4.3       
                +1   760             
                +1   761     ;--- 522 ---
  0087          +1   762     PIN_522_SCLK                            BIT     P0.7;P0.7        
  00C6          +1   763     PIN_522_MOSI                            BIT     p4.6;P0.5        
  00C1          +1   764     PIN_522_MISO                            BIT     p4.1;P0.4        
  0086          +1   765     Pin_522_SS                              BIT     P0.6;P0.6        
  0084          +1   766     Pin_522_RST                             BIT     p0.4;P4.6        
                +1   767             
  00B0          +1   768     PIN_SOFTSERIALRX                        BIT     P3.0     
  00B1          +1   769     PIN_SOFTSERIALTXH                       BIT     P3.1     
                +1   770             
  0095          +1   771     PIN_PWR_SE                              BIT     p1.5    ;p2.2   ; P2.4  ;       [ GSM ] 
  0095          +1   772     Pin_SW                                  BIT     p1.5    
                +1   773             
                +1   774             
                +1   775     ;fu dand wei
  00A6          +1   776     Pin_ES_Rst                              BIT     p2.6;P2.3       ;p4.0;P4.4      ; P4.4  
  00B4          +1   777     PIN_SE_IO1                              BIT     p3.4;p2.4       ;P4.4;p2.3;p4.4;P2.2    ; P
                             0.5
                +1   778             
                +1   779             
                +1   780     ;--- CC1101 ---
  0097          +1   781     PIN_UART2_TX                            BIT     p1.7    ;p3.6   ; P3.7
  0096          +1   782     PIN_UART2_RX                            BIT     P1.6    ; 
                +1   783             
  0000          +1   784     BUSY                                    BIT     20H.0
                +1   785     ;////////////////////////////////////////////////Ò½Å¶¨Òå///////////////////////////////////
                             //////////////
                +1   786     ;ÉèÎª¸ß
  0091          +1   787     PIN_BK_CE                               BIT     p1.1     
  0090          +1   788     Pin_5823BK_CS                           BIT     P1.0
                +1   789     ;Éè³ÉÊäÈëÎª¸ß                           
  0080          +1   790     Pin_5823BK_MISO                         BIT     p0.0     
  0092          +1   791     Pin_5823BK_IRQ                          BIT     p1.2      
                +1   792     ;   Éè ³É µÍ
  0081          +1   793     Pin_5823BK_MOSI                         BIT     p0.1     
  00C2          +1   794     Pin_5823BK_SCLK                         BIT     p4.2     
                +1   795      
  0082          +1   796     PIN_WAVE_CHANNEL1                       BIT     p0.2;P2.0        
                +1   797      
                +1   798     ;=====================================================================================
  008F          +1   799     Reg_WakeClk0                            EQU     08fH
  00DC          +1   800     Reg_WakeClk_04                          BIT     CCON.4  ;P3.4
  00DD          +1   801     Reg_WakeClk_05                          BIT     CCON.5  ;P3.5
                +1   802     ;ÉùÃ÷STC12C5628AD ÏµÁÐ MCU ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷µØÖ·
  00B7          +1   803     IPH EQU 0B7H ;ÖÐ¶ÏÓÅÏÈ¼¶¸ßÎ»¼Ä´æÆ÷
  00AE          +1   804     EPCA_LVD EQU IE.6 ;PCA ÖÐ¶ÏºÍ LVD(µÍÑ¹¼ì²â)ÖÐ¶Ï¹²ÏíµÄ×ÜÖÐ¶Ï¿ØÖÆÎ»
  00F9          +1   805     CH EQU 0F9H ;PCA ¼ÆÊÆ÷¸ß8 Î»¡£
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    16

  00E9          +1   806     CL EQU 0E9H ;PCA ¼ÆÊÆ÷µÍ8 Î»¡£
                +1   807     
                +1   808     ;------------------------
  00D8          +1   809     CCON EQU 0D8H ;PCA ¿ØÖÆ¼Ä´æÆ÷¡£
  00D8          +1   810     CCF0 EQU CCON.0 ;PCA Ä£¿é0 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00D9          +1   811     CCF1 EQU CCON.1 ;PCA Ä£¿é1 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DA          +1   812     CCF2 EQU CCON.2 ;PCA Ä£¿é2 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DB          +1   813     CCF3 EQU CCON.3 ;PCA Ä£¿é3 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DC          +1   814     CCF4 EQU CCON.4 ;PCA Ä£¿é4 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DD          +1   815     CCF5 EQU CCON.5 ;PCA Ä£¿é5 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DE          +1   816     CR EQU CCON.6 ;1:ÔÊÐí PCA ¼ÆÊÆ÷¼ÆÊ, ±ØÐëÓÉÈí¼þÇå0¡£
  00DF          +1   817     CF EQU CCON.7 ;PCA ¼ÆÊÆ÷Òç³ö(CH,CL ÓÉ FFFFH ±äÎª 0000H)±êÖ¾,
                +1   818     ;PCA ¼ÆÊÆ÷Òç³öºóÓÉÓ²¼þÖÃÎ»,±ØÐëÓÉÈí¼þÇå0¡£
                +1   819     ;------------------------
  00D9          +1   820     CMOD EQU 0D9H ;PCA ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   821     
                +1   822     ;CMOD.7 CIDL: idle ×´Ì¬Ê± PCA ¼ÆÊÆ÷ÊÇ·ñ¼ÌÐø¼ÆÊ, 0: ¼ÌÐø¼ÆÊ, 1: Í£Ö¹¼ÆÊ¡£
                +1   823     ;CMOD.2 CPS1: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 1¡£
                +1   824     ;CMOD.1 CPS0: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 0¡£
                +1   825     ; CPS1 CPS0
                +1   826     ; 0 0 Íâ²¿¾§ÌåÆµÂÊ/12¡£
                +1   827     ; 0 1 Íâ²¿¾§ÌåÆµÂÊ/2¡£
                +1   828     ; 1 0 Timer 0 Òç³öÂö³å£¬
                +1   829     ; Timer 0 »¹¿ÉÍ¨¹ AUXR ¼Ä´æÆ÷ÉèÖÃ³É¹¤×÷ÔÚ 12T »ò 1T Ä£Ê½¡£
                +1   830     ; 1 1 ´Ó ECI/P3.4 ½ÅÊäÈëµÄÍâ²¿Ê±ÖÓ¡£
                +1   831     ;CMOD.0 ECF: PCA ¼ÆÊÆ÷Òç³öÖÐ¶ÏÔÊÐíÎ», 1-- ÔÊÐí CF(CCON.7) ²úÉúÖÐ¶Ï¡£
                +1   832     ;------------------------
  00FA          +1   833     CCAP0H EQU 0FAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FB          +1   834     CCAP1H EQU 0FBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FC          +1   835     CCAP2H EQU 0FCH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FD          +1   836     CCAP3H EQU 0FDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FE          +1   837     CCAP4H EQU 0FEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FF          +1   838     CCAP5H EQU 0FFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00EA          +1   839     CCAP0L EQU 0EAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EB          +1   840     CCAP1L EQU 0EBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EC          +1   841     CCAP2L EQU 0ECH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00ED          +1   842     CCAP3L EQU 0EDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EE          +1   843     CCAP4L EQU 0EEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EF          +1   844     CCAP5L EQU 0EFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
                +1   845     ;------------------------
  00F2          +1   846     PCA_PWM0 EQU 0F2H ;PCA Ä£¿é0 PWM ¼Ä´æÆ÷¡£
  00F3          +1   847     PCA_PWM1 EQU 0F3H ;PCA Ä£¿é1 PWM ¼Ä´æÆ÷¡£
  00F4          +1   848     PCA_PWM2 EQU 0F4H ;PCA Ä£¿é2 PWM ¼Ä´æÆ÷¡£
  00F5          +1   849     PCA_PWM3 EQU 0F5H ;PCA Ä£¿é3 PWM ¼Ä´æÆ÷¡£
  00F6          +1   850     PCA_PWM4 EQU 0F6H ;PCA Ä£¿é4 PWM ¼Ä´æÆ÷¡£
  00F7          +1   851     PCA_PWM5 EQU 0F7H ;PCA Ä£¿é5 PWM ¼Ä´æÆ÷¡£
                +1   852     ;PCA_PWMn: 7 6 5 4 3 2 1 0
                +1   853     ; - - - - - - EPCnH EPCnL
                +1   854     ;B7-B2: ±£Áô
                +1   855     ;B1(EPCnH): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnH ×é³É 9 Î»Ê¡£
                +1   856     ;B0(EPCnL): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnL ×é³É 9 Î»Ê¡£
                +1   857     ;------------------------
  00DA          +1   858     CCAPM0 EQU 0DAH ;PCA Ä£¿é0 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DB          +1   859     CCAPM1 EQU 0DBH ;PCA Ä£¿é1 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DC          +1   860     CCAPM2 EQU 0DCH ;PCA Ä£¿é2 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DD          +1   861     CCAPM3 EQU 0DDH ;PCA Ä£¿é3 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DE          +1   862     CCAPM4 EQU 0DEH ;PCA Ä£¿é4 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DF          +1   863     CCAPM5 EQU 0DFH ;PCA Ä£¿é5 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   864     ;CCAPMn: 7 6 5 4 3 2 1 0
                +1   865     ; - ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   866     ;
                +1   867     ;ECOMn = 1:ÔÊÐí±È½Ï¹¦ÄÜ¡£
                +1   868     ;CAPPn = 1:ÔÊÐíÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   869     ;CAPNn = 1:ÔÊÐíÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   870     ;MATn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, ÔÊÐí CCON ÖÐµÄ CCFn ÖÃÎ»¡£
                +1   871     ;TOGn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, CEXn ½«·­×ª¡£
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    17

                +1   872     ;PWMn = 1:½« CEXn ÉèÖÃÎª PWM Êä³ö¡£
                +1   873     ;ECCFn = 1:ÔÊÐí CCON ÖÐµÄ CCFn ´¥·¢ÖÐ¶Ï¡£
                +1   874     ;ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   875     ; 0 0 0 0 0 0 0 00H Î´ÆôÓÃÈÎºÎ¹¦ÄÜ¡£
                +1   876     ; x 1 0 0 0 0 x 21H 16 Î»CEXn ÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   877     ; x 0 1 0 0 0 x 11H 16 Î»CEXn ÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   878     ; x 1 1 0 0 0 x 31H 16 Î»CEXn ±ßÑØ(ÉÏ¡¢ÏÂÑØ)´¥·¢²¶×½¹¦ÄÜ¡£
                +1   879     ; 1 0 0 1 0 0 x 49H 16 Î»Èí¼þ¶¨Ê±Æ÷¡£
                +1   880     ; 1 0 0 1 1 0 x 4DH 16 Î»¸ßËÙÂö³åÊä³ö¡£
                +1   881     ; 1 0 0 0 0 1 0 42H 8 Î» PWM¡£
                +1   882     ;------------------------------------------------------------------------------
                +1   883     ;==============================================================================
                +1   884     ;//////////////////////////////////////////////¹«¹²¼Ä´æÆ÷ /////////////////////////////////
                             //////////
  00C7          +1   885     ISP_CONTR                               EQU     0C7h
  008F          +1   886     WAKE_CLKO                               EQU     08fh
                +1   887     ;¸½¼ÓµÄ SFR WAKE_CLKO (µØÖ·£º0x8F)
                +1   888     ;b7 - PCAWAKEUP :1, ÔÊÐí PCA ÉÏÉÑØ / ÏÂ½µÑØÖÐ¶Ï »½ÐÑ powerdown¡£
                +1   889     ;b6 - RXD_PIN_IE:1, ÔÊÐí P3.0(RXD) ÏÂ½µÑØÖÃ RI£¬Ò²ÄÜÊ¹ RXD »½ÐÑ powerdown¡£
                +1   890     ;b5 - T1_PIN_IE :1, ÔÊÐí T1/P3.5 ½ÅÏÂ½µÑØÖÃ T1 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T1 ½Å»½ÐÑ powerdown¡£
                +1   891     ;b4 - T0_PIN_IE :1, ÔÊÐí T0/P3.4 ½ÅÏÂ½µÑØÖÃ T0 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T0 ½Å»½ÐÑ powerdown¡£
                +1   892     ;b3 - N/A
                +1   893     ;b2 - N/A
                +1   894     ;b1 - T1CLKO : ÔÊÐí T1 µÄÒç³öÔÚP1.1 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T1 Òç³öÂÊ
                +1   895     ;       T1 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / ( 256 - TH1 )
                +1   896     ;       T1 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / 12 / ( 256 - TH1 )
                +1   897     ;b0 -   T0CLKO : ÔÊÐí T0 µÄÒç³öÔÚP1.0 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T0 Òç³öÂÊ
                +1   898     ;       T0 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / ( 256 - TH0)
                +1   899     ;       T0 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / 12 / ( 256 - TH0 )
                +1   900     ;--------------------------------------------------------
                +1   901     ;--------------------------------------------------------
  0094          +1   902     REG_5412AD_P0M0                         EQU     094h;093h
  0093          +1   903     REG_5412AD_P0M1                         EQU     093h;094h
                +1   904     
  0092          +1   905     REG_5412AD_P1M0                         EQU     092h;091h
  0091          +1   906     REG_5412AD_P1M1                         EQU     091h;092h
                +1   907     
  0096          +1   908     REG_5412AD_P2M0                         EQU     096h;095h
  0095          +1   909     REG_5412AD_P2M1                         EQU     095h;096h
                +1   910     
  00B2          +1   911     REG_5412AD_P3M0                         EQU     0b2h;0b1h
  00B1          +1   912     REG_5412AD_P3M1                         EQU     0b1h;0b2h
                +1   913     
  00B4          +1   914     REG_5412AD_P4M0                         EQU     0b4h;0b3h
  00B3          +1   915     REG_5412AD_P4M1                         EQU     0b3h;0b4h
                +1   916     ;-------------------------------------------------------------
  008E          +1   917     REG_5412AD_AUXR                         EQU     08EH            ;¸¨Öú¼Ä´æÆ÷
  0085          +1   918     REG_5412AD_spctl                        EQU     085H
  0084          +1   919     REG_5412AD_spstat                       EQU     084H
  0086          +1   920     REG_5412AD_spdat                        EQU     086H
  00C1          +1   921     REG_WDT_CONTR                           EQU     0C1H            ;0E1H;0C1H
  00BB          +1   922     REG_5412AD_P4SW                         EQU     0BBH
  00AB          +1   923     REG_MCU_WKCTH                           EQU     0ABH
  00AA          +1   924     REG_MCU_WKCTL                           EQU     0AAH    
                +1   925     ;//////////////////////////////////////////////RC522¼Ä´æÆ÷ ////////////////////////////////
                             ///////////////////
  0000          +1   926     REG_RC522_RC522PAGE                     EQU     00H
  0001          +1   927     REG_RC522_CommandReg                    EQU     01H
  0002          +1   928     REG_RC522_ComIEnReg                     EQU     02H
  0003          +1   929     REG_RC522_DivIEnReg                     EQU     03H
  0004          +1   930     REG_RC522_ComIrqReg                     EQU     04H
  0005          +1   931     REG_RC522_DivIrqReg                     EQU     05H
  0006          +1   932     REG_RC522_ErrorReg                      EQU     06h
  0007          +1   933     REG_RC522_Status1Reg                    EQU     07h
  0008          +1   934     REG_RC522_Status2Reg                    EQU     08h
  0009          +1   935     REG_RC522_FIFODataReg                   EQU     09h
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    18

  000A          +1   936     REG_RC522_FIFOLevelReg                  EQU     0ah
  000B          +1   937     REG_RC522_WaterLevelReg                 EQU     0bh
  000C          +1   938     REG_RC522_ControlReg                    EQU     0ch
  000D          +1   939     REG_RC522_BitFramingReg                 EQU     0dh
  000E          +1   940     REG_RC522_CollReg                       EQU     0eh
  000F          +1   941     REG_RC522_RFU                           EQU     0fh
  0011          +1   942     REG_RC522_ModeReg                       EQU     11h
  0012          +1   943     REG_RC522_TxModeReg                     EQU     12h
  0013          +1   944     REG_RC522_RxModeReg                     EQU     13h
  0014          +1   945     REG_RC522_TxControlReg                  EQU     14h
  0015          +1   946     REG_RC522_TxAutoReg                     EQU     15h
  0016          +1   947     REG_RC522_TxSelReg                      EQU     16h
  0017          +1   948     REG_RC522_RxSelReg                      EQU     17h
  0018          +1   949     REG_RC522_RxThresholdReg                EQU     18h
  0019          +1   950     REG_RC522_DemodReg                      EQU     19h
  001C          +1   951     REG_RC522_MifareReg                     EQU     1ch
  001F          +1   952     REG_RC522_SerialSpeedReg                EQU     1fh
  0021          +1   953     REG_RC522_CRCResultRegH                 EQU     21h
  0022          +1   954     REG_RC522_CRCResultRegL                 EQU     22h
  0024          +1   955     REG_RC522_ModWidthReg                   EQU     24h
  0026          +1   956     REG_RC522_RFCfgReg                      EQU     26h
  0027          +1   957     REG_RC522_GsNReg                        EQU     27h
  0028          +1   958     REG_RC522_CWGsPReg                      EQU     28h
  0029          +1   959     REG_RC522_ModGsPReg                     EQU     29h
  002A          +1   960     REG_RC522_TModeReg                      EQU     2ah
  002B          +1   961     REG_RC522_TPrescalerReg                 EQU     2bh
  002C          +1   962     REG_RC522_TReloadRegH                   EQU     2ch
  002D          +1   963     REG_RC522_TReloadRegL                   EQU     2dh
  002E          +1   964     REG_RC522_TCounterValueRegH             EQU     2eh
  002F          +1   965     REG_RC522_TCounterValueRegL             EQU     2fh
                +1   966             
                +1   967     ;/////////////////////////////////////////////////Ò»°ãÏµÍ³³£Á¿±í///////////////////////////
                             //////////////////////
  0001          +1   968     CONST_HOLD_5823TX                       EQU     1
  0000          +1   969     CONST_HOLD_5823RX                       EQU     0
                +1   970             
                +1   971             
  00FF          +1   972     CONST_SYS_TradeConfine                  EQU     255                             ;½»Ò×Ê±¼äÏÞ
                             ÖÆ
  000A          +1   973     CONST_SYS_PowerONTimer                  EQU     10                              ;ÉÏµç¶¨Ê±Æ÷
                                  
  0088          +1   974     CONST_SYS_PREFlag                       EQU     088H                            ;
  00AA          +1   975     CONST_SYS_AA                            EQU     0AAH
  0055          +1   976     CONST_SYS_55                            EQU     55H
  0004          +1   977     CONST_SYS_OBUIDLEN                      EQU     4                               ;obuid ³¤¶È
  0008          +1   978     CONST_BSTLIMIT                          EQU     8;20;10                 ;¼«ÏÞBST¸öÊ
  0064          +1   979     CONST_BSTLIMIT02                        EQU     100
                +1   980     
  00FF          +1   981     CONST_VSTLIMIT                          EQU     255     ;100                    ;¼«ÏÞVST¸öÊ
  00FA          +1   982     CONST_Pro_OverTime2S                    EQU     250                             ;³¬Ê±ÏÞÊ±£¬
                             196-246*30=1200MS 
                +1   983     ;/////////////////////////////////////////////////³öÈë¿Ú³£Á¿±í/////////////////////////////
                             ////////////////////
  0003          +1   984     CONST_ETC_INPUT                         EQU     3       ;ETC Èë¿Ú
  0001          +1   985     CONST_MTC_INPUT                         EQU     1       ;MTC Èë¿Ú
  0001          +1   986     CONST_INPUT_ISEnable                    EQU     1;=1²»ÆôÓÃ =0ÆôÓÃ
                +1   987     ;/////////////////////////////////////////////////×´Ì¬³£Á¿±í///////////////////////////////
                             //////////////////
  0000          +1   988     CONST_STATE_TRUE                        EQU     000H                            ;Ö´ÐÐ³É¹¦
  00FF          +1   989     CONST_STATE_FALSE                       EQU     0FFH                            ;³ÌÐòÖ´ÐÐ³ö
                             ´í
                +1   990     ;Ò»°ãÐÔ´íÎó     01      µ¼ÈëÊ§°Ü        STR_InputFail
                +1   991     ;ºÏÍ¬ºÅ²»Í¬     02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                +1   992     ;Ê¹ÓÃ´ÎÊ=FFH    03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
  0001          +1   993     CONST_STATE_InputFail                   EQU     01
  0002          +1   994     CONST_STATE_IllegalInputCard            EQU     02
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    19

  0003          +1   995     CONST_STATE_InputCardInvalid            EQU     03
                +1   996     ;Ò»°ãÐÔ´íÎó     04      ¼¤»îÊ§°Ü        STR_ActiveFail
                +1   997     ;ºÏÍ¬ºÅ²»Í¬     05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                +1   998     ;Ê¹ÓÃ´ÎÊ=FFH    06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
  0004          +1   999     CONST_STATE_ActiveFail                  EQU     04
  0005          +1  1000     CONST_STATE_IllegalACTCard              EQU     05
  0006          +1  1001     CONST_STATE_ACTCardInvalid              EQU     06
                +1  1002             
  0007          +1  1003     CONST_STATE_5823INIER                   EQU     07      ;5823³õÊ¼»¯³ö´í
  0008          +1  1004     CONST_STATE_5823SleepEr                 EQU     08      ;5823ÐÝÃß³ö´í
  0009          +1  1005     CONST_STATE_GetSecureSelFileEr          EQU     09      ;getsecureÑ¡¿¨Ä¿Â¼³ö´í
                +1  1006     
  000A          +1  1007     CONST_STATE_BaseNinit                   EQU     10      ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  000B          +1  1008     CONST_STATE_BaseESAMDF01                EQU     11      ;Baseinit02º¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1  1009             
  000C          +1  1010     CONST_STATE_CARDPreDeal1001             EQU     12      ;Ô¤¶Á1001Ê§°Ü
  000D          +1  1011     CONST_STATE_CARDPreDeal0002             EQU     13      ;Ô¤¶Á0002Ê§°Ü
  000E          +1  1012     CONST_STATE_CARDPreDeal0012             EQU     14      ;Ô¤¶Á0012Ê§°Ü
  000F          +1  1013     CONST_STATE_CARDPreDeal0015             EQU     15      ;Ô¤¶Á0015Ê§°Ü
  0010          +1  1014     CONST_STATE_CARDPreDeal0019             EQU     16      ;Ô¤¶Á0019Ê§°Ü
  0011          +1  1015     CONST_STATE_CARDPreDeal3f00             EQU     17      ;Ô¤¶Á3f00Ê§°Ü
  0012          +1  1016     CONST_STATE_CARDPreDeal81               EQU     18      ;Ô¤¶Á81Ê§°Ü
                +1  1017             
  0013          +1  1018     CONST_STATE_BaseN01init                 EQU     19      ;Baseinitº¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  0014          +1  1019     CONST_STATE_Base01ESAMDF01              EQU     20      ;Baseinitº¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1  1020             
  0015          +1  1021     CONST_STATE_Base01Contact               EQU     21      ;Baseinitº¯Ê£¬Ìøµ½½Ó´¥
  0016          +1  1022     CONST_STATE_Base02Contact               EQU     22      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1  1023             
  0017          +1  1024     CONST_STATE_test                        EQU     23      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1  1025             
  0018          +1  1026     CONST_STATE_Base02Re                    EQU     24
  0019          +1  1027     CONST_STATE_Base02AntiColl              EQU     25
  001A          +1  1028     CONST_STATE_Base02Sel                   EQU     26
  001B          +1  1029     CONST_STATE_Base02Rats                  EQU     27
                +1  1030             
  001C          +1  1031     CONST_STATE_Base01Re                    EQU     28
  001D          +1  1032     CONST_STATE_Base01AntiColl              EQU     29
  001E          +1  1033     CONST_STATE_Base01Sel                   EQU     30
  001F          +1  1034     CONST_STATE_Base01Rats                  EQU     31      
                +1  1035             
  0020          +1  1036     CONST_STATE_MemoryEr                    EQU     32      
  0021          +1  1037     CONST_STATE_ExMemoryEr                  EQU     33      
  0022          +1  1038     CONST_STATE_ExMemoryEr02                EQU     34      
                +1  1039             
  0001          +1  1040     CONST_STATE_SERIALACCPET                EQU     001H                            ;´®¿Ú½ÓÊÕ´í
                             Îó
  0002          +1  1041     CONST_STATE_SERIALOVERTIME              EQU     CONST_STATE_SERIALACCPET + 1    ;´®¿Ú½ÓÊÕ³¬
                             Ê±
  0003          +1  1042     CONST_STATE_ACCEPTOVER                  EQU     CONST_STATE_SERIALOVERTIME + 1  ;´®¿Ú½ÓÊÕÍê
                             ±Ï£¬Ã»ÓÐºóÐø×Ö½Ú 
  0004          +1  1043     CONST_STATE_ACCEPTOVERLEN               EQU     CONST_STATE_ACCEPTOVER + 1      ;´®¿Ú½ÓÊÕ³¬
                             ³¤
  0005          +1  1044     CONST_STATE_RSTCPUER                    EQU     CONST_STATE_ACCEPTOVERLEN + 1   ;¸´Î»´®¿Ú´í
                             Îó
  0006          +1  1045     CONST_STATE_AUTHER                      EQU     CONST_STATE_RSTCPUER + 1        ;ÈÏÖ¤Ê§°Ü
                +1  1046             
                +1  1047     ;--- ¹¤×÷Çø³£Á¿¶¨Òå ---
  0000          +1  1048     CONST_WORKSTAION_0                      EQU     00H     ;¹¤×÷Çø0
  0001          +1  1049     CONST_WORKSTAION_1                      EQU     01H     ;¹¤×÷Çø1
  0002          +1  1050     CONST_WORKSTAION_2                      EQU     02H     ;¹¤×÷Çø2        
  0003          +1  1051     CONST_WORKSTAION_3                      EQU     03H     ;¹¤×÷Çø3
                +1  1052     
                +1  1053     ;//////////////////////////////////////¿¨Æ¬Âß¼­³£Á¿¶¨Òå////////////////////////////////////
                             ////////
  0017          +1  1054     CONST_CARD_PASS                         EQU     23
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    20

  0016          +1  1055     CONST_CARD_CONSUME                      EQU     22
                +1  1056     ;//////////////////////////////////////GSM³£Á¿¶¨Òå/////////////////////////////////////////
                             /////////
  0002          +1  1057     CONST_LHX_FLAG                          EQU     2 ;0-¹ú±êOBU  1-GSM OBU  2-433 OBU
                +1  1058     
                +1  1059     ;RTC ´ó´°Ê±¼ä                           ;6·ÖÖÓ£¬Æ½¾ùÁ½ÃëÒ»´ÎcellID
                +1  1060     ;CONST_RTCOverFlow                      EQU     144;180;180
                +1  1061     ;CONST_RTCUartRX                        EQU     24;4;8,12,16,20,24;142;
                +1  1062     
  0090          +1  1063     CONST_RTCOverFlow                       EQU     144;20;144;6;144;6;12;144
                +1  1064     ;CONST_RTCUartRX                                EQU     12
                +1  1065     ;CONST_RTCUartRX02                      EQU     142
  0000          +1  1066     CONST_Flag_INPUT                        EQU     0
  0001          +1  1067     CONST_Flag_OutPUT                       EQU     1
                +1  1068     
                +1  1069     ;GSM CellID ¼ÇÂ¼Ê¾ÝËùÔÚµÄÎÄ¼þÃû
  0000          +1  1070     CONST_Cellfile_H                        EQU     000H
  0009          +1  1071     CONST_Cellfile_L                        EQU     09h;030H
                +1  1072     
  00EF          +1  1073     CONST_ESAMCellfile_H                    EQU     0EFH;000H
  0007          +1  1074     CONST_ESAMCellfile_L                    EQU     07H;03h;030H
                +1  1075     ;CONST_Cellfile_H                       EQU     000H
                +1  1076     ;CONST_Cellfile_L                       EQU     008h
                +1  1077     
  00F0          +1  1078     CONST_GSM_MaxNum                        EQU     240
                +1  1079     ;CONST_GSM_MaxNum                       EQU     5
                +1  1080     
  0014          +1  1081     CONST_GSM_PJNum                         EQU     20
                +1  1082     ;CONST_GSM_PJNum                        EQU     1
                +1  1083     
                +1  1084     ;RTC Ð¡´°Ê±¼ä;
  0008          +1  1085     CONST_MCU_WKCTH                         EQU     008H;0fh;00fH;00fH;00fH
  00FF          +1  1086     CONST_MCU_WKCTL                         EQU     0FFH
                +1  1087     
                +1  1088     ;RTC ÊÇ·ñ¿ªÆô£¬±ê¼ÇÖµ
                +1  1089     ;=CONST_RTC_ON ±íÊ¾¿ªÆô
                +1  1090     ;= ÆäËü Ã»ÓÐ¿ªÆô
  0055          +1  1091     CONST_RTC_ON                            EQU     55H
  00FF          +1  1092     CONST_RTC_off                           EQU     0ffH
  0064          +1  1093     CONST_SYS_RTCOverTime                   EQU     100
                +1  1094     
                +1  1095     ;²å¿¨½«obuÖÐCellid¼ÇÂ¼µ¼Èëµ½¿¨Æ¬ÖÐ£¬Ò»´ÎÐ´Èëµ½¿¨Æ¬ÖÐ cellID µÄ×Ö½ÚÊ
  0008          +1  1096     CONST_GSM_NUM                           EQU     8               ;40
                +1  1097     ;//////////////////////////////////////MF³£Á¿¶¨Òå//////////////////////////////////////////
                             ////////
  0000          +1  1098     CONST_MF_READ                           EQU     00H     ;Ö¸ÁîÀàÐÍ ¶Á¿é
  0001          +1  1099     CONST_MF_WRITE                          EQU     01H     ;Ö¸ÁîÀàÐÍ Ð´¿é
  0002          +1  1100     CONST_MF_DECREMENT                      EQU     02H     ;Ö¸ÁîÀàÐÍ ¿Û¿î
  0003          +1  1101     CONST_MF_INCREMENT                      EQU     03H     ;Ö¸ÁîÀàÐÍ ³äÖµ
  0004          +1  1102     CONST_MF_RESTOR                         EQU     04H     ;Ö¸ÁîÀàÐÍ ±¸·Ý¿é
                +1  1103     
  00C0          +1  1104     CONST_MF_RC500DECREMENT                 EQU     0C0H    ;RC500 ¿Û¿î
  00C1          +1  1105     CONST_MF_RC500INCREMENT                 EQU     0C1H    ;RC500 ³äÖµ
                +1  1106     ;//////////////////////////////////////DSRC³£Á¿¶¨Òå////////////////////////////////////////
                             //////////
  0004          +1  1107     CONST_DSRC_MACCTRL                      EQU     4       ;MAC¿ØÖÆÓò
  0005          +1  1108     CONST_DSRC_LLCCTRL                      EQU     5       ;LLC¿ØÖÆÓò
  0006          +1  1109     CONST_DSRC_HEAD                         EQU     6       ;×Ö¶Î×ÖÍ·
  0007          +1  1110     CONST_DSRC_ACTION                       EQU     7       ;Action
  0008          +1  1111     CONST_DSRC_DID                          EQU     8       ;DSRC-DID
  0009          +1  1112     CONST_DSRC_ACTIONTYPE                   EQU     9       ;ActionType
  000A          +1  1113     CONST_DSRC_CONTAIN                      EQU     10      ;Contain
  000B          +1  1114     CONST_DSRC_Fill                         EQU     11      ;Fill
  000C          +1  1115     CONST_SSRC_FID                          EQU     12      ;ÎÄ¼þ±êÊ¶£¨FID£©
                +1  1116     
  0000          +1  1117     CONST_DSRC_FildIDAPPKey                 EQU     0       ;0¨D¨DETC Ó¦ÓÃÃÜÔ¿ÎÄ¼þ
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    21

  0001          +1  1118     CONST_DSRC_FildIDVehicle                EQU     1       ;1¨D¨DETC Ó¦ÓÃ³µÁ¾ÐÅÏ¢ÎÄ¼þ
  0002          +1  1119     CONST_DSRC_FildIDConsume                EQU     2       ;2-ETC Ó¦ÓÃ½»Ò×¼ÇÂ¼ÎÄ¼þ
  0003          +1  1120     CONST_DSRC_FildIDHold                   EQU     3       ;3-ETC Ó¦ÓÃ±£ÁôÎÄ¼þ
                +1  1121     
  0001          +1  1122     CONST_DSRC_ChannelIDICC                 EQU     1
  0002          +1  1123     CONST_DSRC_ChannelIDSAM                 EQU     2
                +1  1124     ;//////////////////////////////////////AcionType³£Á¿¶¨Òå///////////////////////////////////
                             ////////////
  0000          +1  1125     Const_ActionType_GetSecure              EQU     0       ;getSecure
  0001          +1  1126     Const_ActionType_SetSecure              EQU     1       ;setSecure
  0002          +1  1127     Const_ActionType_GetRand                EQU     2       ;getRand
  0003          +1  1128     Const_ActionType_TransferChannel        EQU     3       ;transferChannel
  0004          +1  1129     Const_ActionType_SetMMI                 EQU     4       ;SetMMI
                +1  1130     ;//////////////////////////////////////Flash³£Á¿¶¨Òå///////////////////////////////////////
                             ///////////
  0058          +1  1131     CONST_Flash_SysinfoLen                  EQU     88;39;38+12     ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0004          +1  1132     CONST_Flash_0002Len                     EQU     4       ; 0002ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È  
  0028          +1  1133     CONST_Flash_0012Len                     EQU     40      ; 0012ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
                +1  1134     ;CONST_Flash_0015Len                    EQU     33      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1  1135     CONST_Flash_0015Len                     EQU     43      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  003C          +1  1136     CONST_Flash_0019Len                     EQU     60;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1  1137     CONST_Flash_0019GBLen                   EQU     43;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0001          +1  1138     CONST_Flash_CardTypeLEN                 EQU     1       ; ÉÏ´Î²å¿¨ÊÇ½Ó´¥£¬»¹ÊÇ·Ç½Ó´¥
                +1  1139     ;CONST_Flash_SYSPARAMLEN                EQU     1       ; ÏµÍ³²ÎÊ
  0008          +1  1140     CONST_Flash_BeaconIDUnixTimeLen         EQU     8       ; ÌìÏßID¼°unixtime
  0001          +1  1141     CONST_FALSH_PREFlagLen                  EQU     1       ; Ô¤´¦Àí±ê¼Ç=88,±íÊ¾ÉÏ»ØÔ¤´¦Àí³É¹¦
                +1  1142     
                +1  1143     ;************************************************************************************
                +1  1144     ;ÌØ±ð±¸×¢: ÓÉÓÚÔÚÔ¤¶Á0015/0012/0019Ê±ÔÝ´æÔÚÍâ´æµÄ³¤¶È³¬¹128¸ö×Ö½Ú£¬ËùÒÔ£¬Íâ´æ±äÁ¿µÄÆðÆôÎ»ÖÃ
                             £¬ÒªÔÚConst_Flash_FileLen
                +1  1145     ;³¤¶ÈÖ®ºó£¬Const_Flash_FileLen = 8F£¬Èç¹ûÒÔºóConst_Flash_FileLen³¤¶È¸ÄÁË£¬ÄÇÍâ´æµÄÆôÊ¼Î»ÖÃÒ
                             ²Òª¸Ä
                +1  1146     ;Íâ´æµÄÆôÊ¼Î»ÖÃ¶¨ÒåÔÚOBUmain.incÖÐXDATA_VARSTARTµÄÖµ
                +1  1147     ;************************************************************************************
  00EC          +1  1148     Const_Flash_FileLen                     EQU     CONST_Flash_SysinfoLen + CONST_Flash_0015Le
                             n + CONST_Flash_0019Len + CONST_Flash_0012Len + CONST_Flash_0002Len + CONST_Flash_CardTypeLEN 
                +1  1149     
  0072          +1  1150     CONST_FLASH_Block01                     EQU     72H
                +1  1151     
  0072          +1  1152     CONST_FLASH_STARTHIGH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
  0000          +1  1153     CONST_FLASH_STARTLOW                    EQU     00H                                        
                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
                +1  1154     
  0072          +1  1155     CONST_FLASH_SYSINFOH                    EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ,LEN = 38 BYTE
  0000          +1  1156     CONST_FLASH_SYSINFOL                    EQU     00H
                +1  1157     
  0072          +1  1158     CONST_FLASH_0002H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0002,LEN = 4 BYTE
  0058          +1  1159     CONST_FLASH_0002L                       EQU     CONST_FLASH_SYSINFOL + CONST_Flash_SysinfoL
                             en
                +1  1160     
  0072          +1  1161     CONST_FLASH_0012H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0012,LEN = 24 BYTE
  005C          +1  1162     CONST_FLASH_0012L                       EQU     CONST_FLASH_0002L + CONST_Flash_0002Len
                +1  1163     
  0072          +1  1164     CONST_FLASH_0015H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0015,LEN = 33 BYTE
  0084          +1  1165     CONST_FLASH_0015L                       EQU     CONST_FLASH_0012L + CONST_Flash_0012Len
                +1  1166     
  0072          +1  1167     CONST_FLASH_0019H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0019,LEN = 43 BYTE      
  00AF          +1  1168     CONST_FLASH_0019L                       EQU     CONST_FLASH_0015L + CONST_Flash_0015Len
                +1  1169             
                +1  1170     ;CONST_FLASH_01BlockH                   EQU     6EH;2EH                                    
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    22

                                  ; MF¿¨µÚ1¿éÊ¾Ý
                +1  1171     ;CONST_FLASH_01BlockL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len
                +1  1172             
                +1  1173     ;CONST_FLASH_04BlockH                   EQU     6EH;2EH
                +1  1174     ;CONST_FLASH_04BlockL                   EQU     CONST_FLASH_01BlockL + 16                  
                                  ;MF¿¨µÚ4¿éÊ¾Ý
                +1  1175             
                +1  1176     ;CONST_FLASH_10BlockH                   EQU     6EH;2EH
                +1  1177     ;CONST_FLASH_10BlockL                   EQU     CONST_FLASH_04BlockL + 16                  
                                  ;MF¿¨µÚ16¿éÊ¾Ý
                +1  1178             
  0072          +1  1179     CONST_FLASH_LASTCARDH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ;ÉÏÒ»´Î²å¿¨ÀàÐÍ
  00EB          +1  1180     CONST_FLASH_LASTCARDL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len    
                                  ;CONST_FLASH_10BlockL + 16
                +1  1181             
                +1  1182     ;CONST_FLASH_SYSPARAMH                  EQU     6EH;2EH                         ;ÏµÍ³²ÎÊ
                +1  1183     ;CONST_FLASH_SYSPARAML                  EQU     CONST_FLASH_LASTCARDL + 1
                +1  1184             
  0072          +1  1185     CONST_Flash_BeaconIDUnixTimeH           EQU     CONST_FLASH_Block01;2EH
  00EC          +1  1186     CONST_Flash_BeaconIDUnixTimeL           EQU     CONST_FLASH_LASTCARDL + 1       ; 8 byte Ìì
                             ÏßIDºÍunixtimeÊ±¼ä
                +1  1187             
  0072          +1  1188     CONST_FALSH_PREFlagH                    EQU     CONST_FLASH_Block01;2EH
  00F4          +1  1189     CONST_FALSH_PREFlagL                    EQU     CONST_Flash_BeaconIDUnixTimeL + CONST_Flash
                             _BeaconIDUnixTimeLen;1 Byte
                +1  1190             
  0072          +1  1191     CONST_FALSH_PREFlag02H                  EQU     CONST_FLASH_Block01;2EH
  00F5          +1  1192     CONST_FALSH_PREFlag02L                  EQU     CONST_FALSH_PREFlagL + 1        ;1      ;3 
                             Byte
                +1  1193              
  0072          +1  1194     CONST_FALSH_PREFlag03H                  EQU     CONST_FLASH_Block01;2EH
  00F6          +1  1195     CONST_FALSH_PREFlag03L                  EQU     CONST_FALSH_PREFlag02L + 1      ;1      ;3 
                             Byte
                +1  1196             
  0072          +1  1197     CONST_FALSH_PowerH                      EQU     CONST_FLASH_Block01;2EH
  00F7          +1  1198     CONST_FALSH_PowerL                      EQU     CONST_FALSH_PREFlag03L + 1      ;1      ;3 
                             Byte
                +1  1199             
                +1  1200     ;CONST_FLASH_SysRstH                    EQU     06CH
                +1  1201     ;CONST_FLASH_SysRstL                    EQU     000H
                +1  1202             
  006C          +1  1203     CONST_FLASH_Sys0020H                    EQU     6ch;064H
  0000          +1  1204     CONST_FLASH_Sys0020L                    EQU     000H
                +1  1205             
  006A          +1  1206     CONST_FLASH_Sys0020numH                 EQU     6ah;062H
  0000          +1  1207     CONST_FLASH_Sys0020numL                 EQU     000H
                +1  1208             
                +1  1209     ;CONST_FLASH_SysHVH                     EQU     6CH;68h;062H
                +1  1210     ;CONST_FLASH_SysHVL                     EQU     000H
                +1  1211             
  00FF          +1  1212     const_black_h                           EQU     0ffH
  00FF          +1  1213     const_black_l                           EQU     0ffH
                +1  1214             
  0000          +1  1215     const_white_h                           EQU     000H;40h                                ; 0
                             0h
  0031          +1  1216     const_white_l                           EQU     031H;80h                                ; 0
                             0h
                +1  1217     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////////
                +1  1218     ;(¾§Õñ*2)/(32*12*²¨ÌØÂÊ)                
                +1  1219     ;CONST_SOF                              EQU     22118400                        ; 24576000
  0000          +1  1220     CONST_SOF                               EQU     24576000                        ; µ±Ç°Ö÷Æµ¾
                             §ÌåÆµÂÊ
                +1  1221     ;//////////////////////////////////////// PPS ³£Á¿ ¶¨Òå ///////////////////////////////////
                             ////////////
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    23

  0010          +1  1222     CONST_PPS_9600                          EQU     10H                             
  0013          +1  1223     CONST_PPS_38400                         EQU     13H
  0018          +1  1224     CONST_PPS_115200                        EQU     18H
  0096          +1  1225     CONST_PPS_230000                        EQU     96H
                +1  1226     ;//////////////////////////////////////// ´®¿Ú ³£Á¿ ¶¨Òå //////////////////////////////////
                             /////////////
                +1  1227             
  0000          +1  1228     CONST_BAUD_9600                         EQU     00                              ; ²¨ÌØÂÊ±àÂ
                             ë
  0001          +1  1229     CONST_BAUD_38400                        EQU     01
  0002          +1  1230     CONST_BAUD_115200                       EQU     02
  0003          +1  1231     CONST_BAUD_115200PC                     EQU     03
  0004          +1  1232     CONST_BAUD_230000                       EQU     04
  0005          +1  1233     CONST_BAUD_38400PC                      EQU     5
  0006          +1  1234     CONST_BAUD_9600PC                       EQU     06                              ; ²¨ÌØÂÊ±àÂ
                             ë
                +1  1235             
                +1  1236     ;ÔÚ24.576MÏÂ´®¿ÚµÚÒ»¸ö×Ö½ÚÉè¶¨ÎªÒª¼ìË÷100MS = CONST_SOF/(10*(FF*FF) = 38 = 26H
  0010          +1  1237     CONST_SOFTFIRSTSCANTIME                 EQU     16;8;32;16;8;10H        ; 10h   ;10h    ;10
                             H;0dH;10H    ;  26H
  00FF          +1  1238     CONST_SOFTFIRSTSCANTIMEXX               EQU     0FFH    ; ESAM¿¨·Ç³£¹æÖ¸Áî£¬¼Ó´óËÑË÷Ê±¼äÏÞÖ
                             Æ[Èç80 E4Ö¸Áî]
  0070          +1  1239     CONST_SOFTSECOND                        EQU     070H    ; 10H   ;  Èí½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼ä
                             ÏÞ³¤ CONST_SOFTSECOND*255¸öÖÜÆÚ
  0015          +1  1240     CONST_HANDSECOND                        EQU     15H     ; 01AH[ÔÚ9600²¨ÌØÏÂ£¬Òª·Å¿íµ½1AH];Ó
                             ²½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼äÏÞ³¤ CONST_HANDSECOND*255¸öÖÜÆÚ
                +1  1241                                                     
  0014          +1  1242     CONST_SOFTBYTESP                        EQU     20;50;4 ;Èí´®¿Ú·¢ËÍ³ÌÐò×Ö½Ú¼ä¾à¿ØÖÆÓë_FUN_L
                             IB_DELAYSIMPLAYº¯ÊÅäºÏÊ¹ÓÃ
                +1  1243     ;//////////////////////////////////////// Èí´®¿Ú ³£Á¿ ¶¨Òå ////////////////////////////////
                             ///////////////
                +1  1244     ;CONST_BAUD_FULL9600                    EQU     637     ;2560
                +1  1245     ;CONST_BAUD_HALF9600                    EQU     317     ;2560
                +1  1246     ;CONST_BAUD_FULL9600                    EQU     576     ;2304
                +1  1247     ;CONST_BAUD_HALF9600                    EQU     285     ;1152
                +1  1248     ;CONST_BAUD_FULL9600                    EQU     76      ;2304
                +1  1249     ;CONST_BAUD_HALF9600                    EQU     85      ;1152
                +1  1250     ;CONST_BAUD_FULL38400                   EQU     157     ;640
                +1  1251     ;CONST_BAUD_HALF38400                   EQU     77      ;213
                +1  1252     ;CONST_BAUD_FULL38400                   EQU     141     ;576
                +1  1253     ;CONST_BAUD_HALF38400                   EQU     69      ;288
                +1  1254     ;CONST_BAUD_FULL115200                  EQU     50      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1  1255     ;CONST_BAUD_HALF115200                  EQU     21      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1  1256     ;CONST_BAUD_FULL115200                  EQU     45      ;192 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1  1257     ;CONST_BAUD_HALF115200                  EQU     21      ;96  Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1  1258             
  00B3          +1  1259     CONST_BAUD_FULL9600                     EQU     179     ;[(24576000/9600)*(3.58/6)-12]/4-20
                             0=[2560*(3.59/6)-12]/4-250=(1527-12)/4-200=378.75=379-200=179
  0058          +1  1260     CONST_BAUD_HALF9600                     EQU     88      ;[(24576000/9600/2)*(3.58/6)-12]/4-
                             100=[2560*(3.59/6)-12]/4=(763-12)/4-100=187.75=188-100=88
                +1  1261     
  005D          +1  1262     CONST_BAUD_FULL38400                    EQU     93      ;[(24576000/38400)*(3.58/6)-12]/4= 
                             [640 * (3.59/6)-12]/4 = (382-12)/4=92.5=93
  002D          +1  1263     CONST_BAUD_HALF38400                    EQU     45      ;[(24576000/38400/2)*(3.58/6)-12]/4
                             = [320 * (3.59/6)-12]/4 = (191-12)/4=44.75=45
                +1  1264     
  001D          +1  1265     CONST_BAUD_FULL115200                   EQU     29      ;[(24576000/115200)*(3.58/6)-12]/4=
                             [213*(3.58/6)-12]/4=(127-12)/4=28.75=29
  000D          +1  1266     CONST_BAUD_HALF115200                   EQU     13;     ;[(24576000/115200/2)*(3.58/6)-12]/
                             4=[115.5*(3.58/6)-12]/4=(64-12)/4=13
                +1  1267     
  000F          +1  1268     CONST_BAUD_FULL230000                   EQU     15;13   ;[(24576000/230000/2)*(3.58/6)]/4 =
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    24

                              64/4 = 16
  0008          +1  1269     CONST_BAUD_HALF230000                   EQU     8;5     ;[(24576000/230000/2)*(3.58/6)]/4=[
                             115.5*(3.58/6)]/4=32/4=8
                +1  1270             
  00B3          +1  1271     CONST_BAUD_CURRENTBITFULL               EQU     CONST_BAUD_FULL9600
  0058          +1  1272     CONST_BAUD_CURRENTBITHALF               EQU     CONST_BAUD_HALF9600
                +1  1273     ;CONST_BAUD_BITHALF12                   EQU     CONST_BAUD_CURRENTBITHALF - 3
                +1  1274     ;CONST_BAUD_BITFULL8                    EQU     CONST_BAUD_CURRENTBITFULL - 2
                +1  1275     ;CONST_BAUD_BITFULL12                   EQU     CONST_BAUD_CURRENTBITFULL - 3
                +1  1276     ;CONST_BAUD_BITFULL20                   EQU     CONST_BAUD_CURRENTBITFULL - 5
                +1  1277     ;CONST_BAUD_BITFULL28                   EQU     CONST_BAUD_CURRENTBITFULL - 7
                +1  1278             
  000C          +1  1279     CONST_BAUD_BITHALF12                    EQU     3 + 9
  000B          +1  1280     CONST_BAUD_BITFULL8                     EQU     2 + 9
  000C          +1  1281     CONST_BAUD_BITFULL12                    EQU     3 + 9
  000E          +1  1282     CONST_BAUD_BITFULL20                    EQU     5 + 9
  0010          +1  1283     CONST_BAUD_BITFULL28                    EQU     7 + 9
                +1  1284             
                +1  1285     ;////////////////////////////////////////  Ó²´®¿Ú ³£Á¿ ¶¨Òå ///////////////////////////////
                             ////////////////
                +1  1286     ;CONST_BAUD_HAND115200                  EQU     0FFH;(256 - CONST_SOF/(192*115200))     ;
                +1  1287     ;CONST_BAUD_HAND38400                   EQU     0FDH;(256 - (CONST_SOF/(192*38400)))    ;
                +1  1288     ;CONST_BAUD_HAND9600                    EQU     0F4H;(256 - CONST_SOF/(192*9600))       ;
                +1  1289     
  00FC          +1  1290     CONST_BAUD_HAND230000                   EQU     252     ;0FCH   24.576x1000000/(230000x6/3.
                             58=)/16 = 4 = F8H
  00F3          +1  1291     CONST_BAUD_HAND115200PC                 EQU     243     ;243    ;24.576 / 0F3H  ;24576000 /
                              32179 = 764 / 16 = 47.7 = 48 = D0H
  00F8          +1  1292     CONST_BAUD_HAND115200                   EQU     248     ;0F8H   ;24.576x1000000/(115200x6/3
                             .58=193073)/16 = 8 = F8H             
  00D8          +1  1293     CONST_BAUD_HAND38400pc                  EQU     216     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  00E9          +1  1294     CONST_BAUD_HAND38400                    EQU     233     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  0060          +1  1295     CONST_BAUD_HAND9600pc                   EQU     96      ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1  1296     
  00A3          +1  1297     CONST_BAUD_HAND9600                     EQU     163     ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1  1298     
                +1  1299     ;24.576x1000000/(38400x9.6/3.58=102972)/16=15 = f1
                +1  1300     ;24.576x1000000/(9600x9.6/3.58=25743)/16=60 = c4h
                +1  1301     ;24.576x1000000/(230000x6/3.58=385475)/16=4 = fch
                +1  1302     
                +1  1303     ;////////////////////////////////////////  Ö¸Áî¼¯ /////////////////////////////////////////
                             //////
                +1  1304     ;LL C2H LH 32H
                +1  1305     ;ML 62H MH 12H
                +1  1306     ;HL 32H HH 12H
                +1  1307             
  0001          +1  1308     CONST_ACT_L                             EQU     1
  0002          +1  1309     CONST_ACT_M                             EQU     2
  0003          +1  1310     CONST_ACT_H                             EQU     3
                +1  1311             
  0002          +1  1312     CONST_ACT_V                             EQU     CONST_ACT_M
                +1  1313             
  000A          +1  1314     CONST_ACT_L_L                           EQU     0ah;0C2H
  0006          +1  1315     CONST_ACT_L_H                           EQU     06h;032H
                +1  1316             
  0006          +1  1317     CONST_ACT_M_L                           EQU     06h;062H
  0000          +1  1318     CONST_ACT_M_H                           EQU     00h;012H
                +1  1319             
  0000          +1  1320     CONST_ACT_H_L                           EQU     00h;032H
  0001          +1  1321     CONST_ACT_H_H                           EQU     01h;012H
                +1  1322     
                    1323     
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    25

                    1324             
                    1325     ;-----------------------------------------------------------------
                    1326     ;ÃèÊö:ÖÐ¶Ï ÏòÁ¿ 
                    1327     ;-----------------------------------------------------------------
                    1328     ;External Interrupt 0   0003H
                    1329     ;Timer 0                000BH
                    1330     ;External Interrupt     0013H
                    1331     ;Timer 1                001BH
                    1332     ;UART                   0023H
                    1333     ;ADC/SPI                002BH
                    1334     ;PCA/LVD                0033H
                    1335     ;                       ;
                    1336     ;IE                     ;
                    1337     ;IE.0   INT0            ;Î¢²¨»½ÐÑÖÐ¶Ï
                    1338     ;IE.1   Timer0          ;T0¶¨Ê±Æ÷
                    1339     ;IE.2   INT1            ;²å¿¨ÖÐ¶Ï[×´Ì¬:µçÆ½´¥·¢][Æ½Ê±Îª¸ß£¬²åÈëÎªµÍ]
                    1340     ;IE.3   Timer1          ;²ð¶¯ÖÐ¶Ï [×´Ì¬:°´ÏÂÎª¸ß£¬·Å¿ªÎªµÍ] [µçÆ½´¥·¢]td 
                    1341     ;IE.4   UART            
                    1342     ;IE.5   ADC/SPI         
                    1343     ;IE.6   PCA/LVD         
                    1344     ;×¢Òâ: ´®¿Ú ÓÃBRT ×ö ²¨ÌØÂÊ ·¢ÉúÆ÷
                    1345     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1346             
----                1347             CSEG    AT      00H
0000 020000   F     1348             JMP             AP_start                ; Ö÷´¦Àí³ÌÐò
                    1349             
----                1350             CSEG    AT      03H
0003 020000   F     1351             JMP             Int_WaveActive                  ; Íâ²¿ÖÐ¶Ï0£¬Î¢²¨»½ÐÑÖÐ¶Ï
                    1352             
----                1353             CSEG    AT      0BH
000B 020000   F     1354             JMP             Int_Timer0                      ; T0¶¨Ê±Æ÷ÖÐ¶Ï
                    1355             
----                1356             CSEG    AT      13H                     ; Íâ²¿ÖÐ¶Ï1£¬²å¿¨ÖÐ¶Ï
0013 020000   F     1357             JMP     Int_InsertActive                
                    1358             
----                1359             CSEG    AT      1BH
001B 020000   F     1360             JMP             Int_UnixActive                  ; ²ð¶¯ÖÐ¶Ï
                    1361             
----                1362             CSEG    AT      23H
0023 020000   F     1363             JMP     Int_UART                        ; ´®¿ÚÖÐ¶Ï      
                    1364             
----                1365             RSEG    ?pr?OBUMAIN?tf0_timer_1
                    1366             USING   0
                    1367     ;--------------------------------------
                    1368     ;ÃèÊö:
                    1369     ;       ´®¿Ú¶Ï½ÓÊÕ³ÌÐò
                    1370     ;´¥·¢·½Ê½
                    1371     ;       ÏÂ½µÑÓ´¥·¢
                    1372     ;--------------------------------------
0000                1373     Int_UART:
                    1374             
0000 C28C           1375             CLR     TR0
0002 C282           1376             CLR     PIN_WAVE_CHANNEL1
0004 53AB7F         1377             ANL     REG_MCU_WKCTH,#01111111B
0007 C2AF           1378             CLR     EA
0009 C2AC           1379             CLR     ES                      ;ÔÊÐíÍâ²¿ÖÐ¶Ï0
                    1380             ;[2013-7-20] MOV        REG_WDT_CONTR,#00111111B        
000B 758100   F     1381             MOV     SP,#IDATA_STACK
000E 7400     F     1382             MOV     A,#LOW  _FUN_TEST_SerialTX03    ;_FUN_CC1101_RX
0010 C0E0           1383             PUSH    ACC
0012 7400     F     1384             MOV     A,#HIGH _FUN_TEST_SerialTX03    ;_FUN_CC1101_RX
0014 C0E0           1385             PUSH    ACC
                    1386             
0016                1387     Int_UART_OVER:
                    1388             
0016 32             1389             RETI
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    26

                    1390     ;--------------------------------------
                    1391     ;ÃèÊö:  ²ð¶¯¿ª¹Ø°´ÏÂ¼ÌÐøÎ¢²¨»½ÐÑÁ÷³Ì;µ¯¿ªÌø×ªµ½AP_start
                    1392     ;´¥·¢·½Ê½
                    1393     ;       ÏÂ½µÑÓ ´¥·¢
                    1394     ;¹¦ÄÜ£º Î¢²¨»½ÐÑ²ð¶¯¿ª¹Ø·À¶¶
                    1395     ;--------------------------------------
0017                1396     Int_Invalid:
0017 C2AF           1397             CLR     EA
0019 7F01           1398             mov     r7,#1
001B 120000   F     1399             call    _fun_lib_delay          
001E 20B512         1400             JB      Pin_unfix,Int_WaveActive_S                      ;Pin_unfix=1(²ðÐ¶ÒÑ°´)
                    1401             
0021 75A800         1402             MOV     IE,#0
0024 758100   F     1403             MOV     SP,#IDATA_STACK
0027 7400     F     1404             MOV     A,#low AP_start;OBUMain_sys_OVER
0029 C0E0           1405             PUSH    ACC
002B 7400     F     1406             MOV     A,#high AP_start ;OBUMain_sys_OVER
002D C0E0           1407             PUSH    ACC
                    1408             
002F 32             1409             RETI
                    1410     ;--------------------------------------;
                    1411     ;ÃèÊö£º;
                    1412     ;       Íâ²¿ÖÐ¶Ï0£¬Î¢²¨»½ÐÑÖÐ¶Ï
                    1413     ;´¥·¢·½Ê½
                    1414     ;       ÏÂ½µÑÓ´¥·¢
                    1415     ;--------------------------------------
0030                1416     Int_WaveActive:
                    1417             
0030 30B5E4         1418             JnB     Pin_unfix,Int_Invalid                           ;Pin_unfix=0(²ðÐ¶Î´°´)
0033                1419     Int_WaveActive_S:
0033 53AB7F         1420             ANL     REG_MCU_WKCTH,#01111111B                        ;½ûÖ¹ÄÚ²¿Í£»ú»½ÐÑ¶¨Ê±Æ÷
0036 C2AF           1421             CLR     EA
0038 C2AC           1422             CLR     ES
                    1423             
003A C2A8           1424             CLR     EX0                                                                        
                                                                  ;ÔÊÐíÍâ²¿ÖÐ¶Ï0
003C 758100   F     1425             MOV     SP,#IDATA_STACK
003F 7400     F     1426             MOV     A,#low SEG_OBUMAIN_WAVEACTIVE;TEST_5823_Loop
0041 C0E0           1427             PUSH    ACC
0043 7400     F     1428             MOV     A,#high SEG_OBUMAIN_WAVEACTIVE;TEST_5823_Loop
0045 C0E0           1429             PUSH    ACC
                    1430             
0047 32             1431             RETI
                    1432     ;--------------------------------------
                    1433     ;ÃèÊö£º
                    1434     ;       ²å¿¨ÖÐ¶Ï ÖÐ¶Ï
                    1435     ;´¥·¢·½Ê½
                    1436     ;       ÏÂ½µÑÓ´¥·¢
                    1437     ;       ×´Ì¬
                    1438     ;--------------------------------------
0048                1439     Int_InsertActive:       
0048 C2AF           1440             CLR     EA
004A 53AB7F         1441             ANL     REG_MCU_WKCTH,#01111111B
004D C2AF           1442             CLR     EA
004F C2AC           1443             CLR     ES
0051 C2AA           1444             CLR     EX1     
0053 758100   F     1445             MOV     SP,#IDATA_STACK
0056 7400     F     1446             MOV     a,#low SEG_OBUMAIN_CARDACTIVE
0058 C0E0           1447             PUSH    acc
005A 7400     F     1448             MOV     a,#high SEG_OBUMAIN_CARDACTIVE
005C C0E0           1449             PUSH    acc     
005E                1450     Int_InsertActive_Over:  
005E 32             1451             RETI
                    1452             
005F                1453     Int_InsertActive_RET:
005F D2AF           1454             SETB    EA
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    27

0061 32             1455             RETI    
                    1456     ;--------------------------------------
                    1457     ;ÃèÊö£º
                    1458     ;       T0¶¨Ê±Æ÷ ÖÐ¶Ï
                    1459     ;´¥·¢·½Ê½
                    1460     ;       ¶¨Ê±Æ÷´¥·¢
                    1461     ;       ×´Ì¬
                    1462     ;--------------------------------------
0062                1463     Int_Timer0:
                    1464             
0062 C0E0           1465             push    acc
0064 7401           1466             mov     a,#01
0066 2500     F     1467             add     a,DATA_PowerONTimer                                             ;DATA_Power
                             ONTimer¼ÆÊÆ÷
0068 F500     F     1468             mov     DATA_PowerONTimer,a
006A 5012           1469             jnc     Int_T0_RET
                    1470             ;³¬Ê±´¦Àí
006C D0E0           1471             pop     acc
006E C28C           1472             CLR     TR0                                                                        
                                                                          ; ¹Ø±ÕT0
0070 C2A9           1473             CLR     ET0                                                                        
                                                                          ; ¹Ø±ÕT0Ê¹ÄÜ
0072 758100   F     1474             MOV     SP,#IDATA_STACK
0075 7400     F     1475             mov     A,#low OBUMAIN_WAVEACTIVE_OVER
0077 C0E0           1476             push    ACC
0079 7400     F     1477             mov     A,#high OBUMAIN_WAVEACTIVE_OVER
007B C0E0           1478             push    ACC
                    1479             
007D                1480     Int_T0_OVER:
                    1481             
007D 32             1482             RETI
                    1483             
007E                1484     Int_T0_RET:                                                                                
                                                    ;Î´³¬Ê±
007E D0E0           1485             POP     ACC
0080 32             1486             RETI
                    1487     ;--------------------------------------
                    1488     ;ÃèÊö£º
                    1489     ;       ²ð¶¯ÖÐ¶Ï & T1¶¨Ê±Æ÷
                    1490     ;´¥·¢·½Ê½
                    1491     ;       µçÆ½´¥·¢
                    1492     ;×´Ì¬   
                    1493     ;       ²ð¶¯£º°´ÏÂÎª¸ß£¬·Å¿ªÎªµÍ
                    1494     ;       ¶¨Ê±Æ÷1£¬ÔÝÊ±Ã»ÓÐÓÃµ½ÖÐ¶Ï£¬½öÎª´®¿Ú1µÄ²¨ÌØÂÊ·¢ÉúÆ÷
                    1495     ;--------------------------------------
0081                1496     Int_UnixActive: 
0081 20B526         1497             JB      Pin_unfix,Int_UnixActive_Over                           ;Pin_unfix=0Î´°´£»P
                             in_unfix=1°´ÏÂ
0084 C2AF           1498             CLR     EA
                    1499             
0086 C007           1500             PUSH    AR7     
0088 7F0A           1501             mov     r7,#10
008A 120000   F     1502             call    _fun_lib_delay          
008D D007           1503             POP     AR7
                    1504             
008F 30B504         1505             JnB     Pin_unfix,Int_UnixActive_01     
0092 D2AF           1506             setb    EA
0094 8014           1507             jmp     Int_UnixActive_Over     
0096                1508     Int_UnixActive_01:      
0096 53AB7F         1509             ANL     REG_MCU_WKCTH,#01111111B        
0099 C2AF           1510             CLR     EA
009B C2AC           1511             CLR     ES
009D C2AB           1512             CLR     ET1                                                                        
                                                                          ;ÔÊÐíÍâ²¿ÖÐ¶Ï1  
                    1513             
009F 758100   F     1514             MOV     SP,#IDATA_STACK
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    28

00A2 7400     F     1515             mov     a,#low SEG_OBUMAIN_CDACTIVE
00A4 C0E0           1516             push    acc
00A6 7400     F     1517             mov     a,#high SEG_OBUMAIN_CDACTIVE
00A8 C0E0           1518             push    acc
00AA                1519     Int_UnixActive_Over:
00AA 32             1520             RETI
                    1521     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /
00AB                1522     Sleep:
                    1523     
00AB                1524     _Fun_OBUmain_PinSleep:
                    1525     
00AB E5BB           1526             MOV     A,REG_5412AD_P4SW
00AD 4470           1527             ORL     A,#01110000B
00AF F5BB           1528             MOV     REG_5412AD_P4SW,A
                    1529             
00B1 759400         1530             MOV     REG_5412AD_P0M0,#00000000B
00B4 759301         1531             MOV     REG_5412AD_P0M1,#00000001B
                    1532             
00B7 759600         1533             MOV     REG_5412AD_P2M0,#00000000B
00BA 759500         1534             MOV     REG_5412AD_P2M1,#00000000B
                    1535             
00BD 75B200         1536             MOV     REG_5412AD_P3M0,#00000000B
00C0 75B12C         1537             MOV     REG_5412AD_P3M1,#00101100B
                    1538             
00C3 75B400         1539             MOV     REG_5412AD_P4M0,#00000000B
00C6 75B300         1540             MOV     REG_5412AD_P4M1,#00000000B
                    1541             
                    1542             ;JMP    OBUmain_PinSleep_RTCOff 
00C9 7800     F     1543             MOV     R0,#XDATA_RTCMode
                    1544             ;       MOVX    A,@R0
00CB 758302         1545             MOV     DPH,#2
00CE 8882           1546             MOV     DPL,R0
00D0 E0             1547             MOVX    A,@DPTR
00D1 6455           1548             XRL     A,#CONST_RTC_ON
00D3 7018           1549             JNZ     OBUmain_PinSleep_RTCOff
                    1550             
                    1551     ;/////////////////////////////////////////////////////////////////////////
00D5                1552     OBUmain_PinSleep_RTCON:
00D5 759200         1553             MOV     REG_5412AD_P1M0,#00000000B
00D8 759144         1554             MOV     REG_5412AD_P1M1,#01000100B      ; MISO ÎªÊäÈë   
                    1555             
00DB C2A3           1556             CLR     PIN_PWR_GSM                     ; P2.0  
                    1557             ;       SETB    PIN_PWR_GSM
00DD D297           1558             SETB    PIN_UART2_TX
00DF D296           1559             SETB    PIN_UART2_RX
                    1560             ;SETB   PIN_Bluetooth_RST
                    1561             
                    1562             ;---CLR PIN_SE_IO1
                    1563             ;CLR    PIN_CC1101_MOSI 
00E1 D292           1564             SETB    Pin_5823BK_IRQ
00E3 D291           1565             SETB    PIN_BK_CE
                    1566             
                    1567             ;COMÏÂÔØ
00E5 D2B0           1568             setb    PIN_SOFTSERIALRX
00E7 D2B1           1569             setb    PIN_SOFTSERIALTXH
                    1570             
00E9 C2C4           1571             clr     Pin_Gre
00EB 8022           1572             JMP     OBUmain_PinSleep_RTCSWOver
                    1573     ;/////////////////////////////////////////////////////////////////////////
00ED                1574     OBUmain_PinSleep_RTCOff:
00ED 759200         1575             MOV     REG_5412AD_P1M0,#00000000B       ;
00F0 759104         1576             MOV     REG_5412AD_P1M1,#00000100B       ; MISO ÎªÊäÈë(¸ß×è)
                    1577             
00F3 D2A3           1578             SETB    PIN_PWR_GSM                     ; P2.4                   ; [GSM] 
00F5 C297           1579             CLR     PIN_UART2_TX                    ; p3.6
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    29

00F7 C296           1580             CLR     PIN_UART2_RX                    ; P1.6
                    1581             ;CLR    PIN_Bluetooth_RST               ; p3.7
                    1582             ;---CLR PIN_SE_IO1                      ; P2.2
                    1583     ;       CLR     PIN_CC1101_MOSI                 ; P2.3
                    1584             
00F9 D292           1585             SETB    Pin_5823BK_IRQ                  ; p1.2
00FB D291           1586             SETB    PIN_BK_CE                       ; p1.1
                    1587                                                     
                    1588             ;LCD
00FD D295           1589             SETB    PIN_PWRDWN_LCD                  ; [Òº¾§µçÔ´ LCD ±³¹â]·Åµ½ÐÝÃßÇ°
00FF C295           1590             CLR     Pin_LCD_RST                     ;Òº¾§¸´Î»ÍÈÎªµÍ 
0101 C295           1591             CLR     Pin_LCD_SDA                     ;Òº¾§Ê¾ÝÍÈÎªµÍ
0103 C295           1592             CLR     Pin_LCD_SCL                     ;Òº¾§Ê±ÖÓÍÈÎªµÍ
0105 C295           1593             CLR     Pin_LCD_CS                      ;Òº¾§Æ¬Ñ¡ÍÈÎªµÍ
0107 C295           1594             CLR     Pin_LCD_DC                      ;Òº¾§ÃüÁîÍÈÎªµÍ                            
                                          
                    1595     
                    1596             ;COMÏÂÔØ
0109 C2B0           1597             clr     PIN_SOFTSERIALRX
010B C2B1           1598             clr     PIN_SOFTSERIALTXH
                    1599     
010D D2C4           1600             SETB    Pin_Gre
                    1601     
                    1602                             
010F                1603     OBUmain_PinSleep_RTCSWOver:                     ; 
                    1604                                                     ; 
010F C285           1605             CLR     PIN_ESAM_RST                    ; 
0111 C2A6           1606             CLR     Pin_ES_Rst                      ; 
0113 C284           1607             CLR     Pin_522_RST                     ; 
0115 D2A4           1608             SETB    Pin_pwrdwn                      ; [Íâ Î§ µç Ô´]
0117 D295           1609             setb    PIN_PWR_SE
                    1610             
0119 D2B5           1611             SETB    Pin_unfix
011B D2B3           1612             SETB    PIN_card_exist
011D D2B2           1613             SETB    WKO_BK
                    1614             
011F D280           1615             SETB    Pin_5823BK_MISO
                    1616             
                    1617             ;LCD
                    1618             ;CLR     Pin_LCD_RST             ;Òº¾§¸´Î»ÍÈÎªµÍ        
                    1619             ;CLR     Pin_LCD_SDA             ;Òº¾§Ê¾ÝÍÈÎªµÍ
                    1620             ;CLR     Pin_LCD_SCL             ;Òº¾§Ê±ÖÓÍÈÎªµÍ
                    1621             ;CLR     Pin_LCD_CS              ;Òº¾§Æ¬Ñ¡ÍÈÎªµÍ
                    1622             ;CLR     Pin_LCD_DC              ;Òº¾§ÃüÁîÍÈÎªµÍ
                    1623     
                    1624     
                    1625             ;LCD
                    1626             ;SETB   PIN_PWRDWN_LCD                  ; [Òº¾§µçÔ´ LCD ±³¹â]·Åµ½ÐÝÃßÇ°
                    1627             ;CLR     Pin_LCD_RST                    ;Òº¾§¸´Î»ÍÈÎªµÍ 
                    1628             ;CLR     Pin_LCD_SDA                    ;Òº¾§Ê¾ÝÍÈÎªµÍ
                    1629             ;CLR     Pin_LCD_SCL                    ;Òº¾§Ê±ÖÓÍÈÎªµÍ
                    1630             ;CLR     Pin_LCD_CS                     ;Òº¾§Æ¬Ñ¡ÍÈÎªµÍ
                    1631             ;CLR     Pin_LCD_DC                     ;Òº¾§ÃüÁîÍÈÎªµÍ                            
                                          
                    1632     
                    1633     
                    1634             
                    1635             ;RC522
0121 C284           1636             CLR     Pin_522_RST             ;522¸´Î»ÍÈÎªµÍ
0123 C2C6           1637             CLR     PIN_522_MOSI            ;522 MISOÎªµÍ
0125 C286           1638             CLR     Pin_522_SS              ;522 SSÍÈÎªµÍ
0127 C2C1           1639             CLR     PIN_522_MISO
0129 C287           1640             CLR     PIN_522_SCLK            ;522 SCLKÍÈÎªµÍ
                    1641             
                    1642             ;ESAM
012B C283           1643             CLR     PIN_ESAM_RX             ;ESAM Ê¾ÝÍÈÎªµÍ
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    30

012D C2B4           1644             CLR     PIN_SE_IO1              ;ESAM Ê¾ÝÍÈÎªµÍ
                    1645             
012F C285           1646             CLR     PIN_ESAM_RST            ;ESAM ¸´Î»ÍÈÎªµÍ
0131 C2A6           1647             CLR     Pin_ES_Rst
0133 C295           1648             CLR     PIN_PWR_LOWIO
                    1649     
                    1650             
                    1651             ;BEEP           
0135 C295           1652             CLR     PIN_BELL_01
0137 C295           1653             CLR     PIN_BELL_02
                    1654             
                    1655             ;LED
                    1656             ;SETB   Pin_Red
                    1657             ;SETB   Pin_Gre
                    1658             ;SETB   Pin_Red 
0139 D2C5           1659             SETB    Pin_Red 
                    1660             
                    1661             ;BK5823
013B D291           1662             SETB    PIN_BK_CE                               
013D D290           1663             SETB    Pin_5823BK_CS                           
013F D280           1664             SETB    Pin_5823BK_MISO         
0141 D292           1665             SETB    Pin_5823BK_IRQ                          
0143 D281           1666             SETB    Pin_5823BK_MOSI                         
0145 C2C2           1667             CLR     Pin_5823BK_SCLK                         
0147 C282           1668             CLR     PIN_WAVE_CHANNEL1       
                    1669                     
0149 C295           1670             clr     Pin_SW          
                    1671             
014B 22             1672             RET
                    1673     ;////////////////////////////////////////////////////////////////////////////
014C                1674     _Fun_OBUmain_SysUNSleep:
                    1675             
014C 120000   F     1676             CALL    _Fun_OBUmain_PinUNSleep
                    1677             ;RET
014F 120000   F     1678             CALL    _FUN_ContactIssue_RELEASE
                    1679             ;RET
0152 120000   F     1680             CALL    start_user                      ; Ô­À´³ÌÐòÒ»¿ªÊ¼Òª×öµÄ¹¤×÷£¬ÏÖ¸Ä³É×Ó³ÌÐòµÄÐ
                             ÎÊ½£¬ÔÚÎ¢²¨¼¤»î£¬²å¿¨£¬²ð¶¯Ç°µ÷½ÚÆ÷ÓÃ                
0155 C29C           1681             CLR     REN
0157 C2AC           1682             CLR     ES
                    1683             
0159 22             1684             RET
                    1685     ;////////////////////////////////////////////////////////////////////////////   
015A                1686     _Fun_OBUmain_SysUNSleep02:
                    1687             
015A 120000   F     1688             CALL    _Fun_OBUmain_PinUNSleep
015D 120000   F     1689             CALL    _FUN_ContactIssue_RELEASE
0160 120000   F     1690             CALL    start_user02                    ; Ô­À´³ÌÐòÒ»¿ªÊ¼Òª×öµÄ¹¤×÷£¬ÏÖ¸Ä³É×Ó³ÌÐòµÄÐ
                             ÎÊ½£¬ÔÚÎ¢²¨¼¤»î£¬²å¿¨£¬²ð¶¯Ç°µ÷½ÚÆ÷ÓÃ        
0163 C29C           1691             CLR     REN
0165 C2AC           1692             CLR     ES
                    1693             
0167 22             1694             RET     
                    1695     ;////////////////////////////////////////////////////////////////////////////
0168                1696     unsleep:
                    1697     
                    1698     
                    1699             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1700             ;ÉèÖÃ P4.4 ÎªÆÕÍ¨ IO ½Å
                    1701             ;ÉèÖÃ P4.5 ÎªÆÕÍ¨ IO ½Å
                    1702             ;ÉèÖÃ P4.6 ÎªÆÕÍ¨ IO ½Å Pin_522_RST
                    1703             
                    1704             ;ÍÆ»»Êä³ö
                    1705     ;       0.3     ÍÆ»»                    ·äÃùÆ÷01
                    1706     ;       0.2     ÍÆ»»                    ·äÃùÆ÷02
                    1707     
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    31

                    1708     ;       xx      ÊäÈë                    USB³äµç¼ì²â
                    1709     ;       xx      ÊäÈë                    µÍµçÑ¹¼ì²â
                    1710     ;       3.2     ÊäÈë                    Î¢²¨»½ÐÑ
                    1711     ;       3.3     ÊäÈë                    ²å¿¨
                    1712     ;       3.5     ÊäÈë                    ²ð¶¯
                    1713     ;       xx      ÊäÈë                    ½ÓÊÕÁéÃô¶È¿ª¹Ø
                    1714     ;       1.6     ÊäÈë[GMS ON]            433 ÖÐ¶Ï
                    1715             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0168                1716     _Fun_OBUmain_PinUNSleep:
                    1717             
                    1718             
                    1719             
0168 E5BB           1720             MOV     A,REG_5412AD_P4SW                                                       ;P4
                             .4\P4.5\P4.6ÉèÖÃÎªÆÕÍ¨IO
016A 4470           1721             ORL     A,#01110000B
016C F5BB           1722             MOV     REG_5412AD_P4SW,A
                    1723             
                    1724             ;MOV    REG_5412AD_spctl,#0d4h                          ;0dch   ;0dfh   
                    1725     ;---    MOV     REG_5412AD_P0M0,#00001100B
016E 759404         1726             MOV     REG_5412AD_P0M0,#00000100B
0171 759301         1727             MOV     REG_5412AD_P0M1,#00000001B
                    1728             
0174 759600         1729             MOV     REG_5412AD_P2M0,#00000000B
0177 759500         1730             MOV     REG_5412AD_P2M1,#00000000B              ; µÍµçÑ¹ ¼ì²â£¨Î´º¸£©
                    1731     ;       MOV     REG_5412AD_P2M1,#00000010B              ; µÍµçÑ¹ ¼ì²â£¨º¸£©
                    1732             
017A 75B210         1733             MOV     REG_5412AD_P3M0,#00010000B
017D 75B12C         1734             MOV     REG_5412AD_P3M1,#00101100B
                    1735             
0180 75B400         1736             MOV     REG_5412AD_P4M0,#00000000B
0183 75B300         1737             MOV     REG_5412AD_P4M1,#00000000B
                    1738             
                    1739             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1740             ;jmp    OBUmain_PinUNSleep_RTCOff
0186 7800     F     1741             MOV     R0,#XDATA_RTCMode
                    1742                     ;MOVX   A,@R0
0188 758302         1743             MOV     DPH,#2
018B 8882           1744             MOV     DPL,R0
018D E0             1745             MOVX    A,@DPTR
018E 6455           1746             XRL     A,#CONST_RTC_ON
0190 7012           1747             JNZ     OBUmain_PinUNSleep_RTCOff
                    1748             
0192                1749     OBUmain_PinUNSleep_RTCON:
0192 759200         1750             MOV     REG_5412AD_P1M0,#00000000B
0195 759144         1751             MOV     REG_5412AD_P1M1,#01000100B      ; MISO ÎªÊäÈë
                    1752             
0198 C2A3           1753             CLR     PIN_PWR_GSM                     ;P2.0
019A D296           1754             SETB    PIN_UART2_RX
019C D297           1755             SETB    PIN_UART2_TX
                    1756             ;SETB   PIN_Bluetooth_RST
                    1757             
                    1758             ;---CLR PIN_SE_IO1
                    1759             ;CLR    PIN_CC1101_Mosi
                    1760             
019E D292           1761             SETB    Pin_5823BK_IRQ                                          ;BK5823 IRQµÍµçÆ½ÓÐ
                             Ð§
01A0 D291           1762             SETB    PIN_BK_CE
                    1763             
01A2 8010           1764             JMP     OBUmain_PinUNSleep_RTCSWOver
01A4                1765     OBUmain_PinUNSleep_RTCOff:
                    1766             
01A4 759200         1767             MOV     REG_5412AD_P1M0,#00000000B       ;
01A7 759104         1768             MOV     REG_5412AD_P1M1,#00000100B              ; MISO ÎªÊäÈë(¸ß×è)
                    1769             
01AA D2A3           1770             SETB    PIN_PWR_GSM                             ; P2.0
01AC C297           1771             CLR     PIN_UART2_TX
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    32

                    1772             ;---CLR PIN_SE_IO1
                    1773             ;CLR    PIN_CC1101_MOSI
                    1774             ;CLR    PIN_Bluetooth_RST
01AE C296           1775             CLR     PIN_UART2_RX 
                    1776             
01B0 D292           1777             SETB    Pin_5823BK_IRQ
01B2 D291           1778             SETB    PIN_BK_CE
                    1779             
01B4                1780     OBUmain_PinUNSleep_RTCSWOver:   
01B4 D295           1781             SETB    PIN_PWR_SE      
01B6 C2A4           1782             CLR     Pin_pwrdwn              ;[¿ªÍâÎ§µçÔ´]
01B8 D2B5           1783             SETB    Pin_unfix
01BA D2B3           1784             SETB    PIN_card_exist
01BC D2B2           1785             SETB    WKO_BK
01BE D280           1786             SETB    Pin_5823BK_MISO
                    1787             
                    1788     ;       RET
                    1789     ;       LCD
                    1790     ;       SETB    Pin_LCD_RST             ;Òº¾§¸´Î»ÍÈÎªµÍ 
                    1791     ;       CLR     Pin_LCD_SDA             ;Òº¾§Ê¾ÝÍÈÎªµÍ
                    1792     ;       CLR     Pin_LCD_SCL             ;Òº¾§Ê±ÖÓÍÈÎªµÍ
                    1793     ;       SETB    Pin_LCD_CS              ;Òº¾§Æ¬Ñ¡ÍÈÎªµÍ
                    1794     ;       CLR     Pin_LCD_DC              ;Òº¾§ÃüÁîÍÈÎªµÍ
                    1795             
                    1796             ;522
01C0 C284           1797             CLR     Pin_522_RST             ;522¸´Î»ÍÈÎªµÍ
01C2 C2C6           1798             CLR     PIN_522_MOSI            ;522 MISOÎªµÍ
01C4 C286           1799             CLR     Pin_522_SS              ;522 SSÍÈÎªµÍ
01C6 D2C1           1800             SETB    PIN_522_MISO
01C8 C287           1801             CLR     PIN_522_SCLK            ;522 SCLKÍÈÎªµÍ
                    1802             
                    1803             ;ESAM
01CA D283           1804             SETB    PIN_ESAM_RX             ;ESAM Ê¾ÝÍÈÎªµÍ
01CC D2B4           1805             SETB    PIN_SE_IO1              
01CE D285           1806             SETB    PIN_ESAM_RST            ;ESAM ¸´Î»ÍÈÎªµÍ
01D0 D2A6           1807             SETB    Pin_ES_Rst
                    1808             ;CLR    PIN_ESAM_RST
                    1809             
                    1810             ;µÍµçÑ¹
01D2 D295           1811             SETB    PIN_PWR_LOWIO
                    1812             
                    1813             ;COMÏÂÔØ
01D4 D2B0           1814             SETB    PIN_SOFTSERIALRX
01D6 D2B1           1815             SETB    PIN_SOFTSERIALTXH
                    1816             
                    1817             ;BEEP
01D8 C295           1818             CLR     PIN_BELL_01
01DA C295           1819             CLR     PIN_BELL_02
                    1820             
                    1821             ;LED    
01DC D2C5           1822             SETB    Pin_Red
01DE D2C4           1823             SETB    Pin_Gre 
                    1824             
                    1825             ;5823
01E0 D291           1826             SETB    PIN_BK_CE
                    1827     ;       CLR     PIN_BK_CE
01E2 D290           1828             SETB    Pin_5823BK_CS
01E4 D280           1829             SETB    Pin_5823BK_MISO
01E6 D292           1830             SETB    Pin_5823BK_IRQ
01E8 D281           1831             SETB    Pin_5823BK_MOSI
01EA C2C2           1832             CLR     Pin_5823BK_SCLK
01EC C282           1833             CLR     PIN_WAVE_CHANNEL1       
01EE C295           1834             CLR     Pin_SW
                    1835     
                    1836             
                    1837             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    33

01F0 22             1838             RET     
                    1839     ;========================================================       
----                1840             RSEG    ?pr?OBUMAIN?Mater
                    1841             USING   0
                    1842     ;-----------------------------------------------------------------
                    1843     ;ÃèÊö:  OBU Ö÷Ö´ÐÐº¯Ê
                    1844     ;-----------------------------------------------------------------
0000                1845     AP_start:
                    1846                     
0000 758100   F     1847             MOV     SP,#IDATA_STACK
0003 75A800         1848             MOV     IE,#0
0006 D28A           1849             SETB    IT1                             ; ³ÌÐòÒ»¿ªÊ¼¾ÍÊÇÉèÖÃÏÂ½µÑÓ´¥·¢£¬²»È»²å¿¨Ê±£
                             ¬»áµçÆ½´¥·¢
0008 D288           1850             SETB    IT0
                    1851             
000A 120000   F     1852             CALL    _FUN_OBUMAIN_CheckMemoryAndEx
000D EF             1853             MOV     A,R7
000E 6003           1854             JZ      OBUMAIN_MASTER_CheckMemoryOver
0010                1855     OBUMAIN_MASTER_CheckMemoryErr:
                    1856             ;MOV    A,#CONST_STATE_ExMemoryEr
0010 120000   F     1857             CALL    _FUN_OBUMAIN_ErrShow03
                    1858             ;JMP    AP_start        
0013                1859     OBUMAIN_MASTER_CheckMemoryOver:                 
                    1860             
                    1861             ;³õÊ¼»¯³õ´ÎÉÏµçµÄ±ê¼Ç=0
                    1862             ;=0·Ç³õ´ÎÉÏµç
                    1863             ;=0x55³õ´ÎÉÏµç
0013 7800     F     1864             MOV     R0,#IDATA_POWUP
0015 7400           1865             MOV     A,#0
0017 F6             1866             MOV     @R0,A
                    1867             
                    1868             ;ÉÏµçÅÐ¶Ï
                    1869             ;µÚÒ»¸öÉÏµç ¿´ÃÅ¹·
                    1870             ;=0 ¿´ÃÅ¹·Ã»ÓÐ¹¤×÷£¬¿ÕÏÐ
                    1871             ;=1 ¿´ÃÅ¹·¹¤×÷£¬·Ç¿ÕÏÐ
0018 E5C1           1872             MOV     A,REG_WDT_CONTR
001A 20E30B         1873             JB      ACC.3,AP_start_1
                    1874             
                    1875             ;ÉÏµç¸´Î»(²ð¶¯Î´°´ÏÂ£¬²å¿¨ÉÏµç)
                    1876             ;IDATA_POWUP = 55H && Pin_unfix=0(²ðÐ¶Î´°´) && PIN_card_exist=0(¿¨´æÔÚ)
001D 20B508         1877             JB      Pin_unfix,AP_start_1
0020 20B305         1878             JB      PIN_card_exist,AP_start_1
                    1879             
                    1880             ;¿´ÃÅ¹·³õ´ÎÉÏµçµÄ±ê¼Ç
0023 7800     F     1881             MOV     R0,#IDATA_POWUP
0025 7455           1882             MOV     A,#55H
0027 F6             1883             MOV     @R0,A
                    1884             
0028                1885     AP_start_1:
                    1886             ;MOV    REG_WDT_CONTR,#00111111B        ; ÏÂÔØºó¿´ÃÅ¹·ÓÐ¿ÉÄÜÎ¹¹·Ê±¼ä±äµÄºÜ¶Ì£¬ÐèÒªÁ
                             ¢¼´ÉèÖÃ¿´ÃÅ¹·Î¹¹·Ê±¼ä
0028 758100   F     1887             MOV     SP,#IDATA_STACK
002B 75A800         1888             MOV     IE,#0
002E D28A           1889             SETB    IT1                             ; ³ÌÐòÒ»¿ªÊ¼¾ÍÊÇÉèÖÃÏÂ½µÑÓ´¥·¢£¬²»È»²å¿¨Ê±£
                             ¬»áµçÆ½´¥·¢
0030 D288           1890             SETB    IT0
0032 7800     F     1891             MOV     R0,#IDATA_STACK - 2             ;±£Áô³õ´Î²å¿¨ÉÏµç±êÊ¾
                    1892             
0034                1893     OBUMAIN_MASTER_MEMORYCLR00:
0034 7600           1894             MOV     @R0,#0
0036 D8FC           1895             DJNZ    R0,OBUMAIN_MASTER_MEMORYCLR00   ;ÇåÄÚ´æ
                    1896             
0038 D291           1897             SETB    PIN_BK_CE
003A C2C5           1898             CLR     PIN_RED
003C 120000   F     1899             CALL    _FUN_HDLC_5830Init              ;³õÊ¼»¯Ðè×÷ÆµÂÊÐ£×¼£¬¼Ä´æÆ÷²»ÄÜÖ±½ÓÅäÖÃÎªÐÝ
                             ÃßÄ£Ê½
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    34

003F D2C5           1900             SETB    PIN_RED 
                    1901              
                    1902             ;¼ì²é9~18¼Ä´æÆ÷ÊÇ·ñ³õÊ¼»¯³É¹¦
0041 120000   F     1903             CALL    _FUN_HDLC_CheckReg9To18
0044 EF             1904             MOV     A,R7
0045 6007           1905             JZ      OBUMAIN_MASTER_Checked  
0047 7407           1906             MOV     A,#CONST_STATE_5823INIER
0049 120000   F     1907             CALL    _FUN_OBUMAIN_ErrShow
004C 80B2           1908             JMP     AP_start
                    1909             
004E                1910     OBUMAIN_MASTER_Checked:
                    1911              
004E 7800     F     1912             MOV     R0,#XDATA_RTCMode
0050 74FF           1913             MOV     A,#CONST_RTC_off
                    1914                     ;MOVX   @R0,A
0052 758301         1915             MOV     DPH,#1 
0055 8882           1916             MOV     DPL,R0 
0057 F0             1917             MOVX    @DPTR,A
                    1918             
0058 120000   F     1919             CALL    _Fun_OBUmain_PinSleep
005B 120000   F     1920             CALL    _FUN_OBUMAIN_INITSYS                            ; ÏµÍ³³õÊ¼»¯
                    1921             
005E C28B           1922             CLR     IE1
0060 C289           1923             CLR     IE0
                    1924             
                    1925     ;OBUMAIN_MASTER_int:
                    1926             ;×¢£ºP3.5 Óë T1 ÊÇÍ¬Ò»¸öÖÐ¶Ï¸´ÓÃ£¬P3.4ÓëT0ÊÇÍ¬Ò»¸öÖÐ¶Ï¸´ÓÃ£¬ÐèÒªÔÚÖÐ¶Ï³ÌÐòÇø·Ö
                    1927             ;Íâ²¿ÖÐ¶Ï0      [Î¢²¨»½ÐÑÖÐ¶Ï]  Ê¹ÄÜ    ÏÂ½µÑØ´¥·¢
                    1928             ;Íâ²¿ÖÐ¶Ï1      [Î¢²¨½ÓÊÕÖÐ¶Ï]  ½ûÖ¹    XX
                    1929             ;P3.5           [²ð¶¯ÖÐ¶Ï]      Ê¹ÄÜ    µçÆ½´¥·¢
                    1930             ;P3.4           [²ð¶¯ÖÐ¶Ï]      Ê¹ÄÜ    µçÆ½´¥·¢
                    1931             ;¶¨Ê±Æ÷ 1ÖÐ¶Ï   [¶¨Ê±Æ÷1ÖÐ¶Ï]   ½ûÖ¹    XX
                    1932             ;¶¨Ê±Æ÷ 0ÖÐ¶Ï   [¶¨Ê±Æ÷0ÖÐ¶Ï]   ½ûÖ¹    XX
                    1933             ;´®¿Ú ÖÐ¶Ï      [´®¿ÚÖÐ¶Ï]      ½ûÖ¹    XX
0062 75A800         1934             MOV     IE,#0
0065 758F00         1935             MOV     Reg_WakeClk0,#0
                    1936                     
                    1937             ;¿ªÆô P3.5 ÖÐ¶Ï[²ð¶¯ÖÐ¶Ï]        ×¢£º±¾ÖÐ¶ÏÓëT1ÖÐ¶Ï¸´ÓÃ
0068 E58F           1938             MOV     A,Reg_WakeClk0          
006A 4420           1939             ORL     A,#00100000B            ; ÉèÖÃP3.5ÎªÍâ²¿ÖÐ¶Ï½Å
006C F58F           1940             MOV     Reg_WakeClk0,A          ; 
006E D2AB           1941             SETB    ET1                     ; ¿ªÆô²ð¶¯ÖÐ¶Ï
                    1942             
                    1943             ;´®¿Ú ´®¶Ï ½ÓÊÕ³õÊ¼»¯
0070 120000   F     1944             CALL    _FUN_ContactIssue_INIT02
0073 E58F           1945             MOV     A,Reg_WakeClk0
0075 4440           1946             ORL     A,#01000000b;40H
0077 F58F           1947             MOV     Reg_WakeClk0,A
                    1948             
0079 C299           1949             CLR     TI
007B C298           1950             CLR     RI
007D D29C           1951             SETB    REN
007F C2AC           1952             CLR     ES
                    1953             
                    1954             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1955             ;CALL   _FUN_TEST_Master
                    1956             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~            
0081                1957     OBUMAIN_MASTER_MAINSleep:
                    1958             
                    1959             ;MOV    REG_WDT_CONTR,#00111111B
0081 120000   F     1960             CALL    _Enter_Sleep_Mode       
                    1961             
0084 D295           1962             SETB    PIN_PWRDWN_LCD          ;¹ØÒº¾§
0086 C298           1963             CLR     RI
0088 C299           1964             CLR     TI
008A C289           1965             CLR     IE0
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    35

008C C28B           1966             CLR     IE1
008E C28D           1967             CLR     TF0
0090 C28F           1968             CLR     TF1
0092 C28C           1969             CLR     TR0
0094 C28E           1970             CLR     TR1
                    1971             
0096 D2C4           1972             SETB    pin_gre
0098 D2C5           1973             SETB    pin_RED
                    1974             
                    1975             ;-------------------------------;
                    1976     ;       SETB    EX0                     ; Ê¹ÄÜÍâ²¿ÖÐ¶Ï0
                    1977     ;       SETB    IT0                     ; Íâ²¿ÖÐ¶Ï0£¬ÏÂ½µÑØ´¥·¢ÖÐ¶Ï
                    1978             ;Íâ²¿ ÖÐ¶Ï 01 [²å¿¨ÖÐ¶Ï] Ê¹ÄÜ   ; ÏÂ½µÑØ´¥
                    1979             ;SETB   EX1                     ; Ê¹ÄÜÍâ²¿ÖÐ¶Ï0
                    1980             ;SETB   IT1                     ; Íâ²¿ÖÐ¶Ï0£¬ÏÂ½µÑØ´¥·¢ÖÐ¶Ï
                    1981             ;-------------------------------;
                    1982             
009A E58F           1983             MOV     A,Reg_WakeClk0
009C 4440           1984             ORL     A,#01000000b;40H
009E F58F           1985             MOV     Reg_WakeClk0,A  
                    1986             
00A0 D2B0           1987             SETB    P3.0
00A2 D2B1           1988             SETB    P3.1
                    1989             
00A4 E4             1990             CLR     A
00A5 D29C           1991             SETB    REN
00A7 F5A8           1992             MOV     IE,A
                    1993             
00A9 D2AC           1994             SETB    ES                      ; ´®¿ÚÖÐ¶Ï
00AB D2A8           1995             SETB    EX0                     ; Ê¹ÄÜÍâ²¿ÖÐ¶Ï0
00AD D288           1996             SETB    IT0                     ; Íâ²¿ÖÐ¶Ï0£¬ÏÂ½µÑØ´¥·¢ÖÐ¶Ï
                    1997     
00AF D2AF           1998             SETB    EA
                    1999             
00B1 00             2000             NOP
00B2 00             2001             NOP
00B3 00             2002             NOP
00B4 00             2003             NOP
00B5 00             2004             NOP     
                    2005     ;       CLR     PIN_PWRDWN_LCD
                    2006     ;ASDFSADFDSAFDSF:
                    2007     ;       JMP     ASDFSADFDSAFDSF 
                    2008     
00B6 E4             2009             clr     a
00B7 7A03           2010             mov     r2,#3
                    2011             ;jmp    TEST_SerialTX03_issue
                    2012             
00B9 758782         2013             MOV     PCON,#82H
                    2014             
00BC 00             2015             NOP
00BD 00             2016             NOP
                    2017             
00BE 020000   F     2018             JMP     AP_START
                    2019     ;/////////////////////////////////////////////////////////////////////////      
00C1                2020     Int_UART_Point:
00C1 120000   F     2021             call    _fun_test_display
00C4 80FB           2022             jmp     Int_UART_Point
                    2023     ;=========================================================================
                    2024     ;Ô­ÓÃ»§³ÌÐò¿ªÊ¼´¦
                    2025     ;=========================================================================
00C6                2026     start_user:     ;Ô­À´³ÌÐòÒ»¿ªÊ¼Òª×öµÄ¹¤×÷£¬ÏÖ¸Ä³É×Ó³ÌÐòµÄÐÎÊ½£¬ÔÚÎ¢²¨¼¤»î£¬²å¿¨£¬²ð¶¯Ç°µ÷½Ú
                             Æ÷ÓÃ
                    2027             
                    2028             ;--- ³õÊ¼»¯¶ÑÕ»ºÍÄÚ´æ ---
                    2029             ;522 RST ÒòÎª¸´ÓÃµÍµçÑ¹¼ì²â×öVCC£¬ÒªÍÆÍì
                    2030             ;RET
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    36

00C6 7FFA           2031             MOV     R7,#250                                         ; »ª´óESAM¿¨¸´Î»Òª±È½ÝµÂµÄ¶
                             Ì
00C8 120000   F     2032             CALL    _FUN_LIB_DELAYSIMPLAY   
                    2033             ;¸´Î» ESAM ¿¨£¬µ«²»½ÓÊÕÊ¾Ý
00CB C285           2034             CLR     PIN_ESAM_RST    
00CD 7F30           2035             MOV     R7,#030H                                        ; »ª´óESAM¿¨¸´Î»Òª±È½ÝµÂµÄ¶
                             Ì
00CF 120000   F     2036             CALL    _FUN_LIB_DELAYSIMPLAY
00D2 D285           2037             SETB    PIN_ESAM_RST
00D4 7F03           2038             MOV     R7,#03
00D6 120000   F     2039             CALL    _FUN_LIB_DELAY
                    2040             
00D9                2041     start_user02:
00D9 7800     F     2042             MOV     R0,#IDATA_STACK
00DB                2043     OBUMAIN_MASTER_MEMORYCLR:
00DB 7600           2044             MOV     @R0,#0
00DD D8FC           2045             DJNZ    R0,OBUMAIN_MASTER_MEMORYCLR
                    2046             
                    2047             ;Éú³ÉËæ»úÒò×Ó
00DF 7800     F     2048             MOV     R0,#XDATA_RAND                          
00E1 E4             2049             CLR     A
00E2 900033         2050             MOV     DPTR,#STR_SYS_OBUID+4
00E5 93             2051             MOVC    A,@A+dptr
00E6 23             2052             RL      A
00E7 23             2053             RL      A
                    2054             ;MOVX   @R0,A
00E8 758301         2055             MOV     DPH,#1 
00EB 8882           2056             MOV     DPL,R0 
00ED F0             2057             MOVX    @DPTR,A
00EE 120000   F     2058             CALL    _FUN_OBUMAIN_INITSYS                            ; ÏµÍ³³õÊ¼»¯
                    2059             
00F1 7500D2   F     2060             MOV     DATA_PowerONTimer,#210
00F4 E4             2061             CLR     A
                    2062             
00F5 4420           2063             ORL     A,#00100000B                    ;ÉèÖÃt1Îª8Î»ÖØ×°ÔØ¶¨Ê±Æ÷
00F7 4401           2064             ORL     A,#00000001B                    ;ÉèÖÃt0Îª16Î»¶¨Ê±Æ÷
00F9 F589           2065             MOV     TMOD,A
                    2066     
00FB E4             2067             CLR     A
00FC 4404           2068             ORL     A,#00000100B                    ;TCON.2 INT1ÖÐ¶Ï¿ØÖÆ    = 0 µçÆ½´¥·¢    = 1
                              ±ßÃ»´¥·¢
00FE 4401           2069             ORL     A,#00000001B                    ;TCON.0 INT0ÖÐ¶Ï¿ØÖÆ    = 0 µçÆ½´¥·¢    = 1
                              ±ßÃ»´¥·¢
0100 F588           2070             MOV     TCON,A
                    2071             
0102 22             2072             RET
                    2073     ;-----------------------------------------------------------------------
                    2074     ;SEG_OBUMAIN_CDACTIVE(¸½ÊôÐò¶Î)
                    2075     ;¸½Êô:_FUN_OBUMAIN_MASTER
                    2076     ;ÃèÊö:²ð¶¯¼¤»î(²ð¶¯)
                    2077     ;Á÷³Ì:
                    2078     ;       ²ð¶¯¼¤»î        ->      ÏÔÊ¾±êÇ©Ê§Ð§    ->      ½øÈë²å¿¨´¦ÀíÁ÷³Ì
                    2079     ;-----------------------------------------------------------------------
0103                2080     SEG_OBUMAIN_CDACTIVE:
0103 C2AF           2081             CLR     EA
0105 C2AC           2082             CLR     ES
0107 C2AB           2083             CLR     ET1                             ;²»ÔÊÐíÍâ²¿ÖÐ¶Ï1        
                    2084             
0109 120000   F     2085             CALL    _Fun_OBUmain_SysUNSleep
                    2086             
                    2087             ;¶ÔÓÃ»§¿¨ºÍESAM¿¨×ö»ù±¾¸´Î»ºÍÑ¡Ä¿Â¼²Ù×÷¡£
                    2088     ;       MOV     R7,#10                          ; 50
                    2089     ;       CALL    _FUN_LIB_DELAY                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµçÑ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨
                             Æ¬   
010C 120000   F     2090             CALL    _Func_LCD_INIT                  
                    2091             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    37

010F D200     F     2092             SETB    BIT_CD_SW                       ;=0±íÊ¾Î´±»²ð¶¯£¬=1 ±»²ð¶¯
0111 D200     F     2093             SETB    BIT_ACTIVECARD                  ;=0 ·Ç²ð¶¯¼¤»î;=1 ²ð¶¯¼¤»î
0113 120000   F     2094             CALL    _FUN_OBUMAIN_INITSYS            ; ÏµÍ³³õÊ¼»¯
0116 120000   F     2095             CALL    _FUN_OBUMain_BASEINIT           ;³õÊ¼»¯ESAM,ÓÃ»§¿¨      
                    2096     ;test_current_loop:
                    2097     ;       MOV     REG_WDT_CONTR,#00111111B
                    2098     ;       JMP     test_current_loop
                    2099             ;MOV    R7,#20
                    2100             ;CALL   _FUN_LIB_DELAY
                    2101             
0119                2102     OBUMAIN_CDACTIVE_SELECT3F00:
0119 30001B   F     2103             JNB     BIT_ESAM,OBUMAIN_CDACTIVE_DISPLAYMOVE           ;Ã»ÓÐESAMÊ±£¬Ìø¹
                    2104             
                    2105             ;Ñ¡ÔñESAM¿¨µÄ3F00Ä¿Â¼
011C C200     F     2106             CLR     BIT_ESAMICC
011E D200     F     2107             SETB    BIT_GETRESULT
0120 7F00     F     2108             MOV     R7,#DATA_RXBUF
0122 7D00     F     2109             MOV     R5,#XDATA_TXBUF
0124 7B3F           2110             MOV     R3,#03FH
0126 7A00           2111             MOV     R2,#000H
0128 120000   F     2112             CALL    _FUN_CARDAPP_SelectFile                         
                    2113             
                    2114             ;--- ¼õ¼ÇÊÆ÷ ---
012B 7F00     F     2115             MOV     R7,#DATA_RXBUF
012D 7D00     F     2116             MOV     R5,#XDATA_TXBUF
012F D200     F     2117             SETB    BIT_GETRESULT
0131 C200     F     2118             CLR     BIT_ESAMICC
0133 120000   F     2119             CALL    _FUN_CARDAPP_DECCounter
0136 EF             2120             MOV     A,R7
                    2121     
0137                2122     OBUMAIN_CDACTIVE_DISPLAYMOVE:                                   ; ÏÔÊ¾²ð¶¯
                    2123             
                    2124             ;--- ÏÔÊ¾ ---   
0137 6010           2125             JZ      OBUMAIN_CDACTIVE_DISPLAYNCD
0139                2126     OBUMAIN_CDACTIVE_DISPLAYCD:                                     ; ²ðÍê£¬ÏÔÊ¾¡°±êÇ©Ê§Ð§¡±
0139 C2C5           2127             CLR     Pin_red
013B 7F02           2128             MOV     R7,#00000010B
013D 120000   F     2129             CALL    _FUN_LCD_ICON
0140 7F00     F     2130             MOV     R7,#DATA_RXBUF + 90
0142 900000   F     2131             MOV     DPTR,#STR_UNFIX
0145 D200     F     2132             SETB    BIT_CD                                                                     
                                  ;²ðÍêÖÃ²ð¶¯±ê¼Ç
0147 8007           2133             JMP     OBUMAIN_CDACTIVE_DISPLAYCDOver
                    2134             
0149                2135     OBUMAIN_CDACTIVE_DISPLAYNCD:                                    ;Ã»ÓÐ²ðÍê£¬ÏÔÊ¾¡°²ð¿¨¡±
0149 7F00     F     2136             MOV     R7,#DATA_RXBUF + 90
014B 900000   F     2137             MOV     DPTR,#STR_MoveCARD
014E C200     F     2138             CLR     BIT_CD                                                                     
                                  ;Î´²ðÍêÖÃÇå²ð¶¯±ê¼Ç
                    2139             
0150                2140     OBUMAIN_CDACTIVE_DISPLAYCDOver:
0150 120000   F     2141             CALL    _FUN_LCD_DisplayExChina 
0153 D2C5           2142             setb    Pin_red         ;2010-04-21
0155 120000   F     2143             CALL    _FUN_OBUMain_CARDPreDeal                        ; ¿¨Æ¬Ô¤´¦Àí
                    2144             
0158                2145     OBUMAIN_CDACTIVE_REBeaconID:
                    2146             ;ÔÚ²ð¶¯Ç°ÊÕµ½¹bst£¬Ôò²»¼Çµ±beaconid,¶øÔÚº¯Ê_FUN_OBUMain_CARDPreDealÖÐ¸ù¾Ýbit_setmmi
                             À´¼ÇÂ¼
0158 20000D   F     2147             JB      BIT_BST,OBUMAIN_CDACTIVE_REBeaconIDOver         
                    2148             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
015B 758372         2149             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
015E 7582EC         2150             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
0161 7F00     F     2151             MOV     R7,#XDATA_LastBeaconID
0163 7B08           2152             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen     
0165 120000   F     2153             CALL    _wrflashXR      
                    2154             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    38

0168                2155     OBUMAIN_CDACTIVE_REBeaconIDOver:
0168 D2C5           2156             SETB    pin_red
016A                2157     OBUMAIN_CDACTIVE_REBeaconIDOver02:
016A 7FFA           2158             MOV     R7,#250
016C 120000   F     2159             CALL    _FUN_LIB_DELAY  
016F 7FFA           2160             MOV     R7,#250
0171 120000   F     2161             CALL    _FUN_LIB_DELAY  
0174 7FFA           2162             MOV     R7,#250
0176 120000   F     2163             CALL    _FUN_LIB_DELAY  
0179 020000   F     2164             JMP     AP_start
                    2165             
                    2166     ;------------------------------------------------------------------------------------------
                             -
                    2167     ;SEG_OBUMAIN_CARDACTIVE(¸½ÊôÐò¶Î)
                    2168     ;¸½Êô:_FUN_OBUMAIN_MASTER
                    2169     ;ÃèÊö:²å¿¨¼¤»î(²å¿¨´¦ÀíÁ÷³Ì)
                    2170     ;Á÷³Ì:
                    2171     ;²å¿¨   -> ¸´Î»¿¨Æ¬
                    2172     ;               Err ->  ÏÔÊ¾ÎÞ¿¨£¬Í¬Ê±ÖÃ²å¿¨±ê¼ÇÎªÎÞ -> ½øÈëÎ¢²¨¼¤»î´¦ÀíÁ÷³Ì
                    2173     ;               OK- >   ²å¿¨Ô¤´¦Àí(¶Á0015/0019/0012/0002ÎÄ¼þ²¢Ð´Èëµ½FlashÖÐÈ¥)
                    2174     ;                               Err ->  ÏÔÊ¾ÎÞ¿¨»ò´í¿¨£¬Í¬Ê±ÖÃ²å¿¨±ê¼ÇÎªÎÞ -> ½øÈëÎ¢²¨¼¤»î´
                             ¦ÀíÁ÷³Ì
                    2175     ;                                               ¸ù¾Ý0015µÚ9¸ö×Ö½Ú
                    2176     ;                                                       = 23 ±íÊ¾¼ÇÕË¿¨->ÏÔÊ¾0002µÄÄÚÈÝ
                    2177     ;                                                       = 22 ±íÊ¾Í¨ÐÐ¿¨->ÏÔÊ¾Í¨ÐÐ¿¨
                    2178     ;                                                               ½øÈë²å¿¨¼¤»î´¦ÀíÁ÷³Ì
                    2179     ;------------------------------------------------------------------------------------------
                             -
017C                2180     FUN_OBUMAIN_RST:
017C 75C760         2181             MOV     ISP_CONTR,#60H
017F                2182     OBUMAIN_rst_over:
017F 00             2183             nop
0180 00             2184             nop
0181 00             2185             nop
0182 00             2186             nop
0183 00             2187             nop
0184 00             2188             nop
0185 00             2189             nop
0186 00             2190             nop
0187 00             2191             nop
0188 00             2192             nop
0189 00             2193             nop
018A 00             2194             nop
018B 80F2           2195             JMP     OBUMAIN_rst_over
                    2196     ;------------------------------------------------------------------------------------------
                             -    
018D                2197     SEG_OBUMAIN_CARDACTIVE: 
                    2198     ;       jmp     OBUMAIN_CARDACTIVE_Start        
                    2199             ;jmp    AP_start
                    2200             
018D 120000   F     2201             CALL    _Fun_OBUmain_SysUNSleep
                    2202             
0190 120000   F     2203             CALL    _FUN_ContactIssue_INITDown
0193 D2B1           2204             SETB    P3.1
0195 D2B0           2205             SETB    P3.0
                    2206             
0197 C200     F     2207             CLR     BIT_BUFADDR             ;= 0£¬½ÓÊÕÊ¾Ýµ½ÄÚ´æ£» = 1£¬½ÓÊÕÊ¾Ýµ½Íâ´æ
0199 D200     F     2208             SETB    BIT_SERIALOVERTIMERX    ;=0,Ã»ÓÐÏÞÖÆ ; =1ÓÐÊ±¼äÏÞÖÆ
019B C200     F     2209             CLR     BIT_VERIFY
019D 7F00     F     2210             MOV     R7,#DATA_RXBUF
019F 7B00           2211             MOV     R3,#000H
01A1 120000   F     2212             CALL    _FUN_SERIAL_RXHARD
                    2213             ;330ms
                    2214             
01A4 EB             2215             MOV     A,R3
01A5 6014           2216             JZ      OBUMAIN_CARDACTIVE_Start
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    39

                    2217             
01A7 6402           2218             XRL     A,#2
01A9 7010           2219             JNZ     OBUMAIN_CARDACTIVE_Start
                    2220             
01AB 7800     F     2221             MOV     R0,#DATA_RXBUF
01AD E6             2222             MOV     a,@R0
01AE 647F           2223             XRL     A,#07FH
01B0 7009           2224             JNZ     OBUMAIN_CARDACTIVE_Start
                    2225             
01B2 7800     F     2226             MOV     R0,#DATA_RXBUF+1
01B4 E6             2227             MOV     A,@R0
01B5 647F           2228             XRL     A,#07FH
01B7 7002           2229             JNZ     OBUMAIN_CARDACTIVE_Start
                    2230             
01B9 80C1           2231             JMP     fun_OBUMAIN_rst
                    2232             
01BB                2233     OBUMAIN_CARDACTIVE_Start:
                    2234             
01BB 120000   F     2235             CALL    _FUN_ContactIssue_Release       
01BE 120000   F     2236             CALL    _Fun_OBUmain_SysUNSleep
                    2237     ;       MOV     R7,#010H
                    2238     ;       CALL    _FUN_LIB_DELAY          
01C1 120000   F     2239             CALL    _FUN_OBUMAIN_INITSYS
01C4 D200     F     2240             SETB    BIT_ACTIVECARD
01C6 120000   F     2241             CALL    _FUN_OBUMain_BASEINIT   ;20     
01C9 120000   F     2242             CALL    _FUN_OBUMain_CARDPreDeal ;80                            ;Ô¤´¦Àí
                    2243             
01CC                2244     OBUMAIN_CARDACTIVE_REBeaconID:
                    2245             
                    2246             ;ÔÚ²ð¶¯Ç°ÊÕµ½¹BST£¬Ôò²»¼Çµ± beaconid ,¶øÔÚº¯Ê_FUN_OBUMain_CARDPreDealÖÐ¸ù¾Ýbit_setm
                             miÀ´¼ÇÂ¼
                    2247             ;---JB  BIT_BST,OBUMAIN_CDACTIVE_REBeaconIDOver         
01CC 300002   F     2248             JnB     BIT_BST,OBUMAIN_CARDACTIVE_REBeaconID22
01CF 8097           2249             JMP     OBUMAIN_CDACTIVE_REBeaconIDOver
01D1                2250     OBUMAIN_CARDACTIVE_REBeaconID22:
                    2251             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
01D1 758372         2252             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
01D4 7582EC         2253             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
01D7 7F00     F     2254             MOV     R7,#XDATA_LastBeaconID
01D9 7B08           2255             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen
01DB 120000   F     2256             CALL    _wrflashXR
01DE                2257     OBUMAIN_CARDACTIVE_REBeaconIDOver:
                    2258             
01DE                2259     OBUMain_CardInfoDisplay_DisplayInfo:
                    2260             
01DE 200003   F     2261             JB      BIT_INSERTCARD,OBUMain_CardInfoDisplay_ZC
01E1 020000   F     2262             JMP     OBUMAIN_CARDACTIVE_NoCard
                    2263             
01E4                2264     OBUMain_CardInfoDisplay_ZC:
01E4 020000   F     2265             JMP     OBUMAIN_CARDACTIVE_ZC
                    2266     
01E7 200011   F     2267             JB      BIT_ISContact,OBUMAIN_CARDACTIVE_NZC                    ; Èç¹ûÊÇ½Ó´¥¿¨£¬ÔòÑ
                             ¡ 1001£¬Èç¹ûÊÇ·Ç½Ó¿¨£¬ÔòPro¿¨²ÅÑ¡1001
01EA 20000E   F     2268             JB      BIT_proMF,OBUMAIN_CARDACTIVE_NZC
                    2269             ;ÏÔÊ¾ " Âß¼­¿¨ " 
01ED 120000   F     2270             CALL    _Func_LCD_INIT
                    2271             ;--- ÏÔÊ¾ ---
01F0 7F00     F     2272             MOV     R7,#DATA_RXBUF
01F2 900000   F     2273             MOV     DPTR,#STR_LoGCard
01F5 120000   F     2274             CALL    _FUN_LCD_DisplayExChina
                    2275             
01F8 020000   F     2276             JMP     OBUMAIN_CARDACTIVE_beep
                    2277             
01FB                2278     OBUMAIN_CARDACTIVE_NZC:
                    2279             ;¶Á³ö 0015 ÎÄ¼þÀïµÄ·ÖÉ¢Âë
01FB 758372         2280             MOV     DPH,#CONST_FLASH_0015H
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    40

01FE 758284         2281             MOV     DPL,#CONST_FLASH_0015L
0201 750700   F     2282             MOV     AR7,#XDATA_HOLD
0204 7B04           2283             MOV     R3,#4
0206 120000   F     2284             CALL    _RDFlashXR
                    2285             
                    2286             ;²»ÊÇ ËÄ´¨ µÄ¿¨
                    2287             ;CB C4 B4 A8
                    2288             ;JMP    OBUMain_CardInfoDisplay_btVH
0209 7800     F     2289             MOV     R0,#XDATA_HOLD
                    2290                     ;MOVX   A,@R0
020B 758301         2291             MOV     DPH,#1
020E 8882           2292             MOV     DPL,R0
0210 E0             2293             MOVX    A,@DPTR
0211 64CB           2294             XRL     A,#0CBH
0213 7023           2295             JNZ     OBUMAIN_CARDACTIVE_ZZSC
0215 08             2296             INC     R0
                    2297                     ;MOVX   A,@R0
0216 758301         2298             MOV     DPH,#1
0219 8882           2299             MOV     DPL,R0
021B E0             2300             MOVX    A,@DPTR
021C 64C4           2301             XRL     A,#0C4H
021E 7018           2302             JNZ     OBUMAIN_CARDACTIVE_ZZSC
0220 08             2303             INC     R0
                    2304             
                    2305             ;MOVX   A,@R0
0221 758301         2306             MOV     DPH,#1
0224 8882           2307             MOV     DPL,R0
0226 E0             2308             MOVX    A,@DPTR
0227 64B4           2309             XRL     A,#0B4H
                    2310             
0229 700D           2311             JNZ     OBUMAIN_CARDACTIVE_ZZSC
022B 08             2312             INC     R0      
                    2313                     ;MOVX   A,@R0   
022C 758301         2314             MOV     DPH,#1
022F 8882           2315             MOV     DPL,R0
0231 E0             2316             MOVX    A,@DPTR
0232 64A8           2317             XRL     A,#0A8H
0234 7002           2318             JNZ     OBUMAIN_CARDACTIVE_ZZSC
                    2319             
                    2320             ;~~~~~~~~~~µ÷ÊÔ¶Î~~~~~~~~~~~
                    2321             ;mov    r7,#33
                    2322             ;call   _FUN_TEST_checkrtcmode
                    2323             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~
0236 8003           2324             JMP     OBUMain_CardInfoDisplay_btVH
0238                2325     OBUMAIN_CARDACTIVE_ZZSC:
0238 020000   F     2326             JMP     OBUMAIN_CARDACTIVE_SC                   ;ÏÔÊ¾²»ÊÇËÄ´¨¿¨
                    2327     ;///////////////////////////////////////////////////////////////////////////
                    2328             ;===== µ±Ç° ÊÇ ËÄ´¨ µÄ¿¨Ê±£¬±È¶Ô ³µÅÆºÅ =====
023B                2329     OBUMain_CardInfoDisplay_btVH:
023B 200003   F     2330             JB      BIT_ESAMOK,OBUMain_CardInfoDisplay_btVHZZ
023E 020000   F     2331             JMP     OBUMAIN_CARDACTIVE_ZC
0241                2332     OBUMain_CardInfoDisplay_btVHZZ:
                    2333             
                    2334             ;=== ¶Á³ö 0015 ÎÄ¼þÀïµÄ³µÅÆ ===
0241 758372         2335             MOV     DPH,#CONST_FLASH_0015H
0244 7582A0         2336             MOV     DPL,#CONST_FLASH_0015L + 28
0247 750700   F     2337             MOV     AR7,#XDATA_HOLD
024A 7B0A           2338             MOV     R3,#10                                  ;10
024C 120000   F     2339             CALL    _RDFlashXR
                    2340             
024F C200     F     2341             CLR     BIT_ESAMICC
0251 C200     F     2342             CLR     BIT_GETRESULT
0253 7F00     F     2343             MOV     R7,#DATA_RXBUF
0255 7D00     F     2344             MOV     R5,#XDATA_TXBUF
0257 7B3F           2345             MOV     R3,#03FH
0259 7A00           2346             MOV     R2,#000H
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    41

025B 120000   F     2347             CALL    _FUN_CARDAPP_SelectFile
                    2348             
                    2349             ;¶ÁÏµÍ³ÐÅÏ¢ÎÄ¼þ
025E D200     F     2350             SETB    BIT_GETRESULT
0260 C200     F     2351             CLR     BIT_ESAMICC
0262 7F00     F     2352             MOV     R7,#DATA_RXBUF
0264 7D00     F     2353             MOV     R5,#XDATA_TXBUF 
0266 7C01           2354             MOV     R4,#01H                                                 ;R4             ---
                                  ÎÄ¼þID
0268 7B01           2355             MOV     R3,#1   
026A 7A1B           2356             MOV     R2,#1BH                                                 ;R2             ---
                                  Offset
026C 120000   F     2357             CALL    _FUN_CARDAPP_ReadBinary 
026F EF             2358             MOV     A,R7
                    2359             
0270 7800     F     2360             MOV     R0,#XDATA_TXBUF
                    2361                     ;MOVX   A,@R0
0272 758301         2362             MOV     DPH,#1
0275 8882           2363             MOV     DPL,R0
0277 E0             2364             MOVX    A,@DPTR
                    2365             
0278 7800     F     2366             MOV     R0,#XDATA_SC
                    2367                     ;MOVX   @R0,A
027A 758301         2368             MOV     DPH,#1 
027D 8882           2369             MOV     DPL,R0 
027F F0             2370             MOVX    @DPTR,A
                    2371             
                    2372             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
0280 758372         2373             MOV     DPH,#CONST_FLASH_SYSINFOH
0283 758224         2374             MOV     DPL,#CONST_FLASH_SYSINFOL + 36
0286 750700   F     2375             MOV     AR7,#XDATA_HOLD + 10
0289 7B0A           2376             MOV     R3,#10
028B 120000   F     2377             CALL    _RDFlashXR
                    2378                             
                    2379             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
028E 758372         2380             MOV     DPH,#CONST_FLASH_SYSINFOH
0291 758238         2381             MOV     DPL,#CONST_FLASH_SYSINFOL + 56
0294 750700   F     2382             MOV     AR7,#XDATA_HOLD + 20
0297 7B0A           2383             MOV     R3,#10;8
0299 120000   F     2384             CALL    _RDFlashXR
                    2385             
                    2386             ; ¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ 1
029C 758372         2387             MOV     DPH,#CONST_FLASH_SYSINFOH               ;
029F 75824C         2388             MOV     DPL,#CONST_FLASH_SYSINFOL + 76          ;
02A2 750700   F     2389             MOV     AR7,#XDATA_HOLD + 30                    ; 24
02A5 7B0A           2390             MOV     R3,#10                                  ; 8
02A7 120000   F     2391             CALL    _RDFlashXR
                    2392             
                    2393             ;~~~~~~~~~~~~~~~~~~~~~~~
                    2394             ;MOV    R0,#XDATA_HOLD  + 12
                    2395             ;INC    R0
                    2396             ;       ;MOVX   A,@R0
                    2397             ;MOV    DPH,#1
                    2398             ;MOV    DPL,R0
                    2399             ;MOVX   A,@DPTR
                    2400             ;CALL   _fun_test_Display
                    2401             ;~~~~~~~~~~~~~~~~~~~~~~~        
02AA C000           2402             PUSH    AR0
02AC 7800     F     2403             MOV     R0,#XDATA_SC
                    2404                     ;MOVX   A,@R0
02AE 758301         2405             MOV     DPH,#1
02B1 8882           2406             MOV     DPL,R0
02B3 E0             2407             MOVX    A,@DPTR
02B4 D000           2408             POP     AR0
02B6 6030           2409             JZ      OBUMAIN_CARDACTIVE_ZC
                    2410                     
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    42

02B8 7A00           2411             MOV     R2,#0
02BA                2412     OBUMAIN_CARDACTIVE_CPStartLOOP:
02BA 0A             2413             INC     R2
02BB                2414     OBUMAIN_CARDACTIVE_CP01:
02BB BA0104         2415             CJNE    R2,#1,OBUMAIN_CARDACTIVE_CP02
02BE 7900     F     2416             MOV     R1,#XDATA_HOLD+10
02C0 8009           2417             JMP     OBUMAIN_CARDACTIVE_CP04
                    2418     
02C2                2419     OBUMAIN_CARDACTIVE_CP02:
02C2 BA0204         2420             CJNE    R2,#2,OBUMAIN_CARDACTIVE_CP03   
02C5 7900     F     2421             MOV     R1,#XDATA_HOLD + 20
02C7 8002           2422             JMP     OBUMAIN_CARDACTIVE_CP04
                    2423             
02C9                2424     OBUMAIN_CARDACTIVE_CP03:
02C9 7900     F     2425             MOV     R1,#XDATA_HOLD+30
02CB                2426     OBUMAIN_CARDACTIVE_CP04:
                    2427             
02CB 7800     F     2428             MOV     R0,#XDATA_HOLD
02CD 7B0A           2429             MOV     R3,#10                                                  ;8
02CF                2430     OBUMAIN_CARDACTIVE_VErrCPLOOP:; ±È¶Ô ³µÅÆ Ñ­»·  
                    2431                     ;MOVX   A,@R0
02CF 758301         2432             MOV     DPH,#1
02D2 8882           2433             MOV     DPL,R0
02D4 E0             2434             MOVX    A,@DPTR
02D5 F5F0           2435             MOV     B,A
                    2436                     ;MOVX   A,@R1
02D7 758301         2437             MOV     DPH,#1
02DA 8982           2438             MOV     DPL,R1
02DC E0             2439             MOVX    A,@DPTR
02DD 65F0           2440             XRL     A,B
02DF 6003           2441             JZ      OBUMAIN_CARDACTIVE_VErrCPLOOPZZ
02E1 020000   F     2442             JMP     OBUMAIN_CARDACTIVE_CPDif
02E4                2443     OBUMAIN_CARDACTIVE_VErrCPLOOPZZ:
02E4 08             2444             INC     R0
02E5 09             2445             INC     R1
02E6 DBE7           2446             DJNZ    R3,OBUMAIN_CARDACTIVE_VErrCPLOOP
                    2447     
02E8                2448     OBUMAIN_CARDACTIVE_ZC:
02E8 200003   F     2449             JB      BIT_INSERTCARD,OBUMAIN_CARDACTIVE_ZCZZ
02EB 020000   F     2450             JMP     OBUMAIN_CARDACTIVE_CardDis
                    2451     
02EE                2452     OBUMAIN_CARDACTIVE_ZCZZ:
                    2453     
                    2454     ;       R7      =0³É¹¦,=ffÊ§°Ü
                    2455     ;       R5      =0Dµ¼Èë¿¨ ; = 0EH ¼¤»î¿¨
02EE 120000   F     2456             CALL    _FUN_CARDAPP_ISInOrACT
02F1 EF             2457             MOV     A,R7
02F2 6003           2458             JZ      OBUMAIN_CARDACTIVE_CardDisZZ
02F4 020000   F     2459             JMP     OBUMAIN_CARDACTIVE_CardDis
                    2460     
02F7                2461     OBUMAIN_CARDACTIVE_CardDisZZ:
02F7 ED             2462             MOV     A,R5
02F8 640D           2463             XRL     A,#0DH
02FA 600A           2464             JZ      OBUMAIN_CARDACTIVE_GDFXOBU
                    2465             
02FC ED             2466             MOV     A,R5
02FD 640E           2467             XRL     A,#0EH
02FF 7002           2468             jnz     OBUMAIN_CARDACTIVE_03
0301 8078           2469             jmp     OBUMAIN_CARDACTIVE_ACTIVEOBU
                    2470             
0303                2471     OBUMAIN_CARDACTIVE_03:
0303 020000   F     2472             JMP     OBUMAIN_CARDACTIVE_CardDis
                    2473     ;----------------------------------------------------------------
                    2474     ;µ¼Èë¿¨
                    2475     ;       ÔÚÈ·ÈÏ0015.9 = 0DH ºó
                    2476     ;               Ò»°ãÐÔ´íÎó      01      µ¼ÈëÊ§°Ü        STR_InputFail
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    43

                    2477     ;               ºÏÍ¬ºÅ²»Í¬      02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                    2478     ;               Ê¹ÓÃ´ÎÊ=FFH     03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
                    2479     ;               ³É¹¦            00      µ¼Èë³É¹¦        STR_InputOk
                    2480     ;               ·Çµ¼Èë¿¨        FF
                    2481     ;----------------------------------------------------------------
0306                2482     OBUMAIN_CARDACTIVE_GDFXOBU:
0306 C005           2483             PUSH    AR5
0308 120000   F     2484             CALL    _FUN_CARDAPP_GDFXOBU
030B C007           2485             PUSH    AR7
030D 120000   F     2486             CALL    _Func_LCD_INIT  
0310 D007           2487             POP     AR7
0312 D005           2488             POP     AR5
                    2489             
0314 C000           2490             push    ar0
0316 120000   F     2491             CALL    _FUN_OBUMAIN_DR
0319 7F00     F     2492             MOV     R7,#DATA_RXBUF
031B 120000   F     2493             CALL    _FUN_LCD_DisplayExChina
                    2494             
031E 7FC8           2495             MOV     R7,#200
0320 120000   F     2496             CALL    _FUN_LIB_DELAY  
0323 7FC8           2497             MOV     R7,#200
0325 120000   F     2498             CALL    _FUN_LIB_DELAY  
0328 D007           2499             pop     ar7
                    2500             
032A EF             2501             MOV     A,R7
032B 6003           2502             JZ      OBUMAIN_CARDACTIVE_GDFXOBUdishv
032D 020000   F     2503             JMP     AP_start
                    2504             
0330                2505     OBUMAIN_CARDACTIVE_GDFXOBUdishv:
                    2506             ;Ñ¡Ôñ ESAM µÄ MF Ä¿Â¼,Ö»½øÐÐµ½61
0330 D200     F     2507             SETB    BIT_GETRESULT
0332 C200     F     2508             CLR     BIT_ESAMICC
0334 7F00     F     2509             MOV     R7,#DATA_RXBUF
0336 7D00     F     2510             MOV     R5,#XDATA_TXBUF
0338 7B3F           2511             MOV     R3,#03FH
033A 7A00           2512             MOV     R2,#000H
033C 120000   F     2513             CALL    _FUN_CARDAPP_SelectFile
033F EF             2514             MOV     A,R7
0340 6002           2515             JZ      OBUMAIN_CARDACTIVE_ReadSeldf01OK
0342 802A           2516             JMP     OBUMAIN_CARDACTIVE_ReadOver
                    2517             
0344                2518     OBUMAIN_CARDACTIVE_ReadSeldf01OK:
0344 C200     F     2519             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0346 D200     F     2520             SETB    BIT_GETRESULT   
0348 7F00     F     2521             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
034A 7D00     F     2522             MOV     R5,#XDATA_HOLD
034C 7C9D           2523             MOV     R4,#9dh                                                 ;R4             ---
                                  ÎÄ¼þID
034E 7B1B           2524             MOV     R3,#1bh                                                 ;R3             ---
                                  ³¤¶È
0350 7A0C           2525             MOV     R2,#12;04;03
0352 120000   F     2526             CALL    _FUN_CARDAPP_ReadBinary02
0355 EF             2527             MOV     A,R7    
0356 6002           2528             JZ      OBUMAIN_CARDACTIVE_ReadESAMHTHOK
0358 8014           2529             JMP     OBUMAIN_CARDACTIVE_ReadOver
                    2530             
035A                2531     OBUMAIN_CARDACTIVE_ReadESAMHTHOK:
                    2532             ;XDATA_HOLD[0~11] ³µÅÆ
                    2533             ;R7   Íâ´æ³µÅÆ
                    2534             ;R5   ·­ÒëºóµÄÄÚ´æÖ¸Õë
035A 7F00     F     2535             MOV     R7,#XDATA_HOLD                  ;8
035C 7D00     F     2536             MOV     R5,#DATA_RXBUF + 90             ;
035E 7B0C           2537             mov     R3,#12
0360 120000   F     2538             CALL    FUN_LCD_HVTransfer              ;
                    2539             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    44

0363 7F00     F     2540             MOV     R7,#DATA_RXBUF + 90 + 1                 
0365 7D01           2541             MOV     R5,#1
                    2542             
0367 7800     F     2543             MOV     R0,#DATA_RXBUF + 90
0369 E6             2544             MOV     A,@R0
036A FB             2545             MOV     R3,A
036B 120000   F     2546             CALL    _Func_LCD_Display
                    2547             
036E                2548     OBUMAIN_CARDACTIVE_ReadOver:
036E 7FC8           2549             MOV     R7,#200
0370 120000   F     2550             CALL    _FUN_LIB_DELAY  
0373 7FC8           2551             MOV     R7,#200
0375 120000   F     2552             CALL    _FUN_LIB_DELAY  
                    2553             
0378 020000   F     2554             JMP     AP_start
                    2555     ;----------------------------------------------------------------
                    2556     ;¼¤»î¿¨
                    2557     ;       ÔÚÈ·ÈÏ0015.9=0EHºó
                    2558     ;               Ò»°ãÐÔ´íÎó      04      ¼¤»îÊ§°Ü        STR_ActiveFail
                    2559     ;               ºÏÍ¬ºÅ²»Í¬      05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                    2560     ;               Ê¹ÓÃ´ÎÊ=FFH     06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
                    2561     ;               ³É¹¦            00      ¼¤»î³É¹¦        STR_ActiveOK
                    2562     ;               ·Ç¼¤»î¿¨        FF
                    2563     ;----------------------------------------------------------------
037B                2564     OBUMAIN_CARDACTIVE_ACTIVEOBU:
                    2565             
037B C005           2566             PUSH    AR5
037D 120000   F     2567             CALL    _FUN_CARDAPP_ACTIVEOBU
0380 C007           2568             PUSH    AR7
0382 120000   F     2569             CALL    _Func_LCD_INIT
0385 D007           2570             POP     AR7
0387 D005           2571             POP     AR5
                    2572             
0389 120000   F     2573             CALL    _FUN_OBUMAIN_DR
                    2574     
038C 7F00     F     2575             MOV     R7,#DATA_RXBUF
038E 120000   F     2576             CALL    _FUN_LCD_DisplayExChina
                    2577     
0391 7FC8           2578             MOV     R7,#200
0393 120000   F     2579             CALL    _FUN_LIB_DELAY  
0396 7FC8           2580             MOV     R7,#200
0398 120000   F     2581             CALL    _FUN_LIB_DELAY  
                    2582             ;Ñ¡Ôñ ESAM µÄ MF Ä¿Â¼,Ö»½øÐÐµ½61
039B D200     F     2583             SETB    BIT_GETRESULT
039D C200     F     2584             CLR     BIT_ESAMICC
039F 7F00     F     2585             MOV     R7,#DATA_RXBUF
03A1 7D00     F     2586             MOV     R5,#XDATA_TXBUF
03A3 7B3F           2587             MOV     R3,#03FH
03A5 7A00           2588             MOV     R2,#000H
03A7 120000   F     2589             CALL    _FUN_CARDAPP_SelectFile
03AA EF             2590             MOV     A,R7
03AB 6002           2591             JZ      OBUMAIN_CARDACTIVE_ACTIVESeldf01OK
03AD 802A           2592             JMP     OBUMAIN_CARDACTIVE_ACTIVEOver
                    2593             
03AF                2594     OBUMAIN_CARDACTIVE_ACTIVESeldf01OK:
03AF C200     F     2595             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
03B1 D200     F     2596             SETB    BIT_GETRESULT   
03B3 7F00     F     2597             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
03B5 7D00     F     2598             MOV     R5,#XDATA_HOLD
03B7 7C9D           2599             MOV     R4,#9dh                                                 ;R4             ---
                                  ÎÄ¼þID
03B9 7B1B           2600             MOV     R3,#1bh                                                 ;R3             ---
                                  ³¤¶È
03BB 7A0C           2601             MOV     R2,#12;04;03
03BD 120000   F     2602             CALL    _FUN_CARDAPP_ReadBinary02
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    45

03C0 EF             2603             MOV     A,R7
03C1 6002           2604             JZ      OBUMAIN_CARDACTIVE_ACTIVEESAMHTHOK
03C3 8014           2605             JMP     OBUMAIN_CARDACTIVE_ACTIVEOver
                    2606             
03C5                2607     OBUMAIN_CARDACTIVE_ACTIVEESAMHTHOK:     
                    2608             ;R7   Íâ´æ³µÅÆ
                    2609             ;R5   ·­ÒëºóµÄÄÚ´æÖ¸Õë
03C5 7F00     F     2610             MOV     R7,#XDATA_HOLD                  ;8
03C7 7D00     F     2611             MOV     R5,#DATA_RXBUF + 90             ;
03C9 7B0C           2612             mov     R3,#12
03CB 120000   F     2613             CALL    FUN_LCD_HVTransfer              ;
                    2614             
03CE 7F00     F     2615             MOV     R7,#DATA_RXBUF + 90 + 1
03D0 7D01           2616             MOV     R5,#1
                    2617             
03D2 7800     F     2618             MOV     R0,#DATA_RXBUF + 90
03D4 E6             2619             MOV     A,@R0
03D5 FB             2620             MOV     R3,A
03D6 120000   F     2621             CALL    _Func_LCD_Display
                    2622             
03D9                2623     OBUMAIN_CARDACTIVE_ACTIVEOver:
03D9 7FC8           2624             MOV     R7,#200
03DB 120000   F     2625             CALL    _FUN_LIB_DELAY
03DE 7FC8           2626             MOV     R7,#200
03E0 120000   F     2627             CALL    _FUN_LIB_DELAY
03E3 020000   F     2628             JMP     AP_start
                    2629             
                    2630     ;----------------------------------------------------------------
                    2631             ;·Çµ¼Èë¡¢¼¤»î¿¨
03E6                2632     OBUMAIN_CARDACTIVE_CardDis:
03E6 120000   F     2633             CALL    _FUN_GSM_Insert                                         ;=0±íÊ¾ ´ÓESAM¿¨µ¼³
                             öÊ¾Ýµ½ÓÃ»§¿¨³É¹¦
                    2634             
                    2635     ;mov    A,#30
                    2636     ;clr    A
                    2637     ;mov    C,BIT_USEROK
                    2638     ;mov    Acc.0,C
                    2639     ;call   _fun_test_display
                    2640             
                    2641             ;µ±Ô¤¶ÁÓÃ»§¿¨Ê§°Üºó£¬ÖØ×öÔ¤¶Á
                    2642             ;Èç¹û»¹³ö´íÔò²»ÏòÏÂÏÔÊ¾
03E9 200018   F     2643             jb      BIT_USEROK,OBUMAIN_CARDACTIVE_disandpowerdown
                    2644             ;call   _FUN_OBUMAIN_PreSleep
                    2645             ;jb     BIT_USEROK,OBUMAIN_CARDACTIVE_disandpowerdown
03EC 120000   F     2646             CALL    _Func_LCD_INIT
                    2647             ;--- ÏÔÊ¾ ---
03EF 7F00     F     2648             MOV     R7,#DATA_RXBUF
03F1 900000   F     2649             MOV     DPTR,#STR_ErrCARD
03F4 120000   F     2650             CALL    _FUN_LCD_DisplayExChina
03F7 7FC8           2651             mov     r7,#200
03F9 120000   F     2652             call    _fun_lib_delay
03FC 7F64           2653             mov     r7,#100
03FE 120000   F     2654             call    _fun_lib_delay
0401 020000   F     2655             JMP     ap_start        
0404                2656     OBUMAIN_CARDACTIVE_disandpowerdown:
                    2657             
                    2658             ;±£´æµ¼³öÊÇ·ñ³É¹¦×´Ì¬ = 0 ±í³É¹¦
0404 EF             2659             MOV     A,R7
                    2660             ;~~~~~~~~~~~~~
                    2661             ;¹ú±êÌø¹µ¼³ö¹¦ÄÜ
0405 74FF           2662             MOV     A,#0FFH 
                    2663             ;~~~~~~~~~~~~~  
0407 7800     F     2664             MOV     R0,#XDATA_LoadCellToUser
                    2665             
                    2666                     ;MOVX   @R0,A
0409 758301         2667             MOV     DPH,#1
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    46

040C 8882           2668             MOV     DPL,R0
040E F0             2669             MOVX    @DPTR,A
                    2670             
                    2671             ;=== µÍµçÑ¹ === 
040F D295           2672             setb    PIN_PWR_LOWIO
0411 00             2673             nop
0412 00             2674             nop
0413 00             2675             nop
0414 00             2676             nop
                    2677             
0415 209516         2678             JB      PIN_PWR_LOWIO,OBUMAIN_CARDACTIVE_LOWVO
                    2679             ;¹ØÍâÎ§
0418 C285           2680             clr     PIN_ESAM_RST    
041A C284           2681             clr     Pin_522_RST
041C D2A4           2682             setb    Pin_pwrdwn      
041E 120000   F     2683             CALL    _Func_LCD_INIT  
                    2684             ;MOV    R7,#250
                    2685             ;CALL   _FUN_LIB_DELAY
0421 7F00     F     2686             MOV     R7,#DATA_RXBUF
0423 900000   F     2687             MOV     DPTR,#STR_LOWVo
0426 120000   F     2688             CALL    _FUN_LCD_DisplayExChina
0429 7FFA           2689             MOV     R7,#250
042B 120000   F     2690             CALL    _FUN_LIB_DELAY  
042E                2691     OBUMAIN_CARDACTIVE_LOWVO:
                    2692             
                    2693             ;=== ¹ØÍâÎ§ ===
042E C285           2694             CLR     PIN_ESAM_RST    
0430 C284           2695             CLR     Pin_522_RST
0432 D2A4           2696             SETB    Pin_pwrdwn
                    2697             
0434 120000   F     2698             CALL    _FUN_OBUMain_CardInfoDisplay02
                    2699             
                    2700             ;mov    a,#36
                    2701             ;call   _fun_test_display
                    2702             
0437 D2C5           2703             SETB    pin_red
0439 D2C4           2704             SETB    pin_gre
                    2705             
043B 7FFA           2706             MOV     R7,#250
043D 120000   F     2707             CALL    _FUN_LIB_DELAY
0440                2708     OBUMAIN_CARDACTIVE_Insert:
                    2709             
0440 7800     F     2710             MOV     R0,#XDATA_LoadCellToUser
                    2711             ;MOVX   A,@R0
0442 758301         2712             MOV     DPH,#1
0445 8882           2713             MOV     DPL,R0
0447 E0             2714             MOVX    A,@DPTR 
0448 700D           2715             JNZ     OBUMAIN_CARDACTIVE_Insert02     
044A 7F00     F     2716             MOV     R7,#DATA_RXBUF
044C 900000   F     2717             MOV     DPTR,#STR_ReWrOK
044F 120000   F     2718             CALL    _FUN_LCD_DisplayExChina 
0452 7FFA           2719             MOV     R7,#250
0454 120000   F     2720             CALL    _FUN_LIB_DELAY  
                    2721             
0457                2722     OBUMAIN_CARDACTIVE_Insert02:
                    2723     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    2724             ;=1²»ÆôÓÃ =0ÆôÓÃ
0457 7401           2725             MOV     A,#CONST_INPUT_ISEnable
0459 7024           2726             JNZ     OBUMAIN_CARDACTIVE_ZCKQ02
045B 758372         2727             MOV     DPH,#CONST_FLASH_0019H
045E 7582BC         2728             MOV     DPL,#CONST_FLASH_0019L + 13
0461 750700   F     2729             MOV     AR7,#XDATA_HOLD
0464 7B01           2730             MOV     R3,#1
0466 120000   F     2731             CALL    _RDFlashXR      
0469 7800     F     2732             MOV     R0,#XDATA_HOLD
                    2733             ;Èë¿Ú
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    47

                    2734             ;MOVX   A,@R0
046B 758301         2735             MOV     DPH,#1
046E 8882           2736             MOV     DPL,R0
0470 E0             2737             MOVX    A,@DPTR
                    2738             
0471 6403           2739             XRL     A,#CONST_ETC_INPUT
0473 600C           2740             JZ      OBUMAIN_CARDACTIVE_ZCKQ
                    2741             ;MOVX   A,@R0
0475 758301         2742             MOV     DPH,#1
0478 8882           2743             MOV     DPL,R0
047A E0             2744             MOVX    A,@DPTR 
                    2745             
047B 6401           2746             XRL     A,#CONST_MTC_INPUT
047D 6002           2747             JZ      OBUMAIN_CARDACTIVE_ZCKQ
047F                2748     OBUMAIN_CARDACTIVE_ZCKQ02:
047F 8011           2749             JMP     OBUMAIN_CARDACTIVE_ZCNOKQ
                    2750     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0481                2751     OBUMAIN_CARDACTIVE_ZCKQ:
0481 7F50           2752             MOV     R7,#80
0483 120000   F     2753             CALL    _FUN_LIB_BEEP   ;ÏìÁå
0486 7F64           2754             MOV     R7,#100
0488 120000   F     2755             CALL    _FUN_LIB_DELAY  ;ÏìÁå
048B 7F50           2756             MOV     R7,#80
048D 120000   F     2757             CALL    _FUN_LIB_BEEP   ;ÏìÁå
0490 8005           2758             JMP     OBUMAIN_CARDACTIVE_ZCKQOVER
                    2759     
0492                2760     OBUMAIN_CARDACTIVE_ZCNOKQ:
0492 7F64           2761             MOV     R7,#100
0494 120000   F     2762             CALL    _FUN_LIB_BEEP   ;ÏìÁå
                    2763     
0497                2764     OBUMAIN_CARDACTIVE_ZCKQOVER:
0497 020000   F     2765             JMP     OBUMain_BEEP_OVER
                    2766             
                    2767     ;-----------------------------------------------------------------------        
049A                2768     OBUMAIN_CARDACTIVE_CPDif:
049A C000           2769             PUSH    AR0
049C 7800     F     2770             MOV     R0,#XDATA_SC
                    2771                     ;MOVX   A,@R0
049E 758301         2772             MOV     DPH,#1
04A1 8882           2773             MOV     DPL,R0
04A3 E0             2774             MOVX    A,@DPTR
04A4 D000           2775             POP     AR0
04A6 8AF0           2776             MOV     B,R2
04A8 65F0           2777             XRL     A,B
                    2778             ;---JNZ OBUMAIN_CARDACTIVE_CPStartLOOP
04AA 6003           2779             JZ      OBUMAIN_CARDACTIVE_HVDIF
04AC 020000   F     2780             JMP     OBUMAIN_CARDACTIVE_CPStartLOOP
04AF                2781     OBUMAIN_CARDACTIVE_HVDIF:       
                    2782             ;~~~~~~~~~~~~~~~~~~~~~~~
                    2783             ;mov    r0,#XDATA_HOLD+12
                    2784             ;       ;MOVX   A,@R0
                    2785             ;MOV    DPH,#1
                    2786             ;MOV    DPL,R0
                    2787             ;MOVX   A,@DPTR
                    2788             ;mov    a,r3
                    2789             ;MOV    A,#15
                    2790             ;call   _fun_test_Display
                    2791             ;~~~~~~~~~~~~~~~~~~~~~~~
                    2792             ;ÏÔÊ¾³µÅÆ²»Ò»ÖÂ
04AF 120000   F     2793             CALL    _Func_LCD_INIT  
                    2794             ;--- ÏÔÊ¾ ---
04B2 7F00     F     2795             MOV     R7,#DATA_RXBUF
04B4 900000   F     2796             MOV     DPTR,#STR_VHDif
04B7 120000   F     2797             CALL    _FUN_LCD_DisplayExChina 
04BA                2798     OBUMAIN_CARDACTIVE_beep:
04BA 120000   F     2799             CALL    _FUN_GSM_Insert 
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    48

04BD 020000   F     2800             JMP     OBUMain_BEEP_OVER 
04C0 C2A4           2801             CLR     Pin_Pwrdwn      
04C2 D283           2802             SETB    PIN_ESAM_RX             ;ESAM Ê¾ÝÍÈÎªµÍ
                    2803     
04C4 7E01           2804             MOV     R6,#1;3
04C6 7B01           2805             MOV     R3,#1
                    2806     
04C8                2807     OBUMAIN_CARDACTIVE_BEEPLOOP:    
04C8 7F14           2808             MOV     R7,#20
04CA C006           2809             PUSH    AR6
04CC C003           2810             PUSH    AR3
04CE 120000   F     2811             CALL    _FUN_LIB_BEEP
04D1 D003           2812             POP     AR3
04D3 D006           2813             POP     AR6
04D5 DBF1           2814             DJNZ    R3,OBUMAIN_CARDACTIVE_BEEPLOOP
04D7 DEEF           2815             DJNZ    R6,OBUMAIN_CARDACTIVE_BEEPLOOP
                    2816     
04D9                2817     OBUMAIN_CARDACTIVE_overov:
04D9 8027           2818             JMP     OBUMAIN_CARDACTIVE_DISOVER      
                    2819     
04DB                2820     OBUMAIN_CARDACTIVE_SC:;·ÇËÄ´¨¿¨         
                    2821             ;ÏÔÊ¾"·ÇËÄ´¨¿¨"
04DB 120000   F     2822             CALL    _Func_LCD_INIT          
                    2823             ;--- ÏÔÊ¾ ---
04DE 7F00     F     2824             MOV     R7,#DATA_RXBUF
04E0 900000   F     2825             MOV     DPTR,#STR_IsNotSC
04E3 120000   F     2826             CALL    _FUN_LCD_DisplayExChina                         
04E6 80D2           2827             JMP     OBUMAIN_CARDACTIVE_beep
                    2828     
04E8                2829     OBUMAIN_CARDACTIVE_KPCW:;¡°¿¨Æ¬´íÎó¡±
                    2830             ;ÏÔÊ¾"¡°¿¨Æ¬´íÎó"
04E8 120000   F     2831             CALL    _Func_LCD_INIT  
                    2832             ;--- ÏÔÊ¾ ---
04EB 7F00     F     2833             MOV     R7,#DATA_RXBUF
04ED 900000   F     2834             MOV     DPTR,#STR_ErrCARD
04F0 120000   F     2835             CALL    _FUN_LCD_DisplayExChina 
04F3 80C5           2836             JMP     OBUMAIN_CARDACTIVE_beep
                    2837     
04F5                2838     OBUMAIN_CARDACTIVE_NoCard:      
                    2839             ;ÏÔÊ¾"·ÇËÄ´¨¿¨"
04F5 120000   F     2840             CALL    _Func_LCD_INIT  
                    2841             ;--- ÏÔÊ¾ ---
04F8 7F00     F     2842             MOV     R7,#DATA_RXBUF
04FA 900000   F     2843             MOV     DPTR,#STR_NOCARD
04FD 120000   F     2844             CALL    _FUN_LCD_DisplayExChina 
                    2845     
0500                2846     OBUMAIN_CARDACTIVE_OVER:
0500 8000           2847             JMP     OBUMAIN_CARDACTIVE_DISOVER
                    2848             ;--- ÏÔÊ¾¿¨ÐÅÏ¢ ---
0502                2849     OBUMAIN_CARDACTIVE_DISOVER:
0502 7FC8           2850             MOV     R7,#200
0504 120000   F     2851             CALL    _FUN_LIB_DELAY
0507 7FC8           2852             MOV     R7,#200
0509 120000   F     2853             CALL    _FUN_LIB_DELAY  
050C 7FC8           2854             MOV     R7,#200
050E 120000   F     2855             CALL    _FUN_LIB_DELAY
0511 7FC8           2856             MOV     R7,#200
0513 120000   F     2857             CALL    _FUN_LIB_DELAY          
0516 020000   F     2858             JMP     AP_start
                    2859     
                    2860     ;-----------------------------------------------------------------------
                    2861     ;SEG_OBUMAIN_WAVEACTIVE(¸½ÊôÐò¶Î)
                    2862     ;¸½Êô:_FUN_OBUMAIN_MASTER
                    2863     ;ÃèÊö:Î¢²¨¼¤»î
                    2864     ;Á÷³ÌÃèÊö£º
                    2865     ;       ½ÓÊÕ BST
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    49

                    2866     ;       ³õÊ¼»¯¿¨Æ¬
                    2867     ;       ·¢ËÍ VST
                    2868     ;       ½ÓÊÕ DSRCÐÅºÅ   <------------------ |
                    2869     ;               ×¨ÓÃÖ¸Áî->ÖØ·¢------------> |
                    2870     ;               ·Ç×¨ÓÃÖ¸Áî                  |
                    2871     ;                       N Î»Ã»ÓÐ±ä--->ÖØ·¢->|
                    2872     ;               ¸ù¾Ý ActioneType ×öÏàÓ¦´¦Àí   |
                    2873     ;               ·¢ËÍÏìÓ¦Ê¾Ýµ½RSU            |
                    2874     ;                     |___________________> |
                    2875     ;-----------------------------------------------------------------------
0519                2876     OBUMAIN_WAVEACTIVENOCARD_DEAL:
0519 758372         2877             MOV     DPH,#CONST_FALSH_PREFlag03H
051C 7582F6         2878             MOV     DPL,#CONST_FALSH_PREFlag03L
051F 750700   F     2879             MOV     AR7,#XDATA_TXBUF
0522 7B01           2880             MOV     R3,#1
0524 120000   F     2881             CALL    _RDFlashXR
                    2882             ; ÑéÖ¤ ÉÏ»ØÔ¤´¦ÀíÊÇ·ñ×ö³É¹¦,Èç¹ûÃ»ÓÐÔòÒª×öÒ»´ÎÔ¤´¦Àí
0527 7800     F     2883             MOV     R0,#XDATA_TXBUF
                    2884                     ;MOVX   A,@R0
0529 758301         2885             MOV     DPH,#1
052C 8882           2886             MOV     DPL,R0
052E E0             2887             MOVX    A,@DPTR
052F 64AA           2888             XRL     A,#CONST_SYS_AA
                    2889             
0531                2890     OBUMAIN_WAVEACTIVENOCARD_YD:
0531 120000   F     2891             CALL    _Fun_OBUmain_SysUNSleep
0534 C29C           2892             CLR     REN
0536 C2AC           2893             CLR     ES
                    2894             ;MOV    R7,#04                                          ; 5;50
                    2895             ;CALL   _FUN_LIB_DELAY                                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµç
                             Ñ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬
0538 120000   F     2896             CALL    _FUN_OBUMain_BASEINIT
                    2897     
053B 120000   F     2898             CALL    _FUN_OBUMAIN_PrePu
                    2899             ;ÑéÖ¤ÉÏ»ØÔ¤´¦ÀíÊÇ·ñ×ö³É¹¦,Èç¹ûÃ»ÓÐÔòÒª×öÒ»´ÎÔ¤´¦Àí
053E C200     F     2900             CLR     BIT_ESAMICC
0540 C200     F     2901             CLR     BIT_GETRESULT
0542 7F00     F     2902             MOV     R7,#DATA_RXBUF
0544 7D00     F     2903             MOV     R5,#XDATA_TXBUF
0546 7BDF           2904             MOV     R3,#0dFH
0548 7A01           2905             MOV     R2,#001H
054A 120000   F     2906             CALL    _FUN_CARDAPP_SelectFile
                    2907             
054D 020000   F     2908             JMP     OBUMAIN_WAVEACTIVE_GETBST
                    2909     ;-------------------------------------------------
                    2910     ;Î¢²¨»½ÐÑÍâ²¿ÖÐ¶Ï×ªÀ´Èë¿Ú       
                    2911     ;-------------------------------------------------
                    2912             
0550                2913     SEG_OBUMAIN_WAVEACTIVE:
                    2914             
0550 C2A4           2915             CLR     Pin_pwrdwn                      ;[ÍâÎ§µçÔ´]
                    2916             
0552 7F01           2917             MOV     R7,#1
0554 120000   F     2918             CALL    _Power_Up
0557 7F01           2919             MOV     R7,#1
0559 120000   F     2920             CALL    Tx_Carrier_En           
                    2921             
055C D282           2922             SETB    PIN_WAVE_CHANNEL1
055E C295           2923             CLR     PIN_PWRDWN_LCD
                    2924     
0560 7FC8           2925             MOV     R7,#200
0562 120000   F     2926             CALL    _FUN_LIB_DELAY
0565 7FC8           2927             MOV     R7,#200
0567 120000   F     2928             CALL    _FUN_LIB_DELAY
056A 7FC8           2929             MOV     R7,#200
056C 120000   F     2930             CALL    _FUN_LIB_DELAY
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    50

056F 7FC8           2931             MOV     R7,#200
0571 120000   F     2932             CALL    _FUN_LIB_DELAY  
0574 7FC8           2933             MOV     R7,#200
0576 120000   F     2934             CALL    _FUN_LIB_DELAY
0579 7FC8           2935             MOV     R7,#200
057B 120000   F     2936             CALL    _FUN_LIB_DELAY  
                    2937                     
057E C282           2938             clr     PIN_WAVE_CHANNEL1
0580 D295           2939             setb    PIN_PWRDWN_LCD
0582 120000   F     2940             CALL    _Enter_Sleep_Mode       
0585 C298           2941             CLR     RI
0587 C299           2942             CLR     TI
0589 C289           2943             CLR     IE0
058B C28B           2944             CLR     IE1
058D C28D           2945             CLR     TF0
058F C28F           2946             CLR     TF1
0591 C28C           2947             CLR     TR0
0593 C28E           2948             CLR     TR1
                    2949             
0595 D2AC           2950             SETB    ES
0597 D2A8           2951             SETB    EX0     
0599 D2AF           2952             SETB    EA
                    2953             
059B                2954     OBUMAIN_WAVEACTIVE_OVERXXXX:
059B 80FE           2955             JMP     OBUMAIN_WAVEACTIVE_OVERXXXX
                    2956             
                    2957             ;call   _fun_test_display
                    2958             ;=== ²âÊÔ¶Î[¿ª±³¹â£¬ÏìÒ»ÏÂ] ===
                    2959             ;CLR    PIN_PWRDWN_LCD
                    2960             
                    2961             ;MOV    REG_5412AD_P0M0,#00001100B
                    2962             ;MOV    REG_5412AD_P0M1,#00000000B
                    2963             
                    2964             ;MOV    R7,#100
                    2965             ;CALL   _fun_lib_beep
059D C2A4           2966             CLR     Pin_pwrdwn                      ;[ÍâÎ§µçÔ´]     
059F D283           2967             SETB    PIN_ESAM_RX             ;ESAM Ê¾ÝÍÈÎªµÍ
                    2968     
05A1 C2C4           2969             CLR     PIN_GRE
05A3 C200     F     2970             CLR     BIT_INITCard
05A5 C29C           2971             CLR     REN
05A7 C2AC           2972             CLR     ES
                    2973             
05A9 7F01           2974             MOV     R7,#1
05AB 120000   F     2975             CALL    Rx_En
05AE 7800     F     2976             MOV     R0,#XDATA_TOTALNUML
05B0 E4             2977             CLR     A
                    2978                     ;MOVX   @R0,A
05B1 758301         2979             MOV     DPH,#1 
05B4 8882           2980             MOV     DPL,R0 
05B6 F0             2981             MOVX    @DPTR,A
05B7 18             2982             DEC     R0                      ;[1]
                    2983                     ;MOVX   @R0,A
05B8 758301         2984             MOV     DPH,#1 
05BB 8882           2985             MOV     DPL,R0 
05BD F0             2986             MOVX    @DPTR,A 
                    2987             
                    2988             ;Ìø¹ 255 ÃëÏÞÖÆ
                    2989             ;CLR    PIN_ESAM_RST
                    2990             ;MOV    R7,#030H                        ; »ª´óESAM¿¨¸´Î»Òª±È½ÝµÂµÄ¶Ì
                    2991             ;CALL   _FUN_LIB_DELAYSIMPLAY   
                    2992             
                    2993     ;       MOV     R7,#20
                    2994     ;       CALL    _FUN_LIB_DELAY
                    2995     ;
                    2996     ;       SETB    PIN_ESAM_RST    
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    51

                    2997     ;       SETB    PIN_ESAM_RX
                    2998             
05BE 758372         2999             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
05C1 7582EC         3000             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
05C4 750700   F     3001             MOV     AR7,#XDATA_LastBeaconID
05C7 7B08           3002             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen
05C9 120000   F     3003             CALL    _RDFlashXR      
                    3004             
05CC 758372         3005             MOV     DPH,#CONST_FLASH_LASTCARDH
05CF 7582EB         3006             MOV     DPL,#CONST_FLASH_LASTCARDL
05D2 750700   F     3007             MOV     AR7,#DATA_RXBUF
05D5 7B01           3008             MOV     R3,#1
05D7 120000   F     3009             CALL    _RDFlash
                    3010     ;SETB   PIN_ESAM_RST
                    3011             
05DA 7800     F     3012             MOV     R0,#DATA_RXBUF
05DC E6             3013             MOV     A,@R0
05DD A2E0           3014             MOV     C,ACC.0
05DF 9200     F     3015             MOV     BIT_ISContact,C ;½Ó´¥¿¨=1£¬»¹ÊÇ·Ç½Ó´¥¿¨=0       
05E1 A2E1           3016             MOV     C,ACC.1
05E3 9200     F     3017             MOV     BIT_ProMF,C
05E5 A2B3           3018             mov     C,PIN_card_exist
05E7 B3             3019             cpl     C
05E8 9200     F     3020             mov     BIT_INSERTCARD,C
                    3021             
                    3022     ;clr    a
                    3023     ;mov    c,BIT_INSERTCARD
                    3024     ;mov    acc.0,c
                    3025     ;call   _fun_test_display       
                    3026             
                    3027             ;»½Åä¼ì²éµÍµçÑ¹ ,Ã»ÓÐº¸±È½ÏÆ÷Ê±£¬Ìø¹
05EA                3028     OBUMAIN_WAVEACTIVE_VolNormal:
05EA 200003   F     3029             jb      BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_PREss
05ED 020000   F     3030             jmp     OBUMAIN_WAVEACTIVENOCARD_DEAL
05F0                3031     OBUMAIN_WAVEACTIVE_PREss:
05F0 30001A   F     3032             JNB     BIT_ProMF,OBUMAIN_WAVEACTIVE_PREPRE
05F3                3033     OBUMAIN_WAVEACTIVE_PRE:
                    3034             
                    3035             ;---¶ÁÈ¡ Ô¤´¦Àí ±ê¼Ç ---
05F3 758372         3036             MOV     DPH,#CONST_FALSH_PREFlagH
05F6 7582F4         3037             MOV     DPL,#CONST_FALSH_PREFlagL
05F9 750700   F     3038             MOV     AR7,#XDATA_TXBUF
05FC 7B01           3039             MOV     R3,#1
05FE 120000   F     3040             CALL    _RDFlashXR
                    3041             
                    3042             ;ÑéÖ¤ÉÏ»ØÔ¤´¦ÀíÊÇ·ñ×ö³É¹¦,Èç¹ûÃ»ÓÐÔòÒª×öÒ»´ÎÔ¤´¦Àí
0601 7800     F     3043             MOV     R0,#XDATA_TXBUF
                    3044                     ;MOVX   A,@R0
0603 758301         3045             MOV     DPH,#1
0606 8882           3046             MOV     DPL,R0
0608 E0             3047             MOVX    A,@DPTR
0609 6488           3048             XRL     A,#CONST_SYS_PREFlag
060B 601F           3049             JZ      OBUMAIN_WAVEACTIVE_PRE02
                    3050             
060D                3051     OBUMAIN_WAVEACTIVE_PREPRE:
                    3052             
060D 120000   F     3053             CALL    _Fun_OBUmain_SysUNSleep
0610 C29C           3054             CLR     REN
0612 C2AC           3055             CLR     ES
                    3056     ;       MOV     R7,#4                                           ; 5;50
                    3057     ;       CALL    _FUN_LIB_DELAY                                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµç
                             Ñ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬
0614 120000   F     3058             CALL    _FUN_OBUMain_BASEINIT
                    3059             
0617 120000   F     3060             CALL    _FUN_OBUMAIN_PrePu
                    3061             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    52

                    3062             ;MOV    A,#16
                    3063             ;CALL   _FUN_TEST_DISPLAY
                    3064             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    3065             ;Ñ¡Ôñ»Ø DF01 ÎÄ¼þ
061A C200     F     3066             CLR     BIT_ESAMICC
061C C200     F     3067             CLR     BIT_GETRESULT
061E 7F00     F     3068             MOV     R7,#DATA_RXBUF
0620 7D00     F     3069             MOV     R5,#XDATA_TXBUF
0622 7BDF           3070             MOV     R3,#0dFH
0624 7A01           3071             MOV     R2,#001H
0626 120000   F     3072             CALL    _FUN_CARDAPP_SelectFile         
0629 020000   F     3073             JMP     OBUMAIN_WAVEACTIVE_GETBST
                    3074             ;--- ¶ÁÈ¡Ô¤´¦Àí±ê¼Ç01(¿´Ô¤´¦Àí±ê¼ÇÊÇ·ñ³É¹¦) --- 
062C                3075     OBUMAIN_WAVEACTIVE_PRE02:       
062C 758372         3076             MOV     DPH,#CONST_FALSH_PREFlag02H
062F 7582F5         3077             MOV     DPL,#CONST_FALSH_PREFlag02L
0632 750700   F     3078             MOV     AR7,#XDATA_TXBUF
0635 7B01           3079             MOV     R3,#1
0637 120000   F     3080             CALL    _RDFlashXR
                    3081             
                    3082             ;ÑéÖ¤ÉÏ»ØÔ¤´¦ÀíÊÇ·ñ×ö³É¹¦,Èç¹ûÃ»ÓÐÔòÒª×öÒ»´ÎÔ¤´¦Àí
063A 7800     F     3083             MOV     R0,#XDATA_TXBUF
                    3084                     ;MOVX   A,@R0
063C 758301         3085             MOV     DPH,#1
063F 8882           3086             MOV     DPL,R0
0641 E0             3087             MOVX    A,@DPTR
0642 64AA           3088             XRL     A,#CONST_SYS_AA
0644 606A           3089             JZ      OBUMAIN_WAVEACTIVE_GETBST       ; 
                    3090             
0646 120000   F     3091             CALL    _Fun_OBUmain_SysUNSleep
0649 C29C           3092             CLR     REN
064B C2AC           3093             CLR     ES
                    3094     ;       MOV     R7,#4                                           ; 5;50
                    3095     ;       CALL    _FUN_LIB_DELAY                                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµç
                             Ñ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬                           
064D 120000   F     3096             CALL    _FUN_OBUMain_BASEINIT   
0650 120000   F     3097             CALL    _FUN_OBUMAIN_PrePu
                    3098             ;Ñ¡Ôñ»ØDF01ÎÄ¼þ
0653 C200     F     3099             CLR     BIT_ESAMICC
0655 C200     F     3100             CLR     BIT_GETRESULT
0657 7F00     F     3101             MOV     R7,#DATA_RXBUF
0659 7D00     F     3102             MOV     R5,#XDATA_TXBUF
065B 7BDF           3103             MOV     R3,#0dFH
065D 7A01           3104             MOV     R2,#001H
065F 120000   F     3105             CALL    _FUN_CARDAPP_SelectFile
                    3106                     
0662 804C           3107             JMP     OBUMAIN_WAVEACTIVE_GETBST
0664                3108     OBUMAIN_WAVEACTIVE_PRE03:
0664 300049   F     3109             JNB     BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_GETBST
                    3110             
                    3111             ;¶Á¿¨Æ¬0019Ê¾Ýµ½Íâ´æ
0667 D200     F     3112             SETB    BIT_ESAMICC                                             ; µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0669 D200     F     3113             SETB    BIT_GETRESULT                                           ; XXX
066B 7F00     F     3114             MOV     R7,#DATA_RXBUF                                          ; R7            ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
066D 7D00     F     3115             MOV     R5,#XDATA_TXBUF                                         ; 
066F 7C19           3116             MOV     R4,#19H                                                 ; R4            ---
                                  ÎÄ¼þ ID
0671 7B3C           3117             MOV     R3,#CONST_Flash_0019Len                                 ; R3            ---
                                  ³¤¶È
0673 7A01           3118             MOV     R2,#1
0675 120000   F     3119             CALL    _FUN_CARDAPP_ReadRecord         
                    3120     
                    3121             ;¶Áflash 0019 Ê¾Ýµ½ÄÚ´æ
0678 758372         3122             MOV     DPH,#CONST_FLASH_0019H
067B 7582AF         3123             MOV     DPL,#CONST_FLASH_0019L
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    53

067E 7F00     F     3124             MOV     R7,#DATA_RXBUF
0680 7B3C           3125             MOV     R3,#CONST_Flash_0019Len
0682 120000   F     3126             CALL    _rdflash
                    3127             
                    3128             ;ÅÐ¶Ï¿¨Æ¬ÖÐµÄ0019ÓëÔ¤¶ÁµÄÐÅÏ¢ÊÇ·ñÏàÍ¬
0685 7B3C           3129             MOV     R3,#CONST_Flash_0019Len
0687 7800     F     3130             MOV     R0,#XDATA_TXBUF
0689 7900     F     3131             MOV     R1,#DATA_RXBUF
068B                3132     WAVEACTIVE_PRE03_LOOP:
                    3133                     ;MOVX   A,@R0
068B 758301         3134             MOV     DPH,#1
068E 8882           3135             MOV     DPL,R0
0690 E0             3136             MOVX    A,@DPTR
0691 F5F0           3137             MOV     B,A
0693 E7             3138             MOV     A,@R1
0694 65F0           3139             XRL     A,B
0696 7006           3140             JNZ     WAVEACTIVE_PRE03_PREDeal
0698 09             3141             INC     R1
0699 08             3142             INC     R0
069A DBEF           3143             DJNZ    R3,WAVEACTIVE_PRE03_LOOP
                    3144             
069C 8012           3145             JMP     OBUMAIN_WAVEACTIVE_GETBST                               ;OBUMAIN_WAVEACTIVE
                             _GETBST      
069E                3146     WAVEACTIVE_PRE03_PREDeal:
                    3147             
                    3148             ;---CALL        _FUN_OBUMain_CARDPreDeal                                ;×ö¿¨Æ¬Ô¤´¦
                             Àí
069E 120000   F     3149             call    _FUN_OBUMAIN_PrePu
                    3150             ;Ñ¡Ôñ»ØDF01ÎÄ¼þ
06A1 C200     F     3151             CLR     BIT_ESAMICC
06A3 C200     F     3152             CLR     BIT_GETRESULT
06A5 7F00     F     3153             MOV     R7,#DATA_RXBUF
06A7 7D00     F     3154             MOV     R5,#XDATA_TXBUF
06A9 7BDF           3155             MOV     R3,#0dFH
06AB 7A01           3156             MOV     R2,#001H
06AD 120000   F     3157             CALL    _FUN_CARDAPP_SelectFile
                    3158             
06B0                3159     OBUMAIN_WAVEACTIVE_GETBST:
                    3160     ;2ms    
                    3161             
                    3162             ;±¾´ÎÎÞ¿¨Ê±£¬½¨Á¢Ô¤¶Á±ê¼Ç
06B0 20001E   F     3163             JB      BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_ZLYD
                    3164             
                    3165             ;--- Ð´ÈëÔ¤´¦Àí³É¹¦±ê¼Ç 02 --- 
06B3 7800     F     3166             MOV     R0,#XDATA_TXBUF
06B5 7455           3167             MOV     A,#CONST_SYS_55
                    3168                     ;MOVX   @R0,A
06B7 758301         3169             MOV     DPH,#1 
06BA 8882           3170             MOV     DPL,R0 
06BC F0             3171             MOVX    @DPTR,A
06BD 08             3172             INC     R0
                    3173                     ;MOVX   @R0,A
06BE 758301         3174             MOV     DPH,#1 
06C1 8882           3175             MOV     DPL,R0 
06C3 F0             3176             MOVX    @DPTR,A
                    3177             
06C4 758372         3178             MOV     DPH,#CONST_FALSH_PREFlag02H
06C7 7582F5         3179             MOV     DPL,#CONST_FALSH_PREFlag02L
06CA 7F00     F     3180             MOV     R7,#XDATA_TXBUF
06CC 7B02           3181             MOV     R3,#2
06CE 120000   F     3182             CALL    _wrflashXR
                    3183             
06D1                3184     OBUMAIN_WAVEACTIVE_ZLYD:        
                    3185     ;²¿·ÝOBU²»¿É¿¿
                    3186     ;       SETB    PIN_ESAM_RST    
                    3187     ;       SETB    PIN_ESAM_RX
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    54

                    3188             
06D1 75A88C         3189             MOV     IE,#10001100b
06D4 120000   F     3190             CALL    _FUN_HDLC_RX
                    3191             
                    3192     ;       mov     r0,#XDATA_CELLID
                    3193     ;       movx    a,@r0
                    3194             
                    3195     ;mov    a,DATA_DSRCRXLEN        
                    3196     ;mov    a,#2
                    3197     ;call   _fun_test_display               
                    3198     
                    3199     ;       SETB    PIN_ESAM_RST    
                    3200     ;       SETB    PIN_ESAM_RX
                    3201             
                    3202             ;¶ÁÈ¡ System Info  ²ðÐ¶Î»(µÚ27¸ö×Ö½Ú)
                    3203             ;·ÅÔÚÕâÀï¶Á£¬ÖØÒªµÄÔ­ÒòÊÇ£¬ÉÏµçÊ±ÐèÑÓÊ±£¬ËùÒÔ¿ÉÒÔÊ¡Ê±¡£
06D7 758372         3204             MOV     DPH,#CONST_FLASH_SYSINFOH
06DA 75821A         3205             MOV     DPL,#CONST_FLASH_SYSINFOL + 26
06DD 750700   F     3206             MOV     AR7,#XDATA_FIX
06E0 7B01           3207             MOV     R3,#001
06E2 120000   F     3208             CALL    _RDFlashXR
                    3209             
06E5 7900     F     3210             MOV     R1,#XDATA_FIX
                    3211                     ;MOVX   A,@R1
06E7 758301         3212             MOV     DPH,#1
06EA 8982           3213             MOV     DPL,R1
06EC E0             3214             MOVX    A,@DPTR
06ED 540F           3215             ANL     A,#0FH
                    3216             
06EF 6004           3217             JZ      OBUMAIN_WAVEACTIVE_Tampered
06F1 C200     F     3218             CLR     BIT_CD
06F3 8002           3219             JMP     OBUMAIN_WAVEACTIVE_TamperedOver
                    3220             
06F5                3221     OBUMAIN_WAVEACTIVE_Tampered:
06F5 D200     F     3222             SETB    BIT_CD
06F7                3223     OBUMAIN_WAVEACTIVE_TamperedOver:                
                    3224                     
                    3225     ;1      ;Èç¹û½ÓÊÕµ½µÄ ²»ÊÇ ×¨ÓÃ ÐÅºÅ£¬Ôò ÖØÐÂ ½ÓÊÕ
06F7 7800     F     3226             MOV     R0,#DATA_RXBUF
06F9 E6             3227             MOV     A,@R0
06FA 64FF           3228             XRL     A,#0FFH
06FC 70B2           3229             JNZ     OBUMAIN_WAVEACTIVE_GETBST
06FE 08             3230             INC     R0
06FF E6             3231             MOV     A,@R0
0700 64FF           3232             XRL     A,#0FFH
0702 70AC           3233             JNZ     OBUMAIN_WAVEACTIVE_GETBST
0704 08             3234             INC     R0
0705 E6             3235             MOV     A,@R0
0706 64FF           3236             XRL     A,#0FFH
0708 70A6           3237             JNZ     OBUMAIN_WAVEACTIVE_GETBST
070A 08             3238             INC     R0
070B E6             3239             MOV     A,@R0
070C 64FF           3240             XRL     A,#0FFH 
070E 70A0           3241             JNZ     OBUMAIN_WAVEACTIVE_GETBST
                    3242     
                    3243     
0710 C2C4           3244             CLR     Pin_GRE ;ÉèÖÃÂÌµÆÁÁ     
0712                3245     OBUMAIN_WAVEACTIVE_RXBST:
                    3246             ;±íÊ¾ÊÕµ½¹ BST
0712 D200     F     3247             SETB    BIT_BST
0714 C28C           3248             CLR     TR0             ;½ûÖ¹T0
0716 C2A9           3249             CLR     ET0             ;½ûÖ¹T0Ê¹ÄÜ
                    3250             
                    3251             ;¼ÇÂ¼DSRC½ÓÊÕ³¤¶È
0718 EB             3252             MOV     A,R3
0719 C000           3253             PUSH    AR0
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    55

071B 7800     F     3254             MOV     R0,#DATA_DSRCRXLEN
071D F6             3255             MOV     @R0,A
071E D000           3256             POP     AR0
                    3257             
                    3258             ;255 ÃëÏÞÖÆ
                    3259             ;--- ÅÐ¶ÏÉÏ»Ø½»Ò×³É¹¦ºóµÄÌìÏßIDÓë±¾´ÎµÄÊÇ·ñÒ»Ñù£¬Èç¹ûÒ»Ñù£¬Ôò½øÒ»²½ÅÐ¶ÏÊÇ·ñ³¬¹255Ãë
                             µÄÏÞÖÆ ---
0720 7900     F     3260             MOV     R1,#DATA_RXBUF + 8                      ;BeaonID
0722 7800     F     3261             MOV     R0,#XDATA_LastBeaconID                  ;XDATA_BeaconID
0724 7B04           3262             MOV     R3,#4
0726                3263     OBUMAIN_WAVEACTIVE_BeaconID:                            ;ÅÐ¶ÏÌìÏßIDÊÇ·ñÒ»Ñù
                    3264                     ;MOVX   A,@R0
0726 758301         3265             MOV     DPH,#1
0729 8882           3266             MOV     DPL,R0
072B E0             3267             MOVX    A,@DPTR
072C 67             3268             XRL     A,@R1
072D 7012           3269             JNZ     OBUMAIN_WAVEACTIVE_SendVST              ;ÌìÏßID²»Í¬£¬ÔòÏòÏÂÖ´ÐÐ
072F 09             3270             INC     R1
0730 08             3271             INC     R0
0731 DBF3           3272             DJNZ    R3,OBUMAIN_WAVEACTIVE_BeaconID
                    3273             
                    3274             ;ÅÐ¶ÏÁ½´Î½»Ò×¼ä¸ôÊÇ·ñ´óÓÚ CONST_SYS_TradeConfine Ãë
0733 7F00     F     3275             MOV     R7,#XDATA_LastBeaconID+4;XDATA_UnixTime                 ;ÉÏÒ»´Î½»Ò×³É¹¦ºó¼Ç
                             Â¼µÄ unix time       
0735 7D00     F     3276             MOV     R5,#DATA_RXBUF + 12                     ;±¾´Îunix time
0737 7BFF           3277             MOV     R3,#CONST_SYS_TradeConfine              ;ÃëÊ²î
0739 120000   F     3278             CALL    _FUN_LIB_CompareTime
073C 5003           3279             JNC     OBUMAIN_WAVEACTIVE_SendVST              ;ÌìÏßIDÏàÍ¬£¬Ê±¼ä´óÓÚÉÏÏÞ£¬ÔòÏòÏÂÖ´
                             ÐÐ   
073E 020000   F     3280             JMP     AP_start
                    3281             
0741                3282     OBUMAIN_WAVEACTIVE_SendVST:
                    3283             
                    3284             ;---Ö»ÊÇ×ö¿¨Æ¬µÄ »ù±¾ ¸´Î»£¬²»Ô¤´¦Àí(esam ¸´Î»ÐÅÏ¢¿ÉÒÔ²»½ÓÊÕ)
0741 120000   F     3285             CALL    _FUN_LIB_RANDDELAY      ;Ëæ»úÑÓ
0744 EB             3286             MOV     a,r3
0745 7800     F     3287             MOV     r0,#XDATA_VSTDELAY
                    3288             
                    3289             ;MOVX   @R0,A
0747 758301         3290             MOV     DPH,#1
074A 8882           3291             MOV     DPL,R0
074C F0             3292             MOVX    @DPTR,A
                    3293             
                    3294             ;¼Ó 400US
074D 120000   F     3295             CALL    _FUN_DSRC_VST                           ;×éÖ¯VST·¢ËÍÊ¾Ýç·³å
0750 120000   F     3296             CALL    _FUN_HDLC_CHANGECHANNEL                 ;¸Ä·¢ÉäÐÅµÀ
0753 120000   F     3297             CALL    _FUN_HDLC_TX
                    3298             
                    3299             ;CLR    BIT_CKXT
                    3300             ;MOV    A,#34
                    3301             ;CALL   _fun_test_display
                    3302             
0756 200040   F     3303             JB      BIT_INITCard,OBUMAIN_WAVEACTIVE_txone
0759 C2AF           3304             CLR     EA
                    3305             ;---CALL        _Fun_OBUmain_SysUNSleep02
075B E4             3306             CLR     A
075C A200     F     3307             MOV     C,BIT_Cellinfo
075E 92E0           3308             MOV     ACC.0,C
                    3309             ;---CLR BIT_ISCell
0760 C0E0           3310             PUSH    ACC
0762 120000   F     3311             CALL    _Fun_OBUmain_SysUNSleep02
0765 D0E0           3312             POP     ACC
0767 A2E0           3313             MOV     C,ACC.0
0769 9200     F     3314             MOV     BIT_Cellinfo,C
                    3315             
076B C29C           3316             CLR     REN
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    56

076D C2AC           3317             CLR     ES      
                    3318             
                    3319     ;MOV    R7,#1
                    3320     ;CALL   _fun_lib_delay
                    3321             
076F 7800     F     3322             MOV     r0,#XDATA_VSTDELAY      
                    3323                     ;MOVX   A,@R0
0771 758301         3324             MOV     DPH,#1
0774 8882           3325             MOV     DPL,R0
0776 E0             3326             MOVX    A,@DPTR
0777 7005           3327             JNZ     OBUMAIN_WAVEACTIVE_ovdelay
0779 7F01           3328             MOV     R7,#1
077B 120000   F     3329             CALL    _fun_lib_delay
                    3330             ;CALL   _FUN_TEST_DISPLAY
077E                3331     OBUMAIN_WAVEACTIVE_ovdelay:
                    3332             
                    3333             ;É¨esam rx 1MS = 16
077E 7F20           3334             MOV     R7,#32
0780 7EBF           3335             MOV     R6,#191
0782                3336     OBUMAIN_WAVEACTIVE_spanesamrst:
0782 208306         3337             JB      PIN_ESAM_RX,OBUMAIN_WAVEACTIVE_spanesamrstH     
0785 DEFB           3338             djnz    r6,OBUMAIN_WAVEACTIVE_spanesamrst
0787 7EBF           3339             mov     r6,#191
0789 DFF7           3340             djnz    r7,OBUMAIN_WAVEACTIVE_spanesamrst
                    3341             
                    3342             ;--- ESAM Î»Ê§°Ü£¬ÖØ¸´Î»---
                    3343     ;       CLR     PIN_ESAM_RST
                    3344     ;       MOV     R7,#030H                                        ; »ª´ó ESAM ¿¨¸´Î»Òª±È½ÝµÂµ
                             Ä¶Ì
                    3345     ;       CALL    _FUN_LIB_DELAYSIMPLAY
                    3346     ;       SETB    PIN_ESAM_RST
                    3347                     
                    3348     ;       MOV     R7,#3
                    3349     ;       CALL    _FUN_LIB_DELAY
                    3350             
                    3351     ;       JMP     OBUMAIN_WAVEACTIVE_spanesamrstOV
                    3352             
                    3353             ;Îª¸ßºó£¬200US£¬²ÅÈÏÎª¸´Î»Íê³É
078B                3354     OBUMAIN_WAVEACTIVE_spanesamrstH:
                    3355             
078B 7EFE           3356             MOV     R6,#254 
078D                3357     OBUMAIN_WAVEACTIVE_spanesamrstHH:
078D 3083F2         3358             JNB     PIN_ESAM_RX,OBUMAIN_WAVEACTIVE_spanesamrst
                    3359     ;       NOP
                    3360     ;       NOP
                    3361             
                    3362     ;       NOP
                    3363     ;       NOP
                    3364     ;       NOP
                    3365     ;       NOP
                    3366     ;       NOP
                    3367     ;       NOP
                    3368     ;       NOP
                    3369     ;       NOP
                    3370     ;       NOP
                    3371     ;       NOP
0790 7F06           3372             mov     r7,#6
0792 DFFE           3373             djnz    r7,$
0794 DEF7           3374             djnz    r6,OBUMAIN_WAVEACTIVE_spanesamrstHH
                    3375     ;       
                    3376     ;OBUMAIN_WAVEACTIVE_spanesamrstOV:
                    3377     
                    3378     
                    3379     ;________________________________________________________________________
0796 120000   F     3380             CALL    _FUN_OBUMain_BASEINIT02
0799                3381     OBUMAIN_WAVEACTIVE_txone:
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    57

0799 300003   F     3382             jnb     BIT_Cellinfo,OBUMAIN_WAVEACTIVE_txtwo
079C 120000   F     3383             call    GSM_SerialINTRX_RXRight
079F                3384     OBUMAIN_WAVEACTIVE_txtwo:
                    3385             
                    3386             ;»½Åä¼ì²éµÍµçÑ¹ ,Ã»ÓÐº¸±È½ÏÆ÷Ê±£¬Ìø¹
                    3387             ;JMP    OBUMAIN_WAVEACTIVE_VolNormal    
079F D295           3388             setb    PIN_PWR_LOWIO
07A1 00             3389             nop
07A2 00             3390             nop
07A3 00             3391             nop
07A4 00             3392             nop
                    3393             
07A5 209518         3394             JB      PIN_PWR_LOWIO,OBUMAIN_WAVEACTIVE_HDLCTX01OVER
07A8 7F01           3395             mov     R7,#1
07AA 120000   F     3396             call    _fun_lib_delay
07AD 209510         3397             JB      PIN_PWR_LOWIO,OBUMAIN_WAVEACTIVE_HDLCTX01OVER
                    3398             
07B0 120000   F     3399             CALL    _Func_LCD_INIT
                    3400             ;MOV    R7,#250
                    3401             ;CALL   _FUN_LIB_DELAY
07B3 7F00     F     3402             MOV     R7,#DATA_RXBUF
07B5 900000   F     3403             MOV     DPTR,#STR_LOWVo
07B8 120000   F     3404             CALL    _FUN_LCD_DisplayExChina
07BB 7FFA           3405             MOV     R7,#250
07BD 120000   F     3406             CALL    _FUN_LIB_DELAY
07C0                3407     OBUMAIN_WAVEACTIVE_HDLCTX01OVER:
07C0                3408     OBUMAIN_WAVEACTIVE_LOOP:
                    3409             
                    3410             ;½ÓÊÕ DSRC ÐÅºÅ
07C0 7F00     F     3411             MOV     R7,#DATA_RXBUF  
07C2 200008   F     3412             JB      BIT_SETMMI,OBUMAIN_WAVEACTIVE_SETMMIEA
07C5 75A88C         3413             MOV     IE,#10001100b
07C8 120000   F     3414             CALL    _FUN_HDLC_RX
07CB 8006           3415             JMP     OBUMAIN_WAVEACTIVE_NOEAOV
07CD                3416     OBUMAIN_WAVEACTIVE_SETMMIEA:
07CD 75A882         3417             MOV     IE,#10000010B
07D0 120000   F     3418             CALL    _FUN_HDLC_RXSetMMI
07D3                3419     OBUMAIN_WAVEACTIVE_NOEAOV:
                    3420             
                    3421             ;+++CPL pin_gre
                    3422             ;Èç¹û½ÓÊÕµ½µÄÊÇ×¨ÓÃÐÅºÅ£¬ÔòÖØ·¢
07D3 7800     F     3423             MOV     R0,#DATA_RXBUF
07D5 E6             3424             MOV     A,@R0
07D6 64FF           3425             XRL     A,#0FFH
07D8 707A           3426             JNZ     OBUMAIN_WAVEACTIVE_NotBroadCast         ;·Ç¹ã²¥µØÖ·
07DA 08             3427             INC     R0
07DB E6             3428             MOV     A,@R0
07DC 64FF           3429             XRL     A,#0FFH
07DE 7074           3430             JNZ     OBUMAIN_WAVEACTIVE_NotBroadCast         ;·Ç¹ã²¥µØÖ·
07E0 08             3431             INC     R0
07E1 E6             3432             MOV     A,@R0
07E2 64FF           3433             XRL     A,#0FFH
07E4 706E           3434             JNZ     OBUMAIN_WAVEACTIVE_NotBroadCast         ;·Ç¹ã²¥µØÖ·
07E6 08             3435             INC     R0
07E7 E6             3436             MOV     A,@R0
07E8 64FF           3437             XRL     A,#0FFH
07EA 7068           3438             JNZ     OBUMAIN_WAVEACTIVE_NotBroadCast         ;·Ç¹ã²¥µØÖ·
                    3439             
07EC                3440     OBUMAIN_WAVEACTIVE_BroadCast:                           ;¹ã²¥µØÖ·
                    3441             ;½ÓÊÕµ½ N ´Î BST ¾ÍÐÝÃß
07EC 7800     F     3442             MOV     R0,#XDATA_BSTNUM
                    3443                     ;MOVX   A,@R0
07EE 758301         3444             MOV     DPH,#1
07F1 8882           3445             MOV     DPL,R0
07F3 E0             3446             MOVX    A,@DPTR
07F4 04             3447             INC     A
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    58

                    3448                     ;MOVX   @R0,A
07F5 758301         3449             MOV     DPH,#1 
07F8 8882           3450             MOV     DPL,R0 
07FA F0             3451             MOVX    @DPTR,A
07FB 200005   F     3452             JB      BIT_ISRXNB,OBUMAIN_WAVEACTIVE_bst100    
07FE                3453     OBUMAIN_WAVEACTIVE_bst10:
07FE B40800         3454             CJNE    A,#CONST_BSTLIMIT,$+3
0801 8003           3455             JMP     OBUMAIN_WAVEACTIVE_10Ov
0803                3456     OBUMAIN_WAVEACTIVE_bst100:
0803 B46400         3457             CJNE    A,#CONST_BSTLIMIT02,$+3
0806                3458     OBUMAIN_WAVEACTIVE_10Ov:
0806 400E           3459             JC      OBUMAIN_WAVEACTIVE_BroadCastov
0808 300003   F     3460             JNB     BIT_SETMMI,OBUMAIN_WAVEACTIVE_BSTOVER
080B 120000   F     3461             CALL    _FUN_OBUMAIN_PreSleep
080E                3462     OBUMAIN_WAVEACTIVE_BSTOVER:
080E 7F14           3463             mov     r7,#20
0810 120000   F     3464             call    _fun_lib_delay
0813 020000   F     3465             JMP     AP_start
0816                3466     OBUMAIN_WAVEACTIVE_BroadCastov:
                    3467             ;255 ÃëÏÞÖÆ
                    3468             ;--- ÅÐ¶ÏÉÏ»Ø½»Ò×³É¹¦ºóµÄÌìÏßIDÓë±¾´ÎµÄÊÇ·ñÒ»Ñù£¬Èç¹ûÒ»Ñù£¬Ôò½øÒ»²½ÅÐ¶ÏÊÇ·ñ³¬¹255Ãë
                             µÄÏÞÖÆ ---
0816 7900     F     3469             MOV     R1,#DATA_RXBUF + 8                      ;BeaonID
0818 7800     F     3470             MOV     R0,#XDATA_LastBeaconID;XDATA_BeaconID
081A 7B04           3471             MOV     R3,#4
081C                3472     OBUMAIN_WAVEACTIVE_BeaconID2:                           ;ÅÐ¶ÏÌìÏßIDÊÇ·ñÒ»Ñù
                    3473                     ;MOVX   A,@R0
081C 758301         3474             MOV     DPH,#1
081F 8882           3475             MOV     DPL,R0
0821 E0             3476             MOVX    A,@DPTR
0822 67             3477             XRL     A,@R1
0823 7012           3478             JNZ     OBUMAIN_WAVEACTIVE_SendVST2             ;ÌìÏßID²»Í¬£¬ÔòÏòÏÂÖ´ÐÐ
0825 09             3479             INC     R1
0826 08             3480             INC     R0
0827 DBF3           3481             DJNZ    R3,OBUMAIN_WAVEACTIVE_BeaconID2
                    3482             
                    3483             ;ÅÐ¶ÏÁ½´Î½»Ò×¼ä¸ôÊÇ·ñ´óÓÚ CONST_SYS_TradeConfine Ãë
0829 7F00     F     3484             MOV     R7,#XDATA_LastBeaconID + 4;XDATA_UnixTime                       ;ÉÏÒ»´Î½»Ò×
                             ³É¹¦ºó¼ÇÂ¼µÄ unix time       
082B 7D00     F     3485             MOV     R5,#DATA_RXBUF + 12                     ;±¾´Îunix time
082D 7BFF           3486             MOV     R3,#CONST_SYS_TradeConfine              ;ÃëÊ²î
082F 120000   F     3487             CALL    _FUN_LIB_CompareTime
0832 5003           3488             JNC     OBUMAIN_WAVEACTIVE_SendVST2             ;ÌìÏßIDÏàÍ¬£¬Ê±¼ä´óÓÚÉÏÏÞ£¬ÔòÏòÏÂÖ´
                             ÐÐ   
0834 020000   F     3489             jmp     AP_start
0837                3490     OBUMAIN_WAVEACTIVE_SendVST2:
                    3491             ;±íÊ¾ÒÑ¾­ÊÕµ½¹·Ç¹ã²¥µØÖ·£¬Ôò´ËÊ±£¬ÔÙÊÕµ½¹ã²¥Ôò²»×öÏìÓ¦£¬½øÈëÐÝÃß        
0837 200002   F     3492             JB      BIT_ISRXNB,OBUMain_WAVEACTIVE_AgainVST
083A                3493     OBUMAIN_WAVEACTIVE_SLEEP:
                    3494             ;+++ SETB       PIN_GRE 
083A 8084           3495             JMP     OBUMAIN_WAVEACTIVE_LOOP         ; _FUN_OBUMAIN_MASTER
083C                3496     OBUMain_WAVEACTIVE_AgainVST:    
083C                3497     OBUMain_WAVEACTIVE_AgainVSTCON: 
083C                3498     OBUMain_WAVEACTIVE_PPS:
                    3499             
083C 120000   F     3500             CALL    _FUN_LIB_RANDDELAY                              ; Ëæ»úÑÓÊ±
083F 120000   F     3501             CALL    _FUN_DSRC_VST                                   ;×éÖ¯VST·¢ËÍÊ¾Ýç·³å
0842 120000   F     3502             CALL    _FUN_HDLC_CHANGECHANNEL         ;¸Ä·¢ÉäÐÅµÀ
0845 120000   F     3503             CALL    _FUN_HDLC_TX
                    3504             
0848 300006   F     3505             JNB     BIT_Cellinfo,OBUMAIN_WAVEACTIVE_txtwo02
084B 200003   F     3506             JB      BIT_HaveRecordCellID,OBUMAIN_WAVEACTIVE_txtwo02;ÒÑ¾­¼ÇÂ¼µÄ£¬Ôò²»ÔÙ¼ÇÂ¼
084E 120000   F     3507             CALL    GSM_SerialINTRX_RXRight
                    3508             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0851                3509     OBUMAIN_WAVEACTIVE_txtwo02:
0851 020000   F     3510             JMP     OBUMAIN_WAVEACTIVE_LOOP                         ;ÖØÐÂµÈ´½ÓÊÕDSRCÊ¾Ý
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    59

                    3511             
0854                3512     OBUMAIN_WAVEACTIVE_NotBroadCast:                                ;·Ç¹ã²¥µØÖ·
                    3513             ;ÅÐ¶Ïµ±Ç°Í¨Ñ¶ÊÇ·ñÕë¶Ô±¾OBU,Èç¹û²»ÊÇ£¬ÔòÖØÐÂ½ÓÊÕDSRCÐÅºÅ
0854 7800     F     3514             MOV     R0,#DATA_RXBUF
0856 7900     F     3515             MOV     R1,#DATA_OBUID
0858 E6             3516             MOV     A,@R0
0859 67             3517             XRL     A,@R1
085A 6003           3518             JZ      OBUMAIN_WAVEACTIVE_BroadCast00
085C 020000   F     3519             JMP     OBUMAIN_WAVEACTIVE_LOOP
085F                3520     OBUMAIN_WAVEACTIVE_BroadCast00:         
085F 08             3521             INC     R0
0860 09             3522             INC     R1
0861 E6             3523             MOV     A,@R0
0862 67             3524             XRL     A,@R1
0863 6003           3525             JZ      OBUMAIN_WAVEACTIVE_BroadCast01
0865 020000   F     3526             JMP     OBUMAIN_WAVEACTIVE_LOOP
0868                3527     OBUMAIN_WAVEACTIVE_BroadCast01:         
0868 08             3528             INC     R0
0869 09             3529             INC     R1
086A E6             3530             MOV     A,@R0
086B 67             3531             XRL     A,@R1   
086C 6003           3532             JZ      OBUMAIN_WAVEACTIVE_BroadCast02
086E 020000   F     3533             JMP     OBUMAIN_WAVEACTIVE_LOOP
0871                3534     OBUMAIN_WAVEACTIVE_BroadCast02:                 
0871 08             3535             INC     R0
0872 09             3536             INC     R1
0873 E6             3537             MOV     A,@R0
0874 67             3538             XRL     A,@R1
0875 6003           3539             JZ      OBUMAIN_WAVEACTIVE_BroadCast03
0877 020000   F     3540             JMP     OBUMAIN_WAVEACTIVE_LOOP
087A                3541     OBUMAIN_WAVEACTIVE_BroadCast03:                 
087A 7800     F     3542             MOV     R0,#XDATA_BSTNUM
087C E4             3543             CLR     A
                    3544                     ;MOVX   @R0,A
087D 758301         3545             MOV     DPH,#1 
0880 8882           3546             MOV     DPL,R0 
0882 F0             3547             MOVX    @DPTR,A
                    3548             ;+++ SETB       pin_gre
0883 7900     F     3549             MOV     R1,#DATA_RXBUF + CONST_DSRC_LLCCTRL     ;È¡LLC¿ØÖÆÓòÊ¾Ý
0885 E7             3550             MOV     A,@R1
                    3551             
0886 300026   F     3552             JNB     BIT_ISRXNB,OBUMAIN_WAVEACTIVE_SecondRX  ;=1 ±íÊ¾Î´ÊÕµ½¹·Ç¹ã²¥µØÖ· =0 ±íÊ¾ÒÑ
                             ¾­ÊÕµ½¹·Ç¹ã²¥µØÖ·
0889                3553     OBUMAIN_WAVEACTIVE_FristRX:     ;µÚÒ»´ÎÊÕµ½·Ç¹ã²¥µØÖ·
0889 C200     F     3554             CLR     BIT_ISRXNB
088B A2E7           3555             MOV     C,ACC.7
088D 9200     F     3556             MOV     BIT_N,C         ;¼ÇÂ¼NÎ»
                    3557             
                    3558             ;--- Ð´ÈëÔ¤´¦Àí³É¹¦±ê¼Ç02 --- 
088F 7800     F     3559             MOV     R0,#XDATA_TXBUF
0891 7455           3560             MOV     A,#CONST_SYS_55
                    3561                     ;MOVX   @R0,A
0893 758301         3562             MOV     DPH,#1 
0896 8882           3563             MOV     DPL,R0 
0898 F0             3564             MOVX    @DPTR,A
0899 08             3565             INC     R0
                    3566                     ;MOVX   @R0,A
089A 758301         3567             MOV     DPH,#1 
089D 8882           3568             MOV     DPL,R0 
089F F0             3569             MOVX    @DPTR,A                 
08A0 758372         3570             MOV     DPH,#CONST_FALSH_PREFlag02H
08A3 7582F5         3571             MOV     DPL,#CONST_FALSH_PREFlag02L
08A6 7F00     F     3572             MOV     R7,#XDATA_TXBUF
08A8 7B02           3573             MOV     R3,#2
08AA 120000   F     3574             CALL    _wrflashXR      
                    3575             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    60

08AD 803B           3576             JMP     OBUMAIN_WAVEACTIVE_ActionType
08AF                3577     OBUMAIN_WAVEACTIVE_SecondRX:                                            ;µÚ¶þ´ÎÊÕµ½·Ç¹ã²¥µØ
                             Ö·
08AF 7800     F     3578             MOV     R0,#DATA_RXBUF + CONST_DSRC_ACTION                      ;ActionType;È¡LLC¿Ø
                             ÖÆÓòÊ¾Ý
08B1 E6             3579             MOV     A,@R0
                    3580             
08B2 6460           3581             XRL     A,#60H
08B4 700E           3582             JNZ     OBUMAIN_WAVEACTIVE_ZC01
                    3583     
08B6 7800     F     3584             MOV     R0,#DATA_RXBUF + 9;CONST_DSRC_ACTIONTYPE                        ;ActionType
                             ;È¡LLC¿ØÖÆÓòÊ¾Ý      
08B8 E6             3585             MOV     A,@R0
08B9 7009           3586             JNZ     OBUMAIN_WAVEACTIVE_ZC01
08BB 200003   F     3587             JB      BIT_SETMMI,OBUMAIN_WAVEACTIVE_OVERZZ
08BE 020000   F     3588             JMP     AP_start
08C1                3589     OBUMAIN_WAVEACTIVE_OVERZZ:                                              ;ÊÕµ½SETMMI£¬ÊÕµ½Ev
                             ent
08C1 020000   F     3590             JMP     OBUMAIN_WAVEACTIVE_OVER
08C4                3591     OBUMAIN_WAVEACTIVE_ZC01:        
08C4 7900     F     3592             MOV     R1,#DATA_RXBUF + CONST_DSRC_LLCCTRL     ;È¡LLC¿ØÖÆÓòÊ¾Ý
08C6 E7             3593             MOV     A,@R1   
08C7 30E705         3594             JNB     ACC.7,OBUMAIN_WAVEACTIVE_NBITLOW
08CA                3595     OBUMAIN_WAVEACTIVE_NBITHIGH:
08CA 30001B   F     3596             JNB     BIT_N,OBUMAIN_WAVEACTIVE_NBITOVER
08CD 8003           3597             JMP     OBUMAIN_WAVEACTIVE_DSRCSENDOLD
08CF                3598     OBUMAIN_WAVEACTIVE_NBITLOW:
08CF 200016   F     3599             JB      BIT_N,OBUMAIN_WAVEACTIVE_NBITOVER
08D2                3600     OBUMAIN_WAVEACTIVE_DSRCSENDOLD:                                         ;NÎ»Ã»ÓÐ¸Ä±äÊ±£¬ÖØ·
                             ¢DSRCÊ¾Ý     
08D2 7F00           3601     mov r7,#0
08D4 DFFE           3602     djnz r7,$       ;43us
08D6 DFFE           3603     djnz r7,$       ;43us   
08D8 B2C5           3604             CPL     PIN_RED 
                    3605             ;--- ÖØ·¢ DSRC ÐÅºÅ ---
08DA 7F00     F     3606             MOV     R7,#XDATA_TXBUF
08DC 7800     F     3607             MOV     R0,#DATA_DSRCTXLEN
08DE E6             3608             MOV     A,@R0
08DF FB             3609             MOV     R3,A    
08E0                3610     OBUMAIN_WAVEACTIVE_NOSETMMI:
08E0 C2AF           3611             CLR     EA      
08E2 120000   F     3612             CALL    _FUN_HDLC_TX
08E5                3613     OBUMAIN_WAVEACTIVE_NOEAOV01:    
08E5 020000   F     3614             JMP     OBUMAIN_WAVEACTIVE_LOOP                                 ;»Øµ½DSRCÐÅºÅÑ­»·´¦
                             ÀíÁ÷³Ì               
08E8                3615     OBUMAIN_WAVEACTIVE_NBITOVER:                                            ;NÎ»ÓÐ¸Ä±äÊ±£¬Ö´ÐÐÐ
                             ÂÖ¸Áî        
08E8 B200     F     3616             CPL     BIT_N                                                   ;¼ÇÂ¼NÎ»        
08EA                3617     OBUMAIN_WAVEACTIVE_ActionType:  
08EA 7800     F     3618             MOV     R0,#DATA_RXBUF + CONST_DSRC_ACTIONTYPE                  ;ActionType;È¡LLC¿Ø
                             ÖÆÓòÊ¾Ý
08EC E6             3619             MOV     A,@R0   
08ED B4003C         3620             CJNE    A,#Const_ActionType_GetSecure,OBUMAIN_WAVEACTIVE_SetSecure      
08F0                3621     OBUMAIN_WAVEACTIVE_GetSecure:;(ÈÏÖ¤)    
                    3622             ;+++ SETB       Pin_GRE                                                 ;ÊÕµ½GetSec
                             ureÃðÂÌµÆ
08F0 300034   F     3623             JNB     BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_Selected      ; µ±ÓÃ»§¿¨¸´Î»Ã»ÓÐ³É¹¦Ê±£¬²
                             »¶ÔÓÃ»§¿¨×öÑ¡Ä¿Â¼²Ù×÷
08F3 200003   F     3624             JB      BIT_ISContact,OBUMAIN_WAVEACTIVE_Select1001     ; Èç¹ûÊÇ½Ó´¥¿¨£¬ÔòÑ¡ 1001£¬
                             Èç¹ûÊÇ·Ç½Ó¿¨£¬ÔòPro¿¨²ÅÑ¡1001
08F6 30002E   F     3625             JNB     BIT_proMF,OBUMAIN_WAVEACTIVE_Selected   
08F9                3626     OBUMAIN_WAVEACTIVE_Select1001:  
08F9 7F00     F     3627             MOV     R7,#XDATA_HOLD
08FB 7D00     F     3628             MOV     R5,#DATA_RXBUF
08FD 7B07           3629             MOV     R3,#7
08FF 120000   F     3630             CALL    _FUN_LIB_DATATOXDATA    
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    61

0902                3631     OBUMAIN_WAVEACTIVE_Se1001PPS:   
0902 C200     F     3632             CLR     BIT_GETRESULT
0904 D200     F     3633             SETB    BIT_ESAMICC
0906 7F00     F     3634             MOV     R7,#DATA_RXBUF
0908 7D00     F     3635             MOV     R5,#XDATA_TXBUF
090A 7B10           3636             MOV     R3,#10H
090C 7A01           3637             MOV     R2,#01H
090E 120000   F     3638             CALL    _FUN_CARDAPP_SelectFile
0911 EF             3639             MOV     A,R7
0912 6008           3640             JZ      OBUMAIN_WAVEACTIVE_Se1001ED     
0914 7409           3641             MOV     A,#CONST_STATE_GetSecureSelFileEr
0916 120000   F     3642             CALL    _FUN_OBUMAIN_ErrShow    
0919 020000   F     3643             JMP     AP_start
                    3644             
091C                3645     OBUMAIN_WAVEACTIVE_Se1001ED:    
091C D200     F     3646             SETB    BIT_Sel1001
091E 7F00     F     3647             MOV     R7,#XDATA_HOLD
0920 7D00     F     3648             MOV     R5,#DATA_RXBUF
0922 7B07           3649             MOV     R3,#7
0924 120000   F     3650             CALL    _FUN_LIB_XDATATODATA    
0927                3651     OBUMAIN_WAVEACTIVE_Selected:
0927 120000   F     3652             CALL    _FUN_DSRC_NSpecial
092A 8065           3653             JMP     OBUMAIN_WAVEACTIVE_DESL
092C                3654     OBUMAIN_WAVEACTIVE_SetSecure:;SET_Secure        
092C B40102         3655             CJNE    A,#Const_ActionType_SetSecure,OBUMAIN_WAVEACTIVE_GetRand
092F 8060           3656             JMP     OBUMAIN_WAVEACTIVE_DESL 
0931                3657     OBUMAIN_WAVEACTIVE_GetRand:;(È¡Ëæ»úÊ)   
0931 B40202         3658             CJNE    A,#Const_ActionType_GetRand,OBUMAIN_WAVEACTIVE_TransferChannel
0934 805B           3659             JMP     OBUMAIN_WAVEACTIVE_DESL 
0936                3660     OBUMAIN_WAVEACTIVE_TransferChannel:;(Í¨µÀ)
0936 B4033D         3661             CJNE    A,#Const_ActionType_TransferChannel,OBUMAIN_WAVEACTIVE_SetMMI
                    3662             
0939 30002C   F     3663             JNB     BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_TransferSelected              ; µ±ÓÃ»§¿¨¸
                             ´Î»Ã»ÓÐ³É¹¦Ê±£¬²»¶ÔÓÃ»§¿¨×öÑ¡Ä¿Â¼²Ù×÷
093C 200003   F     3664             JB      BIT_ISContact,OBUMAIN_WAVEACTIVE_TransferSel1001        ; Èç¹ûÊÇ½Ó´¥¿¨£¬ÔòÑ
                             ¡ 1001£¬Èç¹ûÊÇ·Ç½Ó¿¨£¬ÔòPro¿¨²ÅÑ¡1001
093F 300026   F     3665             JNB     BIT_proMF,OBUMAIN_WAVEACTIVE_TransferSelected
0942                3666     OBUMAIN_WAVEACTIVE_TransferSel1001:
0942 200023   F     3667             JB      BIT_Sel1001,OBUMAIN_WAVEACTIVE_TransferSelected 
                    3668             
0945 7F00     F     3669             MOV     R7,#XDATA_HOLD
0947 7D00     F     3670             MOV     R5,#DATA_RXBUF
0949 7B07           3671             MOV     R3,#7
094B 120000   F     3672             CALL    _FUN_LIB_DATATOXDATA
                    3673     
094E C200     F     3674             CLR     BIT_GETRESULT
0950 D200     F     3675             SETB    BIT_ESAMICC
0952 7F00     F     3676             MOV     R7,#DATA_RXBUF
0954 7D00     F     3677             MOV     R5,#XDATA_TXBUF
0956 7B10           3678             MOV     R3,#10H
0958 7A01           3679             MOV     R2,#01H
095A 120000   F     3680             CALL    _FUN_CARDAPP_SelectFile
095D D200     F     3681             SETB    BIT_Sel1001     
095F                3682     OBUMAIN_WAVEACTIVE_TransferChannelSELOV:        
095F 7F00     F     3683             MOV     R7,#XDATA_HOLD
0961 7D00     F     3684             MOV     R5,#DATA_RXBUF
0963 7B07           3685             MOV     R3,#7
0965 120000   F     3686             CALL    _FUN_LIB_XDATATODATA
0968                3687     OBUMAIN_WAVEACTIVE_TransferSelected:
0968 7800     F     3688             MOV     R0,#DATA_RXBUF+11
096A E6             3689             MOV     A,@R0
096B 6402           3690             XRL     A,#2
096D 7002           3691             JNZ     OBUMAIN_WAVEACTIVE_TransferPPS02
096F D200     F     3692             SETB    BIT_esamtran
                    3693             
0971                3694     OBUMAIN_WAVEACTIVE_TransferPPS02:
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    62

0971 120000   F     3695             CALL    _FUN_DSRC_NSpecial
0974 801B           3696             JMP     OBUMAIN_WAVEACTIVE_DESL
                    3697             
0976                3698     OBUMAIN_WAVEACTIVE_SetMMI:;(ÏìÁå)
0976 B40410         3699             CJNE    A,#Const_ActionType_SetMMI,OBUMAIN_WAVEACTIVE_SWGSM
0979 7800     F     3700             MOV     R0,#DATA_RXBUF+11
097B E6             3701             MOV     A,@R0
097C 7900     F     3702             MOV     R1,#XDATA_SETMMI
                    3703                     ;MOVX   @R1,A
097E 758301         3704             MOV     DPH,#1
0981 8982           3705             MOV     DPL,R1
0983 F0             3706             MOVX    @DPTR,A 
0984 120000   F     3707             CALL    _FUN_DSRC_NSpecial
0987 8008           3708             JMP     OBUMAIN_WAVEACTIVE_DESL 
0989                3709     OBUMAIN_WAVEACTIVE_SWGSM:;
0989 B45105         3710             CJNE    A,#81,OBUMAIN_WAVEACTIVE_DESL
098C 120000   F     3711             CALL    _FUN_DSRC_NSpecial
                    3712             
098F 8000           3713             JMP     OBUMAIN_WAVEACTIVE_DESL
0991                3714     OBUMAIN_WAVEACTIVE_Other:;(±£Áô)ss      
0991                3715     OBUMAIN_WAVEACTIVE_DESL:        
0991                3716     OBUMAIN_WAVEACTIVE_Response:
                    3717             
                    3718             ;---  ·¢ËÍDSRCÐÅºÅ ---  
0991 120000   F     3719             CALL    _FUN_HDLC_TX    
0994 300003   F     3720             JNB     BIT_SETMMI,OBUMAIN_WAVEACTIVE_NOEA02x   
0997 120000   F     3721             CALL    _FUN_OBUMain_TIMERX
099A                3722     OBUMAIN_WAVEACTIVE_NOEA02x:             
                    3723             ;---JB  BIT_SETMMI,OBUMAIN_WAVEACTIVE_OVER
099A 020000   F     3724             JMP     OBUMAIN_WAVEACTIVE_LOOP                                 ; ÖØÐÂµÈ´½ÓÊÕDSRCÊ¾
                             Ý    
099D                3725     OBUMAIN_WAVEACTIVE_OVER:                                                ; Î¢²¨¼¤»îÁ÷³Ì½áÊø 
                                  
099D C28C           3726             CLR     TR0             ;¹Ø±ÕT0
099F C2A9           3727             CLR     ET0             ;¹Ø±ÕT0Ê¹ÄÜ
09A1 C2AF           3728             CLR     EA              
09A3 120000   F     3729             CALL    _FUN_HDLC_CLOSECLR
                    3730     
                    3731             ;--- Çå³Flash ---
09A6 758372         3732             MOV     DPH,#CONST_FLASH_SYSINFOH
09A9 758200         3733             MOV     DPL,#CONST_FLASH_SYSINFOL
09AC 7B01           3734             MOV     R3,#1
09AE 120000   F     3735             CALL    _eraseflash     
                    3736             ;--- Èç¹û½»Ò×³É¹¦¾Í¼ÇÂ¼ÌìÏßID ---
09B1 30000D   F     3737             JNB     BIT_SetMMI,OBUMAIN_WAVEACTIVE_predeal   
                    3738             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
09B4 758372         3739             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
09B7 7582EC         3740             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
09BA 7F00     F     3741             MOV     R7,#XDATA_BeaconID
09BC 7B08           3742             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen
09BE 120000   F     3743             CALL    _wrflashXR
09C1                3744     OBUMAIN_WAVEACTIVE_predeal:     
09C1 120000   F     3745             CALL    OBUMain_CARDPreDeal_ReadSysInfo                         ;¼ò»¯°æÔ¤¶Á        
                                  
                    3746     
09C4                3747     OBUMAIN_WAVEACTIVE_display:
09C4 C285           3748             clr     PIN_ESAM_RST    
09C6 C284           3749             clr     Pin_522_RST
09C8 D2A4           3750             SETB    Pin_pwrdwn
09CA 120000   F     3751             CALL    _FUN_OBUMain_CardInfoDisplay                            ; ÏÔÊ¾¿¨ÐÅÏ¢    
                    3752             ;--- RC522ºÍÖ÷µ¥Æ¬»úÏÂµç() ---  
09CD                3753     OBUMAIN_WAVEACTIVE_END:
                    3754             ;-------ÖØÐÂ¿ªÊ¼Ç°ÑÓÊ±ÏÔÊ¾------------  
09CD 7FFA           3755             MOV     R7,#250
09CF 120000   F     3756             CALL    _FUN_LIB_DELAY  
09D2 7FFA           3757             MOV     R7,#250
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    63

09D4 120000   F     3758             CALL    _FUN_LIB_DELAY  
09D7 7FFA           3759             MOV     R7,#250
09D9 120000   F     3760             CALL    _FUN_LIB_DELAY  
09DC 7FFA           3761             MOV     R7,#250
09DE 120000   F     3762             CALL    _FUN_LIB_DELAY  
09E1 020000   F     3763             JMP     AP_start
09E4 80E7           3764             JMP     OBUMAIN_WAVEACTIVE_END
09E6 22             3765             RET     
                    3766     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////
                    3767     ;------------------------------------
                    3768     ;ÃèÊö:ÏµÍ³³õÊ¼»¯
                    3769     ;²ÎÊ:(ÎÞ)
                    3770     ;------------------------------------
09E7                3771     _FUN_OBUMAIN_INITSYS:   
                    3772             ;--- Çå¿ÕËùÓÐ¼Ä´æÆ÷ ---
09E7 E4             3773             CLR     A
09E8 75D000         3774             MOV     PSW,#CONST_WORKSTAION_0 
                    3775             ;ÉèÖÃµ±Ç°PSW²Ù×÷¹¤×÷Çø0
09EB C2D3           3776             CLR     RS0
09ED C2D4           3777             CLR     RS1     
09EF F5B8           3778             MOV     IP,A
                    3779                     
09F1 F587           3780             MOV     PCON,A
09F3 F598           3781             MOV     SCON,A
                    3782             
09F5 F58D           3783             MOV     TH1,A
09F7 F58B           3784             MOV     TL1,A
09F9 F58C           3785             MOV     TH0,A
09FB F58A           3786             MOV     TL0,A
09FD F5B8           3787             MOV     IP,A
                    3788             
09FF C200     F     3789             CLR     BIT_FIRSTTX                                             ; Ó²´®¿Ú·¢ËÍµÚÒ»¸ö×
                             Ö½Ú±ê¼Ç=0±íÊ¾»¹Ã»·¢ËÍµÚÒ»¸ö×Ö½Ú£¬=1±íÊ¾ÒÑ·¢ËÍ                        
0A01 C200     F     3790             CLR     BIT_CHANNELFLAG                                         ; = 1±íÊ¾µ±Ç°Ê¹ÓÃÐÅ
                             µÀ1,  =0 ±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ0
0A03 D200     F     3791             SETB    BIT_9600                                                ; =1µ±Ç°²¨ÌØÂÊÊÇ960
                             0;=0µ±Ç°²¨ÌØÂÊ²»ÊÇ9600               
0A05 C200     F     3792             CLR     BIT_T0T1                                                ; T0»¹ÊÇT1
0A07 D200     F     3793             SETB    BIT_ESAMICC                                             ; ÊÇÓÃ»§¿¨£¬»¹ÊÇESA
                             M¿¨
0A09 C200     F     3794             CLR     BIT_INSERTCARD                                          ; Î´²å¿¨
0A0B C200     F     3795             CLR     BIT_ISFRX                                               ; =0 ±íÊ¾´®¿ÚµÚÒ»¸ö
                             ×Ö½Ú½ÓÊÕ     =1 ±íÊ¾µÚÒ»¸ö×Ö½Ú²»½ÓÊÕ         
0A0D D200     F     3796             SETB    BIT_ISRXNB                                              ; =1 ±íÊ¾Î´ÊÕµ½¹·Ç¹
                             ã²¥µØÖ·      =0 ±íÊ¾ÒÑ¾­ÊÕµ½¹·Ç¹ã²¥µØÖ·      
0A0F C200     F     3797             CLR     BIT_SETMMI                                              ; =0 ±íÃ»ÓÐÊÕµ½¹Set
                             MMI,         =1 SetMMI       
0A11 D200     F     3798             SETB    BIT_ESAM                                                ; =1 ±íÊ¾ÓÐESAM =0 
                             ±íÊ¾Ã»ÓÐESAM¿¨       
0A13 C200     F     3799             CLR     BIT_PROF                                                ; Pro¿¨·¢ËÍÐòºÅ = 0
                              ±íÊ¾0A ;= 1 ±íÊ¾0B
0A15 C200     F     3800             CLR     BIT_proMF                                               ; =1 ±íÊ¾ÊÇpro¿¨£¬=
                             0±íÊ¾£¬MF¿¨
0A17 C200     F     3801             CLR     BIT_GetSecure                                           ; =1±íÊ¾ÊÕµ½GetSecu
                             reÖ¸Áî£¬=0±íÊ¾Ã»ÓÐÊÕµ½GetSecure
0A19 C200     F     3802             CLR     BIT_BST                                                 ; =1±íÊ¾ÊÕµ½¹bst,=0
                             ±íÊ¾Ã»ÓÐÊÕµ½¹bst             
                    3803             ;CLR    BIT_ContactIssue                                        ;·¢ÐÐ¿ªÊ¼±ê¼Ç   =0£
                             ¬Ã»ÓÐ½ÓÊÕ·¢ÐÐÐÅÏ¢£¬=1½ÓÊÕµ½·¢ÐÐÐÅÏ¢
0A1B C200     F     3804             CLR     BIT_gbICCInfo
                    3805             
0A1D C200     F     3806             CLR     BIT_HaveRecordCellID
0A1F C200     F     3807             CLR     BIT_privateInfo
0A21 C200     F     3808             CLR     BIT_CD                                                  ;=0±íÊ¾Î´±»²ð¶¯£¬=1
                              ±»²ð¶¯      
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    64

0A23 C200     F     3809             CLR     BIT_ACTIVECARD                                          ;=0 ·Ç²å¿¨¼¤»î;=1 ²
                             å¿¨¼¤»î
0A25 C200     F     3810             CLR     BIT_CDJH
0A27 C200     F     3811             CLR     BIT_ESAMOK
0A29 D200     F     3812             SETB    BIT_InsertEr
0A2B C200     F     3813             CLR     BIT_PPS 
0A2D C200     F     3814             CLR     BIT_ESAMErr
0A2F C200     F     3815             CLR     BIT_MMITIRMSTART
0A31 C200     F     3816             CLR     BIT_esamtran
0A33 C200     F     3817             CLR     BIT_Sel1001
0A35 C200     F     3818             CLR     BIT_USEROK
                    3819             
0A37 7800     F     3820             MOV     R0,#DATA_VARBAUDFULL
0A39 76B3           3821             MOV     @R0,#CONST_BAUD_FULL9600        
0A3B 7800     F     3822             MOV     R0,#DATA_VARBAUDHALF
0A3D 7658           3823             MOV     @R0,#CONST_BAUD_HALF9600
0A3F 7FA3           3824             MOV     R7,#CONST_BAUD_HAND9600                                 ;²¨ÌØÂÊ³õÖµ     
0A41 D200     F     3825             SETB    BIT_VERIFY                                              ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑé
                             Î»,=0²»Òª£¬=1Òª              
0A43 120000   F     3826             CALL    _FUN_SERIAL_INIT                                        ;´®¿ÚÏà¹Ø¼Ä´æÆ÷³õÊ¼
                             »¯   
0A46 7800     F     3827             MOV     R0,#XDATA_SOFTFIRSTSCANTIME
0A48 7410           3828             MOV     A,#CONST_SOFTFIRSTSCANTIME
                    3829                     ;MOVX   @R0,A
0A4A 758301         3830             MOV     DPH,#1 
0A4D 8882           3831             MOV     DPL,R0 
0A4F F0             3832             MOVX    @DPTR,A                                                 ;´®¿ÚµÚÒ»¸ö×Ö½Ú×î´ó
                             ËÑË÷Ê±¼ä     
0A50 7800     F     3833             MOV     R0,#XDATA_SETMMI
0A52 E4             3834             CLR     A
                    3835                     ;MOVX   @R0,A
0A53 758301         3836             MOV     DPH,#1 
0A56 8882           3837             MOV     DPL,R0 
0A58 F0             3838             MOVX    @DPTR,A 
0A59 7800     F     3839             MOV     R0,#XDATA_BSTNUM                                        ;½ÓÊÕµ½BSTµÄ¸öÊ
0A5B E4             3840             CLR     A
                    3841                     ;MOVX   @R0,A
0A5C 758301         3842             MOV     DPH,#1 
0A5F 8882           3843             MOV     DPL,R0 
0A61 F0             3844             MOVX    @DPTR,A 
0A62 7800     F     3845             MOV     R0,#xdata_setmminum                                     ;½ÓÊÕµ½BSTµÄ¸öÊ
0A64 E4             3846             CLR     A
                    3847                     ;MOVX   @R0,A
0A65 758301         3848             MOV     DPH,#1 
0A68 8882           3849             MOV     DPL,R0 
0A6A F0             3850             MOVX    @DPTR,A
0A6B E4             3851             CLR     A
0A6C 7800     F     3852             MOV     R0,#XDATA_VSTNUM
                    3853                     ;MOVX   @R0,A
0A6E 758301         3854             MOV     DPH,#1 
0A71 8882           3855             MOV     DPL,R0 
0A73 F0             3856             MOVX    @DPTR,A
                    3857             ;¿´ÖØ·¢ÓÃ
0A74 7800     F     3858             MOV     R0,#XDATA_NUM
0A76 7400           3859             MOV     A,#0
                    3860                     ;MOVX   @R0,A
0A78 758301         3861             MOV     DPH,#1 
0A7B 8882           3862             MOV     DPL,R0 
0A7D F0             3863             MOVX    @DPTR,A
                    3864             
0A7E 750000   F     3865             MOV     DATA_MFCOM,#0
                    3866             
0A81 22             3867             RET
                    3868     ;----------------------------------------------------------------------------------
                    3869     ;ÃèÊö:Ïà¹ØµÄÓ¦ÓÃ³õÊ¼»¯
                    3870     ;²ÎÊ:
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    65

                    3871     ;
                    3872     ;BIT_ACTIVE     ---     =1 Î¢²¨¼¤»îÊ±µÄÓ¦ÓÃ³õÊ¼»¯; =0 ²å¿¨¼¤»îÊ±µÄÓ¦ÓÃ³õÊ¼»¯ 
                    3873     ;                       =0 ESAM DF01 ÎÄ¼þ²»Ñ¡
                    3874     ;                       =1 ESAM DF01 ÎÄ¼þÒªÑ¡
                    3875     ;
                    3876     ;²½Öè:
                    3877     ;               read last card type
                    3878     ;                       |
                    3879     ;               init esma
                    3880     ;                       |
                    3881     ;               [if IsContact = contact] jmp init cpu contact   Else jmp init not contact
                    3882     ;                       |
                    3883     ;               init cpu contact - err - >jmp init not contact sec--err->ÏÔÊ¾ÎÞ¿¨²¢ÖÃ²å¿¨±ê
                             ¼ÇÎªÎÞ                                                                               
                    3884     ;               init not contact - err - >jmp init cpu contact sec--err->ÏÔÊ¾ÎÞ¿¨²¢ÖÃ²å¿¨±ê
                             ¼ÇÎªÎÞ
                    3885     ;                       |(ini ok)
                    3886     ;                       |
                    3887     ;               [if IsContact = Contact ]       -> pps(²»½Ó·µ»Ø)
                    3888     ;                       |
                    3889     ;               (change baud)
                    3890     ;                       |
                    3891     ;               Select DF01
                    3892     ;                       |
                    3893     ;               [if not mf] -> Select 1001
                    3894     ;----------------------------------------------------------------------------------
0A82                3895     _FUN_OBUMain_BASEINIT:
0A82 C200     F     3896             clr     BIT_INSERTCARD
0A84 C200     F     3897             CLR     BIT_BUFADDR
                    3898             ;¶ÁÈ¡   OBUID
0A86 90002F         3899             MOV     DPTR,#STR_SYS_OBUID
0A89 7F00     F     3900             MOV     R7,#DATA_OBUID
0A8B 120000   F     3901             CALL    _FUN_LIB_FLASHTODATA
                    3902             ;¶ÁÈ¡System Info ²ðÐ¶Î»(µÚ27¸ö×Ö½Ú)
                    3903             ;·ÅÔÚÕâÀï¶Á£¬ÖØÒªµÄÔ­ÒòÊÇ£¬ÉÏµçÊ±ÐèÑÓÊ±£¬ËùÒÔ¿ÉÒÔÊ¡Ê±¡£
0A8E 758372         3904             MOV     DPH,#CONST_FLASH_SYSINFOH
0A91 75821A         3905             MOV     DPL,#CONST_FLASH_SYSINFOL + 26
0A94 750700   F     3906             MOV     AR7,#XDATA_FIX
0A97 7B01           3907             MOV     R3,#1
0A99 120000   F     3908             CALL    _RDFlashXR      
                    3909             
0A9C 7900     F     3910             MOV     R1,#XDATA_FIX
                    3911                     ;MOVX   A,@R1
0A9E 758301         3912             MOV     DPH,#1
0AA1 8982           3913             MOV     DPL,R1
0AA3 E0             3914             MOVX    A,@DPTR
0AA4 540F           3915             ANL     A,#0FH
                    3916             
0AA6 6004           3917             JZ      OBUMain_BASEINIT_Tampered
0AA8 C200     F     3918             CLR     BIT_CD
0AAA 8002           3919             JMP     OBUMain_BASEINIT_TamperedOver
                    3920             
0AAC                3921     OBUMain_BASEINIT_Tampered:      
0AAC D200     F     3922             SETB    BIT_CD
0AAE                3923     OBUMain_BASEINIT_TamperedOver:
                    3924             ;¶ÁÈ¡ÉÏ»ØÌìÏßIDºÍunixtime 
0AAE 758372         3925             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
0AB1 7582EC         3926             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
0AB4 750700   F     3927             MOV     AR7,#XDATA_LastBeaconID
0AB7 7B08           3928             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen
0AB9 120000   F     3929             CALL    _RDFlashXR      
                    3930             ;--- ´Ó Flash ÖÐ¶ÁÈ¡ÉÏÒ»´Î²å¿¨ÀàÐÍ ---
                    3931             ;½Ó´¥¿¨ »¹ÊÇ ·Ç½Ó´¥¿¨
                    3932             ;CONST_FLASH_LASTCARDH
0ABC 758372         3933             MOV     DPH,#CONST_FLASH_LASTCARDH
0ABF 7582EB         3934             MOV     DPL,#CONST_FLASH_LASTCARDL
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    66

0AC2 750700   F     3935             MOV     AR7,#DATA_RXBUF
0AC5 7B01           3936             MOV     R3,#1
0AC7 120000   F     3937             CALL    _RDFlash
0ACA 7800     F     3938             MOV     R0,#DATA_RXBUF
0ACC E6             3939             MOV     A,@R0
0ACD A2E0           3940             MOV     C,ACC.0
0ACF 9200     F     3941             MOV     BIT_ISContact,C ;½Ó´¥¿¨=1£¬»¹ÊÇ·Ç½Ó´¥¿¨=0                       
0AD1 C200     F     3942             CLR     BIT_ISContact
0AD3                3943     OBUMain_BASEINIT_InitESAMCard:
0AD3 300000   F     3944             JNB     BIT_ESAM,OBUMain_BASEINIT_InitUserCard
                    3945             
0AD6                3946     OBUMain_BASEINIT_InitUserCard:
0AD6 200007   F     3947             JB      BIT_ISContact,OBUMain_BASEINIT_InitContact      ;
0AD9 8018           3948             JMP     OBUMain_BASEINIT_InitNContact                   ;       
0ADB                3949     OBUMain_BASEINIT_InitContactSEC:                                ; ³õÊ¼»¯·Ç½ÓÊ§°Üºó£¬×ªÏò¸´Î
                             »½Ó´¥¿¨
0ADB 807A           3950             jmp     OBUMain_BASEINIT_SelectDF01
0ADD 200077   F     3951             JB      BIT_ISContact,OBUMain_BASEINIT_SelectDF01       ; Èç¹ûÒÑ¾­¸´Î»¹£¬½Ó´¥¿¨£¬Ôò
                             ²»ÔÙ¸´Î»
0AE0                3952     OBUMain_BASEINIT_InitContact:                                   ; ³õÊ¼»¯½Ó´¥¿¨
                    3953             
                    3954             ;³õÊ¼»¯ÓÃ»§¿¨
0AE0 C284           3955             CLR     Pin_522_RST
0AE2 D200     F     3956             SETB    BIT_ESAMICC                                     ; =1  ¸´Î»½Ó´¥Ê½ÓÃ»§¿¨  ;= 
                             0  ¸´Î»ESAM¿¨
0AE4 120000   F     3957             CALL    _FUN_Contact_INIT
0AE7 EF             3958             MOV     A,R7
0AE8 7006           3959             JNZ     OBUMain_BASEINIT_InitNContactSEC
0AEA D200     F     3960             SETB    BIT_INSERTCARD                                  ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°
                             OBU²å¿¨;=0±íÊ¾µ±Ç°OBUÃ»²å¿¨; 
0AEC D200     F     3961             SETB    BIT_ISContact                                   ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç
0AEE 8067           3962             JMP     OBUMain_BASEINIT_PPS
0AF0                3963     OBUMain_BASEINIT_InitNContactSEC:                               ; ³õÊ¼»¯½ÓÊ§°Üºó£¬×ªÏò¸´Î»·
                             Ç½Ó´¥¿¨      
0AF0 300064   F     3964             JNB     BIT_ISContact,OBUMain_BASEINIT_SelectDF01       ; Èç¹ûÒÑ¾­¸´Î»¹£¬·Ç½Ó´¥¿¨£¬
                             Ôò²»ÔÙ¸´Î»
0AF3                3965     OBUMain_BASEINIT_InitNContact:                                  ; ³õÊ¼»¯·Ç½Ó´¥¿¨
                    3966             
0AF3 120000   F     3967             CALL    _FUN_NContact_Rc500Rst
0AF6 120000   F     3968             CALL    _FUN_NContact_Rc500Config
0AF9 120000   F     3969             CALL    _FUN_NContact_Rc500Request
0AFC EF             3970             MOV     A,R7
                    3971             ;---JNZ OBUMain_BASEINIT02_SelectDF01
0AFD 6016           3972             JZ      OBUMain_BASEINIT_Request
0AFF 20B311         3973             JB      PIN_card_exist,OBUMain_BASEINIT_Request01
0B02 120000   F     3974             CALL    _FUN_NContact_Rc500Rst
0B05 120000   F     3975             CALL    _FUN_NContact_Rc500Config
0B08 120000   F     3976             CALL    _FUN_NContact_Rc500Request
0B0B EF             3977             MOV     A,R7
0B0C 6007           3978             JZ      OBUMain_BASEINIT_Request
                    3979             ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
0B0E 7418           3980             MOV     A,#CONST_STATE_Base02Re
0B10 120000   F     3981             CALL    _FUN_OBUMAIN_ErrShow02
0B13                3982     OBUMain_BASEINIT_Request01:
0B13 8042           3983             JMP     OBUMain_BASEINIT_SelectDF01
0B15                3984     OBUMain_BASEINIT_Request:
0B15 120000   F     3985             CALL    _FUN_NContact_Rc500AntiColl
0B18 EF             3986             MOV     A,R7
0B19 703C           3987             JNZ     OBUMain_BASEINIT_SelectDF01
0B1B 120000   F     3988             CALL    _FUN_NContact_Rc500Select
0B1E EF             3989             MOV     A,R7
                    3990             
0B1F 7036           3991             JNZ     OBUMain_BASEINIT_SelectDF01     
                    3992             
0B21 C200     F     3993             CLR     BIT_ProMF                               ; Ä¬ÈÏÎªMF¿¨    
0B23 E500     F     3994             MOV     A,DATA_RXBUF
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    67

                    3995             ;08 20  
0B25 6420           3996             XRL     A,#20H
0B27 6006           3997             JZ      OBUMain_BASEINIT_ISPrO
0B29 E500     F     3998             MOV     A,DATA_RXBUF
0B2B 6428           3999             XRL     A,#28H
0B2D 7024           4000             JNZ     OBUMain_BASEINIT_InitNContactOVER               
0B2F                4001     OBUMain_BASEINIT_ISPrO: 
0B2F D200     F     4002             SETB    BIT_ProMF                               ; ÉèÖÃµ±Ç°ÎªPro¿¨±ê¼Ç           
0B31 120000   F     4003             CALL    _FUN_ProCard_Rats                       ; Èç¹ûµ±Ç°ÊÇpro¿¨£¬ÔòÔÙ×örat²Ù×÷
                    4004     
0B34 D200     F     4005             SETB    BIT_INSERTCARD                          ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°OBU²å¿¨;
                             =0±íÊ¾µ±Ç°OBUÃ»²å¿¨;         
0B36 C200     F     4006             CLR     BIT_ISContact                           ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç
0B38 7800     F     4007             MOV     R0,#DATA_RXBUF+1
0B3A E6             4008             MOV     A,@R0   
0B3B A2E4           4009             MOV     C,ACC.4
0B3D 5012           4010             JNC     OBUMain_BASEINIT_InitNSelDF01
                    4011             
0B3F 7800     F     4012             MOV     R0,#DATA_RXBUF+2                        ; 
0B41 E6             4013             MOV     A,@R0                                   ; 
0B42 A2E1           4014             MOV     C,ACC.1                                 ; 
0B44 500B           4015             JNC     OBUMain_BASEINIT_InitNSelDF01           ; 
0B46 A2E5           4016             MOV     C,ACC.5                                 ; 
0B48 5007           4017             JNC     OBUMain_BASEINIT_InitNSelDF01           ; 
                    4018                                                             ; 
0B4A 120000   F     4019             CALL    _FUN_Pro_PPS                            ; ·Ç½ÓPPS£¨²å¿¨»½ÐÑ£©
0B4D 120000   F     4020             CALL    _FUN_NContact_Rc500_PPS_Config          ; RC522 ¼Ä´æÆ÷
0B50 EF             4021             MOV     A,R7
                    4022     
0B51                4023     OBUMain_BASEINIT_InitNSelDF01:                          ;
0B51 7004           4024             JNZ     OBUMain_BASEINIT_SelectDF01
0B53                4025     OBUMain_BASEINIT_InitNContactOVER:
                    4026             ;~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~~~
                    4027             ;MOV    A,#120
                    4028             ;JMP    _FUN_TEST_DISPLAY
                    4029             ;~~~~~~~~~~~~~~~~~~~~~~~~~~
0B53 D200     F     4030             SETB    BIT_INSERTCARD                          ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°OBU²å¿¨;
                             =0±íÊ¾µ±Ç°OBUÃ»²å¿¨;         
0B55 C200     F     4031             CLR     BIT_ISContact                           ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç
0B57                4032     OBUMain_BASEINIT_PPS:   
0B57                4033     OBUMain_BASEINIT_SelectDF01:                            ;Ñ¡ÔñESAM¿¨DF01Ä¿Â¼     
0B57 120000   F     4034             CALL    _FUN_OBUMAIN_SELECTDF01
                    4035     
                    4036     
                    4037     
0B5A                4038     OBUMain_BASEINIT_OVER:
0B5A                4039     OBUMain_BASEINIT_OVER02:
0B5A D200     F     4040             setb    BIT_INITCard    
0B5C 22             4041             RET
                    4042     
                    4043     ;////////////////////////////////////////////////////////////   
0B5D                4044     _FUN_OBUMain_BASEINIT02:        
                    4045             
0B5D C200     F     4046             CLR     BIT_INSERTCARD
0B5F C200     F     4047             CLR     BIT_BUFADDR
                    4048             
                    4049             ;¶ÁÈ¡   OBUID
0B61 90002F         4050             MOV     DPTR,#STR_SYS_OBUID
0B64 7F00     F     4051             MOV     R7,#DATA_OBUID
0B66 120000   F     4052             CALL    _FUN_LIB_FLASHTODATA
                    4053             
                    4054             ;¶ÁÈ¡System Info ²ðÐ¶Î»(µÚ27¸ö×Ö½Ú)
                    4055             ;·ÅÔÚÕâÀï¶Á£¬ÖØÒªµÄÔ­ÒòÊÇ£¬ÉÏµçÊ±ÐèÑÓÊ±£¬ËùÒÔ¿ÉÒÔÊ¡Ê±¡£
0B69 758372         4056             MOV     DPH,#CONST_FLASH_SYSINFOH
0B6C 75821A         4057             MOV     DPL,#CONST_FLASH_SYSINFOL + 26
0B6F 750700   F     4058             MOV     AR7,#XDATA_FIX
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    68

0B72 7B01           4059             MOV     R3,#1
0B74 120000   F     4060             CALL    _RDFlashXR
                    4061             
0B77 7900     F     4062             MOV     R1,#XDATA_FIX
                    4063                     ;MOVX   A,@R1
0B79 758301         4064             MOV     DPH,#1
0B7C 8982           4065             MOV     DPL,R1
0B7E E0             4066             MOVX    A,@DPTR
0B7F 540F           4067             ANL     A,#0FH
                    4068             
0B81 6004           4069             JZ      OBUMain_BASEINIT02_Tampered
0B83 C200     F     4070             CLR     BIT_CD
0B85 8002           4071             JMP     OBUMain_BASEINIT02_TamperedOver
                    4072             
0B87                4073     OBUMain_BASEINIT02_Tampered:    
0B87 D200     F     4074             SETB    BIT_CD
0B89                4075     OBUMain_BASEINIT02_TamperedOver:
                    4076                     
                    4077             ;--- ´Ó Flash ÖÐ¶ÁÈ¡ÉÏÒ»´Î²å¿¨ÀàÐÍ ---
                    4078             ;½Ó´¥¿¨ »¹ÊÇ ·Ç½Ó´¥¿¨
0B89 758372         4079             MOV     DPH,#CONST_FLASH_LASTCARDH
0B8C 7582EB         4080             MOV     DPL,#CONST_FLASH_LASTCARDL
0B8F 750700   F     4081             MOV     AR7,#DATA_RXBUF
0B92 7B01           4082             MOV     R3,#1
0B94 120000   F     4083             CALL    _RDFlash
0B97 7800     F     4084             MOV     R0,#DATA_RXBUF
0B99 E6             4085             MOV     A,@R0
0B9A A2E0           4086             MOV     C,ACC.0
0B9C 9200     F     4087             MOV     BIT_ISContact,C ;½Ó´¥¿¨=1£¬»¹ÊÇ·Ç½Ó´¥¿¨=0
                    4088                             
                    4089             ;~~~~~~~~~µ÷ºÃ·Ç½Ó¿¨È¥µô~~~~~~~~~~~~~~
0B9E C200     F     4090             clr     BIT_ISContact   
0BA0                4091     OBUMain_BASEINIT02_InitESAMCard:
0BA0 300000   F     4092             JNB     BIT_ESAM,OBUMain_BASEINIT02_InitUserCard        
0BA3                4093     OBUMain_BASEINIT02_InitUserCard:
0BA3 20000B   F     4094             JB      BIT_ISContact,OBUMain_BASEINIT02_InitContact    ;
0BA6 801D           4095             JMP     OBUMain_BASEINIT02_InitNContact                 ;       
0BA8                4096     OBUMain_BASEINIT02_InitContactSEC:                              ; ³õÊ¼»¯·Ç½ÓÊ§°Üºó£¬×ªÏò¸´Î
                             »½Ó´¥¿¨
0BA8 020000   F     4097             jmp     OBUMain_BASEINIT02_SelectDF01
                    4098             ;---JB  BIT_ISContact,OBUMain_BASEINIT02_SelectDF01     ; Èç¹ûÒÑ¾­¸´Î»¹£¬½Ó´¥¿¨£¬Ôò
                             ²»ÔÙ¸´Î»
0BAB 300003   F     4099             JNB     BIT_ISContact,OBUMain_BASEINIT02_InitContact    ; Èç¹ûÒÑ¾­¸´Î»¹£¬½Ó´¥¿¨£¬Ôò
                             ²»ÔÙ¸´Î»
0BAE 020000   F     4100             JMP     OBUMain_BASEINIT02_SelectDF01
0BB1                4101     OBUMain_BASEINIT02_InitContact:                                 ; ³õÊ¼»¯½Ó´¥¿¨  
                    4102             ;³õÊ¼»¯ÓÃ»§¿¨
0BB1 C284           4103             CLR     Pin_522_RST
0BB3 D200     F     4104             SETB    BIT_ESAMICC                                     ; =1  ¸´Î»½Ó´¥Ê½ÓÃ»§¿¨  ;= 
                             0  ¸´Î»ESAM¿¨
0BB5 120000   F     4105             CALL    _FUN_Contact_INIT
0BB8 EF             4106             MOV     A,R7
0BB9 7007           4107             JNZ     OBUMain_BASEINIT02_InitNContactSEC 
0BBB D200     F     4108             SETB    BIT_INSERTCARD                                  ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°
                             OBU²å¿¨;=0±íÊ¾µ±Ç°OBUÃ»²å¿¨; 
0BBD D200     F     4109             SETB    BIT_ISContact                                   ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç
0BBF 020000   F     4110             JMP     OBUMain_BASEINIT02_PPS  
0BC2                4111     OBUMain_BASEINIT02_InitNContactSEC:                             ; ³õÊ¼»¯½ÓÊ§°Üºó£¬×ªÏò¸´Î»·
                             Ç½Ó´¥¿¨      
0BC2 30007C   F     4112             JNB     BIT_ISContact,OBUMain_BASEINIT02_SelectDF01     ; Èç¹ûÒÑ¾­¸´Î»¹£¬·Ç½Ó´¥¿¨£¬
                             Ôò²»ÔÙ¸´Î»
0BC5                4113     OBUMain_BASEINIT02_InitNContact:                                        ; ³õÊ¼»¯·Ç½Ó´¥¿¨
                    4114     
                    4115             ;---jb  PIN_card_exist,OBUMain_BASEINIT02_SelectDF01    
                    4116             ;ÏÈ·¢ËÍ 00a4000002 ²Ù×÷ÍêÓÃ»§¿¨ºóÔÙ·¢df01 ²¢½ÓÊÕ£¬¿´ÊÇ·ñ¿ÉÒÔÊÕµ½61+len
0BC5 900000   F     4117             MOV     DPTR,#STR_DSRC_SELDF
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    69

0BC8 7F00     F     4118             MOV     R7,#data_rxbuf
0BCA 120000   F     4119             CALL    _FUN_LIB_FLASHTODATA
                    4120     
0BCD C200     F     4121             clr     BIT_ESAMICC
0BCF 7F00     F     4122             MOV     R7,#data_rxbuf
0BD1 7D14           4123             MOV     R5,#CONST_SOFTBYTESP
0BD3 7B05           4124             MOV     R3,#5
0BD5 C200     F     4125             CLR     BIT_BUFADDR                                     ;=0£¬·¢ËÍµÄÊÇÄÚ´æÊ¾Ý£»=1£¬·
                             ¢ËÍµÄÊÇÍâ´æÊ¾Ý
0BD7 D200     F     4126             SETB    BIT_VERIFY                                      ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑéÎ»,=0²»Ò
                             ª£¬=1Òª                                              
0BD9 120000   F     4127             CALL    _FUN_SERIAL_TXSOFT      
                    4128     
0BDC 120000   F     4129             CALL    _FUN_NContact_Rc500Rst
                    4130     
0BDF 120000   F     4131             CALL    _FUN_NContact_Rc500Config
0BE2 120000   F     4132             CALL    _FUN_NContact_Rc500Request
0BE5 EF             4133             MOV     A,R7
                    4134             ;---JNZ OBUMain_BASEINIT02_SelectDF01
0BE6 6016           4135             JZ      OBUMain_BASEINIT02_Request
0BE8 20B311         4136             JB      PIN_card_exist,OBUMain_BASEINIT02_Request01
0BEB 120000   F     4137             CALL    _FUN_NContact_Rc500Rst
0BEE 120000   F     4138             CALL    _FUN_NContact_Rc500Config
0BF1 120000   F     4139             CALL    _FUN_NContact_Rc500Request
0BF4 EF             4140             MOV     A,R7
0BF5 6007           4141             JZ      OBUMain_BASEINIT02_Request
                    4142             ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
0BF7 7418           4143             MOV     A,#CONST_STATE_Base02Re
0BF9 120000   F     4144             CALL    _FUN_OBUMAIN_ErrShow02
0BFC                4145     OBUMain_BASEINIT02_Request01:
0BFC 8043           4146             JMP     OBUMain_BASEINIT02_SelectDF01
0BFE                4147     OBUMain_BASEINIT02_Request:
                    4148             
0BFE 120000   F     4149             CALL    _FUN_NContact_Rc500AntiColl
0C01 EF             4150             MOV     A,R7
0C02 703D           4151             JNZ     OBUMain_BASEINIT02_SelectDF01
0C04 120000   F     4152             CALL    _FUN_NContact_Rc500Select
0C07 EF             4153             MOV     A,R7
0C08 7037           4154             JNZ     OBUMain_BASEINIT02_SelectDF01
0C0A C200     F     4155             CLR     BIT_ProMF                               ; Ä¬ÈÏÎªMF¿¨    
0C0C E500     F     4156             MOV     A,DATA_RXBUF
0C0E 6420           4157             XRL     A,#20H
0C10 6006           4158             JZ      OBUMain_BASEINIT02_ISPrO
0C12 E500     F     4159             MOV     A,DATA_RXBUF
0C14 6428           4160             XRL     A,#28H
0C16 7025           4161             JNZ     OBUMain_BASEINIT02_InitNContactOVER             ; 
0C18                4162     OBUMain_BASEINIT02_ISPrO:                                       ; 
0C18 D200     F     4163             SETB    BIT_ProMF                               ; ÉèÖÃµ±Ç°ÎªPro¿¨±ê¼Ç           
0C1A 120000   F     4164             CALL    _FUN_ProCard_Rats                       ; Èç¹ûµ±Ç°ÊÇpro¿¨£¬ÔòÔÙ×örat²Ù×÷
0C1D EF             4165             MOV     A,R7
0C1E 7021           4166             JNZ     OBUMain_BASEINIT02_SelectDF01
                    4167             
0C20 D200     F     4168             SETB    BIT_INSERTCARD                          ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°OBU²å¿¨;
                             =0±íÊ¾µ±Ç°OBUÃ»²å¿¨;         
0C22 C200     F     4169             CLR     BIT_ISContact                           ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç        
                    4170     
0C24 7800     F     4171             MOV     R0,#DATA_RXBUF+1
0C26 E6             4172             MOV     A,@R0   
0C27 A2E4           4173             MOV     C,ACC.4
0C29 5012           4174             JNC     OBUMain_BASEINIT02_InitNContactOVER
                    4175             
0C2B 7800     F     4176             MOV     R0,#DATA_RXBUF+2
0C2D E6             4177             MOV     A,@R0
0C2E A2E1           4178             MOV     C,ACC.1
0C30 500B           4179             JNC     OBUMain_BASEINIT02_InitNContactOVER
0C32 A2E5           4180             MOV     C,ACC.5
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    70

0C34 5007           4181             JNC     OBUMain_BASEINIT02_InitNContactOVER     
                    4182             
0C36 120000   F     4183             CALL    _FUN_Pro_PPS                            ; ·Ç½ÓPPS£¨²å¿¨»½ÐÑ£©
0C39 120000   F     4184             CALL    _FUN_NContact_Rc500_PPS_Config          ; RC522 ¼Ä´æÆ÷
0C3C EF             4185             MOV     A,R7                                    ; 
0C3D                4186     OBUMain_BASEINIT02_InitNContactOVER:
0C3D D200     F     4187             SETB    BIT_INSERTCARD                          ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°OBU²å¿¨;
                             =0±íÊ¾µ±Ç°OBUÃ»²å¿¨;         
0C3F C200     F     4188             CLR     BIT_ISContact                           ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç                
0C41                4189     OBUMain_BASEINIT02_PPS:
0C41                4190     OBUMain_BASEINIT02_SelectDF01:                          ;Ñ¡ÔñESAM¿¨DF01Ä¿Â¼             
0C41 C200     F     4191             clr     BIT_ESAMOK      
                    4192             ;jnb    PIN_card_exist,OBUMain_BASEINIT02_SelectDF0102
0C43 200005   F     4193             jb      BIT_INSERTCARD,OBUMain_BASEINIT02_SelectDF0102
                    4194             ;jb     BIT_INSERTCARD,OBUMain_BASEINIT02_SelectDF0102
0C46 120000   F     4195             CALL    _FUN_OBUMAIN_SELECTDF01
0C49 8043           4196             jmp     OBUMain_BASEINIT02_OVER02       
0C4B                4197     OBUMain_BASEINIT02_SelectDF0102:        
                    4198             ;ÏÈ·¢ËÍ 00a4000002 ²Ù×÷ÍêÓÃ»§¿¨ºóÔÙ·¢df01 ²¢½ÓÊÕ£¬¿´ÊÇ·ñ¿ÉÒÔÊÕµ½61+len
0C4B 900000   F     4199             MOV     DPTR,#STR_DSRC_DF
0C4E 7F00     F     4200             MOV     R7,#data_rxbuf
0C50 120000   F     4201             CALL    _FUN_LIB_FLASHTODATA
                    4202             
0C53 C200     F     4203             CLR     BIT_ESAMICC
0C55 7F00     F     4204             MOV     R7,#data_rxbuf
0C57 7D14           4205             MOV     R5,#CONST_SOFTBYTESP
0C59 7B02           4206             MOV     R3,#2
0C5B C200     F     4207             CLR     BIT_BUFADDR                                     ;=0£¬·¢ËÍµÄÊÇÄÚ´æÊ¾Ý£»=1£¬·
                             ¢ËÍµÄÊÇÍâ´æÊ¾Ý
0C5D D200     F     4208             SETB    BIT_VERIFY                                      ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑéÎ»,=0²»Ò
                             ª£¬=1Òª                                              
0C5F 120000   F     4209             CALL    _FUN_SERIAL_TXSOFT
                    4210             
                    4211             ;---- ½ÓÊÕÊ¾Ý ----
0C62 C200     F     4212             CLR     BIT_ESAMICC
0C64 D200     F     4213             SETB    BIT_BUFADDR                     ;=0£¬·¢ËÍµÄÊÇÄÚ´æÊ¾Ý£»=1£¬·¢ËÍµÄÊÇÍâ´æÊ¾Ý
0C66 D200     F     4214             SETB    BIT_SERIALOVERTIMERX            ;;Èí´®¿ÚµÈ´½ÓÊÕÊÇ·ñÓÐÊ±¼ä,ÏÞÖÆ=0Ã»ÓÐÏÞÖÆ;=1
                             ÓÐÊ±¼äÏÞÖÆ
0C68 D200     F     4215             SETB    BIT_VERIFY                      ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑéÎ»,=0²»Òª£¬=1Òª      
0C6A 7800     F     4216             MOV     R0,#xdata_txbuf
0C6C E6             4217             MOV     A,@R0
0C6D FF             4218             MOV     R7,A
0C6E 7B02           4219             MOV     R3,#2   
0C70 120000   F     4220             CALL    _FUN_SERIAL_RXSOFT
0C73 EB             4221             MOV     A,R3
                    4222     ;CALL   _FUN_TEST_DISPLAY
0C74 6402           4223             XRL     A,#2            
0C76 700E           4224             JNZ     OBUMain_BASEINIT02_ESAMerrrr
                    4225             
0C78 7800     F     4226             MOV     R0,#xdata_txbuf
                    4227                     ;MOVX   A,@R0
0C7A 758301         4228             MOV     DPH,#1
0C7D 8882           4229             MOV     DPL,R0
0C7F E0             4230             MOVX    A,@DPTR
0C80 6461           4231             xrl     a,#61h
0C82 7002           4232             jnz     OBUMain_BASEINIT02_ESAMerrrr
0C84 8006           4233             jmp     OBUMain_BASEINIT02_ESAMRight    
0C86                4234     OBUMain_BASEINIT02_ESAMerrrr:           
0C86 300005   F     4235             JNB     BIT_ESAMErr,OBUMain_BASEINIT02_OVER02   
0C89 120000   F     4236             CALL    _FUN_LIB_ESAMErr
0C8C                4237     OBUMain_BASEINIT02_ESAMRight:
                    4238             
0C8C D200     F     4239             SETB    BIT_ESAMOK                      ;ÉèÖÃESAM²Ù×÷³É¹¦±ê¼Ç   
0C8E                4240     OBUMain_BASEINIT02_OVER02:      
0C8E D200     F     4241             SETB    BIT_INITCard    
0C90 22             4242             RET     
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    71

                    4243     ;------------------------------------------------------------------------------------------
                             -
                    4244     ;_FUN_OBUMain_CARDPreDeal (¸½ÊôÐò¶Î)
                    4245     ;¸½Êô: _FUN_OBUMAIN_MASTER
                    4246     ;ÃèÊö: ¿¨Æ¬Ô¤´¦Àí
                    4247     ;Á÷³Ì: XXX
                    4248     ;------------------------------------------------------------------------------------------
                             -
0C91                4249     _FUN_OBUMain_CARDPreDeal:               
                    4250             ;--- Çå³FlashÔ¤´¦ÀíÇø ---
                    4251             ;×¢£ºErase²»ÄÜ·ÅÔÚ_FUN_OBUMain_BASEINITÇ°£¬ÒòÎª¸´Î»ÓÃ»§¿¨Ç°Òª¶ÁFlash
0C91 758372         4252             MOV     DPH,#CONST_FLASH_SYSINFOH
0C94 758200         4253             MOV     DPL,#CONST_FLASH_SYSINFOL
0C97 7B01           4254             MOV     R3,#001H
0C99 120000   F     4255             CALL    _eraseflash     
0C9C                4256     OBUMain_CARDPreDeal_ReadSysInfo: ;¶ÁÏµÍ³ÐÅÏ¢ÎÄ¼þ
0C9C C200     F     4257             clr     BIT_USEROK
                    4258             ;--- ÓÃ»§¿¨²å¿¨Ô¤´¦Àí³ÌÐò ---
0C9E 200003   F     4259             JB      BIT_INSERTCARD,OBUMain_CARDPreDeal_USER
0CA1 020000   F     4260             JMP     OBUMain_CARDPreDeal_USEROver                            ;Ã»ÓÐ²å¿¨Ê±£¬½áÊøÔ¤
                             ´¦Àí£¬²¢ÏÔÊ¾¿¨Æ¬ÐÅÏ¢         
0CA4                4261     OBUMain_CARDPreDeal_USER:                                               ;ÓÃ»§¿¨Ô¤´¦Àí   
0CA4 200006   F     4262             JB      BIT_ISCONTACT,OBUMain_CARDPreDeal_PreDealCPUCard        ;µ±²å¿¨ÊÇ½Ó´¥Ê½¿¨Ê±
                             £¬Ôò×öCPU¿¨Ô¤´¦Àí
0CA7 200003   F     4263             JB      BIT_ProMF,OBUMain_CARDPreDeal_PreDealCPUCard            ;µ±²å¿¨ÊÇ·Ç½Ó£¬ÇÒÊÇ
                             pro¿¨Ê±£¬Ôò×öCPU¿¨Ô¤´¦Àí
0CAA 020000   F     4264             JMP     OBUMain_CARDPreDeal_PreDealMF                           ;µ±²å¿¨ÊÇ·Ç½Ó£¬ÊÇMF
                             ¿¨Ê±£¬Ôò×öMFÔ¤´¦Àí           
0CAD                4265     OBUMain_CARDPreDeal_PreDealCPUCard:                                     ;CPU¿¨Ô¤´¦Àí
0CAD                4266     OBUMain_CARDPreDeal_PPS:        
0CAD D200     F     4267             SETB    BIT_GETRESULT
0CAF D200     F     4268             SETB    BIT_ESAMICC
0CB1 7F00     F     4269             MOV     R7,#DATA_RXBUF
0CB3 7D00     F     4270             MOV     R5,#XDATA_TXBUF
0CB5 7B10           4271             MOV     R3,#10H
0CB7 7A01           4272             MOV     R2,#01H
0CB9 120000   F     4273             CALL    _FUN_CARDAPP_SelectFile
                    4274     
0CBC                4275     OBUMain_CARDPreDeal_Read0002:                                           ;¶Á0002ÎÄ¼þ
                    4276             ;¶Á 0002 ÎÄ¼þ
0CBC D200     F     4277             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0CBE D200     F     4278             SETB    BIT_GETRESULT    
                    4279                     
0CC0 7F00     F     4280             MOV     R7,#DATA_RXBUF                                          ;R7 ·¢ËÍç·³åÖ¸Õë(ÄÚ
                             ´æ)
0CC2 7D00     F     4281             MOV     R5,#XDATA_TXBUF         
0CC4 120000   F     4282             CALL    _FUN_CARDAPP_GetBalance 
0CC7 EF             4283             MOV     A,R7
                    4284     
0CC8 6003           4285             JZ      OBUMain_CARDPreDeal_Write0002
0CCA 020000   F     4286             JMP     OBUMain_CARDPreDeal_USEROver                    ;³ö´í£¬Ôò½áÊøÔ¤´¦Àí     
0CCD                4287     OBUMain_CARDPreDeal_Write0002:  
                    4288             ;½«ÖµCopyµ½#MoneyÄÚ´æÖÐÈ¥
0CCD 7B04           4289             MOV     R3,#4
0CCF 850501         4290             MOV     AR1,AR5
0CD2 7800     F     4291             MOV     R0,#MONEY
0CD4                4292     OBUMain_CARDPreDeal_CopyMoney:
                    4293                     ;MOVX   A,@R1
0CD4 758301         4294             MOV     DPH,#1
0CD7 8982           4295             MOV     DPL,R1
0CD9 E0             4296             MOVX    A,@DPTR
0CDA F6             4297             MOV     @R0,A
0CDB 08             4298             INC     R0
0CDC 09             4299             INC     R1
0CDD DBF5           4300             DJNZ    R3,OBUMain_CARDPreDeal_CopyMoney        
                    4301             ;Ð´0002µ½FLASH
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    72

0CDF 758372         4302             MOV     DPH,#CONST_FLASH_0002H
0CE2 758258         4303             MOV     DPL,#CONST_FLASH_0002L
0CE5 7F00     F     4304             MOV     R7,#XDATA_TXBUF
0CE7 7B04           4305             MOV     R3,#CONST_Flash_0002Len         
0CE9 120000   F     4306             CALL    _wrflashXR              
0CEC                4307     OBUMain_CARDPreDeal_Read0012: ;¶Á0012ÎÄ¼þ       
                    4308             ;¶Á0012ÎÄ¼þ
0CEC D200     F     4309             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0CEE D200     F     4310             SETB    BIT_GETRESULT                   
0CF0 7F00     F     4311             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
0CF2 7D00     F     4312             MOV     R5,#XDATA_TXBUF                 
0CF4 7C12           4313             MOV     R4,#012H                                                ;R4             ---
                                  ÎÄ¼þID
0CF6 7B28           4314             MOV     R3,#CONST_Flash_0012Len                                 ;R3             ---
                                  ³¤¶È
0CF8 7A00           4315             MOV     R2,#000H                                                ;R2             ---
                                  offset
0CFA 120000   F     4316             CALL    _FUN_CARDAPP_ReadBinary 
0CFD EF             4317             MOV     A,R7
                    4318             
0CFE 6003           4319             JZ      OBUMain_CARDPreDeal_Write0012
0D00 020000   F     4320             JMP     OBUMain_CARDPreDeal_USEROver                    ;³ö´í£¬Ôò½áÊøÔ¤´¦Àí
0D03                4321     OBUMain_CARDPreDeal_Write0012:
                    4322             ;Ð´0012µ½FLASH
0D03 758372         4323             MOV     DPH,#CONST_FLASH_0012H
0D06 75825C         4324             MOV     DPL,#CONST_FLASH_0012L
0D09 7F00     F     4325             MOV     R7,#XDATA_TXBUF
0D0B 7B28           4326             MOV     R3,#CONST_Flash_0012Len         
0D0D 120000   F     4327             CALL    _wrflashXR              
0D10                4328     OBUMain_CARDPreDeal_Read0015: ;¶Á0015ÎÄ¼þ       
0D10 D200     F     4329             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0D12 D200     F     4330             SETB    BIT_GETRESULT   
0D14 7F00     F     4331             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
0D16 7D00     F     4332             MOV     R5,#XDATA_TXBUF                 
0D18 7C15           4333             MOV     R4,#015H                                                ;R4             ---
                                  ÎÄ¼þID
0D1A 7B2B           4334             MOV     R3,#CONST_Flash_0015Len                                 ;R3             ---
                                  ³¤¶È
0D1C 7A00           4335             MOV     R2,#00H                                                 ;R2             ---
                                  offset
0D1E 120000   F     4336             CALL    _FUN_CARDAPP_ReadBinary 
0D21 EF             4337             MOV     A,R7
0D22 6003           4338             JZ      OBUMain_CARDPreDeal_Write0015
0D24 020000   F     4339             JMP     OBUMain_CARDPreDeal_USEROver
0D27                4340     OBUMain_CARDPreDeal_Write0015:
                    4341     
                    4342             ;Ð´0015µ½FLASH
0D27 758372         4343             MOV     DPH,#CONST_FLASH_0015H
0D2A 758284         4344             MOV     DPL,#CONST_FLASH_0015L
0D2D 7F00     F     4345             MOV     R7,#XDATA_TXBUF
0D2F 7B2B           4346             MOV     R3,#CONST_Flash_0015Len
0D31 120000   F     4347             CALL    _wrflashXR      
                    4348                     
0D34                4349     OBUMain_CARDPreDeal_Read0019: ;¶Á0019ÎÄ¼þ       
                    4350     ;////////////////////////////////////////////////////////////////////////////////
                    4351     ;B9 E3 B6 AB    ¹ã¶«
                    4352     ;1,00a40000021001
                    4353     ;1,00b0950008   
0D34 758372         4354             MOV     DPH,#CONST_FLASH_0015H
0D37 758284         4355             MOV     DPL,#CONST_FLASH_0015L
0D3A 7F00     F     4356             MOV     R7,#XDATA_Hold
0D3C 7B2B           4357             MOV     R3,#CONST_Flash_0015Len
0D3E 120000   F     4358             CALL    _rdflashxr      
                    4359             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    73

0D41 7800     F     4360             mov     r0,#XDATA_Hold
                    4361                     ;MOVX   A,@R0
0D43 758301         4362             MOV     DPH,#1
0D46 8882           4363             MOV     DPL,R0
0D48 E0             4364             MOVX    A,@DPTR
0D49 64B9           4365             xrl     a,#0b9h 
0D4B 7023           4366             jnz     OBUMain_CARDPreDeal_0019GB
                    4367             
0D4D 08             4368             INC     R0
                    4369                     ;MOVX   A,@R0
0D4E 758301         4370             MOV     DPH,#1
0D51 8882           4371             MOV     DPL,R0
0D53 E0             4372             MOVX    A,@DPTR
0D54 64E3           4373             xrl     a,#0E3h 
0D56 7018           4374             jnz     OBUMain_CARDPreDeal_0019GB
                    4375             
0D58 08             4376             INC     R0
                    4377                     ;MOVX   A,@R0
0D59 758301         4378             MOV     DPH,#1
0D5C 8882           4379             MOV     DPL,R0
0D5E E0             4380             MOVX    A,@DPTR
0D5F 64B6           4381             xrl     a,#0b6h 
0D61 700D           4382             jnz     OBUMain_CARDPreDeal_0019GB
                    4383             
0D63 08             4384             INC     R0
                    4385                     ;MOVX   A,@R0
0D64 758301         4386             MOV     DPH,#1
0D67 8882           4387             MOV     DPL,R0
0D69 E0             4388             MOVX    A,@DPTR
0D6A 64AB           4389             XRL     A,#0ABH
0D6C 7002           4390             JNZ     OBUMain_CARDPreDeal_0019GB      
0D6E 8026           4391             JMP     OBUMain_CARDPreDeal_0019GD
0D70                4392     OBUMain_CARDPreDeal_0019GB:;¹ú±ê
                    4393     ;               mov     a,#38
                    4394     ;               call    _fun_test_display
0D70 D200     F     4395             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0D72 D200     F     4396             SETB    BIT_GETRESULT   
0D74 7F00     F     4397             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
0D76 7D00     F     4398             MOV     R5,#XDATA_TXBUF                 
0D78 7C19           4399             MOV     R4,#19H                                                 ;R4             ---
                                  ÎÄ¼þID
0D7A 7A01           4400             mov     r2,#1
0D7C 7B2B           4401             MOV     R3,#CONST_Flash_0019GBLen                                       ;R3        
                                  ---     ³¤¶È
0D7E 120000   F     4402             CALL    _FUN_CARDAPP_ReadRecord         
0D81 EF             4403             MOV     A,R7
                    4404     
0D82 6003           4405             JZ      OBUMain_CARDPreDeal_Write0019GB
0D84 020000   F     4406             JMP     OBUMain_CARDPreDeal_USEROver
0D87                4407     OBUMain_CARDPreDeal_Write0019GB:        
                    4408             ;Ð´0019µ½FLASH
0D87 758372         4409             MOV     DPH,#CONST_FLASH_0019H
0D8A 7582AF         4410             MOV     DPL,#CONST_FLASH_0019L
0D8D 7F00     F     4411             MOV     R7,#XDATA_TXBUF
0D8F 7B2B           4412             MOV     R3,#CONST_Flash_0019GBLen               
0D91 120000   F     4413             CALL    _wrflashXR                      
0D94 8045           4414             JMP     OBUMain_CARDPreDeal_RecordCardType              
                    4415             
0D96                4416     OBUMain_CARDPreDeal_0019GD:;¹ã¶«
                    4417             ;       mov     a,#37
                    4418             ;       call    _fun_test_display
0D96 D200     F     4419             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0D98 D200     F     4420             SETB    BIT_GETRESULT   
0D9A 7F00     F     4421             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    74

0D9C 7D00     F     4422             MOV     R5,#XDATA_TXBUF                 
0D9E 7C19           4423             MOV     R4,#19H                                                 ;R4             ---
                                  ÎÄ¼þID
0DA0 7A02           4424             mov     r2,#2
0DA2 7B3C           4425             MOV     R3,#CONST_Flash_0019Len                                 ;R3             ---
                                  ³¤¶È
0DA4 120000   F     4426             CALL    _FUN_CARDAPP_ReadRecord         
0DA7 EF             4427             MOV     A,R7
                    4428             ;               call    _fun_test_display
0DA8 6003           4429             JZ      OBUMain_CARDPreDeal_Write0019gd
0DAA 020000   F     4430             JMP     OBUMain_CARDPreDeal_USEROver
0DAD                4431     OBUMain_CARDPreDeal_Write0019gd:        
                    4432             ;Ð´0019µ½FLASH
0DAD 758372         4433             MOV     DPH,#CONST_FLASH_0019H
0DB0 7582AF         4434             MOV     DPL,#CONST_FLASH_0019L
0DB3 7F00     F     4435             MOV     R7,#XDATA_TXBUF
0DB5 7B3C           4436             MOV     R3,#CONST_Flash_0019Len         
0DB7 120000   F     4437             CALL    _wrflashXR                      
0DBA 801F           4438             JMP     OBUMain_CARDPreDeal_RecordCardType
                    4439             
                    4440     ;//////////////////////////////////////////////////////////////////////////////////
0DBC                4441     OBUMain_CARDPreDeal_PreDealMF:                                          ;MF¿¨²å¿¨Ô¤´¦Àí    
                                  
0DBC 801D           4442             JMP     OBUMain_CARDPreDeal_RecordCardType
0DBE                4443     OBUMain_CARDPreDeal_ReadBlock01: ;¶Á01¿é
0DBE 900000   F     4444             MOV     DPTR,#STR_ReadBlock01
0DC1 7F00     F     4445             MOV     R7,#DATA_RXBUF
0DC3 120000   F     4446             CALL    _FUN_LIB_FLASHTODATA
                    4447                     
0DC6 D200     F     4448             SETB    BIT_ESAMICC             
0DC8 7F00     F     4449             MOV     R7,#DATA_RXBUF
0DCA 7D00     F     4450             MOV     R5,#XDATA_TXBUF         
0DCC 120000   F     4451             CALL    _FUN_CARDAPP_CardChannel
0DCF 7800     F     4452             MOV     R0,#XDATA_TXBUF + 1
                    4453                     ;MOVX   A,@R0
0DD1 758301         4454             MOV     DPH,#1
0DD4 8882           4455             MOV     DPL,R0
0DD6 E0             4456             MOVX    A,@DPTR
0DD7 6002           4457             JZ      OBUMain_CARDPreDeal_ReadBlock0101                       ;³ö´í£¬Ôò½áÊøÔ¤´¦Àí
                                  
0DD9 8055           4458             JMP     OBUMain_CARDPreDeal_USEROver
0DDB                4459     OBUMain_CARDPreDeal_ReadBlock0101:
0DDB                4460     OBUMain_CARDPreDeal_ReadBlock04: ;¶Á04¿é
0DDB                4461     OBUMain_CARDPreDeal_ReadBlock10: ;¶Á04¿é
0DDB                4462     OBUMain_CARDPreDeal_RecordCardType:;¼ÇÂ¼¿¨Æ¬ÐÅÏ¢
0DDB D200     F     4463             setb    BIT_USEROK
                    4464             
                    4465             ;--- ¼ÇÂ¼¿¨Æ¬ÀàÐÍ ---
0DDD 7800     F     4466             MOV     R0,#XDATA_TXBUF
0DDF E4             4467             CLR     A
0DE0 A200     F     4468             MOV     C,BIT_ISContact
0DE2 92E0           4469             MOV     ACC.0,C
                    4470             ;2013-09-18 
0DE4 A200     F     4471             mov     c,BIT_ProMF
0DE6 92E1           4472             mov     acc.1,c 
0DE8 A200     F     4473             mov     c,BIT_INSERTCARD
0DEA 92E2           4474             mov     acc.2,c
                    4475                     ;MOVX   @R0,A
0DEC 758301         4476             MOV     DPH,#1 
0DEF 8882           4477             MOV     DPL,R0 
0DF1 F0             4478             MOVX    @DPTR,A 
                    4479             
                    4480             ;Ð´¿¨Æ¬ÐÅÏ¢µ½ Flash ÖÐÈ¥
0DF2 758372         4481             MOV     DPH,#CONST_FLASH_LASTCARDH
0DF5 7582EB         4482             MOV     DPL,#CONST_FLASH_LASTCARDL
0DF8 7F00     F     4483             MOV     R7,#XDATA_TXBUF
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    75

0DFA 7B01           4484             MOV     R3,#CONST_Flash_CardTypeLEN             
0DFC 120000   F     4485             CALL    _wrflashXR
                    4486             
                    4487             ;Èç¹ûESAMÃ»ÓÐÔ¤´¦Àí³É¹¦£¬Ò»Ñù²»¿ÉÒÔÖÃÔ¤´¦Àí³É¹¦±ê¼Ç
0DFF 30002E   F     4488             JNB     BIT_ESAMOK,OBUMain_CARDPreDeal_USEROver
                    4489             
                    4490             ;--- Ð´ÈëÔ¤´¦Àí³É¹¦±ê¼Ç --- 
0E02 7800     F     4491             MOV     R0,#XDATA_TXBUF
0E04 7488           4492             MOV     A,#CONST_SYS_PREFlag
                    4493                     ;MOVX   @R0,A
0E06 758301         4494             MOV     DPH,#1 
0E09 8882           4495             MOV     DPL,R0 
0E0B F0             4496             MOVX    @DPTR,A
                    4497             
0E0C 758372         4498             MOV     DPH,#CONST_FALSH_PREFlagH
0E0F 7582F4         4499             MOV     DPL,#CONST_FALSH_PREFlagL
0E12 7F00     F     4500             MOV     R7,#XDATA_TXBUF
0E14 7B01           4501             MOV     R3,#CONST_FALSH_PREFlagLen
0E16 120000   F     4502             CALL    _wrflashXR
                    4503             
0E19 7800     F     4504             MOV     R0,#XDATA_TXBUF
0E1B 74AA           4505             MOV     A,#CONST_SYS_AA
                    4506                     ;MOVX   @R0,A
0E1D 758301         4507             MOV     DPH,#1 
0E20 8882           4508             MOV     DPL,R0 
0E22 F0             4509             MOVX    @DPTR,A
                    4510             
0E23 758372         4511             MOV     DPH,#CONST_FALSH_PREFlag02H
0E26 7582F5         4512             MOV     DPL,#CONST_FALSH_PREFlag02L
0E29 7F00     F     4513             MOV     R7,#XDATA_TXBUF
0E2B 7B01           4514             MOV     R3,#1
0E2D 120000   F     4515             CALL    _wrflashXR      
0E30                4516     OBUMain_CARDPreDeal_USEROver:                                   ;ÓÃ»§¿¨Æ¬Ô¤´¦ÀíÍê³É     
0E30 120000   F     4517             CALL    _fun_OBUMAIN_bdcb
                    4518             ;--- ESAM ¿¨²å¿¨Ô¤´¦Àí³ÌÐò ---
0E33 30005F   F     4519             JNB     BIT_ESAM,OBUMain_CARDPreDeal_ESAMPreDealOver            ;µ±ESAM¿¨²»´æÔÚÊ±£¬
                             Ôò²»¶Ásys infoÎÄ¼þ   
0E36 30005C   F     4520             JNB     BIT_ESAMOK,OBUMain_CARDPreDeal_ESAMPreDealOver          ;µ±ESAM¿¨¸´Î»²»³É¹¦
                             Ê±£¬Ôò²»¶Ásys infoÎÄ¼þ               
0E39 C200     F     4521             CLR     BIT_ESAMOK      
                    4522             ;Ñ¡Ôñ 3F00 ÎÄ¼þ
0E3B C200     F     4523             CLR     BIT_ESAMICC
0E3D C200     F     4524             CLR     BIT_GETRESULT
0E3F 7F00     F     4525             MOV     R7,#DATA_RXBUF
0E41 7D00     F     4526             MOV     R5,#XDATA_TXBUF
0E43 7B3F           4527             MOV     R3,#03FH
0E45 7A00           4528             MOV     R2,#000H
0E47 120000   F     4529             CALL    _FUN_CARDAPP_SelectFile
0E4A EF             4530             MOV     A,R7
0E4B 6006           4531             JZ      OBUMain_CARDPreDeal_Select3F00R
0E4D 300003   F     4532             JNB     BIT_ESAMErr,OBUMain_CARDPreDeal_Select3F00R
0E50 120000   F     4533             CALL    _FUN_LIB_ESAMErr        
0E53                4534     OBUMain_CARDPreDeal_Select3F00R:        
                    4535             ;¶ÁÏµÍ³ÐÅÏ¢ÎÄ¼þ
0E53 D200     F     4536             SETB    BIT_GETRESULT
0E55 C200     F     4537             CLR     BIT_ESAMICC
0E57 7F00     F     4538             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
0E59 7D00     F     4539             MOV     R5,#XDATA_TXBUF 
0E5B 7C01           4540             MOV     R4,#01H                                                 ;R4             ---
                                  ÎÄ¼þID
0E5D 7B58           4541             MOV     R3,#CONST_Flash_SysinfoLen                              ;R3             ---
                                  ³¤¶È
0E5F 7A00           4542             MOV     R2,#00H                                                 ;R2             ---
                                  Offset
0E61 120000   F     4543             CALL    _FUN_CARDAPP_ReadBinary 
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    76

0E64 EF             4544             MOV     A,R7
                    4545             
0E65 6008           4546             JZ      OBUMain_CARDPreDeal_WriteSysInfo
0E67 300003   F     4547             JNB     BIT_ESAMErr,OBUMain_BASEINIT_ESAMSysInfoERR
0E6A 120000   F     4548             CALL    _FUN_LIB_ESAMErr
0E6D                4549     OBUMain_BASEINIT_ESAMSysInfoERR:
0E6D 8026           4550             JMP     OBUMain_CARDPreDeal_ESAMPreDealOver
0E6F                4551     OBUMain_CARDPreDeal_WriteSysInfo:       
0E6F D200     F     4552             SETB    BIT_ESAMOK      
                    4553             ; Ð´ Sysinfo µ½ FLASH
0E71 758372         4554             MOV     DPH,#CONST_FLASH_SYSINFOH
0E74 758200         4555             MOV     DPL,#CONST_FLASH_SYSINFOL
0E77 7F00     F     4556             MOV     R7,#XDATA_TXBUF
0E79 7B58           4557             MOV     R3,#CONST_Flash_SysinfoLen
0E7B 120000   F     4558             CALL    _wrflashXR
                    4559             
0E7E 7800     F     4560             MOV     R0,#XDATA_TXBUF
0E80 74AA           4561             MOV     A,#CONST_SYS_AA
                    4562                     ;MOVX   @R0,A
0E82 758301         4563             MOV     DPH,#1 
0E85 8882           4564             MOV     DPL,R0 
0E87 F0             4565             MOVX    @DPTR,A
                    4566             
0E88 758372         4567             MOV     DPH,#CONST_FALSH_PREFlag03H
0E8B 7582F6         4568             MOV     DPL,#CONST_FALSH_PREFlag03L
0E8E 7F00     F     4569             MOV     R7,#XDATA_TXBUF
0E90 7B01           4570             MOV     R3,#1
0E92 120000   F     4571             CALL    _wrflashXR      
0E95                4572     OBUMain_CARDPreDeal_ESAMPreDealOver:    
                    4573             ;¸üÐÂÓëÔ¤¶ÁÏà¹ØµÄ±ê¼Ç¡£
                    4574             ;¶ÁÈ¡System Info ²ðÐ¶Î»(µÚ27¸ö×Ö½Ú)¡£
                    4575             ;·ÅÔÚÕâÀï¶Á£¬ÖØÒªµÄÔ­ÒòÊÇ£¬ÉÏµçÊ±ÐèÑÓÊ±£¬ËùÒÔ¿ÉÒÔÊ¡Ê±¡£
0E95 758372         4576             MOV     DPH,#CONST_FLASH_SYSINFOH
0E98 75821A         4577             MOV     DPL,#CONST_FLASH_SYSINFOL + 26
0E9B 750700   F     4578             MOV     AR7,#XDATA_FIX
0E9E 7B01           4579             MOV     R3,#1
0EA0 120000   F     4580             CALL    _RDFlashXR
                    4581             
0EA3 7900     F     4582             MOV     R1,#XDATA_FIX
                    4583                     ;MOVX   A,@R1
0EA5 758301         4584             MOV     DPH,#1
0EA8 8982           4585             MOV     DPL,R1
0EAA E0             4586             MOVX    A,@DPTR
0EAB 540F           4587             ANL     A,#0FH
                    4588             
0EAD 6004           4589             JZ      OBUMain_CARDPreDeal_Tampered
0EAF C200     F     4590             CLR     BIT_CD
0EB1 8002           4591             JMP     OBUMain_CARDPreDeal_TamperedOver
0EB3                4592     OBUMain_CARDPreDeal_Tampered:
0EB3 D200     F     4593             SETB    BIT_CD
0EB5                4594     OBUMain_CARDPreDeal_TamperedOver:
0EB5                4595     OBUMain_CARDPreDeal_Over:
0EB5 22             4596             RET     
                    4597     ;------------------------------------
                    4598     ;ÃèÊö:¿¨ÐÅÏ¢ÏÔÊ¾
                    4599     ;²ÎÊ:
                    4600     ;DATA_CARDTYPE  ---     22      ÏÔÊ¾Óà¶î
                    4601     ;                       23      ÏÔÊ¾Í¨ÐÐ¿¨
                    4602     ;                       XX      ÏÔÊ¾´í¿¨
                    4603     ;------------------------------------
0EB6                4604     _FUN_OBUMain_CardInfoDisplay:
0EB6 120000   F     4605             CALL    _Func_LCD_INIT
0EB9                4606     OBUMain_CardInfoDisplay_BDQLLOOP:;±È¶ÔÈ«Áã      
0EB9                4607     OBUMain_CardInfoDisplay_BDCP:;±È¶Ô³µÅÆ  
0EB9                4608     OBUMain_CardInfoDisplay_BDCPLOOP:;±È¶Ô³µÅÆÑ­»·  
0EB9                4609     OBUMain_CardInfoDisplay_cpbf:;ÏÔÊ¾³µÅÆ×Ó²»·û
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    77

                    4610             
0EB9 300019   F     4611             JNB     BIT_CD,OBUMain_CardInfoDisplay_Start                    ;Èç¹û²»ÊÇÊ§Ð§£¬ÔòÌø
                             ¹
0EBC 300016   F     4612             JNB     BIT_ACTIVECARD,OBUMain_CardInfoDisplay_Start            ;Èç¹û²»ÊÇ²å¿¨£¬ÔòÌø
                             ¹
                    4613             
0EBF C2C5           4614             CLR     Pin_red                                                 ;2010-04-21
                    4615             ;ÏÔÊ¾²ð¶¯±ê¼Ç
0EC1 7F02           4616             MOV     R7,#00000010B
0EC3 120000   F     4617             CALL    _FUN_LCD_ICON
                    4618             
                    4619             ;--- ÏÔÊ¾ ---
0EC6 7F00     F     4620             MOV     R7,#DATA_RXBUF
0EC8 900000   F     4621             MOV     DPTR,#STR_UNFIX
0ECB 120000   F     4622             CALL    _FUN_LCD_DisplayExChina 
0ECE 7FFA           4623             MOV     R7,#250
0ED0 120000   F     4624             CALL    _FUN_LIB_DELAY                                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµç
                             Ñ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬
0ED3 D2C5           4625             SETB    Pin_red                                         ;2010-04-21
                    4626     ;--------------------------------------------------------       
0ED5                4627     OBUMain_CardInfoDisplay_Start:
0ED5 200019   F     4628             JB      BIT_INSERTCARD,OBUMain_CardInfoDisplay_CardInfo 
0ED8                4629     OBUMain_CardInfoDisplay_NOCardInfo:                                             ;Ã»¿¨ÐÅÏ¢´¦
                             Àí   
0ED8                4630     OBUMain_CardInfoDisplay_CKOver: 
0ED8 C284           4631             CLR     Pin_522_RST
0EDA C2C5           4632             CLR     PIN_RED
                    4633             ;+++ SETB       PIN_GRE 
                    4634             ;--- ÏÔÊ¾ ---
0EDC 7F00     F     4635             MOV     R7,#DATA_RXBUF
0EDE 900000   F     4636             MOV     DPTR,#STR_NOCARD
0EE1 120000   F     4637             CALL    _FUN_LCD_DisplayExChina
0EE4 300007   F     4638             JNB     BIT_SETMMI,OBUMain_CardInfoDisplay_NOCardSetmmiOV       
0EE7 7F64           4639             MOV     R7,#100
0EE9 120000   F     4640             CALL    _FUN_LIB_BEEP;ÏìÁå      
0EEC D2C5           4641             SETB    PIN_RED         
0EEE                4642     OBUMain_CardInfoDisplay_NOCardSetmmiOV:         
0EEE 020000   F     4643             JMP     OBUMain_CardInfoDisplay_Over    
0EF1                4644     OBUMain_CardInfoDisplay_CardInfo:;ÓÐ¿¨ÐÅÏ¢´¦Àí  
0EF1 200007   F     4645             JB      BIT_ISContact,OBUMain_CardInfoDisplay_GETCPUINFO                ; µ±Ç°ÊÇ½Ó´
                             ¥¿¨Ê±£¬È¡CPU¿¨ÐÅÏ¢£¬²¢ÏÔÊ¾
0EF4 200004   F     4646             JB      BIT_PROMF,OBUMain_CardInfoDisplay_GETCPUINFO                    ; µ±Ç°ÊÇPRO
                             ¿¨Ê±£¬È¡CPU¿¨ÐÅÏ¢£¬²¢ÏÔÊ¾
0EF7 7417           4647             MOV     A,#CONST_CARD_PASS                                              ; µ±Ç°ÊÇMF¿
                             ¨Ê±£¬ÔòÏÔÊ¾'Í¨ÐÐ¿¨'
0EF9 8015           4648             JMP     OBUMain_CardInfoDisplay_Info
0EFB                4649     OBUMain_CardInfoDisplay_GETCPUINFO:                                             ; È¡CPU¿¨ÐÅ
                             Ï¢   
                    4650             
                    4651             ;Ñ¡Ä¿Â¼
                    4652     ;       clr     BIT_GETRESULT
                    4653     ;       SETB    BIT_ESAMICC     
                    4654     ;       MOV     R7,#DATA_RXBUF
                    4655     ;       MOV     R5,#XDATA_TXBUF
                    4656     ;       MOV     R3,#10H
                    4657     ;       MOV     R2,#01H
                    4658     ;;      CALL    _FUN_CARDAPP_SelectFile
                    4659     ;       MOV     A,R3    
                    4660     ;       XRL     A,#2    
                    4661     ;       JNZ     OBUMain_CardInfoDisplay_NOCardInfo                              ;Èç¹ûÑ¡Ä¿Â¼
                             ³ö´í£¬ÔòÏÔÊ¾ÎÞ¿¨
                    4662             ;½»Ò×³É¹¦ÏÔÊ¾¼ÇÕË¿¨»òÓà¶î
                    4663             ;½»Ò×³É¹¦½»Ò×Ê§°Ü
                    4664     ;       MOV     R0,#XDATA_SETMMI
                    4665     ;               ;MOVX   A,@R0
                    4666     
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    78

                    4667     ;       JZ      OBUMain_CardInfoDisplay_InfoS
                    4668     ;       JMP     OBUMain_CardInfoDisplay_TradeErr
                    4669     ;OBUMain_CardInfoDisplay_InfoS:
                    4670             
                    4671             ;¶Á0015ÎÄ¼þÖÐµÚ9¸ö×Ö½Ú[ ¿¨ÀàÐÍ ]
0EFB 758372         4672             MOV     DPH,#CONST_FLASH_0015H
0EFE 75828C         4673             MOV     DPL,#CONST_FLASH_0015L + 8
0F01 7B01           4674             MOV     R3,#1                                                           ;0015ÎÄ¼þ³¤
                             ¶È   
0F03 7F00     F     4675             MOV     R7,#XDATA_TXBUF
0F05 120000   F     4676             CALL    _RDFlashXR                                                      ;¶ÁFalshº¯Ê
                             Ö»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²»push r1     
0F08 7800     F     4677             MOV     R0,#XDATA_TXBUF
                    4678                     ;MOVX   A,@R0
0F0A 758301         4679             MOV     DPH,#1
0F0D 8882           4680             MOV     DPL,R0
0F0F E0             4681             MOVX    A,@DPTR
                    4682             
0F10                4683     OBUMain_CardInfoDisplay_Info:                                                   ;ÏÔÊ¾¿¨ÐÅÏ¢
                                  
0F10 B41666         4684             CJNE    A,#CONST_CARD_CONSUME,OBUMain_CardInfoDisplay_PassCard
0F13                4685     OBUMain_CardInfoDisplay_CashCard:                                               ;´¢Öµ¿¨
                    4686             
                    4687     ;       CLR     A
                    4688     ;       MOV     R0,#MONEY
                    4689     ;       MOV     @R0,A
                    4690     ;       INC     R0
                    4691     ;       MOV     @R0,A
                    4692     ;       INC     R0
                    4693     ;       MOV     @R0,A
                    4694     ;       INC     R0
                    4695     ;       MOV     @R0,A
                    4696     ;       SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
                    4697     ;       SETB    BIT_GETRESULT
                    4698     ;       MOV     R7,#DATA_RXBUF                                          ;R7 ·¢ËÍç·³åÖ¸Õë(ÄÚ
                             ´æ)
                    4699     ;       MOV     R5,#XDATA_TXBUF
                    4700     ;       CALL    _FUN_CARDAPP_GetBalance
                    4701     ;       MOV     A,R7
                    4702     ;       JNZ     OBUMain_CardInfoDisplay_Money
                    4703             
                    4704             
                    4705             
                    4706             ;¶ÁÇ®°ü
0F13 758372         4707             MOV     DPH,#CONST_FLASH_0002H
0F16 758258         4708             MOV     DPL,#CONST_FLASH_0002L
0F19 7B04           4709             MOV     R3,#4                                                           ;0015ÎÄ¼þ³¤
                             ¶È   
0F1B 7F00     F     4710             MOV     R7,#XDATA_TXBUF
0F1D 120000   F     4711             CALL    _RDFlashXR                                                      ;¶ÁFalshº¯Ê
                             Ö»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²»push r1     
                    4712             
                    4713             ;ÅÐ¶ÏÊÇ·ñ¶¼ÊÇ0xFF
0F20 7800     F     4714             MOV     R0,#XDATA_TXBUF
                    4715                     ;MOVX   A,@R0
0F22 758301         4716             MOV     DPH,#1
0F25 8882           4717             MOV     DPL,R0
0F27 E0             4718             MOVX    A,@DPTR
0F28 64FF           4719             xrl     a,#0ffh
0F2A 7023           4720             jnz     OBUMain_CardInfoDisplay_CashCardcpv
                    4721             
0F2C 08             4722             INC     R0
                    4723                     ;MOVX   A,@R0
0F2D 758301         4724             MOV     DPH,#1
0F30 8882           4725             MOV     DPL,R0
0F32 E0             4726             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    79

0F33 64FF           4727             xrl     a,#0ffh
0F35 7018           4728             jnz     OBUMain_CardInfoDisplay_CashCardcpv
                    4729             
0F37 08             4730             INC     R0
                    4731                     ;MOVX   A,@R0
0F38 758301         4732             MOV     DPH,#1
0F3B 8882           4733             MOV     DPL,R0
0F3D E0             4734             MOVX    A,@DPTR
0F3E 64FF           4735             xrl     a,#0ffh
0F40 700D           4736             jnz     OBUMain_CardInfoDisplay_CashCardcpv     
                    4737     
0F42 08             4738             INC     R0
                    4739                     ;MOVX   A,@R0
0F43 758301         4740             MOV     DPH,#1
0F46 8882           4741             MOV     DPL,R0
0F48 E0             4742             MOVX    A,@DPTR
0F49 64FF           4743             xrl     a,#0ffh
0F4B 7002           4744             jnz     OBUMain_CardInfoDisplay_CashCardcpv     
0F4D 8044           4745             jmp     OBUMain_CardInfoDisplay_Other   
0F4F                4746     OBUMain_CardInfoDisplay_CashCardcpv:    
                    4747             ;½«Öµ Copy µ½ #Money ÄÚ´æÖÐÈ¥
0F4F 7B04           4748             MOV     R3,#4
0F51 7900     F     4749             MOV     R1,#XDATA_TXBUF
0F53 7800     F     4750             MOV     R0,#MONEY
0F55                4751     CARDACTIVE_CashCard_CopyMoney:
                    4752                     ;MOVX   A,@R1
0F55 758301         4753             MOV     DPH,#1
0F58 8982           4754             MOV     DPL,R1
0F5A E0             4755             MOVX    A,@DPTR
0F5B F6             4756             MOV     @R0,A
0F5C 08             4757             INC     R0
0F5D 09             4758             INC     R1
0F5E DBF5           4759             DJNZ    R3,CARDACTIVE_CashCard_CopyMoney
                    4760             
0F60                4761     OBUMain_CardInfoDisplay_Money:
                    4762             
0F60 C284           4763             CLR     Pin_522_RST
0F62 C2C4           4764             CLR     PIN_GRE
0F64 D2C5           4765             SETB    PIN_RED
                    4766             
                    4767             ;--- ÏÔÊ¾ Óà¶î »ò Í¨ÐÐ¿¨ ---
0F66 7F04           4768             MOV     R7,#00000100B
0F68 120000   F     4769             CALL    _FUN_LCD_ICON
                    4770             
0F6B 7F00     F     4771             MOV     R7,#DATA_RXBUF
0F6D 120000   F     4772             LCall   _dspmoney                                               ;ÏÔÊ¾ÐÂÓà¶î     
0F70 120000   F     4773             CALL    _FUN_OBUMain_BEEP
                    4774             ;+++ SETB       PIN_GRE
0F73 C2C4           4775             CLR     PIN_GRE 
0F75 D2C5           4776             SETB    PIN_RED
0F77 8033           4777             JMP     OBUMain_CardInfoDisplay_Over
                    4778             
0F79                4779     OBUMain_CardInfoDisplay_PassCard:       ;Í¨ÐÐ¿¨
0F79 B41717         4780             CJNE    A,#CONST_CARD_PASS,OBUMain_CardInfoDisplay_Other
0F7C C284           4781             CLR     Pin_522_RST
                    4782             
                    4783             ;--- ÏÔÊ¾Í¨ÐÐ¿¨ ---
0F7E C2C4           4784             CLR     PIN_GRE
0F80 D2C5           4785             SETB    PIN_RED
                    4786             
0F82 7F00     F     4787             MOV     R7,#DATA_RXBUF + 90
0F84 900000   F     4788             MOV     DPTR,#STR_PASS
0F87 120000   F     4789             CALL    _FUN_LCD_DisplayExChina
0F8A 120000   F     4790             CALL    _FUN_OBUMain_BEEP
                    4791             ;+++ SETB       PIN_GRE
                    4792             ;---CLR PIN_GRE
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    80

0F8D D2C4           4793             setb    PIN_GRE
0F8F D2C5           4794             SETB    PIN_RED
0F91 8019           4795             JMP     OBUMain_CardInfoDisplay_Over
                    4796             
0F93                4797     OBUMain_CardInfoDisplay_Other:  ;ÆäËü   
                    4798             ;--- ¿¨ÀàÐÍ²»¶ÔÊ±£¬ÏÔÊ¾"´í¿¨" ---
0F93 C284           4799             CLR     Pin_522_RST
0F95 7F00     F     4800             MOV     R7,#DATA_RXBUF+90
0F97 900000   F     4801             MOV     DPTR,#STR_ErrCARD
0F9A 120000   F     4802             CALL    _FUN_LCD_DisplayExChina
                    4803             ;+++ SETB       PIN_GRE 
0F9D 800D           4804             JMP     OBUMain_CardInfoDisplay_Over
                    4805             
                    4806             ;½»Ò×Ê§°Ü
0F9F                4807     OBUMain_CardInfoDisplay_TradeErr:
0F9F C284           4808             CLR     Pin_522_RST
0FA1 7F00     F     4809             MOV     R7,#DATA_RXBUF+90
0FA3 900000   F     4810             MOV     DPTR,#STR_SetMMIEr
0FA6 120000   F     4811             CALL    _FUN_LCD_DisplayExChina
0FA9 120000   F     4812             CALL    _FUN_OBUMain_BEEP
                    4813             ;+++ SETB       PIN_GRE
0FAC                4814     OBUMain_CardInfoDisplay_Over:
                    4815             ;---------------------
0FAC 7FFA           4816             MOV     R7,#250
0FAE 120000   F     4817             CALL    _FUN_LIB_DELAY  
0FB1 7FFA           4818             MOV     R7,#250
0FB3 120000   F     4819             CALL    _FUN_LIB_DELAY  
0FB6 7FFA           4820             MOV     R7,#250
0FB8 120000   F     4821             CALL    _FUN_LIB_DELAY  
                    4822             ;---------------------  
0FBB 020000   F     4823             JMP     AP_start        
                    4824             ;//////////////////////////////////
0FBE                4825     _FUN_OBUMain_BEEP:
0FBE C285           4826             clr     PIN_ESAM_RST    
0FC0 C284           4827             clr     Pin_522_RST
0FC2 D2A4           4828             SETB    Pin_pwrdwn
0FC4                4829     OBUMain_BEEP_B:
0FC4 7800     F     4830             MOV     R0,#XDATA_SETMMI
                    4831                     ;MOVX   A,@R0
0FC6 758301         4832             MOV     DPH,#1
0FC9 8882           4833             MOV     DPL,R0
0FCB E0             4834             MOVX    A,@DPTR
0FCC 701B           4835             JNZ     OBUMain_BEEP_err
0FCE                4836     OBUMain_BEEP_Secueed:   
0FCE 20A311         4837             jb      PIN_PWR_GSM,OBUMain_BEEP_SecueedNOKQ
0FD1                4838     OBUMain_BEEP_SecueedKQ:
0FD1 7F50           4839             MOV     R7,#80
0FD3 120000   F     4840             CALL    _FUN_LIB_BEEP   ;ÏìÁå
                    4841     
0FD6 7F64           4842             MOV     R7,#100
0FD8 120000   F     4843             CALL    _FUN_LIB_DELAY  ;ÏìÁå
                    4844     
0FDB 7F50           4845             MOV     R7,#80
0FDD 120000   F     4846             CALL    _FUN_LIB_BEEP   ;ÏìÁå
0FE0 8005           4847             JMP     OBUMain_BEEP_SecueedKQOVER
0FE2                4848     OBUMain_BEEP_SecueedNOKQ:
0FE2 7F64           4849             MOV     R7,#100
0FE4 120000   F     4850             CALL    _FUN_LIB_BEEP   ;ÏìÁå
                    4851             
0FE7                4852     OBUMain_BEEP_SecueedKQOVER:
0FE7 800F           4853             JMP     OBUMain_BEEP_OVER       
0FE9                4854     OBUMain_BEEP_err:       
0FE9 7F32           4855             MOV     R7,#50
0FEB 120000   F     4856             CALL    _FUN_LIB_BEEP   ;ÏìÁå   
0FEE 7F64           4857             MOV     R7,#100
0FF0 120000   F     4858             CALL    _FUN_LIB_delay  ;ÏìÁå   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    81

0FF3 7F32           4859             MOV     R7,#50
0FF5 120000   F     4860             CALL    _FUN_LIB_BEEP   ;ÏìÁå   
                    4861                     
0FF8                4862     OBUMain_BEEP_OVER:
0FF8 C285           4863             clr     PIN_ESAM_RST    
0FFA C284           4864             clr     Pin_522_RST
0FFC D2A4           4865             SETB    Pin_pwrdwn      
0FFE E4             4866             CLR     A
0FFF 75A800         4867             MOV     IE,#0
                    4868             ;-------ÖØÐÂ¿ªÊ¼Ç°ÑÓÊ±ÏÔÊ¾------------
1002 7FC8           4869             MOV     R7,#200
1004 120000   F     4870             CALL    _FUN_LIB_DELAY  
                    4871             
1007 200005   F     4872             JB      BIT_esamtran,OBUMain_BEEP_APPAGAIN
100A D295           4873             SETB    PIN_PWRDWN_LCD  
100C 020000   F     4874             JMP     AP_start                
100F                4875     OBUMain_BEEP_APPAGAIN:
100F 7FFA           4876             MOV     R7,#250
                    4877             ;---CALL        _FUN_LIB_DELAY  
1011 020000   F     4878             JMP     AP_start
                    4879             
1014                4880     OBUMain_sys_OVER:
1014 75A800         4881             MOV     IE,#0
1017 020000   F     4882             JMP     AP_start        
                    4883     ;/////////////////////////////////////////////////////////////////////////////////      
101A                4884     _FUN_OBUMAIN_SELECTDF01:
101A 300019   F     4885             JNB     BIT_ESAM,OBUMAIN_SELECTDF01_OVER
                    4886             ;Ñ¡ÔñESAM¿¨µÄDF01Ä¿Â¼
101D C200     F     4887             CLR     BIT_ESAMICC     
                    4888     ;       setb    BIT_GETRESULT
101F C200     F     4889             clr     BIT_GETRESULT
                    4890     
1021 7F00     F     4891             MOV     R7,#DATA_RXBUF
1023 7D00     F     4892             MOV     R5,#XDATA_TXBUF
1025 7BDF           4893             MOV     R3,#0DFH
1027 7A01           4894             MOV     R2,#001H                
1029 120000   F     4895             CALL    _FUN_CARDAPP_SelectFile                 ; Òª½«ÓÃ»§¿¨ÊÇ·ñ½ÓÊÕÉè³É¿ÉÑ¡×´Ì¬
                    4896     
102C 6006           4897             JZ      OBUMAIN_SELECTDF01_ESAMRight
102E 300005   F     4898             JNB     BIT_ESAMErr,OBUMAIN_SELECTDF01_OVER     
1031 120000   F     4899             CALL    _FUN_LIB_ESAMErr
1034                4900     OBUMAIN_SELECTDF01_ESAMRight:
1034 D200     F     4901             SETB    BIT_ESAMOK                      ;ÉèÖÃESAM²Ù×÷³É¹¦±ê¼Ç   
1036                4902     OBUMAIN_SELECTDF01_OVER:        
1036 22             4903             RET
                    4904     ;------------------------------------
                    4905     ;ÃèÊö:ÔÚ·¢ËÍ½áÊøºó¶¨Ê±£¬½ÓÊÕ£¬Èç¹û¶¨Ê±Æ÷³¬Ê±£¬Ôò³ÌÐò´ÓÍ·¿ªÊ¼Ö´ÐÐ¡£
                    4906     ;       1¡¢·¢ÐÐÕ³£½áÊø
                    4907     ;       2¡¢ÔÚXXmsÄÚÃ»ÓÐÈÎºÎRSUÏìÓ¦
                    4908     ;²ÎÊ:
                    4909     ;ÎÞ
                    4910     ;------------------------------------   
1037                4911     _FUN_OBUMain_TIMERX:
                    4912             
1037 20000C   F     4913             JB      BIT_MMITIRMSTART,OBUMain_TIMERX_OVER
103A D200     F     4914             SETB    BIT_MMITIRMSTART
103C E4             4915             CLR     A
                    4916             ;ÉèÖÃt1Îª8Î»ÖØ×°ÔØ¶¨Ê±Æ÷
                    4917             ;ORL    A,#00100000B
                    4918             ;ÉèÖÃt0Îª16Î»¶¨Ê±Æ÷
103D 4401           4919             ORL     A,#00000001B
103F F589           4920             MOV     TMOD,A
                    4921             ;¿ªÆô³¬Ê±´¦Àí           ³¬Ê±Ê±¼äÏÞÖÆ
1041 D28C           4922             SETB    TR0             ;¿ªÆôT0
                    4923             ;---SETB        ET0             ;¿ªÆôT0Ê¹ÄÜ
                    4924             ;---SETB        EA
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    82

1043 7500FA   F     4925             MOV     DATA_PowerONTimer,#CONST_Pro_OverTime2S 
1046                4926     OBUMain_TIMERX_OVER:    
1046 22             4927             RET             
                    4928     ;///////////////////////////////////////////////////////////////////////////////////// 
                    4929     ;       DBCB    
                    4930     ;/////////////////////////////////////////////////////////////////////////////////////
1047                4931     _fun_OBUMAIN_bdcb:
1047 22             4932             ret
                    4933             
1048 200006   F     4934             JB      BIT_ISContact,OBUMAIN_bdcb_NZC                  ; Èç¹ûÊÇ½Ó´¥¿¨£¬ÔòÑ¡ 1001£¬
                             Èç¹ûÊÇ·Ç½Ó¿¨£¬ÔòPro¿¨²ÅÑ¡1001
104B 200003   F     4935             JB      BIT_proMF,OBUMAIN_bdcb_NZC
104E 020000   F     4936             jmp     OBUMAIN_bdcb_over
1051                4937     OBUMAIN_bdcb_NZC:
                    4938             
                    4939             ;¶Á³ö 0015 ÎÄ¼þÀïµÄ·ÖÉ¢Âë
1051 758372         4940             MOV     DPH,#CONST_FLASH_0015H
1054 758284         4941             MOV     DPL,#CONST_FLASH_0015L
1057 750700   F     4942             MOV     AR7,#XDATA_HOLD
105A 7B04           4943             MOV     R3,#4
105C 120000   F     4944             CALL    _RDFlashXR
                    4945             
                    4946             ;²»ÊÇËÄ´¨µÄ¿¨
                    4947             ;CB C4 B4 A8
105F 7800     F     4948             MOV     R0,#XDATA_HOLD
                    4949                     ;MOVX   A,@R0
1061 758301         4950             MOV     DPH,#1
1064 8882           4951             MOV     DPL,R0
1066 E0             4952             MOVX    A,@DPTR
1067 64CB           4953             XRL     A,#0CBH
1069 7023           4954             JNZ     OBUMAIN_bdcb_ZZSC
106B 08             4955             INC     R0
                    4956                     ;MOVX   A,@R0
106C 758301         4957             MOV     DPH,#1
106F 8882           4958             MOV     DPL,R0
1071 E0             4959             MOVX    A,@DPTR
1072 64C4           4960             XRL     A,#0C4H
1074 7018           4961             JNZ     OBUMAIN_bdcb_ZZSC
1076 08             4962             INC     R0
                    4963                     ;MOVX   A,@R0
1077 758301         4964             MOV     DPH,#1
107A 8882           4965             MOV     DPL,R0
107C E0             4966             MOVX    A,@DPTR
107D 64B4           4967             XRL     A,#0B4H
107F 700D           4968             JNZ     OBUMAIN_bdcb_ZZSC
1081 08             4969             INC     R0
                    4970                     ;MOVX   A,@R0
1082 758301         4971             MOV     DPH,#1
1085 8882           4972             MOV     DPL,R0
1087 E0             4973             MOVX    A,@DPTR
1088 64A8           4974             XRL     A,#0A8H
108A 7002           4975             JNZ     OBUMAIN_bdcb_ZZSC
                    4976             
108C 8003           4977             JMP     OBUMain_CardInfoDisplay_btVH02
108E                4978     OBUMAIN_bdcb_ZZSC:
108E 020000   F     4979             JMP     OBUMAIN_bdcb_over
                    4980             ;µ±Ç°ÊÇ ËÄ´¨ µÄ¿¨Ê±£¬±È¶Ô³µÅÆºÅ
1091                4981     OBUMain_CardInfoDisplay_btVH02:
                    4982             
                    4983             ;=== ¶Á³ö0015ÎÄ¼þÀïµÄ³µÅÆ ===
1091 758372         4984             MOV     DPH,#CONST_FLASH_0015H
1094 7582A0         4985             MOV     DPL,#CONST_FLASH_0015L + 28
1097 750700   F     4986             MOV     AR7,#XDATA_HOLD
109A 7B0A           4987             MOV     R3,#10
109C 120000   F     4988             CALL    _RDFlashXR
                    4989             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    83

                    4990             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
109F 758372         4991             MOV     DPH,#CONST_FLASH_SYSINFOH
10A2 75821B         4992             MOV     DPL,#CONST_FLASH_SYSINFOL + 27
10A5 750700   F     4993             MOV     AR7,#XDATA_SC
10A8 7B01           4994             MOV     R3,#1
10AA 120000   F     4995             CALL    _RDFlashXR
                    4996             
                    4997             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
10AD 758372         4998             MOV     DPH,#CONST_FLASH_SYSINFOH
10B0 758224         4999             MOV     DPL,#CONST_FLASH_SYSINFOL + 36
10B3 750700   F     5000             MOV     AR7,#XDATA_HOLD + 10
10B6 7B0A           5001             MOV     R3,#10
10B8 120000   F     5002             CALL    _RDFlashXR
                    5003             
                    5004             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
10BB 758372         5005             MOV     DPH,#CONST_FLASH_SYSINFOH
10BE 758238         5006             MOV     DPL,#CONST_FLASH_SYSINFOL + 56
10C1 750700   F     5007             MOV     AR7,#XDATA_HOLD + 20
10C4 7B0A           5008             MOV     R3,#10;8
10C6 120000   F     5009             CALL    _RDFlashXR
                    5010             
                    5011             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ ³µ ÅÆ 1
10C9 758372         5012             MOV     DPH,#CONST_FLASH_SYSINFOH                               ; 
10CC 75824C         5013             MOV     DPL,#CONST_FLASH_SYSINFOL + 76                          ; 
10CF 750700   F     5014             MOV     AR7,#XDATA_HOLD + 30                                    ; 24
10D2 7B0A           5015             MOV     R3,#10                                                  ; 8
10D4 120000   F     5016             CALL    _RDFlashXR                                              ; 
                    5017                     
10D7 C000           5018             PUSH    AR0
10D9 7800     F     5019             MOV     R0,#XDATA_SC
                    5020                     ;MOVX   A,@R0
10DB 758301         5021             MOV     DPH,#1
10DE 8882           5022             MOV     DPL,R0
10E0 E0             5023             MOVX    A,@DPTR
                    5024             
10E1 D000           5025             POP     AR0     
10E3 6046           5026             JZ      OBUMAIN_bdcb_over
                    5027             
10E5 7A00           5028             MOV     R2,#0                           
10E7                5029     OBUMAIN_bdcb_CPStartLOOP:                       
10E7 0A             5030             INC     R2                              
10E8                5031     OBUMAIN_bdcb_CP01:                      
10E8 BA0104         5032             CJNE    R2,#1,OBUMAIN_bdcb_CP02 
10EB 7900     F     5033             MOV     R1,#XDATA_HOLD+10               
10ED 8009           5034             JMP     OBUMAIN_bdcb_CP04               
10EF                5035     OBUMAIN_bdcb_CP02:                      
10EF BA0204         5036             CJNE    R2,#2,OBUMAIN_bdcb_CP03 
10F2 7900     F     5037             MOV     R1,#XDATA_HOLD + 20
10F4 8002           5038             JMP     OBUMAIN_bdcb_CP04               
10F6                5039     OBUMAIN_bdcb_CP03:
10F6 7900     F     5040             MOV     R1,#XDATA_HOLD+30
10F8                5041     OBUMAIN_bdcb_CP04:              
10F8 7800     F     5042             MOV     R0,#XDATA_HOLD
10FA 7B0A           5043             MOV     R3,#10;8
10FC                5044     OBUMAIN_bdcb_VErrCPLOOP:;±È¶Ô³µÅÆÑ­»·
                    5045                     ;MOVX   A,@R0
10FC 758301         5046             MOV     DPH,#1
10FF 8882           5047             MOV     DPL,R0
1101 E0             5048             MOVX    A,@DPTR
1102 F5F0           5049             MOV     B,A
                    5050                     ;MOVX   A,@R1
1104 758301         5051             MOV     DPH,#1
1107 8982           5052             MOV     DPL,R1
1109 E0             5053             MOVX    A,@DPTR
110A 65F0           5054             XRL     A,B
110C 7006           5055             JNZ     OBUMAIN_bdcb_CPDif
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    84

110E 08             5056             INC     R0
110F 09             5057             INC     R1
1110 DBEA           5058             DJNZ    R3,OBUMAIN_bdcb_VErrCPLOOP      
1112                5059     OBUMAIN_bdcb_ZC:                
                    5060             ;setb   BIT_CKXT
1112 8017           5061             jmp     OBUMAIN_bdcb_over
1114                5062     OBUMAIN_bdcb_CPDif:
1114 BA0400         5063             CJNE    R2,#4,$+3
1117 5012           5064             JNC     OBUMAIN_bdcb_over
1119 C000           5065             PUSH    AR0
111B 7800     F     5066             MOV     R0,#XDATA_SC
                    5067                     ;MOVX   A,@R0
111D 758301         5068             MOV     DPH,#1
1120 8882           5069             MOV     DPL,R0
1122 E0             5070             MOVX    A,@DPTR
1123 D000           5071             POP     AR0     
1125 8AF0           5072             MOV     B,R2
1127 65F0           5073             XRL     A,B
1129 70BC           5074             JNZ     OBUMAIN_bdcb_CPStartLOOP
112B                5075     OBUMAIN_bdcb_over:;
112B 22             5076             ret             
                    5077     ;---------------------------------------------------------------------- 
                    5078     ; RTC ´¦Àíº¯Ê
                    5079     ;       ÓÃÓÚ RTC È¡ CELLID Ê±
                    5080     ;----------------------------------------------------------------------
112C                5081     _FUN_OBUMain_RTCUP:     
112C 120000   F     5082             CALL    _FUN_GSM_RTCOFF 
112F 22             5083             RET
                    5084     ;///////////////////////////////////////////////////////////////////////////////////
                    5085     ;µÍµçÑ¹±¨¾¯
                    5086     ;       1¡¢²é¿´µ±Ç°ÊÇ·ñÁ¬½ÓUSB
                    5087     ;       2¡¢²é¿´µ±Ç°ÊÇ·ñ
                    5088     ;
                    5089     ;·µ»ØÖµ
                    5090     ;       R7      =       CONST_STATE_FALSE  µÍµçÑ¹
                    5091     ;               =       CONST_STATE_TRUE   µçÑ¹Õ³£
                    5092     ;///////////////////////////////////////////////////////////////////////////
1130                5093     _FUN_OBUMain_CardInfoDisplay02:         
1130 120000   F     5094             CALL    _Func_LCD_INIT  
1133                5095     OBUMain_CardInfoDisplay02_cpbf:;ÏÔÊ¾³µÅÆ×Ó²»·û  
                    5096             
1133 300019   F     5097             JNB     BIT_CD,OBUMain_CardInfoDisplay02_Start                  ;Èç¹û²»ÊÇÊ§Ð§£¬ÔòÌø
                             ¹
1136 300016   F     5098             JNB     BIT_ACTIVECARD,OBUMain_CardInfoDisplay02_Start          ;Èç¹û²»ÊÇ²å¿¨£¬ÔòÌø
                             ¹
                    5099             
                    5100     ;------------Ôö¼ÓÁÁºìµÆ----------------------------------
1139 C2C5           5101             CLR     Pin_red         ;2010-04-21
                    5102     ;--------------------------------------------------------
                    5103             
                    5104             ;ÏÔÊ¾²ð¶¯±ê¼Ç
113B 7F02           5105             MOV     R7,#00000010B
113D 120000   F     5106             CALL    _FUN_LCD_ICON
                    5107             
                    5108             ;--- ÏÔÊ¾ ---
1140 7F00     F     5109             MOV     R7,#DATA_RXBUF
1142 900000   F     5110             MOV     DPTR,#STR_UNFIX
1145 120000   F     5111             CALL    _FUN_LCD_DisplayExChina
                    5112             
1148 7FFA           5113             MOV     R7,#250
114A 120000   F     5114             CALL    _FUN_LIB_DELAY                                                  ; MCUÆô¶¯Ê±
                             Òª¼ÓÑÓÊ±£¬ÒÔ±ãµçÑ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬
114D D2C5           5115             SETB    Pin_red                                                         ;2010-04-21
114F                5116     OBUMain_CardInfoDisplay02_Start:
114F 200019   F     5117             JB      BIT_INSERTCARD,OBUMain_CardInfoDisplay02_CardInfo       
1152                5118     OBUMain_CardInfoDisplay02_NOCardInfo:                                           ;Ã»¿¨ÐÅÏ¢´¦
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    85

                             Àí   
1152                5119     OBUMain_CardInfoDisplay02_CKOver:       
1152 C284           5120             CLR     Pin_522_RST
1154 C2C5           5121             CLR     PIN_RED
                    5122             ;+++ SETB       PIN_GRE 
                    5123             ;--- ÏÔÊ¾ ---
1156 7F00     F     5124             MOV     R7,#DATA_RXBUF
1158 900000   F     5125             MOV     DPTR,#STR_NOCARD
115B 120000   F     5126             CALL    _FUN_LCD_DisplayExChina 
115E 300007   F     5127             JNB     BIT_SETMMI,OBUMain_CardInfoDisplay02_NOCardSetmmiOV     
1161 7F64           5128             MOV     R7,#100
1163 120000   F     5129             CALL    _FUN_LIB_BEEP                                                   ;ÏìÁå
1166 D2C5           5130             SETB    PIN_RED         
1168                5131     OBUMain_CardInfoDisplay02_NOCardSetmmiOV:               
1168 020000   F     5132             JMP     OBUMain_CardInfoDisplay02_Over  
116B                5133     OBUMain_CardInfoDisplay02_CardInfo:;ÓÐ¿¨ÐÅÏ¢´¦Àí
116B 200007   F     5134             JB      BIT_ISContact,OBUMain_CardInfoDisplay02_GETCPUINFO              ; µ±Ç°ÊÇ½Ó´
                             ¥¿¨Ê±£¬È¡CPU¿¨ÐÅÏ¢£¬²¢ÏÔÊ¾
116E 200004   F     5135             JB      BIT_PROMF,OBUMain_CardInfoDisplay02_GETCPUINFO                  ; µ±Ç°ÊÇPRO
                             ¿¨Ê±£¬È¡CPU¿¨ÐÅÏ¢£¬²¢ÏÔÊ¾
1171 7417           5136             MOV     A,#CONST_CARD_PASS                                              ; µ±Ç°ÊÇMF¿
                             ¨Ê±£¬ÔòÏÔÊ¾'Í¨ÐÐ¿¨'
1173 8015           5137             JMP     OBUMain_CardInfoDisplay02_Info
1175                5138     OBUMain_CardInfoDisplay02_GETCPUINFO:                                           ; È¡CPU¿¨ÐÅ
                             Ï¢    
                    5139             ;¶Á0015ÎÄ¼þÖÐµÚ9¸ö×Ö½Ú[ ¿¨ÀàÐÍ ]
1175 758372         5140             MOV     DPH,#CONST_FLASH_0015H
1178 75828C         5141             MOV     DPL,#CONST_FLASH_0015L + 8
117B 7B01           5142             MOV     R3,#1                                                           ;0015ÎÄ¼þ³¤
                             ¶È   
117D 7F00     F     5143             MOV     R7,#XDATA_TXBUF
117F 120000   F     5144             CALL    _RDFlashXR                                                      ;¶ÁFalshº¯Ê
                             Ö»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²»push r1     
1182 7800     F     5145             MOV     R0,#XDATA_TXBUF
                    5146                     ;MOVX   A,@R0
1184 758301         5147             MOV     DPH,#1
1187 8882           5148             MOV     DPL,R0
1189 E0             5149             MOVX    A,@DPTR
                    5150             ;call   _fun_test_display
118A                5151     OBUMain_CardInfoDisplay02_Info:                                                 ;ÏÔÊ¾¿¨ÐÅÏ¢
                                  
118A B4165D         5152             CJNE    A,#CONST_CARD_CONSUME,OBUMain_CardInfoDisplay02_PassCard
118D                5153     OBUMain_CardInfoDisplay02_CashCard:                                             ;´¢Öµ¿¨
                    5154             
                    5155             ;¶ÁÇ®°ü
118D 758372         5156             MOV     DPH,#CONST_FLASH_0002H
1190 758258         5157             MOV     DPL,#CONST_FLASH_0002L
1193 7B04           5158             MOV     R3,#4                                                           ;0015ÎÄ¼þ³¤
                             ¶È   
1195 7F00     F     5159             MOV     R7,#XDATA_TXBUF
1197 120000   F     5160             CALL    _RDFlashXR                                                      ;¶ÁFalshº¯Ê
                             Ö»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²»push r1     
                    5161             
                    5162             ;ÅÐ¶ÏÊÇ·ñ¶¼ÊÇ0xFF
119A 7800     F     5163             MOV     R0,#XDATA_TXBUF
                    5164                     ;MOVX   A,@R0
119C 758301         5165             MOV     DPH,#1
119F 8882           5166             MOV     DPL,R0
11A1 E0             5167             MOVX    A,@DPTR
11A2 64FF           5168             xrl     a,#0ffh
11A4 7023           5169             jnz     OBUMain_CardInfoDisplay02_CashCardcpv
                    5170             
11A6 08             5171             INC     R0
                    5172                     ;MOVX   A,@R0
11A7 758301         5173             MOV     DPH,#1
11AA 8882           5174             MOV     DPL,R0
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    86

11AC E0             5175             MOVX    A,@DPTR
11AD 64FF           5176             xrl     a,#0ffh
11AF 7018           5177             jnz     OBUMain_CardInfoDisplay02_CashCardcpv
                    5178             
11B1 08             5179             INC     R0
                    5180                     ;MOVX   A,@R0
11B2 758301         5181             MOV     DPH,#1
11B5 8882           5182             MOV     DPL,R0
11B7 E0             5183             MOVX    A,@DPTR
11B8 64FF           5184             xrl     a,#0ffh
11BA 700D           5185             jnz     OBUMain_CardInfoDisplay02_CashCardcpv   
                    5186     
11BC 08             5187             INC     R0
                    5188                     ;MOVX   A,@R0
11BD 758301         5189             MOV     DPH,#1
11C0 8882           5190             MOV     DPL,R0
11C2 E0             5191             MOVX    A,@DPTR
11C3 64FF           5192             xrl     a,#0ffh
11C5 7002           5193             jnz     OBUMain_CardInfoDisplay02_CashCardcpv   
11C7 8032           5194             jmp     OBUMain_CardInfoDisplay02_Other 
11C9                5195     OBUMain_CardInfoDisplay02_CashCardcpv:
                    5196             ;½«Öµ Copy µ½ #Money ÄÚ´æÖÐÈ¥
11C9 7B04           5197             MOV     R3,#4
11CB 7900     F     5198             MOV     R1,#XDATA_TXBUF
11CD 7800     F     5199             MOV     R0,#MONEY
11CF                5200     CARDACTIVE_CashCard_CopyMoney02:
                    5201                     ;MOVX   A,@R1
11CF 758301         5202             MOV     DPH,#1
11D2 8982           5203             MOV     DPL,R1
11D4 E0             5204             MOVX    A,@DPTR
11D5 F6             5205             MOV     @R0,A
11D6 08             5206             INC     R0
11D7 09             5207             INC     R1
11D8 DBF5           5208             DJNZ    R3,CARDACTIVE_CashCard_CopyMoney02      
11DA                5209     OBUMain_CardInfoDisplay02_Money:        
11DA C2C4           5210             CLR     PIN_GRE
11DC D2C5           5211             SETB    PIN_RED
                    5212             
                    5213             ;--- ÏÔÊ¾Óà¶î»òÍ¨ÐÐ¿¨ ---
11DE 7F04           5214             MOV     R7,#00000100B
11E0 120000   F     5215             CALL    _FUN_LCD_ICON
                    5216             
11E3 7F00     F     5217             MOV     R7,#DATA_RXBUF
11E5 120000   F     5218             LCall   _dspmoney                                               ;ÏÔÊ¾ÐÂÓà¶î     
                    5219             ;+++ SETB       PIN_GRE
11E8 801F           5220             JMP     OBUMain_CardInfoDisplay02_Over
                    5221             
11EA                5222     OBUMain_CardInfoDisplay02_PassCard:     ;Í¨ÐÐ¿¨
11EA B4170E         5223             CJNE    A,#CONST_CARD_PASS,OBUMain_CardInfoDisplay02_Other
                    5224             ;--- ÏÔÊ¾Í¨ÐÐ¿¨ ---
11ED C2C4           5225             CLR     PIN_GRE
11EF D2C5           5226             SETB    PIN_RED
                    5227             
11F1 7F00     F     5228             MOV     R7,#DATA_RXBUF + 90
11F3 900000   F     5229             MOV     DPTR,#STR_PASS
11F6 120000   F     5230             CALL    _FUN_LCD_DisplayExChina
                    5231             
                    5232             ;+++ SETB       PIN_GRE
11F9 800E           5233             JMP     OBUMain_CardInfoDisplay02_Over  
11FB                5234     OBUMain_CardInfoDisplay02_Other:        ;ÆäËü
11FB C284           5235             CLR     Pin_522_RST
                    5236             
                    5237             
                    5238             
                    5239             ;--- ¿¨ÀàÐÍ²»¶ÔÊ±£¬ÏÔÊ¾"´í¿¨" ---
11FD 7F00     F     5240             MOV     R7,#DATA_RXBUF+90
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    87

11FF 900000   F     5241             MOV     DPTR,#STR_ErrCARD
1202 120000   F     5242             CALL    _FUN_LCD_DisplayExChina
                    5243             ;+++ SETB       PIN_GRE 
1205 C2C5           5244             CLR     PIN_RED 
1207 8000           5245             JMP     OBUMain_CardInfoDisplay02_Over          
                    5246             
1209                5247     OBUMain_CardInfoDisplay02_Over:         
1209 300037   F     5248             JNB     BIT_INSERTCARD,OBUMain_CardInfoDisplay02_Over02 
                    5249             
                    5250             ;=1²»ÆôÓÃ = 0ÆôÓÃ
120C 7401           5251             MOV     A,#CONST_INPUT_ISEnable
120E 7033           5252             JNZ     OBUMain_CardInfoDisplay02_Over02        
                    5253             
1210 758372         5254             MOV     DPH,#CONST_FLASH_0019H
1213 7582BC         5255             MOV     DPL,#CONST_FLASH_0019L + 13
1216 750700   F     5256             MOV     AR7,#XDATA_HOLD
1219 7B01           5257             MOV     R3,#1
121B 120000   F     5258             CALL    _RDFlashXR      
121E 7800     F     5259             MOV     R0,#XDATA_HOLD
                    5260             
                    5261                     ;MOVX   A,@R0
1220 758301         5262             MOV     DPH,#1
1223 8882           5263             MOV     DPL,R0
1225 E0             5264             MOVX    A,@DPTR
1226 6401           5265             XRL     A,#CONST_MTC_INPUT
1228 600C           5266             JZ      OBUMain_CardInfoDisplay02_IN
                    5267                     ;MOVX   A,@R0
122A 758301         5268             MOV     DPH,#1
122D 8882           5269             MOV     DPL,R0
122F E0             5270             MOVX    A,@DPTR
1230 6403           5271             XRL     A,#CONST_ETC_INPUT
1232 6002           5272             JZ      OBUMain_CardInfoDisplay02_IN
1234 800D           5273             JMP     OBUMain_CardInfoDisplay02_Over02
                    5274             
1236                5275     OBUMain_CardInfoDisplay02_IN:;ÏÔÊ¾Èë¿ÚÐÅÏ¢
                    5276             
1236 7FFA           5277             MOV     R7,#250
1238 120000   F     5278             CALL    _FUN_LIB_DELAY
123B 7F00     F     5279             MOV     R7,#DATA_RXBUF+90
123D 900000   F     5280             MOV     DPTR,#STR_INFLAG
1240 120000   F     5281             CALL    _FUN_LCD_DisplayExChina
                    5282             
1243                5283     OBUMain_CardInfoDisplay02_Over02:
1243 7FFA           5284             MOV     R7,#250
1245 120000   F     5285             CALL    _FUN_LIB_DELAY
                    5286             
1248 22             5287             RET
                    5288     ;///////////////////////////////////////////////////////////////////////////////////
1249                5289     _FUN_CC1101_spioSingleSoft02:
                    5290     ;       CLR     Pin_CC1101_SS
1249                5291     CC1101_spioSingleSoft02_S:
1249 00             5292             NOP
124A 00             5293             NOP
124B 00             5294             NOP
124C 00             5295             NOP
124D 00             5296             NOP
                    5297                     
                    5298             ;Ð´µØÖ·
124E 7B08           5299             MOV     R3,#8
1250                5300     CC1101_spioSingleSoft02_WriteAddrLOOP:
                    5301     ;       CLR     PIN_CC1101_SCLK                         ;4      
1250 33             5302             RLC     A                                       ;1
                    5303     ;       MOV     PIN_CC1101_MOSI,C                       ;4      
1251 00             5304             NOP
1252 00             5305             NOP
                    5306     ;       SETB    PIN_CC1101_SCLK                         ;4      
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    88

1253 A2C1           5307             MOV     C,PIN_522_MISO
1255 DBF9           5308             DJNZ    R3,CC1101_spioSingleSoft02_WriteAddrLOOP        ;4      
1257 33             5309             RLC     A                                       ;1
1258 F5F0           5310             MOV     B,A             
125A                5311     CC1101_spioSingleSoft02_WriteDAOVLOOP:
125A 00             5312             NOP
125B 00             5313             NOP
125C 00             5314             NOP
125D 00             5315             NOP
125E 00             5316             NOP
125F 22             5317             RET     
                    5318     ;///////////////////////////////////////////////////////////////////////////////////
1260                5319     _FUN_OBUMAIN_PreSleep:
1260 C28C           5320             CLR     TR0             ;¹Ø±ÕT0
1262 C2A9           5321             CLR     ET0             ;¹Ø±ÕT0Ê¹ÄÜ
1264 C2AF           5322             CLR     EA              
                    5323             ;--- Çå³Flash ---
1266 758372         5324             MOV     DPH,#CONST_FLASH_SYSINFOH
1269 758200         5325             MOV     DPL,#CONST_FLASH_SYSINFOL
126C 7B01           5326             MOV     R3,#1
126E 120000   F     5327             CALL    _eraseflash
                    5328             
                    5329             ;--- Èç¹û½»Ò×³É¹¦¾Í¼ÇÂ¼ÌìÏßID ---
                    5330             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
1271 758372         5331             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
1274 7582EC         5332             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
1277 7F00     F     5333             MOV     R7,#XDATA_BeaconID
1279 7B08           5334             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen     
127B 120000   F     5335             CALL    _wrflashXR      
127E 120000   F     5336             CALL    OBUMain_CARDPreDeal_ReadSysInfo                         ;¼ò»¯°æÔ¤¶Á     
1281 120000   F     5337             CALL    _FUN_GSM_Insert
                    5338             
1284 22             5339             RET     
                    5340     ;///////////////////////////////////////////////////////////////////////////////////
                    5341     ;       ²¹³äÔ¤¶Á
                    5342     ;///////////////////////////////////////////////////////////////////////////////////
1285                5343     _FUN_OBUMAIN_PrePu:     
1285 758372         5344             MOV     DPH,#CONST_FLASH_SYSINFOH
1288 758200         5345             MOV     DPL,#CONST_FLASH_SYSINFOL
128B 7B01           5346             MOV     R3,#1
128D 120000   F     5347             CALL    _eraseflash     
                    5348             ;--- Èç¹û½»Ò×³É¹¦¾Í¼ÇÂ¼ÌìÏßID ---
                    5349             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
1290 758372         5350             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
1293 7582EC         5351             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
1296 7F00     F     5352             MOV     R7,#XDATA_LastBeaconID
1298 7B08           5353             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen     
129A 120000   F     5354             CALL    _wrflashXR      
129D 120000   F     5355             CALL    OBUMain_CARDPreDeal_ReadSysInfo                         ;¼ò»¯°æÔ¤¶Á        
                                  
12A0 22             5356             RET
                    5357     ;///////////////////////////////////////////////////////////////////////////////////
                    5358     ;               Ò»°ãÐÔ´íÎó      01      µ¼ÈëÊ§°Ü        STR_InputFail
                    5359     ;               ºÏÍ¬ºÅ²»Í¬      02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                    5360     ;               Ê¹ÓÃ´ÎÊ=FFH     03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
                    5361     ;               ³É¹¦            00      µ¼Èë³É¹¦        STR_InputOk
                    5362     ;               ·Çµ¼Èë¿¨        FF
                    5363     
                    5364     ;               Ò»°ãÐÔ´íÎó      04      ¼¤»îÊ§°Ü        STR_ActiveFail
                    5365     ;               ºÏÍ¬ºÅ²»Í¬      05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                    5366     ;               Ê¹ÓÃ´ÎÊ=FFH     06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
                    5367     ;               ³É¹¦            00      ¼¤»î³É¹¦        STR_ActiveOK
                    5368     ;               ·Ç¼¤»î¿¨        FF
                    5369     ;²ÎÊ
                    5370     ;       R7      ´íÎó´úÂë
                    5371     ;       R5
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    89

                    5372     ;·µ»ØÖµ
                    5373     ;       DPTR    Òº¾§ÏÔÊ¾Öµ
                    5374     ;///////////////////////////////////////////////////////////////////////////////////
12A1                5375     _FUN_OBUMAIN_DR:
                    5376             
12A1                5377     OBUMAIN_DR_00:
12A1 BF000D         5378             CJNE    R7,#0,OBUMAIN_DR_01
                    5379             
12A4                5380     DR_00_0D:
12A4 BD0D05         5381             CJNE    R5,#0DH,DR_00_0E
12A7 900000   F     5382             MOV     DPTR,#STR_InputOk
12AA 8003           5383             JMP     DR_00_0D0EOV
12AC                5384     DR_00_0E:
12AC 900000   F     5385             MOV     DPTR,#STR_ActiveOK      
12AF                5386     DR_00_0D0EOV:
12AF 8030           5387             JMP     OBUMAIN_DR_OVER
12B1                5388     OBUMAIN_DR_01:
12B1 BF0105         5389             CJNE    R7,#1,OBUMAIN_DR_02
12B4 900000   F     5390             MOV     DPTR,#STR_InputFail
12B7 8028           5391             JMP     OBUMAIN_DR_OVER
12B9                5392     OBUMAIN_DR_02:
12B9 BF0205         5393             CJNE    R7,#2,OBUMAIN_DR_03
12BC 900000   F     5394             MOV     DPTR,#STR_IllegalInputCard
12BF 8020           5395             JMP     OBUMAIN_DR_OVER
12C1                5396     OBUMAIN_DR_03:
12C1 BF0305         5397             CJNE    R7,#3,OBUMAIN_DR_04
12C4 900000   F     5398             MOV     DPTR,#STR_InputCardInvalid
12C7 8018           5399             JMP     OBUMAIN_DR_OVER
12C9                5400     OBUMAIN_DR_04:
12C9 BF0405         5401             CJNE    R7,#4,OBUMAIN_DR_05
12CC 900000   F     5402             MOV     DPTR,#STR_ActiveFail
12CF 8010           5403             JMP     OBUMAIN_DR_OVER
12D1                5404     OBUMAIN_DR_05:
12D1 BF0505         5405             CJNE    R7,#5,OBUMAIN_DR_06
12D4 900000   F     5406             MOV     DPTR,#STR_IllegalACTCard
12D7 8008           5407             JMP     OBUMAIN_DR_OVER
12D9                5408     OBUMAIN_DR_06:
12D9 BF0605         5409             CJNE    R7,#6,OBUMAIN_DR_OVER
12DC 900000   F     5410             MOV     DPTR,#STR_ACTCardInvalid
12DF 8000           5411             JMP     OBUMAIN_DR_OVER
12E1                5412     OBUMAIN_DR_OVER:
12E1 22             5413             RET     
                    5414             
                    5415     ;--------------------------------------------------------       
                    5416     ;ÃèÊö:
                    5417     ;       Ö÷³ÌÐò´íÎóÌáÊ¾
                    5418     ;²ÎÊ:
                    5419     ;       a       ´íÎó´úÂë
                    5420     ;       dptr    ³ö´íÌáÊ¾
                    5421     ;--------------------------------------------------------       
12E2                5422     _FUN_OBUMAIN_ErrShow03:
12E2 C0E0           5423             PUSH    ACC
12E4 120000   F     5424             CALL    _Func_LCD_INIT  
12E7 D0E0           5425             POP     ACC
                    5426             ;--- ÏÔÊ¾ ---
12E9 750000   F     5427             MOV     money,#0h                       ;
12EC 750000   F     5428             MOV     money + 1,#0h                   ;
12EF 750000   F     5429             MOV     money + 2,#0h                   ;
12F2 F500     F     5430             MOV     money + 3,A                     ;
12F4 7F00     F     5431             MOV     R7,#DATA_RXBUF + 90             ;
12F6 120000   F     5432             CALL    _dspERRNUM      
                    5433             
12F9 E594           5434             MOV     A,REG_5412AD_P0M0
12FB 440C           5435             ORL     A,#00001100B
12FD F594           5436             MOV     REG_5412AD_P0M0,A
12FF E593           5437             MOV     A,REG_5412AD_P0M1
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    90

1301 54F3           5438             ANL     A,#11110011B
1303 F593           5439             MOV     REG_5412AD_P0M1,A
                    5440             
1305 75940C         5441             MOV     REG_5412AD_P0M0,#00001100B
1308 759301         5442             MOV     REG_5412AD_P0M1,#00000001B      
                    5443             
130B 7FFF           5444             MOV     R7,#255
130D 120000   F     5445             CALL    _FUN_LIB_BEEP
1310 7FFF           5446             MOV     R7,#255
1312 120000   F     5447             CALL    _FUN_LIB_BEEP   
                    5448             ;JMP    AP_start
1315 22             5449             RET
                    5450     
                    5451     
1316                5452     _FUN_OBUMAIN_ErrShow:
1316 C0E0           5453             PUSH    ACC
1318 120000   F     5454             CALL    _Func_LCD_INIT  
131B D0E0           5455             POP     ACC
                    5456             ;--- ÏÔÊ¾ ---
131D 750000   F     5457             MOV     money,#0h                       ;
1320 750000   F     5458             MOV     money + 1,#0h                   ;
1323 750000   F     5459             MOV     money + 2,#0h                   ;
1326 F500     F     5460             MOV     money + 3,A                     ;
1328 7F00     F     5461             MOV     R7,#DATA_RXBUF + 90             ;
132A 120000   F     5462             CALL    _dspERRNUM      
                    5463             
132D E594           5464             MOV     A,REG_5412AD_P0M0
132F 440C           5465             ORL     A,#00001100B
1331 F594           5466             MOV     REG_5412AD_P0M0,A
1333 E593           5467             MOV     A,REG_5412AD_P0M1
1335 54F3           5468             ANL     A,#11110011B
1337 F593           5469             MOV     REG_5412AD_P0M1,A
                    5470             
1339 75940C         5471             MOV     REG_5412AD_P0M0,#00001100B
133C 759301         5472             MOV     REG_5412AD_P0M1,#00000001B      
                    5473             
133F 7FFF           5474             MOV     R7,#255
1341 120000   F     5475             CALL    _FUN_LIB_BEEP
1344 7FFF           5476             MOV     R7,#255
1346 120000   F     5477             CALL    _FUN_LIB_BEEP   
1349 020000   F     5478             JMP     AP_start
134C 22             5479             RET
                    5480                     
                    5481     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////////////
134D                5482     _FUN_OBUMAIN_ErrShow02:
                    5483             
                    5484     ;       PUSH    ACC
                    5485     ;       CALL    _Func_LCD_INIT  
                    5486     ;       POP     ACC
                    5487             
                    5488             ;--- ÏÔÊ¾ ---
                    5489     ;       MOV     money,#0h                       ;
                    5490     ;       MOV     money + 1,#0h                   ;
                    5491     ;       MOV     money + 2,#0h                   ;
                    5492     ;       MOV     money + 3,A                     ;
                    5493     ;       MOV     R7,#DATA_RXBUF + 90             ;
                    5494     ;       CALL    _dspERRNUM      
                    5495             
                    5496     ;       MOV     A,REG_5412AD_P0M0
                    5497     ;       ORL     A,#00001100B
                    5498     ;       MOV     REG_5412AD_P0M0,A
                    5499     ;       MOV     A,REG_5412AD_P0M1
                    5500     ;       ANL     A,#11110011B
                    5501     ;       MOV     REG_5412AD_P0M1,A
                    5502             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    91

                    5503     ;       MOV     REG_5412AD_P0M0,#00001100B
                    5504     ;       MOV     REG_5412AD_P0M1,#00000001B
                    5505     
                    5506     ;       MOV     R7,#255
                    5507     ;       CALL    _FUN_LIB_BEEP
                    5508     ;       MOV     R7,#255
                    5509     ;       CALL    _FUN_LIB_BEEP   
                    5510             
                    5511     ;OBUMAIN_ErrShow02_loop:
                    5512     ;       MOV     R7,#255
                    5513     ;       CALL    _FUN_LIB_BEEP
                    5514     ;       MOV     R7,#255
                    5515     ;       CALL    _FUN_LIB_BEEP
                    5516     ;       MOV     REG_WDT_CONTR,#00111111B
                    5517     ;       jmp     OBUMAIN_ErrShow02_loop
                    5518     ;       JMP     AP_start
134D 22             5519             RET
                    5520     ;/////////////////////////////////////////////////////////////////////////////////////////
134E                5521     _FUN_OBUMAIN_CheckMemoryAndEx:
                    5522     
134E 758301         5523             MOV     DPH,#1
1351 758200         5524             MOV     DPL,#0;0
1354 7BFF           5525             MOV     R3,#255
1356 7400           5526             MOV     A,#0
1358                5527     OBUMAIN_CheckMemoryAndEx2_CheckMovx:
1358 F0             5528             MOVX    @DPTR,A
1359 04             5529             INC     A
135A A3             5530             INC     DPTR
135B DBFB           5531             DJNZ    R3,OBUMAIN_CheckMemoryAndEx2_CheckMovx
                    5532             
                    5533             ;MOV    DPH,#1
135D 758200         5534             MOV     DPL,#0;0
1360 7BFF           5535             MOV     R3,#255
1362                5536     OBUMAIN_CheckMemoryAndEx2_CheckMovxISOK:
1362 E0             5537             MOVX    A,@DPTR
1363 6582           5538             XRL     A,DPL
1365 7037           5539             JNZ     OBUMAIN_CheckMemoryAndEx_CheckMovxERR03
1367 A3             5540             INC     DPTR
1368 DBF8           5541             DJNZ    R3,OBUMAIN_CheckMemoryAndEx2_CheckMovxISOK
                    5542             
                    5543             ;MOV    DPH,#1
136A 758200         5544             MOV     DPL,#00;0
136D 7BFF           5545             MOV     R3,#255
136F                5546     OBUMAIN_CheckMemoryAndEx2_CheckMovxISOK2:
136F E0             5547             MOVX    A,@DPTR
1370 6582           5548             XRL     A,DPL
1372 7024           5549             JNZ     OBUMAIN_CheckMemoryAndEx_CheckMovxERR
1374 A3             5550             INC     DPTR
1375 DBF8           5551             DJNZ    R3,OBUMAIN_CheckMemoryAndEx2_CheckMovxISOK2
                    5552             
                    5553             ;ÄÚ´æ
1377 7807           5554             MOV     R0,#7
1379 7B80           5555             MOV     R3,#128
                    5556             ;CLR    A
137B 7407           5557             MOV     A,#7
137D                5558     OBUMAIN_CheckMemoryAndEx_CheckMov:
137D F6             5559             mov     @R0,A
137E 04             5560             INC     A
137F 08             5561             INC     R0
1380 DBFB           5562             DJNZ    R3,OBUMAIN_CheckMemoryAndEx_CheckMov
                    5563             
1382 7807           5564             MOV     R0,#7
1384 7B80           5565             MOV     R3,#128
                    5566     ;       CLR     A
1386                5567     OBUMAIN_CheckMemoryAndEx_CheckMovISOK:
1386 E6             5568             mov     A,@R0
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    92

                    5569     ;       XRL     A,R0
1387 08             5570             INC     R0
1388 DBFC           5571             DJNZ    R3,OBUMAIN_CheckMemoryAndEx_CheckMovISOK
                    5572             
                    5573             
138A 7807           5574             MOV     R0,#7
138C 7B80           5575             MOV     R3,#128
                    5576             ;CLR    A
138E                5577     OBUMAIN_CheckMemoryAndEx_CheckMovISOK2:
138E E6             5578             mov     A,@R0
138F 68             5579             XRL     A,R0
1390 7009           5580             JNZ     OBUMAIN_CheckMemoryAndEx_CheckMovERR
1392 08             5581             INC     R0
1393 DBF9           5582             DJNZ    R3,OBUMAIN_CheckMemoryAndEx_CheckMovISOK2               
1395 7F00           5583             MOV     R7,#CONST_STATE_TRUE
1397 22             5584             RET
                    5585             
1398                5586     OBUMAIN_CheckMemoryAndEx_CheckMovxERR:  
1398 7F21           5587             MOV     R7,#CONST_STATE_ExMemoryEr      
139A 22             5588             RET
                    5589             
139B                5590     OBUMAIN_CheckMemoryAndEx_CheckMovERR:
139B 7F20           5591             MOV     R7,#CONST_STATE_MemoryEr        
139D 22             5592             RET
                    5593             
139E                5594     OBUMAIN_CheckMemoryAndEx_CheckMovxERR03:
                    5595             ;MOV    AR7,AR0
139E 7F22           5596             mov     r7,#CONST_STATE_ExMemoryEr02
13A0 22             5597             RET     
                    5598             
                    5599             
                    5600             
                    5601             
                    5602             
                    5603             
                    5604             
                    5605             
                    5606             
                    5607             
                    5608             
                    5609             
                    5610             
                    5611             
                    5612             
                    5613             
                    5614             
                    5615             
                    5616             
                    5617             
                    5618             
                    5619             
                    5620             
                    5621             
                    5622             
                    5623             
                    5624             
                    5625             
                    5626             
                    5627             
                    5628             
                    5629             
                    5630             
                    5631             
                    5632             
                    5633             
                    5634             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    93

                    5635             
                    5636             
                    5637             
                    5638             
                    5639             
                    5640     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////////////    
                    5641                     
                    5642                     
                    5643             END
                             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    94

SYMBOL TABLE LISTING
------ ----- -------


N A M E                                   T Y P E  V A L U E   ATTRIBUTES

?BA?OBUMAIN?BITD . . . . . . . . . . .    D SEG    0006H       REL=BITADDRESSABLE
?CO?OBUMAIN?STR. . . . . . . . . . . .    C SEG    0034H       REL=UNIT
?DT?OBUMAIN?DATAD. . . . . . . . . . .    D SEG    005AH       REL=UNIT
?DT?OBUMAIN?DATAVARD . . . . . . . . .    D SEG    0018H       REL=UNIT
?IDT?OBUMAIN?IDATAD. . . . . . . . . .    I SEG    0080H       REL=UNIT
?PR?OBUMAIN?MATER. . . . . . . . . . .    C SEG    13A1H       REL=UNIT
?PR?OBUMAIN?TF0_TIMER_1. . . . . . . .    C SEG    01F1H       REL=UNIT
?XDT?OBUMAIN?XDATAD. . . . . . . . . .    X SEG    0100H       REL=UNIT
ACC. . . . . . . . . . . . . . . . . .    D ADDR   00E0H   A   
AP_START . . . . . . . . . . . . . . .    C ADDR   0000H   R   SEG=?PR?OBUMAIN?MATER
AP_START_1 . . . . . . . . . . . . . .    C ADDR   0028H   R   SEG=?PR?OBUMAIN?MATER
AR0. . . . . . . . . . . . . . . . . .    D ADDR   0000H   A   
AR1. . . . . . . . . . . . . . . . . .    D ADDR   0001H   A   
AR3. . . . . . . . . . . . . . . . . .    D ADDR   0003H   A   
AR5. . . . . . . . . . . . . . . . . .    D ADDR   0005H   A   
AR6. . . . . . . . . . . . . . . . . .    D ADDR   0006H   A   
AR7. . . . . . . . . . . . . . . . . .    D ADDR   0007H   A   
B. . . . . . . . . . . . . . . . . . .    D ADDR   00F0H   A   
BITDBUF01. . . . . . . . . . . . . . .    D ADDR   0000H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF02. . . . . . . . . . . . . . .    D ADDR   0001H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF03. . . . . . . . . . . . . . .    D ADDR   0002H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF04. . . . . . . . . . . . . . .    D ADDR   0003H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF05. . . . . . . . . . . . . . .    D ADDR   0004H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF06. . . . . . . . . . . . . . .    D ADDR   0005H   R   SEG=?BA?OBUMAIN?BITD
BIT_5823RX_FLAG. . . . . . . . . . . .    B ADDR   0005H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_9600 . . . . . . . . . . . . . . .    B ADDR   0000H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_ACCESS . . . . . . . . . . . . . .    B ADDR   0002H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_ACTIVECARD . . . . . . . . . . . .    B ADDR   0004H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_BJ1219 . . . . . . . . . . . . . .    B ADDR   0004H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_BJPRE. . . . . . . . . . . . . . .    B ADDR   0004H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_BST. . . . . . . . . . . . . . . .    B ADDR   0003H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_BUFADDR. . . . . . . . . . . . . .    B ADDR   0000H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_CD . . . . . . . . . . . . . . . .    B ADDR   0004H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_CDJH . . . . . . . . . . . . . . .    B ADDR   0000H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_CD_SW. . . . . . . . . . . . . . .    B ADDR   0004H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_CELLINFO . . . . . . . . . . . . .    B ADDR   0005H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_CHANNELFLAG. . . . . . . . . . . .    B ADDR   0001H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_ERR_FLAG . . . . . . . . . . . . .    B ADDR   0002H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAM . . . . . . . . . . . . . . .    B ADDR   0002H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAMERR. . . . . . . . . . . . . .    B ADDR   0002H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAMICC. . . . . . . . . . . . . .    B ADDR   0001H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAMOK . . . . . . . . . . . . . .    B ADDR   0004H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAMTRAN . . . . . . . . . . . . .    B ADDR   0005H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_FIRSTTX. . . . . . . . . . . . . .    B ADDR   0000H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_GBICCINFO. . . . . . . . . . . . .    B ADDR   0003H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_GETRESULT. . . . . . . . . . . . .    B ADDR   0002H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_GETSECURE. . . . . . . . . . . . .    B ADDR   0003H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_HARDFLAG . . . . . . . . . . . . .    B ADDR   0000H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_HAVERECORDCELLID . . . . . . . . .    B ADDR   0003H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_INITCARD . . . . . . . . . . . . .    B ADDR   0005H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_INSERTCARD . . . . . . . . . . . .    B ADDR   0001H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_INSERTER . . . . . . . . . . . . .    B ADDR   0004H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_ISCONTACT. . . . . . . . . . . . .    B ADDR   0003H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_ISFRX. . . . . . . . . . . . . . .    B ADDR   0001H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_ISRXNB . . . . . . . . . . . . . .    B ADDR   0001H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_KEY. . . . . . . . . . . . . . . .    B ADDR   0002H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_MMITIRMSTART . . . . . . . . . . .    B ADDR   0005H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_N. . . . . . . . . . . . . . . . .    B ADDR   0001H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_PPS. . . . . . . . . . . . . . . .    B ADDR   0005H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_PRIVATEINFO. . . . . . . . . . . .    B ADDR   0004H.7 R   SEG=?BA?OBUMAIN?BITD
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    95

BIT_PROF . . . . . . . . . . . . . . .    B ADDR   0003H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_PROMF. . . . . . . . . . . . . . .    B ADDR   0002H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_RSTYPE . . . . . . . . . . . . . .    B ADDR   0003H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_RXSERIALBAUD . . . . . . . . . . .    B ADDR   0003H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_SEL1001. . . . . . . . . . . . . .    B ADDR   0005H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_SERFIRBYTE . . . . . . . . . . . .    B ADDR   0001H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_SERIALOVERTIMERX . . . . . . . . .    B ADDR   0000H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_SETMMI . . . . . . . . . . . . . .    B ADDR   0002H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_T0T1 . . . . . . . . . . . . . . .    B ADDR   0000H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_TMP. . . . . . . . . . . . . . . .    B ADDR   0000H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_USEROK . . . . . . . . . . . . . .    B ADDR   0005H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_VERIFY . . . . . . . . . . . . . .    B ADDR   0000H.5 R   SEG=?BA?OBUMAIN?BITD
BRT. . . . . . . . . . . . . . . . . .    N NUMB   009CH   A   
BUSY . . . . . . . . . . . . . . . . .    B ADDR   0020H.0 A   
CARDACTIVE_CASHCARD_COPYMONEY. . . . .    C ADDR   0F55H   R   SEG=?PR?OBUMAIN?MATER
CARDACTIVE_CASHCARD_COPYMONEY02. . . .    C ADDR   11CFH   R   SEG=?PR?OBUMAIN?MATER
CC1101_SPIOSINGLESOFT02_S. . . . . . .    C ADDR   1249H   R   SEG=?PR?OBUMAIN?MATER
CC1101_SPIOSINGLESOFT02_WRITEADDRLOOP.    C ADDR   1250H   R   SEG=?PR?OBUMAIN?MATER
CC1101_SPIOSINGLESOFT02_WRITEDAOVLOOP.    C ADDR   125AH   R   SEG=?PR?OBUMAIN?MATER
CCAP0H . . . . . . . . . . . . . . . .    N NUMB   00FAH   A   
CCAP0L . . . . . . . . . . . . . . . .    N NUMB   00EAH   A   
CCAP1H . . . . . . . . . . . . . . . .    N NUMB   00FBH   A   
CCAP1L . . . . . . . . . . . . . . . .    N NUMB   00EBH   A   
CCAP2H . . . . . . . . . . . . . . . .    N NUMB   00FCH   A   
CCAP2L . . . . . . . . . . . . . . . .    N NUMB   00ECH   A   
CCAP3H . . . . . . . . . . . . . . . .    N NUMB   00FDH   A   
CCAP3L . . . . . . . . . . . . . . . .    N NUMB   00EDH   A   
CCAP4H . . . . . . . . . . . . . . . .    N NUMB   00FEH   A   
CCAP4L . . . . . . . . . . . . . . . .    N NUMB   00EEH   A   
CCAP5H . . . . . . . . . . . . . . . .    N NUMB   00FFH   A   
CCAP5L . . . . . . . . . . . . . . . .    N NUMB   00EFH   A   
CCAPM0 . . . . . . . . . . . . . . . .    N NUMB   00DAH   A   
CCAPM1 . . . . . . . . . . . . . . . .    N NUMB   00DBH   A   
CCAPM2 . . . . . . . . . . . . . . . .    N NUMB   00DCH   A   
CCAPM3 . . . . . . . . . . . . . . . .    N NUMB   00DDH   A   
CCAPM4 . . . . . . . . . . . . . . . .    N NUMB   00DEH   A   
CCAPM5 . . . . . . . . . . . . . . . .    N NUMB   00DFH   A   
CCF0 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.0 A   
CCF1 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.1 A   
CCF2 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.2 A   
CCF3 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.3 A   
CCF4 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.4 A   
CCF5 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.5 A   
CCON . . . . . . . . . . . . . . . . .    N NUMB   00D8H   A   
CF . . . . . . . . . . . . . . . . . .    B ADDR   00D8H.7 A   
CH . . . . . . . . . . . . . . . . . .    N NUMB   00F9H   A   
CL . . . . . . . . . . . . . . . . . .    N NUMB   00E9H   A   
CMOD . . . . . . . . . . . . . . . . .    N NUMB   00D9H   A   
CONST_ACTIONTYPE_GETRAND . . . . . . .    N NUMB   0002H   A   
CONST_ACTIONTYPE_GETSECURE . . . . . .    N NUMB   0000H   A   
CONST_ACTIONTYPE_SETMMI. . . . . . . .    N NUMB   0004H   A   
CONST_ACTIONTYPE_SETSECURE . . . . . .    N NUMB   0001H   A   
CONST_ACTIONTYPE_TRANSFERCHANNEL . . .    N NUMB   0003H   A   
CONST_ACT_H. . . . . . . . . . . . . .    N NUMB   0003H   A   
CONST_ACT_H_H. . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_ACT_H_L. . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_ACT_L. . . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_ACT_L_H. . . . . . . . . . . . .    N NUMB   0006H   A   
CONST_ACT_L_L. . . . . . . . . . . . .    N NUMB   000AH   A   
CONST_ACT_M. . . . . . . . . . . . . .    N NUMB   0002H   A   
CONST_ACT_M_H. . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_ACT_M_L. . . . . . . . . . . . .    N NUMB   0006H   A   
CONST_ACT_V. . . . . . . . . . . . . .    N NUMB   0002H   A   
CONST_BAUD_115200. . . . . . . . . . .    N NUMB   0002H   A   
CONST_BAUD_115200PC. . . . . . . . . .    N NUMB   0003H   A   
CONST_BAUD_230000. . . . . . . . . . .    N NUMB   0004H   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    96

CONST_BAUD_38400 . . . . . . . . . . .    N NUMB   0001H   A   
CONST_BAUD_38400PC . . . . . . . . . .    N NUMB   0005H   A   
CONST_BAUD_9600. . . . . . . . . . . .    N NUMB   0000H   A   
CONST_BAUD_9600PC. . . . . . . . . . .    N NUMB   0006H   A   
CONST_BAUD_BITFULL12 . . . . . . . . .    N NUMB   000CH   A   
CONST_BAUD_BITFULL20 . . . . . . . . .    N NUMB   000EH   A   
CONST_BAUD_BITFULL28 . . . . . . . . .    N NUMB   0010H   A   
CONST_BAUD_BITFULL8. . . . . . . . . .    N NUMB   000BH   A   
CONST_BAUD_BITHALF12 . . . . . . . . .    N NUMB   000CH   A   
CONST_BAUD_CURRENTBITFULL. . . . . . .    N NUMB   00B3H   A   
CONST_BAUD_CURRENTBITHALF. . . . . . .    N NUMB   0058H   A   
CONST_BAUD_FULL115200. . . . . . . . .    N NUMB   001DH   A   
CONST_BAUD_FULL230000. . . . . . . . .    N NUMB   000FH   A   
CONST_BAUD_FULL38400 . . . . . . . . .    N NUMB   005DH   A   
CONST_BAUD_FULL9600. . . . . . . . . .    N NUMB   00B3H   A   
CONST_BAUD_HALF115200. . . . . . . . .    N NUMB   000DH   A   
CONST_BAUD_HALF230000. . . . . . . . .    N NUMB   0008H   A   
CONST_BAUD_HALF38400 . . . . . . . . .    N NUMB   002DH   A   
CONST_BAUD_HALF9600. . . . . . . . . .    N NUMB   0058H   A   
CONST_BAUD_HAND115200. . . . . . . . .    N NUMB   00F8H   A   
CONST_BAUD_HAND115200PC. . . . . . . .    N NUMB   00F3H   A   
CONST_BAUD_HAND230000. . . . . . . . .    N NUMB   00FCH   A   
CONST_BAUD_HAND38400 . . . . . . . . .    N NUMB   00E9H   A   
CONST_BAUD_HAND38400PC . . . . . . . .    N NUMB   00D8H   A   
CONST_BAUD_HAND9600. . . . . . . . . .    N NUMB   00A3H   A   
CONST_BAUD_HAND9600PC. . . . . . . . .    N NUMB   0060H   A   
CONST_BLACK_H. . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_BLACK_L. . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_BSTLIMIT . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_BSTLIMIT02 . . . . . . . . . . .    N NUMB   0064H   A   
CONST_CARD_CONSUME . . . . . . . . . .    N NUMB   0016H   A   
CONST_CARD_PASS. . . . . . . . . . . .    N NUMB   0017H   A   
CONST_CELLFILE_H . . . . . . . . . . .    N NUMB   0000H   A   
CONST_CELLFILE_L . . . . . . . . . . .    N NUMB   0009H   A   
CONST_DATA_VALUE1. . . . . . . . . . .    N NUMB   000FH   A   
CONST_DATA_VALUE2. . . . . . . . . . .    N NUMB   00DEH   A   
CONST_DSRC_ACTION. . . . . . . . . . .    N NUMB   0007H   A   
CONST_DSRC_ACTIONTYPE. . . . . . . . .    N NUMB   0009H   A   
CONST_DSRC_CHANNELIDICC. . . . . . . .    N NUMB   0001H   A   
CONST_DSRC_CHANNELIDSAM. . . . . . . .    N NUMB   0002H   A   
CONST_DSRC_CONTAIN . . . . . . . . . .    N NUMB   000AH   A   
CONST_DSRC_DID . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_DSRC_FILDIDAPPKEY. . . . . . . .    N NUMB   0000H   A   
CONST_DSRC_FILDIDCONSUME . . . . . . .    N NUMB   0002H   A   
CONST_DSRC_FILDIDHOLD. . . . . . . . .    N NUMB   0003H   A   
CONST_DSRC_FILDIDVEHICLE . . . . . . .    N NUMB   0001H   A   
CONST_DSRC_FILL. . . . . . . . . . . .    N NUMB   000BH   A   
CONST_DSRC_HEAD. . . . . . . . . . . .    N NUMB   0006H   A   
CONST_DSRC_LLCCTRL . . . . . . . . . .    N NUMB   0005H   A   
CONST_DSRC_MACCTRL . . . . . . . . . .    N NUMB   0004H   A   
CONST_ESAMCELLFILE_H . . . . . . . . .    N NUMB   00EFH   A   
CONST_ESAMCELLFILE_L . . . . . . . . .    N NUMB   0007H   A   
CONST_ETC_INPUT. . . . . . . . . . . .    N NUMB   0003H   A   
CONST_FALSH_POWERH . . . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_POWERL . . . . . . . . . .    N NUMB   00F7H   A   
CONST_FALSH_PREFLAG02H . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_PREFLAG02L . . . . . . . .    N NUMB   00F5H   A   
CONST_FALSH_PREFLAG03H . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_PREFLAG03L . . . . . . . .    N NUMB   00F6H   A   
CONST_FALSH_PREFLAGH . . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_PREFLAGL . . . . . . . . .    N NUMB   00F4H   A   
CONST_FALSH_PREFLAGLEN . . . . . . . .    N NUMB   0001H   A   
CONST_FLAG_INPUT . . . . . . . . . . .    N NUMB   0000H   A   
CONST_FLAG_OUTPUT. . . . . . . . . . .    N NUMB   0001H   A   
CONST_FLASH_0002H. . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0002L. . . . . . . . . . .    N NUMB   0058H   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    97

CONST_FLASH_0002LEN. . . . . . . . . .    N NUMB   0004H   A   
CONST_FLASH_0012H. . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0012L. . . . . . . . . . .    N NUMB   005CH   A   
CONST_FLASH_0012LEN. . . . . . . . . .    N NUMB   0028H   A   
CONST_FLASH_0015H. . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0015L. . . . . . . . . . .    N NUMB   0084H   A   
CONST_FLASH_0015LEN. . . . . . . . . .    N NUMB   002BH   A   
CONST_FLASH_0019GBLEN. . . . . . . . .    N NUMB   002BH   A   
CONST_FLASH_0019H. . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0019L. . . . . . . . . . .    N NUMB   00AFH   A   
CONST_FLASH_0019LEN. . . . . . . . . .    N NUMB   003CH   A   
CONST_FLASH_BEACONIDUNIXTIMEH. . . . .    N NUMB   0072H   A   
CONST_FLASH_BEACONIDUNIXTIMEL. . . . .    N NUMB   00ECH   A   
CONST_FLASH_BEACONIDUNIXTIMELEN. . . .    N NUMB   0008H   A   
CONST_FLASH_BLOCK01. . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_CARDTYPELEN. . . . . . . .    N NUMB   0001H   A   
CONST_FLASH_FILELEN. . . . . . . . . .    N NUMB   00ECH   A   
CONST_FLASH_LASTCARDH. . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_LASTCARDL. . . . . . . . .    N NUMB   00EBH   A   
CONST_FLASH_STARTHIGH. . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_STARTLOW . . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYS0020H . . . . . . . . .    N NUMB   006CH   A   
CONST_FLASH_SYS0020L . . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYS0020NUMH. . . . . . . .    N NUMB   006AH   A   
CONST_FLASH_SYS0020NUML. . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYSINFOH . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_SYSINFOL . . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYSINFOLEN . . . . . . . .    N NUMB   0058H   A   
CONST_GDO2_MCSM2 . . . . . . . . . . .    N NUMB   0002H   A   
CONST_GDO2_VALUE . . . . . . . . . . .    N NUMB   0046H   A   
CONST_GSM_MAXNUM . . . . . . . . . . .    N NUMB   00F0H   A   
CONST_GSM_NUM. . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_GSM_PJNUM. . . . . . . . . . . .    N NUMB   0014H   A   
CONST_HANDSECOND . . . . . . . . . . .    N NUMB   0015H   A   
CONST_HOLD_5823RX. . . . . . . . . . .    N NUMB   0000H   A   
CONST_HOLD_5823TX. . . . . . . . . . .    N NUMB   0001H   A   
CONST_INPUT_ISENABLE . . . . . . . . .    N NUMB   0001H   A   
CONST_LEN_BITBUF . . . . . . . . . . .    N NUMB   0006H   A   
CONST_LEN_POWUP. . . . . . . . . . . .    N NUMB   0001H   A   
CONST_LEN_RXBUF. . . . . . . . . . . .    N NUMB   0080H   A   
CONST_LEN_RXBUFEND . . . . . . . . . .    N NUMB   0026H   A   
CONST_LEN_RXBUFPRE . . . . . . . . . .    N NUMB   005AH   A   
CONST_LEN_RXCRC. . . . . . . . . . . .    N NUMB   0002H   A   
CONST_LEN_STACK. . . . . . . . . . . .    N NUMB   0057H   A   
CONST_LEN_TXBUF. . . . . . . . . . . .    N NUMB   0080H   A   
CONST_LEN_TXCRC. . . . . . . . . . . .    N NUMB   0002H   A   
CONST_LEN_VARBUF . . . . . . . . . . .    N NUMB   0018H   A   
CONST_LEN_WORKBUF. . . . . . . . . . .    N NUMB   0008H   A   
CONST_LEN_WORKBUF1 . . . . . . . . . .    N NUMB   0008H   A   
CONST_LEN_WORKBUF2 . . . . . . . . . .    N NUMB   0000H   A   
CONST_LHX_FLAG . . . . . . . . . . . .    N NUMB   0002H   A   
CONST_MAX_RXNUM. . . . . . . . . . . .    N NUMB   0005H   A   
CONST_MCU_WKCTH. . . . . . . . . . . .    N NUMB   0008H   A   
CONST_MCU_WKCTL. . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_MF_DECREMENT . . . . . . . . . .    N NUMB   0002H   A   
CONST_MF_INCREMENT . . . . . . . . . .    N NUMB   0003H   A   
CONST_MF_RC500DECREMENT. . . . . . . .    N NUMB   00C0H   A   
CONST_MF_RC500INCREMENT. . . . . . . .    N NUMB   00C1H   A   
CONST_MF_READ. . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_MF_RESTOR. . . . . . . . . . . .    N NUMB   0004H   A   
CONST_MF_WRITE . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_MTC_INPUT. . . . . . . . . . . .    N NUMB   0001H   A   
CONST_PPS_115200 . . . . . . . . . . .    N NUMB   0018H   A   
CONST_PPS_230000 . . . . . . . . . . .    N NUMB   0096H   A   
CONST_PPS_38400. . . . . . . . . . . .    N NUMB   0013H   A   
CONST_PPS_9600 . . . . . . . . . . . .    N NUMB   0010H   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    98

CONST_PRO_OVERTIME2S . . . . . . . . .    N NUMB   00FAH   A   
CONST_RTCOVERFLOW. . . . . . . . . . .    N NUMB   0090H   A   
CONST_RTC_OFF. . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_RTC_ON . . . . . . . . . . . . .    N NUMB   0055H   A   
CONST_SOF. . . . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_SOFTBYTESP . . . . . . . . . . .    N NUMB   0014H   A   
CONST_SOFTFIRSTSCANTIME. . . . . . . .    N NUMB   0010H   A   
CONST_SOFTFIRSTSCANTIMEXX. . . . . . .    N NUMB   00FFH   A   
CONST_SOFTSECOND . . . . . . . . . . .    N NUMB   0070H   A   
CONST_SSRC_FID . . . . . . . . . . . .    N NUMB   000CH   A   
CONST_STATE_5823INIER. . . . . . . . .    N NUMB   0007H   A   
CONST_STATE_5823SLEEPER. . . . . . . .    N NUMB   0008H   A   
CONST_STATE_ACCEPTOVER . . . . . . . .    N NUMB   0003H   A   
CONST_STATE_ACCEPTOVERLEN. . . . . . .    N NUMB   0004H   A   
CONST_STATE_ACTCARDINVALID . . . . . .    N NUMB   0006H   A   
CONST_STATE_ACTIVEFAIL . . . . . . . .    N NUMB   0004H   A   
CONST_STATE_AUTHER . . . . . . . . . .    N NUMB   0006H   A   
CONST_STATE_BASE01ANTICOLL . . . . . .    N NUMB   001DH   A   
CONST_STATE_BASE01CONTACT. . . . . . .    N NUMB   0015H   A   
CONST_STATE_BASE01ESAMDF01 . . . . . .    N NUMB   0014H   A   
CONST_STATE_BASE01RATS . . . . . . . .    N NUMB   001FH   A   
CONST_STATE_BASE01RE . . . . . . . . .    N NUMB   001CH   A   
CONST_STATE_BASE01SEL. . . . . . . . .    N NUMB   001EH   A   
CONST_STATE_BASE02ANTICOLL . . . . . .    N NUMB   0019H   A   
CONST_STATE_BASE02CONTACT. . . . . . .    N NUMB   0016H   A   
CONST_STATE_BASE02RATS . . . . . . . .    N NUMB   001BH   A   
CONST_STATE_BASE02RE . . . . . . . . .    N NUMB   0018H   A   
CONST_STATE_BASE02SEL. . . . . . . . .    N NUMB   001AH   A   
CONST_STATE_BASEESAMDF01 . . . . . . .    N NUMB   000BH   A   
CONST_STATE_BASEN01INIT. . . . . . . .    N NUMB   0013H   A   
CONST_STATE_BASENINIT. . . . . . . . .    N NUMB   000AH   A   
CONST_STATE_CARDPREDEAL0002. . . . . .    N NUMB   000DH   A   
CONST_STATE_CARDPREDEAL0012. . . . . .    N NUMB   000EH   A   
CONST_STATE_CARDPREDEAL0015. . . . . .    N NUMB   000FH   A   
CONST_STATE_CARDPREDEAL0019. . . . . .    N NUMB   0010H   A   
CONST_STATE_CARDPREDEAL1001. . . . . .    N NUMB   000CH   A   
CONST_STATE_CARDPREDEAL3F00. . . . . .    N NUMB   0011H   A   
CONST_STATE_CARDPREDEAL81. . . . . . .    N NUMB   0012H   A   
CONST_STATE_EXMEMORYER . . . . . . . .    N NUMB   0021H   A   
CONST_STATE_EXMEMORYER02 . . . . . . .    N NUMB   0022H   A   
CONST_STATE_FALSE. . . . . . . . . . .    N NUMB   00FFH   A   
CONST_STATE_GETSECURESELFILEER . . . .    N NUMB   0009H   A   
CONST_STATE_ILLEGALACTCARD . . . . . .    N NUMB   0005H   A   
CONST_STATE_ILLEGALINPUTCARD . . . . .    N NUMB   0002H   A   
CONST_STATE_INPUTCARDINVALID . . . . .    N NUMB   0003H   A   
CONST_STATE_INPUTFAIL. . . . . . . . .    N NUMB   0001H   A   
CONST_STATE_MEMORYER . . . . . . . . .    N NUMB   0020H   A   
CONST_STATE_RSTCPUER . . . . . . . . .    N NUMB   0005H   A   
CONST_STATE_SERIALACCPET . . . . . . .    N NUMB   0001H   A   
CONST_STATE_SERIALOVERTIME . . . . . .    N NUMB   0002H   A   
CONST_STATE_TEST . . . . . . . . . . .    N NUMB   0017H   A   
CONST_STATE_TRUE . . . . . . . . . . .    N NUMB   0000H   A   
CONST_SYS_55 . . . . . . . . . . . . .    N NUMB   0055H   A   
CONST_SYS_AA . . . . . . . . . . . . .    N NUMB   00AAH   A   
CONST_SYS_OBUIDLEN . . . . . . . . . .    N NUMB   0004H   A   
CONST_SYS_POWERONTIMER . . . . . . . .    N NUMB   000AH   A   
CONST_SYS_PREFLAG. . . . . . . . . . .    N NUMB   0088H   A   
CONST_SYS_RTCOVERTIME. . . . . . . . .    N NUMB   0064H   A   
CONST_SYS_TRADECONFINE . . . . . . . .    N NUMB   00FFH   A   
CONST_TIMEER02 . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_TIMEER03 . . . . . . . . . . . .    N NUMB   00FEH   A   
CONST_TIMEER04 . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_VSTLIMIT . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_WHITE_H. . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_WHITE_L. . . . . . . . . . . . .    N NUMB   0031H   A   
CONST_WORKSTAION_0 . . . . . . . . . .    N NUMB   0000H   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE    99

CONST_WORKSTAION_1 . . . . . . . . . .    N NUMB   0001H   A   
CONST_WORKSTAION_2 . . . . . . . . . .    N NUMB   0002H   A   
CONST_WORKSTAION_3 . . . . . . . . . .    N NUMB   0003H   A   
CON_LEN_BUFLEN . . . . . . . . . . . .    N NUMB   007DH   A   
CR . . . . . . . . . . . . . . . . . .    B ADDR   00D8H.6 A   
DATA_CARDNO. . . . . . . . . . . . . .    D ADDR   000FH   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_CMDTYPE . . . . . . . . . . . . .    D ADDR   0014H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_DATAP . . . . . . . . . . . . . .    D ADDR   0008H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_DSRCRXLEN . . . . . . . . . . . .    D ADDR   0007H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_DSRCTXLEN . . . . . . . . . . . .    D ADDR   0006H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_IRQEN . . . . . . . . . . . . . .    D ADDR   000EH   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_MFCOM . . . . . . . . . . . . . .    D ADDR   0015H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_NCONTACTTYPE. . . . . . . . . . .    D ADDR   0016H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_OBUID . . . . . . . . . . . . . .    D ADDR   000AH   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_POWERONTIMER. . . . . . . . . . .    D ADDR   0017H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_RXBUF . . . . . . . . . . . . . .    D ADDR   0000H   R   SEG=?DT?OBUMAIN?DATAD
DATA_RXBUFCPUSTART . . . . . . . . . .    D ADDR   0003H   R   SEG=?DT?OBUMAIN?DATAD
DATA_VARBAUDFULL . . . . . . . . . . .    D ADDR   0001H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_VARBAUDHALF . . . . . . . . . . .    D ADDR   0000H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_VER . . . . . . . . . . . . . . .    D ADDR   0000H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_WORKBUF2. . . . . . . . . . . . .    D ADDR   0000H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_XDATAP. . . . . . . . . . . . . .    D ADDR   0009H   R   SEG=?DT?OBUMAIN?DATAVARD
DPH. . . . . . . . . . . . . . . . . .    D ADDR   0083H   A   
DPL. . . . . . . . . . . . . . . . . .    D ADDR   0082H   A   
DR_00_0D . . . . . . . . . . . . . . .    C ADDR   12A4H   R   SEG=?PR?OBUMAIN?MATER
DR_00_0D0EOV . . . . . . . . . . . . .    C ADDR   12AFH   R   SEG=?PR?OBUMAIN?MATER
DR_00_0E . . . . . . . . . . . . . . .    C ADDR   12ACH   R   SEG=?PR?OBUMAIN?MATER
EA . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.7 A   
EPCAI. . . . . . . . . . . . . . . . .    B ADDR   00A8H.6 A   
EPCA_LVD . . . . . . . . . . . . . . .    B ADDR   00A8H.6 A   
ES . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.4 A   
ET0. . . . . . . . . . . . . . . . . .    B ADDR   00A8H.1 A   
ET1. . . . . . . . . . . . . . . . . .    B ADDR   00A8H.3 A   
EX0. . . . . . . . . . . . . . . . . .    B ADDR   00A8H.0 A   
EX1. . . . . . . . . . . . . . . . . .    B ADDR   00A8H.2 A   
FUN_LCD_HVTRANSFER . . . . . . . . . .    C ADDR   -----       EXT
FUN_OBUMAIN_RST. . . . . . . . . . . .    C ADDR   017CH   R   SEG=?PR?OBUMAIN?MATER
GSM_SERIALINTRX_RXRIGHT. . . . . . . .    C ADDR   -----       EXT
IDATA_POWUP. . . . . . . . . . . . . .    I ADDR   0028H   R   SEG=?IDT?OBUMAIN?IDATAD
IDATA_RXBUFTWOBLOCK. . . . . . . . . .    I ADDR   0000H   R   SEG=?IDT?OBUMAIN?IDATAD
IDATA_RXCRC. . . . . . . . . . . . . .    I ADDR   0026H   R   SEG=?IDT?OBUMAIN?IDATAD
IDATA_STACK. . . . . . . . . . . . . .    I ADDR   0029H   R   SEG=?IDT?OBUMAIN?IDATAD
IDATA_TXCRC. . . . . . . . . . . . . .    X ADDR   0080H   R   SEG=?XDT?OBUMAIN?XDATAD
IE . . . . . . . . . . . . . . . . . .    D ADDR   00A8H   A   
IE0. . . . . . . . . . . . . . . . . .    B ADDR   0088H.1 A   
IE1. . . . . . . . . . . . . . . . . .    B ADDR   0088H.3 A   
IE2. . . . . . . . . . . . . . . . . .    N NUMB   00AFH   A   
INT_INSERTACTIVE . . . . . . . . . . .    C ADDR   0048H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_INSERTACTIVE_OVER. . . . . . . . .    C ADDR   005EH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_INSERTACTIVE_RET . . . . . . . . .    C ADDR   005FH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_INVALID. . . . . . . . . . . . . .    C ADDR   0017H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_T0_OVER. . . . . . . . . . . . . .    C ADDR   007DH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_T0_RET . . . . . . . . . . . . . .    C ADDR   007EH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_TIMER0 . . . . . . . . . . . . . .    C ADDR   0062H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UART . . . . . . . . . . . . . . .    C ADDR   0000H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UART_OVER. . . . . . . . . . . . .    C ADDR   0016H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UART_POINT . . . . . . . . . . . .    C ADDR   00C1H   R   SEG=?PR?OBUMAIN?MATER
INT_UNIXACTIVE . . . . . . . . . . . .    C ADDR   0081H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UNIXACTIVE_01. . . . . . . . . . .    C ADDR   0096H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UNIXACTIVE_OVER. . . . . . . . . .    C ADDR   00AAH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_WAVEACTIVE . . . . . . . . . . . .    C ADDR   0030H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_WAVEACTIVE_S . . . . . . . . . . .    C ADDR   0033H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
IP . . . . . . . . . . . . . . . . . .    D ADDR   00B8H   A   
IPH. . . . . . . . . . . . . . . . . .    N NUMB   00B7H   A   
ISP_CONTR. . . . . . . . . . . . . . .    N NUMB   00C7H   A   
IT0. . . . . . . . . . . . . . . . . .    B ADDR   0088H.0 A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   100

IT1. . . . . . . . . . . . . . . . . .    B ADDR   0088H.2 A   
MONEY. . . . . . . . . . . . . . . . .    D ADDR   0002H   R   SEG=?DT?OBUMAIN?DATAVARD
OBUMAIN_BASEINIT02_ESAMERRRR . . . . .    C ADDR   0C86H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_ESAMRIGHT . . . . .    C ADDR   0C8CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITCONTACT . . . .    C ADDR   0BB1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITCONTACTSEC. . .    C ADDR   0BA8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITESAMCARD. . . .    C ADDR   0BA0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITNCONTACT. . . .    C ADDR   0BC5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITNCONTACTOVER. .    C ADDR   0C3DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITNCONTACTSEC . .    C ADDR   0BC2H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITUSERCARD. . . .    C ADDR   0BA3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_ISPRO . . . . . . .    C ADDR   0C18H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_OVER02. . . . . . .    C ADDR   0C8EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_PPS . . . . . . . .    C ADDR   0C41H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_REQUEST . . . . . .    C ADDR   0BFEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_REQUEST01 . . . . .    C ADDR   0BFCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_SELECTDF01. . . . .    C ADDR   0C41H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_SELECTDF0102. . . .    C ADDR   0C4BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_TAMPERED. . . . . .    C ADDR   0B87H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_TAMPEREDOVER. . . .    C ADDR   0B89H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_ESAMSYSINFOERR. . . .    C ADDR   0E6DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITCONTACT . . . . .    C ADDR   0AE0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITCONTACTSEC. . . .    C ADDR   0ADBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITESAMCARD. . . . .    C ADDR   0AD3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITNCONTACT. . . . .    C ADDR   0AF3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITNCONTACTOVER. . .    C ADDR   0B53H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITNCONTACTSEC . . .    C ADDR   0AF0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITNSELDF01. . . . .    C ADDR   0B51H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITUSERCARD. . . . .    C ADDR   0AD6H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_ISPRO . . . . . . . .    C ADDR   0B2FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_OVER. . . . . . . . .    C ADDR   0B5AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_OVER02. . . . . . . .    C ADDR   0B5AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_PPS . . . . . . . . .    C ADDR   0B57H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_REQUEST . . . . . . .    C ADDR   0B15H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_REQUEST01 . . . . . .    C ADDR   0B13H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_SELECTDF01. . . . . .    C ADDR   0B57H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_TAMPERED. . . . . . .    C ADDR   0AACH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_TAMPEREDOVER. . . . .    C ADDR   0AAEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CP01. . . . . . . . . . .    C ADDR   10E8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CP02. . . . . . . . . . .    C ADDR   10EFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CP03. . . . . . . . . . .    C ADDR   10F6H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CP04. . . . . . . . . . .    C ADDR   10F8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CPDIF . . . . . . . . . .    C ADDR   1114H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CPSTARTLOOP . . . . . . .    C ADDR   10E7H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_NZC . . . . . . . . . . .    C ADDR   1051H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_OVER. . . . . . . . . . .    C ADDR   112BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_VERRCPLOOP. . . . . . . .    C ADDR   10FCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_ZC. . . . . . . . . . . .    C ADDR   1112H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_ZZSC. . . . . . . . . . .    C ADDR   108EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_APPAGAIN. . . . . . . . .    C ADDR   100FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_B . . . . . . . . . . . .    C ADDR   0FC4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_ERR . . . . . . . . . . .    C ADDR   0FE9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_OVER. . . . . . . . . . .    C ADDR   0FF8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_SECUEED . . . . . . . . .    C ADDR   0FCEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_SECUEEDKQ . . . . . . . .    C ADDR   0FD1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_SECUEEDKQOVER . . . . . .    C ADDR   0FE7H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_SECUEEDNOKQ . . . . . . .    C ADDR   0FE2H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_03. . . . . . . . .    C ADDR   0303H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ACTIVEESAMHTHOK . .    C ADDR   03C5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ACTIVEOBU . . . . .    C ADDR   037BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ACTIVEOVER. . . . .    C ADDR   03D9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ACTIVESELDF01OK . .    C ADDR   03AFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_BEEP. . . . . . . .    C ADDR   04BAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_BEEPLOOP. . . . . .    C ADDR   04C8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CARDDIS . . . . . .    C ADDR   03E6H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CARDDISZZ . . . . .    C ADDR   02F7H   R   SEG=?PR?OBUMAIN?MATER
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   101

OBUMAIN_CARDACTIVE_CP01. . . . . . . .    C ADDR   02BBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CP02. . . . . . . .    C ADDR   02C2H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CP03. . . . . . . .    C ADDR   02C9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CP04. . . . . . . .    C ADDR   02CBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CPDIF . . . . . . .    C ADDR   049AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CPSTARTLOOP . . . .    C ADDR   02BAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_DISANDPOWERDOWN . .    C ADDR   0404H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_DISOVER . . . . . .    C ADDR   0502H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_GDFXOBU . . . . . .    C ADDR   0306H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_GDFXOBUDISHV. . . .    C ADDR   0330H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_HVDIF . . . . . . .    C ADDR   04AFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_INSERT. . . . . . .    C ADDR   0440H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_INSERT02. . . . . .    C ADDR   0457H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_KPCW. . . . . . . .    C ADDR   04E8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_LOWVO . . . . . . .    C ADDR   042EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_NOCARD. . . . . . .    C ADDR   04F5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_NZC . . . . . . . .    C ADDR   01FBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_OVER. . . . . . . .    C ADDR   0500H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_OVEROV. . . . . . .    C ADDR   04D9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_READESAMHTHOK . . .    C ADDR   035AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_READOVER. . . . . .    C ADDR   036EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_READSELDF01OK . . .    C ADDR   0344H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_REBEACONID. . . . .    C ADDR   01CCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_REBEACONID22. . . .    C ADDR   01D1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_REBEACONIDOVER. . .    C ADDR   01DEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_SC. . . . . . . . .    C ADDR   04DBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_START . . . . . . .    C ADDR   01BBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_VERRCPLOOP. . . . .    C ADDR   02CFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_VERRCPLOOPZZ. . . .    C ADDR   02E4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZC. . . . . . . . .    C ADDR   02E8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCKQ. . . . . . . .    C ADDR   0481H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCKQ02. . . . . . .    C ADDR   047FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCKQOVER. . . . . .    C ADDR   0497H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCNOKQ. . . . . . .    C ADDR   0492H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCZZ. . . . . . . .    C ADDR   02EEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZZSC. . . . . . . .    C ADDR   0238H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CARDINFO . .    C ADDR   116BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CASHCARD . .    C ADDR   118DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CASHCARDCPV.    C ADDR   11C9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CKOVER . . .    C ADDR   1152H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CPBF . . . .    C ADDR   1133H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_GETCPUINFO .    C ADDR   1175H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_IN . . . . .    C ADDR   1236H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_INFO . . . .    C ADDR   118AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_MONEY. . . .    C ADDR   11DAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_NOCARDINFO .    C ADDR   1152H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_NOCARDSETMMIOV  C ADDR   1168H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_OTHER. . . .    C ADDR   11FBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_OVER . . . .    C ADDR   1209H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_OVER02 . . .    C ADDR   1243H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_PASSCARD . .    C ADDR   11EAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_START. . . .    C ADDR   114FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BDCP . . . . .    C ADDR   0EB9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BDCPLOOP . . .    C ADDR   0EB9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BDQLLOOP . . .    C ADDR   0EB9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BTVH . . . . .    C ADDR   023BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BTVH02 . . . .    C ADDR   1091H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BTVHZZ . . . .    C ADDR   0241H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CARDINFO . . .    C ADDR   0EF1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CASHCARD . . .    C ADDR   0F13H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CASHCARDCPV. .    C ADDR   0F4FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CKOVER . . . .    C ADDR   0ED8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CPBF . . . . .    C ADDR   0EB9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_DISPLAYINFO. .    C ADDR   01DEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_GETCPUINFO . .    C ADDR   0EFBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_INFO . . . . .    C ADDR   0F10H   R   SEG=?PR?OBUMAIN?MATER
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   102

OBUMAIN_CARDINFODISPLAY_MONEY. . . . .    C ADDR   0F60H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_NOCARDINFO . .    C ADDR   0ED8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_NOCARDSETMMIOV    C ADDR   0EEEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_OTHER. . . . .    C ADDR   0F93H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_OVER . . . . .    C ADDR   0FACH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_PASSCARD . . .    C ADDR   0F79H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_START. . . . .    C ADDR   0ED5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_TRADEERR . . .    C ADDR   0F9FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_ZC . . . . . .    C ADDR   01E4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_0019GB . . . . . .    C ADDR   0D70H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_0019GD . . . . . .    C ADDR   0D96H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_COPYMONEY. . . . .    C ADDR   0CD4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_ESAMPREDEALOVER. .    C ADDR   0E95H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_OVER . . . . . . .    C ADDR   0EB5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_PPS. . . . . . . .    C ADDR   0CADH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_PREDEALCPUCARD . .    C ADDR   0CADH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_PREDEALMF. . . . .    C ADDR   0DBCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READ0002 . . . . .    C ADDR   0CBCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READ0012 . . . . .    C ADDR   0CECH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READ0015 . . . . .    C ADDR   0D10H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READ0019 . . . . .    C ADDR   0D34H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READBLOCK01. . . .    C ADDR   0DBEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READBLOCK0101. . .    C ADDR   0DDBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READBLOCK04. . . .    C ADDR   0DDBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READBLOCK10. . . .    C ADDR   0DDBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READSYSINFO. . . .    C ADDR   0C9CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_RECORDCARDTYPE . .    C ADDR   0DDBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_SELECT3F00R. . . .    C ADDR   0E53H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_TAMPERED . . . . .    C ADDR   0EB3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_TAMPEREDOVER . . .    C ADDR   0EB5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_USER . . . . . . .    C ADDR   0CA4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_USEROVER . . . . .    C ADDR   0E30H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0002. . . . .    C ADDR   0CCDH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0012. . . . .    C ADDR   0D03H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0015. . . . .    C ADDR   0D27H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0019GB. . . .    C ADDR   0D87H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0019GD. . . .    C ADDR   0DADH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITESYSINFO . . .    C ADDR   0E6FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_DISPLAYCD . . . . . .    C ADDR   0139H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_DISPLAYCDOVER . . . .    C ADDR   0150H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_DISPLAYMOVE . . . . .    C ADDR   0137H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_DISPLAYNCD. . . . . .    C ADDR   0149H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_REBEACONID. . . . . .    C ADDR   0158H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_REBEACONIDOVER. . . .    C ADDR   0168H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_REBEACONIDOVER02. . .    C ADDR   016AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_SELECT3F00. . . . . .    C ADDR   0119H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX2_CHECKMOVX. .    C ADDR   1358H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX2_CHECKMOVXISOK   C ADDR   1362H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX2_CHECKMOVXISOK2  C ADDR   136FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOV. . .    C ADDR   137DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVERR .    C ADDR   139BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVISOK.    C ADDR   1386H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVISOK2    C ADDR   138EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVXERR.    C ADDR   1398H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVXERR03   C ADDR   139EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_00. . . . . . . . . . . . .    C ADDR   12A1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_01. . . . . . . . . . . . .    C ADDR   12B1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_02. . . . . . . . . . . . .    C ADDR   12B9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_03. . . . . . . . . . . . .    C ADDR   12C1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_04. . . . . . . . . . . . .    C ADDR   12C9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_05. . . . . . . . . . . . .    C ADDR   12D1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_06. . . . . . . . . . . . .    C ADDR   12D9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_OVER. . . . . . . . . . . .    C ADDR   12E1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_CHECKED . . . . . . . .    C ADDR   004EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_CHECKMEMORYERR. . . . .    C ADDR   0010H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_CHECKMEMORYOVER . . . .    C ADDR   0013H   R   SEG=?PR?OBUMAIN?MATER
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   103

OBUMAIN_MASTER_MAINSLEEP . . . . . . .    C ADDR   0081H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_MEMORYCLR . . . . . . .    C ADDR   00DBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_MEMORYCLR00 . . . . . .    C ADDR   0034H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_PINSLEEP_RTCOFF. . . . . . . .    C ADDR   00EDH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINSLEEP_RTCON . . . . . . . .    C ADDR   00D5H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINSLEEP_RTCSWOVER . . . . . .    C ADDR   010FH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINUNSLEEP_RTCOFF. . . . . . .    C ADDR   01A4H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINUNSLEEP_RTCON . . . . . . .    C ADDR   0192H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINUNSLEEP_RTCSWOVER . . . . .    C ADDR   01B4H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_RST_OVER . . . . . . . . . . .    C ADDR   017FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_SELECTDF01_ESAMRIGHT . . . . .    C ADDR   1034H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_SELECTDF01_OVER. . . . . . . .    C ADDR   1036H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_SYS_OVER . . . . . . . . . . .    C ADDR   1014H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_TIMERX_OVER. . . . . . . . . .    C ADDR   1046H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVENOCARD_DEAL. . . . .    C ADDR   0519H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVENOCARD_YD. . . . . .    C ADDR   0531H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_10OV. . . . . . . .    C ADDR   0806H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_ACTIONTYPE. . . . .    C ADDR   08EAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_AGAINVST. . . . . .    C ADDR   083CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_AGAINVSTCON . . . .    C ADDR   083CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BEACONID. . . . . .    C ADDR   0726H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BEACONID2 . . . . .    C ADDR   081CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST . . . . .    C ADDR   07ECH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST00 . . . .    C ADDR   085FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST01 . . . .    C ADDR   0868H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST02 . . . .    C ADDR   0871H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST03 . . . .    C ADDR   087AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCASTOV . . . .    C ADDR   0816H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BST10 . . . . . . .    C ADDR   07FEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BST100. . . . . . .    C ADDR   0803H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BSTOVER . . . . . .    C ADDR   080EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_DESL. . . . . . . .    C ADDR   0991H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_DISPLAY . . . . . .    C ADDR   09C4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_DSRCSENDOLD . . . .    C ADDR   08D2H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_END . . . . . . . .    C ADDR   09CDH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_FRISTRX . . . . . .    C ADDR   0889H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_GETBST. . . . . . .    C ADDR   06B0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_GETRAND . . . . . .    C ADDR   0931H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_GETSECURE . . . . .    C ADDR   08F0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_HDLCTX01OVER. . . .    C ADDR   07C0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_LOOP. . . . . . . .    C ADDR   07C0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NBITHIGH. . . . . .    C ADDR   08CAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NBITLOW . . . . . .    C ADDR   08CFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NBITOVER. . . . . .    C ADDR   08E8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOEA02X . . . . . .    C ADDR   099AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOEAOV. . . . . . .    C ADDR   07D3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOEAOV01. . . . . .    C ADDR   08E5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOSETMMI. . . . . .    C ADDR   08E0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOTBROADCAST. . . .    C ADDR   0854H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OTHER . . . . . . .    C ADDR   0991H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OVDELAY . . . . . .    C ADDR   077EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OVER. . . . . . . .    C ADDR   099DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OVERXXXX. . . . . .    C ADDR   059BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OVERZZ. . . . . . .    C ADDR   08C1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PPS . . . . . . . .    C ADDR   083CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PRE . . . . . . . .    C ADDR   05F3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PRE02 . . . . . . .    C ADDR   062CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PRE03 . . . . . . .    C ADDR   0664H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PREDEAL . . . . . .    C ADDR   09C1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PREPRE. . . . . . .    C ADDR   060DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PRESS . . . . . . .    C ADDR   05F0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_RESPONSE. . . . . .    C ADDR   0991H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_RXBST . . . . . . .    C ADDR   0712H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SE1001ED. . . . . .    C ADDR   091CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SE1001PPS . . . . .    C ADDR   0902H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SECONDRX. . . . . .    C ADDR   08AFH   R   SEG=?PR?OBUMAIN?MATER
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   104

OBUMAIN_WAVEACTIVE_SELECT1001. . . . .    C ADDR   08F9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SELECTED. . . . . .    C ADDR   0927H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SENDVST . . . . . .    C ADDR   0741H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SENDVST2. . . . . .    C ADDR   0837H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SETMMI. . . . . . .    C ADDR   0976H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SETMMIEA. . . . . .    C ADDR   07CDH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SETSECURE . . . . .    C ADDR   092CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SLEEP . . . . . . .    C ADDR   083AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SPANESAMRST . . . .    C ADDR   0782H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SPANESAMRSTH. . . .    C ADDR   078BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SPANESAMRSTHH . . .    C ADDR   078DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SWGSM . . . . . . .    C ADDR   0989H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TAMPERED. . . . . .    C ADDR   06F5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TAMPEREDOVER. . . .    C ADDR   06F7H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERCHANNEL . .    C ADDR   0936H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERCHANNELSELOV   C ADDR   095FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERPPS02 . . .    C ADDR   0971H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERSEL1001 . .    C ADDR   0942H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERSELECTED. .    C ADDR   0968H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TXONE . . . . . . .    C ADDR   0799H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TXTWO . . . . . . .    C ADDR   079FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TXTWO02 . . . . . .    C ADDR   0851H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_VOLNORMAL . . . . .    C ADDR   05EAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_ZC01. . . . . . . .    C ADDR   08C4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_ZLYD. . . . . . . .    C ADDR   06D1H   R   SEG=?PR?OBUMAIN?MATER
P0 . . . . . . . . . . . . . . . . . .    D ADDR   0080H   A   
P1 . . . . . . . . . . . . . . . . . .    D ADDR   0090H   A   
P2 . . . . . . . . . . . . . . . . . .    D ADDR   00A0H   A   
P3 . . . . . . . . . . . . . . . . . .    D ADDR   00B0H   A   
P4 . . . . . . . . . . . . . . . . . .    N NUMB   00C0H   A   
PCA_PWM0 . . . . . . . . . . . . . . .    N NUMB   00F2H   A   
PCA_PWM1 . . . . . . . . . . . . . . .    N NUMB   00F3H   A   
PCA_PWM2 . . . . . . . . . . . . . . .    N NUMB   00F4H   A   
PCA_PWM3 . . . . . . . . . . . . . . .    N NUMB   00F5H   A   
PCA_PWM4 . . . . . . . . . . . . . . .    N NUMB   00F6H   A   
PCA_PWM5 . . . . . . . . . . . . . . .    N NUMB   00F7H   A   
PCON . . . . . . . . . . . . . . . . .    D ADDR   0087H   A   
PIN_522_MISO . . . . . . . . . . . . .    B ADDR   00C0H.1 A   
PIN_522_MOSI . . . . . . . . . . . . .    B ADDR   00C0H.6 A   
PIN_522_RST. . . . . . . . . . . . . .    B ADDR   0080H.4 A   
PIN_522_SCLK . . . . . . . . . . . . .    B ADDR   0080H.7 A   
PIN_522_SS . . . . . . . . . . . . . .    B ADDR   0080H.6 A   
PIN_5823BK_CS. . . . . . . . . . . . .    B ADDR   0090H.0 A   
PIN_5823BK_IRQ . . . . . . . . . . . .    B ADDR   0090H.2 A   
PIN_5823BK_MISO. . . . . . . . . . . .    B ADDR   0080H.0 A   
PIN_5823BK_MOSI. . . . . . . . . . . .    B ADDR   0080H.1 A   
PIN_5823BK_SCLK. . . . . . . . . . . .    B ADDR   00C0H.2 A   
PIN_BELL_01. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_BELL_02. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_BK_CE. . . . . . . . . . . . . . .    B ADDR   0090H.1 A   
PIN_CARD_EXIST . . . . . . . . . . . .    B ADDR   00B0H.3 A   
PIN_ESAM_RST . . . . . . . . . . . . .    B ADDR   0080H.5 A   
PIN_ESAM_RX. . . . . . . . . . . . . .    B ADDR   0080H.3 A   
PIN_ESAM_TX. . . . . . . . . . . . . .    B ADDR   0080H.3 A   
PIN_ES_RST . . . . . . . . . . . . . .    B ADDR   00A0H.6 A   
PIN_GRE. . . . . . . . . . . . . . . .    B ADDR   00C0H.4 A   
PIN_LCD_CS . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_DC . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_RST. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_SCL. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_SDA. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_OUTPUT_CLK . . . . . . . . . . . .    B ADDR   00B0H.4 A   
PIN_PWRDWN . . . . . . . . . . . . . .    B ADDR   00A0H.4 A   
PIN_PWRDWN_LCD . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_PWR_GSM. . . . . . . . . . . . . .    B ADDR   00A0H.3 A   
PIN_PWR_LOWIO. . . . . . . . . . . . .    B ADDR   0090H.5 A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   105

PIN_PWR_SE . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_RED. . . . . . . . . . . . . . . .    B ADDR   00C0H.5 A   
PIN_SE_IO1 . . . . . . . . . . . . . .    B ADDR   00B0H.4 A   
PIN_SOFTSERIALRX . . . . . . . . . . .    B ADDR   00B0H.0 A   
PIN_SOFTSERIALTXH. . . . . . . . . . .    B ADDR   00B0H.1 A   
PIN_SW . . . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_UART2_RX . . . . . . . . . . . . .    B ADDR   0090H.6 A   
PIN_UART2_TX . . . . . . . . . . . . .    B ADDR   0090H.7 A   
PIN_UNFIX. . . . . . . . . . . . . . .    B ADDR   00B0H.5 A   
PIN_WAVE_CHANNEL1. . . . . . . . . . .    B ADDR   0080H.2 A   
PIN_WAVE_RX. . . . . . . . . . . . . .    B ADDR   0080H.2 A   
PSW. . . . . . . . . . . . . . . . . .    D ADDR   00D0H   A   
READ_BURST . . . . . . . . . . . . . .    N NUMB   00C0H   A   
REG_51_AUXR1 . . . . . . . . . . . . .    N NUMB   00A2H   A   
REG_5412AD_AUXR. . . . . . . . . . . .    N NUMB   008EH   A   
REG_5412AD_P0M0. . . . . . . . . . . .    N NUMB   0094H   A   
REG_5412AD_P0M1. . . . . . . . . . . .    N NUMB   0093H   A   
REG_5412AD_P1M0. . . . . . . . . . . .    N NUMB   0092H   A   
REG_5412AD_P1M1. . . . . . . . . . . .    N NUMB   0091H   A   
REG_5412AD_P2M0. . . . . . . . . . . .    N NUMB   0096H   A   
REG_5412AD_P2M1. . . . . . . . . . . .    N NUMB   0095H   A   
REG_5412AD_P3M0. . . . . . . . . . . .    N NUMB   00B2H   A   
REG_5412AD_P3M1. . . . . . . . . . . .    N NUMB   00B1H   A   
REG_5412AD_P4M0. . . . . . . . . . . .    N NUMB   00B4H   A   
REG_5412AD_P4M1. . . . . . . . . . . .    N NUMB   00B3H   A   
REG_5412AD_P4SW. . . . . . . . . . . .    N NUMB   00BBH   A   
REG_5412AD_SPCTL . . . . . . . . . . .    N NUMB   0085H   A   
REG_5412AD_SPDAT . . . . . . . . . . .    N NUMB   0086H   A   
REG_5412AD_SPSTAT. . . . . . . . . . .    N NUMB   0084H   A   
REG_MCU_WKCTH. . . . . . . . . . . . .    N NUMB   00ABH   A   
REG_MCU_WKCTL. . . . . . . . . . . . .    N NUMB   00AAH   A   
REG_RC522_BITFRAMINGREG. . . . . . . .    N NUMB   000DH   A   
REG_RC522_COLLREG. . . . . . . . . . .    N NUMB   000EH   A   
REG_RC522_COMIENREG. . . . . . . . . .    N NUMB   0002H   A   
REG_RC522_COMIRQREG. . . . . . . . . .    N NUMB   0004H   A   
REG_RC522_COMMANDREG . . . . . . . . .    N NUMB   0001H   A   
REG_RC522_CONTROLREG . . . . . . . . .    N NUMB   000CH   A   
REG_RC522_CRCRESULTREGH. . . . . . . .    N NUMB   0021H   A   
REG_RC522_CRCRESULTREGL. . . . . . . .    N NUMB   0022H   A   
REG_RC522_CWGSPREG . . . . . . . . . .    N NUMB   0028H   A   
REG_RC522_DEMODREG . . . . . . . . . .    N NUMB   0019H   A   
REG_RC522_DIVIENREG. . . . . . . . . .    N NUMB   0003H   A   
REG_RC522_DIVIRQREG. . . . . . . . . .    N NUMB   0005H   A   
REG_RC522_ERRORREG . . . . . . . . . .    N NUMB   0006H   A   
REG_RC522_FIFODATAREG. . . . . . . . .    N NUMB   0009H   A   
REG_RC522_FIFOLEVELREG . . . . . . . .    N NUMB   000AH   A   
REG_RC522_GSNREG . . . . . . . . . . .    N NUMB   0027H   A   
REG_RC522_MIFAREREG. . . . . . . . . .    N NUMB   001CH   A   
REG_RC522_MODEREG. . . . . . . . . . .    N NUMB   0011H   A   
REG_RC522_MODGSPREG. . . . . . . . . .    N NUMB   0029H   A   
REG_RC522_MODWIDTHREG. . . . . . . . .    N NUMB   0024H   A   
REG_RC522_RC522PAGE. . . . . . . . . .    N NUMB   0000H   A   
REG_RC522_RFCFGREG . . . . . . . . . .    N NUMB   0026H   A   
REG_RC522_RFU. . . . . . . . . . . . .    N NUMB   000FH   A   
REG_RC522_RXMODEREG. . . . . . . . . .    N NUMB   0013H   A   
REG_RC522_RXSELREG . . . . . . . . . .    N NUMB   0017H   A   
REG_RC522_RXTHRESHOLDREG . . . . . . .    N NUMB   0018H   A   
REG_RC522_SERIALSPEEDREG . . . . . . .    N NUMB   001FH   A   
REG_RC522_STATUS1REG . . . . . . . . .    N NUMB   0007H   A   
REG_RC522_STATUS2REG . . . . . . . . .    N NUMB   0008H   A   
REG_RC522_TCOUNTERVALUEREGH. . . . . .    N NUMB   002EH   A   
REG_RC522_TCOUNTERVALUEREGL. . . . . .    N NUMB   002FH   A   
REG_RC522_TMODEREG . . . . . . . . . .    N NUMB   002AH   A   
REG_RC522_TPRESCALERREG. . . . . . . .    N NUMB   002BH   A   
REG_RC522_TRELOADREGH. . . . . . . . .    N NUMB   002CH   A   
REG_RC522_TRELOADREGL. . . . . . . . .    N NUMB   002DH   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   106

REG_RC522_TXAUTOREG. . . . . . . . . .    N NUMB   0015H   A   
REG_RC522_TXCONTROLREG . . . . . . . .    N NUMB   0014H   A   
REG_RC522_TXMODEREG. . . . . . . . . .    N NUMB   0012H   A   
REG_RC522_TXSELREG . . . . . . . . . .    N NUMB   0016H   A   
REG_RC522_WATERLEVELREG. . . . . . . .    N NUMB   000BH   A   
REG_SYS_BRT. . . . . . . . . . . . . .    N NUMB   009CH   A   
REG_WAKECLK0 . . . . . . . . . . . . .    N NUMB   008FH   A   
REG_WAKECLK_04 . . . . . . . . . . . .    B ADDR   00D8H.4 A   
REG_WAKECLK_05 . . . . . . . . . . . .    B ADDR   00D8H.5 A   
REG_WAKE_CLK0. . . . . . . . . . . . .    N NUMB   008FH   A   
REG_WDT_CONTR. . . . . . . . . . . . .    N NUMB   00C1H   A   
RELOAD2_CONTR. . . . . . . . . . . . .    N NUMB   00EAH   A   
REN. . . . . . . . . . . . . . . . . .    B ADDR   0098H.4 A   
RI . . . . . . . . . . . . . . . . . .    B ADDR   0098H.0 A   
RS0. . . . . . . . . . . . . . . . . .    B ADDR   00D0H.3 A   
RS1. . . . . . . . . . . . . . . . . .    B ADDR   00D0H.4 A   
RX_EN. . . . . . . . . . . . . . . . .    C ADDR   -----       EXT
S2BUF. . . . . . . . . . . . . . . . .    N NUMB   009BH   A   
S2CON. . . . . . . . . . . . . . . . .    N NUMB   009AH   A   
SCON . . . . . . . . . . . . . . . . .    D ADDR   0098H   A   
SEG_OBUMAIN_CARDACTIVE . . . . . . . .    C ADDR   018DH   R   SEG=?PR?OBUMAIN?MATER
SEG_OBUMAIN_CDACTIVE . . . . . . . . .    C ADDR   0103H   R   SEG=?PR?OBUMAIN?MATER
SEG_OBUMAIN_WAVEACTIVE . . . . . . . .    C ADDR   0550H   R   SEG=?PR?OBUMAIN?MATER
SLEEP. . . . . . . . . . . . . . . . .    C ADDR   00ABH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
SP . . . . . . . . . . . . . . . . . .    D ADDR   0081H   A   
START_USER . . . . . . . . . . . . . .    C ADDR   00C6H   R   SEG=?PR?OBUMAIN?MATER
START_USER02 . . . . . . . . . . . . .    C ADDR   00D9H   R   SEG=?PR?OBUMAIN?MATER
STR_ACTCARDINVALID . . . . . . . . . .    C ADDR   -----       EXT
STR_ACTIVEFAIL . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ACTIVEOK . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ALREADYWRIN. . . . . . . . . . . .    C ADDR   -----       EXT
STR_CARDAPP_TIME . . . . . . . . . . .    C ADDR   002AH   R   SEG=?CO?OBUMAIN?STR
STR_CARDAPP_TIME02 . . . . . . . . . .    C ADDR   002FH   R   SEG=?CO?OBUMAIN?STR
STR_CHANG. . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_CLR. . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_CMDUP. . . . . . . . . . . . . . .    C ADDR   0034H   R   SEG=?CO?OBUMAIN?STR
STR_COLOR256_1 . . . . . . . . . . . .    C ADDR   -----       EXT
STR_COLOR256_2 . . . . . . . . . . . .    C ADDR   -----       EXT
STR_COLOR_1. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_CPBF . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_DSRC_DF. . . . . . . . . . . . . .    C ADDR   0027H   R   SEG=?CO?OBUMAIN?STR
STR_DSRC_SELDF . . . . . . . . . . . .    C ADDR   0021H   R   SEG=?CO?OBUMAIN?STR
STR_ERRCARD. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ERROR. . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_INPUT. . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_OUTPUT . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_RRING. . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_SRR. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_VOTALOW. . . . . . . . . . . .    C ADDR   -----       EXT
STR_HV02 . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ICON_BJ. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ILLEGALACTCARD . . . . . . . . . .    C ADDR   -----       EXT
STR_ILLEGALINPUTCARD . . . . . . . . .    C ADDR   -----       EXT
STR_INFLAG . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_INPUTCARDINVALID . . . . . . . . .    C ADDR   -----       EXT
STR_INPUTFAIL. . . . . . . . . . . . .    C ADDR   -----       EXT
STR_INPUTOK. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ISNOTSC. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_LOGCARD. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_LOWV . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_LOWVO. . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_MOVECARD . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_NOCARD . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_NOXCARD. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_PASS . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_READBLOCK01. . . . . . . . . . . .    C ADDR   0000H   R   SEG=?CO?OBUMAIN?STR
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   107

STR_READBLOCK04. . . . . . . . . . . .    C ADDR   000BH   R   SEG=?CO?OBUMAIN?STR
STR_READBLOCK10. . . . . . . . . . . .    C ADDR   0016H   R   SEG=?CO?OBUMAIN?STR
STR_REWROK . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_RXCARDER . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_SET. . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_SETMMIER . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_SYS_OBUID. . . . . . . . . . . . .    C ADDR   002FH   A   
STR_UNFIX. . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_VHDIF. . . . . . . . . . . . . . .    C ADDR   -----       EXT
TCON . . . . . . . . . . . . . . . . .    D ADDR   0088H   A   
TEST_5823_LOOP . . . . . . . . . . . .    C ADDR   -----       EXT
TEST_SERIALTX03_ISSUE. . . . . . . . .    C ADDR   -----       EXT
TF0. . . . . . . . . . . . . . . . . .    B ADDR   0088H.5 A   
TF1. . . . . . . . . . . . . . . . . .    B ADDR   0088H.7 A   
TH0. . . . . . . . . . . . . . . . . .    D ADDR   008CH   A   
TH1. . . . . . . . . . . . . . . . . .    D ADDR   008DH   A   
TI . . . . . . . . . . . . . . . . . .    B ADDR   0098H.1 A   
TI_CCXXX0_ADDR . . . . . . . . . . . .    N NUMB   0009H   A   
TI_CCXXX0_AGCCTRL0 . . . . . . . . . .    N NUMB   001DH   A   
TI_CCXXX0_AGCCTRL1 . . . . . . . . . .    N NUMB   001CH   A   
TI_CCXXX0_AGCCTRL2 . . . . . . . . . .    N NUMB   001BH   A   
TI_CCXXX0_AGCTEST. . . . . . . . . . .    N NUMB   002BH   A   
TI_CCXXX0_BSCFG. . . . . . . . . . . .    N NUMB   001AH   A   
TI_CCXXX0_CHANNR . . . . . . . . . . .    N NUMB   000AH   A   
TI_CCXXX0_DEVIATN. . . . . . . . . . .    N NUMB   0015H   A   
TI_CCXXX0_FIFOTHR. . . . . . . . . . .    N NUMB   0003H   A   
TI_CCXXX0_FOCCFG . . . . . . . . . . .    N NUMB   0019H   A   
TI_CCXXX0_FREND0 . . . . . . . . . . .    N NUMB   0022H   A   
TI_CCXXX0_FREND1 . . . . . . . . . . .    N NUMB   0021H   A   
TI_CCXXX0_FREQ0. . . . . . . . . . . .    N NUMB   000FH   A   
TI_CCXXX0_FREQ1. . . . . . . . . . . .    N NUMB   000EH   A   
TI_CCXXX0_FREQ2. . . . . . . . . . . .    N NUMB   000DH   A   
TI_CCXXX0_FREQEST. . . . . . . . . . .    N NUMB   0032H   A   
TI_CCXXX0_FSCAL0 . . . . . . . . . . .    N NUMB   0026H   A   
TI_CCXXX0_FSCAL1 . . . . . . . . . . .    N NUMB   0025H   A   
TI_CCXXX0_FSCAL2 . . . . . . . . . . .    N NUMB   0024H   A   
TI_CCXXX0_FSCAL3 . . . . . . . . . . .    N NUMB   0023H   A   
TI_CCXXX0_FSCTRL0. . . . . . . . . . .    N NUMB   000CH   A   
TI_CCXXX0_FSCTRL1. . . . . . . . . . .    N NUMB   000BH   A   
TI_CCXXX0_FSTEST . . . . . . . . . . .    N NUMB   0029H   A   
TI_CCXXX0_IOCFG0 . . . . . . . . . . .    N NUMB   0002H   A   
TI_CCXXX0_IOCFG1 . . . . . . . . . . .    N NUMB   0001H   A   
TI_CCXXX0_IOCFG2 . . . . . . . . . . .    N NUMB   0000H   A   
TI_CCXXX0_LQI. . . . . . . . . . . . .    N NUMB   0033H   A   
TI_CCXXX0_MARCSTATE. . . . . . . . . .    N NUMB   0035H   A   
TI_CCXXX0_MCSM0. . . . . . . . . . . .    N NUMB   0018H   A   
TI_CCXXX0_MCSM1. . . . . . . . . . . .    N NUMB   0017H   A   
TI_CCXXX0_MCSM2. . . . . . . . . . . .    N NUMB   0016H   A   
TI_CCXXX0_MDMCFG0. . . . . . . . . . .    N NUMB   0014H   A   
TI_CCXXX0_MDMCFG1. . . . . . . . . . .    N NUMB   0013H   A   
TI_CCXXX0_MDMCFG2. . . . . . . . . . .    N NUMB   0012H   A   
TI_CCXXX0_MDMCFG3. . . . . . . . . . .    N NUMB   0011H   A   
TI_CCXXX0_MDMCFG4. . . . . . . . . . .    N NUMB   0010H   A   
TI_CCXXX0_NUM_RXBYTES. . . . . . . . .    N NUMB   007FH   A   
TI_CCXXX0_PARTNUM. . . . . . . . . . .    N NUMB   0030H   A   
TI_CCXXX0_PATABLE. . . . . . . . . . .    N NUMB   003EH   A   
TI_CCXXX0_PKTCTRL0 . . . . . . . . . .    N NUMB   0008H   A   
TI_CCXXX0_PKTCTRL1 . . . . . . . . . .    N NUMB   0007H   A   
TI_CCXXX0_PKTLEN . . . . . . . . . . .    N NUMB   0006H   A   
TI_CCXXX0_PKTSTATUS. . . . . . . . . .    N NUMB   0038H   A   
TI_CCXXX0_PTEST. . . . . . . . . . . .    N NUMB   002AH   A   
TI_CCXXX0_RCCTRL0. . . . . . . . . . .    N NUMB   0028H   A   
TI_CCXXX0_RCCTRL1. . . . . . . . . . .    N NUMB   0027H   A   
TI_CCXXX0_RSSI . . . . . . . . . . . .    N NUMB   0034H   A   
TI_CCXXX0_RXBYTES. . . . . . . . . . .    N NUMB   003BH   A   
TI_CCXXX0_RXFIFO . . . . . . . . . . .    N NUMB   003FH   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   108

TI_CCXXX0_SAFC . . . . . . . . . . . .    N NUMB   0037H   A   
TI_CCXXX0_SCAL . . . . . . . . . . . .    N NUMB   0033H   A   
TI_CCXXX0_SFRX . . . . . . . . . . . .    N NUMB   003AH   A   
TI_CCXXX0_SFTX . . . . . . . . . . . .    N NUMB   003BH   A   
TI_CCXXX0_SIDLE. . . . . . . . . . . .    N NUMB   0036H   A   
TI_CCXXX0_SNOP . . . . . . . . . . . .    N NUMB   003DH   A   
TI_CCXXX0_SPWD . . . . . . . . . . . .    N NUMB   0039H   A   
TI_CCXXX0_SRES . . . . . . . . . . . .    N NUMB   0030H   A   
TI_CCXXX0_SRX. . . . . . . . . . . . .    N NUMB   0034H   A   
TI_CCXXX0_STX. . . . . . . . . . . . .    N NUMB   0035H   A   
TI_CCXXX0_SWOR . . . . . . . . . . . .    N NUMB   0038H   A   
TI_CCXXX0_SWORRST. . . . . . . . . . .    N NUMB   003CH   A   
TI_CCXXX0_SXOFF. . . . . . . . . . . .    N NUMB   0032H   A   
TI_CCXXX0_SYNC0. . . . . . . . . . . .    N NUMB   0005H   A   
TI_CCXXX0_SYNC1. . . . . . . . . . . .    N NUMB   0004H   A   
TI_CCXXX0_TEST0. . . . . . . . . . . .    N NUMB   002EH   A   
TI_CCXXX0_TEST1. . . . . . . . . . . .    N NUMB   002DH   A   
TI_CCXXX0_TEST2. . . . . . . . . . . .    N NUMB   002CH   A   
TI_CCXXX0_TXBYTES. . . . . . . . . . .    N NUMB   003AH   A   
TI_CCXXX0_TXFIFO . . . . . . . . . . .    N NUMB   003FH   A   
TI_CCXXX0_VCO_VC_DAC . . . . . . . . .    N NUMB   0039H   A   
TI_CCXXX0_VERSION. . . . . . . . . . .    N NUMB   0031H   A   
TI_CCXXX0_WORCTRL. . . . . . . . . . .    N NUMB   0020H   A   
TI_CCXXX0_WOREVT0. . . . . . . . . . .    N NUMB   001FH   A   
TI_CCXXX0_WOREVT1. . . . . . . . . . .    N NUMB   001EH   A   
TI_CCXXX0_WORTIME0 . . . . . . . . . .    N NUMB   0037H   A   
TI_CCXXX0_WORTIME1 . . . . . . . . . .    N NUMB   0036H   A   
TL0. . . . . . . . . . . . . . . . . .    D ADDR   008AH   A   
TL1. . . . . . . . . . . . . . . . . .    D ADDR   008BH   A   
TMOD . . . . . . . . . . . . . . . . .    D ADDR   0089H   A   
TR0. . . . . . . . . . . . . . . . . .    B ADDR   0088H.4 A   
TR1. . . . . . . . . . . . . . . . . .    B ADDR   0088H.6 A   
TX_CARRIER_EN. . . . . . . . . . . . .    C ADDR   -----       EXT
UNSLEEP. . . . . . . . . . . . . . . .    C ADDR   0168H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
WAKE_CLKO. . . . . . . . . . . . . . .    N NUMB   008FH   A   
WAVEACTIVE_PRE03_LOOP. . . . . . . . .    C ADDR   068BH   R   SEG=?PR?OBUMAIN?MATER
WAVEACTIVE_PRE03_PREDEAL . . . . . . .    C ADDR   069EH   R   SEG=?PR?OBUMAIN?MATER
WKO_BK . . . . . . . . . . . . . . . .    B ADDR   00B0H.2 A   
XDATA_433RXNUM . . . . . . . . . . . .    X ADDR   009FH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_54 . . . . . . . . . . . . . . .    X ADDR   009EH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_BEACONID . . . . . . . . . . . .    X ADDR   0082H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_BSTNUM . . . . . . . . . . . . .    X ADDR   0097H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_BUF. . . . . . . . . . . . . . .    X ADDR   0082H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_CELLID . . . . . . . . . . . . .    X ADDR   00ABH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_FIX. . . . . . . . . . . . . . .    X ADDR   008DH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_HIGHBAUD . . . . . . . . . . . .    X ADDR   0090H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_HOLD . . . . . . . . . . . . . .    X ADDR   00ADH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_ISSUECMD . . . . . . . . . . . .    X ADDR   008FH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_ISSUERSCTL . . . . . . . . . . .    X ADDR   008EH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_LASTBEACONID . . . . . . . . . .    X ADDR   00A1H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_LOADCELLTOUSER . . . . . . . . .    X ADDR   00A9H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_NUM. . . . . . . . . . . . . . .    X ADDR   008AH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_POWER. . . . . . . . . . . . . .    X ADDR   0093H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_RAND . . . . . . . . . . . . . .    X ADDR   0092H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_RTCMODE. . . . . . . . . . . . .    X ADDR   009AH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_RTCTIME. . . . . . . . . . . . .    X ADDR   0099H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SC . . . . . . . . . . . . . . .    X ADDR   0098H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SETMMI . . . . . . . . . . . . .    X ADDR   0096H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SETMMINUM. . . . . . . . . . . .    X ADDR   00A0H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SOFTFIRSTSCANTIME. . . . . . . .    X ADDR   008BH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SOFTSERIALP. . . . . . . . . . .    X ADDR   008CH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SP . . . . . . . . . . . . . . .    X ADDR   009DH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_TFTINIT_FLAG . . . . . . . . . .    X ADDR   00FFH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_TOTALNUMH. . . . . . . . . . . .    X ADDR   009BH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_TOTALNUML. . . . . . . . . . . .    X ADDR   009CH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_TXBUF. . . . . . . . . . . . . .    X ADDR   0000H   R   SEG=?XDT?OBUMAIN?XDATAD
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   109

XDATA_UNIXTIME . . . . . . . . . . . .    X ADDR   0086H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_VARSTART . . . . . . . . . . . .    X ADDR   0082H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_VSTDELAY . . . . . . . . . . . .    X ADDR   00AAH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_VSTNUM . . . . . . . . . . . . .    X ADDR   0091H   R   SEG=?XDT?OBUMAIN?XDATAD
_DSPERRNUM . . . . . . . . . . . . . .    C ADDR   -----       EXT
_DSPMONEY. . . . . . . . . . . . . . .    C ADDR   -----       EXT
_ENTER_SLEEP_MODE. . . . . . . . . . .    C ADDR   -----       EXT
_ERASEFLASH. . . . . . . . . . . . . .    C ADDR   -----       EXT
_FUNC_LCD_DISPLAY. . . . . . . . . . .    C ADDR   -----       EXT
_FUNC_LCD_INIT . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_ACTIVEOBU . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_CARDCHANNEL . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_DECCOUNTER. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_GDFXOBU . . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_GETBALANCE. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_ISINORACT . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_READBINARY. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_READBINARY02. . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_READRECORD. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_SELECTFILE. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_UPDATEBINARY. . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_CZ . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_IDLE . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_INIT . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RESET. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVOFF. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVON . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVWR . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVWR02 . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RX . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_SETWAKEUPTIME. . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_SPIOSINGLESOFT02 . . . . .    C ADDR   1249H   R   SEG=?PR?OBUMAIN?MATER
_FUN_CC1101_SPIOSOFTRXCC1101RXCC1101 .    C ADDR   -----       EXT
_FUN_CC1101_WAKEUP . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_INIT . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_INIT02 . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_INITDOWN . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_RELEASE. . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_RX . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_RXBST. . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_TX . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_CHANGEBAUD. . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL0. . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL1. . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_INIT. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_PPS . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_DSRC_NSPECIAL . . . . . . . . . .    C ADDR   -----       EXT
_FUN_DSRC_VST. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_AUDIO . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_GETCELLIDEN . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_GETOFFSET . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_INSERT. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_RTCEN . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_RTCOFF. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_RTCON . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_SERIALINTRX . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_5830INIT . . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_CHANGECHANNEL. . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_CHECKREG9TO18. . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_CLOSECLR . . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_FREXIAODUI . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_ISSLEEPMOD . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_RX . . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_RXSETMMI . . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_TX . . . . . . . . . . . . .    C ADDR   -----       EXT
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   110

_FUN_LCD_DISPLAYEXCHINA. . . . . . . .    C ADDR   -----       EXT
_FUN_LCD_DISPLAYEXMONEY. . . . . . . .    C ADDR   -----       EXT
_FUN_LCD_ICON. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_1MSDELAYC . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_BEEP. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_COMPARETIME . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_DATATOXDATA . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_DELAY . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_DELAYSIMPLAY. . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_ESAMERR . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_FLASHTODATA . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_FLASHTODATAEX . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_FLASHTOXDATA. . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_POWERADD. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_POWERPER. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_RAND. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_RANDDELAY . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_XDATATODATA . . . . . . . . .    C ADDR   -----       EXT
_FUN_MF_CHANNEL. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500ANTICOLL. . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500CONFIG. . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500REQUEST . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500RST . . . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500SELECT. . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500_PPS_CONFIG . . . .    C ADDR   -----       EXT
_FUN_OBUMAIN_BASEINIT. . . . . . . . .    C ADDR   0A82H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_BASEINIT02. . . . . . . .    C ADDR   0B5DH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_BDCB. . . . . . . . . . .    C ADDR   1047H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_BEEP. . . . . . . . . . .    C ADDR   0FBEH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_CARDINFODISPLAY . . . . .    C ADDR   0EB6H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_CARDINFODISPLAY02 . . . .    C ADDR   1130H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_CARDPREDEAL . . . . . . .    C ADDR   0C91H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_CHECKMEMORYANDEX. . . . .    C ADDR   134EH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_DR. . . . . . . . . . . .    C ADDR   12A1H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_ERRSHOW . . . . . . . . .    C ADDR   1316H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_ERRSHOW02 . . . . . . . .    C ADDR   134DH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_ERRSHOW03 . . . . . . . .    C ADDR   12E2H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_INITSYS . . . . . . . . .    C ADDR   09E7H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_PINSLEEP. . . . . . . . .    C ADDR   00ABH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
_FUN_OBUMAIN_PINUNSLEEP. . . . . . . .    C ADDR   0168H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
_FUN_OBUMAIN_PREPU . . . . . . . . . .    C ADDR   1285H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_PRESLEEP. . . . . . . . .    C ADDR   1260H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_RTCUP . . . . . . . . . .    C ADDR   112CH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_SELECTDF01. . . . . . . .    C ADDR   101AH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_SYSUNSLEEP. . . . . . . .    C ADDR   014CH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
_FUN_OBUMAIN_SYSUNSLEEP02. . . . . . .    C ADDR   015AH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
_FUN_OBUMAIN_TIMERX. . . . . . . . . .    C ADDR   1037H   R   SEG=?PR?OBUMAIN?MATER
_FUN_PROCARD_RATS. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_PRO_PPS . . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_AUDIOTXSOFT. . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_INIT . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXHARD . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXSOFT . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXSOFTRST. . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXTXINTERRUPT. . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_TXHARD . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_TXSOFT . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TESTCARDAPP_SELECTFILE. . . . . .    C ADDR   -----       EXT
_FUN_TEST_BEEP . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_CHECKRTCMODE . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_DISPLAY. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_DISPLAY02. . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_GSMTX. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_MASTER . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_RED. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_SERIALTX03 . . . . . . . . .    C ADDR   -----       EXT
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/15/2017 18:53:02 PAGE   111

_POWER_UP. . . . . . . . . . . . . . .    C ADDR   -----       EXT
_RDFLASH . . . . . . . . . . . . . . .    C ADDR   -----       EXT
_RDFLASHXR . . . . . . . . . . . . . .    C ADDR   -----       EXT
_WRFLASH . . . . . . . . . . . . . . .    C ADDR   -----       EXT
_WRFLASHXR . . . . . . . . . . . . . .    C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
