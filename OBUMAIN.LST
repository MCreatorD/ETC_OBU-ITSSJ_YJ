A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE     1


MACRO ASSEMBLER A51 V8.00d
OBJECT MODULE PLACED IN OBUMAIN.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE OBUMAIN.ASM SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     ;**********************************************************************
                       2     ;59 °å³ÌÐòÖÐ¶ÏÇ¿ÆÈÌø»ØÖ÷³ÌÐò£¬¶ÑÕ»SP»áÂÒ£¬ËùÒÔÇ¿ÆÈÖÃ SP = 0A7h + 002H
                       3     ;ÐÝÃß²ðÐ¶ÖÐ¶Ï»½ÐÑºó£¬Ó¦¶Ô 5830 ÖØÐÂ³õÊ¼»¯
                       4     ;×¢Òâ:  1.      59 °åµÄºìµÆÓëÖÐ¶ÏP3.3(EX1),ÔÚ¿ªEX1ÖÐ¶ÏÇ°ÐëÇåIE1±êÊ¶£¬ÔÚ¿ªex1ÖÐ¶Ïºó²»ÄÜÁÁºìµ
                             Æ,ÔÚÊÕµ½bstºó£¬³·ex1ÖÐ¶ÏÊ¹ÄÜ¡£
                       5     ;       2.      ÔÚ ½ÓÊÕ¹³ÌÖÐ¿ªÍâ²¿ÖÐ¶ÏEX0¡¢EX1ºÍ¶¨Ê±Æ÷ÖÐ¶ÏT0,EX0ÎªÊ¾Ý½ÓÊÕpin,ex1Îª²å¿¨ºÍ²ðÐ
                             ¶pin¡£
                       6     ;       3.      ÔÚ ÐÝÃßÇ°ÃðºìµÆ,ÇåIE1±êÊ¶£¬¿ªIE1ÖÐ¶ÏÊ¹ÄÜ¡£
                       7     ;        ¸Ä                     ¼ÓÒ»¾ä    ¼ÓÒ»¾ä
                       8     ;ÃèÊö£ºOBU Ö÷³ÌÐò¼¯
                       9     ;º¯ÊÉêÇë
                      10     ;_FUN_OBUMAIN_MASTER                                    ---     OBU Ö÷³ÌÐò
                      11     ;       ¸½Êô³ÌÐò¶Î:SEG_OBUMAIN_CDACTIVE                 ---     ²ð¶¯¼¤»î
                      12     ;       ¸½Êô³ÌÐò¶Î:SEG_OBUMAIN_CARDACTIVE               ---     ²å¿¨¼¤»î
                      13     ;       ¸½Êô³ÌÐò¶Î:SEG_OBUMAin_WAVEACTIVE               ---     Î¢²¨¼¤»î
                      14     ;       
                      15     ;_FUN_OBUMAIN_INITSYS                                   ---     ÏµÍ³³õÊ¼»¯(¼Ä´æÆ÷¡¢±äÁ¿µÈ³õ
                             Ê¼»¯)
                      16     ;_FUN_OBUMain_BASEINIT                                  ---     Ó¦ÓÃ³õÊ¼»¯
                      17     ;_FUN_OBUMain_CARDPreDeal                               ---     ¿¨Æ¬Ô¤´¦Àí
                      18     ;_FUN_OBUMain_CardInfoDisplay                           ---     ¿¨ÐÅÏ¢ÏÔÊ¾
                      19     ;½»Ò×²»Ë³£¬»á³öÏÖ³µÅÆ²»Ò»ÖÂ
                      20     ;°´ÏÂ²ð¶¯£¬½»Ò×»á²»Ë³
                      21     ; 002
                      22     ;¼ÓÒ»ÐÐÖÐÎÄ¿´¿´ 
                      23     ;**********************************************************************
                      24     ;$include (OBUMAIN.INC)
                +1    25     ;--- ¶Î¶¨Òå---
                +1    26     ?pr?OBUMAIN?tf0_timer_1         SEGMENT CODE
                +1    27     ?pr?OBUMAIN?Mater               SEGMENT CODE
                +1    28     ?dt?OBUMAIN?dataVarD            SEGMENT DATA
                +1    29     ?ba?OBUMAIN?BitD                SEGMENT DATA    BitAddressable
                +1    30     ?dt?OBUMAIN?dataD               SEGMENT DATA
                +1    31     ?idt?OBUMAIN?idataD             SEGMENT IDATA
                +1    32     ?xdt?OBUMAIN?xdataD             SEGMENT XDATA
                +1    33     ?co?OBUMAIN?STR                 SEGMENT CODE
                +1    34     ;?dt?OBUMAIN?dataDv             SEGMENT DATA
                +1    35     
                +1    36     ;--- ³£Á¿¶¨Òå---
                +1    37     ;0 - 31                                                                                    
                                  ¹¤×÷Çø
                +1    38     ;32 - 47                                                                                   
                                  Î»¿ÉÑ°Ö·
                +1    39     ;30 - 7F                                                                                   
                                  Ê¾Ýç·³åÇø
                +1    40     ;Çë×¢ÒâÒÔÏÂ´ÓCONST_LEN_WORKBUFµ½CONST_LEN_TXBUFÒò51±àÒëµÄÎÊÌâºÍ³ÌÐòµÄÐèÇó,ÔÚcommon.incÖÐÖØ¸
                             ´¶¨Òå
                +1    41     ;ËùÒÔÒª¸ÄÒªÒ»Æð¸Ä
  0008          +1    42     CONST_LEN_WORKBUF1              EQU     8                                                  
                                  ;¹¤×÷Çø1´óÐ¡
  0000          +1    43     CONST_LEN_WORKBUF2              EQU     0;8                                                
                                  ;¹¤×÷Çø2´óÐ¡
  0008          +1    44     CONST_LEN_WORKBUF               EQU     CONST_LEN_WORKBUF1+CONST_LEN_WORKBUF2              
                                  ;¹¤×÷Çø×Ü´óÐ¡8
  0018          +1    45     CONST_LEN_VARBUF                EQU     32-CONST_LEN_WORKBUF                               
                                  ;ÄÚ´æ±äÁ¿Çø24+8
  0006          +1    46     CONST_LEN_BITBUF                EQU     6;5;4                                              
                                  ;Î»¿ÉÑ°Ö·¿Õ¼ä´óÐ¡6+32
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE     2

  0080          +1    47     CONST_LEN_RXBUF                 EQU     128                                                
                                  ;¶Áç·³å´óÐ¡ 38Æð
  005A          +1    48     CONST_LEN_RXBUFPRE              EQU     128-CONST_LEN_WORKBUF-CONST_LEN_VARBUF-CONST_LEN_BI
                             TBUF ;¶Áç·³å¿é1´óÐ¡128+38
  0026          +1    49     CONST_LEN_RXBUFEND              EQU     CONST_LEN_RXBUF-CONST_LEN_RXBUFPRE                 
                                  ;¶Áç·³å¿é2´óÐ¡2,ÊÇÎªÁËCRC1 CRC2166+2
  0002          +1    50     CONST_LEN_RXCRC                 EQU     2                                                  
                                  ;ÔÚHDLC½ÓÊÕÊ±,Òª¼ÓÁËCRCµÄ³¤¶È
  0001          +1    51     CONST_LEN_POWUP                 EQU     1                                                  
                                  ;168+1
  0057          +1    52     CONST_LEN_STACK                 EQU     128 - CONST_LEN_RXBUFEND - CONST_LEN_RXCRC - CONST_
                             LEN_POWUP    ;¶ÑÕ»ç·³å´óÐ¡, 256-169=87
                +1    53     
                +1    54     
                +1    55     ;XDATA
  0080          +1    56     CONST_LEN_TXBUF                 EQU     128                                                
                                  ;·¢ËÍç·³å´óÐ¡,ÊÇÎªÁËCRC1 CRC2
  0002          +1    57     CONST_LEN_TXCRC                 EQU     2
  007D          +1    58     CON_LEN_BUFLEN                  EQU     256 - CONST_LEN_TXBUF - CONST_LEN_TXCRC - 1        
                                  ;2010-05-16
                +1    59     
                +1    60     ;--- ÄÚÍâ´æµØÖ·¶¨Òå ---
----            +1    61             RSEG    ?dt?OBUMAIN?dataVarD
0000            +1    62     DATA_WORKBUF2:                  DS      CONST_LEN_WORKBUF2
0000            +1    63     DATA_VER:                       DS      CONST_LEN_VARBUF
  0000          +1    64     DATA_VARBAUDHALF                EQU     DATA_VER                                           
                                  ;1 BYTE ²¨ÌØÂÊ  ´úÂë¼ûcommon.inc¶¨Òå)
  0001          +1    65     DATA_VARBAUDFULL                EQU     DATA_VARBAUDHALF + 1                               
                                  ;1 BYTE ²¨ÌØÂÊ  ´úÂë¼ûcommon.inc¶¨Òå)
  0002          +1    66     Money                           EQU     DATA_VARBAUDFULL + 1                               
                                  ;4 BYTE
  0006          +1    67     DATA_DSRCTXLEN                  EQU     MONEY + 4                                          
                                  ;1 BYTE ÓÃÓÚ¼ÇÂ¼DSRC·¢ËÍ³¤¶È£¬ÒÔ±ãÔÚÖØ·¢Ê±Ê¹ÓÃ
  0007          +1    68     DATA_DSRCRXLEN                  EQU     DATA_DSRCTXLEN + 1                                 
                                  ;1 BYTE ÓÃÓÚ¼ÇÂ¼DSRC½ÓÊÕ³¤¶È£¬ÒÔ±ãÔÚÖØ·¢Ê±Ê¹ÓÃ
  0008          +1    69     DATA_DATAP                      EQU     DATA_DSRCRXLEN + 1                                 
                                  ;1 BYTE ÓÃÓÚÄÚ´æÖ¸Õë
  0009          +1    70     DATA_XDATAP                     EQU     DATA_DATAP + 1                                     
                                  ;1 BYTE ÓÃÓÚÍâ´æÖ¸Õë
  000A          +1    71     DATA_OBUID                      EQU     DATA_XDATAP + 1                                    
                                  ;4 OBUID
                +1    72     ;DATA_CARDTYPE                  EQU     DATA_OBUID + 4                                     
                                  ;1 BYTE ¿¨ÀàÐÍ£¬=23±íÊ¾¼ÇÕË¿¨£¬=22±íÊ¾Í¨ÐÐ¿¨
                +1    73     ;DATA_IRQEN                     EQU     DATA_CARDTYPE + 1                                  
                                  ;1 BYTE ÖÐ¶ÏÊ¹ÄÜ
  000E          +1    74     DATA_IRQEN                      EQU     DATA_OBUID + 4                                     
                                  ;1 BYTE ÖÐ¶ÏÊ¹ÄÜ
  000F          +1    75     DATA_CardNO                     EQU     DATA_IRQEN + 1                                     
                                  ;5 BYTE ·Ç½Ó´¥¿¨ºÅ
  0014          +1    76     DATA_CMDTYPE                    EQU     DATA_CardNO + 5                                    
                                  ;1 BYTE
  0015          +1    77     DATA_MFCOM                      EQU     DATA_CMDTYPE + 1                                   
                                  ;1 BYTE
  0016          +1    78     DATA_NCONTACTTYPE               EQU     DATA_MFCOM + 1                                     
                                  ;1 BYTE ·Ç½Ó´¥¿¨ÀàÐÍ(Pro »ò MF)
  0017          +1    79     DATA_PowerONTimer               EQU     DATA_NCONTACTTYPE + 1                              
                                  ;1 BYTE ÉÏµç¶¨Ê±Æ÷Òç³ö´ÎÊ£¬ÉÏÏÞÓÉCONST_SYS_PowerONTimerÖµ¾ö¶¨
                +1    80             
----            +1    81             RSEG    ?ba?OBUMAIN?BitD
0000            +1    82     BITDBUF01:                      DS      1                                                  
                                  ;Î»¿Õ¼ä
  0007          +1    83     BIT_BUFADDR                     BIT     BITDBUF01.7                                        
                                  ;±íÊ¾µ±Ç°²Ù×÷µÄ´æ´¢Çø,=0ÄÚ´æ;=1Íâ´æ
  0006          +1    84     BIT_SERIALOVERTIMERX            BIT     BITDBUF01.6                                        
                                  ;Èí´®¿ÚµÈ´½ÓÊÕÊÇ·ñÓÐÊ±¼ä,ÏÞÖÆ=0Ã»ÓÐÏÞÖÆ;=1ÓÐÊ±¼äÏÞÖÆ
  0005          +1    85     BIT_VERIFY                      BIT     BITDBUF01.5                                        
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE     3

                                  ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑéÎ»,=0²»Òª£¬=1Òª
  0004          +1    86     BIT_HARDFLAG                    BIT     BITDBUF01.4                                        
                                  ;Ó²´®¿Ú½ÓÊÕÍê³É±ê¼Ç=1Íê³É;=0Î´Íê³É½ÓÊÕ(Æ½Ê±Îª0)
  0003          +1    87     BIT_CDJH                        BIT     BITDBUF01.3                                        
                                  ;=0±íÊ¾Ã»ÓÐ²ð¹£»=1±íÊ¾ÒÑ²ð¹
  0002          +1    88     BIT_FIRSTTX                     BIT     BITDBUF01.2                                        
                                  ;Ó²´®¿Ú·¢ËÍµÚÒ»¸ö×Ö½Ú±ê¼Ç=0±íÊ¾»¹Ã»·¢ËÍµÚÒ»¸ö×Ö½Ú£¬=1±íÊ¾ÒÑ·¢ËÍ
  0001          +1    89     BIT_T0T1                        BIT     BITDBUF01.1                                        
                                  ;µ±Ç°¿¨Æ¬Ð­Òé=1±íÊ¾T1;  =0±íÊ¾T0Ð­Òé;
                +1    90     ;(½èÓÃBIT_T0T1)
  0001          +1    91     BIT_TMP                         BIT     BITDBUF01.1
  0000          +1    92     BIT_9600                        BIT     BITDBUF01.0                                        
                                  ;=1µ±Ç°²¨ÌØÂÊÊÇ9600;=0µ±Ç°²¨ÌØÂÊ²»ÊÇ9600
                +1    93     
0001            +1    94     BITDBUF02:                      DS      1                                                  
                                  ;Î»¿Õ¼ä
  000F          +1    95     BIT_CHANNELFLAG                 BIT     BITDBUF02.7                                        
                                  ;= 1±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ1,  =0 ±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ0
                +1    96     ;BIT_HDLC_BST_FIRST             BIT     BITDBUF02.6                                        
                                  ;¼ÇÂ¼HDLCÉÏÒ»´ÎµÄµçÆ½×´Ì¬
  000D          +1    97     BIT_ESAMICC                     BIT     BITDBUF02.5                                        
                                  ;µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
  000C          +1    98     BIT_SERFIRBYTE                  BIT     BITDBUF02.4                                        
                                  ;µ±Ç°ÊÇ·ñÕÔÚ¼ìË÷´®¿ÚµÚÒ»¸ö×Ö½Ú=1±íÊ¾ÊÇ;=0±íÊ¾²»ÊÇ
  000B          +1    99     BIT_N                           BIT     BITDBUF02.3                                        
                                  ;DSRC½ÓÊÕµ½µÄNÎ»
  000A          +1   100     BIT_INSERTCARD                  BIT     BITDBUF02.2                                        
                                  ;=1±íÊ¾µ±Ç°OBU²å¿¨;=0±íÊ¾µ±Ç°OBUÃ»²å¿¨;
  0009          +1   101     BIT_ISFRX                       BIT     BITDBUF02.1                                        
                                  ;=0±íÊ¾´®¿ÚµÚÒ»¸ö×Ö½Ú½ÓÊÕ   ;1±íÊ¾µÚÒ»¸ö×Ö½Ú²»½ÓÊÕ      
  0008          +1   102     BIT_ISRXNB                      BIT     BITDBUF02.0                                        
                                  ;=1 ±íÊ¾Î´ÊÕµ½¹·Ç¹ã²¥µØÖ· =0 ±íÊ¾ÒÑ¾­ÊÕµ½¹·Ç¹ã²¥µØÖ·
                +1   103     
0002            +1   104     BITDBUF03:                      DS      1
  0017          +1   105     BIT_ACCESS                      BIT     BITDBUF03.7                                        
                                  ; ¼ÇÂ¼·Ç¹ã²¥µØÖ·ÖÐ 'ACTION.request'µÚÈÎ» ¡®accessCredentials¡¯µÄÖµ
  0016          +1   106     BIT_KEY                         BIT     BITDBUF03.6                                        
                                  ; ¼ÇÂ¼·Ç¹ã²¥µØÖ·ÖÐ 'fill'µÚ7Î» ¡®keyedForEncrypt¡¯µÄÖµ
  0015          +1   107     BIT_SETMMI                      BIT     BITDBUF03.5                                        
                                  ; =0±íÃ»ÓÐÊÕµ½¹SetMMI,=1SetMMI
  0014          +1   108     BIT_ESAM                        BIT     BITDBUF03.4                                        
                                  ; =1±íÊ¾ÓÐESAM =0 ±íÊ¾Ã»ÓÐESAM¿¨
  0013          +1   109     BIT_ESAMErr                     BIT     BITDBUF03.3                                        
                                  ;=0±íÊ¾²»ÏÔÊ¾£¬=1±íÊ¾ÒªÏÔÊ¾
  0012          +1   110     BIT_GETRESULT                   BIT     BITDBUF03.2                                        
                                  ; =1±íÊ¾È¡T0Ê±£¬È¡·µ»Ø½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û
  0011          +1   111     BIT_ProMF                       BIT     BITDBUF03.1                                        
                                  ; =1 ±íÊ¾ÊÇpro¿¨£¬=0±íÊ¾£¬MF¿¨
  0010          +1   112     BIT_ERR_flag                    BIT     BITDBUF03.0
                +1   113     
0003            +1   114     BITDBUF04:                      DS      1
  001F          +1   115     BIT_PROF                        BIT     BITDBUF04.7                                        
                                  ; Pro¿¨·¢ËÍÐòºÅ
  001E          +1   116     BIT_ISContact                   BIT     BITDBUF04.6                                        
                                  ; ÉÏÒ»´Î¼°±¾´Î²å¿¨ÀàÐÍ£¬=1ÊÇ½Ó´¥¿¨=0ÊÇ·Ç½Ó´¥¿¨
  001D          +1   117     BIT_GetSecure                   BIT     BITDBUF04.5                                        
                                  ; =1±íÊ¾ÊÕµ½GetSecureÖ¸Áî£¬=0±íÊ¾Ã»ÓÐÊÕµ½GetSecure
  001C          +1   118     BIT_BST                         BIT     BITDBUF04.4                                        
                                  ; =1±íÊ¾ÊÕµ½¹bst,=0±íÊ¾Ã»ÓÐÊÕµ½¹bst
                +1   119     ;BIT_ContactIssue               BIT     BITDBUF04.3                                        
                                  ; ·¢ÐÐ¿ªÊ¼±ê¼Ç  =0£¬Ã»ÓÐ½ÓÊÕ·¢ÐÐÐÅÏ¢£¬=1½ÓÊÕµ½·¢ÐÐÐÅÏ¢
  001B          +1   120     BIT_HaveRecordCellID            BIT     BITDBUF04.3                                        
                                  ;0±íÊ¾»¹Ã»ÓÐ¼ÇÂ¼CELLID£¬=1±íÊ¾ÒÑ¾­¼ÇÂ¼CELLID
  001A          +1   121     BIT_rstype                      BIT     BITDBUF04.2                                        
                                  ; CPU¿¨¸´Î»Ê±£¬ÊÇ·ñÓÐBCC£»=1 ±íÊ¾ÓÐ£»=0 ±íÊ¾Ã»ÓÐ
  0019          +1   122     BIT_RXSerialBaud                BIT     BITDBUF04.1                                        
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE     4

                                  ; ÊÇ·ñÊÕµ½¹¸´Î»²¨ÌØÂÊ=0Ã»ÓÐ;=1±íÊ¾ÓÐ
  0018          +1   123     BIT_gbICCInfo                   BIT     BITDBUF04.0
                +1   124     
0004            +1   125     BITDBUF05:                      DS      1
  0027          +1   126     BIT_privateInfo                 BIT     BITDBUF05.7
  0026          +1   127     BIT_CD                          BIT     BITDBUF05.6                                        
                                  ;=0±íÊ¾Î´±»²ð¶¯£¬=1 ±»²ð¶¯
  0025          +1   128     BIT_ACTIVECARD                  BIT     BITDBUF05.5                                        
                                  ;=0 ·Ç²ð¶¯¼¤»î;=1 ²ð¶¯¼¤»î
  0024          +1   129     BIT_ESAMOK                      BIT     BITDBUF05.4                                        
                                  ;=0 ESAMÊµ¼Ê²Ù×÷²»³É¹¦ ;= ESAMÊµ¼Ê²Ù×÷²»³É¹¦
                +1   130     
  0023          +1   131     BIT_BJPRE                       BIT     BITDBUF05.3                                        
                                  ;=0 ±íÊ¾±±¾©¿¨Ã»ÓÐÔ¤¶Á;=1±íÊ¾±±¾©¿¨ÓÐÔ¤¶Á
  0022          +1   132     BIT_BJ1219                      BIT     BITDBUF05.2                                        
                                  ;=0 ±íÊ¾±±¾©¿¨Ô¤¶Á0012;=1 ±íÊ¾±±¾©¿¨Ô¤¶Á0019
  0021          +1   133     BIT_InsertEr                    BIT     BITDBUF05.1                                        
                                  ;=0³µÅÆÏà·û     =1³µÅÆ²»·û
  0020          +1   134     BIT_CD_sw                       BIT     BITDBUF05.0                                        
                                  ;=0±íÊ¾Î´±»²ð¶¯£¬=1 ±»²ð¶¯
                +1   135     
0005            +1   136     BITDBUF06:                      DS      1
  002F          +1   137     BIT_PPS                         BIT     BITDBUF06.7                                        
                                  ;=0 Ã»×öPPS£¬=1×ö¹pps
  002E          +1   138     BIT_MMITIRMSTART                BIT     BITDBUF06.6                                        
                                  ;=0 Ã»Æô¶¯ =1Æô¶¯
  002D          +1   139     BIT_esamtran                    BIT     BITDBUF06.5                                        
                                  ;=1 Ê¹ÓÃ¹esamÍ¨µÀ;=0 Ê¹ÓÃ¹esamÍ¨µÀ
                +1   140     
  002C          +1   141     BIT_Cellinfo                    BIT     BITDBUF06.4
                +1   142     ;BIT_CKXT                       BIT     BITDBUF06.4                                        
                                  ;=0 ÏàÍ¬£¬=1 ²»ÏàÍ¬
                +1   143     
  002B          +1   144     BIT_Sel1001                     BIT     BITDBUF06.3                                        
                                  ;=0Ã»ÓÐÑ¡¹1001Ä¿Â¼£¬=1±íÊ¾Ñ¡¹1001Ä¿Â¼
                +1   145     
  002A          +1   146     BIT_5823RX_flag                 BIT     BITDBUF06.2                                        
                                  ;=0±íÊ¾Î´½ÓÊÕ;=1±íÊ¾ÒÑ½ÓÊÕ
  0029          +1   147     BIT_INITCard                    BIT     BITDBUF06.1
  0028          +1   148     BIT_USEROK                      BIT     BITDBUF06.0                                        
                                  ;=1 ÓÃ»§¿¨Ô¤¶Á³É¹¦;;=0 ÓÃ»§¿¨Ô¤¶ÁÊ§°Ü;
                +1   149     
                +1   150     
                +1   151     
                +1   152     
----            +1   153             RSEG    ?dt?OBUMAIN?dataD
0000            +1   154     DATA_RXBUF:                     DS      CONST_LEN_RXBUFPRE                                 
                                  ;¶Áç·³å¿é1
  0003          +1   155     DATA_RXBUFCPUSTART              EQU     DATA_RXBUF + 3  
                +1   156             
----            +1   157             RSEG    ?idt?OBUMAIN?idataD
0000            +1   158     IDATA_RXBUFTWOBLOCK:            DS      CONST_LEN_RXBUFEND                                 
                                  ;¶Áç·³å¿é2
0026            +1   159     IDATA_RXCRC:                    DS      CONST_LEN_RXCRC                                    
                                  ;CRC
0028            +1   160     IDATA_POWUP:                    DS      CONST_LEN_POWUP                                    
                                  ;ÉÏµç±êÖ¾
0029            +1   161     IDATA_STACK:                    DS      CONST_LEN_STACK                                    
                                  ;¶ÑÕ»¿Õ¼ä
                +1   162     
                +1   163     ; Íâ´æ¶¨Òå
----            +1   164             RSEG    ?xdt?OBUMAIN?xdataD
0000            +1   165     XDATA_TXBUF:                    DS      CONST_LEN_TXBUF                                    
                                  ; ·¢ËÍç·³å
0080            +1   166     IDATA_TXCRC:                    DS      CONST_LEN_TXCRC                                    
                                  ; CRC
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE     5

0082            +1   167     XDATA_BUF:                      DS      CON_LEN_BUFLEN                                     
                                  ; 
00FF            +1   168     XDATA_TFTINIT_FLAG:             DS      1                                                  
                                  ; TFT_LCD ÊÇ·ñ³õÊ¼»¯±êÖ¾
                +1   169     
                +1   170     ;==========================================================================================
                             =====
  0082          +1   171     XDATA_VARSTART                  EQU     XDATA_TXBUF + CONST_LEN_TXBUF + CONST_LEN_TXCRC
  0082          +1   172     XDATA_BeaconID                  EQU     XDATA_VARSTART                                     
                                  ;4 Byte  ÌìÏßID
  0086          +1   173     XDATA_UnixTime                  EQU     XDATA_BeaconID + 4                                 
                                  ;4 Byte  unix time
  008A          +1   174     XDATA_NUM                       EQU     XDATA_UnixTime + 4                                 
                                  ;1 Byte ²âÊÔÓÃ£¬¿´OBUÖØ·¢´ÎÊ
  008B          +1   175     XDATA_SOFTFIRSTSCANTIME         EQU     XDATA_NUM + 1                                      
                                  ;1 Byte´®¿ÚËÑË÷×î´óÊ±¼ä
  008C          +1   176     XDATA_SoftSerialP               EQU     XDATA_SOFTFIRSTSCANTIME + 1                        
                                  ;1 Byte ÓÃÓÚÈí¿Ú´®¿Ú½ÓÊÕ³ÌÐò¼ÇÂ¼ÆôÊ¼µØÖ·
  008D          +1   177     XDATA_FIX                       EQU     XDATA_SoftSerialP + 1                              
                                  ;1 Byte ²ð¿¨Î»
                +1   178     ; XDATA_SysParam                        EQU     XDATA_FIX + 1                              
                                          ;1 ¼õ¼ÇÊ±ê¼Ç[ ÔÝÊ±´æ·Å¼õ¼ÇÊµÄ´ÎÊ£¬Èç¹ûOBU´ÓÎ´²ð¶¯¹£¬ÔòÎªFFH ]
  008E          +1   179     XDATA_IssueRSCTL                EQU     XDATA_FIX + 1                                      
                                  ;ÓÐÏß·¢ÐÐÐòºÅ
  008F          +1   180     XDATA_IssueCMD                  EQU     XDATA_IssueRSCTL + 1                               
                                  ;ÓÐÏß·¢ÐÐÃüÁî×Ö
  0090          +1   181     XDATA_HighBaud                  EQU     XDATA_IssueCMD + 1                                 
                                  ; ÓÃ»§¿¨¸´Î»·µ»ØµÄµÚÈ¸ö×Ö½Ú
  0091          +1   182     XDATA_VSTNUM                    EQU     XDATA_HighBaud + 1                                 
                                  ; ·¢ËÍVSTµÄ¸öÊ
  0092          +1   183     XDATA_RAND                      EQU     XDATA_VSTNUM + 1                                   
                                  ; ÓÃÓÚËæ»úÑÓÊ±
  0093          +1   184     XDATA_Power                     EQU     XDATA_RAND + 1                                     
                                  ; 3 ¸ö×Ö½Ú£¬ÓÃÓÚ¼ÇÂ¼µçÁ¿
                +1   185     ; XDATA_VSTNUM
                +1   186     ; DATA_WK                       EQU     XDATA_Power + 3                                    
                                  ;
  0096          +1   187     XDATA_SETMMI                    EQU     XDATA_Power + 3                                    
                                  ; ±íÊ¾ÊÕµ½setmmi
  0097          +1   188     XDATA_BSTNUM                    EQU     XDATA_SETMMI + 1                                   
                                  ; ±£Áô
  0098          +1   189     XDATA_SC                        EQU     XDATA_BSTNUM + 1                                   
                                  ; ±£Áô
                +1   190             
  0099          +1   191     XDATA_RTCTime                   EQU     XDATA_SC + 1                                       
                                  ; 
  009A          +1   192     XDATA_RTCMode                   EQU     XDATA_RTCTime + 1                                  
                                  ; 
  009B          +1   193     XDATA_TOTALNUMH                 EQU     XDATA_RTCMode + 1
  009C          +1   194     XDATA_TOTALNUML                 EQU     XDATA_TOTALNUMH + 1
                +1   195     ;XDATA_GSMMode                  EQU     XDATA_RTCMode + 1                                  
                                  ; 
  009D          +1   196     XDATA_SP                        EQU     XDATA_TOTALNUML + 1     
  009E          +1   197     XDATA_54                        EQU     XDATA_SP + 1    
  009F          +1   198     XDATA_433rxnum                  EQU     XDATA_54 + 1    
  00A0          +1   199     XDATA_setmminum                 EQU     XDATA_433rxnum + 1
                +1   200     ;XDATA_CL                       EQU     xdata_setmminum + 1
  00A1          +1   201     XDATA_LastBeaconID              EQU     XDATA_setmminum + 1
  00A9          +1   202     XDATA_LoadCellToUser            EQU     XDATA_LastBeaconID+8                               
                                  ;=0±íÊ¾ ´ÓESAM¿¨µ¼³öÊ¾Ýµ½ÓÃ»§¿¨³É¹¦
  00AA          +1   203     XDATA_VSTDELAY                  EQU     XDATA_LoadCellToUser+1                             
                                  ;µ±Ç°Ëæ»úÑÓÊ±ºÀÃëÊ
  00AB          +1   204     XDATA_CELLID                    EQU     XDATA_VSTDELAY+1                                   
                                  ;CELL ID
  00AD          +1   205     XDATA_HOLD                      EQU     XDATA_CELLID + 2
                +1   206     
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE     6

                +1   207     ;==========================================================================================
                             =====
                +1   208     ;--- ÊäÈë¶¨Òå ---
                +1   209     ;--- CC1101 ---
                +1   210     EXTRN   CODE(_Fun_GSM_RTCEn)
                +1   211     EXTRN   CODE(_FUN_CC1101_CZ)
                +1   212     EXTRN   CODE(_FUN_CC1101_RVWR02)
                +1   213     EXTRN   CODE(_FUN_CC1101_RX)                          
                +1   214     EXTRN   CODE(_FUN_CC1101_RESET)                 ;¸´Î»
                +1   215     EXTRN   CODE(_FUN_CC1101_INIT)                  ;³õÊ¼»¯ CC1101
                +1   216     EXTRN   CODE(_FUN_CC1101_SetWakeUpTime)         ;³õÊ¼»¯1101»½ÐÑÊ±¼ä
                +1   217     EXTRN   CODE(_FUN_CC1101_RVOn)                  ;´ò¿ª½ÓÊÕ       
                +1   218     EXTRN   CODE(_FUN_CC1101_RVOff)                 ;¹Ø±Õ½ÓÊÕ
                +1   219     EXTRN   CODE(_FUN_CC1101_RVWR)                  ;»Ø¶Á
                +1   220     EXTRN   CODE(_FUN_CC1101_Idle)                  ;ÉèÖÃµ±Ç°Îª¿ÕÏÐ×´Ì¬
                +1   221     EXTRN   CODE(_FUN_CC1101_WakeUP)                ;ÉèÖÃµ±Ç°Îª»½ÐÑ×´Ì¬
                +1   222     EXTRN   CODE(_FUN_CC1101_spioSoftRXCC1101RXCC1101)
                +1   223     ;extrn  code(_FUN_CC1101_spioSingleSoft)
                +1   224     
                +1   225     ;--- GSM ---
                +1   226     extrn   code(STR_chang)
                +1   227     EXTRN   CODE(STR_GSM_VotaLow)
                +1   228     EXTRN   CODE(STR_GSM_RRing)
                +1   229     EXTRN   CODE(_FUN_GSM_Insert)
                +1   230     EXTRN   CODE(_FUN_GSM_GetOffset)
                +1   231     EXTRN   CODE(_FUN_GSM_RTCON)
                +1   232     EXTRN   CODE(_FUN_GSM_RTCOFF)
                +1   233             
                +1   234     ;--- LIB ---
                +1   235     EXTRN   CODE(_FUN_LIB_1MSDELAYC)
                +1   236     ;extrn  CODE(_FUN_LIB_1MSDELAYC)
                +1   237     EXTRN   CODE(_FUN_LIB_PowerPer)
                +1   238     EXTRN   CODE(_FUN_LIB_RANDDELAY)
                +1   239     extrn   code(_FUN_LIB_RAND)
                +1   240     EXTRN   CODE(_FUN_LIB_DELAY)                                                               
                                  ;ÑÓÊ±º¯Ê1
                +1   241     EXTRN   CODE(_FUN_LIB_DELAYSIMPLAY)                                                        
                                  
                +1   242             
                +1   243     ;EXTRN  CODE(_getrsuadcrc)                                                                 
                                  ;¼ÆËãCRC        
                +1   244     EXTRN   CODE(_FUN_LIB_BEEP)                                                                
                                  ;ÏìÁåÖ¸Áî
                +1   245     EXTRN   CODE(_FUN_LIB_XDATATODATA)                                                         
                                  ;¸´ÖÆÊ¾Ý´ÓÍâ´æµ½ÄÚ´æ
                +1   246     EXTRN   CODE(_FUN_LIB_DATATOXDATA)                                                         
                                  ;¸´ÖÆÊ¾Ý´ÓÄÚ´æµ½Íâ´æ
                +1   247     EXTRN   CODE(_FUN_LIB_FLASHTODATA)                                                         
                                  ;¸´ÖÆÊ¾Ý´ÓFLASHµ½ÄÚ´æ(FALSH Ê¾Ý¶¨ÒåÐèÎª ³¤¶È + Ê¾Ý)
                +1   248     EXTRN   CODE(_FUN_LIB_FLASHTOXDATA)                                                        
                                  ;¸´ÖÆÊ¾Ý´ÓFLASHµ½Íâ´æ(FALSH Ê¾Ý¶¨ÒåÐèÎª ³¤¶È + Ê¾Ý)
                +1   249     EXTRN   CODE(_FUN_LIB_CompareTime)
                +1   250     ;EXTRN  CODE(_FUN_LIB_POWERDOWN)
                +1   251     EXTRN   CODE(_FUN_LIB_FLASHTODATAEX)
                +1   252     EXTRN   CODE(_FUN_LIB_PowerADD)
                +1   253     EXTRN   CODE(_FUN_LIB_ESAMErr)
                +1   254     
                +1   255     ;--- Serial ---
                +1   256     EXTRN   CODE(_FUN_SERIAL_AudioTXSOFT)
                +1   257     EXTRN   CODE(_FUN_SERIAL_TXSOFT)                                                           
                                  ;Èí´®¿Ú·¢ËÍÊ¾Ý
                +1   258     EXTRN   CODE(_FUN_SERIAL_RXSOFT)                                                           
                                  ;Èí´®¿Ú½ÓÊÕÊ¾Ý
                +1   259     EXTRN   CODE(_FUN_SERIAL_RXTXINTERRUPT)                                                    
                                  ;Ó²´®¿Ú·¢ËÍ½ÓÊÕÖÐ¶Ï´¦Àí³ÌÐò
                +1   260     EXTRN   CODE(_FUN_SERIAL_INIT)                                                             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE     7

                                  ;´®¿ÚÏà¹Ø¼Ä´æÆ÷³õÊ¼»¯
                +1   261     EXTRN   CODE(_FUN_SERIAL_TXHARD)                                                           
                                  ;Ó²´®¿Ú·¢ËÍÊ¾Ý
                +1   262     EXTRN   CODE(_FUN_SERIAL_RXHARD)        
                +1   263     EXTRN   CODE(_FUN_SERIAL_RXSOFTRST)                                                        
                                  ;Ó²´®¿Ú½ÓÊÕÊ¾Ý
                +1   264     
                +1   265     ;--- CPU CARD ---
                +1   266     EXTRN   CODE(_FUN_Contact_INIT)                                                            
                                  ;³õÊ¼»¯CPU¿¨
                +1   267     EXTRN   CODE(_FUN_Contact_Channel0)                                                        
                                  ;T0¿¨²Ù×÷º¯Ê
                +1   268     EXTRN   CODE(_FUN_Contact_Channel1)                                                        
                                  ;T1¿¨²Ù×÷º¯Ê
                +1   269     EXTRN   CODE(_FUN_Contact_PPS)                                                             
                                  ;PPS[ÉèÖÃÖ¸Áî]
                +1   270     EXTRN   CODE(_FUN_Contact_CHANGEBAUD)
                +1   271     EXTRN   CODE(_FUN_Contact_Channel)                                                         
                                  ;¿¨²Ù×÷[Èí·¢ËÍ£¬Ó²½ÓÊÕ])
                +1   272     
                +1   273     ;--- HDLC ---
                +1   274     EXTRN   CODE(_FUN_HDLC_ISSleepMod)
                +1   275     EXTRN   CODE(_FUN_HDLC_CLOSECLR)
                +1   276     EXTRN   CODE(_FUN_HDLC_RXSetMMI)
                +1   277     EXTRN   CODE(_FUN_HDLC_Frexiaodui)
                +1   278     EXTRN   CODE(_Enter_Sleep_Mode)
                +1   279     EXTRN   CODE(_FUN_HDLC_CheckReg9To18)
                +1   280     ;EXTRN  CODE(_FUN_HDLC_5822Init)
                +1   281     ;---EXTRN       CODE(_FUN_HDLC_RXSetMMI)
                +1   282     EXTRN   CODE(_FUN_HDLC_RX)                                                                 
                                  ;HDLC½ÓÊÕº¯Ê
                +1   283     ;EXTRN  CODE(_FUN_HDLC_RXForBST)
                +1   284     EXTRN   CODE(_FUN_HDLC_TX)                                                                 
                                  ;HDLC·¢ËÍº¯Ê
                +1   285     EXTRN   CODE(_FUN_HDLC_5830Init)
                +1   286     EXTRN   CODE(_FUN_HDLC_CHANGECHANNEL)
                +1   287     
                +1   288     ;--- GSM ---
                +1   289     EXTRN   CODE(GSM_SerialINTRX_RXRight)
                +1   290     EXTRN   CODE(STR_GSM_SRR)
                +1   291     EXTRN   CODE(_Fun_GSM_GetCellIDEN)
                +1   292     ;EXTRN  CODE(_Fun_GSM_GetCellID)
                +1   293     ;-----BK5822-----------
                +1   294     ;EXTRN  CODE(_AutoASKReg)
                +1   295     ;EXTRN  CODE(_Enter_TX_Carrier_Mode)
                +1   296     ;EXTRN  CODE(_Enter_Sleep_Mode)
                +1   297     ;EXTRN  CODE(_TXDIOpin)
                +1   298     ;EXTRN  CODE(_Enter_Receive_Mode)
                +1   299     
                +1   300     ;EXTRN  CODE(_AutoASKReg_read)
                +1   301     ;EXTRN  CODE(_AutoASKReg_uppower)
                +1   302     EXTRN   CODE(Rx_En)
                +1   303     ;EXTRN  CODE(_Enable_Wake_Up)
                +1   304     ;EXTRN  CODE(_BK5822_RST)       ;¸´Î»BK5822 ¼Ä´æÆ÷
                +1   305     ;EXTRN  CODE(_BK5822_RXTX)      ;R7=0 ½øÈë½ÓÊÕÄ£Ê½      R7=1 ½øÈë·¢ËÍÄ£Ê½
                +1   306     
                +1   307     ;--- LCD ---
                +1   308     EXTRN   CODE(_Func_LCD_Display)
                +1   309     EXTRN   CODE(STR_HV02)
                +1   310     EXTRN   CODE(STR_LOWVo)
                +1   311     EXTRN   CODE(STR_NOXCARD)
                +1   312     EXTRN   CODE(_dspmoney)
                +1   313     EXTRN   CODE(_Func_LCD_INIT)
                +1   314     EXTRN   CODE(_FUN_LCD_DisplayExMoney)
                +1   315     EXTRN   CODE(_dspERRNUM)
                +1   316     EXTRN   CODE(_FUN_LCD_DisplayExChina)
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE     8

                +1   317     EXTRN   CODE(STR_LoGCard)
                +1   318     EXTRN   CODE(STR_VHDif)
                +1   319     EXTRN   CODE(STR_IsNotSC)
                +1   320     EXTRN   CODE(STR_ActiveOK)
                +1   321     EXTRN   CODE(STR_ActiveFail)
                +1   322     EXTRN   CODE(STR_InputOk)
                +1   323     EXTRN   CODE(STR_InputFail)
                +1   324     EXTRN   CODE(STR_IllegalInputCard)
                +1   325     EXTRN   CODE(STR_InputCardInvalid)
                +1   326     EXTRN   CODE(STR_IllegalACTCard)
                +1   327     EXTRN   CODE(STR_ACTCardInvalid)
                +1   328     EXTRN   CODE(STR_AlreadyWRIn)
                +1   329     EXTRN   CODE(STR_RXCardEr)
                +1   330     EXTRN   CODE(STR_SetMMIEr)
                +1   331     EXTRN   CODE(STR_ReWrOK)
                +1   332             
                +1   333     ;EXTRN  CODE(_COLOR_Func_LCD_Display)
                +1   334     ;EXTRN  CODE(_COLOR256_Func_LCD_Display)
                +1   335             
                +1   336     EXTRN   CODE(_FUN_LCD_ICON)
                +1   337     EXTRN   CODE(STR_SET)
                +1   338     EXTRN   CODE(STR_NOCARD)
                +1   339     EXTRN   CODE(STR_ERROR)
                +1   340     EXTRN   CODE(STR_PASS)
                +1   341     EXTRN   CODE(STR_LOWV)
                +1   342     EXTRN   CODE(STR_UNFIX)
                +1   343     EXTRN   CODE(STR_INFLAG)
                +1   344     EXTRN   CODE(STR_CLR)
                +1   345     EXTRN   CODE(STR_ErrCARD)
                +1   346     EXTRN   CODE(STR_MoveCARD)
                +1   347     EXTRN   CODE(STR_CPBF)
                +1   348     
                +1   349     EXTRN   CODE(STR_ICON_BJ)
                +1   350     EXTRN   CODE(STR_COLOR_1)
                +1   351     EXTRN   CODE(STR_COLOR256_1)
                +1   352     EXTRN   CODE(STR_COLOR256_2)
                +1   353     ;EXTRN  CODE(STR_card_miss)
                +1   354     ;EXTRN  CODE(STR_card1_miss)
                +1   355     ;EXTRN  CODE(STR_COLOR_1)
                +1   356     ;EXTRN  CODE(STR_card_miss)
                +1   357     ;EXTRN  CODE(_COLOR_Func_LCD_Display)
                +1   358     ;--- FALSH ---
                +1   359     EXTRN   CODE(_rdflash)                                                                     
                                  ;¶ÁFlashµ½ÄÚ´æ
                +1   360     EXTRN   CODE(_rdflashxr)                                                                   
                                  ;¶ÁFlashµ½Íâ´æ
                +1   361     EXTRN   CODE(_wrflash)                                                                     
                                  ;Ð´Flashµ½ÄÚ´æ
                +1   362     EXTRN   CODE(_wrflashxr)                                                                   
                                  ;Ð´Flashµ½Íâ´æ
                +1   363     EXTRN   CODE(_eraseflash)                                                                  
                                  ;²Á³Flash
                +1   364     
                +1   365     ;--- DSRC ---
                +1   366     EXTRN   CODE(_FUN_DSRC_VST)
                +1   367     ;EXTRN  CODE(_FUN_DSRC_GetSecure)
                +1   368     ;EXTRN  CODE(_FUN_DSRC_SetSecure)
                +1   369     ;EXTRN  CODE(_FUN_DSRC_GetRand)
                +1   370     ;EXTRN  CODE(_FUN_DSRC_TransferChannel)
                +1   371     ;EXTRN  CODE(_FUN_DSRC_SetMMI)
                +1   372     EXTRN   CODE(_FUN_DSRC_NSpecial)
                +1   373             
                +1   374     ;--- CardAPP ---
                +1   375     EXTRN   CODE(_FUN_CARDAPP_ReadBinary02)
                +1   376     EXTRN   CODE(FUN_LCD_HVTransfer)
                +1   377     EXTRN   CODE(_FUN_CARDAPP_SelectFile)                                                      
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE     9

                                  ;Ñ¡Ä¿Â¼»òÎÄ¼þ
                +1   378     EXTRN   CODE(_FUN_CARDAPP_ReadBinary)                                                      
                                  ;¶Á¶þ½øÖÆÎÄ¼þ
                +1   379     EXTRN   CODE(_FUN_CARDAPP_GetBalance)
                +1   380     EXTRN   CODE(_FUN_CARDAPP_ReadRecord)
                +1   381     EXTRN   CODE(_FUN_CARDAPP_CardChannel)
                +1   382     EXTRN   CODE(_FUN_CARDAPP_DECCounter)
                +1   383     EXTRN   CODE(_FUN_CARDAPP_ACTIVEOBU)
                +1   384     EXTRN   CODE(_FUN_CARDAPP_GDFXOBU)
                +1   385     EXTRN   CODE(_FUN_CARDAPP_ISInOrACT)
                +1   386             
                +1   387     ;--- NContact ---
                +1   388     EXTRN   CODE(_FUN_NContact_Rc500Rst)
                +1   389     EXTRN   CODE(_FUN_NContact_Rc500Config)
                +1   390     EXTRN   CODE(_FUN_NContact_Rc500Request)
                +1   391     EXTRN   CODE(_FUN_NContact_Rc500AntiColl)
                +1   392     EXTRN   CODE(_FUN_NContact_Rc500Select)
                +1   393             
                +1   394     ;--- PRO ---
                +1   395     EXTRN   CODE(_FUN_ProCard_rats)
                +1   396     EXTRN   CODE(_FUN_Pro_PPS)
                +1   397     EXTRN   CODE(_FUN_NContact_Rc500_PPS_Config)
                +1   398             
                +1   399     ;--- Contact Issue ---
                +1   400     EXTRN   CODE(_FUN_ContactIssue_INITDown)
                +1   401     EXTRN   CODE(_FUN_ContactIssue_INIT02)
                +1   402     EXTRN   CODE(_FUN_ContactIssue_INIT)                    ;       ·¢ÐÐ³õÊ¼»¯
                +1   403     EXTRN   CODE(_FUN_ContactIssue_Release)
                +1   404     EXTRN   CODE(_FUN_ContactIssue_RXBST)                   ;       ·¢ÐÐ_½ÓÊÕBST
                +1   405     EXTRN   CODE(_FUN_ContactIssue_RX)                      ;       ½ÓÊÕ·¢ÐÐÐÅÏ¢£¨´ÓPC£©
                +1   406     EXTRN   CODE(_FUN_ContactIssue_TX)                      ;       ·¢ËÍ·¢ÐÐ»ØÓ¦ÐÅÏ¢£¨µ½PC£©   
                                                  ·¢ËÍ·¢ÐÐ»ØÓ¦ÐÅÏ¢£¨µ½PC£©
                +1   407             
                +1   408     ;--- Audio ---
                +1   409     EXTRN   CODE(_Fun_GSM_Audio)
                +1   410     EXTRN   CODE(STR_GSM_Input)
                +1   411     EXTRN   CODE(STR_GSM_Output)
                +1   412             
                +1   413     ;--- test ---
                +1   414     EXTRN   CODE(TEST_SerialTX03_issue)
                +1   415     EXTRN   CODE(_FUN_TEST_SerialTX03)
                +1   416     EXTRN   CODE(TEST_5823_Loop)
                +1   417     EXTRN   CODE(_FUN_TEST_RED)
                +1   418     extrn   code(_FUN_TEST_DISPLAY02)
                +1   419     EXTRN   CODE(_FUN_TEST_GSMTX)
                +1   420     EXTRN   CODE(_FUN_TEST_Master)
                +1   421     EXTRN   CODE(_FUN_TEST_DISPLAY)
                +1   422     extrn   code(_FUN_TEST_checkrtcmode)
                +1   423     ;EXTRN  CODE(STR_FileInfo)
                +1   424     ;EXTRN  CODE(_rxfromrsu)
                +1   425     EXTRN   CODE(_FUN_TEST_BEEP)
                +1   426     EXTRN   CODE(_FUN_TESTCARDAPP_SelectFile)
                +1   427     EXTRN   CODE(_FUN_MF_Channel)
                +1   428     extrn   code(_FUN_CARDAPP_UpdateBinary)
                +1   429     ;--- GSM ---
                +1   430     EXTRN   CODE(_FUN_GSM_SerialINTRX)
                +1   431     extrn   code(_Power_Up)
                +1   432     extrn   code(Tx_Carrier_En)
                +1   433     ;EXTRN  CODE(_rxfromrsu_bit_lp1_42)
                +1   434     ;---Êä³ö¶¨Òå---
                +1   435     ;PUBLIC xdata_flag
                +1   436     ;PUBLIC rxing
                +1   437     ;CODE
                +1   438     ;PUBLIC BIT_RTC_TMP
                +1   439     ;PUBLIC BIT_CKXT
                +1   440     PUBLIC  OBUMAIN_MASTER_MAINSleep
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    10

                +1   441     PUBLIC  BIT_Cellinfo
                +1   442     ;PUBLIC BIT_SysRST
                +1   443     PUBLIC  SLEEP
                +1   444     public  XDATA_433rxnum
                +1   445     public  XDATA_54
                +1   446     PUBLIC  BIT_5823RX_flag
                +1   447     PUBLIC  AP_start
                +1   448     ;PUBLIC _FUN_OBUMain_PWRLowDis
                +1   449     ;PUBLIC OBUMAIN_MASTER_MAINSleep
                +1   450     PUBLIC  BIT_PPS
                +1   451     ;PUBLIC _FUN_OBUMain_PPS
                +1   452     PUBLIC  _FUN_OBUMAIN_INITSYS
                +1   453     PUBLIC  _Fun_OBUmain_SysUNSleep
                +1   454     PUBLIC  XDATA_RTCMode
                +1   455     PUBLIC  start_user
                +1   456     ;PUBLIC AP_START
                +1   457     PUBLIC  _FUN_OBUMAIN_BASEINIT
                +1   458     PUBLIC  CONST_LEN_RXBUF
                +1   459     PUBLIC  CONST_LEN_TXBUF,DATA_OBUID
                +1   460             
                +1   461     ;DATA   
                +1   462     ;PUBLIC DATA_VARTMP1
                +1   463     PUBLIC  XDATA_TOTALNUMH
                +1   464     PUBLIC  XDATA_TOTALNUML
                +1   465     PUBLIC  DATA_VARBAUDHALF
                +1   466     PUBLIC  DATA_VARBAUDFULL
                +1   467     PUBLIC  DATA_RXBUF
                +1   468     PUBLIC  MONEY
                +1   469     PUBLIC  DATA_DSRCTXLEN
                +1   470     PUBLIC  DATA_DSRCRXLEN
                +1   471     PUBLIC  DATA_DATAP
                +1   472     PUBLIC  DATA_XDATAP
                +1   473     PUBLIC  DATA_IRQEN
                +1   474     PUBLIC  DATA_CardNO
                +1   475     PUBLIC  DATA_CMDTYPE
                +1   476     PUBLIC  DATA_MFCOM
                +1   477     PUBLIC  DATA_PowerONTimer
                +1   478     PUBLIC  XDATA_Power
                +1   479             
                +1   480     ;XDATA
                +1   481     PUBLIC  XDATA_RAND
                +1   482     PUBLIC  XDATA_TXBUF
                +1   483             
                +1   484     PUBLIC  XDATA_TFTINIT_FLAG
                +1   485             
                +1   486     PUBLIC  XDATA_BeaconID
                +1   487     PUBLIC  XDATA_UnixTime
                +1   488     ;PUBLIC XDATA_TXBUFCPUSTART
                +1   489     PUBLIC  XDATA_NUM
                +1   490     PUBLIC  XDATA_SOFTFIRSTSCANTIME
                +1   491     PUBLIC  XDATA_SOFTSERIALP
                +1   492     PUBLIC  XDATA_FIX
                +1   493     PUBLIC  XDATA_IssueRSCTL                ;ÓÐÏß·¢ÐÐÐòºÅ
                +1   494     PUBLIC  XDATA_IssueCMD                  ;ÓÐÏß·¢ÐÐÃüÁî×Ö
                +1   495     PUBLIC  XDATA_HighBaud
                +1   496     PUBLIC  XDATA_HOLD
                +1   497     PUBLIC  XDATA_CELLID
                +1   498     ;PUBLIC XDATA_SYSPARAM
                +1   499             
                +1   500     ;BIT
                +1   501     PUBLIC  BIT_ESAMOK
                +1   502     PUBLIC  BIT_BUFADDR
                +1   503     PUBLIC  BIT_SERIALOVERTIMERX
                +1   504     PUBLIC  BIT_VERIFY
                +1   505     PUBLIC  BIT_HARDFLAG
                +1   506     ;PUBLIC BIT_HDLC_BST_FIRST
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    11

                +1   507     PUBLIC  BIT_CHANNELFLAG
                +1   508     PUBLIC  BIT_FIRSTTX
                +1   509     ;PUBLIC BIT_LASTF
                +1   510     PUBLIC  BIT_T0T1
                +1   511     PUBLIC  BIT_TMP
                +1   512     PUBLIC  BIT_9600
                +1   513     ;PUBLIC BIT_HDLCLASTD
                +1   514     PUBLIC  BIT_ESAMICC
                +1   515     PUBLIC  BIT_SERFIRBYTE
                +1   516     PUBLIC  BIT_INSERTCARD
                +1   517     PUBLIC  BIT_ISFRX
                +1   518     PUBLIC  BIT_ACCESS
                +1   519     PUBLIC  BIT_KEY
                +1   520     PUBLIC  BIT_N
                +1   521     PUBLIC  BIT_SETMMI
                +1   522     PUBLIC  BIT_GETRESULT
                +1   523     PUBLIC  BIT_proMF
                +1   524     PUBLIC  BIT_ERR_flag
                +1   525     PUBLIC  BIT_PROF
                +1   526     PUBLIC  BIT_ISContact
                +1   527     PUBLIC  BIT_BST
                +1   528             
                +1   529     ;PUBLIC BIT_ContactIssue
                +1   530     PUBLIC  BIT_rstype
                +1   531     PUBLIC  BIT_RXSerialBaud
                +1   532     PUBLIC  BIT_privateInfo
                +1   533     PUBLIC  BIT_gbICCInfo
                +1   534     PUBLIC  BIT_CD
                +1   535     PUBLIC  BIT_BJ1219
                +1   536     PUBLIC  BIT_ESAMERR
                +1   537     ;String 
                +1   538     PUBLIC  STR_SYS_OBUID,OBUMAIN_MASTER_MEMORYCLR
                +1   539     PUBLIC  XDATA_RTCTime
                +1   540     PUBLIC  BIT_HaveRecordCellID
                +1   541             
                +1   542     ;////////////////////////////////////////////////////////////////////////////////////////
----            +1   543             cseg at 2fh                     ; 2FH   ;30H
002F            +1   544     STR_SYS_OBUID:                          ; OBUID
002F 0401A1FF   +1   545             DB      04H,01H,0a1H,0FFH,0FFH  ; 
0033 FF                      
                +1   546                                             ; 
----            +1   547             RSEG    ?co?OBUMAIN?STR         ; 
                +1   548     ;/////////////////////////////FOR TEST/////////////////////////////////////////////////////
                             /    
                +1   549     ;STR_DSRC_VST2:         ;VST»ù±¾×é³É
                +1   550     ;       DB      00eH                    ;³¤¶È
                +1   551     ;       DB      001H,0FEH,0FEH,0FEH     ;MACµØÖ·
                +1   552     ;       DB      0C0H                    ;MAC¿ØÖÆÓò
                +1   553     ;       DB      003H                    ;LLC¿ØÖÆÓò
                +1   554             
                +1   555     ;       DB      091H                    ;×Ö¶Î×ÖÍ·
                +1   556     ;       DB      0D0H
                +1   557     ;       DB      000H
                +1   558     ;       DB      001H
                +1   559     ;       DB      0C1H
                +1   560     ;       DB      001H
                +1   561     ;       DB      0FFH
                +1   562     ;       DB      027H
                +1   563     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////////////
                +1   564     ;Ö¸ÁîÀàÐÍ       ÉÈÇøºÅ  ¿éºÅ    "A"/"B"(41H|42H)        ÃÜÔ¿    UUU
0000            +1   565     STR_ReadBlock01:
0000 0A         +1   566             DB      0AH             
0001 00000141   +1   567             DB      000H,000H,001H,041H,0A0H,0A1H,0A2H,0A3H,0A4H,0A5H
0005 A0A1A2A3                
0009 A4A5                    
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    12

000B            +1   568     STR_ReadBlock04:
000B 0A         +1   569             DB      0AH
000C 00000441   +1   570             DB      000H,000H,004H,041H,080H,008H,090H,009H,0A0H,00AH       
0010 80089009                
0014 A00A                    
0016            +1   571     STR_ReadBlock10:
0016 0A         +1   572             DB      0AH
0017 00001041   +1   573             DB      000H,000H,010H,041H,0A0H,0A1H,0A2H,0A3H,0A4H,0A5H
001B A0A1A2A3                
001F A4A5                    
                +1   574             
0021            +1   575     STR_DSRC_SELDF:         ;VST»ù±¾×é³É
0021 05         +1   576             DB      005H                    ;³¤¶È
0022 00A40000   +1   577             DB      000h,0a4h,000h,000h,002h
0026 02                      
                +1   578             
0027            +1   579     STR_DSRC_DF:            ;VST»ù±¾×é³É
0027 02         +1   580             DB      002H                    ;³¤¶È
0028 DF01       +1   581             DB      0dfh,001h 
                +1   582             
002A            +1   583     STR_CARDAPP_time:
002A 04         +1   584             db      4
002B 00000002   +1   585             db      00,00,00,02
                +1   586             
002F            +1   587     STR_CARDAPP_time02:
002F 04         +1   588             db      4
0030 00000101   +1   589             db      00,00,01,01
0034            +1   590     str_cmdup:
                +1   591             ;db     6ah
                +1   592     ;       db      6ah
                +1   593     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh
                +1   594     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh          
                +1   595     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh  
                +1   596     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh  
                +1   597     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh  
                +1   598     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,009h,00Ah,00Bh,00Ch,00Dh,00Eh,0
                             0Fh  
                +1   599     ;       db      00h,001h,002h,003h,004h,005h,006h,007h,008h,00Bh
                +1   600             
                     601     
                     602     ;$include (COMMON.INC)
                +1   603             
  009C          +1   604     BRT                                     EQU     09CH
  009C          +1   605     Reg_Sys_BRT                             EQU     09CH
                +1   606     ;RegBit_SysBRT_S1BRS                    BIT     Reg_Sys_BRT.1
                +1   607     
  009A          +1   608     S2CON                                   EQU     09AH
  009B          +1   609     S2BUF                                   EQU     09BH
  00AF          +1   610     IE2                                     EQU     0AFH
  00EA          +1   611     RELOAD2_CONTR                           EQU     0EAH
                +1   612             
  0001          +1   613     CONST_TIMEER02                          EQU     1       ;Ò»ÖÜ6Ãë
  00FE          +1   614     CONST_TIMEER03                          EQU     254;245
  0001          +1   615     CONST_TIMEER04                          EQU     1
                +1   616     
  00A2          +1   617     REG_51_AUXR1                            EQU     0A2H
  00AE          +1   618     EPCAI                                   BIT     IE.6
                +1   619     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////
                +1   620     ;NEW LCD
                +1   621     ;PIN_Sys_IsDownload                     BIT     P3.7
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    13

                +1   622     ;PIN_LCD_OLEDD1                         BIT     P1.2
                +1   623     ;PIN_LCD_OLEDD0                         BIT     P1.3
                +1   624     ;PIN_LCD_OLEDDC                         BIT     P1.4
                +1   625     ;PIN_LCD_OLEDRES                        BIT     P1.5
                +1   626     ;PIN_LCD_OLEDCS                         BIT     P4.3
                +1   627     ;PIN_LCD_BG                             BIT     P1.1
                +1   628     ;PIN_OLED_ENSY7208                      BIT     P4.0
  00C0          +1   629     P4                                      EQU     0C0H
                +1   630     ;------------------------------------------------------------------------------------------
                             -----
  0005          +1   631     CONST_MAX_RXNUM                         EQU     5
                +1   632     ;TI_CCxxx0_SRES                         EQU     30H
                +1   633     ;Configuration Registers                
  0046          +1   634     CONST_GDO2_VALUE                        EQU     46h;046H        ;06H
  0002          +1   635     CONST_GDO2_MCSM2                        EQU     2;03H
  00C0          +1   636     read_burst                              EQU     0C0H
  0000          +1   637     TI_CCxxx0_IOCFG2                        EQU     00H        ;GDO2 output pin configuration
  0001          +1   638     TI_CCxxx0_IOCFG1                        EQU     01H        ;GDO1 output pin configuration
  0002          +1   639     TI_CCxxx0_IOCFG0                        EQU     02H        ;GDO0 output pin configuration
  0003          +1   640     TI_CCxxx0_FIFOTHR                       EQU     03H        ;RX FIFO and TX FIFO thresholds
  0004          +1   641     TI_CCxxx0_SYNC1                         EQU     04H        ;Sync word, high byte
  0005          +1   642     TI_CCxxx0_SYNC0                         EQU     05H        ;Sync word, low byte
  0006          +1   643     TI_CCxxx0_PKTLEN                        EQU     06H        ;Packet length
  0007          +1   644     TI_CCxxx0_PKTCTRL1                      EQU     07H        ;Packet automation control
  0008          +1   645     TI_CCxxx0_PKTCTRL0                      EQU     08H        ;Packet automation control
  0009          +1   646     TI_CCxxx0_ADDR                          EQU     09H        ;Device address
  000A          +1   647     TI_CCxxx0_CHANNR                        EQU     0AH        ;Channel number
  000B          +1   648     TI_CCxxx0_FSCTRL1                       EQU     0BH        ;Frequency synthesizer control
  000C          +1   649     TI_CCxxx0_FSCTRL0                       EQU     0CH        ;Frequency synthesizer control
  000D          +1   650     TI_CCxxx0_FREQ2                         EQU     0DH        ;Frequency control word, high by
                             te
  000E          +1   651     TI_CCxxx0_FREQ1                         EQU     0EH        ;Frequency control word, middle 
                             byte
  000F          +1   652     TI_CCxxx0_FREQ0                         EQU     0FH        ;Frequency control word, low byt
                             e
  0010          +1   653     TI_CCxxx0_MDMCFG4                       EQU     10H        ;Modem configuration
  0011          +1   654     TI_CCxxx0_MDMCFG3                       EQU     11H        ;Modem configuration
  0012          +1   655     TI_CCxxx0_MDMCFG2                       EQU     12H        ;Modem configuration
  0013          +1   656     TI_CCxxx0_MDMCFG1                       EQU     13H        ;Modem configuration
  0014          +1   657     TI_CCxxx0_MDMCFG0                       EQU     14H        ;Modem configuration
  0015          +1   658     TI_CCxxx0_DEVIATN                       EQU     15H        ;Modem deviation setting
  0016          +1   659     TI_CCxxx0_MCSM2         EQU     16H        ;Main Radio Cntrl State Machine config
  0017          +1   660     TI_CCxxx0_MCSM1         EQU     17H        ;Main Radio Cntrl State Machine config
  0018          +1   661     TI_CCxxx0_MCSM0         EQU     18H        ;Main Radio Cntrl State Machine config
  0019          +1   662     TI_CCxxx0_FOCCFG        EQU     19H        ;Frequency Offset Compensation config
  001A          +1   663     TI_CCxxx0_BSCFG         EQU     1AH        ;Bit Synchronization configuration
  001B          +1   664     TI_CCxxx0_AGCCTRL2      EQU     1BH        ;AGC control
  001C          +1   665     TI_CCxxx0_AGCCTRL1      EQU     1CH        ;AGC control
  001D          +1   666     TI_CCxxx0_AGCCTRL0      EQU     1DH        ;AGC control
  001E          +1   667     TI_CCxxx0_WOREVT1       EQU     1EH        ;High byte Event 0 timeout
  001F          +1   668     TI_CCxxx0_WOREVT0       EQU     1FH        ;Low byte Event 0 timeout
  0020          +1   669     TI_CCxxx0_WORCTRL       EQU     20H        ;Wake On Radio control
  0021          +1   670     TI_CCxxx0_FREND1        EQU     21H        ;Front end RX configuration
  0022          +1   671     TI_CCxxx0_FREND0        EQU     22H        ;Front end TX configuration
  0023          +1   672     TI_CCxxx0_FSCAL3        EQU     23H        ;Frequency synthesizer calibration
  0024          +1   673     TI_CCxxx0_FSCAL2        EQU     24H        ;Frequency synthesizer calibration
  0025          +1   674     TI_CCxxx0_FSCAL1        EQU     25H        ;Frequency synthesizer calibration
  0026          +1   675     TI_CCxxx0_FSCAL0        EQU     26H        ;Frequency synthesizer calibration
  0027          +1   676     TI_CCxxx0_RCCTRL1       EQU     27H        ;RC oscillator configuration
  0028          +1   677     TI_CCxxx0_RCCTRL0       EQU     28H        ;RC oscillator configuration
  0029          +1   678     TI_CCxxx0_FSTEST        EQU     29H        ;Frequency synthesizer cal control
  002A          +1   679     TI_CCxxx0_PTEST         EQU     2AH        ;Production test
  002B          +1   680     TI_CCxxx0_AGCTEST       EQU     2BH        ;AGC test
  002C          +1   681     TI_CCxxx0_TEST2         EQU     2CH        ;Various test settings       
  002D          +1   682     TI_CCxxx0_TEST1         EQU     2DH        ;Various test settings
  002E          +1   683     TI_CCxxx0_TEST0         EQU     2EH        ;Various test settings
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    14

                +1   684     
                +1   685     ;Strobe commands
  0030          +1   686     TI_CCxxx0_SRES          EQU     30H        ;Reset chip.
  0032          +1   687     TI_CCxxx0_SXOFF         EQU     32H        ;Turn off crystal oscillator.
  0033          +1   688     TI_CCxxx0_SCAL          EQU     33H        ;Calibrate freq synthesizer & disable
  0034          +1   689     TI_CCxxx0_SRX           EQU     34H        ;Enable RX.
  0035          +1   690     TI_CCxxx0_STX           EQU     35H        ;Enable TX.
  0036          +1   691     TI_CCxxx0_SIDLE         EQU     36H        ;Exit RX / TX
  0037          +1   692     TI_CCxxx0_SAFC          EQU     37H        ;AFC adjustment of freq synthesizer
  0038          +1   693     TI_CCxxx0_SWOR          EQU     38H        ;Start automatic RX polling sequence
  0039          +1   694     TI_CCxxx0_SPWD          EQU     39H        ;Enter pwr down mode when CSn goes hi
  003A          +1   695     TI_CCxxx0_SFRX          EQU     3AH        ;Flush the RX FIFO buffer.
  003B          +1   696     TI_CCxxx0_SFTX          EQU     3BH        ;Flush the TX FIFO buffer.
  003C          +1   697     TI_CCxxx0_SWORRST       EQU     3CH        ;Reset real time clock.
  003D          +1   698     TI_CCxxx0_SNOP          EQU     3DH        ;No operation.
                +1   699             
                +1   700     ;Status_registers
  0030          +1   701     TI_CCxxx0_PARTNUM                       EQU     30H        ;Part number
  0031          +1   702     TI_CCxxx0_VERSION                       EQU     31H        ;Current version number
  0032          +1   703     TI_CCxxx0_FREQEST                       EQU     32H        ;Frequency offset estimate
  0033          +1   704     TI_CCxxx0_LQI                           EQU     33H        ;Demodulator estimate for link q
                             uality
  0034          +1   705     TI_CCxxx0_RSSI                          EQU     34H        ;Received signal strength indica
                             tion
  0035          +1   706     TI_CCxxx0_MARCSTATE                     EQU     35H        ;Control state machine state
  0036          +1   707     TI_CCxxx0_WORTIME1                      EQU     36H        ;High byte of WOR timer
  0037          +1   708     TI_CCxxx0_WORTIME0                      EQU     37H        ;Low byte of WOR timer
  0038          +1   709     TI_CCxxx0_PKTSTATUS                     EQU     38H        ;Current GDOx status and packet 
                             status
  0039          +1   710     TI_CCxxx0_VCO_VC_DAC                    EQU     39H        ;Current setting from PLL cal mo
                             dule
  003A          +1   711     TI_CCxxx0_TXBYTES                       EQU     3AH        ;Underflow and # of bytes in TXF
                             IFO
  003B          +1   712     TI_CCxxx0_RXBYTES                       EQU     3BH        ;Overflow and # of bytes in RXFI
                             FO
  007F          +1   713     TI_CCxxx0_NUM_RXBYTES                   EQU     7FH        ;Mask "# of bytes" field in _RXB
                             YTES
                +1   714             
                +1   715     ;Other memory locations
  003E          +1   716     TI_CCxxx0_PATABLE                       EQU     3EH
  003F          +1   717     TI_CCxxx0_TXFIFO                        EQU     3FH
  003F          +1   718     TI_CCxxx0_RXFIFO                        EQU     3FH
                +1   719             
  0082          +1   720     PIN_WAVE_RX                             BIT     p0.2;P2.0;p0.1;p1.0
  00B4          +1   721     PIN_OUTPUT_CLK                          BIT     P3.4;P1.0
  008F          +1   722     REG_WAKE_CLK0                           EQU     08FH
  000F          +1   723     CONST_DATA_VALUE1                       EQU     15;20;20;20
  00DE          +1   724     CONST_DATA_VALUE2                       EQU     208+14;14;255;208+14;14
                +1   725     ;------------------------------------------------------------------------------------------
                             -----
                +1   726     ;µçÔ´¿ØÖÆ
  0095          +1   727     PIN_PWRDWN_LCD                          BIT     p1.5;p1.3        
  00A4          +1   728     Pin_pwrdwn                              BIT     p2.4;P2.7        
  00A3          +1   729     PIN_PWR_GSM                             BIT     p2.3;P2.4        
                +1   730             
                +1   731     ;--- Active ---
  00B5          +1   732     Pin_unfix                               BIT     P3.5     
  00B3          +1   733     PIN_card_exist                          BIT     p3.3    
  00B2          +1   734     WKO_BK                                  BIT     P3.2     
  0095          +1   735     PIN_PWR_LOWIO                           BIT     p1.5;P2.1        
                +1   736             
                +1   737     ;--- ESAM ---
  0083          +1   738     PIN_ESAM_TX                             BIT     p0.3;P2.6        
  0083          +1   739     PIN_ESAM_RX                             BIT     p0.3;P2.6        
  0085          +1   740     PIN_ESAM_RST                            BIT     p0.5;P2.5        
                +1   741             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    15

                +1   742     ;--- Éù¹â¿ØÖÆ ---
  00C5          +1   743     Pin_Red                                 BIT     p4.5;P4.1        
  00C4          +1   744     Pin_Gre                                 BIT     p4.4;P4.5
                +1   745     
  0095          +1   746     PIN_BELL_01                             BIT     p1.5;P0.3        
  0095          +1   747     PIN_BELL_02                             BIT     p1.5;P0.2        
                +1   748             
                +1   749     ;--- CC1101 ---
                +1   750     ;Pin_CC1101_SS                          BIT     p3.6     
                +1   751     ;PIN_CC1101_SCLK                                BIT     P2.2     
                +1   752     ;PIN_CC1101_MOSI                                BIT     P2.3     
                +1   753     ;PIN_CC1101_MISO                                BIT     p3.7     
                +1   754     ;PIN_CC1101_GDO2                                BIT     P1.6     
                +1   755             
                +1   756     ;--- Òº¾§Ò½Å ---
  0095          +1   757     Pin_LCD_CS                              BIT     p1.5;p1.4        
  0095          +1   758     Pin_LCD_RST                             BIT     P1.5;    
  0095          +1   759     Pin_LCD_DC                              BIT     p1.5;p1.7       
  0095          +1   760     Pin_LCD_SCL                             BIT     p1.5;p3.4       
  0095          +1   761     Pin_LCD_SDA                             BIT     p1.5;p4.3       
                +1   762             
                +1   763     ;--- 522 ---
  0087          +1   764     PIN_522_SCLK                            BIT     P0.7;P0.7        
  00C6          +1   765     PIN_522_MOSI                            BIT     p4.6;P0.5        
  00C1          +1   766     PIN_522_MISO                            BIT     p4.1;P0.4        
  0086          +1   767     Pin_522_SS                              BIT     P0.6;P0.6        
  0084          +1   768     Pin_522_RST                             BIT     p0.4;P4.6        
                +1   769             
  00B0          +1   770     PIN_SOFTSERIALRX                        BIT     P3.0     
  00B1          +1   771     PIN_SOFTSERIALTXH                       BIT     P3.1     
                +1   772             
  0095          +1   773     PIN_PWR_SE                              BIT     p1.5    ;p2.2   ; P2.4  ;       [ GSM ] 
  0095          +1   774     Pin_SW                                  BIT     p1.5    
                +1   775             
                +1   776             
                +1   777     ;fu dand wei
  00A6          +1   778     Pin_ES_Rst                              BIT     p2.6;P2.3       ;p4.0;P4.4      ; P4.4  
  00B4          +1   779     PIN_SE_IO1                              BIT     p3.4;p2.4       ;P4.4;p2.3;p4.4;P2.2    ; P
                             0.5
                +1   780             
                +1   781             
                +1   782     ;--- CC1101 ---
  0097          +1   783     PIN_UART2_TX                            BIT     p1.7    ;p3.6   ; P3.7
  0096          +1   784     PIN_UART2_RX                            BIT     P1.6    ; 
                +1   785             
  0000          +1   786     BUSY                                    BIT     20H.0
                +1   787     ;////////////////////////////////////////////////Ò½Å¶¨Òå///////////////////////////////////
                             //////////////
                +1   788     ;ÉèÎª¸ß
  0091          +1   789     PIN_BK_CE                               BIT     p1.1     
  0090          +1   790     Pin_5823BK_CS                           BIT     P1.0
                +1   791     ;Éè³ÉÊäÈëÎª¸ß                           
  0080          +1   792     Pin_5823BK_MISO                         BIT     p0.0     
  0092          +1   793     Pin_5823BK_IRQ                          BIT     p1.2      
                +1   794     ;   Éè ³É µÍ
  0081          +1   795     Pin_5823BK_MOSI                         BIT     p0.1     
  00C2          +1   796     Pin_5823BK_SCLK                         BIT     p4.2     
                +1   797      
  0082          +1   798     PIN_WAVE_CHANNEL1                       BIT     p0.2;P2.0        
                +1   799      
                +1   800     ;=====================================================================================
  008F          +1   801     Reg_WakeClk0                            EQU     08fH
  00DC          +1   802     Reg_WakeClk_04                          BIT     CCON.4  ;P3.4
  00DD          +1   803     Reg_WakeClk_05                          BIT     CCON.5  ;P3.5
                +1   804     ;ÉùÃ÷STC12C5628AD ÏµÁÐ MCU ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷µØÖ·
  00B7          +1   805     IPH EQU 0B7H ;ÖÐ¶ÏÓÅÏÈ¼¶¸ßÎ»¼Ä´æÆ÷
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    16

  00AE          +1   806     EPCA_LVD EQU IE.6 ;PCA ÖÐ¶ÏºÍ LVD(µÍÑ¹¼ì²â)ÖÐ¶Ï¹²ÏíµÄ×ÜÖÐ¶Ï¿ØÖÆÎ»
  00F9          +1   807     CH EQU 0F9H ;PCA ¼ÆÊÆ÷¸ß8 Î»¡£
  00E9          +1   808     CL EQU 0E9H ;PCA ¼ÆÊÆ÷µÍ8 Î»¡£
                +1   809     
                +1   810     ;------------------------
  00D8          +1   811     CCON EQU 0D8H ;PCA ¿ØÖÆ¼Ä´æÆ÷¡£
  00D8          +1   812     CCF0 EQU CCON.0 ;PCA Ä£¿é0 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00D9          +1   813     CCF1 EQU CCON.1 ;PCA Ä£¿é1 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DA          +1   814     CCF2 EQU CCON.2 ;PCA Ä£¿é2 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DB          +1   815     CCF3 EQU CCON.3 ;PCA Ä£¿é3 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DC          +1   816     CCF4 EQU CCON.4 ;PCA Ä£¿é4 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DD          +1   817     CCF5 EQU CCON.5 ;PCA Ä£¿é5 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DE          +1   818     CR EQU CCON.6 ;1:ÔÊÐí PCA ¼ÆÊÆ÷¼ÆÊ, ±ØÐëÓÉÈí¼þÇå0¡£
  00DF          +1   819     CF EQU CCON.7 ;PCA ¼ÆÊÆ÷Òç³ö(CH,CL ÓÉ FFFFH ±äÎª 0000H)±êÖ¾,
                +1   820     ;PCA ¼ÆÊÆ÷Òç³öºóÓÉÓ²¼þÖÃÎ»,±ØÐëÓÉÈí¼þÇå0¡£
                +1   821     ;------------------------
  00D9          +1   822     CMOD EQU 0D9H ;PCA ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   823     
                +1   824     ;CMOD.7 CIDL: idle ×´Ì¬Ê± PCA ¼ÆÊÆ÷ÊÇ·ñ¼ÌÐø¼ÆÊ, 0: ¼ÌÐø¼ÆÊ, 1: Í£Ö¹¼ÆÊ¡£
                +1   825     ;CMOD.2 CPS1: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 1¡£
                +1   826     ;CMOD.1 CPS0: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 0¡£
                +1   827     ; CPS1 CPS0
                +1   828     ; 0 0 Íâ²¿¾§ÌåÆµÂÊ/12¡£
                +1   829     ; 0 1 Íâ²¿¾§ÌåÆµÂÊ/2¡£
                +1   830     ; 1 0 Timer 0 Òç³öÂö³å£¬
                +1   831     ; Timer 0 »¹¿ÉÍ¨¹ AUXR ¼Ä´æÆ÷ÉèÖÃ³É¹¤×÷ÔÚ 12T »ò 1T Ä£Ê½¡£
                +1   832     ; 1 1 ´Ó ECI/P3.4 ½ÅÊäÈëµÄÍâ²¿Ê±ÖÓ¡£
                +1   833     ;CMOD.0 ECF: PCA ¼ÆÊÆ÷Òç³öÖÐ¶ÏÔÊÐíÎ», 1-- ÔÊÐí CF(CCON.7) ²úÉúÖÐ¶Ï¡£
                +1   834     ;------------------------
  00FA          +1   835     CCAP0H EQU 0FAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FB          +1   836     CCAP1H EQU 0FBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FC          +1   837     CCAP2H EQU 0FCH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FD          +1   838     CCAP3H EQU 0FDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FE          +1   839     CCAP4H EQU 0FEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FF          +1   840     CCAP5H EQU 0FFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00EA          +1   841     CCAP0L EQU 0EAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EB          +1   842     CCAP1L EQU 0EBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EC          +1   843     CCAP2L EQU 0ECH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00ED          +1   844     CCAP3L EQU 0EDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EE          +1   845     CCAP4L EQU 0EEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EF          +1   846     CCAP5L EQU 0EFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
                +1   847     ;------------------------
  00F2          +1   848     PCA_PWM0 EQU 0F2H ;PCA Ä£¿é0 PWM ¼Ä´æÆ÷¡£
  00F3          +1   849     PCA_PWM1 EQU 0F3H ;PCA Ä£¿é1 PWM ¼Ä´æÆ÷¡£
  00F4          +1   850     PCA_PWM2 EQU 0F4H ;PCA Ä£¿é2 PWM ¼Ä´æÆ÷¡£
  00F5          +1   851     PCA_PWM3 EQU 0F5H ;PCA Ä£¿é3 PWM ¼Ä´æÆ÷¡£
  00F6          +1   852     PCA_PWM4 EQU 0F6H ;PCA Ä£¿é4 PWM ¼Ä´æÆ÷¡£
  00F7          +1   853     PCA_PWM5 EQU 0F7H ;PCA Ä£¿é5 PWM ¼Ä´æÆ÷¡£
                +1   854     ;PCA_PWMn: 7 6 5 4 3 2 1 0
                +1   855     ; - - - - - - EPCnH EPCnL
                +1   856     ;B7-B2: ±£Áô
                +1   857     ;B1(EPCnH): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnH ×é³É 9 Î»Ê¡£
                +1   858     ;B0(EPCnL): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnL ×é³É 9 Î»Ê¡£
                +1   859     ;------------------------
  00DA          +1   860     CCAPM0 EQU 0DAH ;PCA Ä£¿é0 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DB          +1   861     CCAPM1 EQU 0DBH ;PCA Ä£¿é1 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DC          +1   862     CCAPM2 EQU 0DCH ;PCA Ä£¿é2 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DD          +1   863     CCAPM3 EQU 0DDH ;PCA Ä£¿é3 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DE          +1   864     CCAPM4 EQU 0DEH ;PCA Ä£¿é4 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DF          +1   865     CCAPM5 EQU 0DFH ;PCA Ä£¿é5 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   866     ;CCAPMn: 7 6 5 4 3 2 1 0
                +1   867     ; - ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   868     ;
                +1   869     ;ECOMn = 1:ÔÊÐí±È½Ï¹¦ÄÜ¡£
                +1   870     ;CAPPn = 1:ÔÊÐíÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   871     ;CAPNn = 1:ÔÊÐíÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    17

                +1   872     ;MATn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, ÔÊÐí CCON ÖÐµÄ CCFn ÖÃÎ»¡£
                +1   873     ;TOGn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, CEXn ½«·­×ª¡£
                +1   874     ;PWMn = 1:½« CEXn ÉèÖÃÎª PWM Êä³ö¡£
                +1   875     ;ECCFn = 1:ÔÊÐí CCON ÖÐµÄ CCFn ´¥·¢ÖÐ¶Ï¡£
                +1   876     ;ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   877     ; 0 0 0 0 0 0 0 00H Î´ÆôÓÃÈÎºÎ¹¦ÄÜ¡£
                +1   878     ; x 1 0 0 0 0 x 21H 16 Î»CEXn ÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   879     ; x 0 1 0 0 0 x 11H 16 Î»CEXn ÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   880     ; x 1 1 0 0 0 x 31H 16 Î»CEXn ±ßÑØ(ÉÏ¡¢ÏÂÑØ)´¥·¢²¶×½¹¦ÄÜ¡£
                +1   881     ; 1 0 0 1 0 0 x 49H 16 Î»Èí¼þ¶¨Ê±Æ÷¡£
                +1   882     ; 1 0 0 1 1 0 x 4DH 16 Î»¸ßËÙÂö³åÊä³ö¡£
                +1   883     ; 1 0 0 0 0 1 0 42H 8 Î» PWM¡£
                +1   884     ;------------------------------------------------------------------------------
                +1   885     ;==============================================================================
                +1   886     ;//////////////////////////////////////////////¹«¹²¼Ä´æÆ÷ /////////////////////////////////
                             //////////
  00C7          +1   887     ISP_CONTR                               EQU     0C7h
  008F          +1   888     WAKE_CLKO                               EQU     08fh
                +1   889     ;¸½¼ÓµÄ SFR WAKE_CLKO (µØÖ·£º0x8F)
                +1   890     ;b7 - PCAWAKEUP :1, ÔÊÐí PCA ÉÏÉÑØ / ÏÂ½µÑØÖÐ¶Ï »½ÐÑ powerdown¡£
                +1   891     ;b6 - RXD_PIN_IE:1, ÔÊÐí P3.0(RXD) ÏÂ½µÑØÖÃ RI£¬Ò²ÄÜÊ¹ RXD »½ÐÑ powerdown¡£
                +1   892     ;b5 - T1_PIN_IE :1, ÔÊÐí T1/P3.5 ½ÅÏÂ½µÑØÖÃ T1 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T1 ½Å»½ÐÑ powerdown¡£
                +1   893     ;b4 - T0_PIN_IE :1, ÔÊÐí T0/P3.4 ½ÅÏÂ½µÑØÖÃ T0 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T0 ½Å»½ÐÑ powerdown¡£
                +1   894     ;b3 - N/A
                +1   895     ;b2 - N/A
                +1   896     ;b1 - T1CLKO : ÔÊÐí T1 µÄÒç³öÔÚP1.1 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T1 Òç³öÂÊ
                +1   897     ;       T1 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / ( 256 - TH1 )
                +1   898     ;       T1 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / 12 / ( 256 - TH1 )
                +1   899     ;b0 -   T0CLKO : ÔÊÐí T0 µÄÒç³öÔÚP1.0 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T0 Òç³öÂÊ
                +1   900     ;       T0 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / ( 256 - TH0)
                +1   901     ;       T0 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / 12 / ( 256 - TH0 )
                +1   902     ;--------------------------------------------------------
                +1   903     ;--------------------------------------------------------
  0094          +1   904     REG_5412AD_P0M0                         EQU     094h;093h
  0093          +1   905     REG_5412AD_P0M1                         EQU     093h;094h
                +1   906     
  0092          +1   907     REG_5412AD_P1M0                         EQU     092h;091h
  0091          +1   908     REG_5412AD_P1M1                         EQU     091h;092h
                +1   909     
  0096          +1   910     REG_5412AD_P2M0                         EQU     096h;095h
  0095          +1   911     REG_5412AD_P2M1                         EQU     095h;096h
                +1   912     
  00B2          +1   913     REG_5412AD_P3M0                         EQU     0b2h;0b1h
  00B1          +1   914     REG_5412AD_P3M1                         EQU     0b1h;0b2h
                +1   915     
  00B4          +1   916     REG_5412AD_P4M0                         EQU     0b4h;0b3h
  00B3          +1   917     REG_5412AD_P4M1                         EQU     0b3h;0b4h
                +1   918     ;-------------------------------------------------------------
  008E          +1   919     REG_5412AD_AUXR                         EQU     08EH            ;¸¨Öú¼Ä´æÆ÷
  0085          +1   920     REG_5412AD_spctl                        EQU     085H
  0084          +1   921     REG_5412AD_spstat                       EQU     084H
  0086          +1   922     REG_5412AD_spdat                        EQU     086H
  00C1          +1   923     REG_WDT_CONTR                           EQU     0C1H            ;0E1H;0C1H
  00BB          +1   924     REG_5412AD_P4SW                         EQU     0BBH
  00AB          +1   925     REG_MCU_WKCTH                           EQU     0ABH
  00AA          +1   926     REG_MCU_WKCTL                           EQU     0AAH    
                +1   927     ;//////////////////////////////////////////////RC522¼Ä´æÆ÷ ////////////////////////////////
                             ///////////////////
  0000          +1   928     REG_RC522_RC522PAGE                     EQU     00H
  0001          +1   929     REG_RC522_CommandReg                    EQU     01H
  0002          +1   930     REG_RC522_ComIEnReg                     EQU     02H
  0003          +1   931     REG_RC522_DivIEnReg                     EQU     03H
  0004          +1   932     REG_RC522_ComIrqReg                     EQU     04H
  0005          +1   933     REG_RC522_DivIrqReg                     EQU     05H
  0006          +1   934     REG_RC522_ErrorReg                      EQU     06h
  0007          +1   935     REG_RC522_Status1Reg                    EQU     07h
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    18

  0008          +1   936     REG_RC522_Status2Reg                    EQU     08h
  0009          +1   937     REG_RC522_FIFODataReg                   EQU     09h
  000A          +1   938     REG_RC522_FIFOLevelReg                  EQU     0ah
  000B          +1   939     REG_RC522_WaterLevelReg                 EQU     0bh
  000C          +1   940     REG_RC522_ControlReg                    EQU     0ch
  000D          +1   941     REG_RC522_BitFramingReg                 EQU     0dh
  000E          +1   942     REG_RC522_CollReg                       EQU     0eh
  000F          +1   943     REG_RC522_RFU                           EQU     0fh
  0011          +1   944     REG_RC522_ModeReg                       EQU     11h
  0012          +1   945     REG_RC522_TxModeReg                     EQU     12h
  0013          +1   946     REG_RC522_RxModeReg                     EQU     13h
  0014          +1   947     REG_RC522_TxControlReg                  EQU     14h
  0015          +1   948     REG_RC522_TxAutoReg                     EQU     15h
  0016          +1   949     REG_RC522_TxSelReg                      EQU     16h
  0017          +1   950     REG_RC522_RxSelReg                      EQU     17h
  0018          +1   951     REG_RC522_RxThresholdReg                EQU     18h
  0019          +1   952     REG_RC522_DemodReg                      EQU     19h
  001C          +1   953     REG_RC522_MifareReg                     EQU     1ch
  001F          +1   954     REG_RC522_SerialSpeedReg                EQU     1fh
  0021          +1   955     REG_RC522_CRCResultRegH                 EQU     21h
  0022          +1   956     REG_RC522_CRCResultRegL                 EQU     22h
  0024          +1   957     REG_RC522_ModWidthReg                   EQU     24h
  0026          +1   958     REG_RC522_RFCfgReg                      EQU     26h
  0027          +1   959     REG_RC522_GsNReg                        EQU     27h
  0028          +1   960     REG_RC522_CWGsPReg                      EQU     28h
  0029          +1   961     REG_RC522_ModGsPReg                     EQU     29h
  002A          +1   962     REG_RC522_TModeReg                      EQU     2ah
  002B          +1   963     REG_RC522_TPrescalerReg                 EQU     2bh
  002C          +1   964     REG_RC522_TReloadRegH                   EQU     2ch
  002D          +1   965     REG_RC522_TReloadRegL                   EQU     2dh
  002E          +1   966     REG_RC522_TCounterValueRegH             EQU     2eh
  002F          +1   967     REG_RC522_TCounterValueRegL             EQU     2fh
                +1   968             
                +1   969     ;/////////////////////////////////////////////////Ò»°ãÏµÍ³³£Á¿±í///////////////////////////
                             //////////////////////
  0001          +1   970     CONST_HOLD_5823TX                       EQU     1
  0000          +1   971     CONST_HOLD_5823RX                       EQU     0
                +1   972             
                +1   973             
  00FF          +1   974     CONST_SYS_TradeConfine                  EQU     255                             ;½»Ò×Ê±¼äÏÞ
                             ÖÆ
  000A          +1   975     CONST_SYS_PowerONTimer                  EQU     10                              ;ÉÏµç¶¨Ê±Æ÷
                                  
  0088          +1   976     CONST_SYS_PREFlag                       EQU     088H                            ;
  00AA          +1   977     CONST_SYS_AA                            EQU     0AAH
  0055          +1   978     CONST_SYS_55                            EQU     55H
  0004          +1   979     CONST_SYS_OBUIDLEN                      EQU     4                               ;obuid ³¤¶È
  0008          +1   980     CONST_BSTLIMIT                          EQU     8;20;10                 ;¼«ÏÞBST¸öÊ
  0064          +1   981     CONST_BSTLIMIT02                        EQU     100
                +1   982     
  00FF          +1   983     CONST_VSTLIMIT                          EQU     255     ;100                    ;¼«ÏÞVST¸öÊ
  00FA          +1   984     CONST_Pro_OverTime2S                    EQU     250                             ;³¬Ê±ÏÞÊ±£¬
                             196-246*30=1200MS 
                +1   985     ;/////////////////////////////////////////////////³öÈë¿Ú³£Á¿±í/////////////////////////////
                             ////////////////////
  0003          +1   986     CONST_ETC_INPUT                         EQU     3       ;ETC Èë¿Ú
  0001          +1   987     CONST_MTC_INPUT                         EQU     1       ;MTC Èë¿Ú
  0001          +1   988     CONST_INPUT_ISEnable                    EQU     1;=1²»ÆôÓÃ =0ÆôÓÃ
                +1   989     ;/////////////////////////////////////////////////×´Ì¬³£Á¿±í///////////////////////////////
                             //////////////////
  0000          +1   990     CONST_STATE_TRUE                        EQU     000H                            ;Ö´ÐÐ³É¹¦
  00FF          +1   991     CONST_STATE_FALSE                       EQU     0FFH                            ;³ÌÐòÖ´ÐÐ³ö
                             ´í
                +1   992     ;Ò»°ãÐÔ´íÎó     01      µ¼ÈëÊ§°Ü        STR_InputFail
                +1   993     ;ºÏÍ¬ºÅ²»Í¬     02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                +1   994     ;Ê¹ÓÃ´ÎÊ=FFH    03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    19

  0001          +1   995     CONST_STATE_InputFail                   EQU     01
  0002          +1   996     CONST_STATE_IllegalInputCard            EQU     02
  0003          +1   997     CONST_STATE_InputCardInvalid            EQU     03
                +1   998     ;Ò»°ãÐÔ´íÎó     04      ¼¤»îÊ§°Ü        STR_ActiveFail
                +1   999     ;ºÏÍ¬ºÅ²»Í¬     05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                +1  1000     ;Ê¹ÓÃ´ÎÊ=FFH    06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
  0004          +1  1001     CONST_STATE_ActiveFail                  EQU     04
  0005          +1  1002     CONST_STATE_IllegalACTCard              EQU     05
  0006          +1  1003     CONST_STATE_ACTCardInvalid              EQU     06
                +1  1004             
  0007          +1  1005     CONST_STATE_5823INIER                   EQU     07      ;5823³õÊ¼»¯³ö´í
  0008          +1  1006     CONST_STATE_5823SleepEr                 EQU     08      ;5823ÐÝÃß³ö´í
  0009          +1  1007     CONST_STATE_GetSecureSelFileEr          EQU     09      ;getsecureÑ¡¿¨Ä¿Â¼³ö´í
                +1  1008     
  000A          +1  1009     CONST_STATE_BaseNinit                   EQU     10      ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  000B          +1  1010     CONST_STATE_BaseESAMDF01                EQU     11      ;Baseinit02º¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1  1011             
  000C          +1  1012     CONST_STATE_CARDPreDeal1001             EQU     12      ;Ô¤¶Á1001Ê§°Ü
  000D          +1  1013     CONST_STATE_CARDPreDeal0002             EQU     13      ;Ô¤¶Á0002Ê§°Ü
  000E          +1  1014     CONST_STATE_CARDPreDeal0012             EQU     14      ;Ô¤¶Á0012Ê§°Ü
  000F          +1  1015     CONST_STATE_CARDPreDeal0015             EQU     15      ;Ô¤¶Á0015Ê§°Ü
  0010          +1  1016     CONST_STATE_CARDPreDeal0019             EQU     16      ;Ô¤¶Á0019Ê§°Ü
  0011          +1  1017     CONST_STATE_CARDPreDeal3f00             EQU     17      ;Ô¤¶Á3f00Ê§°Ü
  0012          +1  1018     CONST_STATE_CARDPreDeal81               EQU     18      ;Ô¤¶Á81Ê§°Ü
                +1  1019             
  0013          +1  1020     CONST_STATE_BaseN01init                 EQU     19      ;Baseinitº¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  0014          +1  1021     CONST_STATE_Base01ESAMDF01              EQU     20      ;Baseinitº¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1  1022             
  0015          +1  1023     CONST_STATE_Base01Contact               EQU     21      ;Baseinitº¯Ê£¬Ìøµ½½Ó´¥
  0016          +1  1024     CONST_STATE_Base02Contact               EQU     22      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1  1025             
  0017          +1  1026     CONST_STATE_test                        EQU     23      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1  1027             
  0018          +1  1028     CONST_STATE_Base02Re                    EQU     24
  0019          +1  1029     CONST_STATE_Base02AntiColl              EQU     25
  001A          +1  1030     CONST_STATE_Base02Sel                   EQU     26
  001B          +1  1031     CONST_STATE_Base02Rats                  EQU     27
                +1  1032             
  001C          +1  1033     CONST_STATE_Base01Re                    EQU     28
  001D          +1  1034     CONST_STATE_Base01AntiColl              EQU     29
  001E          +1  1035     CONST_STATE_Base01Sel                   EQU     30
  001F          +1  1036     CONST_STATE_Base01Rats                  EQU     31      
                +1  1037             
  0020          +1  1038     CONST_STATE_MemoryEr                    EQU     32      
  0021          +1  1039     CONST_STATE_ExMemoryEr                  EQU     33      
  0022          +1  1040     CONST_STATE_ExMemoryEr02                EQU     34      
                +1  1041             
  0001          +1  1042     CONST_STATE_SERIALACCPET                EQU     001H                            ;´®¿Ú½ÓÊÕ´í
                             Îó
  0002          +1  1043     CONST_STATE_SERIALOVERTIME              EQU     CONST_STATE_SERIALACCPET + 1    ;´®¿Ú½ÓÊÕ³¬
                             Ê±
  0003          +1  1044     CONST_STATE_ACCEPTOVER                  EQU     CONST_STATE_SERIALOVERTIME + 1  ;´®¿Ú½ÓÊÕÍê
                             ±Ï£¬Ã»ÓÐºóÐø×Ö½Ú 
  0004          +1  1045     CONST_STATE_ACCEPTOVERLEN               EQU     CONST_STATE_ACCEPTOVER + 1      ;´®¿Ú½ÓÊÕ³¬
                             ³¤
  0005          +1  1046     CONST_STATE_RSTCPUER                    EQU     CONST_STATE_ACCEPTOVERLEN + 1   ;¸´Î»´®¿Ú´í
                             Îó
  0006          +1  1047     CONST_STATE_AUTHER                      EQU     CONST_STATE_RSTCPUER + 1        ;ÈÏÖ¤Ê§°Ü
                +1  1048             
                +1  1049     ;--- ¹¤×÷Çø³£Á¿¶¨Òå ---
  0000          +1  1050     CONST_WORKSTAION_0                      EQU     00H     ;¹¤×÷Çø0
  0001          +1  1051     CONST_WORKSTAION_1                      EQU     01H     ;¹¤×÷Çø1
  0002          +1  1052     CONST_WORKSTAION_2                      EQU     02H     ;¹¤×÷Çø2        
  0003          +1  1053     CONST_WORKSTAION_3                      EQU     03H     ;¹¤×÷Çø3
                +1  1054     
                +1  1055     ;//////////////////////////////////////¿¨Æ¬Âß¼­³£Á¿¶¨Òå////////////////////////////////////
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    20

                             ////////
  0017          +1  1056     CONST_CARD_PASS                         EQU     23
  0016          +1  1057     CONST_CARD_CONSUME                      EQU     22
                +1  1058     ;//////////////////////////////////////GSM³£Á¿¶¨Òå/////////////////////////////////////////
                             /////////
  0002          +1  1059     CONST_LHX_FLAG                          EQU     2 ;0-¹ú±êOBU  1-GSM OBU  2-433 OBU
                +1  1060     
                +1  1061     ;RTC ´ó´°Ê±¼ä                           ;6·ÖÖÓ£¬Æ½¾ùÁ½ÃëÒ»´ÎcellID
                +1  1062     ;CONST_RTCOverFlow                      EQU     144;180;180
                +1  1063     ;CONST_RTCUartRX                        EQU     24;4;8,12,16,20,24;142;
                +1  1064     
  0090          +1  1065     CONST_RTCOverFlow                       EQU     144;20;144;6;144;6;12;144
                +1  1066     ;CONST_RTCUartRX                                EQU     12
                +1  1067     ;CONST_RTCUartRX02                      EQU     142
  0000          +1  1068     CONST_Flag_INPUT                        EQU     0
  0001          +1  1069     CONST_Flag_OutPUT                       EQU     1
                +1  1070     
                +1  1071     ;GSM CellID ¼ÇÂ¼Ê¾ÝËùÔÚµÄÎÄ¼þÃû
  0000          +1  1072     CONST_Cellfile_H                        EQU     000H
  0009          +1  1073     CONST_Cellfile_L                        EQU     09h;030H
                +1  1074     
  00EF          +1  1075     CONST_ESAMCellfile_H                    EQU     0EFH;000H
  0007          +1  1076     CONST_ESAMCellfile_L                    EQU     07H;03h;030H
                +1  1077     ;CONST_Cellfile_H                       EQU     000H
                +1  1078     ;CONST_Cellfile_L                       EQU     008h
                +1  1079     
  00F0          +1  1080     CONST_GSM_MaxNum                        EQU     240
                +1  1081     ;CONST_GSM_MaxNum                       EQU     5
                +1  1082     
  0014          +1  1083     CONST_GSM_PJNum                         EQU     20
                +1  1084     ;CONST_GSM_PJNum                        EQU     1
                +1  1085     
                +1  1086     ;RTC Ð¡´°Ê±¼ä;
  0008          +1  1087     CONST_MCU_WKCTH                         EQU     008H;0fh;00fH;00fH;00fH
  00FF          +1  1088     CONST_MCU_WKCTL                         EQU     0FFH
                +1  1089     
                +1  1090     ;RTC ÊÇ·ñ¿ªÆô£¬±ê¼ÇÖµ
                +1  1091     ;=CONST_RTC_ON ±íÊ¾¿ªÆô
                +1  1092     ;= ÆäËü Ã»ÓÐ¿ªÆô
  0055          +1  1093     CONST_RTC_ON                            EQU     55H
  00FF          +1  1094     CONST_RTC_off                           EQU     0ffH
  0064          +1  1095     CONST_SYS_RTCOverTime                   EQU     100
                +1  1096     
                +1  1097     ;²å¿¨½«obuÖÐCellid¼ÇÂ¼µ¼Èëµ½¿¨Æ¬ÖÐ£¬Ò»´ÎÐ´Èëµ½¿¨Æ¬ÖÐ cellID µÄ×Ö½ÚÊ
  0008          +1  1098     CONST_GSM_NUM                           EQU     8               ;40
                +1  1099     ;//////////////////////////////////////MF³£Á¿¶¨Òå//////////////////////////////////////////
                             ////////
  0000          +1  1100     CONST_MF_READ                           EQU     00H     ;Ö¸ÁîÀàÐÍ ¶Á¿é
  0001          +1  1101     CONST_MF_WRITE                          EQU     01H     ;Ö¸ÁîÀàÐÍ Ð´¿é
  0002          +1  1102     CONST_MF_DECREMENT                      EQU     02H     ;Ö¸ÁîÀàÐÍ ¿Û¿î
  0003          +1  1103     CONST_MF_INCREMENT                      EQU     03H     ;Ö¸ÁîÀàÐÍ ³äÖµ
  0004          +1  1104     CONST_MF_RESTOR                         EQU     04H     ;Ö¸ÁîÀàÐÍ ±¸·Ý¿é
                +1  1105     
  00C0          +1  1106     CONST_MF_RC500DECREMENT                 EQU     0C0H    ;RC500 ¿Û¿î
  00C1          +1  1107     CONST_MF_RC500INCREMENT                 EQU     0C1H    ;RC500 ³äÖµ
                +1  1108     ;//////////////////////////////////////DSRC³£Á¿¶¨Òå////////////////////////////////////////
                             //////////
  0004          +1  1109     CONST_DSRC_MACCTRL                      EQU     4       ;MAC¿ØÖÆÓò
  0005          +1  1110     CONST_DSRC_LLCCTRL                      EQU     5       ;LLC¿ØÖÆÓò
  0006          +1  1111     CONST_DSRC_HEAD                         EQU     6       ;×Ö¶Î×ÖÍ·
  0007          +1  1112     CONST_DSRC_ACTION                       EQU     7       ;Action
  0008          +1  1113     CONST_DSRC_DID                          EQU     8       ;DSRC-DID
  0009          +1  1114     CONST_DSRC_ACTIONTYPE                   EQU     9       ;ActionType
  000A          +1  1115     CONST_DSRC_CONTAIN                      EQU     10      ;Contain
  000B          +1  1116     CONST_DSRC_Fill                         EQU     11      ;Fill
  000C          +1  1117     CONST_SSRC_FID                          EQU     12      ;ÎÄ¼þ±êÊ¶£¨FID£©
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    21

                +1  1118     
  0000          +1  1119     CONST_DSRC_FildIDAPPKey                 EQU     0       ;0¨D¨DETC Ó¦ÓÃÃÜÔ¿ÎÄ¼þ
  0001          +1  1120     CONST_DSRC_FildIDVehicle                EQU     1       ;1¨D¨DETC Ó¦ÓÃ³µÁ¾ÐÅÏ¢ÎÄ¼þ
  0002          +1  1121     CONST_DSRC_FildIDConsume                EQU     2       ;2-ETC Ó¦ÓÃ½»Ò×¼ÇÂ¼ÎÄ¼þ
  0003          +1  1122     CONST_DSRC_FildIDHold                   EQU     3       ;3-ETC Ó¦ÓÃ±£ÁôÎÄ¼þ
                +1  1123     
  0001          +1  1124     CONST_DSRC_ChannelIDICC                 EQU     1
  0002          +1  1125     CONST_DSRC_ChannelIDSAM                 EQU     2
                +1  1126     ;//////////////////////////////////////AcionType³£Á¿¶¨Òå///////////////////////////////////
                             ////////////
  0000          +1  1127     Const_ActionType_GetSecure              EQU     0       ;getSecure
  0001          +1  1128     Const_ActionType_SetSecure              EQU     1       ;setSecure
  0002          +1  1129     Const_ActionType_GetRand                EQU     2       ;getRand
  0003          +1  1130     Const_ActionType_TransferChannel        EQU     3       ;transferChannel
  0004          +1  1131     Const_ActionType_SetMMI                 EQU     4       ;SetMMI
                +1  1132     ;//////////////////////////////////////Flash³£Á¿¶¨Òå///////////////////////////////////////
                             ///////////
  0058          +1  1133     CONST_Flash_SysinfoLen                  EQU     88;39;38+12     ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0004          +1  1134     CONST_Flash_0002Len                     EQU     4       ; 0002ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È  
  0028          +1  1135     CONST_Flash_0012Len                     EQU     40      ; 0012ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
                +1  1136     ;CONST_Flash_0015Len                    EQU     33      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1  1137     CONST_Flash_0015Len                     EQU     43      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  003C          +1  1138     CONST_Flash_0019Len                     EQU     60;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1  1139     CONST_Flash_0019GBLen                   EQU     43;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0001          +1  1140     CONST_Flash_CardTypeLEN                 EQU     1       ; ÉÏ´Î²å¿¨ÊÇ½Ó´¥£¬»¹ÊÇ·Ç½Ó´¥
                +1  1141     ;CONST_Flash_SYSPARAMLEN                EQU     1       ; ÏµÍ³²ÎÊ
  0008          +1  1142     CONST_Flash_BeaconIDUnixTimeLen         EQU     8       ; ÌìÏßID¼°unixtime
  0001          +1  1143     CONST_FALSH_PREFlagLen                  EQU     1       ; Ô¤´¦Àí±ê¼Ç=88,±íÊ¾ÉÏ»ØÔ¤´¦Àí³É¹¦
                +1  1144     
                +1  1145     ;************************************************************************************
                +1  1146     ;ÌØ±ð±¸×¢: ÓÉÓÚÔÚÔ¤¶Á0015/0012/0019Ê±ÔÝ´æÔÚÍâ´æµÄ³¤¶È³¬¹128¸ö×Ö½Ú£¬ËùÒÔ£¬Íâ´æ±äÁ¿µÄÆðÆôÎ»ÖÃ
                             £¬ÒªÔÚConst_Flash_FileLen
                +1  1147     ;³¤¶ÈÖ®ºó£¬Const_Flash_FileLen = 8F£¬Èç¹ûÒÔºóConst_Flash_FileLen³¤¶È¸ÄÁË£¬ÄÇÍâ´æµÄÆôÊ¼Î»ÖÃÒ
                             ²Òª¸Ä
                +1  1148     ;Íâ´æµÄÆôÊ¼Î»ÖÃ¶¨ÒåÔÚOBUmain.incÖÐXDATA_VARSTARTµÄÖµ
                +1  1149     ;************************************************************************************
  00EC          +1  1150     Const_Flash_FileLen                     EQU     CONST_Flash_SysinfoLen + CONST_Flash_0015Le
                             n + CONST_Flash_0019Len + CONST_Flash_0012Len + CONST_Flash_0002Len + CONST_Flash_CardTypeLEN 
                +1  1151     
  0072          +1  1152     CONST_FLASH_Block01                     EQU     72H
                +1  1153     
  0072          +1  1154     CONST_FLASH_STARTHIGH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
  0000          +1  1155     CONST_FLASH_STARTLOW                    EQU     00H                                        
                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
                +1  1156     
  0072          +1  1157     CONST_FLASH_SYSINFOH                    EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ,LEN = 38 BYTE
  0000          +1  1158     CONST_FLASH_SYSINFOL                    EQU     00H
                +1  1159     
  0072          +1  1160     CONST_FLASH_0002H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0002,LEN = 4 BYTE
  0058          +1  1161     CONST_FLASH_0002L                       EQU     CONST_FLASH_SYSINFOL + CONST_Flash_SysinfoL
                             en
                +1  1162     
  0072          +1  1163     CONST_FLASH_0012H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0012,LEN = 24 BYTE
  005C          +1  1164     CONST_FLASH_0012L                       EQU     CONST_FLASH_0002L + CONST_Flash_0002Len
                +1  1165     
  0072          +1  1166     CONST_FLASH_0015H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0015,LEN = 33 BYTE
  0084          +1  1167     CONST_FLASH_0015L                       EQU     CONST_FLASH_0012L + CONST_Flash_0012Len
                +1  1168     
  0072          +1  1169     CONST_FLASH_0019H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0019,LEN = 43 BYTE      
  00AF          +1  1170     CONST_FLASH_0019L                       EQU     CONST_FLASH_0015L + CONST_Flash_0015Len
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    22

                +1  1171             
                +1  1172     ;CONST_FLASH_01BlockH                   EQU     6EH;2EH                                    
                                  ; MF¿¨µÚ1¿éÊ¾Ý
                +1  1173     ;CONST_FLASH_01BlockL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len
                +1  1174             
                +1  1175     ;CONST_FLASH_04BlockH                   EQU     6EH;2EH
                +1  1176     ;CONST_FLASH_04BlockL                   EQU     CONST_FLASH_01BlockL + 16                  
                                  ;MF¿¨µÚ4¿éÊ¾Ý
                +1  1177             
                +1  1178     ;CONST_FLASH_10BlockH                   EQU     6EH;2EH
                +1  1179     ;CONST_FLASH_10BlockL                   EQU     CONST_FLASH_04BlockL + 16                  
                                  ;MF¿¨µÚ16¿éÊ¾Ý
                +1  1180             
  0072          +1  1181     CONST_FLASH_LASTCARDH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ;ÉÏÒ»´Î²å¿¨ÀàÐÍ
  00EB          +1  1182     CONST_FLASH_LASTCARDL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len    
                                  ;CONST_FLASH_10BlockL + 16
                +1  1183             
                +1  1184     ;CONST_FLASH_SYSPARAMH                  EQU     6EH;2EH                         ;ÏµÍ³²ÎÊ
                +1  1185     ;CONST_FLASH_SYSPARAML                  EQU     CONST_FLASH_LASTCARDL + 1
                +1  1186             
  0072          +1  1187     CONST_Flash_BeaconIDUnixTimeH           EQU     CONST_FLASH_Block01;2EH
  00EC          +1  1188     CONST_Flash_BeaconIDUnixTimeL           EQU     CONST_FLASH_LASTCARDL + 1       ; 8 byte Ìì
                             ÏßIDºÍunixtimeÊ±¼ä
                +1  1189             
  0072          +1  1190     CONST_FALSH_PREFlagH                    EQU     CONST_FLASH_Block01;2EH
  00F4          +1  1191     CONST_FALSH_PREFlagL                    EQU     CONST_Flash_BeaconIDUnixTimeL + CONST_Flash
                             _BeaconIDUnixTimeLen;1 Byte
                +1  1192             
  0072          +1  1193     CONST_FALSH_PREFlag02H                  EQU     CONST_FLASH_Block01;2EH
  00F5          +1  1194     CONST_FALSH_PREFlag02L                  EQU     CONST_FALSH_PREFlagL + 1        ;1      ;3 
                             Byte
                +1  1195              
  0072          +1  1196     CONST_FALSH_PREFlag03H                  EQU     CONST_FLASH_Block01;2EH
  00F6          +1  1197     CONST_FALSH_PREFlag03L                  EQU     CONST_FALSH_PREFlag02L + 1      ;1      ;3 
                             Byte
                +1  1198             
  0072          +1  1199     CONST_FALSH_PowerH                      EQU     CONST_FLASH_Block01;2EH
  00F7          +1  1200     CONST_FALSH_PowerL                      EQU     CONST_FALSH_PREFlag03L + 1      ;1      ;3 
                             Byte
                +1  1201             
                +1  1202     ;CONST_FLASH_SysRstH                    EQU     06CH
                +1  1203     ;CONST_FLASH_SysRstL                    EQU     000H
                +1  1204             
  006C          +1  1205     CONST_FLASH_Sys0020H                    EQU     6ch;064H
  0000          +1  1206     CONST_FLASH_Sys0020L                    EQU     000H
                +1  1207             
  006A          +1  1208     CONST_FLASH_Sys0020numH                 EQU     6ah;062H
  0000          +1  1209     CONST_FLASH_Sys0020numL                 EQU     000H
                +1  1210             
                +1  1211     ;CONST_FLASH_SysHVH                     EQU     6CH;68h;062H
                +1  1212     ;CONST_FLASH_SysHVL                     EQU     000H
                +1  1213             
  00FF          +1  1214     const_black_h                           EQU     0ffH
  00FF          +1  1215     const_black_l                           EQU     0ffH
                +1  1216             
  0000          +1  1217     const_white_h                           EQU     000H;40h                                ; 0
                             0h
  0031          +1  1218     const_white_l                           EQU     031H;80h                                ; 0
                             0h
                +1  1219     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////////
                +1  1220     ;(¾§Õñ*2)/(32*12*²¨ÌØÂÊ)                
                +1  1221     ;CONST_SOF                              EQU     22118400                        ; 24576000
  0000          +1  1222     CONST_SOF                               EQU     24576000                        ; µ±Ç°Ö÷Æµ¾
                             §ÌåÆµÂÊ
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    23

                +1  1223     ;//////////////////////////////////////// PPS ³£Á¿ ¶¨Òå ///////////////////////////////////
                             ////////////
  0010          +1  1224     CONST_PPS_9600                          EQU     10H                             
  0013          +1  1225     CONST_PPS_38400                         EQU     13H
  0018          +1  1226     CONST_PPS_115200                        EQU     18H
  0096          +1  1227     CONST_PPS_230000                        EQU     96H
                +1  1228     ;//////////////////////////////////////// ´®¿Ú ³£Á¿ ¶¨Òå //////////////////////////////////
                             /////////////
                +1  1229             
  0000          +1  1230     CONST_BAUD_9600                         EQU     00                              ; ²¨ÌØÂÊ±àÂ
                             ë
  0001          +1  1231     CONST_BAUD_38400                        EQU     01
  0002          +1  1232     CONST_BAUD_115200                       EQU     02
  0003          +1  1233     CONST_BAUD_115200PC                     EQU     03
  0004          +1  1234     CONST_BAUD_230000                       EQU     04
  0005          +1  1235     CONST_BAUD_38400PC                      EQU     5
  0006          +1  1236     CONST_BAUD_9600PC                       EQU     06                              ; ²¨ÌØÂÊ±àÂ
                             ë
                +1  1237             
                +1  1238     ;ÔÚ24.576MÏÂ´®¿ÚµÚÒ»¸ö×Ö½ÚÉè¶¨ÎªÒª¼ìË÷100MS = CONST_SOF/(10*(FF*FF) = 38 = 26H
  0010          +1  1239     CONST_SOFTFIRSTSCANTIME                 EQU     16;8;32;16;8;10H        ; 10h   ;10h    ;10
                             H;0dH;10H    ;  26H
  00FF          +1  1240     CONST_SOFTFIRSTSCANTIMEXX               EQU     0FFH    ; ESAM¿¨·Ç³£¹æÖ¸Áî£¬¼Ó´óËÑË÷Ê±¼äÏÞÖ
                             Æ[Èç80 E4Ö¸Áî]
  0070          +1  1241     CONST_SOFTSECOND                        EQU     070H    ; 10H   ;  Èí½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼ä
                             ÏÞ³¤ CONST_SOFTSECOND*255¸öÖÜÆÚ
  0015          +1  1242     CONST_HANDSECOND                        EQU     15H     ; 01AH[ÔÚ9600²¨ÌØÏÂ£¬Òª·Å¿íµ½1AH];Ó
                             ²½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼äÏÞ³¤ CONST_HANDSECOND*255¸öÖÜÆÚ
                +1  1243                                                     
  0014          +1  1244     CONST_SOFTBYTESP                        EQU     20;50;4 ;Èí´®¿Ú·¢ËÍ³ÌÐò×Ö½Ú¼ä¾à¿ØÖÆÓë_FUN_L
                             IB_DELAYSIMPLAYº¯ÊÅäºÏÊ¹ÓÃ
                +1  1245     ;//////////////////////////////////////// Èí´®¿Ú ³£Á¿ ¶¨Òå ////////////////////////////////
                             ///////////////
                +1  1246     ;CONST_BAUD_FULL9600                    EQU     637     ;2560
                +1  1247     ;CONST_BAUD_HALF9600                    EQU     317     ;2560
                +1  1248     ;CONST_BAUD_FULL9600                    EQU     576     ;2304
                +1  1249     ;CONST_BAUD_HALF9600                    EQU     285     ;1152
                +1  1250     ;CONST_BAUD_FULL9600                    EQU     76      ;2304
                +1  1251     ;CONST_BAUD_HALF9600                    EQU     85      ;1152
                +1  1252     ;CONST_BAUD_FULL38400                   EQU     157     ;640
                +1  1253     ;CONST_BAUD_HALF38400                   EQU     77      ;213
                +1  1254     ;CONST_BAUD_FULL38400                   EQU     141     ;576
                +1  1255     ;CONST_BAUD_HALF38400                   EQU     69      ;288
                +1  1256     ;CONST_BAUD_FULL115200                  EQU     50      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1  1257     ;CONST_BAUD_HALF115200                  EQU     21      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1  1258     ;CONST_BAUD_FULL115200                  EQU     45      ;192 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1  1259     ;CONST_BAUD_HALF115200                  EQU     21      ;96  Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1  1260             
  00B3          +1  1261     CONST_BAUD_FULL9600                     EQU     179     ;[(24576000/9600)*(3.58/6)-12]/4-20
                             0=[2560*(3.59/6)-12]/4-250=(1527-12)/4-200=378.75=379-200=179
  0058          +1  1262     CONST_BAUD_HALF9600                     EQU     88      ;[(24576000/9600/2)*(3.58/6)-12]/4-
                             100=[2560*(3.59/6)-12]/4=(763-12)/4-100=187.75=188-100=88
                +1  1263     
  005D          +1  1264     CONST_BAUD_FULL38400                    EQU     93      ;[(24576000/38400)*(3.58/6)-12]/4= 
                             [640 * (3.59/6)-12]/4 = (382-12)/4=92.5=93
  002D          +1  1265     CONST_BAUD_HALF38400                    EQU     45      ;[(24576000/38400/2)*(3.58/6)-12]/4
                             = [320 * (3.59/6)-12]/4 = (191-12)/4=44.75=45
                +1  1266     
  001D          +1  1267     CONST_BAUD_FULL115200                   EQU     29      ;[(24576000/115200)*(3.58/6)-12]/4=
                             [213*(3.58/6)-12]/4=(127-12)/4=28.75=29
  000D          +1  1268     CONST_BAUD_HALF115200                   EQU     13;     ;[(24576000/115200/2)*(3.58/6)-12]/
                             4=[115.5*(3.58/6)-12]/4=(64-12)/4=13
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    24

                +1  1269     
  000F          +1  1270     CONST_BAUD_FULL230000                   EQU     15;13   ;[(24576000/230000/2)*(3.58/6)]/4 =
                              64/4 = 16
  0008          +1  1271     CONST_BAUD_HALF230000                   EQU     8;5     ;[(24576000/230000/2)*(3.58/6)]/4=[
                             115.5*(3.58/6)]/4=32/4=8
                +1  1272             
  00B3          +1  1273     CONST_BAUD_CURRENTBITFULL               EQU     CONST_BAUD_FULL9600
  0058          +1  1274     CONST_BAUD_CURRENTBITHALF               EQU     CONST_BAUD_HALF9600
                +1  1275     ;CONST_BAUD_BITHALF12                   EQU     CONST_BAUD_CURRENTBITHALF - 3
                +1  1276     ;CONST_BAUD_BITFULL8                    EQU     CONST_BAUD_CURRENTBITFULL - 2
                +1  1277     ;CONST_BAUD_BITFULL12                   EQU     CONST_BAUD_CURRENTBITFULL - 3
                +1  1278     ;CONST_BAUD_BITFULL20                   EQU     CONST_BAUD_CURRENTBITFULL - 5
                +1  1279     ;CONST_BAUD_BITFULL28                   EQU     CONST_BAUD_CURRENTBITFULL - 7
                +1  1280             
  000C          +1  1281     CONST_BAUD_BITHALF12                    EQU     3 + 9
  000B          +1  1282     CONST_BAUD_BITFULL8                     EQU     2 + 9
  000C          +1  1283     CONST_BAUD_BITFULL12                    EQU     3 + 9
  000E          +1  1284     CONST_BAUD_BITFULL20                    EQU     5 + 9
  0010          +1  1285     CONST_BAUD_BITFULL28                    EQU     7 + 9
                +1  1286             
                +1  1287     ;////////////////////////////////////////  Ó²´®¿Ú ³£Á¿ ¶¨Òå ///////////////////////////////
                             ////////////////
                +1  1288     ;CONST_BAUD_HAND115200                  EQU     0FFH;(256 - CONST_SOF/(192*115200))     ;
                +1  1289     ;CONST_BAUD_HAND38400                   EQU     0FDH;(256 - (CONST_SOF/(192*38400)))    ;
                +1  1290     ;CONST_BAUD_HAND9600                    EQU     0F4H;(256 - CONST_SOF/(192*9600))       ;
                +1  1291     
  00FC          +1  1292     CONST_BAUD_HAND230000                   EQU     252     ;0FCH   24.576x1000000/(230000x6/3.
                             58=)/16 = 4 = F8H
  00F3          +1  1293     CONST_BAUD_HAND115200PC                 EQU     243     ;243    ;24.576 / 0F3H  ;24576000 /
                              32179 = 764 / 16 = 47.7 = 48 = D0H
  00F8          +1  1294     CONST_BAUD_HAND115200                   EQU     248     ;0F8H   ;24.576x1000000/(115200x6/3
                             .58=193073)/16 = 8 = F8H             
  00D8          +1  1295     CONST_BAUD_HAND38400pc                  EQU     216     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  00E9          +1  1296     CONST_BAUD_HAND38400                    EQU     233     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  0060          +1  1297     CONST_BAUD_HAND9600pc                   EQU     96      ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1  1298     
  00A3          +1  1299     CONST_BAUD_HAND9600                     EQU     163     ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1  1300     
                +1  1301     ;24.576x1000000/(38400x9.6/3.58=102972)/16=15 = f1
                +1  1302     ;24.576x1000000/(9600x9.6/3.58=25743)/16=60 = c4h
                +1  1303     ;24.576x1000000/(230000x6/3.58=385475)/16=4 = fch
                +1  1304     
                +1  1305     ;////////////////////////////////////////  Ö¸Áî¼¯ /////////////////////////////////////////
                             //////
                +1  1306     ;LL C2H LH 32H
                +1  1307     ;ML 62H MH 12H
                +1  1308     ;HL 32H HH 12H
                +1  1309             
  0001          +1  1310     CONST_ACT_L                             EQU     1
  0002          +1  1311     CONST_ACT_M                             EQU     2
  0003          +1  1312     CONST_ACT_H                             EQU     3
                +1  1313             
  0002          +1  1314     CONST_ACT_V                             EQU     CONST_ACT_M
                +1  1315             
  000A          +1  1316     CONST_ACT_L_L                           EQU     0ah;0C2H
  0006          +1  1317     CONST_ACT_L_H                           EQU     06h;032H
                +1  1318             
  0006          +1  1319     CONST_ACT_M_L                           EQU     06h;062H
  0000          +1  1320     CONST_ACT_M_H                           EQU     00h;012H
                +1  1321             
  0000          +1  1322     CONST_ACT_H_L                           EQU     00h;032H
  0001          +1  1323     CONST_ACT_H_H                           EQU     01h;012H
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    25

                +1  1324     
                    1325     
                    1326             
                    1327     ;-----------------------------------------------------------------
                    1328     ;ÃèÊö:ÖÐ¶Ï ÏòÁ¿ 
                    1329     ;-----------------------------------------------------------------
                    1330     ;External Interrupt 0   0003H
                    1331     ;Timer 0                000BH
                    1332     ;External Interrupt     0013H
                    1333     ;Timer 1                001BH
                    1334     ;UART                   0023H
                    1335     ;ADC/SPI                002BH
                    1336     ;PCA/LVD                0033H
                    1337     ;                       ;
                    1338     ;IE                     ;
                    1339     ;IE.0   INT0            ;Î¢²¨»½ÐÑÖÐ¶Ï
                    1340     ;IE.1   Timer0          ;T0¶¨Ê±Æ÷
                    1341     ;IE.2   INT1            ;²å¿¨ÖÐ¶Ï[×´Ì¬:µçÆ½´¥·¢][Æ½Ê±Îª¸ß£¬²åÈëÎªµÍ]
                    1342     ;IE.3   Timer1          ;²ð¶¯ÖÐ¶Ï [×´Ì¬:°´ÏÂÎª¸ß£¬·Å¿ªÎªµÍ] [µçÆ½´¥·¢]td 
                    1343     ;IE.4   UART            
                    1344     ;IE.5   ADC/SPI         
                    1345     ;IE.6   PCA/LVD         
                    1346     ;×¢Òâ: ´®¿Ú ÓÃBRT ×ö ²¨ÌØÂÊ ·¢ÉúÆ÷
                    1347     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1348             
----                1349             CSEG    AT      00H
0000 020000   F     1350             JMP             AP_start                ; Ö÷´¦Àí³ÌÐò
                    1351             
----                1352             CSEG    AT      03H
0003 020000   F     1353             JMP             Int_WaveActive                  ; Íâ²¿ÖÐ¶Ï0£¬Î¢²¨»½ÐÑÖÐ¶Ï
                    1354             
----                1355             CSEG    AT      0BH
000B 020000   F     1356             JMP             Int_Timer0                      ; T0¶¨Ê±Æ÷ÖÐ¶Ï
                    1357             
----                1358             CSEG    AT      13H                     ; Íâ²¿ÖÐ¶Ï1£¬²å¿¨ÖÐ¶Ï
0013 020000   F     1359             JMP     Int_InsertActive                
                    1360             
----                1361             CSEG    AT      1BH
001B 020000   F     1362             JMP             Int_UnixActive                  ; ²ð¶¯ÖÐ¶Ï
                    1363             
----                1364             CSEG    AT      23H
0023 020000   F     1365             JMP     Int_UART                        ; ´®¿ÚÖÐ¶Ï      
                    1366             
----                1367             RSEG    ?pr?OBUMAIN?tf0_timer_1
                    1368             USING   0
                    1369     ;--------------------------------------
                    1370     ;ÃèÊö:
                    1371     ;       ´®¿Ú¶Ï½ÓÊÕ³ÌÐò
                    1372     ;´¥·¢·½Ê½
                    1373     ;       ÏÂ½µÑÓ´¥·¢
                    1374     ;--------------------------------------
0000                1375     Int_UART:
                    1376             
0000 C28C           1377             CLR     TR0
0002 C282           1378             CLR     PIN_WAVE_CHANNEL1
0004 53AB7F         1379             ANL     REG_MCU_WKCTH,#01111111B
0007 C2AF           1380             CLR     EA
0009 C2AC           1381             CLR     ES                      ;ÔÊÐíÍâ²¿ÖÐ¶Ï0
                    1382             ;[2013-7-20] MOV        REG_WDT_CONTR,#00111111B        
000B 758100   F     1383             MOV     SP,#IDATA_STACK
000E 7400     F     1384             MOV     A,#LOW  _FUN_TEST_SerialTX03    ;_FUN_CC1101_RX
0010 C0E0           1385             PUSH    ACC
0012 7400     F     1386             MOV     A,#HIGH _FUN_TEST_SerialTX03    ;_FUN_CC1101_RX
0014 C0E0           1387             PUSH    ACC
                    1388             
0016                1389     Int_UART_OVER:
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    26

                    1390             
0016 32             1391             RETI
                    1392     ;--------------------------------------
                    1393     ;ÃèÊö:  ²ð¶¯¿ª¹Ø°´ÏÂ¼ÌÐøÎ¢²¨»½ÐÑÁ÷³Ì;µ¯¿ªÌø×ªµ½AP_start
                    1394     ;´¥·¢·½Ê½
                    1395     ;       ÏÂ½µÑÓ ´¥·¢
                    1396     ;¹¦ÄÜ£º Î¢²¨»½ÐÑ²ð¶¯¿ª¹Ø·À¶¶
                    1397     ;--------------------------------------
0017                1398     Int_Invalid:
0017 C2AF           1399             CLR     EA
0019 7F01           1400             mov     r7,#1
001B 120000   F     1401             call    _fun_lib_delay          
001E 20B512         1402             JB      Pin_unfix,Int_WaveActive_S                      ;Pin_unfix=1(²ðÐ¶ÒÑ°´)
                    1403             
0021 75A800         1404             MOV     IE,#0
0024 758100   F     1405             MOV     SP,#IDATA_STACK
0027 7400     F     1406             MOV     A,#low AP_start;OBUMain_sys_OVER
0029 C0E0           1407             PUSH    ACC
002B 7400     F     1408             MOV     A,#high AP_start ;OBUMain_sys_OVER
002D C0E0           1409             PUSH    ACC
                    1410             
002F 32             1411             RETI
                    1412     ;--------------------------------------;
                    1413     ;ÃèÊö£º;
                    1414     ;       Íâ²¿ÖÐ¶Ï0£¬Î¢²¨»½ÐÑÖÐ¶Ï
                    1415     ;´¥·¢·½Ê½
                    1416     ;       ÏÂ½µÑÓ´¥·¢
                    1417     ;--------------------------------------
0030                1418     Int_WaveActive:
                    1419             
0030 30B5E4         1420             JnB     Pin_unfix,Int_Invalid                           ;Pin_unfix=0(²ðÐ¶Î´°´)
0033                1421     Int_WaveActive_S:
0033 53AB7F         1422             ANL     REG_MCU_WKCTH,#01111111B                        ;½ûÖ¹ÄÚ²¿Í£»ú»½ÐÑ¶¨Ê±Æ÷
0036 C2AF           1423             CLR     EA
0038 C2AC           1424             CLR     ES
                    1425             
003A C2A8           1426             CLR     EX0                                                                        
                                                                  ;ÔÊÐíÍâ²¿ÖÐ¶Ï0
003C 758100   F     1427             MOV     SP,#IDATA_STACK
003F 7400     F     1428             MOV     A,#low SEG_OBUMAIN_WAVEACTIVE;TEST_5823_Loop
0041 C0E0           1429             PUSH    ACC
0043 7400     F     1430             MOV     A,#high SEG_OBUMAIN_WAVEACTIVE;TEST_5823_Loop
0045 C0E0           1431             PUSH    ACC
                    1432             
0047 32             1433             RETI
                    1434     ;--------------------------------------
                    1435     ;ÃèÊö£º
                    1436     ;       ²å¿¨ÖÐ¶Ï ÖÐ¶Ï
                    1437     ;´¥·¢·½Ê½
                    1438     ;       ÏÂ½µÑÓ´¥·¢
                    1439     ;       ×´Ì¬
                    1440     ;×´Ì¬
                    1441     ;--------------------------------------
0048                1442     Int_InsertActive:       
0048 C2AF           1443             CLR     EA
004A 53AB7F         1444             ANL     REG_MCU_WKCTH,#01111111B
004D C2AF           1445             CLR     EA
004F C2AC           1446             CLR     ES
0051 C2AA           1447             CLR     EX1     
0053 758100   F     1448             MOV     SP,#IDATA_STACK
0056 7400     F     1449             MOV     a,#low SEG_OBUMAIN_CARDACTIVE
0058 C0E0           1450             PUSH    acc
005A 7400     F     1451             MOV     a,#high SEG_OBUMAIN_CARDACTIVE
005C C0E0           1452             PUSH    acc     
005E                1453     Int_InsertActive_Over:  
005E 32             1454             RETI
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    27

                    1455             
005F                1456     Int_InsertActive_RET:
005F D2AF           1457             SETB    EA
0061 32             1458             RETI    
                    1459     ;--------------------------------------
                    1460     ;ÃèÊö£º
                    1461     ;       T0¶¨Ê±Æ÷ ÖÐ¶Ï
                    1462     ;´¥·¢·½Ê½
                    1463     ;       ¶¨Ê±Æ÷´¥·¢
                    1464     ;       ×´Ì¬
                    1465     ;--------------------------------------
0062                1466     Int_Timer0:
                    1467             
0062 C0E0           1468             push    acc
0064 7401           1469             mov     a,#01
0066 2500     F     1470             add     a,DATA_PowerONTimer                                             ;DATA_Power
                             ONTimer¼ÆÊÆ÷
0068 F500     F     1471             mov     DATA_PowerONTimer,a
006A 5012           1472             jnc     Int_T0_RET
                    1473             ;³¬Ê±´¦Àí
006C D0E0           1474             pop     acc
006E C28C           1475             CLR     TR0                                                                        
                                                                          ; ¹Ø±ÕT0
0070 C2A9           1476             CLR     ET0                                                                        
                                                                          ; ¹Ø±ÕT0Ê¹ÄÜ
0072 758100   F     1477             MOV     SP,#IDATA_STACK
0075 7400     F     1478             mov     A,#low OBUMAIN_WAVEACTIVE_OVER
0077 C0E0           1479             push    ACC
0079 7400     F     1480             mov     A,#high OBUMAIN_WAVEACTIVE_OVER
007B C0E0           1481             push    ACC
                    1482             
007D                1483     Int_T0_OVER:
                    1484             
007D 32             1485             RETI
                    1486             
007E                1487     Int_T0_RET:                                                                                
                                                    ;Î´³¬Ê±
007E D0E0           1488             POP     ACC
0080 32             1489             RETI
                    1490     ;--------------------------------------
                    1491     ;ÃèÊö£º
                    1492     ;ÃèÊö£º
                    1493     ;       ²ð¶¯ÖÐ¶Ï & T1¶¨Ê±Æ÷
                    1494     ;´¥·¢·½Ê½
                    1495     ;       µçÆ½´¥·¢
                    1496     ;×´Ì¬   
                    1497     ;       ²ð¶¯£º°´ÏÂÎª¸ß£¬·Å¿ªÎªµÍ
                    1498     ;       ¶¨Ê±Æ÷1£¬ÔÝÊ±Ã»ÓÐÓÃµ½ÖÐ¶Ï£¬½öÎª´®¿Ú1µÄ²¨ÌØÂÊ·¢ÉúÆ÷
                    1499     ;--------------------------------------
0081                1500     Int_UnixActive: 
0081 20B526         1501             JB      Pin_unfix,Int_UnixActive_Over                           ;Pin_unfix=0Î´°´£»P
                             in_unfix=1°´ÏÂ
0084 C2AF           1502             CLR     EA
                    1503             
0086 C007           1504             PUSH    AR7     
0088 7F0A           1505             mov     r7,#10
008A 120000   F     1506             call    _fun_lib_delay          
008D D007           1507             POP     AR7
                    1508             
008F 30B504         1509             JnB     Pin_unfix,Int_UnixActive_01     
0092 D2AF           1510             setb    EA
0094 8014           1511             jmp     Int_UnixActive_Over     
0096                1512     Int_UnixActive_01:      
0096 53AB7F         1513             ANL     REG_MCU_WKCTH,#01111111B        
0099 C2AF           1514             CLR     EA
009B C2AC           1515             CLR     ES
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    28

009D C2AB           1516             CLR     ET1                                                                        
                                                                          ;ÔÊÐíÍâ²¿ÖÐ¶Ï1  
                    1517             
009F 758100   F     1518             MOV     SP,#IDATA_STACK
00A2 7400     F     1519             mov     a,#low SEG_OBUMAIN_CDACTIVE
00A4 C0E0           1520             push    acc
00A6 7400     F     1521             mov     a,#high SEG_OBUMAIN_CDACTIVE
00A8 C0E0           1522             push    acc
00AA                1523     Int_UnixActive_Over:
00AA 32             1524             RETI
                    1525     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /
00AB                1526     Sleep:
                    1527     
00AB                1528     _Fun_OBUmain_PinSleep:
                    1529     
00AB E5BB           1530             MOV     A,REG_5412AD_P4SW
00AD 4470           1531             ORL     A,#01110000B
00AF F5BB           1532             MOV     REG_5412AD_P4SW,A
                    1533             
00B1 759400         1534             MOV     REG_5412AD_P0M0,#00000000B
00B4 759301         1535             MOV     REG_5412AD_P0M1,#00000001B
                    1536             
00B7 759600         1537             MOV     REG_5412AD_P2M0,#00000000B
00BA 759500         1538             MOV     REG_5412AD_P2M1,#00000000B
                    1539             
00BD 75B200         1540             MOV     REG_5412AD_P3M0,#00000000B
00C0 75B12C         1541             MOV     REG_5412AD_P3M1,#00101100B
                    1542             
00C3 75B400         1543             MOV     REG_5412AD_P4M0,#00000000B
00C6 75B300         1544             MOV     REG_5412AD_P4M1,#00000000B
                    1545             
                    1546             ;JMP    OBUmain_PinSleep_RTCOff 
00C9 7800     F     1547             MOV     R0,#XDATA_RTCMode
                    1548             ;       MOVX    A,@R0
00CB 758302         1549             MOV     DPH,#2
00CE 8882           1550             MOV     DPL,R0
00D0 E0             1551             MOVX    A,@DPTR
00D1 6455           1552             XRL     A,#CONST_RTC_ON
00D3 7018           1553             JNZ     OBUmain_PinSleep_RTCOff
                    1554             
                    1555     ;/////////////////////////////////////////////////////////////////////////
00D5                1556     OBUmain_PinSleep_RTCON:
00D5 759200         1557             MOV     REG_5412AD_P1M0,#00000000B
00D8 759144         1558             MOV     REG_5412AD_P1M1,#01000100B      ; MISO ÎªÊäÈë   
                    1559             
00DB C2A3           1560             CLR     PIN_PWR_GSM                     ; P2.0  
                    1561             ;       SETB    PIN_PWR_GSM
00DD D297           1562             SETB    PIN_UART2_TX
00DF D296           1563             SETB    PIN_UART2_RX
                    1564             ;SETB   PIN_Bluetooth_RST
                    1565             
                    1566             ;---CLR PIN_SE_IO1
                    1567             ;CLR    PIN_CC1101_MOSI 
00E1 D292           1568             SETB    Pin_5823BK_IRQ
00E3 D291           1569             SETB    PIN_BK_CE
                    1570             
                    1571             ;COMÏÂÔØ
00E5 D2B0           1572             setb    PIN_SOFTSERIALRX
00E7 D2B1           1573             setb    PIN_SOFTSERIALTXH
                    1574             
00E9 C2C4           1575             clr     Pin_Gre
00EB 8022           1576             JMP     OBUmain_PinSleep_RTCSWOver
                    1577     ;/////////////////////////////////////////////////////////////////////////
00ED                1578     OBUmain_PinSleep_RTCOff:
00ED 759200         1579             MOV     REG_5412AD_P1M0,#00000000B       ;
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    29

00F0 759104         1580             MOV     REG_5412AD_P1M1,#00000100B       ; MISO ÎªÊäÈë(¸ß×è)
                    1581             
00F3 D2A3           1582             SETB    PIN_PWR_GSM                     ; P2.4                   ; [GSM] 
00F5 C297           1583             CLR     PIN_UART2_TX                    ; p3.6
00F7 C296           1584             CLR     PIN_UART2_RX                    ; P1.6
                    1585             ;CLR    PIN_Bluetooth_RST               ; p3.7
                    1586             ;---CLR PIN_SE_IO1                      ; P2.2
                    1587     ;       CLR     PIN_CC1101_MOSI                 ; P2.3
                    1588             
00F9 D292           1589             SETB    Pin_5823BK_IRQ                  ; p1.2
00FB D291           1590             SETB    PIN_BK_CE                       ; p1.1
                    1591                                                     
                    1592             ;LCD
00FD D295           1593             SETB    PIN_PWRDWN_LCD                  ; [Òº¾§µçÔ´ LCD ±³¹â]·Åµ½ÐÝÃßÇ°
00FF C295           1594             CLR     Pin_LCD_RST                     ;Òº¾§¸´Î»ÍÈÎªµÍ 
0101 C295           1595             CLR     Pin_LCD_SDA                     ;Òº¾§Ê¾ÝÍÈÎªµÍ
0103 C295           1596             CLR     Pin_LCD_SCL                     ;Òº¾§Ê±ÖÓÍÈÎªµÍ
0105 C295           1597             CLR     Pin_LCD_CS                      ;Òº¾§Æ¬Ñ¡ÍÈÎªµÍ
0107 C295           1598             CLR     Pin_LCD_DC                      ;Òº¾§ÃüÁîÍÈÎªµÍ                            
                                          
                    1599     
                    1600             ;COMÏÂÔØ
0109 C2B0           1601             clr     PIN_SOFTSERIALRX
010B C2B1           1602             clr     PIN_SOFTSERIALTXH
                    1603     
010D D2C4           1604             SETB    Pin_Gre
                    1605     
                    1606                             
010F                1607     OBUmain_PinSleep_RTCSWOver:                     ; 
                    1608                                                     ; 
010F C285           1609             CLR     PIN_ESAM_RST                    ; 
0111 C2A6           1610             CLR     Pin_ES_Rst                      ; 
0113 C284           1611             CLR     Pin_522_RST                     ; 
0115 D2A4           1612             SETB    Pin_pwrdwn                      ; [Íâ Î§ µç Ô´]
0117 D295           1613             setb    PIN_PWR_SE
                    1614             
0119 D2B5           1615             SETB    Pin_unfix
011B D2B3           1616             SETB    PIN_card_exist
011D D2B2           1617             SETB    WKO_BK
                    1618             
011F D280           1619             SETB    Pin_5823BK_MISO
                    1620             
                    1621             ;LCD
                    1622             ;CLR     Pin_LCD_RST             ;Òº¾§¸´Î»ÍÈÎªµÍ        
                    1623             ;CLR     Pin_LCD_SDA             ;Òº¾§Ê¾ÝÍÈÎªµÍ
                    1624             ;CLR     Pin_LCD_SCL             ;Òº¾§Ê±ÖÓÍÈÎªµÍ
                    1625             ;CLR     Pin_LCD_CS              ;Òº¾§Æ¬Ñ¡ÍÈÎªµÍ
                    1626             ;CLR     Pin_LCD_DC              ;Òº¾§ÃüÁîÍÈÎªµÍ
                    1627     
                    1628     
                    1629             ;LCD
                    1630             ;SETB   PIN_PWRDWN_LCD                  ; [Òº¾§µçÔ´ LCD ±³¹â]·Åµ½ÐÝÃßÇ°
                    1631             ;CLR     Pin_LCD_RST                    ;Òº¾§¸´Î»ÍÈÎªµÍ 
                    1632             ;CLR     Pin_LCD_SDA                    ;Òº¾§Ê¾ÝÍÈÎªµÍ
                    1633             ;CLR     Pin_LCD_SCL                    ;Òº¾§Ê±ÖÓÍÈÎªµÍ
                    1634             ;CLR     Pin_LCD_CS                     ;Òº¾§Æ¬Ñ¡ÍÈÎªµÍ
                    1635             ;CLR     Pin_LCD_DC                     ;Òº¾§ÃüÁîÍÈÎªµÍ                            
                                          
                    1636     
                    1637     
                    1638             
                    1639             ;RC522
0121 C284           1640             CLR     Pin_522_RST             ;522¸´Î»ÍÈÎªµÍ
0123 C2C6           1641             CLR     PIN_522_MOSI            ;522 MISOÎªµÍ
0125 C286           1642             CLR     Pin_522_SS              ;522 SSÍÈÎªµÍ
0127 C2C1           1643             CLR     PIN_522_MISO
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    30

0129 C287           1644             CLR     PIN_522_SCLK            ;522 SCLKÍÈÎªµÍ
                    1645             
                    1646             ;ESAM
012B C283           1647             CLR     PIN_ESAM_RX             ;ESAM Ê¾ÝÍÈÎªµÍ
012D C2B4           1648             CLR     PIN_SE_IO1              ;ESAM Ê¾ÝÍÈÎªµÍ
                    1649             
012F C285           1650             CLR     PIN_ESAM_RST            ;ESAM ¸´Î»ÍÈÎªµÍ
0131 C2A6           1651             CLR     Pin_ES_Rst
0133 C295           1652             CLR     PIN_PWR_LOWIO
                    1653     
                    1654             
                    1655             ;BEEP           
0135 C295           1656             CLR     PIN_BELL_01
0137 C295           1657             CLR     PIN_BELL_02
                    1658             
                    1659             ;LED
                    1660             ;SETB   Pin_Red
                    1661             ;SETB   Pin_Gre
                    1662             ;SETB   Pin_Red 
0139 D2C5           1663             SETB    Pin_Red 
                    1664             
                    1665             ;BK5823
013B D291           1666             SETB    PIN_BK_CE                               
013D D290           1667             SETB    Pin_5823BK_CS                           
013F D280           1668             SETB    Pin_5823BK_MISO         
0141 D292           1669             SETB    Pin_5823BK_IRQ                          
0143 D281           1670             SETB    Pin_5823BK_MOSI                         
0145 C2C2           1671             CLR     Pin_5823BK_SCLK                         
0147 C282           1672             CLR     PIN_WAVE_CHANNEL1       
                    1673                     
0149 C295           1674             clr     Pin_SW          
                    1675             
014B 22             1676             RET
                    1677     ;////////////////////////////////////////////////////////////////////////////
014C                1678     _Fun_OBUmain_SysUNSleep:
                    1679             
014C 120000   F     1680             CALL    _Fun_OBUmain_PinUNSleep
                    1681             ;RET
014F 120000   F     1682             CALL    _FUN_ContactIssue_RELEASE
                    1683             ;RET
0152 120000   F     1684             CALL    start_user                      ; Ô­À´³ÌÐòÒ»¿ªÊ¼Òª×öµÄ¹¤×÷£¬ÏÖ¸Ä³É×Ó³ÌÐòµÄÐ
                             ÎÊ½£¬ÔÚÎ¢²¨¼¤»î£¬²å¿¨£¬²ð¶¯Ç°µ÷½ÚÆ÷ÓÃ                
0155 C29C           1685             CLR     REN
0157 C2AC           1686             CLR     ES
                    1687             
0159 22             1688             RET
                    1689     ;////////////////////////////////////////////////////////////////////////////   
015A                1690     _Fun_OBUmain_SysUNSleep02:
                    1691             
015A 120000   F     1692             CALL    _Fun_OBUmain_PinUNSleep
015D 120000   F     1693             CALL    _FUN_ContactIssue_RELEASE
0160 120000   F     1694             CALL    start_user02                    ; Ô­À´³ÌÐòÒ»¿ªÊ¼Òª×öµÄ¹¤×÷£¬ÏÖ¸Ä³É×Ó³ÌÐòµÄÐ
                             ÎÊ½£¬ÔÚÎ¢²¨¼¤»î£¬²å¿¨£¬²ð¶¯Ç°µ÷½ÚÆ÷ÓÃ        
0163 C29C           1695             CLR     REN
0165 C2AC           1696             CLR     ES
                    1697             
0167 22             1698             RET     
                    1699     ;////////////////////////////////////////////////////////////////////////////
0168                1700     unsleep:
                    1701     
                    1702     
                    1703             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1704             ;ÉèÖÃ P4.4 ÎªÆÕÍ¨ IO ½Å
                    1705             ;ÉèÖÃ P4.5 ÎªÆÕÍ¨ IO ½Å
                    1706             ;ÉèÖÃ P4.6 ÎªÆÕÍ¨ IO ½Å Pin_522_RST
                    1707             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    31

                    1708             ;ÍÆ»»Êä³ö
                    1709     ;       0.3     ÍÆ»»                    ·äÃùÆ÷01
                    1710     ;       0.2     ÍÆ»»                    ·äÃùÆ÷02
                    1711     
                    1712     ;       xx      ÊäÈë                    USB³äµç¼ì²â
                    1713     ;       xx      ÊäÈë                    µÍµçÑ¹¼ì²â
                    1714     ;       3.2     ÊäÈë                    Î¢²¨»½ÐÑ
                    1715     ;       3.3     ÊäÈë                    ²å¿¨
                    1716     ;       3.5     ÊäÈë                    ²ð¶¯
                    1717     ;       xx      ÊäÈë                    ½ÓÊÕÁéÃô¶È¿ª¹Ø
                    1718     ;       1.6     ÊäÈë[GMS ON]            433 ÖÐ¶Ï
                    1719             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0168                1720     _Fun_OBUmain_PinUNSleep:
                    1721             
                    1722             
                    1723             
0168 E5BB           1724             MOV     A,REG_5412AD_P4SW                                                       ;P4
                             .4\P4.5\P4.6ÉèÖÃÎªÆÕÍ¨IO
016A 4470           1725             ORL     A,#01110000B
016C F5BB           1726             MOV     REG_5412AD_P4SW,A
                    1727             
                    1728             ;MOV    REG_5412AD_spctl,#0d4h                          ;0dch   ;0dfh   
                    1729     ;---    MOV     REG_5412AD_P0M0,#00001100B
016E 759404         1730             MOV     REG_5412AD_P0M0,#00000100B
0171 759301         1731             MOV     REG_5412AD_P0M1,#00000001B
                    1732             
0174 759600         1733             MOV     REG_5412AD_P2M0,#00000000B
0177 759500         1734             MOV     REG_5412AD_P2M1,#00000000B              ; µÍµçÑ¹ ¼ì²â£¨Î´º¸£©
                    1735     ;       MOV     REG_5412AD_P2M1,#00000010B              ; µÍµçÑ¹ ¼ì²â£¨º¸£©
                    1736             
017A 75B210         1737             MOV     REG_5412AD_P3M0,#00010000B
017D 75B12C         1738             MOV     REG_5412AD_P3M1,#00101100B
                    1739             
0180 75B400         1740             MOV     REG_5412AD_P4M0,#00000000B
0183 75B300         1741             MOV     REG_5412AD_P4M1,#00000000B
                    1742             
                    1743             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1744             ;jmp    OBUmain_PinUNSleep_RTCOff
0186 7800     F     1745             MOV     R0,#XDATA_RTCMode
                    1746                     ;MOVX   A,@R0
0188 758302         1747             MOV     DPH,#2
018B 8882           1748             MOV     DPL,R0
018D E0             1749             MOVX    A,@DPTR
018E 6455           1750             XRL     A,#CONST_RTC_ON
0190 7012           1751             JNZ     OBUmain_PinUNSleep_RTCOff
                    1752             
0192                1753     OBUmain_PinUNSleep_RTCON:
0192 759200         1754             MOV     REG_5412AD_P1M0,#00000000B
0195 759144         1755             MOV     REG_5412AD_P1M1,#01000100B      ; MISO ÎªÊäÈë
                    1756             
0198 C2A3           1757             CLR     PIN_PWR_GSM                     ;P2.0
019A D296           1758             SETB    PIN_UART2_RX
019C D297           1759             SETB    PIN_UART2_TX
                    1760             ;SETB   PIN_Bluetooth_RST
                    1761             
                    1762             ;---CLR PIN_SE_IO1
                    1763             ;CLR    PIN_CC1101_Mosi
                    1764             
019E D292           1765             SETB    Pin_5823BK_IRQ                                          ;BK5823 IRQµÍµçÆ½ÓÐ
                             Ð§
01A0 D291           1766             SETB    PIN_BK_CE
                    1767             
01A2 8010           1768             JMP     OBUmain_PinUNSleep_RTCSWOver
01A4                1769     OBUmain_PinUNSleep_RTCOff:
                    1770             
01A4 759200         1771             MOV     REG_5412AD_P1M0,#00000000B       ;
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    32

01A7 759104         1772             MOV     REG_5412AD_P1M1,#00000100B              ; MISO ÎªÊäÈë(¸ß×è)
                    1773             
01AA D2A3           1774             SETB    PIN_PWR_GSM                             ; P2.0
01AC C297           1775             CLR     PIN_UART2_TX
                    1776             ;---CLR PIN_SE_IO1
                    1777             ;CLR    PIN_CC1101_MOSI
                    1778             ;CLR    PIN_Bluetooth_RST
01AE C296           1779             CLR     PIN_UART2_RX 
                    1780             
01B0 D292           1781             SETB    Pin_5823BK_IRQ
01B2 D291           1782             SETB    PIN_BK_CE
                    1783             
01B4                1784     OBUmain_PinUNSleep_RTCSWOver:   
01B4 D295           1785             SETB    PIN_PWR_SE      
01B6 C2A4           1786             CLR     Pin_pwrdwn              ;[¿ªÍâÎ§µçÔ´]
01B8 D2B5           1787             SETB    Pin_unfix
01BA D2B3           1788             SETB    PIN_card_exist
01BC D2B2           1789             SETB    WKO_BK
01BE D280           1790             SETB    Pin_5823BK_MISO
                    1791             
                    1792     ;       RET
                    1793     ;       LCD
                    1794     ;       SETB    Pin_LCD_RST             ;Òº¾§¸´Î»ÍÈÎªµÍ 
                    1795     ;       CLR     Pin_LCD_SDA             ;Òº¾§Ê¾ÝÍÈÎªµÍ
                    1796     ;       CLR     Pin_LCD_SCL             ;Òº¾§Ê±ÖÓÍÈÎªµÍ
                    1797     ;       SETB    Pin_LCD_CS              ;Òº¾§Æ¬Ñ¡ÍÈÎªµÍ
                    1798     ;       CLR     Pin_LCD_DC              ;Òº¾§ÃüÁîÍÈÎªµÍ
                    1799             
                    1800             ;522
01C0 C284           1801             CLR     Pin_522_RST             ;522¸´Î»ÍÈÎªµÍ
01C2 C2C6           1802             CLR     PIN_522_MOSI            ;522 MISOÎªµÍ
01C4 C286           1803             CLR     Pin_522_SS              ;522 SSÍÈÎªµÍ
01C6 D2C1           1804             SETB    PIN_522_MISO
01C8 C287           1805             CLR     PIN_522_SCLK            ;522 SCLKÍÈÎªµÍ
                    1806             
                    1807             ;ESAM
01CA D283           1808             SETB    PIN_ESAM_RX             ;ESAM Ê¾ÝÍÈÎªµÍ
01CC D2B4           1809             SETB    PIN_SE_IO1              
01CE D285           1810             SETB    PIN_ESAM_RST            ;ESAM ¸´Î»ÍÈÎªµÍ
01D0 D2A6           1811             SETB    Pin_ES_Rst
                    1812             ;CLR    PIN_ESAM_RST
                    1813             
                    1814             ;µÍµçÑ¹
01D2 D295           1815             SETB    PIN_PWR_LOWIO
                    1816             
                    1817             ;COMÏÂÔØ
01D4 D2B0           1818             SETB    PIN_SOFTSERIALRX
01D6 D2B1           1819             SETB    PIN_SOFTSERIALTXH
                    1820             
                    1821             ;BEEP
01D8 C295           1822             CLR     PIN_BELL_01
01DA C295           1823             CLR     PIN_BELL_02
                    1824             
                    1825             ;LED    
01DC D2C5           1826             SETB    Pin_Red
01DE D2C4           1827             SETB    Pin_Gre 
                    1828             
                    1829             ;5823
01E0 D291           1830             SETB    PIN_BK_CE
                    1831     ;       CLR     PIN_BK_CE
01E2 D290           1832             SETB    Pin_5823BK_CS
01E4 D280           1833             SETB    Pin_5823BK_MISO
01E6 D292           1834             SETB    Pin_5823BK_IRQ
01E8 D281           1835             SETB    Pin_5823BK_MOSI
01EA C2C2           1836             CLR     Pin_5823BK_SCLK
01EC C282           1837             CLR     PIN_WAVE_CHANNEL1       
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    33

01EE C295           1838             CLR             Pin_SW
                    1839     
                    1840             
                    1841             
01F0 22             1842             RET     
                    1843     ;========================================================       
----                1844             RSEG    ?pr?OBUMAIN?Mater
                    1845             USING   0
                    1846     ;-----------------------------------------------------------------
                    1847     ;ÃèÊö:  OBU Ö÷Ö´ÐÐº¯Ê
                    1848     ;-----------------------------------------------------------------
0000                1849     AP_start:
                    1850                     
0000 758100   F     1851             MOV     SP,#IDATA_STACK
0003 75A800         1852             MOV     IE,#0
0006 D28A           1853             SETB    IT1                             ; ³ÌÐòÒ»¿ªÊ¼¾ÍÊÇÉèÖÃÏÂ½µÑÓ´¥·¢£¬²»È»²å¿¨Ê±£
                             ¬»áµçÆ½´¥·¢
0008 D288           1854             SETB    IT0
                    1855             
000A 120000   F     1856             CALL    _FUN_OBUMAIN_CheckMemoryAndEx
000D EF             1857             MOV     A,R7
000E 6003           1858             JZ      OBUMAIN_MASTER_CheckMemoryOver
0010                1859     OBUMAIN_MASTER_CheckMemoryErr:
                    1860             ;MOV    A,#CONST_STATE_ExMemoryEr
0010 120000   F     1861             CALL    _FUN_OBUMAIN_ErrShow03
                    1862             ;JMP    AP_start        
0013                1863     OBUMAIN_MASTER_CheckMemoryOver:                 
                    1864             
                    1865             ;³õÊ¼»¯³õ´ÎÉÏµçµÄ±ê¼Ç=0
                    1866             ;=0·Ç³õ´ÎÉÏµç
                    1867             ;=0x55³õ´ÎÉÏµç
0013 7800     F     1868             MOV     R0,#IDATA_POWUP
0015 7400           1869             MOV     A,#0
0017 F6             1870             MOV     @R0,A
                    1871             
                    1872             ;ÉÏµçÅÐ¶Ï
                    1873             ;µÚÒ»¸öÉÏµç ¿´ÃÅ¹·
                    1874             ;=0 ¿´ÃÅ¹·Ã»ÓÐ¹¤×÷£¬¿ÕÏÐ
                    1875             ;=1 ¿´ÃÅ¹·¹¤×÷£¬·Ç¿ÕÏÐ
0018 E5C1           1876             MOV     A,REG_WDT_CONTR
001A 20E30B         1877             JB      ACC.3,AP_start_1
                    1878             
                    1879             ;ÉÏµç¸´Î»(²ð¶¯Î´°´ÏÂ£¬²å¿¨ÉÏµç)
                    1880             ;IDATA_POWUP = 55H && Pin_unfix=0(²ðÐ¶Î´°´) && PIN_card_exist=0(¿¨´æÔÚ)
001D 20B508         1881             JB      Pin_unfix,AP_start_1
0020 20B305         1882             JB      PIN_card_exist,AP_start_1
                    1883             
                    1884             ;¿´ÃÅ¹·³õ´ÎÉÏµçµÄ±ê¼Ç
0023 7800     F     1885             MOV     R0,#IDATA_POWUP
0025 7455           1886             MOV     A,#55H
0027 F6             1887             MOV     @R0,A
                    1888             
0028                1889     AP_start_1:
                    1890             ;MOV    REG_WDT_CONTR,#00111111B        ; ÏÂÔØºó¿´ÃÅ¹·ÓÐ¿ÉÄÜÎ¹¹·Ê±¼ä±äµÄºÜ¶Ì£¬ÐèÒªÁ
                             ¢¼´ÉèÖÃ¿´ÃÅ¹·Î¹¹·Ê±¼ä
0028 758100   F     1891             MOV     SP,#IDATA_STACK
002B 75A800         1892             MOV     IE,#0
002E D28A           1893             SETB    IT1                             ; ³ÌÐòÒ»¿ªÊ¼¾ÍÊÇÉèÖÃÏÂ½µÑÓ´¥·¢£¬²»È»²å¿¨Ê±£
                             ¬»áµçÆ½´¥·¢
0030 D288           1894             SETB    IT0
0032 7800     F     1895             MOV     R0,#IDATA_STACK - 2             ;±£Áô³õ´Î²å¿¨ÉÏµç±êÊ¾
                    1896             
0034                1897     OBUMAIN_MASTER_MEMORYCLR00:
0034 7600           1898             MOV     @R0,#0
0036 D8FC           1899             DJNZ    R0,OBUMAIN_MASTER_MEMORYCLR00   ;ÇåÄÚ´æ
                    1900             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    34

0038 D291           1901             SETB    PIN_BK_CE
003A C2C5           1902             CLR     PIN_RED
003C 120000   F     1903             CALL    _FUN_HDLC_5830Init              ;³õÊ¼»¯Ðè×÷ÆµÂÊÐ£×¼£¬¼Ä´æÆ÷²»ÄÜÖ±½ÓÅäÖÃÎªÐÝ
                             ÃßÄ£Ê½
003F D2C5           1904             SETB    PIN_RED 
                    1905              
                    1906             ;¼ì²é9~18¼Ä´æÆ÷ÊÇ·ñ³õÊ¼»¯³É¹¦
0041 120000   F     1907             CALL    _FUN_HDLC_CheckReg9To18
0044 EF             1908             MOV     A,R7
0045 6007           1909             JZ      OBUMAIN_MASTER_Checked  
0047 7407           1910             MOV     A,#CONST_STATE_5823INIER
0049 120000   F     1911             CALL    _FUN_OBUMAIN_ErrShow
004C 80B2           1912             JMP     AP_start
                    1913             
004E                1914     OBUMAIN_MASTER_Checked:
                    1915              
004E 7800     F     1916             MOV     R0,#XDATA_RTCMode
0050 74FF           1917             MOV     A,#CONST_RTC_off
                    1918                     ;MOVX   @R0,A
0052 758301         1919             MOV     DPH,#1 
0055 8882           1920             MOV     DPL,R0 
0057 F0             1921             MOVX    @DPTR,A
                    1922             
0058 120000   F     1923             CALL    _Fun_OBUmain_PinSleep
005B 120000   F     1924             CALL    _FUN_OBUMAIN_INITSYS                            ; ÏµÍ³³õÊ¼»¯
                    1925             
005E C28B           1926             CLR     IE1
0060 C289           1927             CLR     IE0
                    1928             
                    1929     ;OBUMAIN_MASTER_int:
                    1930             ;×¢£ºP3.5 Óë T1 ÊÇÍ¬Ò»¸öÖÐ¶Ï¸´ÓÃ£¬P3.4ÓëT0ÊÇÍ¬Ò»¸öÖÐ¶Ï¸´ÓÃ£¬ÐèÒªÔÚÖÐ¶Ï³ÌÐòÇø·Ö
                    1931             ;Íâ²¿ÖÐ¶Ï0      [Î¢²¨»½ÐÑÖÐ¶Ï]  Ê¹ÄÜ    ÏÂ½µÑØ´¥·¢
                    1932             ;Íâ²¿ÖÐ¶Ï1      [Î¢²¨½ÓÊÕÖÐ¶Ï]  ½ûÖ¹    XX
                    1933             ;P3.5           [²ð¶¯ÖÐ¶Ï]      Ê¹ÄÜ    µçÆ½´¥·¢
                    1934             ;P3.4           [²ð¶¯ÖÐ¶Ï]      Ê¹ÄÜ    µçÆ½´¥·¢
                    1935             ;¶¨Ê±Æ÷ 1ÖÐ¶Ï   [¶¨Ê±Æ÷1ÖÐ¶Ï]   ½ûÖ¹    XX
                    1936             ;¶¨Ê±Æ÷ 0ÖÐ¶Ï   [¶¨Ê±Æ÷0ÖÐ¶Ï]   ½ûÖ¹    XX
                    1937             ;´®¿Ú ÖÐ¶Ï      [´®¿ÚÖÐ¶Ï]      ½ûÖ¹    XX
0062 75A800         1938             MOV     IE,#0
0065 758F00         1939             MOV     Reg_WakeClk0,#0
                    1940                     
                    1941             ;¿ªÆô P3.5 ÖÐ¶Ï[²ð¶¯ÖÐ¶Ï]        ×¢£º±¾ÖÐ¶ÏÓëT1ÖÐ¶Ï¸´ÓÃ
0068 E58F           1942             MOV     A,Reg_WakeClk0          
006A 4420           1943             ORL     A,#00100000B            ; ÉèÖÃP3.5ÎªÍâ²¿ÖÐ¶Ï½Å
006C F58F           1944             MOV     Reg_WakeClk0,A          ; 
006E D2AB           1945             SETB    ET1                     ; ¿ªÆô²ð¶¯ÖÐ¶Ï
                    1946             
                    1947             ;´®¿Ú ´®¶Ï ½ÓÊÕ³õÊ¼»¯
0070 120000   F     1948             CALL    _FUN_ContactIssue_INIT02
0073 E58F           1949             MOV     A,Reg_WakeClk0
0075 4440           1950             ORL     A,#01000000b;40H
0077 F58F           1951             MOV     Reg_WakeClk0,A
                    1952             
0079 C299           1953             CLR     TI
007B C298           1954             CLR     RI
007D D29C           1955             SETB    REN
007F C2AC           1956             CLR     ES
                    1957             
                    1958             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1959             ;CALL   _FUN_TEST_Master
                    1960             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~            
0081                1961     OBUMAIN_MASTER_MAINSleep:
                    1962             
                    1963             ;MOV    REG_WDT_CONTR,#00111111B
0081 120000   F     1964             CALL    _Enter_Sleep_Mode       
                    1965             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    35

0084 D295           1966             SETB    PIN_PWRDWN_LCD          ;¹ØÒº¾§
0086 C298           1967             CLR     RI
0088 C299           1968             CLR     TI
008A C289           1969             CLR     IE0
008C C28B           1970             CLR     IE1
008E C28D           1971             CLR     TF0
0090 C28F           1972             CLR     TF1
0092 C28C           1973             CLR     TR0
0094 C28E           1974             CLR     TR1
                    1975             
0096 D2C4           1976             SETB    pin_gre
0098 D2C5           1977             SETB    pin_RED
                    1978             
                    1979             ;-------------------------------;
                    1980     ;       SETB    EX0                     ; Ê¹ÄÜÍâ²¿ÖÐ¶Ï0
                    1981     ;       SETB    IT0                     ; Íâ²¿ÖÐ¶Ï0£¬ÏÂ½µÑØ´¥·¢ÖÐ¶Ï
                    1982             ;Íâ²¿ ÖÐ¶Ï 01 [²å¿¨ÖÐ¶Ï] Ê¹ÄÜ   ; ÏÂ½µÑØ´¥
                    1983             ;SETB   EX1                     ; Ê¹ÄÜÍâ²¿ÖÐ¶Ï0
                    1984             ;SETB   IT1                     ; Íâ²¿ÖÐ¶Ï0£¬ÏÂ½µÑØ´¥·¢ÖÐ¶Ï
                    1985             ;-------------------------------;
                    1986             
009A E58F           1987             MOV     A,Reg_WakeClk0
009C 4440           1988             ORL     A,#01000000b;40H
009E F58F           1989             MOV     Reg_WakeClk0,A  
                    1990             
00A0 D2B0           1991             SETB    P3.0
00A2 D2B1           1992             SETB    P3.1
                    1993             
00A4 E4             1994             CLR     A
00A5 D29C           1995             SETB    REN
00A7 F5A8           1996             MOV     IE,A
                    1997             
00A9 D2AC           1998             SETB    ES                      ; ´®¿ÚÖÐ¶Ï
00AB D2A8           1999             SETB    EX0                     ; Ê¹ÄÜÍâ²¿ÖÐ¶Ï0
00AD D288           2000             SETB    IT0                     ; Íâ²¿ÖÐ¶Ï0£¬ÏÂ½µÑØ´¥·¢ÖÐ¶Ï
                    2001     
00AF D2AF           2002             SETB    EA
                    2003             
00B1 00             2004             NOP
00B2 00             2005             NOP
00B3 00             2006             NOP
00B4 00             2007             NOP
00B5 00             2008             NOP     
                    2009     ;       CLR     PIN_PWRDWN_LCD
                    2010     ;ASDFSADFDSAFDSF:
                    2011     ;       JMP     ASDFSADFDSAFDSF 
                    2012     
00B6 E4             2013             clr     a
00B7 7A03           2014             mov     r2,#3
                    2015             ;jmp    TEST_SerialTX03_issue
                    2016             
00B9 758782         2017             MOV     PCON,#82H
                    2018             
00BC 00             2019             NOP
00BD 00             2020             NOP
                    2021             
00BE 020000   F     2022             JMP     AP_START
                    2023     ;/////////////////////////////////////////////////////////////////////////      
00C1                2024     Int_UART_Point:
00C1 120000   F     2025             call    _fun_test_display
00C4 80FB           2026             jmp     Int_UART_Point
                    2027     ;=========================================================================
                    2028     ;Ô­ÓÃ»§³ÌÐò¿ªÊ¼´¦
                    2029     ;=========================================================================
00C6                2030     start_user:     ;Ô­À´³ÌÐòÒ»¿ªÊ¼Òª×öµÄ¹¤×÷£¬ÏÖ¸Ä³É×Ó³ÌÐòµÄÐÎÊ½£¬ÔÚÎ¢²¨¼¤»î£¬²å¿¨£¬²ð¶¯Ç°µ÷½Ú
                             Æ÷ÓÃ
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    36

                    2031             
                    2032             ;--- ³õÊ¼»¯¶ÑÕ»ºÍÄÚ´æ ---
                    2033             ;522 RST ÒòÎª¸´ÓÃµÍµçÑ¹¼ì²â×öVCC£¬ÒªÍÆÍì
                    2034             ;RET
00C6 7FFA           2035             MOV     R7,#250                                         ; »ª´óESAM¿¨¸´Î»Òª±È½ÝµÂµÄ¶
                             Ì
00C8 120000   F     2036             CALL    _FUN_LIB_DELAYSIMPLAY   
                    2037             ;¸´Î» ESAM ¿¨£¬µ«²»½ÓÊÕÊ¾Ý
00CB C285           2038             CLR     PIN_ESAM_RST    
00CD 7F30           2039             MOV     R7,#030H                                        ; »ª´óESAM¿¨¸´Î»Òª±È½ÝµÂµÄ¶
                             Ì
00CF 120000   F     2040             CALL    _FUN_LIB_DELAYSIMPLAY
00D2 D285           2041             SETB    PIN_ESAM_RST
00D4 7F03           2042             MOV     R7,#03
00D6 120000   F     2043             CALL    _FUN_LIB_DELAY
                    2044             
00D9                2045     start_user02:
00D9 7800     F     2046             MOV     R0,#IDATA_STACK
00DB                2047     OBUMAIN_MASTER_MEMORYCLR:
00DB 7600           2048             MOV     @R0,#0
00DD D8FC           2049             DJNZ    R0,OBUMAIN_MASTER_MEMORYCLR
                    2050             
                    2051             ;Éú³ÉËæ»úÒò×Ó
00DF 7800     F     2052             MOV     R0,#XDATA_RAND                          
00E1 E4             2053             CLR     A
00E2 900033         2054             MOV     DPTR,#STR_SYS_OBUID+4
00E5 93             2055             MOVC    A,@A+dptr
00E6 23             2056             RL      A
00E7 23             2057             RL      A
                    2058             ;MOVX   @R0,A
00E8 758301         2059             MOV     DPH,#1 
00EB 8882           2060             MOV     DPL,R0 
00ED F0             2061             MOVX    @DPTR,A
00EE 120000   F     2062             CALL    _FUN_OBUMAIN_INITSYS                            ; ÏµÍ³³õÊ¼»¯
                    2063             
00F1 7500D2   F     2064             MOV     DATA_PowerONTimer,#210
00F4 E4             2065             CLR     A
                    2066             
00F5 4420           2067             ORL     A,#00100000B                    ;ÉèÖÃt1Îª8Î»ÖØ×°ÔØ¶¨Ê±Æ÷
00F7 4401           2068             ORL     A,#00000001B                    ;ÉèÖÃt0Îª16Î»¶¨Ê±Æ÷
00F9 F589           2069             MOV     TMOD,A
                    2070     
00FB E4             2071             CLR     A
00FC 4404           2072             ORL     A,#00000100B                    ;TCON.2 INT1ÖÐ¶Ï¿ØÖÆ    = 0 µçÆ½´¥·¢    = 1
                              ±ßÃ»´¥·¢
00FE 4401           2073             ORL     A,#00000001B                    ;TCON.0 INT0ÖÐ¶Ï¿ØÖÆ    = 0 µçÆ½´¥·¢    = 1
                              ±ßÃ»´¥·¢
0100 F588           2074             MOV     TCON,A
                    2075             
0102 22             2076             RET
                    2077     ;-----------------------------------------------------------------------
                    2078     ;SEG_OBUMAIN_CDACTIVE(¸½ÊôÐò¶Î)
                    2079     ;¸½Êô:_FUN_OBUMAIN_MASTER
                    2080     ;ÃèÊö:²ð¶¯¼¤»î(²ð¶¯)
                    2081     ;Á÷³Ì:
                    2082     ;       ²ð¶¯¼¤»î        ->      ÏÔÊ¾±êÇ©Ê§Ð§    ->      ½øÈë²å¿¨´¦ÀíÁ÷³Ì
                    2083     ;-----------------------------------------------------------------------
0103                2084     SEG_OBUMAIN_CDACTIVE:
0103 C2AF           2085             CLR     EA
0105 C2AC           2086             CLR     ES
0107 C2AB           2087             CLR     ET1                             ;²»ÔÊÐíÍâ²¿ÖÐ¶Ï1        
                    2088             
0109 120000   F     2089             CALL    _Fun_OBUmain_SysUNSleep
                    2090             
                    2091             ;¶ÔÓÃ»§¿¨ºÍESAM¿¨×ö»ù±¾¸´Î»ºÍÑ¡Ä¿Â¼²Ù×÷¡£
                    2092     ;       MOV     R7,#10                          ; 50
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    37

                    2093     ;       CALL    _FUN_LIB_DELAY                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµçÑ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨
                             Æ¬   
010C 120000   F     2094             CALL    _Func_LCD_INIT                  
                    2095             
010F D200     F     2096             SETB    BIT_CD_SW                       ;=0±íÊ¾Î´±»²ð¶¯£¬=1 ±»²ð¶¯
0111 D200     F     2097             SETB    BIT_ACTIVECARD                  ;=0 ·Ç²ð¶¯¼¤»î;=1 ²ð¶¯¼¤»î
0113 120000   F     2098             CALL    _FUN_OBUMAIN_INITSYS            ; ÏµÍ³³õÊ¼»¯
0116 120000   F     2099             CALL    _FUN_OBUMain_BASEINIT           ;³õÊ¼»¯ESAM,ÓÃ»§¿¨      
                    2100     ;test_current_loop:
                    2101     ;       MOV     REG_WDT_CONTR,#00111111B
                    2102     ;       JMP     test_current_loop
                    2103             ;MOV    R7,#20
                    2104             ;CALL   _FUN_LIB_DELAY
                    2105             
0119                2106     OBUMAIN_CDACTIVE_SELECT3F00:
0119 30001B   F     2107             JNB     BIT_ESAM,OBUMAIN_CDACTIVE_DISPLAYMOVE           ;Ã»ÓÐESAMÊ±£¬Ìø¹
                    2108             
                    2109             ;Ñ¡ÔñESAM¿¨µÄ3F00Ä¿Â¼
011C C200     F     2110             CLR     BIT_ESAMICC
011E D200     F     2111             SETB    BIT_GETRESULT
0120 7F00     F     2112             MOV     R7,#DATA_RXBUF
0122 7D00     F     2113             MOV     R5,#XDATA_TXBUF
0124 7B3F           2114             MOV     R3,#03FH
0126 7A00           2115             MOV     R2,#000H
0128 120000   F     2116             CALL    _FUN_CARDAPP_SelectFile                         
                    2117             
                    2118             ;--- ¼õ¼ÇÊÆ÷ ---
012B 7F00     F     2119             MOV     R7,#DATA_RXBUF
012D 7D00     F     2120             MOV     R5,#XDATA_TXBUF
012F D200     F     2121             SETB    BIT_GETRESULT
0131 C200     F     2122             CLR     BIT_ESAMICC
0133 120000   F     2123             CALL    _FUN_CARDAPP_DECCounter
0136 EF             2124             MOV     A,R7
                    2125     
0137                2126     OBUMAIN_CDACTIVE_DISPLAYMOVE:                                   ; ÏÔÊ¾²ð¶¯
                    2127             
                    2128             ;--- ÏÔÊ¾ ---   
0137 6010           2129             JZ      OBUMAIN_CDACTIVE_DISPLAYNCD
0139                2130     OBUMAIN_CDACTIVE_DISPLAYCD:                                     ; ²ðÍê£¬ÏÔÊ¾¡°±êÇ©Ê§Ð§¡±
0139 C2C5           2131             CLR     Pin_red
013B 7F02           2132             MOV     R7,#00000010B
013D 120000   F     2133             CALL    _FUN_LCD_ICON
0140 7F00     F     2134             MOV     R7,#DATA_RXBUF + 90
0142 900000   F     2135             MOV     DPTR,#STR_UNFIX
0145 D200     F     2136             SETB    BIT_CD                                                                     
                                  ;²ðÍêÖÃ²ð¶¯±ê¼Ç
0147 8007           2137             JMP     OBUMAIN_CDACTIVE_DISPLAYCDOver
                    2138             
0149                2139     OBUMAIN_CDACTIVE_DISPLAYNCD:                                    ;Ã»ÓÐ²ðÍê£¬ÏÔÊ¾¡°²ð¿¨¡±
0149 7F00     F     2140             MOV     R7,#DATA_RXBUF + 90
014B 900000   F     2141             MOV     DPTR,#STR_MoveCARD
014E C200     F     2142             CLR     BIT_CD                                                                     
                                  ;Î´²ðÍêÖÃÇå²ð¶¯±ê¼Ç
                    2143             
0150                2144     OBUMAIN_CDACTIVE_DISPLAYCDOver:
0150 120000   F     2145             CALL    _FUN_LCD_DisplayExChina 
0153 D2C5           2146             setb    Pin_red         ;2010-04-21
0155 120000   F     2147             CALL    _FUN_OBUMain_CARDPreDeal                        ; ¿¨Æ¬Ô¤´¦Àí
                    2148             
0158                2149     OBUMAIN_CDACTIVE_REBeaconID:
                    2150             ;ÔÚ²ð¶¯Ç°ÊÕµ½¹bst£¬Ôò²»¼Çµ±beaconid,¶øÔÚº¯Ê_FUN_OBUMain_CARDPreDealÖÐ¸ù¾Ýbit_setmmi
                             À´¼ÇÂ¼
0158 20000D   F     2151             JB      BIT_BST,OBUMAIN_CDACTIVE_REBeaconIDOver         
                    2152             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
015B 758372         2153             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
015E 7582EC         2154             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    38

0161 7F00     F     2155             MOV     R7,#XDATA_LastBeaconID
0163 7B08           2156             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen     
0165 120000   F     2157             CALL    _wrflashXR      
                    2158             
0168                2159     OBUMAIN_CDACTIVE_REBeaconIDOver:
0168 D2C5           2160             SETB    pin_red
016A                2161     OBUMAIN_CDACTIVE_REBeaconIDOver02:
016A 7FFA           2162             MOV     R7,#250
016C 120000   F     2163             CALL    _FUN_LIB_DELAY  
016F 7FFA           2164             MOV     R7,#250
0171 120000   F     2165             CALL    _FUN_LIB_DELAY  
0174 7FFA           2166             MOV     R7,#250
0176 120000   F     2167             CALL    _FUN_LIB_DELAY  
0179 020000   F     2168             JMP     AP_start
                    2169             
                    2170     ;------------------------------------------------------------------------------------------
                             -
                    2171     ;SEG_OBUMAIN_CARDACTIVE(¸½ÊôÐò¶Î)
                    2172     ;¸½Êô:_FUN_OBUMAIN_MASTER
                    2173     ;ÃèÊö:²å¿¨¼¤»î(²å¿¨´¦ÀíÁ÷³Ì)
                    2174     ;Á÷³Ì:
                    2175     ;²å¿¨   -> ¸´Î»¿¨Æ¬
                    2176     ;               Err ->  ÏÔÊ¾ÎÞ¿¨£¬Í¬Ê±ÖÃ²å¿¨±ê¼ÇÎªÎÞ -> ½øÈëÎ¢²¨¼¤»î´¦ÀíÁ÷³Ì
                    2177     ;               OK- >   ²å¿¨Ô¤´¦Àí(¶Á0015/0019/0012/0002ÎÄ¼þ²¢Ð´Èëµ½FlashÖÐÈ¥)
                    2178     ;                               Err ->  ÏÔÊ¾ÎÞ¿¨»ò´í¿¨£¬Í¬Ê±ÖÃ²å¿¨±ê¼ÇÎªÎÞ -> ½øÈëÎ¢²¨¼¤»î´
                             ¦ÀíÁ÷³Ì
                    2179     ;                                               ¸ù¾Ý0015µÚ9¸ö×Ö½Ú
                    2180     ;                                                       = 23 ±íÊ¾¼ÇÕË¿¨->ÏÔÊ¾0002µÄÄÚÈÝ
                    2181     ;                                                       = 22 ±íÊ¾Í¨ÐÐ¿¨->ÏÔÊ¾Í¨ÐÐ¿¨
                    2182     ;                                                               ½øÈë²å¿¨¼¤»î´¦ÀíÁ÷³Ì
                    2183     ;------------------------------------------------------------------------------------------
                             -
017C                2184     FUN_OBUMAIN_RST:
017C 75C760         2185             MOV     ISP_CONTR,#60H
017F                2186     OBUMAIN_rst_over:
017F 00             2187             nop
0180 00             2188             nop
0181 00             2189             nop
0182 00             2190             nop
0183 00             2191             nop
0184 00             2192             nop
0185 00             2193             nop
0186 00             2194             nop
0187 00             2195             nop
0188 00             2196             nop
0189 00             2197             nop
018A 00             2198             nop
018B 80F2           2199             JMP     OBUMAIN_rst_over
                    2200     ;------------------------------------------------------------------------------------------
                             -    
018D                2201     SEG_OBUMAIN_CARDACTIVE: 
                    2202     ;       jmp     OBUMAIN_CARDACTIVE_Start        
                    2203             ;jmp    AP_start
                    2204             
018D 120000   F     2205             CALL    _Fun_OBUmain_SysUNSleep
                    2206             
0190 120000   F     2207             CALL    _FUN_ContactIssue_INITDown
0193 D2B1           2208             SETB    P3.1
0195 D2B0           2209             SETB    P3.0
                    2210             
0197 C200     F     2211             CLR     BIT_BUFADDR             ;= 0£¬½ÓÊÕÊ¾Ýµ½ÄÚ´æ£» = 1£¬½ÓÊÕÊ¾Ýµ½Íâ´æ
0199 D200     F     2212             SETB    BIT_SERIALOVERTIMERX    ;=0,Ã»ÓÐÏÞÖÆ ; =1ÓÐÊ±¼äÏÞÖÆ
019B C200     F     2213             CLR     BIT_VERIFY
019D 7F00     F     2214             MOV     R7,#DATA_RXBUF
019F 7B00           2215             MOV     R3,#000H
01A1 120000   F     2216             CALL    _FUN_SERIAL_RXHARD
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    39

                    2217             ;330ms
                    2218             
01A4 EB             2219             MOV     A,R3
01A5 6014           2220             JZ      OBUMAIN_CARDACTIVE_Start
                    2221             
01A7 6402           2222             XRL     A,#2
01A9 7010           2223             JNZ     OBUMAIN_CARDACTIVE_Start
                    2224             
01AB 7800     F     2225             MOV     R0,#DATA_RXBUF
01AD E6             2226             MOV     a,@R0
01AE 647F           2227             XRL     A,#07FH
01B0 7009           2228             JNZ     OBUMAIN_CARDACTIVE_Start
                    2229             
01B2 7800     F     2230             MOV     R0,#DATA_RXBUF+1
01B4 E6             2231             MOV     A,@R0
01B5 647F           2232             XRL     A,#07FH
01B7 7002           2233             JNZ     OBUMAIN_CARDACTIVE_Start
                    2234             
01B9 80C1           2235             JMP     fun_OBUMAIN_rst
                    2236             
01BB                2237     OBUMAIN_CARDACTIVE_Start:
                    2238             
01BB 120000   F     2239             CALL    _FUN_ContactIssue_Release       
01BE 120000   F     2240             CALL    _Fun_OBUmain_SysUNSleep
                    2241     ;       MOV     R7,#010H
                    2242     ;       CALL    _FUN_LIB_DELAY          
01C1 120000   F     2243             CALL    _FUN_OBUMAIN_INITSYS
01C4 D200     F     2244             SETB    BIT_ACTIVECARD
01C6 120000   F     2245             CALL    _FUN_OBUMain_BASEINIT   ;20     
01C9 120000   F     2246             CALL    _FUN_OBUMain_CARDPreDeal ;80                            ;Ô¤´¦Àí
                    2247             
01CC                2248     OBUMAIN_CARDACTIVE_REBeaconID:
                    2249             
                    2250             ;ÔÚ²ð¶¯Ç°ÊÕµ½¹BST£¬Ôò²»¼Çµ± beaconid ,¶øÔÚº¯Ê_FUN_OBUMain_CARDPreDealÖÐ¸ù¾Ýbit_setm
                             miÀ´¼ÇÂ¼
                    2251             ;---JB  BIT_BST,OBUMAIN_CDACTIVE_REBeaconIDOver         
01CC 300002   F     2252             JnB     BIT_BST,OBUMAIN_CARDACTIVE_REBeaconID22
01CF 8097           2253             JMP     OBUMAIN_CDACTIVE_REBeaconIDOver
01D1                2254     OBUMAIN_CARDACTIVE_REBeaconID22:
                    2255             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
01D1 758372         2256             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
01D4 7582EC         2257             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
01D7 7F00     F     2258             MOV     R7,#XDATA_LastBeaconID
01D9 7B08           2259             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen
01DB 120000   F     2260             CALL    _wrflashXR
01DE                2261     OBUMAIN_CARDACTIVE_REBeaconIDOver:
                    2262             
01DE                2263     OBUMain_CardInfoDisplay_DisplayInfo:
                    2264             
01DE 200003   F     2265             JB      BIT_INSERTCARD,OBUMain_CardInfoDisplay_ZC
01E1 020000   F     2266             JMP     OBUMAIN_CARDACTIVE_NoCard
                    2267             
01E4                2268     OBUMain_CardInfoDisplay_ZC:
01E4 020000   F     2269             JMP     OBUMAIN_CARDACTIVE_ZC
                    2270     
01E7 200011   F     2271             JB      BIT_ISContact,OBUMAIN_CARDACTIVE_NZC                    ; Èç¹ûÊÇ½Ó´¥¿¨£¬ÔòÑ
                             ¡ 1001£¬Èç¹ûÊÇ·Ç½Ó¿¨£¬ÔòPro¿¨²ÅÑ¡1001
01EA 20000E   F     2272             JB      BIT_proMF,OBUMAIN_CARDACTIVE_NZC
                    2273             ;ÏÔÊ¾ " Âß¼­¿¨ " 
01ED 120000   F     2274             CALL    _Func_LCD_INIT
                    2275             ;--- ÏÔÊ¾ ---
01F0 7F00     F     2276             MOV     R7,#DATA_RXBUF
01F2 900000   F     2277             MOV     DPTR,#STR_LoGCard
01F5 120000   F     2278             CALL    _FUN_LCD_DisplayExChina
                    2279             
01F8 020000   F     2280             JMP     OBUMAIN_CARDACTIVE_beep
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    40

                    2281             
01FB                2282     OBUMAIN_CARDACTIVE_NZC:
                    2283             ;¶Á³ö 0015 ÎÄ¼þÀïµÄ·ÖÉ¢Âë
01FB 758372         2284             MOV     DPH,#CONST_FLASH_0015H
01FE 758284         2285             MOV     DPL,#CONST_FLASH_0015L
0201 750700   F     2286             MOV     AR7,#XDATA_HOLD
0204 7B04           2287             MOV     R3,#4
0206 120000   F     2288             CALL    _RDFlashXR
                    2289             
                    2290             ;²»ÊÇ ËÄ´¨ µÄ¿¨
                    2291             ;CB C4 B4 A8
                    2292             ;JMP    OBUMain_CardInfoDisplay_btVH
0209 7800     F     2293             MOV     R0,#XDATA_HOLD
                    2294                     ;MOVX   A,@R0
020B 758301         2295             MOV     DPH,#1
020E 8882           2296             MOV     DPL,R0
0210 E0             2297             MOVX    A,@DPTR
0211 64CB           2298             XRL     A,#0CBH
0213 7023           2299             JNZ     OBUMAIN_CARDACTIVE_ZZSC
0215 08             2300             INC     R0
                    2301                     ;MOVX   A,@R0
0216 758301         2302             MOV     DPH,#1
0219 8882           2303             MOV     DPL,R0
021B E0             2304             MOVX    A,@DPTR
021C 64C4           2305             XRL     A,#0C4H
021E 7018           2306             JNZ     OBUMAIN_CARDACTIVE_ZZSC
0220 08             2307             INC     R0
                    2308             
                    2309             ;MOVX   A,@R0
0221 758301         2310             MOV     DPH,#1
0224 8882           2311             MOV     DPL,R0
0226 E0             2312             MOVX    A,@DPTR
0227 64B4           2313             XRL     A,#0B4H
                    2314             
0229 700D           2315             JNZ     OBUMAIN_CARDACTIVE_ZZSC
022B 08             2316             INC     R0      
                    2317                     ;MOVX   A,@R0   
022C 758301         2318             MOV     DPH,#1
022F 8882           2319             MOV     DPL,R0
0231 E0             2320             MOVX    A,@DPTR
0232 64A8           2321             XRL     A,#0A8H
0234 7002           2322             JNZ     OBUMAIN_CARDACTIVE_ZZSC
                    2323             
                    2324             ;~~~~~~~~~~µ÷ÊÔ¶Î~~~~~~~~~~~
                    2325             ;mov    r7,#33
                    2326             ;call   _FUN_TEST_checkrtcmode
                    2327             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~
0236 8003           2328             JMP     OBUMain_CardInfoDisplay_btVH
0238                2329     OBUMAIN_CARDACTIVE_ZZSC:
0238 020000   F     2330             JMP     OBUMAIN_CARDACTIVE_SC                   ;ÏÔÊ¾²»ÊÇËÄ´¨¿¨
                    2331     ;///////////////////////////////////////////////////////////////////////////
                    2332             ;===== µ±Ç° ÊÇ ËÄ´¨ µÄ¿¨Ê±£¬±È¶Ô ³µÅÆºÅ =====
023B                2333     OBUMain_CardInfoDisplay_btVH:
023B 200003   F     2334             JB      BIT_ESAMOK,OBUMain_CardInfoDisplay_btVHZZ
023E 020000   F     2335             JMP     OBUMAIN_CARDACTIVE_ZC
0241                2336     OBUMain_CardInfoDisplay_btVHZZ:
                    2337             
                    2338             ;=== ¶Á³ö 0015 ÎÄ¼þÀïµÄ³µÅÆ ===
0241 758372         2339             MOV     DPH,#CONST_FLASH_0015H
0244 7582A0         2340             MOV     DPL,#CONST_FLASH_0015L + 28
0247 750700   F     2341             MOV     AR7,#XDATA_HOLD
024A 7B0A           2342             MOV     R3,#10                                  ;10
024C 120000   F     2343             CALL    _RDFlashXR
                    2344             
024F C200     F     2345             CLR     BIT_ESAMICC
0251 C200     F     2346             CLR     BIT_GETRESULT
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    41

0253 7F00     F     2347             MOV     R7,#DATA_RXBUF
0255 7D00     F     2348             MOV     R5,#XDATA_TXBUF
0257 7B3F           2349             MOV     R3,#03FH
0259 7A00           2350             MOV     R2,#000H
025B 120000   F     2351             CALL    _FUN_CARDAPP_SelectFile
                    2352             
                    2353             ;¶ÁÏµÍ³ÐÅÏ¢ÎÄ¼þ
025E D200     F     2354             SETB    BIT_GETRESULT
0260 C200     F     2355             CLR     BIT_ESAMICC
0262 7F00     F     2356             MOV     R7,#DATA_RXBUF
0264 7D00     F     2357             MOV     R5,#XDATA_TXBUF 
0266 7C01           2358             MOV     R4,#01H                                                 ;R4             ---
                                  ÎÄ¼þID
0268 7B01           2359             MOV     R3,#1   
026A 7A1B           2360             MOV     R2,#1BH                                                 ;R2             ---
                                  Offset
026C 120000   F     2361             CALL    _FUN_CARDAPP_ReadBinary 
026F EF             2362             MOV     A,R7
                    2363             
0270 7800     F     2364             MOV     R0,#XDATA_TXBUF
                    2365                     ;MOVX   A,@R0
0272 758301         2366             MOV     DPH,#1
0275 8882           2367             MOV     DPL,R0
0277 E0             2368             MOVX    A,@DPTR
                    2369             
0278 7800     F     2370             MOV     R0,#XDATA_SC
                    2371                     ;MOVX   @R0,A
027A 758301         2372             MOV     DPH,#1 
027D 8882           2373             MOV     DPL,R0 
027F F0             2374             MOVX    @DPTR,A
                    2375             
                    2376             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
0280 758372         2377             MOV     DPH,#CONST_FLASH_SYSINFOH
0283 758224         2378             MOV     DPL,#CONST_FLASH_SYSINFOL + 36
0286 750700   F     2379             MOV     AR7,#XDATA_HOLD + 10
0289 7B0A           2380             MOV     R3,#10
028B 120000   F     2381             CALL    _RDFlashXR
                    2382                             
                    2383             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
028E 758372         2384             MOV     DPH,#CONST_FLASH_SYSINFOH
0291 758238         2385             MOV     DPL,#CONST_FLASH_SYSINFOL + 56
0294 750700   F     2386             MOV     AR7,#XDATA_HOLD + 20
0297 7B0A           2387             MOV     R3,#10;8
0299 120000   F     2388             CALL    _RDFlashXR
                    2389             
                    2390             ; ¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ 1
029C 758372         2391             MOV     DPH,#CONST_FLASH_SYSINFOH               ;
029F 75824C         2392             MOV     DPL,#CONST_FLASH_SYSINFOL + 76          ;
02A2 750700   F     2393             MOV     AR7,#XDATA_HOLD + 30                    ; 24
02A5 7B0A           2394             MOV     R3,#10                                  ; 8
02A7 120000   F     2395             CALL    _RDFlashXR
                    2396             
                    2397             ;~~~~~~~~~~~~~~~~~~~~~~~
                    2398             ;MOV    R0,#XDATA_HOLD  + 12
                    2399             ;INC    R0
                    2400             ;       ;MOVX   A,@R0
                    2401             ;MOV    DPH,#1
                    2402             ;MOV    DPL,R0
                    2403             ;MOVX   A,@DPTR
                    2404             ;CALL   _fun_test_Display
                    2405             ;~~~~~~~~~~~~~~~~~~~~~~~        
02AA C000           2406             PUSH    AR0
02AC 7800     F     2407             MOV     R0,#XDATA_SC
                    2408                     ;MOVX   A,@R0
02AE 758301         2409             MOV     DPH,#1
02B1 8882           2410             MOV     DPL,R0
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    42

02B3 E0             2411             MOVX    A,@DPTR
02B4 D000           2412             POP     AR0
02B6 6030           2413             JZ      OBUMAIN_CARDACTIVE_ZC
                    2414                     
02B8 7A00           2415             MOV     R2,#0
02BA                2416     OBUMAIN_CARDACTIVE_CPStartLOOP:
02BA 0A             2417             INC     R2
02BB                2418     OBUMAIN_CARDACTIVE_CP01:
02BB BA0104         2419             CJNE    R2,#1,OBUMAIN_CARDACTIVE_CP02
02BE 7900     F     2420             MOV     R1,#XDATA_HOLD+10
02C0 8009           2421             JMP     OBUMAIN_CARDACTIVE_CP04
                    2422     
02C2                2423     OBUMAIN_CARDACTIVE_CP02:
02C2 BA0204         2424             CJNE    R2,#2,OBUMAIN_CARDACTIVE_CP03   
02C5 7900     F     2425             MOV     R1,#XDATA_HOLD + 20
02C7 8002           2426             JMP     OBUMAIN_CARDACTIVE_CP04
                    2427             
02C9                2428     OBUMAIN_CARDACTIVE_CP03:
02C9 7900     F     2429             MOV     R1,#XDATA_HOLD+30
02CB                2430     OBUMAIN_CARDACTIVE_CP04:
                    2431             
02CB 7800     F     2432             MOV     R0,#XDATA_HOLD
02CD 7B0A           2433             MOV     R3,#10                                                  ;8
02CF                2434     OBUMAIN_CARDACTIVE_VErrCPLOOP:; ±È¶Ô ³µÅÆ Ñ­»·  
                    2435                     ;MOVX   A,@R0
02CF 758301         2436             MOV     DPH,#1
02D2 8882           2437             MOV     DPL,R0
02D4 E0             2438             MOVX    A,@DPTR
02D5 F5F0           2439             MOV     B,A
                    2440                     ;MOVX   A,@R1
02D7 758301         2441             MOV     DPH,#1
02DA 8982           2442             MOV     DPL,R1
02DC E0             2443             MOVX    A,@DPTR
02DD 65F0           2444             XRL     A,B
02DF 6003           2445             JZ      OBUMAIN_CARDACTIVE_VErrCPLOOPZZ
02E1 020000   F     2446             JMP     OBUMAIN_CARDACTIVE_CPDif
02E4                2447     OBUMAIN_CARDACTIVE_VErrCPLOOPZZ:
02E4 08             2448             INC     R0
02E5 09             2449             INC     R1
02E6 DBE7           2450             DJNZ    R3,OBUMAIN_CARDACTIVE_VErrCPLOOP
                    2451     
02E8                2452     OBUMAIN_CARDACTIVE_ZC:
02E8 200003   F     2453             JB      BIT_INSERTCARD,OBUMAIN_CARDACTIVE_ZCZZ
02EB 020000   F     2454             JMP     OBUMAIN_CARDACTIVE_CardDis
                    2455     
02EE                2456     OBUMAIN_CARDACTIVE_ZCZZ:
                    2457     
                    2458     ;       R7      =0³É¹¦,=ffÊ§°Ü
                    2459     ;       R5      =0Dµ¼Èë¿¨ ; = 0EH ¼¤»î¿¨
02EE 120000   F     2460             CALL    _FUN_CARDAPP_ISInOrACT
02F1 EF             2461             MOV     A,R7
02F2 6003           2462             JZ      OBUMAIN_CARDACTIVE_CardDisZZ
02F4 020000   F     2463             JMP     OBUMAIN_CARDACTIVE_CardDis
                    2464     
02F7                2465     OBUMAIN_CARDACTIVE_CardDisZZ:
02F7 ED             2466             MOV     A,R5
02F8 640D           2467             XRL     A,#0DH
02FA 600A           2468             JZ      OBUMAIN_CARDACTIVE_GDFXOBU
                    2469             
02FC ED             2470             MOV     A,R5
02FD 640E           2471             XRL     A,#0EH
02FF 7002           2472             jnz     OBUMAIN_CARDACTIVE_03
0301 8078           2473             jmp     OBUMAIN_CARDACTIVE_ACTIVEOBU
                    2474             
0303                2475     OBUMAIN_CARDACTIVE_03:
0303 020000   F     2476             JMP     OBUMAIN_CARDACTIVE_CardDis
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    43

                    2477     ;----------------------------------------------------------------
                    2478     ;µ¼Èë¿¨
                    2479     ;       ÔÚÈ·ÈÏ0015.9 = 0DH ºó
                    2480     ;               Ò»°ãÐÔ´íÎó      01      µ¼ÈëÊ§°Ü        STR_InputFail
                    2481     ;               ºÏÍ¬ºÅ²»Í¬      02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                    2482     ;               Ê¹ÓÃ´ÎÊ=FFH     03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
                    2483     ;               ³É¹¦            00      µ¼Èë³É¹¦        STR_InputOk
                    2484     ;               ·Çµ¼Èë¿¨        FF
                    2485     ;----------------------------------------------------------------
0306                2486     OBUMAIN_CARDACTIVE_GDFXOBU:
0306 C005           2487             PUSH    AR5
0308 120000   F     2488             CALL    _FUN_CARDAPP_GDFXOBU
030B C007           2489             PUSH    AR7
030D 120000   F     2490             CALL    _Func_LCD_INIT  
0310 D007           2491             POP     AR7
0312 D005           2492             POP     AR5
                    2493             
0314 C000           2494             push    ar0
0316 120000   F     2495             CALL    _FUN_OBUMAIN_DR
0319 7F00     F     2496             MOV     R7,#DATA_RXBUF
031B 120000   F     2497             CALL    _FUN_LCD_DisplayExChina
                    2498             
031E 7FC8           2499             MOV     R7,#200
0320 120000   F     2500             CALL    _FUN_LIB_DELAY  
0323 7FC8           2501             MOV     R7,#200
0325 120000   F     2502             CALL    _FUN_LIB_DELAY  
0328 D007           2503             pop     ar7
                    2504             
032A EF             2505             MOV     A,R7
032B 6003           2506             JZ      OBUMAIN_CARDACTIVE_GDFXOBUdishv
032D 020000   F     2507             JMP     AP_start
                    2508             
0330                2509     OBUMAIN_CARDACTIVE_GDFXOBUdishv:
                    2510             ;Ñ¡Ôñ ESAM µÄ MF Ä¿Â¼,Ö»½øÐÐµ½61
0330 D200     F     2511             SETB    BIT_GETRESULT
0332 C200     F     2512             CLR     BIT_ESAMICC
0334 7F00     F     2513             MOV     R7,#DATA_RXBUF
0336 7D00     F     2514             MOV     R5,#XDATA_TXBUF
0338 7B3F           2515             MOV     R3,#03FH
033A 7A00           2516             MOV     R2,#000H
033C 120000   F     2517             CALL    _FUN_CARDAPP_SelectFile
033F EF             2518             MOV     A,R7
0340 6002           2519             JZ      OBUMAIN_CARDACTIVE_ReadSeldf01OK
0342 802A           2520             JMP     OBUMAIN_CARDACTIVE_ReadOver
                    2521             
0344                2522     OBUMAIN_CARDACTIVE_ReadSeldf01OK:
0344 C200     F     2523             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0346 D200     F     2524             SETB    BIT_GETRESULT   
0348 7F00     F     2525             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
034A 7D00     F     2526             MOV     R5,#XDATA_HOLD
034C 7C9D           2527             MOV     R4,#9dh                                                 ;R4             ---
                                  ÎÄ¼þID
034E 7B1B           2528             MOV     R3,#1bh                                                 ;R3             ---
                                  ³¤¶È
0350 7A0C           2529             MOV     R2,#12;04;03
0352 120000   F     2530             CALL    _FUN_CARDAPP_ReadBinary02
0355 EF             2531             MOV     A,R7    
0356 6002           2532             JZ      OBUMAIN_CARDACTIVE_ReadESAMHTHOK
0358 8014           2533             JMP     OBUMAIN_CARDACTIVE_ReadOver
                    2534             
035A                2535     OBUMAIN_CARDACTIVE_ReadESAMHTHOK:
                    2536             ;XDATA_HOLD[0~11] ³µÅÆ
                    2537             ;R7   Íâ´æ³µÅÆ
                    2538             ;R5   ·­ÒëºóµÄÄÚ´æÖ¸Õë
035A 7F00     F     2539             MOV     R7,#XDATA_HOLD                  ;8
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    44

035C 7D00     F     2540             MOV     R5,#DATA_RXBUF + 90             ;
035E 7B0C           2541             mov     R3,#12
0360 120000   F     2542             CALL    FUN_LCD_HVTransfer              ;
                    2543             
0363 7F00     F     2544             MOV     R7,#DATA_RXBUF + 90 + 1                 
0365 7D01           2545             MOV     R5,#1
                    2546             
0367 7800     F     2547             MOV     R0,#DATA_RXBUF + 90
0369 E6             2548             MOV     A,@R0
036A FB             2549             MOV     R3,A
036B 120000   F     2550             CALL    _Func_LCD_Display
                    2551             
036E                2552     OBUMAIN_CARDACTIVE_ReadOver:
036E 7FC8           2553             MOV     R7,#200
0370 120000   F     2554             CALL    _FUN_LIB_DELAY  
0373 7FC8           2555             MOV     R7,#200
0375 120000   F     2556             CALL    _FUN_LIB_DELAY  
                    2557             
0378 020000   F     2558             JMP     AP_start
                    2559     ;----------------------------------------------------------------
                    2560     ;¼¤»î¿¨
                    2561     ;       ÔÚÈ·ÈÏ0015.9=0EHºó
                    2562     ;               Ò»°ãÐÔ´íÎó      04      ¼¤»îÊ§°Ü        STR_ActiveFail
                    2563     ;               ºÏÍ¬ºÅ²»Í¬      05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                    2564     ;               Ê¹ÓÃ´ÎÊ=FFH     06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
                    2565     ;               ³É¹¦            00      ¼¤»î³É¹¦        STR_ActiveOK
                    2566     ;               ·Ç¼¤»î¿¨        FF
                    2567     ;----------------------------------------------------------------
037B                2568     OBUMAIN_CARDACTIVE_ACTIVEOBU:
                    2569             
037B C005           2570             PUSH    AR5
037D 120000   F     2571             CALL    _FUN_CARDAPP_ACTIVEOBU
0380 C007           2572             PUSH    AR7
0382 120000   F     2573             CALL    _Func_LCD_INIT
0385 D007           2574             POP     AR7
0387 D005           2575             POP     AR5
                    2576             
0389 120000   F     2577             CALL    _FUN_OBUMAIN_DR
                    2578     
038C 7F00     F     2579             MOV     R7,#DATA_RXBUF
038E 120000   F     2580             CALL    _FUN_LCD_DisplayExChina
                    2581     
0391 7FC8           2582             MOV     R7,#200
0393 120000   F     2583             CALL    _FUN_LIB_DELAY  
0396 7FC8           2584             MOV     R7,#200
0398 120000   F     2585             CALL    _FUN_LIB_DELAY  
                    2586             ;Ñ¡Ôñ ESAM µÄ MF Ä¿Â¼,Ö»½øÐÐµ½61
039B D200     F     2587             SETB    BIT_GETRESULT
039D C200     F     2588             CLR     BIT_ESAMICC
039F 7F00     F     2589             MOV     R7,#DATA_RXBUF
03A1 7D00     F     2590             MOV     R5,#XDATA_TXBUF
03A3 7B3F           2591             MOV     R3,#03FH
03A5 7A00           2592             MOV     R2,#000H
03A7 120000   F     2593             CALL    _FUN_CARDAPP_SelectFile
03AA EF             2594             MOV     A,R7
03AB 6002           2595             JZ      OBUMAIN_CARDACTIVE_ACTIVESeldf01OK
03AD 802A           2596             JMP     OBUMAIN_CARDACTIVE_ACTIVEOver
                    2597             
03AF                2598     OBUMAIN_CARDACTIVE_ACTIVESeldf01OK:
03AF C200     F     2599             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
03B1 D200     F     2600             SETB    BIT_GETRESULT   
03B3 7F00     F     2601             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
03B5 7D00     F     2602             MOV     R5,#XDATA_HOLD
03B7 7C9D           2603             MOV     R4,#9dh                                                 ;R4             ---
                                  ÎÄ¼þID
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    45

03B9 7B1B           2604             MOV     R3,#1bh                                                 ;R3             ---
                                  ³¤¶È
03BB 7A0C           2605             MOV     R2,#12;04;03
03BD 120000   F     2606             CALL    _FUN_CARDAPP_ReadBinary02
03C0 EF             2607             MOV     A,R7
03C1 6002           2608             JZ      OBUMAIN_CARDACTIVE_ACTIVEESAMHTHOK
03C3 8014           2609             JMP     OBUMAIN_CARDACTIVE_ACTIVEOver
                    2610             
03C5                2611     OBUMAIN_CARDACTIVE_ACTIVEESAMHTHOK:     
                    2612             ;R7   Íâ´æ³µÅÆ
                    2613             ;R5   ·­ÒëºóµÄÄÚ´æÖ¸Õë
03C5 7F00     F     2614             MOV     R7,#XDATA_HOLD                  ;8
03C7 7D00     F     2615             MOV     R5,#DATA_RXBUF + 90             ;
03C9 7B0C           2616             mov     R3,#12
03CB 120000   F     2617             CALL    FUN_LCD_HVTransfer              ;
                    2618             
03CE 7F00     F     2619             MOV     R7,#DATA_RXBUF + 90 + 1
03D0 7D01           2620             MOV     R5,#1
                    2621             
03D2 7800     F     2622             MOV     R0,#DATA_RXBUF + 90
03D4 E6             2623             MOV     A,@R0
03D5 FB             2624             MOV     R3,A
03D6 120000   F     2625             CALL    _Func_LCD_Display
                    2626             
03D9                2627     OBUMAIN_CARDACTIVE_ACTIVEOver:
03D9 7FC8           2628             MOV     R7,#200
03DB 120000   F     2629             CALL    _FUN_LIB_DELAY
03DE 7FC8           2630             MOV     R7,#200
03E0 120000   F     2631             CALL    _FUN_LIB_DELAY
03E3 020000   F     2632             JMP     AP_start
                    2633             
                    2634     ;----------------------------------------------------------------
                    2635             ;·Çµ¼Èë¡¢¼¤»î¿¨
03E6                2636     OBUMAIN_CARDACTIVE_CardDis:
03E6 120000   F     2637             CALL    _FUN_GSM_Insert                                         ;=0±íÊ¾ ´ÓESAM¿¨µ¼³
                             öÊ¾Ýµ½ÓÃ»§¿¨³É¹¦
                    2638             
                    2639     ;mov    A,#30
                    2640     ;clr    A
                    2641     ;mov    C,BIT_USEROK
                    2642     ;mov    Acc.0,C
                    2643     ;call   _fun_test_display
                    2644             
                    2645             ;µ±Ô¤¶ÁÓÃ»§¿¨Ê§°Üºó£¬ÖØ×öÔ¤¶Á
                    2646             ;Èç¹û»¹³ö´íÔò²»ÏòÏÂÏÔÊ¾
03E9 200018   F     2647             jb      BIT_USEROK,OBUMAIN_CARDACTIVE_disandpowerdown
                    2648             ;call   _FUN_OBUMAIN_PreSleep
                    2649             ;jb     BIT_USEROK,OBUMAIN_CARDACTIVE_disandpowerdown
03EC 120000   F     2650             CALL    _Func_LCD_INIT
                    2651             ;--- ÏÔÊ¾ ---
03EF 7F00     F     2652             MOV     R7,#DATA_RXBUF
03F1 900000   F     2653             MOV     DPTR,#STR_ErrCARD
03F4 120000   F     2654             CALL    _FUN_LCD_DisplayExChina
03F7 7FC8           2655             mov     r7,#200
03F9 120000   F     2656             call    _fun_lib_delay
03FC 7F64           2657             mov     r7,#100
03FE 120000   F     2658             call    _fun_lib_delay
0401 020000   F     2659             JMP     ap_start        
0404                2660     OBUMAIN_CARDACTIVE_disandpowerdown:
                    2661             
                    2662             ;±£´æµ¼³öÊÇ·ñ³É¹¦×´Ì¬ = 0 ±í³É¹¦
0404 EF             2663             MOV     A,R7
                    2664             ;~~~~~~~~~~~~~
                    2665             ;¹ú±êÌø¹µ¼³ö¹¦ÄÜ
0405 74FF           2666             MOV     A,#0FFH 
                    2667             ;~~~~~~~~~~~~~  
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    46

0407 7800     F     2668             MOV     R0,#XDATA_LoadCellToUser
                    2669             
                    2670                     ;MOVX   @R0,A
0409 758301         2671             MOV     DPH,#1
040C 8882           2672             MOV     DPL,R0
040E F0             2673             MOVX    @DPTR,A
                    2674             
                    2675             ;=== µÍµçÑ¹ === 
040F D295           2676             setb    PIN_PWR_LOWIO
0411 00             2677             nop
0412 00             2678             nop
0413 00             2679             nop
0414 00             2680             nop
                    2681             
0415 209516         2682             JB      PIN_PWR_LOWIO,OBUMAIN_CARDACTIVE_LOWVO
                    2683             ;¹ØÍâÎ§
0418 C285           2684             clr     PIN_ESAM_RST    
041A C284           2685             clr     Pin_522_RST
041C D2A4           2686             setb    Pin_pwrdwn      
041E 120000   F     2687             CALL    _Func_LCD_INIT  
                    2688             ;MOV    R7,#250
                    2689             ;CALL   _FUN_LIB_DELAY
0421 7F00     F     2690             MOV     R7,#DATA_RXBUF
0423 900000   F     2691             MOV     DPTR,#STR_LOWVo
0426 120000   F     2692             CALL    _FUN_LCD_DisplayExChina
0429 7FFA           2693             MOV     R7,#250
042B 120000   F     2694             CALL    _FUN_LIB_DELAY  
042E                2695     OBUMAIN_CARDACTIVE_LOWVO:
                    2696             
                    2697             ;=== ¹ØÍâÎ§ ===
042E C285           2698             CLR     PIN_ESAM_RST    
0430 C284           2699             CLR     Pin_522_RST
0432 D2A4           2700             SETB    Pin_pwrdwn
                    2701             
0434 120000   F     2702             CALL    _FUN_OBUMain_CardInfoDisplay02
                    2703             
                    2704             ;mov    a,#36
                    2705             ;call   _fun_test_display
                    2706             
0437 D2C5           2707             SETB    pin_red
0439 D2C4           2708             SETB    pin_gre
                    2709             
043B 7FFA           2710             MOV     R7,#250
043D 120000   F     2711             CALL    _FUN_LIB_DELAY
0440                2712     OBUMAIN_CARDACTIVE_Insert:
                    2713             
0440 7800     F     2714             MOV     R0,#XDATA_LoadCellToUser
                    2715             ;MOVX   A,@R0
0442 758301         2716             MOV     DPH,#1
0445 8882           2717             MOV     DPL,R0
0447 E0             2718             MOVX    A,@DPTR 
0448 700D           2719             JNZ     OBUMAIN_CARDACTIVE_Insert02     
044A 7F00     F     2720             MOV     R7,#DATA_RXBUF
044C 900000   F     2721             MOV     DPTR,#STR_ReWrOK
044F 120000   F     2722             CALL    _FUN_LCD_DisplayExChina 
0452 7FFA           2723             MOV     R7,#250
0454 120000   F     2724             CALL    _FUN_LIB_DELAY  
                    2725             
0457                2726     OBUMAIN_CARDACTIVE_Insert02:
                    2727     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    2728             ;=1²»ÆôÓÃ =0ÆôÓÃ
0457 7401           2729             MOV     A,#CONST_INPUT_ISEnable
0459 7024           2730             JNZ     OBUMAIN_CARDACTIVE_ZCKQ02
045B 758372         2731             MOV     DPH,#CONST_FLASH_0019H
045E 7582BC         2732             MOV     DPL,#CONST_FLASH_0019L + 13
0461 750700   F     2733             MOV     AR7,#XDATA_HOLD
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    47

0464 7B01           2734             MOV     R3,#1
0466 120000   F     2735             CALL    _RDFlashXR      
0469 7800     F     2736             MOV     R0,#XDATA_HOLD
                    2737             ;Èë¿Ú
                    2738             ;MOVX   A,@R0
046B 758301         2739             MOV     DPH,#1
046E 8882           2740             MOV     DPL,R0
0470 E0             2741             MOVX    A,@DPTR
                    2742             
0471 6403           2743             XRL     A,#CONST_ETC_INPUT
0473 600C           2744             JZ      OBUMAIN_CARDACTIVE_ZCKQ
                    2745             ;MOVX   A,@R0
0475 758301         2746             MOV     DPH,#1
0478 8882           2747             MOV     DPL,R0
047A E0             2748             MOVX    A,@DPTR 
                    2749             
047B 6401           2750             XRL     A,#CONST_MTC_INPUT
047D 6002           2751             JZ      OBUMAIN_CARDACTIVE_ZCKQ
047F                2752     OBUMAIN_CARDACTIVE_ZCKQ02:
047F 8011           2753             JMP     OBUMAIN_CARDACTIVE_ZCNOKQ
                    2754     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0481                2755     OBUMAIN_CARDACTIVE_ZCKQ:
0481 7F50           2756             MOV     R7,#80
0483 120000   F     2757             CALL    _FUN_LIB_BEEP   ;ÏìÁå
0486 7F64           2758             MOV     R7,#100
0488 120000   F     2759             CALL    _FUN_LIB_DELAY  ;ÏìÁå
048B 7F50           2760             MOV     R7,#80
048D 120000   F     2761             CALL    _FUN_LIB_BEEP   ;ÏìÁå
0490 8005           2762             JMP     OBUMAIN_CARDACTIVE_ZCKQOVER
                    2763     
0492                2764     OBUMAIN_CARDACTIVE_ZCNOKQ:
0492 7F64           2765             MOV     R7,#100
0494 120000   F     2766             CALL    _FUN_LIB_BEEP   ;ÏìÁå
                    2767     
0497                2768     OBUMAIN_CARDACTIVE_ZCKQOVER:
0497 020000   F     2769             JMP     OBUMain_BEEP_OVER
                    2770             
                    2771     ;-----------------------------------------------------------------------        
049A                2772     OBUMAIN_CARDACTIVE_CPDif:
049A C000           2773             PUSH    AR0
049C 7800     F     2774             MOV     R0,#XDATA_SC
                    2775                     ;MOVX   A,@R0
049E 758301         2776             MOV     DPH,#1
04A1 8882           2777             MOV     DPL,R0
04A3 E0             2778             MOVX    A,@DPTR
04A4 D000           2779             POP     AR0
04A6 8AF0           2780             MOV     B,R2
04A8 65F0           2781             XRL     A,B
                    2782             ;---JNZ OBUMAIN_CARDACTIVE_CPStartLOOP
04AA 6003           2783             JZ      OBUMAIN_CARDACTIVE_HVDIF
04AC 020000   F     2784             JMP     OBUMAIN_CARDACTIVE_CPStartLOOP
04AF                2785     OBUMAIN_CARDACTIVE_HVDIF:       
                    2786             ;~~~~~~~~~~~~~~~~~~~~~~~
                    2787             ;mov    r0,#XDATA_HOLD+12
                    2788             ;       ;MOVX   A,@R0
                    2789             ;MOV    DPH,#1
                    2790             ;MOV    DPL,R0
                    2791             ;MOVX   A,@DPTR
                    2792             ;mov    a,r3
                    2793             ;MOV    A,#15
                    2794             ;call   _fun_test_Display
                    2795             ;~~~~~~~~~~~~~~~~~~~~~~~
                    2796             ;ÏÔÊ¾³µÅÆ²»Ò»ÖÂ
04AF 120000   F     2797             CALL    _Func_LCD_INIT  
                    2798             ;--- ÏÔÊ¾ ---
04B2 7F00     F     2799             MOV     R7,#DATA_RXBUF
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    48

04B4 900000   F     2800             MOV     DPTR,#STR_VHDif
04B7 120000   F     2801             CALL    _FUN_LCD_DisplayExChina 
04BA                2802     OBUMAIN_CARDACTIVE_beep:
04BA 120000   F     2803             CALL    _FUN_GSM_Insert 
04BD 020000   F     2804             JMP     OBUMain_BEEP_OVER 
04C0 C2A4           2805             CLR     Pin_Pwrdwn      
04C2 D283           2806             SETB    PIN_ESAM_RX             ;ESAM Ê¾ÝÍÈÎªµÍ
                    2807     
04C4 7E01           2808             MOV     R6,#1;3
04C6 7B01           2809             MOV     R3,#1
                    2810     
04C8                2811     OBUMAIN_CARDACTIVE_BEEPLOOP:    
04C8 7F14           2812             MOV     R7,#20
04CA C006           2813             PUSH    AR6
04CC C003           2814             PUSH    AR3
04CE 120000   F     2815             CALL    _FUN_LIB_BEEP
04D1 D003           2816             POP     AR3
04D3 D006           2817             POP     AR6
04D5 DBF1           2818             DJNZ    R3,OBUMAIN_CARDACTIVE_BEEPLOOP
04D7 DEEF           2819             DJNZ    R6,OBUMAIN_CARDACTIVE_BEEPLOOP
                    2820     
04D9                2821     OBUMAIN_CARDACTIVE_overov:
04D9 8027           2822             JMP     OBUMAIN_CARDACTIVE_DISOVER      
                    2823     
04DB                2824     OBUMAIN_CARDACTIVE_SC:;·ÇËÄ´¨¿¨         
                    2825             ;ÏÔÊ¾"·ÇËÄ´¨¿¨"
04DB 120000   F     2826             CALL    _Func_LCD_INIT          
                    2827             ;--- ÏÔÊ¾ ---
04DE 7F00     F     2828             MOV     R7,#DATA_RXBUF
04E0 900000   F     2829             MOV     DPTR,#STR_IsNotSC
04E3 120000   F     2830             CALL    _FUN_LCD_DisplayExChina                         
04E6 80D2           2831             JMP     OBUMAIN_CARDACTIVE_beep
                    2832     
04E8                2833     OBUMAIN_CARDACTIVE_KPCW:;¡°¿¨Æ¬´íÎó¡±
                    2834             ;ÏÔÊ¾"¡°¿¨Æ¬´íÎó"
04E8 120000   F     2835             CALL    _Func_LCD_INIT  
                    2836             ;--- ÏÔÊ¾ ---
04EB 7F00     F     2837             MOV     R7,#DATA_RXBUF
04ED 900000   F     2838             MOV     DPTR,#STR_ErrCARD
04F0 120000   F     2839             CALL    _FUN_LCD_DisplayExChina 
04F3 80C5           2840             JMP     OBUMAIN_CARDACTIVE_beep
                    2841     
04F5                2842     OBUMAIN_CARDACTIVE_NoCard:      
                    2843             ;ÏÔÊ¾"·ÇËÄ´¨¿¨"
04F5 120000   F     2844             CALL    _Func_LCD_INIT  
                    2845             ;--- ÏÔÊ¾ ---
04F8 7F00     F     2846             MOV     R7,#DATA_RXBUF
04FA 900000   F     2847             MOV     DPTR,#STR_NOCARD
04FD 120000   F     2848             CALL    _FUN_LCD_DisplayExChina 
                    2849     
0500                2850     OBUMAIN_CARDACTIVE_OVER:
0500 8000           2851             JMP     OBUMAIN_CARDACTIVE_DISOVER
                    2852             ;--- ÏÔÊ¾¿¨ÐÅÏ¢ ---
0502                2853     OBUMAIN_CARDACTIVE_DISOVER:
0502 7FC8           2854             MOV     R7,#200
0504 120000   F     2855             CALL    _FUN_LIB_DELAY
0507 7FC8           2856             MOV     R7,#200
0509 120000   F     2857             CALL    _FUN_LIB_DELAY  
050C 7FC8           2858             MOV     R7,#200
050E 120000   F     2859             CALL    _FUN_LIB_DELAY
0511 7FC8           2860             MOV     R7,#200
0513 120000   F     2861             CALL    _FUN_LIB_DELAY          
0516 020000   F     2862             JMP     AP_start
                    2863     
                    2864     ;-----------------------------------------------------------------------
                    2865     ;SEG_OBUMAIN_WAVEACTIVE(¸½ÊôÐò¶Î)
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    49

                    2866     ;¸½Êô:_FUN_OBUMAIN_MASTER
                    2867     ;ÃèÊö:Î¢²¨¼¤»î
                    2868     ;Á÷³ÌÃèÊö£º
                    2869     ;       ½ÓÊÕ BST
                    2870     ;       ³õÊ¼»¯¿¨Æ¬
                    2871     ;       ·¢ËÍ VST
                    2872     ;       ½ÓÊÕ DSRCÐÅºÅ   <------------------ |
                    2873     ;               ×¨ÓÃÖ¸Áî->ÖØ·¢------------> |
                    2874     ;               ·Ç×¨ÓÃÖ¸Áî                  |
                    2875     ;                       N Î»Ã»ÓÐ±ä--->ÖØ·¢->|
                    2876     ;               ¸ù¾Ý ActioneType ×öÏàÓ¦´¦Àí   |
                    2877     ;               ·¢ËÍÏìÓ¦Ê¾Ýµ½RSU            |
                    2878     ;                     |___________________> |
                    2879     ;-----------------------------------------------------------------------
0519                2880     OBUMAIN_WAVEACTIVENOCARD_DEAL:
0519 758372         2881             MOV     DPH,#CONST_FALSH_PREFlag03H
051C 7582F6         2882             MOV     DPL,#CONST_FALSH_PREFlag03L
051F 750700   F     2883             MOV     AR7,#XDATA_TXBUF
0522 7B01           2884             MOV     R3,#1
0524 120000   F     2885             CALL    _RDFlashXR
                    2886             ; ÑéÖ¤ ÉÏ»ØÔ¤´¦ÀíÊÇ·ñ×ö³É¹¦,Èç¹ûÃ»ÓÐÔòÒª×öÒ»´ÎÔ¤´¦Àí
0527 7800     F     2887             MOV     R0,#XDATA_TXBUF
                    2888                     ;MOVX   A,@R0
0529 758301         2889             MOV     DPH,#1
052C 8882           2890             MOV     DPL,R0
052E E0             2891             MOVX    A,@DPTR
052F 64AA           2892             XRL     A,#CONST_SYS_AA
                    2893             
0531                2894     OBUMAIN_WAVEACTIVENOCARD_YD:
0531 120000   F     2895             CALL    _Fun_OBUmain_SysUNSleep
0534 C29C           2896             CLR     REN
0536 C2AC           2897             CLR     ES
                    2898             ;MOV    R7,#04                                          ; 5;50
                    2899             ;CALL   _FUN_LIB_DELAY                                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµç
                             Ñ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬
0538 120000   F     2900             CALL    _FUN_OBUMain_BASEINIT
                    2901     
053B 120000   F     2902             CALL    _FUN_OBUMAIN_PrePu
                    2903             ;ÑéÖ¤ÉÏ»ØÔ¤´¦ÀíÊÇ·ñ×ö³É¹¦,Èç¹ûÃ»ÓÐÔòÒª×öÒ»´ÎÔ¤´¦Àí
053E C200     F     2904             CLR     BIT_ESAMICC
0540 C200     F     2905             CLR     BIT_GETRESULT
0542 7F00     F     2906             MOV     R7,#DATA_RXBUF
0544 7D00     F     2907             MOV     R5,#XDATA_TXBUF
0546 7BDF           2908             MOV     R3,#0dFH
0548 7A01           2909             MOV     R2,#001H
054A 120000   F     2910             CALL    _FUN_CARDAPP_SelectFile
                    2911             
054D 020000   F     2912             JMP     OBUMAIN_WAVEACTIVE_GETBST
                    2913     ;-------------------------------------------------
                    2914     ;Î¢²¨»½ÐÑÍâ²¿ÖÐ¶Ï×ªÀ´Èë¿Ú       
                    2915     ;-------------------------------------------------
                    2916             
0550                2917     SEG_OBUMAIN_WAVEACTIVE:
                    2918             
0550 C2A4           2919             CLR     Pin_pwrdwn                      ;[ÍâÎ§µçÔ´]
                    2920             
0552 7F01           2921             MOV     R7,#1
0554 120000   F     2922             CALL    _Power_Up
0557 7F01           2923             MOV     R7,#1
0559 120000   F     2924             CALL    Tx_Carrier_En           
                    2925             
055C D282           2926             SETB    PIN_WAVE_CHANNEL1
055E C295           2927             CLR     PIN_PWRDWN_LCD
                    2928     
0560 7FC8           2929             MOV     R7,#200
0562 120000   F     2930             CALL    _FUN_LIB_DELAY
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    50

0565 7FC8           2931             MOV     R7,#200
0567 120000   F     2932             CALL    _FUN_LIB_DELAY
056A 7FC8           2933             MOV     R7,#200
056C 120000   F     2934             CALL    _FUN_LIB_DELAY
056F 7FC8           2935             MOV     R7,#200
0571 120000   F     2936             CALL    _FUN_LIB_DELAY  
0574 7FC8           2937             MOV     R7,#200
0576 120000   F     2938             CALL    _FUN_LIB_DELAY
0579 7FC8           2939             MOV     R7,#200
057B 120000   F     2940             CALL    _FUN_LIB_DELAY  
                    2941                     
057E C282           2942             clr     PIN_WAVE_CHANNEL1
0580 D295           2943             setb    PIN_PWRDWN_LCD
0582 120000   F     2944             CALL    _Enter_Sleep_Mode       
0585 C298           2945             CLR     RI
0587 C299           2946             CLR     TI
0589 C289           2947             CLR     IE0
058B C28B           2948             CLR     IE1
058D C28D           2949             CLR     TF0
058F C28F           2950             CLR     TF1
0591 C28C           2951             CLR     TR0
0593 C28E           2952             CLR     TR1
                    2953             
0595 D2AC           2954             SETB    ES
0597 D2A8           2955             SETB    EX0     
0599 D2AF           2956             SETB    EA
                    2957             
059B                2958     OBUMAIN_WAVEACTIVE_OVERXXXX:
059B 80FE           2959             JMP     OBUMAIN_WAVEACTIVE_OVERXXXX
                    2960             
                    2961             ;call   _fun_test_display
                    2962             ;=== ²âÊÔ¶Î[¿ª±³¹â£¬ÏìÒ»ÏÂ] ===
                    2963             ;CLR    PIN_PWRDWN_LCD
                    2964             
                    2965             ;MOV    REG_5412AD_P0M0,#00001100B
                    2966             ;MOV    REG_5412AD_P0M1,#00000000B
                    2967             
                    2968             ;MOV    R7,#100
                    2969             ;CALL   _fun_lib_beep
059D C2A4           2970             CLR     Pin_pwrdwn                      ;[ÍâÎ§µçÔ´]     
059F D283           2971             SETB    PIN_ESAM_RX             ;ESAM Ê¾ÝÍÈÎªµÍ
                    2972     
05A1 C2C4           2973             CLR     PIN_GRE
05A3 C200     F     2974             CLR     BIT_INITCard
05A5 C29C           2975             CLR     REN
05A7 C2AC           2976             CLR     ES
                    2977             
05A9 7F01           2978             MOV     R7,#1
05AB 120000   F     2979             CALL    Rx_En
05AE 7800     F     2980             MOV     R0,#XDATA_TOTALNUML
05B0 E4             2981             CLR     A
                    2982                     ;MOVX   @R0,A
05B1 758301         2983             MOV     DPH,#1 
05B4 8882           2984             MOV     DPL,R0 
05B6 F0             2985             MOVX    @DPTR,A
05B7 18             2986             DEC     R0                      ;[1]
                    2987                     ;MOVX   @R0,A
05B8 758301         2988             MOV     DPH,#1 
05BB 8882           2989             MOV     DPL,R0 
05BD F0             2990             MOVX    @DPTR,A 
                    2991             
                    2992             ;Ìø¹ 255 ÃëÏÞÖÆ
                    2993             ;CLR    PIN_ESAM_RST
                    2994             ;MOV    R7,#030H                        ; »ª´óESAM¿¨¸´Î»Òª±È½ÝµÂµÄ¶Ì
                    2995             ;CALL   _FUN_LIB_DELAYSIMPLAY   
                    2996             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    51

                    2997     ;       MOV     R7,#20
                    2998     ;       CALL    _FUN_LIB_DELAY
                    2999     ;
                    3000     ;       SETB    PIN_ESAM_RST    
                    3001     ;       SETB    PIN_ESAM_RX
                    3002             
05BE 758372         3003             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
05C1 7582EC         3004             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
05C4 750700   F     3005             MOV     AR7,#XDATA_LastBeaconID
05C7 7B08           3006             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen
05C9 120000   F     3007             CALL    _RDFlashXR      
                    3008             
05CC 758372         3009             MOV     DPH,#CONST_FLASH_LASTCARDH
05CF 7582EB         3010             MOV     DPL,#CONST_FLASH_LASTCARDL
05D2 750700   F     3011             MOV     AR7,#DATA_RXBUF
05D5 7B01           3012             MOV     R3,#1
05D7 120000   F     3013             CALL    _RDFlash
                    3014     ;SETB   PIN_ESAM_RST
                    3015             
05DA 7800     F     3016             MOV     R0,#DATA_RXBUF
05DC E6             3017             MOV     A,@R0
05DD A2E0           3018             MOV     C,ACC.0
05DF 9200     F     3019             MOV     BIT_ISContact,C ;½Ó´¥¿¨=1£¬»¹ÊÇ·Ç½Ó´¥¿¨=0       
05E1 A2E1           3020             MOV     C,ACC.1
05E3 9200     F     3021             MOV     BIT_ProMF,C
05E5 A2B3           3022             mov     C,PIN_card_exist
05E7 B3             3023             cpl     C
05E8 9200     F     3024             mov     BIT_INSERTCARD,C
                    3025             
                    3026     ;clr    a
                    3027     ;mov    c,BIT_INSERTCARD
                    3028     ;mov    acc.0,c
                    3029     ;call   _fun_test_display       
                    3030             
                    3031             ;»½Åä¼ì²éµÍµçÑ¹ ,Ã»ÓÐº¸±È½ÏÆ÷Ê±£¬Ìø¹
05EA                3032     OBUMAIN_WAVEACTIVE_VolNormal:
05EA 200003   F     3033             jb      BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_PREss
05ED 020000   F     3034             jmp     OBUMAIN_WAVEACTIVENOCARD_DEAL
05F0                3035     OBUMAIN_WAVEACTIVE_PREss:
05F0 30001A   F     3036             JNB     BIT_ProMF,OBUMAIN_WAVEACTIVE_PREPRE
05F3                3037     OBUMAIN_WAVEACTIVE_PRE:
                    3038             
                    3039             ;---¶ÁÈ¡ Ô¤´¦Àí ±ê¼Ç ---
05F3 758372         3040             MOV     DPH,#CONST_FALSH_PREFlagH
05F6 7582F4         3041             MOV     DPL,#CONST_FALSH_PREFlagL
05F9 750700   F     3042             MOV     AR7,#XDATA_TXBUF
05FC 7B01           3043             MOV     R3,#1
05FE 120000   F     3044             CALL    _RDFlashXR
                    3045             
                    3046             ;ÑéÖ¤ÉÏ»ØÔ¤´¦ÀíÊÇ·ñ×ö³É¹¦,Èç¹ûÃ»ÓÐÔòÒª×öÒ»´ÎÔ¤´¦Àí
0601 7800     F     3047             MOV     R0,#XDATA_TXBUF
                    3048                     ;MOVX   A,@R0
0603 758301         3049             MOV     DPH,#1
0606 8882           3050             MOV     DPL,R0
0608 E0             3051             MOVX    A,@DPTR
0609 6488           3052             XRL     A,#CONST_SYS_PREFlag
060B 601F           3053             JZ      OBUMAIN_WAVEACTIVE_PRE02
                    3054             
060D                3055     OBUMAIN_WAVEACTIVE_PREPRE:
                    3056             
060D 120000   F     3057             CALL    _Fun_OBUmain_SysUNSleep
0610 C29C           3058             CLR     REN
0612 C2AC           3059             CLR     ES
                    3060     ;       MOV     R7,#4                                           ; 5;50
                    3061     ;       CALL    _FUN_LIB_DELAY                                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµç
                             Ñ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    52

0614 120000   F     3062             CALL    _FUN_OBUMain_BASEINIT
                    3063             
0617 120000   F     3064             CALL    _FUN_OBUMAIN_PrePu
                    3065             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    3066             ;MOV    A,#16
                    3067             ;CALL   _FUN_TEST_DISPLAY
                    3068             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    3069             ;Ñ¡Ôñ»Ø DF01 ÎÄ¼þ
061A C200     F     3070             CLR     BIT_ESAMICC
061C C200     F     3071             CLR     BIT_GETRESULT
061E 7F00     F     3072             MOV     R7,#DATA_RXBUF
0620 7D00     F     3073             MOV     R5,#XDATA_TXBUF
0622 7BDF           3074             MOV     R3,#0dFH
0624 7A01           3075             MOV     R2,#001H
0626 120000   F     3076             CALL    _FUN_CARDAPP_SelectFile         
0629 020000   F     3077             JMP     OBUMAIN_WAVEACTIVE_GETBST
                    3078             ;--- ¶ÁÈ¡Ô¤´¦Àí±ê¼Ç01(¿´Ô¤´¦Àí±ê¼ÇÊÇ·ñ³É¹¦) --- 
062C                3079     OBUMAIN_WAVEACTIVE_PRE02:       
062C 758372         3080             MOV     DPH,#CONST_FALSH_PREFlag02H
062F 7582F5         3081             MOV     DPL,#CONST_FALSH_PREFlag02L
0632 750700   F     3082             MOV     AR7,#XDATA_TXBUF
0635 7B01           3083             MOV     R3,#1
0637 120000   F     3084             CALL    _RDFlashXR
                    3085             
                    3086             ;ÑéÖ¤ÉÏ»ØÔ¤´¦ÀíÊÇ·ñ×ö³É¹¦,Èç¹ûÃ»ÓÐÔòÒª×öÒ»´ÎÔ¤´¦Àí
063A 7800     F     3087             MOV     R0,#XDATA_TXBUF
                    3088                     ;MOVX   A,@R0
063C 758301         3089             MOV     DPH,#1
063F 8882           3090             MOV     DPL,R0
0641 E0             3091             MOVX    A,@DPTR
0642 64AA           3092             XRL     A,#CONST_SYS_AA
0644 606A           3093             JZ      OBUMAIN_WAVEACTIVE_GETBST       ; 
                    3094             
0646 120000   F     3095             CALL    _Fun_OBUmain_SysUNSleep
0649 C29C           3096             CLR     REN
064B C2AC           3097             CLR     ES
                    3098     ;       MOV     R7,#4                                           ; 5;50
                    3099     ;       CALL    _FUN_LIB_DELAY                                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµç
                             Ñ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬                           
064D 120000   F     3100             CALL    _FUN_OBUMain_BASEINIT   
0650 120000   F     3101             CALL    _FUN_OBUMAIN_PrePu
                    3102             ;Ñ¡Ôñ»ØDF01ÎÄ¼þ
0653 C200     F     3103             CLR     BIT_ESAMICC
0655 C200     F     3104             CLR     BIT_GETRESULT
0657 7F00     F     3105             MOV     R7,#DATA_RXBUF
0659 7D00     F     3106             MOV     R5,#XDATA_TXBUF
065B 7BDF           3107             MOV     R3,#0dFH
065D 7A01           3108             MOV     R2,#001H
065F 120000   F     3109             CALL    _FUN_CARDAPP_SelectFile
                    3110                     
0662 804C           3111             JMP     OBUMAIN_WAVEACTIVE_GETBST
0664                3112     OBUMAIN_WAVEACTIVE_PRE03:
0664 300049   F     3113             JNB     BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_GETBST
                    3114             
                    3115             ;¶Á¿¨Æ¬0019Ê¾Ýµ½Íâ´æ
0667 D200     F     3116             SETB    BIT_ESAMICC                                             ; µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0669 D200     F     3117             SETB    BIT_GETRESULT                                           ; XXX
066B 7F00     F     3118             MOV     R7,#DATA_RXBUF                                          ; R7            ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
066D 7D00     F     3119             MOV     R5,#XDATA_TXBUF                                         ; 
066F 7C19           3120             MOV     R4,#19H                                                 ; R4            ---
                                  ÎÄ¼þ ID
0671 7B3C           3121             MOV     R3,#CONST_Flash_0019Len                                 ; R3            ---
                                  ³¤¶È
0673 7A01           3122             MOV     R2,#1
0675 120000   F     3123             CALL    _FUN_CARDAPP_ReadRecord         
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    53

                    3124     
                    3125             ;¶Áflash 0019 Ê¾Ýµ½ÄÚ´æ
0678 758372         3126             MOV     DPH,#CONST_FLASH_0019H
067B 7582AF         3127             MOV     DPL,#CONST_FLASH_0019L
067E 7F00     F     3128             MOV     R7,#DATA_RXBUF
0680 7B3C           3129             MOV     R3,#CONST_Flash_0019Len
0682 120000   F     3130             CALL    _rdflash
                    3131             
                    3132             ;ÅÐ¶Ï¿¨Æ¬ÖÐµÄ0019ÓëÔ¤¶ÁµÄÐÅÏ¢ÊÇ·ñÏàÍ¬
0685 7B3C           3133             MOV     R3,#CONST_Flash_0019Len
0687 7800     F     3134             MOV     R0,#XDATA_TXBUF
0689 7900     F     3135             MOV     R1,#DATA_RXBUF
068B                3136     WAVEACTIVE_PRE03_LOOP:
                    3137                     ;MOVX   A,@R0
068B 758301         3138             MOV     DPH,#1
068E 8882           3139             MOV     DPL,R0
0690 E0             3140             MOVX    A,@DPTR
0691 F5F0           3141             MOV     B,A
0693 E7             3142             MOV     A,@R1
0694 65F0           3143             XRL     A,B
0696 7006           3144             JNZ     WAVEACTIVE_PRE03_PREDeal
0698 09             3145             INC     R1
0699 08             3146             INC     R0
069A DBEF           3147             DJNZ    R3,WAVEACTIVE_PRE03_LOOP
                    3148             
069C 8012           3149             JMP     OBUMAIN_WAVEACTIVE_GETBST                               ;OBUMAIN_WAVEACTIVE
                             _GETBST      
069E                3150     WAVEACTIVE_PRE03_PREDeal:
                    3151             
                    3152             ;---CALL        _FUN_OBUMain_CARDPreDeal                                ;×ö¿¨Æ¬Ô¤´¦
                             Àí
069E 120000   F     3153             call    _FUN_OBUMAIN_PrePu
                    3154             ;Ñ¡Ôñ»ØDF01ÎÄ¼þ
06A1 C200     F     3155             CLR     BIT_ESAMICC
06A3 C200     F     3156             CLR     BIT_GETRESULT
06A5 7F00     F     3157             MOV     R7,#DATA_RXBUF
06A7 7D00     F     3158             MOV     R5,#XDATA_TXBUF
06A9 7BDF           3159             MOV     R3,#0dFH
06AB 7A01           3160             MOV     R2,#001H
06AD 120000   F     3161             CALL    _FUN_CARDAPP_SelectFile
                    3162             
06B0                3163     OBUMAIN_WAVEACTIVE_GETBST:
                    3164     ;2ms    
                    3165             
                    3166             ;±¾´ÎÎÞ¿¨Ê±£¬½¨Á¢Ô¤¶Á±ê¼Ç
06B0 20001E   F     3167             JB      BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_ZLYD
                    3168             
                    3169             ;--- Ð´ÈëÔ¤´¦Àí³É¹¦±ê¼Ç 02 --- 
06B3 7800     F     3170             MOV     R0,#XDATA_TXBUF
06B5 7455           3171             MOV     A,#CONST_SYS_55
                    3172                     ;MOVX   @R0,A
06B7 758301         3173             MOV     DPH,#1 
06BA 8882           3174             MOV     DPL,R0 
06BC F0             3175             MOVX    @DPTR,A
06BD 08             3176             INC     R0
                    3177                     ;MOVX   @R0,A
06BE 758301         3178             MOV     DPH,#1 
06C1 8882           3179             MOV     DPL,R0 
06C3 F0             3180             MOVX    @DPTR,A
                    3181             
06C4 758372         3182             MOV     DPH,#CONST_FALSH_PREFlag02H
06C7 7582F5         3183             MOV     DPL,#CONST_FALSH_PREFlag02L
06CA 7F00     F     3184             MOV     R7,#XDATA_TXBUF
06CC 7B02           3185             MOV     R3,#2
06CE 120000   F     3186             CALL    _wrflashXR
                    3187             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    54

06D1                3188     OBUMAIN_WAVEACTIVE_ZLYD:        
                    3189     ;²¿·ÝOBU²»¿É¿¿
                    3190     ;       SETB    PIN_ESAM_RST    
                    3191     ;       SETB    PIN_ESAM_RX
                    3192             
06D1 75A88C         3193             MOV     IE,#10001100b
06D4 120000   F     3194             CALL    _FUN_HDLC_RX
                    3195             
                    3196     ;       mov     r0,#XDATA_CELLID
                    3197     ;       movx    a,@r0
                    3198             
                    3199     ;mov    a,DATA_DSRCRXLEN        
                    3200     ;mov    a,#2
                    3201     ;call   _fun_test_display               
                    3202     
                    3203     ;       SETB    PIN_ESAM_RST    
                    3204     ;       SETB    PIN_ESAM_RX
                    3205             
                    3206             ;¶ÁÈ¡ System Info  ²ðÐ¶Î»(µÚ27¸ö×Ö½Ú)
                    3207             ;·ÅÔÚÕâÀï¶Á£¬ÖØÒªµÄÔ­ÒòÊÇ£¬ÉÏµçÊ±ÐèÑÓÊ±£¬ËùÒÔ¿ÉÒÔÊ¡Ê±¡£
06D7 758372         3208             MOV     DPH,#CONST_FLASH_SYSINFOH
06DA 75821A         3209             MOV     DPL,#CONST_FLASH_SYSINFOL + 26
06DD 750700   F     3210             MOV     AR7,#XDATA_FIX
06E0 7B01           3211             MOV     R3,#001
06E2 120000   F     3212             CALL    _RDFlashXR
                    3213             
06E5 7900     F     3214             MOV     R1,#XDATA_FIX
                    3215                     ;MOVX   A,@R1
06E7 758301         3216             MOV     DPH,#1
06EA 8982           3217             MOV     DPL,R1
06EC E0             3218             MOVX    A,@DPTR
06ED 540F           3219             ANL     A,#0FH
                    3220             
06EF 6004           3221             JZ      OBUMAIN_WAVEACTIVE_Tampered
06F1 C200     F     3222             CLR     BIT_CD
06F3 8002           3223             JMP     OBUMAIN_WAVEACTIVE_TamperedOver
                    3224             
06F5                3225     OBUMAIN_WAVEACTIVE_Tampered:
06F5 D200     F     3226             SETB    BIT_CD
06F7                3227     OBUMAIN_WAVEACTIVE_TamperedOver:                
                    3228                     
                    3229     ;1      ;Èç¹û½ÓÊÕµ½µÄ ²»ÊÇ ×¨ÓÃ ÐÅºÅ£¬Ôò ÖØÐÂ ½ÓÊÕ
06F7 7800     F     3230             MOV     R0,#DATA_RXBUF
06F9 E6             3231             MOV     A,@R0
06FA 64FF           3232             XRL     A,#0FFH
06FC 70B2           3233             JNZ     OBUMAIN_WAVEACTIVE_GETBST
06FE 08             3234             INC     R0
06FF E6             3235             MOV     A,@R0
0700 64FF           3236             XRL     A,#0FFH
0702 70AC           3237             JNZ     OBUMAIN_WAVEACTIVE_GETBST
0704 08             3238             INC     R0
0705 E6             3239             MOV     A,@R0
0706 64FF           3240             XRL     A,#0FFH
0708 70A6           3241             JNZ     OBUMAIN_WAVEACTIVE_GETBST
070A 08             3242             INC     R0
070B E6             3243             MOV     A,@R0
070C 64FF           3244             XRL     A,#0FFH 
070E 70A0           3245             JNZ     OBUMAIN_WAVEACTIVE_GETBST
                    3246     
                    3247     
0710 C2C4           3248             CLR     Pin_GRE ;ÉèÖÃÂÌµÆÁÁ     
0712                3249     OBUMAIN_WAVEACTIVE_RXBST:
                    3250             ;±íÊ¾ÊÕµ½¹ BST
0712 D200     F     3251             SETB    BIT_BST
0714 C28C           3252             CLR     TR0             ;½ûÖ¹T0
0716 C2A9           3253             CLR     ET0             ;½ûÖ¹T0Ê¹ÄÜ
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    55

                    3254             
                    3255             ;¼ÇÂ¼DSRC½ÓÊÕ³¤¶È
0718 EB             3256             MOV     A,R3
0719 C000           3257             PUSH    AR0
071B 7800     F     3258             MOV     R0,#DATA_DSRCRXLEN
071D F6             3259             MOV     @R0,A
071E D000           3260             POP     AR0
                    3261             
                    3262             ;255 ÃëÏÞÖÆ
                    3263             ;--- ÅÐ¶ÏÉÏ»Ø½»Ò×³É¹¦ºóµÄÌìÏßIDÓë±¾´ÎµÄÊÇ·ñÒ»Ñù£¬Èç¹ûÒ»Ñù£¬Ôò½øÒ»²½ÅÐ¶ÏÊÇ·ñ³¬¹255Ãë
                             µÄÏÞÖÆ ---
0720 7900     F     3264             MOV     R1,#DATA_RXBUF + 8                      ;BeaonID
0722 7800     F     3265             MOV     R0,#XDATA_LastBeaconID                  ;XDATA_BeaconID
0724 7B04           3266             MOV     R3,#4
0726                3267     OBUMAIN_WAVEACTIVE_BeaconID:                            ;ÅÐ¶ÏÌìÏßIDÊÇ·ñÒ»Ñù
                    3268                     ;MOVX   A,@R0
0726 758301         3269             MOV     DPH,#1
0729 8882           3270             MOV     DPL,R0
072B E0             3271             MOVX    A,@DPTR
072C 67             3272             XRL     A,@R1
072D 7012           3273             JNZ     OBUMAIN_WAVEACTIVE_SendVST              ;ÌìÏßID²»Í¬£¬ÔòÏòÏÂÖ´ÐÐ
072F 09             3274             INC     R1
0730 08             3275             INC     R0
0731 DBF3           3276             DJNZ    R3,OBUMAIN_WAVEACTIVE_BeaconID
                    3277             
                    3278             ;ÅÐ¶ÏÁ½´Î½»Ò×¼ä¸ôÊÇ·ñ´óÓÚ CONST_SYS_TradeConfine Ãë
0733 7F00     F     3279             MOV     R7,#XDATA_LastBeaconID+4;XDATA_UnixTime                 ;ÉÏÒ»´Î½»Ò×³É¹¦ºó¼Ç
                             Â¼µÄ unix time       
0735 7D00     F     3280             MOV     R5,#DATA_RXBUF + 12                     ;±¾´Îunix time
0737 7BFF           3281             MOV     R3,#CONST_SYS_TradeConfine              ;ÃëÊ²î
0739 120000   F     3282             CALL    _FUN_LIB_CompareTime
073C 5003           3283             JNC     OBUMAIN_WAVEACTIVE_SendVST              ;ÌìÏßIDÏàÍ¬£¬Ê±¼ä´óÓÚÉÏÏÞ£¬ÔòÏòÏÂÖ´
                             ÐÐ   
073E 020000   F     3284             JMP     AP_start
                    3285             
0741                3286     OBUMAIN_WAVEACTIVE_SendVST:
                    3287             
                    3288             ;---Ö»ÊÇ×ö¿¨Æ¬µÄ »ù±¾ ¸´Î»£¬²»Ô¤´¦Àí(esam ¸´Î»ÐÅÏ¢¿ÉÒÔ²»½ÓÊÕ)
0741 120000   F     3289             CALL    _FUN_LIB_RANDDELAY      ;Ëæ»úÑÓ
0744 EB             3290             MOV     a,r3
0745 7800     F     3291             MOV     r0,#XDATA_VSTDELAY
                    3292             
                    3293             ;MOVX   @R0,A
0747 758301         3294             MOV     DPH,#1
074A 8882           3295             MOV     DPL,R0
074C F0             3296             MOVX    @DPTR,A
                    3297             
                    3298             ;¼Ó 400US
074D 120000   F     3299             CALL    _FUN_DSRC_VST                           ;×éÖ¯VST·¢ËÍÊ¾Ýç·³å
0750 120000   F     3300             CALL    _FUN_HDLC_CHANGECHANNEL                 ;¸Ä·¢ÉäÐÅµÀ
0753 120000   F     3301             CALL    _FUN_HDLC_TX
                    3302             
                    3303             ;CLR    BIT_CKXT
                    3304             ;MOV    A,#34
                    3305             ;CALL   _fun_test_display
                    3306             
0756 200040   F     3307             JB      BIT_INITCard,OBUMAIN_WAVEACTIVE_txone
0759 C2AF           3308             CLR     EA
                    3309             ;---CALL        _Fun_OBUmain_SysUNSleep02
075B E4             3310             CLR     A
075C A200     F     3311             MOV     C,BIT_Cellinfo
075E 92E0           3312             MOV     ACC.0,C
                    3313             ;---CLR BIT_ISCell
0760 C0E0           3314             PUSH    ACC
0762 120000   F     3315             CALL    _Fun_OBUmain_SysUNSleep02
0765 D0E0           3316             POP     ACC
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    56

0767 A2E0           3317             MOV     C,ACC.0
0769 9200     F     3318             MOV     BIT_Cellinfo,C
                    3319             
076B C29C           3320             CLR     REN
076D C2AC           3321             CLR     ES      
                    3322             
                    3323     ;MOV    R7,#1
                    3324     ;CALL   _fun_lib_delay
                    3325             
076F 7800     F     3326             MOV     r0,#XDATA_VSTDELAY      
                    3327                     ;MOVX   A,@R0
0771 758301         3328             MOV     DPH,#1
0774 8882           3329             MOV     DPL,R0
0776 E0             3330             MOVX    A,@DPTR
0777 7005           3331             JNZ     OBUMAIN_WAVEACTIVE_ovdelay
0779 7F01           3332             MOV     R7,#1
077B 120000   F     3333             CALL    _fun_lib_delay
                    3334             ;CALL   _FUN_TEST_DISPLAY
077E                3335     OBUMAIN_WAVEACTIVE_ovdelay:
                    3336             
                    3337             ;É¨esam rx 1MS = 16
077E 7F20           3338             MOV     R7,#32
0780 7EBF           3339             MOV     R6,#191
0782                3340     OBUMAIN_WAVEACTIVE_spanesamrst:
0782 208306         3341             JB      PIN_ESAM_RX,OBUMAIN_WAVEACTIVE_spanesamrstH     
0785 DEFB           3342             djnz    r6,OBUMAIN_WAVEACTIVE_spanesamrst
0787 7EBF           3343             mov     r6,#191
0789 DFF7           3344             djnz    r7,OBUMAIN_WAVEACTIVE_spanesamrst
                    3345             
                    3346             ;--- ESAM Î»Ê§°Ü£¬ÖØ¸´Î»---
                    3347     ;       CLR     PIN_ESAM_RST
                    3348     ;       MOV     R7,#030H                                        ; »ª´ó ESAM ¿¨¸´Î»Òª±È½ÝµÂµ
                             Ä¶Ì
                    3349     ;       CALL    _FUN_LIB_DELAYSIMPLAY
                    3350     ;       SETB    PIN_ESAM_RST
                    3351                     
                    3352     ;       MOV     R7,#3
                    3353     ;       CALL    _FUN_LIB_DELAY
                    3354             
                    3355     ;       JMP     OBUMAIN_WAVEACTIVE_spanesamrstOV
                    3356             
                    3357             ;Îª¸ßºó£¬200US£¬²ÅÈÏÎª¸´Î»Íê³É
078B                3358     OBUMAIN_WAVEACTIVE_spanesamrstH:
                    3359             
078B 7EFE           3360             MOV     R6,#254 
078D                3361     OBUMAIN_WAVEACTIVE_spanesamrstHH:
078D 3083F2         3362             JNB     PIN_ESAM_RX,OBUMAIN_WAVEACTIVE_spanesamrst
                    3363     ;       NOP
                    3364     ;       NOP
                    3365             
                    3366     ;       NOP
                    3367     ;       NOP
                    3368     ;       NOP
                    3369     ;       NOP
                    3370     ;       NOP
                    3371     ;       NOP
                    3372     ;       NOP
                    3373     ;       NOP
                    3374     ;       NOP
                    3375     ;       NOP
0790 7F06           3376             mov     r7,#6
0792 DFFE           3377             djnz    r7,$
0794 DEF7           3378             djnz    r6,OBUMAIN_WAVEACTIVE_spanesamrstHH
                    3379     ;       
                    3380     ;OBUMAIN_WAVEACTIVE_spanesamrstOV:
                    3381     
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    57

                    3382     
                    3383     ;________________________________________________________________________
0796 120000   F     3384             CALL    _FUN_OBUMain_BASEINIT02
0799                3385     OBUMAIN_WAVEACTIVE_txone:
0799 300003   F     3386             jnb     BIT_Cellinfo,OBUMAIN_WAVEACTIVE_txtwo
079C 120000   F     3387             call    GSM_SerialINTRX_RXRight
079F                3388     OBUMAIN_WAVEACTIVE_txtwo:
                    3389             
                    3390             ;»½Åä¼ì²éµÍµçÑ¹ ,Ã»ÓÐº¸±È½ÏÆ÷Ê±£¬Ìø¹
                    3391             ;JMP    OBUMAIN_WAVEACTIVE_VolNormal    
079F D295           3392             setb    PIN_PWR_LOWIO
07A1 00             3393             nop
07A2 00             3394             nop
07A3 00             3395             nop
07A4 00             3396             nop
                    3397             
07A5 209518         3398             JB      PIN_PWR_LOWIO,OBUMAIN_WAVEACTIVE_HDLCTX01OVER
07A8 7F01           3399             mov     R7,#1
07AA 120000   F     3400             call    _fun_lib_delay
07AD 209510         3401             JB      PIN_PWR_LOWIO,OBUMAIN_WAVEACTIVE_HDLCTX01OVER
                    3402             
07B0 120000   F     3403             CALL    _Func_LCD_INIT
                    3404             ;MOV    R7,#250
                    3405             ;CALL   _FUN_LIB_DELAY
07B3 7F00     F     3406             MOV     R7,#DATA_RXBUF
07B5 900000   F     3407             MOV     DPTR,#STR_LOWVo
07B8 120000   F     3408             CALL    _FUN_LCD_DisplayExChina
07BB 7FFA           3409             MOV     R7,#250
07BD 120000   F     3410             CALL    _FUN_LIB_DELAY
07C0                3411     OBUMAIN_WAVEACTIVE_HDLCTX01OVER:
07C0                3412     OBUMAIN_WAVEACTIVE_LOOP:
                    3413             
                    3414             ;½ÓÊÕ DSRC ÐÅºÅ
07C0 7F00     F     3415             MOV     R7,#DATA_RXBUF  
07C2 200008   F     3416             JB      BIT_SETMMI,OBUMAIN_WAVEACTIVE_SETMMIEA
07C5 75A88C         3417             MOV     IE,#10001100b
07C8 120000   F     3418             CALL    _FUN_HDLC_RX
07CB 8006           3419             JMP     OBUMAIN_WAVEACTIVE_NOEAOV
07CD                3420     OBUMAIN_WAVEACTIVE_SETMMIEA:
07CD 75A882         3421             MOV     IE,#10000010B
07D0 120000   F     3422             CALL    _FUN_HDLC_RXSetMMI
07D3                3423     OBUMAIN_WAVEACTIVE_NOEAOV:
                    3424             
                    3425             ;+++CPL pin_gre
                    3426             ;Èç¹û½ÓÊÕµ½µÄÊÇ×¨ÓÃÐÅºÅ£¬ÔòÖØ·¢
07D3 7800     F     3427             MOV     R0,#DATA_RXBUF
07D5 E6             3428             MOV     A,@R0
07D6 64FF           3429             XRL     A,#0FFH
07D8 707A           3430             JNZ     OBUMAIN_WAVEACTIVE_NotBroadCast         ;·Ç¹ã²¥µØÖ·
07DA 08             3431             INC     R0
07DB E6             3432             MOV     A,@R0
07DC 64FF           3433             XRL     A,#0FFH
07DE 7074           3434             JNZ     OBUMAIN_WAVEACTIVE_NotBroadCast         ;·Ç¹ã²¥µØÖ·
07E0 08             3435             INC     R0
07E1 E6             3436             MOV     A,@R0
07E2 64FF           3437             XRL     A,#0FFH
07E4 706E           3438             JNZ     OBUMAIN_WAVEACTIVE_NotBroadCast         ;·Ç¹ã²¥µØÖ·
07E6 08             3439             INC     R0
07E7 E6             3440             MOV     A,@R0
07E8 64FF           3441             XRL     A,#0FFH
07EA 7068           3442             JNZ     OBUMAIN_WAVEACTIVE_NotBroadCast         ;·Ç¹ã²¥µØÖ·
                    3443             
07EC                3444     OBUMAIN_WAVEACTIVE_BroadCast:                           ;¹ã²¥µØÖ·
                    3445             ;½ÓÊÕµ½ N ´Î BST ¾ÍÐÝÃß
07EC 7800     F     3446             MOV     R0,#XDATA_BSTNUM
                    3447                     ;MOVX   A,@R0
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    58

07EE 758301         3448             MOV     DPH,#1
07F1 8882           3449             MOV     DPL,R0
07F3 E0             3450             MOVX    A,@DPTR
07F4 04             3451             INC     A
                    3452                     ;MOVX   @R0,A
07F5 758301         3453             MOV     DPH,#1 
07F8 8882           3454             MOV     DPL,R0 
07FA F0             3455             MOVX    @DPTR,A
07FB 200005   F     3456             JB      BIT_ISRXNB,OBUMAIN_WAVEACTIVE_bst100    
07FE                3457     OBUMAIN_WAVEACTIVE_bst10:
07FE B40800         3458             CJNE    A,#CONST_BSTLIMIT,$+3
0801 8003           3459             JMP     OBUMAIN_WAVEACTIVE_10Ov
0803                3460     OBUMAIN_WAVEACTIVE_bst100:
0803 B46400         3461             CJNE    A,#CONST_BSTLIMIT02,$+3
0806                3462     OBUMAIN_WAVEACTIVE_10Ov:
0806 400E           3463             JC      OBUMAIN_WAVEACTIVE_BroadCastov
0808 300003   F     3464             JNB     BIT_SETMMI,OBUMAIN_WAVEACTIVE_BSTOVER
080B 120000   F     3465             CALL    _FUN_OBUMAIN_PreSleep
080E                3466     OBUMAIN_WAVEACTIVE_BSTOVER:
080E 7F14           3467             mov     r7,#20
0810 120000   F     3468             call    _fun_lib_delay
0813 020000   F     3469             JMP     AP_start
0816                3470     OBUMAIN_WAVEACTIVE_BroadCastov:
                    3471             ;255 ÃëÏÞÖÆ
                    3472             ;--- ÅÐ¶ÏÉÏ»Ø½»Ò×³É¹¦ºóµÄÌìÏßIDÓë±¾´ÎµÄÊÇ·ñÒ»Ñù£¬Èç¹ûÒ»Ñù£¬Ôò½øÒ»²½ÅÐ¶ÏÊÇ·ñ³¬¹255Ãë
                             µÄÏÞÖÆ ---
0816 7900     F     3473             MOV     R1,#DATA_RXBUF + 8                      ;BeaonID
0818 7800     F     3474             MOV     R0,#XDATA_LastBeaconID;XDATA_BeaconID
081A 7B04           3475             MOV     R3,#4
081C                3476     OBUMAIN_WAVEACTIVE_BeaconID2:                           ;ÅÐ¶ÏÌìÏßIDÊÇ·ñÒ»Ñù
                    3477                     ;MOVX   A,@R0
081C 758301         3478             MOV     DPH,#1
081F 8882           3479             MOV     DPL,R0
0821 E0             3480             MOVX    A,@DPTR
0822 67             3481             XRL     A,@R1
0823 7012           3482             JNZ     OBUMAIN_WAVEACTIVE_SendVST2             ;ÌìÏßID²»Í¬£¬ÔòÏòÏÂÖ´ÐÐ
0825 09             3483             INC     R1
0826 08             3484             INC     R0
0827 DBF3           3485             DJNZ    R3,OBUMAIN_WAVEACTIVE_BeaconID2
                    3486             
                    3487             ;ÅÐ¶ÏÁ½´Î½»Ò×¼ä¸ôÊÇ·ñ´óÓÚ CONST_SYS_TradeConfine Ãë
0829 7F00     F     3488             MOV     R7,#XDATA_LastBeaconID + 4;XDATA_UnixTime                       ;ÉÏÒ»´Î½»Ò×
                             ³É¹¦ºó¼ÇÂ¼µÄ unix time       
082B 7D00     F     3489             MOV     R5,#DATA_RXBUF + 12                     ;±¾´Îunix time
082D 7BFF           3490             MOV     R3,#CONST_SYS_TradeConfine              ;ÃëÊ²î
082F 120000   F     3491             CALL    _FUN_LIB_CompareTime
0832 5003           3492             JNC     OBUMAIN_WAVEACTIVE_SendVST2             ;ÌìÏßIDÏàÍ¬£¬Ê±¼ä´óÓÚÉÏÏÞ£¬ÔòÏòÏÂÖ´
                             ÐÐ   
0834 020000   F     3493             jmp     AP_start
0837                3494     OBUMAIN_WAVEACTIVE_SendVST2:
                    3495             ;±íÊ¾ÒÑ¾­ÊÕµ½¹·Ç¹ã²¥µØÖ·£¬Ôò´ËÊ±£¬ÔÙÊÕµ½¹ã²¥Ôò²»×öÏìÓ¦£¬½øÈëÐÝÃß        
0837 200002   F     3496             JB      BIT_ISRXNB,OBUMain_WAVEACTIVE_AgainVST
083A                3497     OBUMAIN_WAVEACTIVE_SLEEP:
                    3498             ;+++ SETB       PIN_GRE 
083A 8084           3499             JMP     OBUMAIN_WAVEACTIVE_LOOP         ; _FUN_OBUMAIN_MASTER
083C                3500     OBUMain_WAVEACTIVE_AgainVST:    
083C                3501     OBUMain_WAVEACTIVE_AgainVSTCON: 
083C                3502     OBUMain_WAVEACTIVE_PPS:
                    3503             
083C 120000   F     3504             CALL    _FUN_LIB_RANDDELAY                              ; Ëæ»úÑÓÊ±
083F 120000   F     3505             CALL    _FUN_DSRC_VST                                   ;×éÖ¯VST·¢ËÍÊ¾Ýç·³å
0842 120000   F     3506             CALL    _FUN_HDLC_CHANGECHANNEL         ;¸Ä·¢ÉäÐÅµÀ
0845 120000   F     3507             CALL    _FUN_HDLC_TX
                    3508             
0848 300006   F     3509             JNB     BIT_Cellinfo,OBUMAIN_WAVEACTIVE_txtwo02
084B 200003   F     3510             JB      BIT_HaveRecordCellID,OBUMAIN_WAVEACTIVE_txtwo02;ÒÑ¾­¼ÇÂ¼µÄ£¬Ôò²»ÔÙ¼ÇÂ¼
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    59

084E 120000   F     3511             CALL    GSM_SerialINTRX_RXRight
                    3512             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0851                3513     OBUMAIN_WAVEACTIVE_txtwo02:
0851 020000   F     3514             JMP     OBUMAIN_WAVEACTIVE_LOOP                         ;ÖØÐÂµÈ´½ÓÊÕDSRCÊ¾Ý
                    3515             
0854                3516     OBUMAIN_WAVEACTIVE_NotBroadCast:                                ;·Ç¹ã²¥µØÖ·
                    3517             ;ÅÐ¶Ïµ±Ç°Í¨Ñ¶ÊÇ·ñÕë¶Ô±¾OBU,Èç¹û²»ÊÇ£¬ÔòÖØÐÂ½ÓÊÕDSRCÐÅºÅ
0854 7800     F     3518             MOV     R0,#DATA_RXBUF
0856 7900     F     3519             MOV     R1,#DATA_OBUID
0858 E6             3520             MOV     A,@R0
0859 67             3521             XRL     A,@R1
085A 6003           3522             JZ      OBUMAIN_WAVEACTIVE_BroadCast00
085C 020000   F     3523             JMP     OBUMAIN_WAVEACTIVE_LOOP
085F                3524     OBUMAIN_WAVEACTIVE_BroadCast00:         
085F 08             3525             INC     R0
0860 09             3526             INC     R1
0861 E6             3527             MOV     A,@R0
0862 67             3528             XRL     A,@R1
0863 6003           3529             JZ      OBUMAIN_WAVEACTIVE_BroadCast01
0865 020000   F     3530             JMP     OBUMAIN_WAVEACTIVE_LOOP
0868                3531     OBUMAIN_WAVEACTIVE_BroadCast01:         
0868 08             3532             INC     R0
0869 09             3533             INC     R1
086A E6             3534             MOV     A,@R0
086B 67             3535             XRL     A,@R1   
086C 6003           3536             JZ      OBUMAIN_WAVEACTIVE_BroadCast02
086E 020000   F     3537             JMP     OBUMAIN_WAVEACTIVE_LOOP
0871                3538     OBUMAIN_WAVEACTIVE_BroadCast02:                 
0871 08             3539             INC     R0
0872 09             3540             INC     R1
0873 E6             3541             MOV     A,@R0
0874 67             3542             XRL     A,@R1
0875 6003           3543             JZ      OBUMAIN_WAVEACTIVE_BroadCast03
0877 020000   F     3544             JMP     OBUMAIN_WAVEACTIVE_LOOP
087A                3545     OBUMAIN_WAVEACTIVE_BroadCast03:                 
087A 7800     F     3546             MOV     R0,#XDATA_BSTNUM
087C E4             3547             CLR     A
                    3548                     ;MOVX   @R0,A
087D 758301         3549             MOV     DPH,#1 
0880 8882           3550             MOV     DPL,R0 
0882 F0             3551             MOVX    @DPTR,A
                    3552             ;+++ SETB       pin_gre
0883 7900     F     3553             MOV     R1,#DATA_RXBUF + CONST_DSRC_LLCCTRL     ;È¡LLC¿ØÖÆÓòÊ¾Ý
0885 E7             3554             MOV     A,@R1
                    3555             
0886 300026   F     3556             JNB     BIT_ISRXNB,OBUMAIN_WAVEACTIVE_SecondRX  ;=1 ±íÊ¾Î´ÊÕµ½¹·Ç¹ã²¥µØÖ· =0 ±íÊ¾ÒÑ
                             ¾­ÊÕµ½¹·Ç¹ã²¥µØÖ·
0889                3557     OBUMAIN_WAVEACTIVE_FristRX:     ;µÚÒ»´ÎÊÕµ½·Ç¹ã²¥µØÖ·
0889 C200     F     3558             CLR     BIT_ISRXNB
088B A2E7           3559             MOV     C,ACC.7
088D 9200     F     3560             MOV     BIT_N,C         ;¼ÇÂ¼NÎ»
                    3561             
                    3562             ;--- Ð´ÈëÔ¤´¦Àí³É¹¦±ê¼Ç02 --- 
088F 7800     F     3563             MOV     R0,#XDATA_TXBUF
0891 7455           3564             MOV     A,#CONST_SYS_55
                    3565                     ;MOVX   @R0,A
0893 758301         3566             MOV     DPH,#1 
0896 8882           3567             MOV     DPL,R0 
0898 F0             3568             MOVX    @DPTR,A
0899 08             3569             INC     R0
                    3570                     ;MOVX   @R0,A
089A 758301         3571             MOV     DPH,#1 
089D 8882           3572             MOV     DPL,R0 
089F F0             3573             MOVX    @DPTR,A                 
08A0 758372         3574             MOV     DPH,#CONST_FALSH_PREFlag02H
08A3 7582F5         3575             MOV     DPL,#CONST_FALSH_PREFlag02L
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    60

08A6 7F00     F     3576             MOV     R7,#XDATA_TXBUF
08A8 7B02           3577             MOV     R3,#2
08AA 120000   F     3578             CALL    _wrflashXR      
                    3579             
08AD 803B           3580             JMP     OBUMAIN_WAVEACTIVE_ActionType
08AF                3581     OBUMAIN_WAVEACTIVE_SecondRX:                                            ;µÚ¶þ´ÎÊÕµ½·Ç¹ã²¥µØ
                             Ö·
08AF 7800     F     3582             MOV     R0,#DATA_RXBUF + CONST_DSRC_ACTION                      ;ActionType;È¡LLC¿Ø
                             ÖÆÓòÊ¾Ý
08B1 E6             3583             MOV     A,@R0
                    3584             
08B2 6460           3585             XRL     A,#60H
08B4 700E           3586             JNZ     OBUMAIN_WAVEACTIVE_ZC01
                    3587     
08B6 7800     F     3588             MOV     R0,#DATA_RXBUF + 9;CONST_DSRC_ACTIONTYPE                        ;ActionType
                             ;È¡LLC¿ØÖÆÓòÊ¾Ý      
08B8 E6             3589             MOV     A,@R0
08B9 7009           3590             JNZ     OBUMAIN_WAVEACTIVE_ZC01
08BB 200003   F     3591             JB      BIT_SETMMI,OBUMAIN_WAVEACTIVE_OVERZZ
08BE 020000   F     3592             JMP     AP_start
08C1                3593     OBUMAIN_WAVEACTIVE_OVERZZ:                                              ;ÊÕµ½SETMMI£¬ÊÕµ½Ev
                             ent
08C1 020000   F     3594             JMP     OBUMAIN_WAVEACTIVE_OVER
08C4                3595     OBUMAIN_WAVEACTIVE_ZC01:        
08C4 7900     F     3596             MOV     R1,#DATA_RXBUF + CONST_DSRC_LLCCTRL     ;È¡LLC¿ØÖÆÓòÊ¾Ý
08C6 E7             3597             MOV     A,@R1   
08C7 30E705         3598             JNB     ACC.7,OBUMAIN_WAVEACTIVE_NBITLOW
08CA                3599     OBUMAIN_WAVEACTIVE_NBITHIGH:
08CA 30001B   F     3600             JNB     BIT_N,OBUMAIN_WAVEACTIVE_NBITOVER
08CD 8003           3601             JMP     OBUMAIN_WAVEACTIVE_DSRCSENDOLD
08CF                3602     OBUMAIN_WAVEACTIVE_NBITLOW:
08CF 200016   F     3603             JB      BIT_N,OBUMAIN_WAVEACTIVE_NBITOVER
08D2                3604     OBUMAIN_WAVEACTIVE_DSRCSENDOLD:                                         ;NÎ»Ã»ÓÐ¸Ä±äÊ±£¬ÖØ·
                             ¢DSRCÊ¾Ý     
08D2 7F00           3605     mov r7,#0
08D4 DFFE           3606     djnz r7,$       ;43us
08D6 DFFE           3607     djnz r7,$       ;43us   
08D8 B2C5           3608             CPL     PIN_RED 
                    3609             ;--- ÖØ·¢ DSRC ÐÅºÅ ---
08DA 7F00     F     3610             MOV     R7,#XDATA_TXBUF
08DC 7800     F     3611             MOV     R0,#DATA_DSRCTXLEN
08DE E6             3612             MOV     A,@R0
08DF FB             3613             MOV     R3,A    
08E0                3614     OBUMAIN_WAVEACTIVE_NOSETMMI:
08E0 C2AF           3615             CLR     EA      
08E2 120000   F     3616             CALL    _FUN_HDLC_TX
08E5                3617     OBUMAIN_WAVEACTIVE_NOEAOV01:    
08E5 020000   F     3618             JMP     OBUMAIN_WAVEACTIVE_LOOP                                 ;»Øµ½DSRCÐÅºÅÑ­»·´¦
                             ÀíÁ÷³Ì               
08E8                3619     OBUMAIN_WAVEACTIVE_NBITOVER:                                            ;NÎ»ÓÐ¸Ä±äÊ±£¬Ö´ÐÐÐ
                             ÂÖ¸Áî        
08E8 B200     F     3620             CPL     BIT_N                                                   ;¼ÇÂ¼NÎ»        
08EA                3621     OBUMAIN_WAVEACTIVE_ActionType:  
08EA 7800     F     3622             MOV     R0,#DATA_RXBUF + CONST_DSRC_ACTIONTYPE                  ;ActionType;È¡LLC¿Ø
                             ÖÆÓòÊ¾Ý
08EC E6             3623             MOV     A,@R0   
08ED B4003C         3624             CJNE    A,#Const_ActionType_GetSecure,OBUMAIN_WAVEACTIVE_SetSecure      
08F0                3625     OBUMAIN_WAVEACTIVE_GetSecure:;(ÈÏÖ¤)    
                    3626             ;+++ SETB       Pin_GRE                                                 ;ÊÕµ½GetSec
                             ureÃðÂÌµÆ
08F0 300034   F     3627             JNB     BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_Selected      ; µ±ÓÃ»§¿¨¸´Î»Ã»ÓÐ³É¹¦Ê±£¬²
                             »¶ÔÓÃ»§¿¨×öÑ¡Ä¿Â¼²Ù×÷
08F3 200003   F     3628             JB      BIT_ISContact,OBUMAIN_WAVEACTIVE_Select1001     ; Èç¹ûÊÇ½Ó´¥¿¨£¬ÔòÑ¡ 1001£¬
                             Èç¹ûÊÇ·Ç½Ó¿¨£¬ÔòPro¿¨²ÅÑ¡1001
08F6 30002E   F     3629             JNB     BIT_proMF,OBUMAIN_WAVEACTIVE_Selected   
08F9                3630     OBUMAIN_WAVEACTIVE_Select1001:  
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    61

08F9 7F00     F     3631             MOV     R7,#XDATA_HOLD
08FB 7D00     F     3632             MOV     R5,#DATA_RXBUF
08FD 7B07           3633             MOV     R3,#7
08FF 120000   F     3634             CALL    _FUN_LIB_DATATOXDATA    
0902                3635     OBUMAIN_WAVEACTIVE_Se1001PPS:   
0902 C200     F     3636             CLR     BIT_GETRESULT
0904 D200     F     3637             SETB    BIT_ESAMICC
0906 7F00     F     3638             MOV     R7,#DATA_RXBUF
0908 7D00     F     3639             MOV     R5,#XDATA_TXBUF
090A 7B10           3640             MOV     R3,#10H
090C 7A01           3641             MOV     R2,#01H
090E 120000   F     3642             CALL    _FUN_CARDAPP_SelectFile
0911 EF             3643             MOV     A,R7
0912 6008           3644             JZ      OBUMAIN_WAVEACTIVE_Se1001ED     
0914 7409           3645             MOV     A,#CONST_STATE_GetSecureSelFileEr
0916 120000   F     3646             CALL    _FUN_OBUMAIN_ErrShow    
0919 020000   F     3647             JMP     AP_start
                    3648             
091C                3649     OBUMAIN_WAVEACTIVE_Se1001ED:    
091C D200     F     3650             SETB    BIT_Sel1001
091E 7F00     F     3651             MOV     R7,#XDATA_HOLD
0920 7D00     F     3652             MOV     R5,#DATA_RXBUF
0922 7B07           3653             MOV     R3,#7
0924 120000   F     3654             CALL    _FUN_LIB_XDATATODATA    
0927                3655     OBUMAIN_WAVEACTIVE_Selected:
0927 120000   F     3656             CALL    _FUN_DSRC_NSpecial
092A 8065           3657             JMP     OBUMAIN_WAVEACTIVE_DESL
092C                3658     OBUMAIN_WAVEACTIVE_SetSecure:;SET_Secure        
092C B40102         3659             CJNE    A,#Const_ActionType_SetSecure,OBUMAIN_WAVEACTIVE_GetRand
092F 8060           3660             JMP     OBUMAIN_WAVEACTIVE_DESL 
0931                3661     OBUMAIN_WAVEACTIVE_GetRand:;(È¡Ëæ»úÊ)   
0931 B40202         3662             CJNE    A,#Const_ActionType_GetRand,OBUMAIN_WAVEACTIVE_TransferChannel
0934 805B           3663             JMP     OBUMAIN_WAVEACTIVE_DESL 
0936                3664     OBUMAIN_WAVEACTIVE_TransferChannel:;(Í¨µÀ)
0936 B4033D         3665             CJNE    A,#Const_ActionType_TransferChannel,OBUMAIN_WAVEACTIVE_SetMMI
                    3666             
0939 30002C   F     3667             JNB     BIT_INSERTCARD,OBUMAIN_WAVEACTIVE_TransferSelected              ; µ±ÓÃ»§¿¨¸
                             ´Î»Ã»ÓÐ³É¹¦Ê±£¬²»¶ÔÓÃ»§¿¨×öÑ¡Ä¿Â¼²Ù×÷
093C 200003   F     3668             JB      BIT_ISContact,OBUMAIN_WAVEACTIVE_TransferSel1001        ; Èç¹ûÊÇ½Ó´¥¿¨£¬ÔòÑ
                             ¡ 1001£¬Èç¹ûÊÇ·Ç½Ó¿¨£¬ÔòPro¿¨²ÅÑ¡1001
093F 300026   F     3669             JNB     BIT_proMF,OBUMAIN_WAVEACTIVE_TransferSelected
0942                3670     OBUMAIN_WAVEACTIVE_TransferSel1001:
0942 200023   F     3671             JB      BIT_Sel1001,OBUMAIN_WAVEACTIVE_TransferSelected 
                    3672             
0945 7F00     F     3673             MOV     R7,#XDATA_HOLD
0947 7D00     F     3674             MOV     R5,#DATA_RXBUF
0949 7B07           3675             MOV     R3,#7
094B 120000   F     3676             CALL    _FUN_LIB_DATATOXDATA
                    3677     
094E C200     F     3678             CLR     BIT_GETRESULT
0950 D200     F     3679             SETB    BIT_ESAMICC
0952 7F00     F     3680             MOV     R7,#DATA_RXBUF
0954 7D00     F     3681             MOV     R5,#XDATA_TXBUF
0956 7B10           3682             MOV     R3,#10H
0958 7A01           3683             MOV     R2,#01H
095A 120000   F     3684             CALL    _FUN_CARDAPP_SelectFile
095D D200     F     3685             SETB    BIT_Sel1001     
095F                3686     OBUMAIN_WAVEACTIVE_TransferChannelSELOV:        
095F 7F00     F     3687             MOV     R7,#XDATA_HOLD
0961 7D00     F     3688             MOV     R5,#DATA_RXBUF
0963 7B07           3689             MOV     R3,#7
0965 120000   F     3690             CALL    _FUN_LIB_XDATATODATA
0968                3691     OBUMAIN_WAVEACTIVE_TransferSelected:
0968 7800     F     3692             MOV     R0,#DATA_RXBUF+11
096A E6             3693             MOV     A,@R0
096B 6402           3694             XRL     A,#2
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    62

096D 7002           3695             JNZ     OBUMAIN_WAVEACTIVE_TransferPPS02
096F D200     F     3696             SETB    BIT_esamtran
                    3697             
0971                3698     OBUMAIN_WAVEACTIVE_TransferPPS02:
0971 120000   F     3699             CALL    _FUN_DSRC_NSpecial
0974 801B           3700             JMP     OBUMAIN_WAVEACTIVE_DESL
                    3701             
0976                3702     OBUMAIN_WAVEACTIVE_SetMMI:;(ÏìÁå)
0976 B40410         3703             CJNE    A,#Const_ActionType_SetMMI,OBUMAIN_WAVEACTIVE_SWGSM
0979 7800     F     3704             MOV     R0,#DATA_RXBUF+11
097B E6             3705             MOV     A,@R0
097C 7900     F     3706             MOV     R1,#XDATA_SETMMI
                    3707                     ;MOVX   @R1,A
097E 758301         3708             MOV     DPH,#1
0981 8982           3709             MOV     DPL,R1
0983 F0             3710             MOVX    @DPTR,A 
0984 120000   F     3711             CALL    _FUN_DSRC_NSpecial
0987 8008           3712             JMP     OBUMAIN_WAVEACTIVE_DESL 
0989                3713     OBUMAIN_WAVEACTIVE_SWGSM:;
0989 B45105         3714             CJNE    A,#81,OBUMAIN_WAVEACTIVE_DESL
098C 120000   F     3715             CALL    _FUN_DSRC_NSpecial
                    3716             
098F 8000           3717             JMP     OBUMAIN_WAVEACTIVE_DESL
0991                3718     OBUMAIN_WAVEACTIVE_Other:;(±£Áô)ss      
0991                3719     OBUMAIN_WAVEACTIVE_DESL:        
0991                3720     OBUMAIN_WAVEACTIVE_Response:
                    3721             
                    3722             ;---  ·¢ËÍDSRCÐÅºÅ ---  
0991 120000   F     3723             CALL    _FUN_HDLC_TX    
0994 300003   F     3724             JNB     BIT_SETMMI,OBUMAIN_WAVEACTIVE_NOEA02x   
0997 120000   F     3725             CALL    _FUN_OBUMain_TIMERX
099A                3726     OBUMAIN_WAVEACTIVE_NOEA02x:             
                    3727             ;---JB  BIT_SETMMI,OBUMAIN_WAVEACTIVE_OVER
099A 020000   F     3728             JMP     OBUMAIN_WAVEACTIVE_LOOP                                 ; ÖØÐÂµÈ´½ÓÊÕDSRCÊ¾
                             Ý    
099D                3729     OBUMAIN_WAVEACTIVE_OVER:                                                ; Î¢²¨¼¤»îÁ÷³Ì½áÊø 
                                  
099D C28C           3730             CLR     TR0             ;¹Ø±ÕT0
099F C2A9           3731             CLR     ET0             ;¹Ø±ÕT0Ê¹ÄÜ
09A1 C2AF           3732             CLR     EA              
09A3 120000   F     3733             CALL    _FUN_HDLC_CLOSECLR
                    3734     
                    3735             ;--- Çå³Flash ---
09A6 758372         3736             MOV     DPH,#CONST_FLASH_SYSINFOH
09A9 758200         3737             MOV     DPL,#CONST_FLASH_SYSINFOL
09AC 7B01           3738             MOV     R3,#1
09AE 120000   F     3739             CALL    _eraseflash     
                    3740             ;--- Èç¹û½»Ò×³É¹¦¾Í¼ÇÂ¼ÌìÏßID ---
09B1 30000D   F     3741             JNB     BIT_SetMMI,OBUMAIN_WAVEACTIVE_predeal   
                    3742             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
09B4 758372         3743             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
09B7 7582EC         3744             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
09BA 7F00     F     3745             MOV     R7,#XDATA_BeaconID
09BC 7B08           3746             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen
09BE 120000   F     3747             CALL    _wrflashXR
09C1                3748     OBUMAIN_WAVEACTIVE_predeal:     
09C1 120000   F     3749             CALL    OBUMain_CARDPreDeal_ReadSysInfo                         ;¼ò»¯°æÔ¤¶Á        
                                  
                    3750     
09C4                3751     OBUMAIN_WAVEACTIVE_display:
09C4 C285           3752             clr     PIN_ESAM_RST    
09C6 C284           3753             clr     Pin_522_RST
09C8 D2A4           3754             SETB    Pin_pwrdwn
09CA 120000   F     3755             CALL    _FUN_OBUMain_CardInfoDisplay                            ; ÏÔÊ¾¿¨ÐÅÏ¢    
                    3756             ;--- RC522ºÍÖ÷µ¥Æ¬»úÏÂµç() ---  
09CD                3757     OBUMAIN_WAVEACTIVE_END:
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    63

                    3758             ;-------ÖØÐÂ¿ªÊ¼Ç°ÑÓÊ±ÏÔÊ¾------------  
09CD 7FFA           3759             MOV     R7,#250
09CF 120000   F     3760             CALL    _FUN_LIB_DELAY  
09D2 7FFA           3761             MOV     R7,#250
09D4 120000   F     3762             CALL    _FUN_LIB_DELAY  
09D7 7FFA           3763             MOV     R7,#250
09D9 120000   F     3764             CALL    _FUN_LIB_DELAY  
09DC 7FFA           3765             MOV     R7,#250
09DE 120000   F     3766             CALL    _FUN_LIB_DELAY  
09E1 020000   F     3767             JMP     AP_start
09E4 80E7           3768             JMP     OBUMAIN_WAVEACTIVE_END
09E6 22             3769             RET     
                    3770     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////
                    3771     ;------------------------------------
                    3772     ;ÃèÊö:ÏµÍ³³õÊ¼»¯
                    3773     ;²ÎÊ:(ÎÞ)
                    3774     ;------------------------------------
09E7                3775     _FUN_OBUMAIN_INITSYS:   
                    3776             ;--- Çå¿ÕËùÓÐ¼Ä´æÆ÷ ---
09E7 E4             3777             CLR     A
09E8 75D000         3778             MOV     PSW,#CONST_WORKSTAION_0 
                    3779             ;ÉèÖÃµ±Ç°PSW²Ù×÷¹¤×÷Çø0
09EB C2D3           3780             CLR     RS0
09ED C2D4           3781             CLR     RS1     
09EF F5B8           3782             MOV     IP,A
                    3783                     
09F1 F587           3784             MOV     PCON,A
09F3 F598           3785             MOV     SCON,A
                    3786             
09F5 F58D           3787             MOV     TH1,A
09F7 F58B           3788             MOV     TL1,A
09F9 F58C           3789             MOV     TH0,A
09FB F58A           3790             MOV     TL0,A
09FD F5B8           3791             MOV     IP,A
                    3792             
09FF C200     F     3793             CLR     BIT_FIRSTTX                                             ; Ó²´®¿Ú·¢ËÍµÚÒ»¸ö×
                             Ö½Ú±ê¼Ç=0±íÊ¾»¹Ã»·¢ËÍµÚÒ»¸ö×Ö½Ú£¬=1±íÊ¾ÒÑ·¢ËÍ                        
0A01 C200     F     3794             CLR     BIT_CHANNELFLAG                                         ; = 1±íÊ¾µ±Ç°Ê¹ÓÃÐÅ
                             µÀ1,  =0 ±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ0
0A03 D200     F     3795             SETB    BIT_9600                                                ; =1µ±Ç°²¨ÌØÂÊÊÇ960
                             0;=0µ±Ç°²¨ÌØÂÊ²»ÊÇ9600               
0A05 C200     F     3796             CLR     BIT_T0T1                                                ; T0»¹ÊÇT1
0A07 D200     F     3797             SETB    BIT_ESAMICC                                             ; ÊÇÓÃ»§¿¨£¬»¹ÊÇESA
                             M¿¨
0A09 C200     F     3798             CLR     BIT_INSERTCARD                                          ; Î´²å¿¨
0A0B C200     F     3799             CLR     BIT_ISFRX                                               ; =0 ±íÊ¾´®¿ÚµÚÒ»¸ö
                             ×Ö½Ú½ÓÊÕ     =1 ±íÊ¾µÚÒ»¸ö×Ö½Ú²»½ÓÊÕ         
0A0D D200     F     3800             SETB    BIT_ISRXNB                                              ; =1 ±íÊ¾Î´ÊÕµ½¹·Ç¹
                             ã²¥µØÖ·      =0 ±íÊ¾ÒÑ¾­ÊÕµ½¹·Ç¹ã²¥µØÖ·      
0A0F C200     F     3801             CLR     BIT_SETMMI                                              ; =0 ±íÃ»ÓÐÊÕµ½¹Set
                             MMI,         =1 SetMMI       
0A11 D200     F     3802             SETB    BIT_ESAM                                                ; =1 ±íÊ¾ÓÐESAM =0 
                             ±íÊ¾Ã»ÓÐESAM¿¨       
0A13 C200     F     3803             CLR     BIT_PROF                                                ; Pro¿¨·¢ËÍÐòºÅ = 0
                              ±íÊ¾0A ;= 1 ±íÊ¾0B
0A15 C200     F     3804             CLR     BIT_proMF                                               ; =1 ±íÊ¾ÊÇpro¿¨£¬=
                             0±íÊ¾£¬MF¿¨
0A17 C200     F     3805             CLR     BIT_GetSecure                                           ; =1±íÊ¾ÊÕµ½GetSecu
                             reÖ¸Áî£¬=0±íÊ¾Ã»ÓÐÊÕµ½GetSecure
0A19 C200     F     3806             CLR     BIT_BST                                                 ; =1±íÊ¾ÊÕµ½¹bst,=0
                             ±íÊ¾Ã»ÓÐÊÕµ½¹bst             
                    3807             ;CLR    BIT_ContactIssue                                        ;·¢ÐÐ¿ªÊ¼±ê¼Ç   =0£
                             ¬Ã»ÓÐ½ÓÊÕ·¢ÐÐÐÅÏ¢£¬=1½ÓÊÕµ½·¢ÐÐÐÅÏ¢
0A1B C200     F     3808             CLR     BIT_gbICCInfo
                    3809             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    64

0A1D C200     F     3810             CLR     BIT_HaveRecordCellID
0A1F C200     F     3811             CLR     BIT_privateInfo
0A21 C200     F     3812             CLR     BIT_CD                                                  ;=0±íÊ¾Î´±»²ð¶¯£¬=1
                              ±»²ð¶¯      
0A23 C200     F     3813             CLR     BIT_ACTIVECARD                                          ;=0 ·Ç²å¿¨¼¤»î;=1 ²
                             å¿¨¼¤»î
0A25 C200     F     3814             CLR     BIT_CDJH
0A27 C200     F     3815             CLR     BIT_ESAMOK
0A29 D200     F     3816             SETB    BIT_InsertEr
0A2B C200     F     3817             CLR     BIT_PPS 
0A2D C200     F     3818             CLR     BIT_ESAMErr
0A2F C200     F     3819             CLR     BIT_MMITIRMSTART
0A31 C200     F     3820             CLR     BIT_esamtran
0A33 C200     F     3821             CLR     BIT_Sel1001
0A35 C200     F     3822             CLR     BIT_USEROK
                    3823             
0A37 7800     F     3824             MOV     R0,#DATA_VARBAUDFULL
0A39 76B3           3825             MOV     @R0,#CONST_BAUD_FULL9600        
0A3B 7800     F     3826             MOV     R0,#DATA_VARBAUDHALF
0A3D 7658           3827             MOV     @R0,#CONST_BAUD_HALF9600
0A3F 7FA3           3828             MOV     R7,#CONST_BAUD_HAND9600                                 ;²¨ÌØÂÊ³õÖµ     
0A41 D200     F     3829             SETB    BIT_VERIFY                                              ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑé
                             Î»,=0²»Òª£¬=1Òª              
0A43 120000   F     3830             CALL    _FUN_SERIAL_INIT                                        ;´®¿ÚÏà¹Ø¼Ä´æÆ÷³õÊ¼
                             »¯   
0A46 7800     F     3831             MOV     R0,#XDATA_SOFTFIRSTSCANTIME
0A48 7410           3832             MOV     A,#CONST_SOFTFIRSTSCANTIME
                    3833                     ;MOVX   @R0,A
0A4A 758301         3834             MOV     DPH,#1 
0A4D 8882           3835             MOV     DPL,R0 
0A4F F0             3836             MOVX    @DPTR,A                                                 ;´®¿ÚµÚÒ»¸ö×Ö½Ú×î´ó
                             ËÑË÷Ê±¼ä     
0A50 7800     F     3837             MOV     R0,#XDATA_SETMMI
0A52 E4             3838             CLR     A
                    3839                     ;MOVX   @R0,A
0A53 758301         3840             MOV     DPH,#1 
0A56 8882           3841             MOV     DPL,R0 
0A58 F0             3842             MOVX    @DPTR,A 
0A59 7800     F     3843             MOV     R0,#XDATA_BSTNUM                                        ;½ÓÊÕµ½BSTµÄ¸öÊ
0A5B E4             3844             CLR     A
                    3845                     ;MOVX   @R0,A
0A5C 758301         3846             MOV     DPH,#1 
0A5F 8882           3847             MOV     DPL,R0 
0A61 F0             3848             MOVX    @DPTR,A 
0A62 7800     F     3849             MOV     R0,#xdata_setmminum                                     ;½ÓÊÕµ½BSTµÄ¸öÊ
0A64 E4             3850             CLR     A
                    3851                     ;MOVX   @R0,A
0A65 758301         3852             MOV     DPH,#1 
0A68 8882           3853             MOV     DPL,R0 
0A6A F0             3854             MOVX    @DPTR,A
0A6B E4             3855             CLR     A
0A6C 7800     F     3856             MOV     R0,#XDATA_VSTNUM
                    3857                     ;MOVX   @R0,A
0A6E 758301         3858             MOV     DPH,#1 
0A71 8882           3859             MOV     DPL,R0 
0A73 F0             3860             MOVX    @DPTR,A
                    3861             ;¿´ÖØ·¢ÓÃ
0A74 7800     F     3862             MOV     R0,#XDATA_NUM
0A76 7400           3863             MOV     A,#0
                    3864                     ;MOVX   @R0,A
0A78 758301         3865             MOV     DPH,#1 
0A7B 8882           3866             MOV     DPL,R0 
0A7D F0             3867             MOVX    @DPTR,A
                    3868             
0A7E 750000   F     3869             MOV     DATA_MFCOM,#0
                    3870             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    65

0A81 22             3871             RET
                    3872     ;----------------------------------------------------------------------------------
                    3873     ;ÃèÊö:Ïà¹ØµÄÓ¦ÓÃ³õÊ¼»¯
                    3874     ;²ÎÊ:
                    3875     ;
                    3876     ;BIT_ACTIVE     ---     =1 Î¢²¨¼¤»îÊ±µÄÓ¦ÓÃ³õÊ¼»¯; =0 ²å¿¨¼¤»îÊ±µÄÓ¦ÓÃ³õÊ¼»¯ 
                    3877     ;                       =0 ESAM DF01 ÎÄ¼þ²»Ñ¡
                    3878     ;                       =1 ESAM DF01 ÎÄ¼þÒªÑ¡
                    3879     ;
                    3880     ;²½Öè:
                    3881     ;               read last card type
                    3882     ;                       |
                    3883     ;               init esma
                    3884     ;                       |
                    3885     ;               [if IsContact = contact] jmp init cpu contact   Else jmp init not contact
                    3886     ;                       |
                    3887     ;               init cpu contact - err - >jmp init not contact sec--err->ÏÔÊ¾ÎÞ¿¨²¢ÖÃ²å¿¨±ê
                             ¼ÇÎªÎÞ                                                                               
                    3888     ;               init not contact - err - >jmp init cpu contact sec--err->ÏÔÊ¾ÎÞ¿¨²¢ÖÃ²å¿¨±ê
                             ¼ÇÎªÎÞ
                    3889     ;                       |(ini ok)
                    3890     ;                       |
                    3891     ;               [if IsContact = Contact ]       -> pps(²»½Ó·µ»Ø)
                    3892     ;                       |
                    3893     ;               (change baud)
                    3894     ;                       |
                    3895     ;               Select DF01
                    3896     ;                       |
                    3897     ;               [if not mf] -> Select 1001
                    3898     ;----------------------------------------------------------------------------------
0A82                3899     _FUN_OBUMain_BASEINIT:
0A82 C200     F     3900             clr     BIT_INSERTCARD
0A84 C200     F     3901             CLR     BIT_BUFADDR
                    3902             ;¶ÁÈ¡   OBUID
0A86 90002F         3903             MOV     DPTR,#STR_SYS_OBUID
0A89 7F00     F     3904             MOV     R7,#DATA_OBUID
0A8B 120000   F     3905             CALL    _FUN_LIB_FLASHTODATA
                    3906             ;¶ÁÈ¡System Info ²ðÐ¶Î»(µÚ27¸ö×Ö½Ú)
                    3907             ;·ÅÔÚÕâÀï¶Á£¬ÖØÒªµÄÔ­ÒòÊÇ£¬ÉÏµçÊ±ÐèÑÓÊ±£¬ËùÒÔ¿ÉÒÔÊ¡Ê±¡£
0A8E 758372         3908             MOV     DPH,#CONST_FLASH_SYSINFOH
0A91 75821A         3909             MOV     DPL,#CONST_FLASH_SYSINFOL + 26
0A94 750700   F     3910             MOV     AR7,#XDATA_FIX
0A97 7B01           3911             MOV     R3,#1
0A99 120000   F     3912             CALL    _RDFlashXR      
                    3913             
0A9C 7900     F     3914             MOV     R1,#XDATA_FIX
                    3915                     ;MOVX   A,@R1
0A9E 758301         3916             MOV     DPH,#1
0AA1 8982           3917             MOV     DPL,R1
0AA3 E0             3918             MOVX    A,@DPTR
0AA4 540F           3919             ANL     A,#0FH
                    3920             
0AA6 6004           3921             JZ      OBUMain_BASEINIT_Tampered
0AA8 C200     F     3922             CLR     BIT_CD
0AAA 8002           3923             JMP     OBUMain_BASEINIT_TamperedOver
                    3924             
0AAC                3925     OBUMain_BASEINIT_Tampered:      
0AAC D200     F     3926             SETB    BIT_CD
0AAE                3927     OBUMain_BASEINIT_TamperedOver:
                    3928             ;¶ÁÈ¡ÉÏ»ØÌìÏßIDºÍunixtime 
0AAE 758372         3929             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
0AB1 7582EC         3930             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
0AB4 750700   F     3931             MOV     AR7,#XDATA_LastBeaconID
0AB7 7B08           3932             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen
0AB9 120000   F     3933             CALL    _RDFlashXR      
                    3934             ;--- ´Ó Flash ÖÐ¶ÁÈ¡ÉÏÒ»´Î²å¿¨ÀàÐÍ ---
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    66

                    3935             ;½Ó´¥¿¨ »¹ÊÇ ·Ç½Ó´¥¿¨
                    3936             ;CONST_FLASH_LASTCARDH
0ABC 758372         3937             MOV     DPH,#CONST_FLASH_LASTCARDH
0ABF 7582EB         3938             MOV     DPL,#CONST_FLASH_LASTCARDL
0AC2 750700   F     3939             MOV     AR7,#DATA_RXBUF
0AC5 7B01           3940             MOV     R3,#1
0AC7 120000   F     3941             CALL    _RDFlash
0ACA 7800     F     3942             MOV     R0,#DATA_RXBUF
0ACC E6             3943             MOV     A,@R0
0ACD A2E0           3944             MOV     C,ACC.0
0ACF 9200     F     3945             MOV     BIT_ISContact,C ;½Ó´¥¿¨=1£¬»¹ÊÇ·Ç½Ó´¥¿¨=0                       
0AD1 C200     F     3946             CLR     BIT_ISContact
0AD3                3947     OBUMain_BASEINIT_InitESAMCard:
0AD3 300000   F     3948             JNB     BIT_ESAM,OBUMain_BASEINIT_InitUserCard
                    3949             
0AD6                3950     OBUMain_BASEINIT_InitUserCard:
0AD6 200007   F     3951             JB      BIT_ISContact,OBUMain_BASEINIT_InitContact      ;
0AD9 8018           3952             JMP     OBUMain_BASEINIT_InitNContact                   ;       
0ADB                3953     OBUMain_BASEINIT_InitContactSEC:                                ; ³õÊ¼»¯·Ç½ÓÊ§°Üºó£¬×ªÏò¸´Î
                             »½Ó´¥¿¨
0ADB 807A           3954             jmp     OBUMain_BASEINIT_SelectDF01
0ADD 200077   F     3955             JB      BIT_ISContact,OBUMain_BASEINIT_SelectDF01       ; Èç¹ûÒÑ¾­¸´Î»¹£¬½Ó´¥¿¨£¬Ôò
                             ²»ÔÙ¸´Î»
0AE0                3956     OBUMain_BASEINIT_InitContact:                                   ; ³õÊ¼»¯½Ó´¥¿¨
                    3957             
                    3958             ;³õÊ¼»¯ÓÃ»§¿¨
0AE0 C284           3959             CLR     Pin_522_RST
0AE2 D200     F     3960             SETB    BIT_ESAMICC                                     ; =1  ¸´Î»½Ó´¥Ê½ÓÃ»§¿¨  ;= 
                             0  ¸´Î»ESAM¿¨
0AE4 120000   F     3961             CALL    _FUN_Contact_INIT
0AE7 EF             3962             MOV     A,R7
0AE8 7006           3963             JNZ     OBUMain_BASEINIT_InitNContactSEC
0AEA D200     F     3964             SETB    BIT_INSERTCARD                                  ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°
                             OBU²å¿¨;=0±íÊ¾µ±Ç°OBUÃ»²å¿¨; 
0AEC D200     F     3965             SETB    BIT_ISContact                                   ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç
0AEE 8067           3966             JMP     OBUMain_BASEINIT_PPS
0AF0                3967     OBUMain_BASEINIT_InitNContactSEC:                               ; ³õÊ¼»¯½ÓÊ§°Üºó£¬×ªÏò¸´Î»·
                             Ç½Ó´¥¿¨      
0AF0 300064   F     3968             JNB     BIT_ISContact,OBUMain_BASEINIT_SelectDF01       ; Èç¹ûÒÑ¾­¸´Î»¹£¬·Ç½Ó´¥¿¨£¬
                             Ôò²»ÔÙ¸´Î»
0AF3                3969     OBUMain_BASEINIT_InitNContact:                                  ; ³õÊ¼»¯·Ç½Ó´¥¿¨
                    3970             
0AF3 120000   F     3971             CALL    _FUN_NContact_Rc500Rst
0AF6 120000   F     3972             CALL    _FUN_NContact_Rc500Config
0AF9 120000   F     3973             CALL    _FUN_NContact_Rc500Request
0AFC EF             3974             MOV     A,R7
                    3975             ;---JNZ OBUMain_BASEINIT02_SelectDF01
0AFD 6016           3976             JZ      OBUMain_BASEINIT_Request
0AFF 20B311         3977             JB      PIN_card_exist,OBUMain_BASEINIT_Request01
0B02 120000   F     3978             CALL    _FUN_NContact_Rc500Rst
0B05 120000   F     3979             CALL    _FUN_NContact_Rc500Config
0B08 120000   F     3980             CALL    _FUN_NContact_Rc500Request
0B0B EF             3981             MOV     A,R7
0B0C 6007           3982             JZ      OBUMain_BASEINIT_Request
                    3983             ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
0B0E 7418           3984             MOV     A,#CONST_STATE_Base02Re
0B10 120000   F     3985             CALL    _FUN_OBUMAIN_ErrShow02
0B13                3986     OBUMain_BASEINIT_Request01:
0B13 8042           3987             JMP     OBUMain_BASEINIT_SelectDF01
0B15                3988     OBUMain_BASEINIT_Request:
0B15 120000   F     3989             CALL    _FUN_NContact_Rc500AntiColl
0B18 EF             3990             MOV     A,R7
0B19 703C           3991             JNZ     OBUMain_BASEINIT_SelectDF01
0B1B 120000   F     3992             CALL    _FUN_NContact_Rc500Select
0B1E EF             3993             MOV     A,R7
                    3994             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    67

0B1F 7036           3995             JNZ     OBUMain_BASEINIT_SelectDF01     
                    3996             
0B21 C200     F     3997             CLR     BIT_ProMF                               ; Ä¬ÈÏÎªMF¿¨    
0B23 E500     F     3998             MOV     A,DATA_RXBUF
                    3999             ;08 20  
0B25 6420           4000             XRL     A,#20H
0B27 6006           4001             JZ      OBUMain_BASEINIT_ISPrO
0B29 E500     F     4002             MOV     A,DATA_RXBUF
0B2B 6428           4003             XRL     A,#28H
0B2D 7024           4004             JNZ     OBUMain_BASEINIT_InitNContactOVER               
0B2F                4005     OBUMain_BASEINIT_ISPrO: 
0B2F D200     F     4006             SETB    BIT_ProMF                               ; ÉèÖÃµ±Ç°ÎªPro¿¨±ê¼Ç           
0B31 120000   F     4007             CALL    _FUN_ProCard_Rats                       ; Èç¹ûµ±Ç°ÊÇpro¿¨£¬ÔòÔÙ×örat²Ù×÷
                    4008     
0B34 D200     F     4009             SETB    BIT_INSERTCARD                          ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°OBU²å¿¨;
                             =0±íÊ¾µ±Ç°OBUÃ»²å¿¨;         
0B36 C200     F     4010             CLR     BIT_ISContact                           ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç
0B38 7800     F     4011             MOV     R0,#DATA_RXBUF+1
0B3A E6             4012             MOV     A,@R0   
0B3B A2E4           4013             MOV     C,ACC.4
0B3D 5012           4014             JNC     OBUMain_BASEINIT_InitNSelDF01
                    4015             
0B3F 7800     F     4016             MOV     R0,#DATA_RXBUF+2                        ; 
0B41 E6             4017             MOV     A,@R0                                   ; 
0B42 A2E1           4018             MOV     C,ACC.1                                 ; 
0B44 500B           4019             JNC     OBUMain_BASEINIT_InitNSelDF01           ; 
0B46 A2E5           4020             MOV     C,ACC.5                                 ; 
0B48 5007           4021             JNC     OBUMain_BASEINIT_InitNSelDF01           ; 
                    4022                                                             ; 
0B4A 120000   F     4023             CALL    _FUN_Pro_PPS                            ; ·Ç½ÓPPS£¨²å¿¨»½ÐÑ£©
0B4D 120000   F     4024             CALL    _FUN_NContact_Rc500_PPS_Config          ; RC522 ¼Ä´æÆ÷
0B50 EF             4025             MOV     A,R7
                    4026     
0B51                4027     OBUMain_BASEINIT_InitNSelDF01:                          ;
0B51 7004           4028             JNZ     OBUMain_BASEINIT_SelectDF01
0B53                4029     OBUMain_BASEINIT_InitNContactOVER:
                    4030             ;~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~~~
                    4031             ;MOV    A,#120
                    4032             ;JMP    _FUN_TEST_DISPLAY
                    4033             ;~~~~~~~~~~~~~~~~~~~~~~~~~~
0B53 D200     F     4034             SETB    BIT_INSERTCARD                          ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°OBU²å¿¨;
                             =0±íÊ¾µ±Ç°OBUÃ»²å¿¨;         
0B55 C200     F     4035             CLR     BIT_ISContact                           ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç
0B57                4036     OBUMain_BASEINIT_PPS:   
0B57                4037     OBUMain_BASEINIT_SelectDF01:                            ;Ñ¡ÔñESAM¿¨DF01Ä¿Â¼     
0B57 120000   F     4038             CALL    _FUN_OBUMAIN_SELECTDF01
                    4039     
                    4040     
                    4041     
0B5A                4042     OBUMain_BASEINIT_OVER:
0B5A                4043     OBUMain_BASEINIT_OVER02:
0B5A D200     F     4044             setb    BIT_INITCard    
0B5C 22             4045             RET
                    4046     
                    4047     ;////////////////////////////////////////////////////////////   
0B5D                4048     _FUN_OBUMain_BASEINIT02:        
                    4049             
0B5D C200     F     4050             CLR     BIT_INSERTCARD
0B5F C200     F     4051             CLR     BIT_BUFADDR
                    4052             
                    4053             ;¶ÁÈ¡   OBUID
0B61 90002F         4054             MOV     DPTR,#STR_SYS_OBUID
0B64 7F00     F     4055             MOV     R7,#DATA_OBUID
0B66 120000   F     4056             CALL    _FUN_LIB_FLASHTODATA
                    4057             
                    4058             ;¶ÁÈ¡System Info ²ðÐ¶Î»(µÚ27¸ö×Ö½Ú)
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    68

                    4059             ;·ÅÔÚÕâÀï¶Á£¬ÖØÒªµÄÔ­ÒòÊÇ£¬ÉÏµçÊ±ÐèÑÓÊ±£¬ËùÒÔ¿ÉÒÔÊ¡Ê±¡£
0B69 758372         4060             MOV     DPH,#CONST_FLASH_SYSINFOH
0B6C 75821A         4061             MOV     DPL,#CONST_FLASH_SYSINFOL + 26
0B6F 750700   F     4062             MOV     AR7,#XDATA_FIX
0B72 7B01           4063             MOV     R3,#1
0B74 120000   F     4064             CALL    _RDFlashXR
                    4065             
0B77 7900     F     4066             MOV     R1,#XDATA_FIX
                    4067                     ;MOVX   A,@R1
0B79 758301         4068             MOV     DPH,#1
0B7C 8982           4069             MOV     DPL,R1
0B7E E0             4070             MOVX    A,@DPTR
0B7F 540F           4071             ANL     A,#0FH
                    4072             
0B81 6004           4073             JZ      OBUMain_BASEINIT02_Tampered
0B83 C200     F     4074             CLR     BIT_CD
0B85 8002           4075             JMP     OBUMain_BASEINIT02_TamperedOver
                    4076             
0B87                4077     OBUMain_BASEINIT02_Tampered:    
0B87 D200     F     4078             SETB    BIT_CD
0B89                4079     OBUMain_BASEINIT02_TamperedOver:
                    4080                     
                    4081             ;--- ´Ó Flash ÖÐ¶ÁÈ¡ÉÏÒ»´Î²å¿¨ÀàÐÍ ---
                    4082             ;½Ó´¥¿¨ »¹ÊÇ ·Ç½Ó´¥¿¨
0B89 758372         4083             MOV     DPH,#CONST_FLASH_LASTCARDH
0B8C 7582EB         4084             MOV     DPL,#CONST_FLASH_LASTCARDL
0B8F 750700   F     4085             MOV     AR7,#DATA_RXBUF
0B92 7B01           4086             MOV     R3,#1
0B94 120000   F     4087             CALL    _RDFlash
0B97 7800     F     4088             MOV     R0,#DATA_RXBUF
0B99 E6             4089             MOV     A,@R0
0B9A A2E0           4090             MOV     C,ACC.0
0B9C 9200     F     4091             MOV     BIT_ISContact,C ;½Ó´¥¿¨=1£¬»¹ÊÇ·Ç½Ó´¥¿¨=0
                    4092                             
                    4093             ;~~~~~~~~~µ÷ºÃ·Ç½Ó¿¨È¥µô~~~~~~~~~~~~~~
0B9E C200     F     4094             clr     BIT_ISContact   
0BA0                4095     OBUMain_BASEINIT02_InitESAMCard:
0BA0 300000   F     4096             JNB     BIT_ESAM,OBUMain_BASEINIT02_InitUserCard        
0BA3                4097     OBUMain_BASEINIT02_InitUserCard:
0BA3 20000B   F     4098             JB      BIT_ISContact,OBUMain_BASEINIT02_InitContact    ;
0BA6 801D           4099             JMP     OBUMain_BASEINIT02_InitNContact                 ;       
0BA8                4100     OBUMain_BASEINIT02_InitContactSEC:                              ; ³õÊ¼»¯·Ç½ÓÊ§°Üºó£¬×ªÏò¸´Î
                             »½Ó´¥¿¨
0BA8 020000   F     4101             jmp     OBUMain_BASEINIT02_SelectDF01
                    4102             ;---JB  BIT_ISContact,OBUMain_BASEINIT02_SelectDF01     ; Èç¹ûÒÑ¾­¸´Î»¹£¬½Ó´¥¿¨£¬Ôò
                             ²»ÔÙ¸´Î»
0BAB 300003   F     4103             JNB     BIT_ISContact,OBUMain_BASEINIT02_InitContact    ; Èç¹ûÒÑ¾­¸´Î»¹£¬½Ó´¥¿¨£¬Ôò
                             ²»ÔÙ¸´Î»
0BAE 020000   F     4104             JMP     OBUMain_BASEINIT02_SelectDF01
0BB1                4105     OBUMain_BASEINIT02_InitContact:                                 ; ³õÊ¼»¯½Ó´¥¿¨  
                    4106             ;³õÊ¼»¯ÓÃ»§¿¨
0BB1 C284           4107             CLR     Pin_522_RST
0BB3 D200     F     4108             SETB    BIT_ESAMICC                                     ; =1  ¸´Î»½Ó´¥Ê½ÓÃ»§¿¨  ;= 
                             0  ¸´Î»ESAM¿¨
0BB5 120000   F     4109             CALL    _FUN_Contact_INIT
0BB8 EF             4110             MOV     A,R7
0BB9 7007           4111             JNZ     OBUMain_BASEINIT02_InitNContactSEC 
0BBB D200     F     4112             SETB    BIT_INSERTCARD                                  ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°
                             OBU²å¿¨;=0±íÊ¾µ±Ç°OBUÃ»²å¿¨; 
0BBD D200     F     4113             SETB    BIT_ISContact                                   ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç
0BBF 020000   F     4114             JMP     OBUMain_BASEINIT02_PPS  
0BC2                4115     OBUMain_BASEINIT02_InitNContactSEC:                             ; ³õÊ¼»¯½ÓÊ§°Üºó£¬×ªÏò¸´Î»·
                             Ç½Ó´¥¿¨      
0BC2 30007C   F     4116             JNB     BIT_ISContact,OBUMain_BASEINIT02_SelectDF01     ; Èç¹ûÒÑ¾­¸´Î»¹£¬·Ç½Ó´¥¿¨£¬
                             Ôò²»ÔÙ¸´Î»
0BC5                4117     OBUMain_BASEINIT02_InitNContact:                                        ; ³õÊ¼»¯·Ç½Ó´¥¿¨
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    69

                    4118     
                    4119             ;---jb  PIN_card_exist,OBUMain_BASEINIT02_SelectDF01    
                    4120             ;ÏÈ·¢ËÍ 00a4000002 ²Ù×÷ÍêÓÃ»§¿¨ºóÔÙ·¢df01 ²¢½ÓÊÕ£¬¿´ÊÇ·ñ¿ÉÒÔÊÕµ½61+len
0BC5 900000   F     4121             MOV     DPTR,#STR_DSRC_SELDF
0BC8 7F00     F     4122             MOV     R7,#data_rxbuf
0BCA 120000   F     4123             CALL    _FUN_LIB_FLASHTODATA
                    4124     
0BCD C200     F     4125             clr     BIT_ESAMICC
0BCF 7F00     F     4126             MOV     R7,#data_rxbuf
0BD1 7D14           4127             MOV     R5,#CONST_SOFTBYTESP
0BD3 7B05           4128             MOV     R3,#5
0BD5 C200     F     4129             CLR     BIT_BUFADDR                                     ;=0£¬·¢ËÍµÄÊÇÄÚ´æÊ¾Ý£»=1£¬·
                             ¢ËÍµÄÊÇÍâ´æÊ¾Ý
0BD7 D200     F     4130             SETB    BIT_VERIFY                                      ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑéÎ»,=0²»Ò
                             ª£¬=1Òª                                              
0BD9 120000   F     4131             CALL    _FUN_SERIAL_TXSOFT      
                    4132     
0BDC 120000   F     4133             CALL    _FUN_NContact_Rc500Rst
                    4134     
0BDF 120000   F     4135             CALL    _FUN_NContact_Rc500Config
0BE2 120000   F     4136             CALL    _FUN_NContact_Rc500Request
0BE5 EF             4137             MOV     A,R7
                    4138             ;---JNZ OBUMain_BASEINIT02_SelectDF01
0BE6 6016           4139             JZ      OBUMain_BASEINIT02_Request
0BE8 20B311         4140             JB      PIN_card_exist,OBUMain_BASEINIT02_Request01
0BEB 120000   F     4141             CALL    _FUN_NContact_Rc500Rst
0BEE 120000   F     4142             CALL    _FUN_NContact_Rc500Config
0BF1 120000   F     4143             CALL    _FUN_NContact_Rc500Request
0BF4 EF             4144             MOV     A,R7
0BF5 6007           4145             JZ      OBUMain_BASEINIT02_Request
                    4146             ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
0BF7 7418           4147             MOV     A,#CONST_STATE_Base02Re
0BF9 120000   F     4148             CALL    _FUN_OBUMAIN_ErrShow02
0BFC                4149     OBUMain_BASEINIT02_Request01:
0BFC 8043           4150             JMP     OBUMain_BASEINIT02_SelectDF01
0BFE                4151     OBUMain_BASEINIT02_Request:
                    4152             
0BFE 120000   F     4153             CALL    _FUN_NContact_Rc500AntiColl
0C01 EF             4154             MOV     A,R7
0C02 703D           4155             JNZ     OBUMain_BASEINIT02_SelectDF01
0C04 120000   F     4156             CALL    _FUN_NContact_Rc500Select
0C07 EF             4157             MOV     A,R7
0C08 7037           4158             JNZ     OBUMain_BASEINIT02_SelectDF01
0C0A C200     F     4159             CLR     BIT_ProMF                               ; Ä¬ÈÏÎªMF¿¨    
0C0C E500     F     4160             MOV     A,DATA_RXBUF
0C0E 6420           4161             XRL     A,#20H
0C10 6006           4162             JZ      OBUMain_BASEINIT02_ISPrO
0C12 E500     F     4163             MOV     A,DATA_RXBUF
0C14 6428           4164             XRL     A,#28H
0C16 7025           4165             JNZ     OBUMain_BASEINIT02_InitNContactOVER             ; 
0C18                4166     OBUMain_BASEINIT02_ISPrO:                                       ; 
0C18 D200     F     4167             SETB    BIT_ProMF                               ; ÉèÖÃµ±Ç°ÎªPro¿¨±ê¼Ç           
0C1A 120000   F     4168             CALL    _FUN_ProCard_Rats                       ; Èç¹ûµ±Ç°ÊÇpro¿¨£¬ÔòÔÙ×örat²Ù×÷
0C1D EF             4169             MOV     A,R7
0C1E 7021           4170             JNZ     OBUMain_BASEINIT02_SelectDF01
                    4171             
0C20 D200     F     4172             SETB    BIT_INSERTCARD                          ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°OBU²å¿¨;
                             =0±íÊ¾µ±Ç°OBUÃ»²å¿¨;         
0C22 C200     F     4173             CLR     BIT_ISContact                           ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç        
                    4174     
0C24 7800     F     4175             MOV     R0,#DATA_RXBUF+1
0C26 E6             4176             MOV     A,@R0   
0C27 A2E4           4177             MOV     C,ACC.4
0C29 5012           4178             JNC     OBUMain_BASEINIT02_InitNContactOVER
                    4179             
0C2B 7800     F     4180             MOV     R0,#DATA_RXBUF+2
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    70

0C2D E6             4181             MOV     A,@R0
0C2E A2E1           4182             MOV     C,ACC.1
0C30 500B           4183             JNC     OBUMain_BASEINIT02_InitNContactOVER
0C32 A2E5           4184             MOV     C,ACC.5
0C34 5007           4185             JNC     OBUMain_BASEINIT02_InitNContactOVER     
                    4186             
0C36 120000   F     4187             CALL    _FUN_Pro_PPS                            ; ·Ç½ÓPPS£¨²å¿¨»½ÐÑ£©
0C39 120000   F     4188             CALL    _FUN_NContact_Rc500_PPS_Config          ; RC522 ¼Ä´æÆ÷
0C3C EF             4189             MOV     A,R7                                    ; 
0C3D                4190     OBUMain_BASEINIT02_InitNContactOVER:
0C3D D200     F     4191             SETB    BIT_INSERTCARD                          ; ÖÃ²å¿¨Î»      ;=1±íÊ¾µ±Ç°OBU²å¿¨;
                             =0±íÊ¾µ±Ç°OBUÃ»²å¿¨;         
0C3F C200     F     4192             CLR     BIT_ISContact                           ; ¸üÐÂ¿¨ÀàÐÍ±ê¼Ç                
0C41                4193     OBUMain_BASEINIT02_PPS:
0C41                4194     OBUMain_BASEINIT02_SelectDF01:                          ;Ñ¡ÔñESAM¿¨DF01Ä¿Â¼             
0C41 C200     F     4195             clr     BIT_ESAMOK      
                    4196             ;jnb    PIN_card_exist,OBUMain_BASEINIT02_SelectDF0102
0C43 200005   F     4197             jb      BIT_INSERTCARD,OBUMain_BASEINIT02_SelectDF0102
                    4198             ;jb     BIT_INSERTCARD,OBUMain_BASEINIT02_SelectDF0102
0C46 120000   F     4199             CALL    _FUN_OBUMAIN_SELECTDF01
0C49 8043           4200             jmp     OBUMain_BASEINIT02_OVER02       
0C4B                4201     OBUMain_BASEINIT02_SelectDF0102:        
                    4202             ;ÏÈ·¢ËÍ 00a4000002 ²Ù×÷ÍêÓÃ»§¿¨ºóÔÙ·¢df01 ²¢½ÓÊÕ£¬¿´ÊÇ·ñ¿ÉÒÔÊÕµ½61+len
0C4B 900000   F     4203             MOV     DPTR,#STR_DSRC_DF
0C4E 7F00     F     4204             MOV     R7,#data_rxbuf
0C50 120000   F     4205             CALL    _FUN_LIB_FLASHTODATA
                    4206             
0C53 C200     F     4207             CLR     BIT_ESAMICC
0C55 7F00     F     4208             MOV     R7,#data_rxbuf
0C57 7D14           4209             MOV     R5,#CONST_SOFTBYTESP
0C59 7B02           4210             MOV     R3,#2
0C5B C200     F     4211             CLR     BIT_BUFADDR                                     ;=0£¬·¢ËÍµÄÊÇÄÚ´æÊ¾Ý£»=1£¬·
                             ¢ËÍµÄÊÇÍâ´æÊ¾Ý
0C5D D200     F     4212             SETB    BIT_VERIFY                                      ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑéÎ»,=0²»Ò
                             ª£¬=1Òª                                              
0C5F 120000   F     4213             CALL    _FUN_SERIAL_TXSOFT
                    4214             
                    4215             ;---- ½ÓÊÕÊ¾Ý ----
0C62 C200     F     4216             CLR     BIT_ESAMICC
0C64 D200     F     4217             SETB    BIT_BUFADDR                     ;=0£¬·¢ËÍµÄÊÇÄÚ´æÊ¾Ý£»=1£¬·¢ËÍµÄÊÇÍâ´æÊ¾Ý
0C66 D200     F     4218             SETB    BIT_SERIALOVERTIMERX            ;;Èí´®¿ÚµÈ´½ÓÊÕÊÇ·ñÓÐÊ±¼ä,ÏÞÖÆ=0Ã»ÓÐÏÞÖÆ;=1
                             ÓÐÊ±¼äÏÞÖÆ
0C68 D200     F     4219             SETB    BIT_VERIFY                      ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑéÎ»,=0²»Òª£¬=1Òª      
0C6A 7800     F     4220             MOV     R0,#xdata_txbuf
0C6C E6             4221             MOV     A,@R0
0C6D FF             4222             MOV     R7,A
0C6E 7B02           4223             MOV     R3,#2   
0C70 120000   F     4224             CALL    _FUN_SERIAL_RXSOFT
0C73 EB             4225             MOV     A,R3
                    4226     ;CALL   _FUN_TEST_DISPLAY
0C74 6402           4227             XRL     A,#2            
0C76 700E           4228             JNZ     OBUMain_BASEINIT02_ESAMerrrr
                    4229             
0C78 7800     F     4230             MOV     R0,#xdata_txbuf
                    4231                     ;MOVX   A,@R0
0C7A 758301         4232             MOV     DPH,#1
0C7D 8882           4233             MOV     DPL,R0
0C7F E0             4234             MOVX    A,@DPTR
0C80 6461           4235             xrl     a,#61h
0C82 7002           4236             jnz     OBUMain_BASEINIT02_ESAMerrrr
0C84 8006           4237             jmp     OBUMain_BASEINIT02_ESAMRight    
0C86                4238     OBUMain_BASEINIT02_ESAMerrrr:           
0C86 300005   F     4239             JNB     BIT_ESAMErr,OBUMain_BASEINIT02_OVER02   
0C89 120000   F     4240             CALL    _FUN_LIB_ESAMErr
0C8C                4241     OBUMain_BASEINIT02_ESAMRight:
                    4242             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    71

0C8C D200     F     4243             SETB    BIT_ESAMOK                      ;ÉèÖÃESAM²Ù×÷³É¹¦±ê¼Ç   
0C8E                4244     OBUMain_BASEINIT02_OVER02:      
0C8E D200     F     4245             SETB    BIT_INITCard    
0C90 22             4246             RET     
                    4247     ;------------------------------------------------------------------------------------------
                             -
                    4248     ;_FUN_OBUMain_CARDPreDeal (¸½ÊôÐò¶Î)
                    4249     ;¸½Êô: _FUN_OBUMAIN_MASTER
                    4250     ;ÃèÊö: ¿¨Æ¬Ô¤´¦Àí
                    4251     ;Á÷³Ì: XXX
                    4252     ;------------------------------------------------------------------------------------------
                             -
0C91                4253     _FUN_OBUMain_CARDPreDeal:               
                    4254             ;--- Çå³FlashÔ¤´¦ÀíÇø ---
                    4255             ;×¢£ºErase²»ÄÜ·ÅÔÚ_FUN_OBUMain_BASEINITÇ°£¬ÒòÎª¸´Î»ÓÃ»§¿¨Ç°Òª¶ÁFlash
0C91 758372         4256             MOV     DPH,#CONST_FLASH_SYSINFOH
0C94 758200         4257             MOV     DPL,#CONST_FLASH_SYSINFOL
0C97 7B01           4258             MOV     R3,#001H
0C99 120000   F     4259             CALL    _eraseflash     
0C9C                4260     OBUMain_CARDPreDeal_ReadSysInfo: ;¶ÁÏµÍ³ÐÅÏ¢ÎÄ¼þ
0C9C C200     F     4261             clr     BIT_USEROK
                    4262             ;--- ÓÃ»§¿¨²å¿¨Ô¤´¦Àí³ÌÐò ---
0C9E 200003   F     4263             JB      BIT_INSERTCARD,OBUMain_CARDPreDeal_USER
0CA1 020000   F     4264             JMP     OBUMain_CARDPreDeal_USEROver                            ;Ã»ÓÐ²å¿¨Ê±£¬½áÊøÔ¤
                             ´¦Àí£¬²¢ÏÔÊ¾¿¨Æ¬ÐÅÏ¢         
0CA4                4265     OBUMain_CARDPreDeal_USER:                                               ;ÓÃ»§¿¨Ô¤´¦Àí   
0CA4 200006   F     4266             JB      BIT_ISCONTACT,OBUMain_CARDPreDeal_PreDealCPUCard        ;µ±²å¿¨ÊÇ½Ó´¥Ê½¿¨Ê±
                             £¬Ôò×öCPU¿¨Ô¤´¦Àí
0CA7 200003   F     4267             JB      BIT_ProMF,OBUMain_CARDPreDeal_PreDealCPUCard            ;µ±²å¿¨ÊÇ·Ç½Ó£¬ÇÒÊÇ
                             pro¿¨Ê±£¬Ôò×öCPU¿¨Ô¤´¦Àí
0CAA 020000   F     4268             JMP     OBUMain_CARDPreDeal_PreDealMF                           ;µ±²å¿¨ÊÇ·Ç½Ó£¬ÊÇMF
                             ¿¨Ê±£¬Ôò×öMFÔ¤´¦Àí           
0CAD                4269     OBUMain_CARDPreDeal_PreDealCPUCard:                                     ;CPU¿¨Ô¤´¦Àí
0CAD                4270     OBUMain_CARDPreDeal_PPS:        
0CAD D200     F     4271             SETB    BIT_GETRESULT
0CAF D200     F     4272             SETB    BIT_ESAMICC
0CB1 7F00     F     4273             MOV     R7,#DATA_RXBUF
0CB3 7D00     F     4274             MOV     R5,#XDATA_TXBUF
0CB5 7B10           4275             MOV     R3,#10H
0CB7 7A01           4276             MOV     R2,#01H
0CB9 120000   F     4277             CALL    _FUN_CARDAPP_SelectFile
                    4278     
0CBC                4279     OBUMain_CARDPreDeal_Read0002:                                           ;¶Á0002ÎÄ¼þ
                    4280             ;¶Á 0002 ÎÄ¼þ
0CBC D200     F     4281             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0CBE D200     F     4282             SETB    BIT_GETRESULT    
                    4283                     
0CC0 7F00     F     4284             MOV     R7,#DATA_RXBUF                                          ;R7 ·¢ËÍç·³åÖ¸Õë(ÄÚ
                             ´æ)
0CC2 7D00     F     4285             MOV     R5,#XDATA_TXBUF         
0CC4 120000   F     4286             CALL    _FUN_CARDAPP_GetBalance 
0CC7 EF             4287             MOV     A,R7
                    4288     
0CC8 6003           4289             JZ      OBUMain_CARDPreDeal_Write0002
0CCA 020000   F     4290             JMP     OBUMain_CARDPreDeal_USEROver                    ;³ö´í£¬Ôò½áÊøÔ¤´¦Àí     
0CCD                4291     OBUMain_CARDPreDeal_Write0002:  
                    4292             ;½«ÖµCopyµ½#MoneyÄÚ´æÖÐÈ¥
0CCD 7B04           4293             MOV     R3,#4
0CCF 850501         4294             MOV     AR1,AR5
0CD2 7800     F     4295             MOV     R0,#MONEY
0CD4                4296     OBUMain_CARDPreDeal_CopyMoney:
                    4297                     ;MOVX   A,@R1
0CD4 758301         4298             MOV     DPH,#1
0CD7 8982           4299             MOV     DPL,R1
0CD9 E0             4300             MOVX    A,@DPTR
0CDA F6             4301             MOV     @R0,A
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    72

0CDB 08             4302             INC     R0
0CDC 09             4303             INC     R1
0CDD DBF5           4304             DJNZ    R3,OBUMain_CARDPreDeal_CopyMoney        
                    4305             ;Ð´0002µ½FLASH
0CDF 758372         4306             MOV     DPH,#CONST_FLASH_0002H
0CE2 758258         4307             MOV     DPL,#CONST_FLASH_0002L
0CE5 7F00     F     4308             MOV     R7,#XDATA_TXBUF
0CE7 7B04           4309             MOV     R3,#CONST_Flash_0002Len         
0CE9 120000   F     4310             CALL    _wrflashXR              
0CEC                4311     OBUMain_CARDPreDeal_Read0012: ;¶Á0012ÎÄ¼þ       
                    4312             ;¶Á0012ÎÄ¼þ
0CEC D200     F     4313             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0CEE D200     F     4314             SETB    BIT_GETRESULT                   
0CF0 7F00     F     4315             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
0CF2 7D00     F     4316             MOV     R5,#XDATA_TXBUF                 
0CF4 7C12           4317             MOV     R4,#012H                                                ;R4             ---
                                  ÎÄ¼þID
0CF6 7B28           4318             MOV     R3,#CONST_Flash_0012Len                                 ;R3             ---
                                  ³¤¶È
0CF8 7A00           4319             MOV     R2,#000H                                                ;R2             ---
                                  offset
0CFA 120000   F     4320             CALL    _FUN_CARDAPP_ReadBinary 
0CFD EF             4321             MOV     A,R7
                    4322             
0CFE 6003           4323             JZ      OBUMain_CARDPreDeal_Write0012
0D00 020000   F     4324             JMP     OBUMain_CARDPreDeal_USEROver                    ;³ö´í£¬Ôò½áÊøÔ¤´¦Àí
0D03                4325     OBUMain_CARDPreDeal_Write0012:
                    4326             ;Ð´0012µ½FLASH
0D03 758372         4327             MOV     DPH,#CONST_FLASH_0012H
0D06 75825C         4328             MOV     DPL,#CONST_FLASH_0012L
0D09 7F00     F     4329             MOV     R7,#XDATA_TXBUF
0D0B 7B28           4330             MOV     R3,#CONST_Flash_0012Len         
0D0D 120000   F     4331             CALL    _wrflashXR              
0D10                4332     OBUMain_CARDPreDeal_Read0015: ;¶Á0015ÎÄ¼þ       
0D10 D200     F     4333             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0D12 D200     F     4334             SETB    BIT_GETRESULT   
0D14 7F00     F     4335             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
0D16 7D00     F     4336             MOV     R5,#XDATA_TXBUF                 
0D18 7C15           4337             MOV     R4,#015H                                                ;R4             ---
                                  ÎÄ¼þID
0D1A 7B2B           4338             MOV     R3,#CONST_Flash_0015Len                                 ;R3             ---
                                  ³¤¶È
0D1C 7A00           4339             MOV     R2,#00H                                                 ;R2             ---
                                  offset
0D1E 120000   F     4340             CALL    _FUN_CARDAPP_ReadBinary 
0D21 EF             4341             MOV     A,R7
0D22 6003           4342             JZ      OBUMain_CARDPreDeal_Write0015
0D24 020000   F     4343             JMP     OBUMain_CARDPreDeal_USEROver
0D27                4344     OBUMain_CARDPreDeal_Write0015:
                    4345     
                    4346             ;Ð´0015µ½FLASH
0D27 758372         4347             MOV     DPH,#CONST_FLASH_0015H
0D2A 758284         4348             MOV     DPL,#CONST_FLASH_0015L
0D2D 7F00     F     4349             MOV     R7,#XDATA_TXBUF
0D2F 7B2B           4350             MOV     R3,#CONST_Flash_0015Len
0D31 120000   F     4351             CALL    _wrflashXR      
                    4352                     
0D34                4353     OBUMain_CARDPreDeal_Read0019: ;¶Á0019ÎÄ¼þ       
                    4354     ;////////////////////////////////////////////////////////////////////////////////
                    4355     ;B9 E3 B6 AB    ¹ã¶«
                    4356     ;1,00a40000021001
                    4357     ;1,00b0950008   
0D34 758372         4358             MOV     DPH,#CONST_FLASH_0015H
0D37 758284         4359             MOV     DPL,#CONST_FLASH_0015L
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    73

0D3A 7F00     F     4360             MOV     R7,#XDATA_Hold
0D3C 7B2B           4361             MOV     R3,#CONST_Flash_0015Len
0D3E 120000   F     4362             CALL    _rdflashxr      
                    4363             
0D41 7800     F     4364             mov     r0,#XDATA_Hold
                    4365                     ;MOVX   A,@R0
0D43 758301         4366             MOV     DPH,#1
0D46 8882           4367             MOV     DPL,R0
0D48 E0             4368             MOVX    A,@DPTR
0D49 64B9           4369             xrl     a,#0b9h 
0D4B 7023           4370             jnz     OBUMain_CARDPreDeal_0019GB
                    4371             
0D4D 08             4372             INC     R0
                    4373                     ;MOVX   A,@R0
0D4E 758301         4374             MOV     DPH,#1
0D51 8882           4375             MOV     DPL,R0
0D53 E0             4376             MOVX    A,@DPTR
0D54 64E3           4377             xrl     a,#0E3h 
0D56 7018           4378             jnz     OBUMain_CARDPreDeal_0019GB
                    4379             
0D58 08             4380             INC     R0
                    4381                     ;MOVX   A,@R0
0D59 758301         4382             MOV     DPH,#1
0D5C 8882           4383             MOV     DPL,R0
0D5E E0             4384             MOVX    A,@DPTR
0D5F 64B6           4385             xrl     a,#0b6h 
0D61 700D           4386             jnz     OBUMain_CARDPreDeal_0019GB
                    4387             
0D63 08             4388             INC     R0
                    4389                     ;MOVX   A,@R0
0D64 758301         4390             MOV     DPH,#1
0D67 8882           4391             MOV     DPL,R0
0D69 E0             4392             MOVX    A,@DPTR
0D6A 64AB           4393             XRL     A,#0ABH
0D6C 7002           4394             JNZ     OBUMain_CARDPreDeal_0019GB      
0D6E 8026           4395             JMP     OBUMain_CARDPreDeal_0019GD
0D70                4396     OBUMain_CARDPreDeal_0019GB:;¹ú±ê
                    4397     ;               mov     a,#38
                    4398     ;               call    _fun_test_display
0D70 D200     F     4399             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0D72 D200     F     4400             SETB    BIT_GETRESULT   
0D74 7F00     F     4401             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
0D76 7D00     F     4402             MOV     R5,#XDATA_TXBUF                 
0D78 7C19           4403             MOV     R4,#19H                                                 ;R4             ---
                                  ÎÄ¼þID
0D7A 7A01           4404             mov     r2,#1
0D7C 7B2B           4405             MOV     R3,#CONST_Flash_0019GBLen                                       ;R3        
                                  ---     ³¤¶È
0D7E 120000   F     4406             CALL    _FUN_CARDAPP_ReadRecord         
0D81 EF             4407             MOV     A,R7
                    4408     
0D82 6003           4409             JZ      OBUMain_CARDPreDeal_Write0019GB
0D84 020000   F     4410             JMP     OBUMain_CARDPreDeal_USEROver
0D87                4411     OBUMain_CARDPreDeal_Write0019GB:        
                    4412             ;Ð´0019µ½FLASH
0D87 758372         4413             MOV     DPH,#CONST_FLASH_0019H
0D8A 7582AF         4414             MOV     DPL,#CONST_FLASH_0019L
0D8D 7F00     F     4415             MOV     R7,#XDATA_TXBUF
0D8F 7B2B           4416             MOV     R3,#CONST_Flash_0019GBLen               
0D91 120000   F     4417             CALL    _wrflashXR                      
0D94 8045           4418             JMP     OBUMain_CARDPreDeal_RecordCardType              
                    4419             
0D96                4420     OBUMain_CARDPreDeal_0019GD:;¹ã¶«
                    4421             ;       mov     a,#37
                    4422             ;       call    _fun_test_display
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    74

0D96 D200     F     4423             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0D98 D200     F     4424             SETB    BIT_GETRESULT   
0D9A 7F00     F     4425             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
0D9C 7D00     F     4426             MOV     R5,#XDATA_TXBUF                 
0D9E 7C19           4427             MOV     R4,#19H                                                 ;R4             ---
                                  ÎÄ¼þID
0DA0 7A02           4428             mov     r2,#2
0DA2 7B3C           4429             MOV     R3,#CONST_Flash_0019Len                                 ;R3             ---
                                  ³¤¶È
0DA4 120000   F     4430             CALL    _FUN_CARDAPP_ReadRecord         
0DA7 EF             4431             MOV     A,R7
                    4432             ;               call    _fun_test_display
0DA8 6003           4433             JZ      OBUMain_CARDPreDeal_Write0019gd
0DAA 020000   F     4434             JMP     OBUMain_CARDPreDeal_USEROver
0DAD                4435     OBUMain_CARDPreDeal_Write0019gd:        
                    4436             ;Ð´0019µ½FLASH
0DAD 758372         4437             MOV     DPH,#CONST_FLASH_0019H
0DB0 7582AF         4438             MOV     DPL,#CONST_FLASH_0019L
0DB3 7F00     F     4439             MOV     R7,#XDATA_TXBUF
0DB5 7B3C           4440             MOV     R3,#CONST_Flash_0019Len         
0DB7 120000   F     4441             CALL    _wrflashXR                      
0DBA 801F           4442             JMP     OBUMain_CARDPreDeal_RecordCardType
                    4443             
                    4444     ;//////////////////////////////////////////////////////////////////////////////////
0DBC                4445     OBUMain_CARDPreDeal_PreDealMF:                                          ;MF¿¨²å¿¨Ô¤´¦Àí    
                                  
0DBC 801D           4446             JMP     OBUMain_CARDPreDeal_RecordCardType
0DBE                4447     OBUMain_CARDPreDeal_ReadBlock01: ;¶Á01¿é
0DBE 900000   F     4448             MOV     DPTR,#STR_ReadBlock01
0DC1 7F00     F     4449             MOV     R7,#DATA_RXBUF
0DC3 120000   F     4450             CALL    _FUN_LIB_FLASHTODATA
                    4451                     
0DC6 D200     F     4452             SETB    BIT_ESAMICC             
0DC8 7F00     F     4453             MOV     R7,#DATA_RXBUF
0DCA 7D00     F     4454             MOV     R5,#XDATA_TXBUF         
0DCC 120000   F     4455             CALL    _FUN_CARDAPP_CardChannel
0DCF 7800     F     4456             MOV     R0,#XDATA_TXBUF + 1
                    4457                     ;MOVX   A,@R0
0DD1 758301         4458             MOV     DPH,#1
0DD4 8882           4459             MOV     DPL,R0
0DD6 E0             4460             MOVX    A,@DPTR
0DD7 6002           4461             JZ      OBUMain_CARDPreDeal_ReadBlock0101                       ;³ö´í£¬Ôò½áÊøÔ¤´¦Àí
                                  
0DD9 8055           4462             JMP     OBUMain_CARDPreDeal_USEROver
0DDB                4463     OBUMain_CARDPreDeal_ReadBlock0101:
0DDB                4464     OBUMain_CARDPreDeal_ReadBlock04: ;¶Á04¿é
0DDB                4465     OBUMain_CARDPreDeal_ReadBlock10: ;¶Á04¿é
0DDB                4466     OBUMain_CARDPreDeal_RecordCardType:;¼ÇÂ¼¿¨Æ¬ÐÅÏ¢
0DDB D200     F     4467             setb    BIT_USEROK
                    4468             
                    4469             ;--- ¼ÇÂ¼¿¨Æ¬ÀàÐÍ ---
0DDD 7800     F     4470             MOV     R0,#XDATA_TXBUF
0DDF E4             4471             CLR     A
0DE0 A200     F     4472             MOV     C,BIT_ISContact
0DE2 92E0           4473             MOV     ACC.0,C
                    4474             ;2013-09-18 
0DE4 A200     F     4475             mov     c,BIT_ProMF
0DE6 92E1           4476             mov     acc.1,c 
0DE8 A200     F     4477             mov     c,BIT_INSERTCARD
0DEA 92E2           4478             mov     acc.2,c
                    4479                     ;MOVX   @R0,A
0DEC 758301         4480             MOV     DPH,#1 
0DEF 8882           4481             MOV     DPL,R0 
0DF1 F0             4482             MOVX    @DPTR,A 
                    4483             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    75

                    4484             ;Ð´¿¨Æ¬ÐÅÏ¢µ½ Flash ÖÐÈ¥
0DF2 758372         4485             MOV     DPH,#CONST_FLASH_LASTCARDH
0DF5 7582EB         4486             MOV     DPL,#CONST_FLASH_LASTCARDL
0DF8 7F00     F     4487             MOV     R7,#XDATA_TXBUF
0DFA 7B01           4488             MOV     R3,#CONST_Flash_CardTypeLEN             
0DFC 120000   F     4489             CALL    _wrflashXR
                    4490             
                    4491             ;Èç¹ûESAMÃ»ÓÐÔ¤´¦Àí³É¹¦£¬Ò»Ñù²»¿ÉÒÔÖÃÔ¤´¦Àí³É¹¦±ê¼Ç
0DFF 30002E   F     4492             JNB     BIT_ESAMOK,OBUMain_CARDPreDeal_USEROver
                    4493             
                    4494             ;--- Ð´ÈëÔ¤´¦Àí³É¹¦±ê¼Ç --- 
0E02 7800     F     4495             MOV     R0,#XDATA_TXBUF
0E04 7488           4496             MOV     A,#CONST_SYS_PREFlag
                    4497                     ;MOVX   @R0,A
0E06 758301         4498             MOV     DPH,#1 
0E09 8882           4499             MOV     DPL,R0 
0E0B F0             4500             MOVX    @DPTR,A
                    4501             
0E0C 758372         4502             MOV     DPH,#CONST_FALSH_PREFlagH
0E0F 7582F4         4503             MOV     DPL,#CONST_FALSH_PREFlagL
0E12 7F00     F     4504             MOV     R7,#XDATA_TXBUF
0E14 7B01           4505             MOV     R3,#CONST_FALSH_PREFlagLen
0E16 120000   F     4506             CALL    _wrflashXR
                    4507             
0E19 7800     F     4508             MOV     R0,#XDATA_TXBUF
0E1B 74AA           4509             MOV     A,#CONST_SYS_AA
                    4510                     ;MOVX   @R0,A
0E1D 758301         4511             MOV     DPH,#1 
0E20 8882           4512             MOV     DPL,R0 
0E22 F0             4513             MOVX    @DPTR,A
                    4514             
0E23 758372         4515             MOV     DPH,#CONST_FALSH_PREFlag02H
0E26 7582F5         4516             MOV     DPL,#CONST_FALSH_PREFlag02L
0E29 7F00     F     4517             MOV     R7,#XDATA_TXBUF
0E2B 7B01           4518             MOV     R3,#1
0E2D 120000   F     4519             CALL    _wrflashXR      
0E30                4520     OBUMain_CARDPreDeal_USEROver:                                   ;ÓÃ»§¿¨Æ¬Ô¤´¦ÀíÍê³É     
0E30 120000   F     4521             CALL    _fun_OBUMAIN_bdcb
                    4522             ;--- ESAM ¿¨²å¿¨Ô¤´¦Àí³ÌÐò ---
0E33 30005F   F     4523             JNB     BIT_ESAM,OBUMain_CARDPreDeal_ESAMPreDealOver            ;µ±ESAM¿¨²»´æÔÚÊ±£¬
                             Ôò²»¶Ásys infoÎÄ¼þ   
0E36 30005C   F     4524             JNB     BIT_ESAMOK,OBUMain_CARDPreDeal_ESAMPreDealOver          ;µ±ESAM¿¨¸´Î»²»³É¹¦
                             Ê±£¬Ôò²»¶Ásys infoÎÄ¼þ               
0E39 C200     F     4525             CLR     BIT_ESAMOK      
                    4526             ;Ñ¡Ôñ 3F00 ÎÄ¼þ
0E3B C200     F     4527             CLR     BIT_ESAMICC
0E3D C200     F     4528             CLR     BIT_GETRESULT
0E3F 7F00     F     4529             MOV     R7,#DATA_RXBUF
0E41 7D00     F     4530             MOV     R5,#XDATA_TXBUF
0E43 7B3F           4531             MOV     R3,#03FH
0E45 7A00           4532             MOV     R2,#000H
0E47 120000   F     4533             CALL    _FUN_CARDAPP_SelectFile
0E4A EF             4534             MOV     A,R7
0E4B 6006           4535             JZ      OBUMain_CARDPreDeal_Select3F00R
0E4D 300003   F     4536             JNB     BIT_ESAMErr,OBUMain_CARDPreDeal_Select3F00R
0E50 120000   F     4537             CALL    _FUN_LIB_ESAMErr        
0E53                4538     OBUMain_CARDPreDeal_Select3F00R:        
                    4539             ;¶ÁÏµÍ³ÐÅÏ¢ÎÄ¼þ
0E53 D200     F     4540             SETB    BIT_GETRESULT
0E55 C200     F     4541             CLR     BIT_ESAMICC
0E57 7F00     F     4542             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
0E59 7D00     F     4543             MOV     R5,#XDATA_TXBUF 
0E5B 7C01           4544             MOV     R4,#01H                                                 ;R4             ---
                                  ÎÄ¼þID
0E5D 7B58           4545             MOV     R3,#CONST_Flash_SysinfoLen                              ;R3             ---
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    76

                                  ³¤¶È
0E5F 7A00           4546             MOV     R2,#00H                                                 ;R2             ---
                                  Offset
0E61 120000   F     4547             CALL    _FUN_CARDAPP_ReadBinary 
0E64 EF             4548             MOV     A,R7
                    4549             
0E65 6008           4550             JZ      OBUMain_CARDPreDeal_WriteSysInfo
0E67 300003   F     4551             JNB     BIT_ESAMErr,OBUMain_BASEINIT_ESAMSysInfoERR
0E6A 120000   F     4552             CALL    _FUN_LIB_ESAMErr
0E6D                4553     OBUMain_BASEINIT_ESAMSysInfoERR:
0E6D 8026           4554             JMP     OBUMain_CARDPreDeal_ESAMPreDealOver
0E6F                4555     OBUMain_CARDPreDeal_WriteSysInfo:       
0E6F D200     F     4556             SETB    BIT_ESAMOK      
                    4557             ; Ð´ Sysinfo µ½ FLASH
0E71 758372         4558             MOV     DPH,#CONST_FLASH_SYSINFOH
0E74 758200         4559             MOV     DPL,#CONST_FLASH_SYSINFOL
0E77 7F00     F     4560             MOV     R7,#XDATA_TXBUF
0E79 7B58           4561             MOV     R3,#CONST_Flash_SysinfoLen
0E7B 120000   F     4562             CALL    _wrflashXR
                    4563             
0E7E 7800     F     4564             MOV     R0,#XDATA_TXBUF
0E80 74AA           4565             MOV     A,#CONST_SYS_AA
                    4566                     ;MOVX   @R0,A
0E82 758301         4567             MOV     DPH,#1 
0E85 8882           4568             MOV     DPL,R0 
0E87 F0             4569             MOVX    @DPTR,A
                    4570             
0E88 758372         4571             MOV     DPH,#CONST_FALSH_PREFlag03H
0E8B 7582F6         4572             MOV     DPL,#CONST_FALSH_PREFlag03L
0E8E 7F00     F     4573             MOV     R7,#XDATA_TXBUF
0E90 7B01           4574             MOV     R3,#1
0E92 120000   F     4575             CALL    _wrflashXR      
0E95                4576     OBUMain_CARDPreDeal_ESAMPreDealOver:    
                    4577             ;¸üÐÂÓëÔ¤¶ÁÏà¹ØµÄ±ê¼Ç¡£
                    4578             ;¶ÁÈ¡System Info ²ðÐ¶Î»(µÚ27¸ö×Ö½Ú)¡£
                    4579             ;·ÅÔÚÕâÀï¶Á£¬ÖØÒªµÄÔ­ÒòÊÇ£¬ÉÏµçÊ±ÐèÑÓÊ±£¬ËùÒÔ¿ÉÒÔÊ¡Ê±¡£
0E95 758372         4580             MOV     DPH,#CONST_FLASH_SYSINFOH
0E98 75821A         4581             MOV     DPL,#CONST_FLASH_SYSINFOL + 26
0E9B 750700   F     4582             MOV     AR7,#XDATA_FIX
0E9E 7B01           4583             MOV     R3,#1
0EA0 120000   F     4584             CALL    _RDFlashXR
                    4585             
0EA3 7900     F     4586             MOV     R1,#XDATA_FIX
                    4587                     ;MOVX   A,@R1
0EA5 758301         4588             MOV     DPH,#1
0EA8 8982           4589             MOV     DPL,R1
0EAA E0             4590             MOVX    A,@DPTR
0EAB 540F           4591             ANL     A,#0FH
                    4592             
0EAD 6004           4593             JZ      OBUMain_CARDPreDeal_Tampered
0EAF C200     F     4594             CLR     BIT_CD
0EB1 8002           4595             JMP     OBUMain_CARDPreDeal_TamperedOver
0EB3                4596     OBUMain_CARDPreDeal_Tampered:
0EB3 D200     F     4597             SETB    BIT_CD
0EB5                4598     OBUMain_CARDPreDeal_TamperedOver:
0EB5                4599     OBUMain_CARDPreDeal_Over:
0EB5 22             4600             RET     
                    4601     ;------------------------------------
                    4602     ;ÃèÊö:¿¨ÐÅÏ¢ÏÔÊ¾
                    4603     ;²ÎÊ:
                    4604     ;DATA_CARDTYPE  ---     22      ÏÔÊ¾Óà¶î
                    4605     ;                       23      ÏÔÊ¾Í¨ÐÐ¿¨
                    4606     ;                       XX      ÏÔÊ¾´í¿¨
                    4607     ;------------------------------------
0EB6                4608     _FUN_OBUMain_CardInfoDisplay:
0EB6 120000   F     4609             CALL    _Func_LCD_INIT
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    77

0EB9                4610     OBUMain_CardInfoDisplay_BDQLLOOP:;±È¶ÔÈ«Áã      
0EB9                4611     OBUMain_CardInfoDisplay_BDCP:;±È¶Ô³µÅÆ  
0EB9                4612     OBUMain_CardInfoDisplay_BDCPLOOP:;±È¶Ô³µÅÆÑ­»·  
0EB9                4613     OBUMain_CardInfoDisplay_cpbf:;ÏÔÊ¾³µÅÆ×Ó²»·û
                    4614             
0EB9 300019   F     4615             JNB     BIT_CD,OBUMain_CardInfoDisplay_Start                    ;Èç¹û²»ÊÇÊ§Ð§£¬ÔòÌø
                             ¹
0EBC 300016   F     4616             JNB     BIT_ACTIVECARD,OBUMain_CardInfoDisplay_Start            ;Èç¹û²»ÊÇ²å¿¨£¬ÔòÌø
                             ¹
                    4617             
0EBF C2C5           4618             CLR     Pin_red                                                 ;2010-04-21
                    4619             ;ÏÔÊ¾²ð¶¯±ê¼Ç
0EC1 7F02           4620             MOV     R7,#00000010B
0EC3 120000   F     4621             CALL    _FUN_LCD_ICON
                    4622             
                    4623             ;--- ÏÔÊ¾ ---
0EC6 7F00     F     4624             MOV     R7,#DATA_RXBUF
0EC8 900000   F     4625             MOV     DPTR,#STR_UNFIX
0ECB 120000   F     4626             CALL    _FUN_LCD_DisplayExChina 
0ECE 7FFA           4627             MOV     R7,#250
0ED0 120000   F     4628             CALL    _FUN_LIB_DELAY                                  ; MCUÆô¶¯Ê±Òª¼ÓÑÓÊ±£¬ÒÔ±ãµç
                             Ñ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬
0ED3 D2C5           4629             SETB    Pin_red                                         ;2010-04-21
                    4630     ;--------------------------------------------------------       
0ED5                4631     OBUMain_CardInfoDisplay_Start:
0ED5 200019   F     4632             JB      BIT_INSERTCARD,OBUMain_CardInfoDisplay_CardInfo 
0ED8                4633     OBUMain_CardInfoDisplay_NOCardInfo:                                             ;Ã»¿¨ÐÅÏ¢´¦
                             Àí   
0ED8                4634     OBUMain_CardInfoDisplay_CKOver: 
0ED8 C284           4635             CLR     Pin_522_RST
0EDA C2C5           4636             CLR     PIN_RED
                    4637             ;+++ SETB       PIN_GRE 
                    4638             ;--- ÏÔÊ¾ ---
0EDC 7F00     F     4639             MOV     R7,#DATA_RXBUF
0EDE 900000   F     4640             MOV     DPTR,#STR_NOCARD
0EE1 120000   F     4641             CALL    _FUN_LCD_DisplayExChina
0EE4 300007   F     4642             JNB     BIT_SETMMI,OBUMain_CardInfoDisplay_NOCardSetmmiOV       
0EE7 7F64           4643             MOV     R7,#100
0EE9 120000   F     4644             CALL    _FUN_LIB_BEEP;ÏìÁå      
0EEC D2C5           4645             SETB    PIN_RED         
0EEE                4646     OBUMain_CardInfoDisplay_NOCardSetmmiOV:         
0EEE 020000   F     4647             JMP     OBUMain_CardInfoDisplay_Over    
0EF1                4648     OBUMain_CardInfoDisplay_CardInfo:;ÓÐ¿¨ÐÅÏ¢´¦Àí  
0EF1 200007   F     4649             JB      BIT_ISContact,OBUMain_CardInfoDisplay_GETCPUINFO                ; µ±Ç°ÊÇ½Ó´
                             ¥¿¨Ê±£¬È¡CPU¿¨ÐÅÏ¢£¬²¢ÏÔÊ¾
0EF4 200004   F     4650             JB      BIT_PROMF,OBUMain_CardInfoDisplay_GETCPUINFO                    ; µ±Ç°ÊÇPRO
                             ¿¨Ê±£¬È¡CPU¿¨ÐÅÏ¢£¬²¢ÏÔÊ¾
0EF7 7417           4651             MOV     A,#CONST_CARD_PASS                                              ; µ±Ç°ÊÇMF¿
                             ¨Ê±£¬ÔòÏÔÊ¾'Í¨ÐÐ¿¨'
0EF9 8015           4652             JMP     OBUMain_CardInfoDisplay_Info
0EFB                4653     OBUMain_CardInfoDisplay_GETCPUINFO:                                             ; È¡CPU¿¨ÐÅ
                             Ï¢   
                    4654             
                    4655             ;Ñ¡Ä¿Â¼
                    4656     ;       clr     BIT_GETRESULT
                    4657     ;       SETB    BIT_ESAMICC     
                    4658     ;       MOV     R7,#DATA_RXBUF
                    4659     ;       MOV     R5,#XDATA_TXBUF
                    4660     ;       MOV     R3,#10H
                    4661     ;       MOV     R2,#01H
                    4662     ;;      CALL    _FUN_CARDAPP_SelectFile
                    4663     ;       MOV     A,R3    
                    4664     ;       XRL     A,#2    
                    4665     ;       JNZ     OBUMain_CardInfoDisplay_NOCardInfo                              ;Èç¹ûÑ¡Ä¿Â¼
                             ³ö´í£¬ÔòÏÔÊ¾ÎÞ¿¨
                    4666             ;½»Ò×³É¹¦ÏÔÊ¾¼ÇÕË¿¨»òÓà¶î
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    78

                    4667             ;½»Ò×³É¹¦½»Ò×Ê§°Ü
                    4668     ;       MOV     R0,#XDATA_SETMMI
                    4669     ;               ;MOVX   A,@R0
                    4670     
                    4671     ;       JZ      OBUMain_CardInfoDisplay_InfoS
                    4672     ;       JMP     OBUMain_CardInfoDisplay_TradeErr
                    4673     ;OBUMain_CardInfoDisplay_InfoS:
                    4674             
                    4675             ;¶Á0015ÎÄ¼þÖÐµÚ9¸ö×Ö½Ú[ ¿¨ÀàÐÍ ]
0EFB 758372         4676             MOV     DPH,#CONST_FLASH_0015H
0EFE 75828C         4677             MOV     DPL,#CONST_FLASH_0015L + 8
0F01 7B01           4678             MOV     R3,#1                                                           ;0015ÎÄ¼þ³¤
                             ¶È   
0F03 7F00     F     4679             MOV     R7,#XDATA_TXBUF
0F05 120000   F     4680             CALL    _RDFlashXR                                                      ;¶ÁFalshº¯Ê
                             Ö»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²»push r1     
0F08 7800     F     4681             MOV     R0,#XDATA_TXBUF
                    4682                     ;MOVX   A,@R0
0F0A 758301         4683             MOV     DPH,#1
0F0D 8882           4684             MOV     DPL,R0
0F0F E0             4685             MOVX    A,@DPTR
                    4686             
0F10                4687     OBUMain_CardInfoDisplay_Info:                                                   ;ÏÔÊ¾¿¨ÐÅÏ¢
                                  
0F10 B41666         4688             CJNE    A,#CONST_CARD_CONSUME,OBUMain_CardInfoDisplay_PassCard
0F13                4689     OBUMain_CardInfoDisplay_CashCard:                                               ;´¢Öµ¿¨
                    4690             
                    4691     ;       CLR     A
                    4692     ;       MOV     R0,#MONEY
                    4693     ;       MOV     @R0,A
                    4694     ;       INC     R0
                    4695     ;       MOV     @R0,A
                    4696     ;       INC     R0
                    4697     ;       MOV     @R0,A
                    4698     ;       INC     R0
                    4699     ;       MOV     @R0,A
                    4700     ;       SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
                    4701     ;       SETB    BIT_GETRESULT
                    4702     ;       MOV     R7,#DATA_RXBUF                                          ;R7 ·¢ËÍç·³åÖ¸Õë(ÄÚ
                             ´æ)
                    4703     ;       MOV     R5,#XDATA_TXBUF
                    4704     ;       CALL    _FUN_CARDAPP_GetBalance
                    4705     ;       MOV     A,R7
                    4706     ;       JNZ     OBUMain_CardInfoDisplay_Money
                    4707             
                    4708             
                    4709             
                    4710             ;¶ÁÇ®°ü
0F13 758372         4711             MOV     DPH,#CONST_FLASH_0002H
0F16 758258         4712             MOV     DPL,#CONST_FLASH_0002L
0F19 7B04           4713             MOV     R3,#4                                                           ;0015ÎÄ¼þ³¤
                             ¶È   
0F1B 7F00     F     4714             MOV     R7,#XDATA_TXBUF
0F1D 120000   F     4715             CALL    _RDFlashXR                                                      ;¶ÁFalshº¯Ê
                             Ö»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²»push r1     
                    4716             
                    4717             ;ÅÐ¶ÏÊÇ·ñ¶¼ÊÇ0xFF
0F20 7800     F     4718             MOV     R0,#XDATA_TXBUF
                    4719                     ;MOVX   A,@R0
0F22 758301         4720             MOV     DPH,#1
0F25 8882           4721             MOV     DPL,R0
0F27 E0             4722             MOVX    A,@DPTR
0F28 64FF           4723             xrl     a,#0ffh
0F2A 7023           4724             jnz     OBUMain_CardInfoDisplay_CashCardcpv
                    4725             
0F2C 08             4726             INC     R0
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    79

                    4727                     ;MOVX   A,@R0
0F2D 758301         4728             MOV     DPH,#1
0F30 8882           4729             MOV     DPL,R0
0F32 E0             4730             MOVX    A,@DPTR
0F33 64FF           4731             xrl     a,#0ffh
0F35 7018           4732             jnz     OBUMain_CardInfoDisplay_CashCardcpv
                    4733             
0F37 08             4734             INC     R0
                    4735                     ;MOVX   A,@R0
0F38 758301         4736             MOV     DPH,#1
0F3B 8882           4737             MOV     DPL,R0
0F3D E0             4738             MOVX    A,@DPTR
0F3E 64FF           4739             xrl     a,#0ffh
0F40 700D           4740             jnz     OBUMain_CardInfoDisplay_CashCardcpv     
                    4741     
0F42 08             4742             INC     R0
                    4743                     ;MOVX   A,@R0
0F43 758301         4744             MOV     DPH,#1
0F46 8882           4745             MOV     DPL,R0
0F48 E0             4746             MOVX    A,@DPTR
0F49 64FF           4747             xrl     a,#0ffh
0F4B 7002           4748             jnz     OBUMain_CardInfoDisplay_CashCardcpv     
0F4D 8044           4749             jmp     OBUMain_CardInfoDisplay_Other   
0F4F                4750     OBUMain_CardInfoDisplay_CashCardcpv:    
                    4751             ;½«Öµ Copy µ½ #Money ÄÚ´æÖÐÈ¥
0F4F 7B04           4752             MOV     R3,#4
0F51 7900     F     4753             MOV     R1,#XDATA_TXBUF
0F53 7800     F     4754             MOV     R0,#MONEY
0F55                4755     CARDACTIVE_CashCard_CopyMoney:
                    4756                     ;MOVX   A,@R1
0F55 758301         4757             MOV     DPH,#1
0F58 8982           4758             MOV     DPL,R1
0F5A E0             4759             MOVX    A,@DPTR
0F5B F6             4760             MOV     @R0,A
0F5C 08             4761             INC     R0
0F5D 09             4762             INC     R1
0F5E DBF5           4763             DJNZ    R3,CARDACTIVE_CashCard_CopyMoney
                    4764             
0F60                4765     OBUMain_CardInfoDisplay_Money:
                    4766             
0F60 C284           4767             CLR     Pin_522_RST
0F62 C2C4           4768             CLR     PIN_GRE
0F64 D2C5           4769             SETB    PIN_RED
                    4770             
                    4771             ;--- ÏÔÊ¾ Óà¶î »ò Í¨ÐÐ¿¨ ---
0F66 7F04           4772             MOV     R7,#00000100B
0F68 120000   F     4773             CALL    _FUN_LCD_ICON
                    4774             
0F6B 7F00     F     4775             MOV     R7,#DATA_RXBUF
0F6D 120000   F     4776             LCall   _dspmoney                                               ;ÏÔÊ¾ÐÂÓà¶î     
0F70 120000   F     4777             CALL    _FUN_OBUMain_BEEP
                    4778             ;+++ SETB       PIN_GRE
0F73 C2C4           4779             CLR     PIN_GRE 
0F75 D2C5           4780             SETB    PIN_RED
0F77 8033           4781             JMP     OBUMain_CardInfoDisplay_Over
                    4782             
0F79                4783     OBUMain_CardInfoDisplay_PassCard:       ;Í¨ÐÐ¿¨
0F79 B41717         4784             CJNE    A,#CONST_CARD_PASS,OBUMain_CardInfoDisplay_Other
0F7C C284           4785             CLR     Pin_522_RST
                    4786             
                    4787             ;--- ÏÔÊ¾Í¨ÐÐ¿¨ ---
0F7E C2C4           4788             CLR     PIN_GRE
0F80 D2C5           4789             SETB    PIN_RED
                    4790             
0F82 7F00     F     4791             MOV     R7,#DATA_RXBUF + 90
0F84 900000   F     4792             MOV     DPTR,#STR_PASS
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    80

0F87 120000   F     4793             CALL    _FUN_LCD_DisplayExChina
0F8A 120000   F     4794             CALL    _FUN_OBUMain_BEEP
                    4795             ;+++ SETB       PIN_GRE
                    4796             ;---CLR PIN_GRE
0F8D D2C4           4797             setb    PIN_GRE
0F8F D2C5           4798             SETB    PIN_RED
0F91 8019           4799             JMP     OBUMain_CardInfoDisplay_Over
                    4800             
0F93                4801     OBUMain_CardInfoDisplay_Other:  ;ÆäËü   
                    4802             ;--- ¿¨ÀàÐÍ²»¶ÔÊ±£¬ÏÔÊ¾"´í¿¨" ---
0F93 C284           4803             CLR     Pin_522_RST
0F95 7F00     F     4804             MOV     R7,#DATA_RXBUF+90
0F97 900000   F     4805             MOV     DPTR,#STR_ErrCARD
0F9A 120000   F     4806             CALL    _FUN_LCD_DisplayExChina
                    4807             ;+++ SETB       PIN_GRE 
0F9D 800D           4808             JMP     OBUMain_CardInfoDisplay_Over
                    4809             
                    4810             ;½»Ò×Ê§°Ü
0F9F                4811     OBUMain_CardInfoDisplay_TradeErr:
0F9F C284           4812             CLR     Pin_522_RST
0FA1 7F00     F     4813             MOV     R7,#DATA_RXBUF+90
0FA3 900000   F     4814             MOV     DPTR,#STR_SetMMIEr
0FA6 120000   F     4815             CALL    _FUN_LCD_DisplayExChina
0FA9 120000   F     4816             CALL    _FUN_OBUMain_BEEP
                    4817             ;+++ SETB       PIN_GRE
0FAC                4818     OBUMain_CardInfoDisplay_Over:
                    4819             ;---------------------
0FAC 7FFA           4820             MOV     R7,#250
0FAE 120000   F     4821             CALL    _FUN_LIB_DELAY  
0FB1 7FFA           4822             MOV     R7,#250
0FB3 120000   F     4823             CALL    _FUN_LIB_DELAY  
0FB6 7FFA           4824             MOV     R7,#250
0FB8 120000   F     4825             CALL    _FUN_LIB_DELAY  
                    4826             ;---------------------  
0FBB 020000   F     4827             JMP     AP_start        
                    4828             ;//////////////////////////////////
0FBE                4829     _FUN_OBUMain_BEEP:
0FBE C285           4830             clr     PIN_ESAM_RST    
0FC0 C284           4831             clr     Pin_522_RST
0FC2 D2A4           4832             SETB    Pin_pwrdwn
0FC4                4833     OBUMain_BEEP_B:
0FC4 7800     F     4834             MOV     R0,#XDATA_SETMMI
                    4835                     ;MOVX   A,@R0
0FC6 758301         4836             MOV     DPH,#1
0FC9 8882           4837             MOV     DPL,R0
0FCB E0             4838             MOVX    A,@DPTR
0FCC 701B           4839             JNZ     OBUMain_BEEP_err
0FCE                4840     OBUMain_BEEP_Secueed:   
0FCE 20A311         4841             jb      PIN_PWR_GSM,OBUMain_BEEP_SecueedNOKQ
0FD1                4842     OBUMain_BEEP_SecueedKQ:
0FD1 7F50           4843             MOV     R7,#80
0FD3 120000   F     4844             CALL    _FUN_LIB_BEEP   ;ÏìÁå
                    4845     
0FD6 7F64           4846             MOV     R7,#100
0FD8 120000   F     4847             CALL    _FUN_LIB_DELAY  ;ÏìÁå
                    4848     
0FDB 7F50           4849             MOV     R7,#80
0FDD 120000   F     4850             CALL    _FUN_LIB_BEEP   ;ÏìÁå
0FE0 8005           4851             JMP     OBUMain_BEEP_SecueedKQOVER
0FE2                4852     OBUMain_BEEP_SecueedNOKQ:
0FE2 7F64           4853             MOV     R7,#100
0FE4 120000   F     4854             CALL    _FUN_LIB_BEEP   ;ÏìÁå
                    4855             
0FE7                4856     OBUMain_BEEP_SecueedKQOVER:
0FE7 800F           4857             JMP     OBUMain_BEEP_OVER       
0FE9                4858     OBUMain_BEEP_err:       
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    81

0FE9 7F32           4859             MOV     R7,#50
0FEB 120000   F     4860             CALL    _FUN_LIB_BEEP   ;ÏìÁå   
0FEE 7F64           4861             MOV     R7,#100
0FF0 120000   F     4862             CALL    _FUN_LIB_delay  ;ÏìÁå   
0FF3 7F32           4863             MOV     R7,#50
0FF5 120000   F     4864             CALL    _FUN_LIB_BEEP   ;ÏìÁå   
                    4865                     
0FF8                4866     OBUMain_BEEP_OVER:
0FF8 C285           4867             clr     PIN_ESAM_RST    
0FFA C284           4868             clr     Pin_522_RST
0FFC D2A4           4869             SETB    Pin_pwrdwn      
0FFE E4             4870             CLR     A
0FFF 75A800         4871             MOV     IE,#0
                    4872             ;-------ÖØÐÂ¿ªÊ¼Ç°ÑÓÊ±ÏÔÊ¾------------
1002 7FC8           4873             MOV     R7,#200
1004 120000   F     4874             CALL    _FUN_LIB_DELAY  
                    4875             
1007 200005   F     4876             JB      BIT_esamtran,OBUMain_BEEP_APPAGAIN
100A D295           4877             SETB    PIN_PWRDWN_LCD  
100C 020000   F     4878             JMP     AP_start                
100F                4879     OBUMain_BEEP_APPAGAIN:
100F 7FFA           4880             MOV     R7,#250
                    4881             ;---CALL        _FUN_LIB_DELAY  
1011 020000   F     4882             JMP     AP_start
                    4883             
1014                4884     OBUMain_sys_OVER:
1014 75A800         4885             MOV     IE,#0
1017 020000   F     4886             JMP     AP_start        
                    4887     ;/////////////////////////////////////////////////////////////////////////////////      
101A                4888     _FUN_OBUMAIN_SELECTDF01:
101A 300019   F     4889             JNB     BIT_ESAM,OBUMAIN_SELECTDF01_OVER
                    4890             ;Ñ¡ÔñESAM¿¨µÄDF01Ä¿Â¼
101D C200     F     4891             CLR     BIT_ESAMICC     
                    4892     ;       setb    BIT_GETRESULT
101F C200     F     4893             clr     BIT_GETRESULT
                    4894     
1021 7F00     F     4895             MOV     R7,#DATA_RXBUF
1023 7D00     F     4896             MOV     R5,#XDATA_TXBUF
1025 7BDF           4897             MOV     R3,#0DFH
1027 7A01           4898             MOV     R2,#001H                
1029 120000   F     4899             CALL    _FUN_CARDAPP_SelectFile                 ; Òª½«ÓÃ»§¿¨ÊÇ·ñ½ÓÊÕÉè³É¿ÉÑ¡×´Ì¬
                    4900     
102C 6006           4901             JZ      OBUMAIN_SELECTDF01_ESAMRight
102E 300005   F     4902             JNB     BIT_ESAMErr,OBUMAIN_SELECTDF01_OVER     
1031 120000   F     4903             CALL    _FUN_LIB_ESAMErr
1034                4904     OBUMAIN_SELECTDF01_ESAMRight:
1034 D200     F     4905             SETB    BIT_ESAMOK                      ;ÉèÖÃESAM²Ù×÷³É¹¦±ê¼Ç   
1036                4906     OBUMAIN_SELECTDF01_OVER:        
1036 22             4907             RET
                    4908     ;------------------------------------
                    4909     ;ÃèÊö:ÔÚ·¢ËÍ½áÊøºó¶¨Ê±£¬½ÓÊÕ£¬Èç¹û¶¨Ê±Æ÷³¬Ê±£¬Ôò³ÌÐò´ÓÍ·¿ªÊ¼Ö´ÐÐ¡£
                    4910     ;       1¡¢·¢ÐÐÕ³£½áÊø
                    4911     ;       2¡¢ÔÚXXmsÄÚÃ»ÓÐÈÎºÎRSUÏìÓ¦
                    4912     ;²ÎÊ:
                    4913     ;ÎÞ
                    4914     ;------------------------------------   
1037                4915     _FUN_OBUMain_TIMERX:
                    4916             
1037 20000C   F     4917             JB      BIT_MMITIRMSTART,OBUMain_TIMERX_OVER
103A D200     F     4918             SETB    BIT_MMITIRMSTART
103C E4             4919             CLR     A
                    4920             ;ÉèÖÃt1Îª8Î»ÖØ×°ÔØ¶¨Ê±Æ÷
                    4921             ;ORL    A,#00100000B
                    4922             ;ÉèÖÃt0Îª16Î»¶¨Ê±Æ÷
103D 4401           4923             ORL     A,#00000001B
103F F589           4924             MOV     TMOD,A
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    82

                    4925             ;¿ªÆô³¬Ê±´¦Àí           ³¬Ê±Ê±¼äÏÞÖÆ
1041 D28C           4926             SETB    TR0             ;¿ªÆôT0
                    4927             ;---SETB        ET0             ;¿ªÆôT0Ê¹ÄÜ
                    4928             ;---SETB        EA
1043 7500FA   F     4929             MOV     DATA_PowerONTimer,#CONST_Pro_OverTime2S 
1046                4930     OBUMain_TIMERX_OVER:    
1046 22             4931             RET             
                    4932     ;///////////////////////////////////////////////////////////////////////////////////// 
                    4933     ;       DBCB    
                    4934     ;/////////////////////////////////////////////////////////////////////////////////////
1047                4935     _fun_OBUMAIN_bdcb:
1047 22             4936             ret
                    4937             
1048 200006   F     4938             JB      BIT_ISContact,OBUMAIN_bdcb_NZC                  ; Èç¹ûÊÇ½Ó´¥¿¨£¬ÔòÑ¡ 1001£¬
                             Èç¹ûÊÇ·Ç½Ó¿¨£¬ÔòPro¿¨²ÅÑ¡1001
104B 200003   F     4939             JB      BIT_proMF,OBUMAIN_bdcb_NZC
104E 020000   F     4940             jmp     OBUMAIN_bdcb_over
1051                4941     OBUMAIN_bdcb_NZC:
                    4942             
                    4943             ;¶Á³ö 0015 ÎÄ¼þÀïµÄ·ÖÉ¢Âë
1051 758372         4944             MOV     DPH,#CONST_FLASH_0015H
1054 758284         4945             MOV     DPL,#CONST_FLASH_0015L
1057 750700   F     4946             MOV     AR7,#XDATA_HOLD
105A 7B04           4947             MOV     R3,#4
105C 120000   F     4948             CALL    _RDFlashXR
                    4949             
                    4950             ;²»ÊÇËÄ´¨µÄ¿¨
                    4951             ;CB C4 B4 A8
105F 7800     F     4952             MOV     R0,#XDATA_HOLD
                    4953                     ;MOVX   A,@R0
1061 758301         4954             MOV     DPH,#1
1064 8882           4955             MOV     DPL,R0
1066 E0             4956             MOVX    A,@DPTR
1067 64CB           4957             XRL     A,#0CBH
1069 7023           4958             JNZ     OBUMAIN_bdcb_ZZSC
106B 08             4959             INC     R0
                    4960                     ;MOVX   A,@R0
106C 758301         4961             MOV     DPH,#1
106F 8882           4962             MOV     DPL,R0
1071 E0             4963             MOVX    A,@DPTR
1072 64C4           4964             XRL     A,#0C4H
1074 7018           4965             JNZ     OBUMAIN_bdcb_ZZSC
1076 08             4966             INC     R0
                    4967                     ;MOVX   A,@R0
1077 758301         4968             MOV     DPH,#1
107A 8882           4969             MOV     DPL,R0
107C E0             4970             MOVX    A,@DPTR
107D 64B4           4971             XRL     A,#0B4H
107F 700D           4972             JNZ     OBUMAIN_bdcb_ZZSC
1081 08             4973             INC     R0
                    4974                     ;MOVX   A,@R0
1082 758301         4975             MOV     DPH,#1
1085 8882           4976             MOV     DPL,R0
1087 E0             4977             MOVX    A,@DPTR
1088 64A8           4978             XRL     A,#0A8H
108A 7002           4979             JNZ     OBUMAIN_bdcb_ZZSC
                    4980             
108C 8003           4981             JMP     OBUMain_CardInfoDisplay_btVH02
108E                4982     OBUMAIN_bdcb_ZZSC:
108E 020000   F     4983             JMP     OBUMAIN_bdcb_over
                    4984             ;µ±Ç°ÊÇ ËÄ´¨ µÄ¿¨Ê±£¬±È¶Ô³µÅÆºÅ
1091                4985     OBUMain_CardInfoDisplay_btVH02:
                    4986             
                    4987             ;=== ¶Á³ö0015ÎÄ¼þÀïµÄ³µÅÆ ===
1091 758372         4988             MOV     DPH,#CONST_FLASH_0015H
1094 7582A0         4989             MOV     DPL,#CONST_FLASH_0015L + 28
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    83

1097 750700   F     4990             MOV     AR7,#XDATA_HOLD
109A 7B0A           4991             MOV     R3,#10
109C 120000   F     4992             CALL    _RDFlashXR
                    4993             
                    4994             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
109F 758372         4995             MOV     DPH,#CONST_FLASH_SYSINFOH
10A2 75821B         4996             MOV     DPL,#CONST_FLASH_SYSINFOL + 27
10A5 750700   F     4997             MOV     AR7,#XDATA_SC
10A8 7B01           4998             MOV     R3,#1
10AA 120000   F     4999             CALL    _RDFlashXR
                    5000             
                    5001             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
10AD 758372         5002             MOV     DPH,#CONST_FLASH_SYSINFOH
10B0 758224         5003             MOV     DPL,#CONST_FLASH_SYSINFOL + 36
10B3 750700   F     5004             MOV     AR7,#XDATA_HOLD + 10
10B6 7B0A           5005             MOV     R3,#10
10B8 120000   F     5006             CALL    _RDFlashXR
                    5007             
                    5008             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ³µÅÆ1
10BB 758372         5009             MOV     DPH,#CONST_FLASH_SYSINFOH
10BE 758238         5010             MOV     DPL,#CONST_FLASH_SYSINFOL + 56
10C1 750700   F     5011             MOV     AR7,#XDATA_HOLD + 20
10C4 7B0A           5012             MOV     R3,#10;8
10C6 120000   F     5013             CALL    _RDFlashXR
                    5014             
                    5015             ;¶Á³öÏµÍ³ÐÅÏ¢ÎÄ¼þÀïµÄ ³µ ÅÆ 1
10C9 758372         5016             MOV     DPH,#CONST_FLASH_SYSINFOH                               ; 
10CC 75824C         5017             MOV     DPL,#CONST_FLASH_SYSINFOL + 76                          ; 
10CF 750700   F     5018             MOV     AR7,#XDATA_HOLD + 30                                    ; 24
10D2 7B0A           5019             MOV     R3,#10                                                  ; 8
10D4 120000   F     5020             CALL    _RDFlashXR                                              ; 
                    5021                     
10D7 C000           5022             PUSH    AR0
10D9 7800     F     5023             MOV     R0,#XDATA_SC
                    5024                     ;MOVX   A,@R0
10DB 758301         5025             MOV     DPH,#1
10DE 8882           5026             MOV     DPL,R0
10E0 E0             5027             MOVX    A,@DPTR
                    5028             
10E1 D000           5029             POP     AR0     
10E3 6046           5030             JZ      OBUMAIN_bdcb_over
                    5031             
10E5 7A00           5032             MOV     R2,#0                           
10E7                5033     OBUMAIN_bdcb_CPStartLOOP:                       
10E7 0A             5034             INC     R2                              
10E8                5035     OBUMAIN_bdcb_CP01:                      
10E8 BA0104         5036             CJNE    R2,#1,OBUMAIN_bdcb_CP02 
10EB 7900     F     5037             MOV     R1,#XDATA_HOLD+10               
10ED 8009           5038             JMP     OBUMAIN_bdcb_CP04               
10EF                5039     OBUMAIN_bdcb_CP02:                      
10EF BA0204         5040             CJNE    R2,#2,OBUMAIN_bdcb_CP03 
10F2 7900     F     5041             MOV     R1,#XDATA_HOLD + 20
10F4 8002           5042             JMP     OBUMAIN_bdcb_CP04               
10F6                5043     OBUMAIN_bdcb_CP03:
10F6 7900     F     5044             MOV     R1,#XDATA_HOLD+30
10F8                5045     OBUMAIN_bdcb_CP04:              
10F8 7800     F     5046             MOV     R0,#XDATA_HOLD
10FA 7B0A           5047             MOV     R3,#10;8
10FC                5048     OBUMAIN_bdcb_VErrCPLOOP:;±È¶Ô³µÅÆÑ­»·
                    5049                     ;MOVX   A,@R0
10FC 758301         5050             MOV     DPH,#1
10FF 8882           5051             MOV     DPL,R0
1101 E0             5052             MOVX    A,@DPTR
1102 F5F0           5053             MOV     B,A
                    5054                     ;MOVX   A,@R1
1104 758301         5055             MOV     DPH,#1
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    84

1107 8982           5056             MOV     DPL,R1
1109 E0             5057             MOVX    A,@DPTR
110A 65F0           5058             XRL     A,B
110C 7006           5059             JNZ     OBUMAIN_bdcb_CPDif
110E 08             5060             INC     R0
110F 09             5061             INC     R1
1110 DBEA           5062             DJNZ    R3,OBUMAIN_bdcb_VErrCPLOOP      
1112                5063     OBUMAIN_bdcb_ZC:                
                    5064             ;setb   BIT_CKXT
1112 8017           5065             jmp     OBUMAIN_bdcb_over
1114                5066     OBUMAIN_bdcb_CPDif:
1114 BA0400         5067             CJNE    R2,#4,$+3
1117 5012           5068             JNC     OBUMAIN_bdcb_over
1119 C000           5069             PUSH    AR0
111B 7800     F     5070             MOV     R0,#XDATA_SC
                    5071                     ;MOVX   A,@R0
111D 758301         5072             MOV     DPH,#1
1120 8882           5073             MOV     DPL,R0
1122 E0             5074             MOVX    A,@DPTR
1123 D000           5075             POP     AR0     
1125 8AF0           5076             MOV     B,R2
1127 65F0           5077             XRL     A,B
1129 70BC           5078             JNZ     OBUMAIN_bdcb_CPStartLOOP
112B                5079     OBUMAIN_bdcb_over:;
112B 22             5080             ret             
                    5081     ;---------------------------------------------------------------------- 
                    5082     ; RTC ´¦Àíº¯Ê
                    5083     ;       ÓÃÓÚ RTC È¡ CELLID Ê±
                    5084     ;----------------------------------------------------------------------
112C                5085     _FUN_OBUMain_RTCUP:     
112C 120000   F     5086             CALL    _FUN_GSM_RTCOFF 
112F 22             5087             RET
                    5088     ;///////////////////////////////////////////////////////////////////////////////////
                    5089     ;µÍµçÑ¹±¨¾¯
                    5090     ;       1¡¢²é¿´µ±Ç°ÊÇ·ñÁ¬½ÓUSB
                    5091     ;       2¡¢²é¿´µ±Ç°ÊÇ·ñ
                    5092     ;
                    5093     ;·µ»ØÖµ
                    5094     ;       R7      =       CONST_STATE_FALSE  µÍµçÑ¹
                    5095     ;               =       CONST_STATE_TRUE   µçÑ¹Õ³£
                    5096     ;///////////////////////////////////////////////////////////////////////////
1130                5097     _FUN_OBUMain_CardInfoDisplay02:         
1130 120000   F     5098             CALL    _Func_LCD_INIT  
1133                5099     OBUMain_CardInfoDisplay02_cpbf:;ÏÔÊ¾³µÅÆ×Ó²»·û  
                    5100             
1133 300019   F     5101             JNB     BIT_CD,OBUMain_CardInfoDisplay02_Start                  ;Èç¹û²»ÊÇÊ§Ð§£¬ÔòÌø
                             ¹
1136 300016   F     5102             JNB     BIT_ACTIVECARD,OBUMain_CardInfoDisplay02_Start          ;Èç¹û²»ÊÇ²å¿¨£¬ÔòÌø
                             ¹
                    5103             
                    5104     ;------------Ôö¼ÓÁÁºìµÆ----------------------------------
1139 C2C5           5105             CLR     Pin_red         ;2010-04-21
                    5106     ;--------------------------------------------------------
                    5107             
                    5108             ;ÏÔÊ¾²ð¶¯±ê¼Ç
113B 7F02           5109             MOV     R7,#00000010B
113D 120000   F     5110             CALL    _FUN_LCD_ICON
                    5111             
                    5112             ;--- ÏÔÊ¾ ---
1140 7F00     F     5113             MOV     R7,#DATA_RXBUF
1142 900000   F     5114             MOV     DPTR,#STR_UNFIX
1145 120000   F     5115             CALL    _FUN_LCD_DisplayExChina
                    5116             
1148 7FFA           5117             MOV     R7,#250
114A 120000   F     5118             CALL    _FUN_LIB_DELAY                                                  ; MCUÆô¶¯Ê±
                             Òª¼ÓÑÓÊ±£¬ÒÔ±ãµçÑ¹ÎÈ¶¨ºóÔÙ²Ù×÷¿¨Æ¬
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    85

114D D2C5           5119             SETB    Pin_red                                                         ;2010-04-21
114F                5120     OBUMain_CardInfoDisplay02_Start:
114F 200019   F     5121             JB      BIT_INSERTCARD,OBUMain_CardInfoDisplay02_CardInfo       
1152                5122     OBUMain_CardInfoDisplay02_NOCardInfo:                                           ;Ã»¿¨ÐÅÏ¢´¦
                             Àí   
1152                5123     OBUMain_CardInfoDisplay02_CKOver:       
1152 C284           5124             CLR     Pin_522_RST
1154 C2C5           5125             CLR     PIN_RED
                    5126             ;+++ SETB       PIN_GRE 
                    5127             ;--- ÏÔÊ¾ ---
1156 7F00     F     5128             MOV     R7,#DATA_RXBUF
1158 900000   F     5129             MOV     DPTR,#STR_NOCARD
115B 120000   F     5130             CALL    _FUN_LCD_DisplayExChina 
115E 300007   F     5131             JNB     BIT_SETMMI,OBUMain_CardInfoDisplay02_NOCardSetmmiOV     
1161 7F64           5132             MOV     R7,#100
1163 120000   F     5133             CALL    _FUN_LIB_BEEP                                                   ;ÏìÁå
1166 D2C5           5134             SETB    PIN_RED         
1168                5135     OBUMain_CardInfoDisplay02_NOCardSetmmiOV:               
1168 020000   F     5136             JMP     OBUMain_CardInfoDisplay02_Over  
116B                5137     OBUMain_CardInfoDisplay02_CardInfo:;ÓÐ¿¨ÐÅÏ¢´¦Àí
116B 200007   F     5138             JB      BIT_ISContact,OBUMain_CardInfoDisplay02_GETCPUINFO              ; µ±Ç°ÊÇ½Ó´
                             ¥¿¨Ê±£¬È¡CPU¿¨ÐÅÏ¢£¬²¢ÏÔÊ¾
116E 200004   F     5139             JB      BIT_PROMF,OBUMain_CardInfoDisplay02_GETCPUINFO                  ; µ±Ç°ÊÇPRO
                             ¿¨Ê±£¬È¡CPU¿¨ÐÅÏ¢£¬²¢ÏÔÊ¾
1171 7417           5140             MOV     A,#CONST_CARD_PASS                                              ; µ±Ç°ÊÇMF¿
                             ¨Ê±£¬ÔòÏÔÊ¾'Í¨ÐÐ¿¨'
1173 8015           5141             JMP     OBUMain_CardInfoDisplay02_Info
1175                5142     OBUMain_CardInfoDisplay02_GETCPUINFO:                                           ; È¡CPU¿¨ÐÅ
                             Ï¢    
                    5143             ;¶Á0015ÎÄ¼þÖÐµÚ9¸ö×Ö½Ú[ ¿¨ÀàÐÍ ]
1175 758372         5144             MOV     DPH,#CONST_FLASH_0015H
1178 75828C         5145             MOV     DPL,#CONST_FLASH_0015L + 8
117B 7B01           5146             MOV     R3,#1                                                           ;0015ÎÄ¼þ³¤
                             ¶È   
117D 7F00     F     5147             MOV     R7,#XDATA_TXBUF
117F 120000   F     5148             CALL    _RDFlashXR                                                      ;¶ÁFalshº¯Ê
                             Ö»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²»push r1     
1182 7800     F     5149             MOV     R0,#XDATA_TXBUF
                    5150                     ;MOVX   A,@R0
1184 758301         5151             MOV     DPH,#1
1187 8882           5152             MOV     DPL,R0
1189 E0             5153             MOVX    A,@DPTR
                    5154             ;call   _fun_test_display
118A                5155     OBUMain_CardInfoDisplay02_Info:                                                 ;ÏÔÊ¾¿¨ÐÅÏ¢
                                  
118A B4165D         5156             CJNE    A,#CONST_CARD_CONSUME,OBUMain_CardInfoDisplay02_PassCard
118D                5157     OBUMain_CardInfoDisplay02_CashCard:                                             ;´¢Öµ¿¨
                    5158             
                    5159             ;¶ÁÇ®°ü
118D 758372         5160             MOV     DPH,#CONST_FLASH_0002H
1190 758258         5161             MOV     DPL,#CONST_FLASH_0002L
1193 7B04           5162             MOV     R3,#4                                                           ;0015ÎÄ¼þ³¤
                             ¶È   
1195 7F00     F     5163             MOV     R7,#XDATA_TXBUF
1197 120000   F     5164             CALL    _RDFlashXR                                                      ;¶ÁFalshº¯Ê
                             Ö»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²»push r1     
                    5165             
                    5166             ;ÅÐ¶ÏÊÇ·ñ¶¼ÊÇ0xFF
119A 7800     F     5167             MOV     R0,#XDATA_TXBUF
                    5168                     ;MOVX   A,@R0
119C 758301         5169             MOV     DPH,#1
119F 8882           5170             MOV     DPL,R0
11A1 E0             5171             MOVX    A,@DPTR
11A2 64FF           5172             xrl     a,#0ffh
11A4 7023           5173             jnz     OBUMain_CardInfoDisplay02_CashCardcpv
                    5174             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    86

11A6 08             5175             INC     R0
                    5176                     ;MOVX   A,@R0
11A7 758301         5177             MOV     DPH,#1
11AA 8882           5178             MOV     DPL,R0
11AC E0             5179             MOVX    A,@DPTR
11AD 64FF           5180             xrl     a,#0ffh
11AF 7018           5181             jnz     OBUMain_CardInfoDisplay02_CashCardcpv
                    5182             
11B1 08             5183             INC     R0
                    5184                     ;MOVX   A,@R0
11B2 758301         5185             MOV     DPH,#1
11B5 8882           5186             MOV     DPL,R0
11B7 E0             5187             MOVX    A,@DPTR
11B8 64FF           5188             xrl     a,#0ffh
11BA 700D           5189             jnz     OBUMain_CardInfoDisplay02_CashCardcpv   
                    5190     
11BC 08             5191             INC     R0
                    5192                     ;MOVX   A,@R0
11BD 758301         5193             MOV     DPH,#1
11C0 8882           5194             MOV     DPL,R0
11C2 E0             5195             MOVX    A,@DPTR
11C3 64FF           5196             xrl     a,#0ffh
11C5 7002           5197             jnz     OBUMain_CardInfoDisplay02_CashCardcpv   
11C7 8032           5198             jmp     OBUMain_CardInfoDisplay02_Other 
11C9                5199     OBUMain_CardInfoDisplay02_CashCardcpv:
                    5200             ;½«Öµ Copy µ½ #Money ÄÚ´æÖÐÈ¥
11C9 7B04           5201             MOV     R3,#4
11CB 7900     F     5202             MOV     R1,#XDATA_TXBUF
11CD 7800     F     5203             MOV     R0,#MONEY
11CF                5204     CARDACTIVE_CashCard_CopyMoney02:
                    5205                     ;MOVX   A,@R1
11CF 758301         5206             MOV     DPH,#1
11D2 8982           5207             MOV     DPL,R1
11D4 E0             5208             MOVX    A,@DPTR
11D5 F6             5209             MOV     @R0,A
11D6 08             5210             INC     R0
11D7 09             5211             INC     R1
11D8 DBF5           5212             DJNZ    R3,CARDACTIVE_CashCard_CopyMoney02      
11DA                5213     OBUMain_CardInfoDisplay02_Money:        
11DA C2C4           5214             CLR     PIN_GRE
11DC D2C5           5215             SETB    PIN_RED
                    5216             
                    5217             ;--- ÏÔÊ¾Óà¶î»òÍ¨ÐÐ¿¨ ---
11DE 7F04           5218             MOV     R7,#00000100B
11E0 120000   F     5219             CALL    _FUN_LCD_ICON
                    5220             
11E3 7F00     F     5221             MOV     R7,#DATA_RXBUF
11E5 120000   F     5222             LCall   _dspmoney                                               ;ÏÔÊ¾ÐÂÓà¶î     
                    5223             ;+++ SETB       PIN_GRE
11E8 801F           5224             JMP     OBUMain_CardInfoDisplay02_Over
                    5225             
11EA                5226     OBUMain_CardInfoDisplay02_PassCard:     ;Í¨ÐÐ¿¨
11EA B4170E         5227             CJNE    A,#CONST_CARD_PASS,OBUMain_CardInfoDisplay02_Other
                    5228             ;--- ÏÔÊ¾Í¨ÐÐ¿¨ ---
11ED C2C4           5229             CLR     PIN_GRE
11EF D2C5           5230             SETB    PIN_RED
                    5231             
11F1 7F00     F     5232             MOV     R7,#DATA_RXBUF + 90
11F3 900000   F     5233             MOV     DPTR,#STR_PASS
11F6 120000   F     5234             CALL    _FUN_LCD_DisplayExChina
                    5235             
                    5236             ;+++ SETB       PIN_GRE
11F9 800E           5237             JMP     OBUMain_CardInfoDisplay02_Over  
11FB                5238     OBUMain_CardInfoDisplay02_Other:        ;ÆäËü
11FB C284           5239             CLR     Pin_522_RST
                    5240             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    87

                    5241             
                    5242             
                    5243             ;--- ¿¨ÀàÐÍ²»¶ÔÊ±£¬ÏÔÊ¾"´í¿¨" ---
11FD 7F00     F     5244             MOV     R7,#DATA_RXBUF+90
11FF 900000   F     5245             MOV     DPTR,#STR_ErrCARD
1202 120000   F     5246             CALL    _FUN_LCD_DisplayExChina
                    5247             ;+++ SETB       PIN_GRE 
1205 C2C5           5248             CLR     PIN_RED 
1207 8000           5249             JMP     OBUMain_CardInfoDisplay02_Over          
                    5250             
1209                5251     OBUMain_CardInfoDisplay02_Over:         
1209 300037   F     5252             JNB     BIT_INSERTCARD,OBUMain_CardInfoDisplay02_Over02 
                    5253             
                    5254             ;=1²»ÆôÓÃ = 0ÆôÓÃ
120C 7401           5255             MOV     A,#CONST_INPUT_ISEnable
120E 7033           5256             JNZ     OBUMain_CardInfoDisplay02_Over02        
                    5257             
1210 758372         5258             MOV     DPH,#CONST_FLASH_0019H
1213 7582BC         5259             MOV     DPL,#CONST_FLASH_0019L + 13
1216 750700   F     5260             MOV     AR7,#XDATA_HOLD
1219 7B01           5261             MOV     R3,#1
121B 120000   F     5262             CALL    _RDFlashXR      
121E 7800     F     5263             MOV     R0,#XDATA_HOLD
                    5264             
                    5265                     ;MOVX   A,@R0
1220 758301         5266             MOV     DPH,#1
1223 8882           5267             MOV     DPL,R0
1225 E0             5268             MOVX    A,@DPTR
1226 6401           5269             XRL     A,#CONST_MTC_INPUT
1228 600C           5270             JZ      OBUMain_CardInfoDisplay02_IN
                    5271                     ;MOVX   A,@R0
122A 758301         5272             MOV     DPH,#1
122D 8882           5273             MOV     DPL,R0
122F E0             5274             MOVX    A,@DPTR
1230 6403           5275             XRL     A,#CONST_ETC_INPUT
1232 6002           5276             JZ      OBUMain_CardInfoDisplay02_IN
1234 800D           5277             JMP     OBUMain_CardInfoDisplay02_Over02
                    5278             
1236                5279     OBUMain_CardInfoDisplay02_IN:;ÏÔÊ¾Èë¿ÚÐÅÏ¢
                    5280             
1236 7FFA           5281             MOV     R7,#250
1238 120000   F     5282             CALL    _FUN_LIB_DELAY
123B 7F00     F     5283             MOV     R7,#DATA_RXBUF+90
123D 900000   F     5284             MOV     DPTR,#STR_INFLAG
1240 120000   F     5285             CALL    _FUN_LCD_DisplayExChina
                    5286             
1243                5287     OBUMain_CardInfoDisplay02_Over02:
1243 7FFA           5288             MOV     R7,#250
1245 120000   F     5289             CALL    _FUN_LIB_DELAY
                    5290             
1248 22             5291             RET
                    5292     ;///////////////////////////////////////////////////////////////////////////////////
1249                5293     _FUN_CC1101_spioSingleSoft02:
                    5294     ;       CLR     Pin_CC1101_SS
1249                5295     CC1101_spioSingleSoft02_S:
1249 00             5296             NOP
124A 00             5297             NOP
124B 00             5298             NOP
124C 00             5299             NOP
124D 00             5300             NOP
                    5301                     
                    5302             ;Ð´µØÖ·
124E 7B08           5303             MOV     R3,#8
1250                5304     CC1101_spioSingleSoft02_WriteAddrLOOP:
                    5305     ;       CLR     PIN_CC1101_SCLK                         ;4      
1250 33             5306             RLC     A                                       ;1
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    88

                    5307     ;       MOV     PIN_CC1101_MOSI,C                       ;4      
1251 00             5308             NOP
1252 00             5309             NOP
                    5310     ;       SETB    PIN_CC1101_SCLK                         ;4      
1253 A2C1           5311             MOV     C,PIN_522_MISO
1255 DBF9           5312             DJNZ    R3,CC1101_spioSingleSoft02_WriteAddrLOOP        ;4      
1257 33             5313             RLC     A                                       ;1
1258 F5F0           5314             MOV     B,A             
125A                5315     CC1101_spioSingleSoft02_WriteDAOVLOOP:
125A 00             5316             NOP
125B 00             5317             NOP
125C 00             5318             NOP
125D 00             5319             NOP
125E 00             5320             NOP
125F 22             5321             RET     
                    5322     ;///////////////////////////////////////////////////////////////////////////////////
1260                5323     _FUN_OBUMAIN_PreSleep:
1260 C28C           5324             CLR     TR0             ;¹Ø±ÕT0
1262 C2A9           5325             CLR     ET0             ;¹Ø±ÕT0Ê¹ÄÜ
1264 C2AF           5326             CLR     EA              
                    5327             ;--- Çå³Flash ---
1266 758372         5328             MOV     DPH,#CONST_FLASH_SYSINFOH
1269 758200         5329             MOV     DPL,#CONST_FLASH_SYSINFOL
126C 7B01           5330             MOV     R3,#1
126E 120000   F     5331             CALL    _eraseflash
                    5332             
                    5333             ;--- Èç¹û½»Ò×³É¹¦¾Í¼ÇÂ¼ÌìÏßID ---
                    5334             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
1271 758372         5335             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
1274 7582EC         5336             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
1277 7F00     F     5337             MOV     R7,#XDATA_BeaconID
1279 7B08           5338             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen     
127B 120000   F     5339             CALL    _wrflashXR      
127E 120000   F     5340             CALL    OBUMain_CARDPreDeal_ReadSysInfo                         ;¼ò»¯°æÔ¤¶Á     
1281 120000   F     5341             CALL    _FUN_GSM_Insert
                    5342             
1284 22             5343             RET     
                    5344     ;///////////////////////////////////////////////////////////////////////////////////
                    5345     ;       ²¹³äÔ¤¶Á
                    5346     ;///////////////////////////////////////////////////////////////////////////////////
1285                5347     _FUN_OBUMAIN_PrePu:     
1285 758372         5348             MOV     DPH,#CONST_FLASH_SYSINFOH
1288 758200         5349             MOV     DPL,#CONST_FLASH_SYSINFOL
128B 7B01           5350             MOV     R3,#1
128D 120000   F     5351             CALL    _eraseflash     
                    5352             ;--- Èç¹û½»Ò×³É¹¦¾Í¼ÇÂ¼ÌìÏßID ---
                    5353             ;Ð´¿¨Æ¬ÐÅÏ¢µ½FlashÖÐÈ¥
1290 758372         5354             MOV     DPH,#CONST_Flash_BeaconIDUnixTimeH
1293 7582EC         5355             MOV     DPL,#CONST_Flash_BeaconIDUnixTimeL
1296 7F00     F     5356             MOV     R7,#XDATA_LastBeaconID
1298 7B08           5357             MOV     R3,#CONST_Flash_BeaconIDUnixTimeLen     
129A 120000   F     5358             CALL    _wrflashXR      
129D 120000   F     5359             CALL    OBUMain_CARDPreDeal_ReadSysInfo                         ;¼ò»¯°æÔ¤¶Á        
                                  
12A0 22             5360             RET
                    5361     ;///////////////////////////////////////////////////////////////////////////////////
                    5362     ;               Ò»°ãÐÔ´íÎó      01      µ¼ÈëÊ§°Ü        STR_InputFail
                    5363     ;               ºÏÍ¬ºÅ²»Í¬      02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                    5364     ;               Ê¹ÓÃ´ÎÊ=FFH     03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
                    5365     ;               ³É¹¦            00      µ¼Èë³É¹¦        STR_InputOk
                    5366     ;               ·Çµ¼Èë¿¨        FF
                    5367     
                    5368     ;               Ò»°ãÐÔ´íÎó      04      ¼¤»îÊ§°Ü        STR_ActiveFail
                    5369     ;               ºÏÍ¬ºÅ²»Í¬      05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                    5370     ;               Ê¹ÓÃ´ÎÊ=FFH     06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
                    5371     ;               ³É¹¦            00      ¼¤»î³É¹¦        STR_ActiveOK
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    89

                    5372     ;               ·Ç¼¤»î¿¨        FF
                    5373     ;²ÎÊ
                    5374     ;       R7      ´íÎó´úÂë
                    5375     ;       R5
                    5376     ;·µ»ØÖµ
                    5377     ;       DPTR    Òº¾§ÏÔÊ¾Öµ
                    5378     ;·µ»ØÖµ
                    5379     ;       DPTR    Òº¾§ÏÔÊ¾Öµ
                    5380     ;///////////////////////////////////////////////////////////////////////////////////
12A1                5381     _FUN_OBUMAIN_DR:
                    5382             
12A1                5383     OBUMAIN_DR_00:
12A1 BF000D         5384             CJNE    R7,#0,OBUMAIN_DR_01
                    5385             
12A4                5386     DR_00_0D:
12A4 BD0D05         5387             CJNE    R5,#0DH,DR_00_0E
12A7 900000   F     5388             MOV     DPTR,#STR_InputOk
12AA 8003           5389             JMP     DR_00_0D0EOV
12AC                5390     DR_00_0E:
12AC 900000   F     5391             MOV     DPTR,#STR_ActiveOK      
12AF                5392     DR_00_0D0EOV:
12AF 8030           5393             JMP     OBUMAIN_DR_OVER
12B1                5394     OBUMAIN_DR_01:
12B1 BF0105         5395             CJNE    R7,#1,OBUMAIN_DR_02
12B4 900000   F     5396             MOV     DPTR,#STR_InputFail
12B7 8028           5397             JMP     OBUMAIN_DR_OVER
12B9                5398     OBUMAIN_DR_02:
12B9 BF0205         5399             CJNE    R7,#2,OBUMAIN_DR_03
12BC 900000   F     5400             MOV     DPTR,#STR_IllegalInputCard
12BF 8020           5401             JMP     OBUMAIN_DR_OVER
12C1                5402     OBUMAIN_DR_03:
12C1 BF0305         5403             CJNE    R7,#3,OBUMAIN_DR_04
12C4 900000   F     5404             MOV     DPTR,#STR_InputCardInvalid
12C7 8018           5405             JMP     OBUMAIN_DR_OVER
12C9                5406     OBUMAIN_DR_04:
12C9 BF0405         5407             CJNE    R7,#4,OBUMAIN_DR_05
12CC 900000   F     5408             MOV     DPTR,#STR_ActiveFail
12CF 8010           5409             JMP     OBUMAIN_DR_OVER
12D1                5410     OBUMAIN_DR_05:
12D1 BF0505         5411             CJNE    R7,#5,OBUMAIN_DR_06
12D4 900000   F     5412             MOV     DPTR,#STR_IllegalACTCard
12D7 8008           5413             JMP     OBUMAIN_DR_OVER
12D9                5414     OBUMAIN_DR_06:
12D9 BF0605         5415             CJNE    R7,#6,OBUMAIN_DR_OVER
12DC 900000   F     5416             MOV     DPTR,#STR_ACTCardInvalid
12DF 8000           5417             JMP     OBUMAIN_DR_OVER
12E1                5418     OBUMAIN_DR_OVER:
12E1 22             5419             RET     
                    5420             
                    5421     ;--------------------------------------------------------       
                    5422     ;ÃèÊö:
                    5423     ;       Ö÷³ÌÐò´íÎóÌáÊ¾
                    5424     ;²ÎÊ:
                    5425     ;       a       ´íÎó´úÂë
                    5426     ;       dptr    ³ö´íÌáÊ¾
                    5427     ;--------------------------------------------------------       
12E2                5428     _FUN_OBUMAIN_ErrShow03:
12E2 C0E0           5429             PUSH    ACC
12E4 120000   F     5430             CALL    _Func_LCD_INIT  
12E7 D0E0           5431             POP     ACC
                    5432             ;--- ÏÔÊ¾ ---
12E9 750000   F     5433             MOV     money,#0h                       ;
12EC 750000   F     5434             MOV     money + 1,#0h                   ;
12EF 750000   F     5435             MOV     money + 2,#0h                   ;
12F2 F500     F     5436             MOV     money + 3,A                     ;
12F4 7F00     F     5437             MOV     R7,#DATA_RXBUF + 90             ;
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    90

12F6 120000   F     5438             CALL    _dspERRNUM      
                    5439             
12F9 E594           5440             MOV     A,REG_5412AD_P0M0
12FB 440C           5441             ORL     A,#00001100B
12FD F594           5442             MOV     REG_5412AD_P0M0,A
12FF E593           5443             MOV     A,REG_5412AD_P0M1
1301 54F3           5444             ANL     A,#11110011B
1303 F593           5445             MOV     REG_5412AD_P0M1,A
                    5446             
1305 75940C         5447             MOV     REG_5412AD_P0M0,#00001100B
1308 759301         5448             MOV     REG_5412AD_P0M1,#00000001B      
                    5449             
130B 7FFF           5450             MOV     R7,#255
130D 120000   F     5451             CALL    _FUN_LIB_BEEP
1310 7FFF           5452             MOV     R7,#255
1312 120000   F     5453             CALL    _FUN_LIB_BEEP   
                    5454             ;JMP    AP_start
1315 22             5455             RET
                    5456     
                    5457     
1316                5458     _FUN_OBUMAIN_ErrShow:
1316 C0E0           5459             PUSH    ACC
1318 120000   F     5460             CALL    _Func_LCD_INIT  
131B D0E0           5461             POP     ACC
                    5462             ;--- ÏÔÊ¾ ---
131D 750000   F     5463             MOV     money,#0h                       ;
1320 750000   F     5464             MOV     money + 1,#0h                   ;
1323 750000   F     5465             MOV     money + 2,#0h                   ;
1326 F500     F     5466             MOV     money + 3,A                     ;
1328 7F00     F     5467             MOV     R7,#DATA_RXBUF + 90             ;
132A 120000   F     5468             CALL    _dspERRNUM      
                    5469             
132D E594           5470             MOV     A,REG_5412AD_P0M0
132F 440C           5471             ORL     A,#00001100B
1331 F594           5472             MOV     REG_5412AD_P0M0,A
1333 E593           5473             MOV     A,REG_5412AD_P0M1
1335 54F3           5474             ANL     A,#11110011B
1337 F593           5475             MOV     REG_5412AD_P0M1,A
                    5476             
1339 75940C         5477             MOV     REG_5412AD_P0M0,#00001100B
133C 759301         5478             MOV     REG_5412AD_P0M1,#00000001B      
                    5479             
133F 7FFF           5480             MOV     R7,#255
1341 120000   F     5481             CALL    _FUN_LIB_BEEP
1344 7FFF           5482             MOV     R7,#255
1346 120000   F     5483             CALL    _FUN_LIB_BEEP   
1349 020000   F     5484             JMP     AP_start
134C 22             5485             RET
                    5486                     
                    5487     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////////////
134D                5488     _FUN_OBUMAIN_ErrShow02:
                    5489             
                    5490     ;       PUSH    ACC
                    5491     ;       CALL    _Func_LCD_INIT  
                    5492     ;       POP     ACC
                    5493             
                    5494             ;--- ÏÔÊ¾ ---
                    5495     ;       MOV     money,#0h                       ;
                    5496     ;       MOV     money + 1,#0h                   ;
                    5497     ;       MOV     money + 2,#0h                   ;
                    5498     ;       MOV     money + 3,A                     ;
                    5499     ;       MOV     R7,#DATA_RXBUF + 90             ;
                    5500     ;       CALL    _dspERRNUM      
                    5501             
                    5502     ;       MOV     A,REG_5412AD_P0M0
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    91

                    5503     ;       ORL     A,#00001100B
                    5504     ;       MOV     REG_5412AD_P0M0,A
                    5505     ;       MOV     A,REG_5412AD_P0M1
                    5506     ;       ANL     A,#11110011B
                    5507     ;       MOV     REG_5412AD_P0M1,A
                    5508             
                    5509     ;       MOV     REG_5412AD_P0M0,#00001100B
                    5510     ;       MOV     REG_5412AD_P0M1,#00000001B
                    5511     
                    5512     ;       MOV     R7,#255
                    5513     ;       CALL    _FUN_LIB_BEEP
                    5514     ;       MOV     R7,#255
                    5515     ;       CALL    _FUN_LIB_BEEP   
                    5516             
                    5517     ;OBUMAIN_ErrShow02_loop:
                    5518     ;       MOV     R7,#255
                    5519     ;       CALL    _FUN_LIB_BEEP
                    5520     ;       MOV     R7,#255
                    5521     ;       CALL    _FUN_LIB_BEEP
                    5522     ;       MOV     REG_WDT_CONTR,#00111111B
                    5523     ;       jmp     OBUMAIN_ErrShow02_loop
                    5524     ;       JMP     AP_start
134D 22             5525             RET
                    5526     ;/////////////////////////////////////////////////////////////////////////////////////////
134E                5527     _FUN_OBUMAIN_CheckMemoryAndEx:
                    5528     
134E 758301         5529             MOV     DPH,#1
1351 758200         5530             MOV     DPL,#0;0
1354 7BFF           5531             MOV     R3,#255
1356 7400           5532             MOV     A,#0
1358                5533     OBUMAIN_CheckMemoryAndEx2_CheckMovx:
1358 F0             5534             MOVX    @DPTR,A
1359 04             5535             INC     A
135A A3             5536             INC     DPTR
135B DBFB           5537             DJNZ    R3,OBUMAIN_CheckMemoryAndEx2_CheckMovx
                    5538             
                    5539             ;MOV    DPH,#1
135D 758200         5540             MOV     DPL,#0;0
1360 7BFF           5541             MOV     R3,#255
1362                5542     OBUMAIN_CheckMemoryAndEx2_CheckMovxISOK:
1362 E0             5543             MOVX    A,@DPTR
1363 6582           5544             XRL     A,DPL
1365 7037           5545             JNZ     OBUMAIN_CheckMemoryAndEx_CheckMovxERR03
1367 A3             5546             INC     DPTR
1368 DBF8           5547             DJNZ    R3,OBUMAIN_CheckMemoryAndEx2_CheckMovxISOK
                    5548             
                    5549             ;MOV    DPH,#1
136A 758200         5550             MOV     DPL,#00;0
136D 7BFF           5551             MOV     R3,#255
136F                5552     OBUMAIN_CheckMemoryAndEx2_CheckMovxISOK2:
136F E0             5553             MOVX    A,@DPTR
1370 6582           5554             XRL     A,DPL
1372 7024           5555             JNZ     OBUMAIN_CheckMemoryAndEx_CheckMovxERR
1374 A3             5556             INC     DPTR
1375 DBF8           5557             DJNZ    R3,OBUMAIN_CheckMemoryAndEx2_CheckMovxISOK2
                    5558             
                    5559             ;ÄÚ´æ
1377 7807           5560             MOV     R0,#7
1379 7B80           5561             MOV     R3,#128
                    5562             ;CLR    A
137B 7407           5563             MOV     A,#7
137D                5564     OBUMAIN_CheckMemoryAndEx_CheckMov:
137D F6             5565             mov     @R0,A
137E 04             5566             INC     A
137F 08             5567             INC     R0
1380 DBFB           5568             DJNZ    R3,OBUMAIN_CheckMemoryAndEx_CheckMov
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    92

                    5569             
1382 7807           5570             MOV     R0,#7
1384 7B80           5571             MOV     R3,#128
                    5572     ;       CLR     A
1386                5573     OBUMAIN_CheckMemoryAndEx_CheckMovISOK:
1386 E6             5574             mov     A,@R0
                    5575     ;       XRL     A,R0
1387 08             5576             INC     R0
1388 DBFC           5577             DJNZ    R3,OBUMAIN_CheckMemoryAndEx_CheckMovISOK
                    5578             
                    5579             
138A 7807           5580             MOV     R0,#7
138C 7B80           5581             MOV     R3,#128
                    5582             ;CLR    A
138E                5583     OBUMAIN_CheckMemoryAndEx_CheckMovISOK2:
138E E6             5584             mov     A,@R0
138F 68             5585             XRL     A,R0
1390 7009           5586             JNZ     OBUMAIN_CheckMemoryAndEx_CheckMovERR
1392 08             5587             INC     R0
1393 DBF9           5588             DJNZ    R3,OBUMAIN_CheckMemoryAndEx_CheckMovISOK2               
1395 7F00           5589             MOV     R7,#CONST_STATE_TRUE
1397 22             5590             RET
                    5591             
1398                5592     OBUMAIN_CheckMemoryAndEx_CheckMovxERR:  
1398 7F21           5593             MOV     R7,#CONST_STATE_ExMemoryEr      
139A 22             5594             RET
                    5595             
139B                5596     OBUMAIN_CheckMemoryAndEx_CheckMovERR:
139B 7F20           5597             MOV     R7,#CONST_STATE_MemoryEr        
139D 22             5598             RET
                    5599             
139E                5600     OBUMAIN_CheckMemoryAndEx_CheckMovxERR03:
                    5601             ;MOV    AR7,AR0
139E 7F22           5602             mov     r7,#CONST_STATE_ExMemoryEr02
13A0 22             5603             RET     
                    5604             
                    5605             
                    5606             
                    5607             
                    5608             
                    5609             
                    5610             
                    5611             
                    5612             
                    5613             
                    5614             
                    5615             
                    5616             
                    5617             
                    5618             
                    5619             
                    5620             
                    5621             
                    5622             
                    5623             
                    5624             
                    5625             
                    5626             
                    5627             
                    5628             
                    5629             
                    5630             
                    5631             
                    5632             
                    5633             
                    5634             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    93

                    5635             
                    5636             
                    5637             
                    5638             
                    5639             
                    5640             
                    5641             
                    5642             
                    5643             
                    5644             
                    5645             
                    5646     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////////////    
                    5647                     
                    5648                     
                    5649             END
                             
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    94

SYMBOL TABLE LISTING
------ ----- -------


N A M E                                   T Y P E  V A L U E   ATTRIBUTES

?BA?OBUMAIN?BITD . . . . . . . . . . .    D SEG    0006H       REL=BITADDRESSABLE
?CO?OBUMAIN?STR. . . . . . . . . . . .    C SEG    0034H       REL=UNIT
?DT?OBUMAIN?DATAD. . . . . . . . . . .    D SEG    005AH       REL=UNIT
?DT?OBUMAIN?DATAVARD . . . . . . . . .    D SEG    0018H       REL=UNIT
?IDT?OBUMAIN?IDATAD. . . . . . . . . .    I SEG    0080H       REL=UNIT
?PR?OBUMAIN?MATER. . . . . . . . . . .    C SEG    13A1H       REL=UNIT
?PR?OBUMAIN?TF0_TIMER_1. . . . . . . .    C SEG    01F1H       REL=UNIT
?XDT?OBUMAIN?XDATAD. . . . . . . . . .    X SEG    0100H       REL=UNIT
ACC. . . . . . . . . . . . . . . . . .    D ADDR   00E0H   A   
AP_START . . . . . . . . . . . . . . .    C ADDR   0000H   R   SEG=?PR?OBUMAIN?MATER
AP_START_1 . . . . . . . . . . . . . .    C ADDR   0028H   R   SEG=?PR?OBUMAIN?MATER
AR0. . . . . . . . . . . . . . . . . .    D ADDR   0000H   A   
AR1. . . . . . . . . . . . . . . . . .    D ADDR   0001H   A   
AR3. . . . . . . . . . . . . . . . . .    D ADDR   0003H   A   
AR5. . . . . . . . . . . . . . . . . .    D ADDR   0005H   A   
AR6. . . . . . . . . . . . . . . . . .    D ADDR   0006H   A   
AR7. . . . . . . . . . . . . . . . . .    D ADDR   0007H   A   
B. . . . . . . . . . . . . . . . . . .    D ADDR   00F0H   A   
BITDBUF01. . . . . . . . . . . . . . .    D ADDR   0000H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF02. . . . . . . . . . . . . . .    D ADDR   0001H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF03. . . . . . . . . . . . . . .    D ADDR   0002H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF04. . . . . . . . . . . . . . .    D ADDR   0003H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF05. . . . . . . . . . . . . . .    D ADDR   0004H   R   SEG=?BA?OBUMAIN?BITD
BITDBUF06. . . . . . . . . . . . . . .    D ADDR   0005H   R   SEG=?BA?OBUMAIN?BITD
BIT_5823RX_FLAG. . . . . . . . . . . .    B ADDR   0005H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_9600 . . . . . . . . . . . . . . .    B ADDR   0000H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_ACCESS . . . . . . . . . . . . . .    B ADDR   0002H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_ACTIVECARD . . . . . . . . . . . .    B ADDR   0004H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_BJ1219 . . . . . . . . . . . . . .    B ADDR   0004H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_BJPRE. . . . . . . . . . . . . . .    B ADDR   0004H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_BST. . . . . . . . . . . . . . . .    B ADDR   0003H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_BUFADDR. . . . . . . . . . . . . .    B ADDR   0000H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_CD . . . . . . . . . . . . . . . .    B ADDR   0004H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_CDJH . . . . . . . . . . . . . . .    B ADDR   0000H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_CD_SW. . . . . . . . . . . . . . .    B ADDR   0004H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_CELLINFO . . . . . . . . . . . . .    B ADDR   0005H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_CHANNELFLAG. . . . . . . . . . . .    B ADDR   0001H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_ERR_FLAG . . . . . . . . . . . . .    B ADDR   0002H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAM . . . . . . . . . . . . . . .    B ADDR   0002H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAMERR. . . . . . . . . . . . . .    B ADDR   0002H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAMICC. . . . . . . . . . . . . .    B ADDR   0001H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAMOK . . . . . . . . . . . . . .    B ADDR   0004H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_ESAMTRAN . . . . . . . . . . . . .    B ADDR   0005H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_FIRSTTX. . . . . . . . . . . . . .    B ADDR   0000H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_GBICCINFO. . . . . . . . . . . . .    B ADDR   0003H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_GETRESULT. . . . . . . . . . . . .    B ADDR   0002H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_GETSECURE. . . . . . . . . . . . .    B ADDR   0003H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_HARDFLAG . . . . . . . . . . . . .    B ADDR   0000H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_HAVERECORDCELLID . . . . . . . . .    B ADDR   0003H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_INITCARD . . . . . . . . . . . . .    B ADDR   0005H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_INSERTCARD . . . . . . . . . . . .    B ADDR   0001H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_INSERTER . . . . . . . . . . . . .    B ADDR   0004H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_ISCONTACT. . . . . . . . . . . . .    B ADDR   0003H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_ISFRX. . . . . . . . . . . . . . .    B ADDR   0001H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_ISRXNB . . . . . . . . . . . . . .    B ADDR   0001H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_KEY. . . . . . . . . . . . . . . .    B ADDR   0002H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_MMITIRMSTART . . . . . . . . . . .    B ADDR   0005H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_N. . . . . . . . . . . . . . . . .    B ADDR   0001H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_PPS. . . . . . . . . . . . . . . .    B ADDR   0005H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_PRIVATEINFO. . . . . . . . . . . .    B ADDR   0004H.7 R   SEG=?BA?OBUMAIN?BITD
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    95

BIT_PROF . . . . . . . . . . . . . . .    B ADDR   0003H.7 R   SEG=?BA?OBUMAIN?BITD
BIT_PROMF. . . . . . . . . . . . . . .    B ADDR   0002H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_RSTYPE . . . . . . . . . . . . . .    B ADDR   0003H.2 R   SEG=?BA?OBUMAIN?BITD
BIT_RXSERIALBAUD . . . . . . . . . . .    B ADDR   0003H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_SEL1001. . . . . . . . . . . . . .    B ADDR   0005H.3 R   SEG=?BA?OBUMAIN?BITD
BIT_SERFIRBYTE . . . . . . . . . . . .    B ADDR   0001H.4 R   SEG=?BA?OBUMAIN?BITD
BIT_SERIALOVERTIMERX . . . . . . . . .    B ADDR   0000H.6 R   SEG=?BA?OBUMAIN?BITD
BIT_SETMMI . . . . . . . . . . . . . .    B ADDR   0002H.5 R   SEG=?BA?OBUMAIN?BITD
BIT_T0T1 . . . . . . . . . . . . . . .    B ADDR   0000H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_TMP. . . . . . . . . . . . . . . .    B ADDR   0000H.1 R   SEG=?BA?OBUMAIN?BITD
BIT_USEROK . . . . . . . . . . . . . .    B ADDR   0005H.0 R   SEG=?BA?OBUMAIN?BITD
BIT_VERIFY . . . . . . . . . . . . . .    B ADDR   0000H.5 R   SEG=?BA?OBUMAIN?BITD
BRT. . . . . . . . . . . . . . . . . .    N NUMB   009CH   A   
BUSY . . . . . . . . . . . . . . . . .    B ADDR   0020H.0 A   
CARDACTIVE_CASHCARD_COPYMONEY. . . . .    C ADDR   0F55H   R   SEG=?PR?OBUMAIN?MATER
CARDACTIVE_CASHCARD_COPYMONEY02. . . .    C ADDR   11CFH   R   SEG=?PR?OBUMAIN?MATER
CC1101_SPIOSINGLESOFT02_S. . . . . . .    C ADDR   1249H   R   SEG=?PR?OBUMAIN?MATER
CC1101_SPIOSINGLESOFT02_WRITEADDRLOOP.    C ADDR   1250H   R   SEG=?PR?OBUMAIN?MATER
CC1101_SPIOSINGLESOFT02_WRITEDAOVLOOP.    C ADDR   125AH   R   SEG=?PR?OBUMAIN?MATER
CCAP0H . . . . . . . . . . . . . . . .    N NUMB   00FAH   A   
CCAP0L . . . . . . . . . . . . . . . .    N NUMB   00EAH   A   
CCAP1H . . . . . . . . . . . . . . . .    N NUMB   00FBH   A   
CCAP1L . . . . . . . . . . . . . . . .    N NUMB   00EBH   A   
CCAP2H . . . . . . . . . . . . . . . .    N NUMB   00FCH   A   
CCAP2L . . . . . . . . . . . . . . . .    N NUMB   00ECH   A   
CCAP3H . . . . . . . . . . . . . . . .    N NUMB   00FDH   A   
CCAP3L . . . . . . . . . . . . . . . .    N NUMB   00EDH   A   
CCAP4H . . . . . . . . . . . . . . . .    N NUMB   00FEH   A   
CCAP4L . . . . . . . . . . . . . . . .    N NUMB   00EEH   A   
CCAP5H . . . . . . . . . . . . . . . .    N NUMB   00FFH   A   
CCAP5L . . . . . . . . . . . . . . . .    N NUMB   00EFH   A   
CCAPM0 . . . . . . . . . . . . . . . .    N NUMB   00DAH   A   
CCAPM1 . . . . . . . . . . . . . . . .    N NUMB   00DBH   A   
CCAPM2 . . . . . . . . . . . . . . . .    N NUMB   00DCH   A   
CCAPM3 . . . . . . . . . . . . . . . .    N NUMB   00DDH   A   
CCAPM4 . . . . . . . . . . . . . . . .    N NUMB   00DEH   A   
CCAPM5 . . . . . . . . . . . . . . . .    N NUMB   00DFH   A   
CCF0 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.0 A   
CCF1 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.1 A   
CCF2 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.2 A   
CCF3 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.3 A   
CCF4 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.4 A   
CCF5 . . . . . . . . . . . . . . . . .    B ADDR   00D8H.5 A   
CCON . . . . . . . . . . . . . . . . .    N NUMB   00D8H   A   
CF . . . . . . . . . . . . . . . . . .    B ADDR   00D8H.7 A   
CH . . . . . . . . . . . . . . . . . .    N NUMB   00F9H   A   
CL . . . . . . . . . . . . . . . . . .    N NUMB   00E9H   A   
CMOD . . . . . . . . . . . . . . . . .    N NUMB   00D9H   A   
CONST_ACTIONTYPE_GETRAND . . . . . . .    N NUMB   0002H   A   
CONST_ACTIONTYPE_GETSECURE . . . . . .    N NUMB   0000H   A   
CONST_ACTIONTYPE_SETMMI. . . . . . . .    N NUMB   0004H   A   
CONST_ACTIONTYPE_SETSECURE . . . . . .    N NUMB   0001H   A   
CONST_ACTIONTYPE_TRANSFERCHANNEL . . .    N NUMB   0003H   A   
CONST_ACT_H. . . . . . . . . . . . . .    N NUMB   0003H   A   
CONST_ACT_H_H. . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_ACT_H_L. . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_ACT_L. . . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_ACT_L_H. . . . . . . . . . . . .    N NUMB   0006H   A   
CONST_ACT_L_L. . . . . . . . . . . . .    N NUMB   000AH   A   
CONST_ACT_M. . . . . . . . . . . . . .    N NUMB   0002H   A   
CONST_ACT_M_H. . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_ACT_M_L. . . . . . . . . . . . .    N NUMB   0006H   A   
CONST_ACT_V. . . . . . . . . . . . . .    N NUMB   0002H   A   
CONST_BAUD_115200. . . . . . . . . . .    N NUMB   0002H   A   
CONST_BAUD_115200PC. . . . . . . . . .    N NUMB   0003H   A   
CONST_BAUD_230000. . . . . . . . . . .    N NUMB   0004H   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    96

CONST_BAUD_38400 . . . . . . . . . . .    N NUMB   0001H   A   
CONST_BAUD_38400PC . . . . . . . . . .    N NUMB   0005H   A   
CONST_BAUD_9600. . . . . . . . . . . .    N NUMB   0000H   A   
CONST_BAUD_9600PC. . . . . . . . . . .    N NUMB   0006H   A   
CONST_BAUD_BITFULL12 . . . . . . . . .    N NUMB   000CH   A   
CONST_BAUD_BITFULL20 . . . . . . . . .    N NUMB   000EH   A   
CONST_BAUD_BITFULL28 . . . . . . . . .    N NUMB   0010H   A   
CONST_BAUD_BITFULL8. . . . . . . . . .    N NUMB   000BH   A   
CONST_BAUD_BITHALF12 . . . . . . . . .    N NUMB   000CH   A   
CONST_BAUD_CURRENTBITFULL. . . . . . .    N NUMB   00B3H   A   
CONST_BAUD_CURRENTBITHALF. . . . . . .    N NUMB   0058H   A   
CONST_BAUD_FULL115200. . . . . . . . .    N NUMB   001DH   A   
CONST_BAUD_FULL230000. . . . . . . . .    N NUMB   000FH   A   
CONST_BAUD_FULL38400 . . . . . . . . .    N NUMB   005DH   A   
CONST_BAUD_FULL9600. . . . . . . . . .    N NUMB   00B3H   A   
CONST_BAUD_HALF115200. . . . . . . . .    N NUMB   000DH   A   
CONST_BAUD_HALF230000. . . . . . . . .    N NUMB   0008H   A   
CONST_BAUD_HALF38400 . . . . . . . . .    N NUMB   002DH   A   
CONST_BAUD_HALF9600. . . . . . . . . .    N NUMB   0058H   A   
CONST_BAUD_HAND115200. . . . . . . . .    N NUMB   00F8H   A   
CONST_BAUD_HAND115200PC. . . . . . . .    N NUMB   00F3H   A   
CONST_BAUD_HAND230000. . . . . . . . .    N NUMB   00FCH   A   
CONST_BAUD_HAND38400 . . . . . . . . .    N NUMB   00E9H   A   
CONST_BAUD_HAND38400PC . . . . . . . .    N NUMB   00D8H   A   
CONST_BAUD_HAND9600. . . . . . . . . .    N NUMB   00A3H   A   
CONST_BAUD_HAND9600PC. . . . . . . . .    N NUMB   0060H   A   
CONST_BLACK_H. . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_BLACK_L. . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_BSTLIMIT . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_BSTLIMIT02 . . . . . . . . . . .    N NUMB   0064H   A   
CONST_CARD_CONSUME . . . . . . . . . .    N NUMB   0016H   A   
CONST_CARD_PASS. . . . . . . . . . . .    N NUMB   0017H   A   
CONST_CELLFILE_H . . . . . . . . . . .    N NUMB   0000H   A   
CONST_CELLFILE_L . . . . . . . . . . .    N NUMB   0009H   A   
CONST_DATA_VALUE1. . . . . . . . . . .    N NUMB   000FH   A   
CONST_DATA_VALUE2. . . . . . . . . . .    N NUMB   00DEH   A   
CONST_DSRC_ACTION. . . . . . . . . . .    N NUMB   0007H   A   
CONST_DSRC_ACTIONTYPE. . . . . . . . .    N NUMB   0009H   A   
CONST_DSRC_CHANNELIDICC. . . . . . . .    N NUMB   0001H   A   
CONST_DSRC_CHANNELIDSAM. . . . . . . .    N NUMB   0002H   A   
CONST_DSRC_CONTAIN . . . . . . . . . .    N NUMB   000AH   A   
CONST_DSRC_DID . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_DSRC_FILDIDAPPKEY. . . . . . . .    N NUMB   0000H   A   
CONST_DSRC_FILDIDCONSUME . . . . . . .    N NUMB   0002H   A   
CONST_DSRC_FILDIDHOLD. . . . . . . . .    N NUMB   0003H   A   
CONST_DSRC_FILDIDVEHICLE . . . . . . .    N NUMB   0001H   A   
CONST_DSRC_FILL. . . . . . . . . . . .    N NUMB   000BH   A   
CONST_DSRC_HEAD. . . . . . . . . . . .    N NUMB   0006H   A   
CONST_DSRC_LLCCTRL . . . . . . . . . .    N NUMB   0005H   A   
CONST_DSRC_MACCTRL . . . . . . . . . .    N NUMB   0004H   A   
CONST_ESAMCELLFILE_H . . . . . . . . .    N NUMB   00EFH   A   
CONST_ESAMCELLFILE_L . . . . . . . . .    N NUMB   0007H   A   
CONST_ETC_INPUT. . . . . . . . . . . .    N NUMB   0003H   A   
CONST_FALSH_POWERH . . . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_POWERL . . . . . . . . . .    N NUMB   00F7H   A   
CONST_FALSH_PREFLAG02H . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_PREFLAG02L . . . . . . . .    N NUMB   00F5H   A   
CONST_FALSH_PREFLAG03H . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_PREFLAG03L . . . . . . . .    N NUMB   00F6H   A   
CONST_FALSH_PREFLAGH . . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_PREFLAGL . . . . . . . . .    N NUMB   00F4H   A   
CONST_FALSH_PREFLAGLEN . . . . . . . .    N NUMB   0001H   A   
CONST_FLAG_INPUT . . . . . . . . . . .    N NUMB   0000H   A   
CONST_FLAG_OUTPUT. . . . . . . . . . .    N NUMB   0001H   A   
CONST_FLASH_0002H. . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0002L. . . . . . . . . . .    N NUMB   0058H   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    97

CONST_FLASH_0002LEN. . . . . . . . . .    N NUMB   0004H   A   
CONST_FLASH_0012H. . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0012L. . . . . . . . . . .    N NUMB   005CH   A   
CONST_FLASH_0012LEN. . . . . . . . . .    N NUMB   0028H   A   
CONST_FLASH_0015H. . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0015L. . . . . . . . . . .    N NUMB   0084H   A   
CONST_FLASH_0015LEN. . . . . . . . . .    N NUMB   002BH   A   
CONST_FLASH_0019GBLEN. . . . . . . . .    N NUMB   002BH   A   
CONST_FLASH_0019H. . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0019L. . . . . . . . . . .    N NUMB   00AFH   A   
CONST_FLASH_0019LEN. . . . . . . . . .    N NUMB   003CH   A   
CONST_FLASH_BEACONIDUNIXTIMEH. . . . .    N NUMB   0072H   A   
CONST_FLASH_BEACONIDUNIXTIMEL. . . . .    N NUMB   00ECH   A   
CONST_FLASH_BEACONIDUNIXTIMELEN. . . .    N NUMB   0008H   A   
CONST_FLASH_BLOCK01. . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_CARDTYPELEN. . . . . . . .    N NUMB   0001H   A   
CONST_FLASH_FILELEN. . . . . . . . . .    N NUMB   00ECH   A   
CONST_FLASH_LASTCARDH. . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_LASTCARDL. . . . . . . . .    N NUMB   00EBH   A   
CONST_FLASH_STARTHIGH. . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_STARTLOW . . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYS0020H . . . . . . . . .    N NUMB   006CH   A   
CONST_FLASH_SYS0020L . . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYS0020NUMH. . . . . . . .    N NUMB   006AH   A   
CONST_FLASH_SYS0020NUML. . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYSINFOH . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_SYSINFOL . . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYSINFOLEN . . . . . . . .    N NUMB   0058H   A   
CONST_GDO2_MCSM2 . . . . . . . . . . .    N NUMB   0002H   A   
CONST_GDO2_VALUE . . . . . . . . . . .    N NUMB   0046H   A   
CONST_GSM_MAXNUM . . . . . . . . . . .    N NUMB   00F0H   A   
CONST_GSM_NUM. . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_GSM_PJNUM. . . . . . . . . . . .    N NUMB   0014H   A   
CONST_HANDSECOND . . . . . . . . . . .    N NUMB   0015H   A   
CONST_HOLD_5823RX. . . . . . . . . . .    N NUMB   0000H   A   
CONST_HOLD_5823TX. . . . . . . . . . .    N NUMB   0001H   A   
CONST_INPUT_ISENABLE . . . . . . . . .    N NUMB   0001H   A   
CONST_LEN_BITBUF . . . . . . . . . . .    N NUMB   0006H   A   
CONST_LEN_POWUP. . . . . . . . . . . .    N NUMB   0001H   A   
CONST_LEN_RXBUF. . . . . . . . . . . .    N NUMB   0080H   A   
CONST_LEN_RXBUFEND . . . . . . . . . .    N NUMB   0026H   A   
CONST_LEN_RXBUFPRE . . . . . . . . . .    N NUMB   005AH   A   
CONST_LEN_RXCRC. . . . . . . . . . . .    N NUMB   0002H   A   
CONST_LEN_STACK. . . . . . . . . . . .    N NUMB   0057H   A   
CONST_LEN_TXBUF. . . . . . . . . . . .    N NUMB   0080H   A   
CONST_LEN_TXCRC. . . . . . . . . . . .    N NUMB   0002H   A   
CONST_LEN_VARBUF . . . . . . . . . . .    N NUMB   0018H   A   
CONST_LEN_WORKBUF. . . . . . . . . . .    N NUMB   0008H   A   
CONST_LEN_WORKBUF1 . . . . . . . . . .    N NUMB   0008H   A   
CONST_LEN_WORKBUF2 . . . . . . . . . .    N NUMB   0000H   A   
CONST_LHX_FLAG . . . . . . . . . . . .    N NUMB   0002H   A   
CONST_MAX_RXNUM. . . . . . . . . . . .    N NUMB   0005H   A   
CONST_MCU_WKCTH. . . . . . . . . . . .    N NUMB   0008H   A   
CONST_MCU_WKCTL. . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_MF_DECREMENT . . . . . . . . . .    N NUMB   0002H   A   
CONST_MF_INCREMENT . . . . . . . . . .    N NUMB   0003H   A   
CONST_MF_RC500DECREMENT. . . . . . . .    N NUMB   00C0H   A   
CONST_MF_RC500INCREMENT. . . . . . . .    N NUMB   00C1H   A   
CONST_MF_READ. . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_MF_RESTOR. . . . . . . . . . . .    N NUMB   0004H   A   
CONST_MF_WRITE . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_MTC_INPUT. . . . . . . . . . . .    N NUMB   0001H   A   
CONST_PPS_115200 . . . . . . . . . . .    N NUMB   0018H   A   
CONST_PPS_230000 . . . . . . . . . . .    N NUMB   0096H   A   
CONST_PPS_38400. . . . . . . . . . . .    N NUMB   0013H   A   
CONST_PPS_9600 . . . . . . . . . . . .    N NUMB   0010H   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    98

CONST_PRO_OVERTIME2S . . . . . . . . .    N NUMB   00FAH   A   
CONST_RTCOVERFLOW. . . . . . . . . . .    N NUMB   0090H   A   
CONST_RTC_OFF. . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_RTC_ON . . . . . . . . . . . . .    N NUMB   0055H   A   
CONST_SOF. . . . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_SOFTBYTESP . . . . . . . . . . .    N NUMB   0014H   A   
CONST_SOFTFIRSTSCANTIME. . . . . . . .    N NUMB   0010H   A   
CONST_SOFTFIRSTSCANTIMEXX. . . . . . .    N NUMB   00FFH   A   
CONST_SOFTSECOND . . . . . . . . . . .    N NUMB   0070H   A   
CONST_SSRC_FID . . . . . . . . . . . .    N NUMB   000CH   A   
CONST_STATE_5823INIER. . . . . . . . .    N NUMB   0007H   A   
CONST_STATE_5823SLEEPER. . . . . . . .    N NUMB   0008H   A   
CONST_STATE_ACCEPTOVER . . . . . . . .    N NUMB   0003H   A   
CONST_STATE_ACCEPTOVERLEN. . . . . . .    N NUMB   0004H   A   
CONST_STATE_ACTCARDINVALID . . . . . .    N NUMB   0006H   A   
CONST_STATE_ACTIVEFAIL . . . . . . . .    N NUMB   0004H   A   
CONST_STATE_AUTHER . . . . . . . . . .    N NUMB   0006H   A   
CONST_STATE_BASE01ANTICOLL . . . . . .    N NUMB   001DH   A   
CONST_STATE_BASE01CONTACT. . . . . . .    N NUMB   0015H   A   
CONST_STATE_BASE01ESAMDF01 . . . . . .    N NUMB   0014H   A   
CONST_STATE_BASE01RATS . . . . . . . .    N NUMB   001FH   A   
CONST_STATE_BASE01RE . . . . . . . . .    N NUMB   001CH   A   
CONST_STATE_BASE01SEL. . . . . . . . .    N NUMB   001EH   A   
CONST_STATE_BASE02ANTICOLL . . . . . .    N NUMB   0019H   A   
CONST_STATE_BASE02CONTACT. . . . . . .    N NUMB   0016H   A   
CONST_STATE_BASE02RATS . . . . . . . .    N NUMB   001BH   A   
CONST_STATE_BASE02RE . . . . . . . . .    N NUMB   0018H   A   
CONST_STATE_BASE02SEL. . . . . . . . .    N NUMB   001AH   A   
CONST_STATE_BASEESAMDF01 . . . . . . .    N NUMB   000BH   A   
CONST_STATE_BASEN01INIT. . . . . . . .    N NUMB   0013H   A   
CONST_STATE_BASENINIT. . . . . . . . .    N NUMB   000AH   A   
CONST_STATE_CARDPREDEAL0002. . . . . .    N NUMB   000DH   A   
CONST_STATE_CARDPREDEAL0012. . . . . .    N NUMB   000EH   A   
CONST_STATE_CARDPREDEAL0015. . . . . .    N NUMB   000FH   A   
CONST_STATE_CARDPREDEAL0019. . . . . .    N NUMB   0010H   A   
CONST_STATE_CARDPREDEAL1001. . . . . .    N NUMB   000CH   A   
CONST_STATE_CARDPREDEAL3F00. . . . . .    N NUMB   0011H   A   
CONST_STATE_CARDPREDEAL81. . . . . . .    N NUMB   0012H   A   
CONST_STATE_EXMEMORYER . . . . . . . .    N NUMB   0021H   A   
CONST_STATE_EXMEMORYER02 . . . . . . .    N NUMB   0022H   A   
CONST_STATE_FALSE. . . . . . . . . . .    N NUMB   00FFH   A   
CONST_STATE_GETSECURESELFILEER . . . .    N NUMB   0009H   A   
CONST_STATE_ILLEGALACTCARD . . . . . .    N NUMB   0005H   A   
CONST_STATE_ILLEGALINPUTCARD . . . . .    N NUMB   0002H   A   
CONST_STATE_INPUTCARDINVALID . . . . .    N NUMB   0003H   A   
CONST_STATE_INPUTFAIL. . . . . . . . .    N NUMB   0001H   A   
CONST_STATE_MEMORYER . . . . . . . . .    N NUMB   0020H   A   
CONST_STATE_RSTCPUER . . . . . . . . .    N NUMB   0005H   A   
CONST_STATE_SERIALACCPET . . . . . . .    N NUMB   0001H   A   
CONST_STATE_SERIALOVERTIME . . . . . .    N NUMB   0002H   A   
CONST_STATE_TEST . . . . . . . . . . .    N NUMB   0017H   A   
CONST_STATE_TRUE . . . . . . . . . . .    N NUMB   0000H   A   
CONST_SYS_55 . . . . . . . . . . . . .    N NUMB   0055H   A   
CONST_SYS_AA . . . . . . . . . . . . .    N NUMB   00AAH   A   
CONST_SYS_OBUIDLEN . . . . . . . . . .    N NUMB   0004H   A   
CONST_SYS_POWERONTIMER . . . . . . . .    N NUMB   000AH   A   
CONST_SYS_PREFLAG. . . . . . . . . . .    N NUMB   0088H   A   
CONST_SYS_RTCOVERTIME. . . . . . . . .    N NUMB   0064H   A   
CONST_SYS_TRADECONFINE . . . . . . . .    N NUMB   00FFH   A   
CONST_TIMEER02 . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_TIMEER03 . . . . . . . . . . . .    N NUMB   00FEH   A   
CONST_TIMEER04 . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_VSTLIMIT . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_WHITE_H. . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_WHITE_L. . . . . . . . . . . . .    N NUMB   0031H   A   
CONST_WORKSTAION_0 . . . . . . . . . .    N NUMB   0000H   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE    99

CONST_WORKSTAION_1 . . . . . . . . . .    N NUMB   0001H   A   
CONST_WORKSTAION_2 . . . . . . . . . .    N NUMB   0002H   A   
CONST_WORKSTAION_3 . . . . . . . . . .    N NUMB   0003H   A   
CON_LEN_BUFLEN . . . . . . . . . . . .    N NUMB   007DH   A   
CR . . . . . . . . . . . . . . . . . .    B ADDR   00D8H.6 A   
DATA_CARDNO. . . . . . . . . . . . . .    D ADDR   000FH   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_CMDTYPE . . . . . . . . . . . . .    D ADDR   0014H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_DATAP . . . . . . . . . . . . . .    D ADDR   0008H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_DSRCRXLEN . . . . . . . . . . . .    D ADDR   0007H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_DSRCTXLEN . . . . . . . . . . . .    D ADDR   0006H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_IRQEN . . . . . . . . . . . . . .    D ADDR   000EH   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_MFCOM . . . . . . . . . . . . . .    D ADDR   0015H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_NCONTACTTYPE. . . . . . . . . . .    D ADDR   0016H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_OBUID . . . . . . . . . . . . . .    D ADDR   000AH   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_POWERONTIMER. . . . . . . . . . .    D ADDR   0017H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_RXBUF . . . . . . . . . . . . . .    D ADDR   0000H   R   SEG=?DT?OBUMAIN?DATAD
DATA_RXBUFCPUSTART . . . . . . . . . .    D ADDR   0003H   R   SEG=?DT?OBUMAIN?DATAD
DATA_VARBAUDFULL . . . . . . . . . . .    D ADDR   0001H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_VARBAUDHALF . . . . . . . . . . .    D ADDR   0000H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_VER . . . . . . . . . . . . . . .    D ADDR   0000H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_WORKBUF2. . . . . . . . . . . . .    D ADDR   0000H   R   SEG=?DT?OBUMAIN?DATAVARD
DATA_XDATAP. . . . . . . . . . . . . .    D ADDR   0009H   R   SEG=?DT?OBUMAIN?DATAVARD
DPH. . . . . . . . . . . . . . . . . .    D ADDR   0083H   A   
DPL. . . . . . . . . . . . . . . . . .    D ADDR   0082H   A   
DR_00_0D . . . . . . . . . . . . . . .    C ADDR   12A4H   R   SEG=?PR?OBUMAIN?MATER
DR_00_0D0EOV . . . . . . . . . . . . .    C ADDR   12AFH   R   SEG=?PR?OBUMAIN?MATER
DR_00_0E . . . . . . . . . . . . . . .    C ADDR   12ACH   R   SEG=?PR?OBUMAIN?MATER
EA . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.7 A   
EPCAI. . . . . . . . . . . . . . . . .    B ADDR   00A8H.6 A   
EPCA_LVD . . . . . . . . . . . . . . .    B ADDR   00A8H.6 A   
ES . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.4 A   
ET0. . . . . . . . . . . . . . . . . .    B ADDR   00A8H.1 A   
ET1. . . . . . . . . . . . . . . . . .    B ADDR   00A8H.3 A   
EX0. . . . . . . . . . . . . . . . . .    B ADDR   00A8H.0 A   
EX1. . . . . . . . . . . . . . . . . .    B ADDR   00A8H.2 A   
FUN_LCD_HVTRANSFER . . . . . . . . . .    C ADDR   -----       EXT
FUN_OBUMAIN_RST. . . . . . . . . . . .    C ADDR   017CH   R   SEG=?PR?OBUMAIN?MATER
GSM_SERIALINTRX_RXRIGHT. . . . . . . .    C ADDR   -----       EXT
IDATA_POWUP. . . . . . . . . . . . . .    I ADDR   0028H   R   SEG=?IDT?OBUMAIN?IDATAD
IDATA_RXBUFTWOBLOCK. . . . . . . . . .    I ADDR   0000H   R   SEG=?IDT?OBUMAIN?IDATAD
IDATA_RXCRC. . . . . . . . . . . . . .    I ADDR   0026H   R   SEG=?IDT?OBUMAIN?IDATAD
IDATA_STACK. . . . . . . . . . . . . .    I ADDR   0029H   R   SEG=?IDT?OBUMAIN?IDATAD
IDATA_TXCRC. . . . . . . . . . . . . .    X ADDR   0080H   R   SEG=?XDT?OBUMAIN?XDATAD
IE . . . . . . . . . . . . . . . . . .    D ADDR   00A8H   A   
IE0. . . . . . . . . . . . . . . . . .    B ADDR   0088H.1 A   
IE1. . . . . . . . . . . . . . . . . .    B ADDR   0088H.3 A   
IE2. . . . . . . . . . . . . . . . . .    N NUMB   00AFH   A   
INT_INSERTACTIVE . . . . . . . . . . .    C ADDR   0048H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_INSERTACTIVE_OVER. . . . . . . . .    C ADDR   005EH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_INSERTACTIVE_RET . . . . . . . . .    C ADDR   005FH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_INVALID. . . . . . . . . . . . . .    C ADDR   0017H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_T0_OVER. . . . . . . . . . . . . .    C ADDR   007DH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_T0_RET . . . . . . . . . . . . . .    C ADDR   007EH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_TIMER0 . . . . . . . . . . . . . .    C ADDR   0062H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UART . . . . . . . . . . . . . . .    C ADDR   0000H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UART_OVER. . . . . . . . . . . . .    C ADDR   0016H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UART_POINT . . . . . . . . . . . .    C ADDR   00C1H   R   SEG=?PR?OBUMAIN?MATER
INT_UNIXACTIVE . . . . . . . . . . . .    C ADDR   0081H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UNIXACTIVE_01. . . . . . . . . . .    C ADDR   0096H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_UNIXACTIVE_OVER. . . . . . . . . .    C ADDR   00AAH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_WAVEACTIVE . . . . . . . . . . . .    C ADDR   0030H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
INT_WAVEACTIVE_S . . . . . . . . . . .    C ADDR   0033H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
IP . . . . . . . . . . . . . . . . . .    D ADDR   00B8H   A   
IPH. . . . . . . . . . . . . . . . . .    N NUMB   00B7H   A   
ISP_CONTR. . . . . . . . . . . . . . .    N NUMB   00C7H   A   
IT0. . . . . . . . . . . . . . . . . .    B ADDR   0088H.0 A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   100

IT1. . . . . . . . . . . . . . . . . .    B ADDR   0088H.2 A   
MONEY. . . . . . . . . . . . . . . . .    D ADDR   0002H   R   SEG=?DT?OBUMAIN?DATAVARD
OBUMAIN_BASEINIT02_ESAMERRRR . . . . .    C ADDR   0C86H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_ESAMRIGHT . . . . .    C ADDR   0C8CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITCONTACT . . . .    C ADDR   0BB1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITCONTACTSEC. . .    C ADDR   0BA8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITESAMCARD. . . .    C ADDR   0BA0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITNCONTACT. . . .    C ADDR   0BC5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITNCONTACTOVER. .    C ADDR   0C3DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITNCONTACTSEC . .    C ADDR   0BC2H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_INITUSERCARD. . . .    C ADDR   0BA3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_ISPRO . . . . . . .    C ADDR   0C18H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_OVER02. . . . . . .    C ADDR   0C8EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_PPS . . . . . . . .    C ADDR   0C41H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_REQUEST . . . . . .    C ADDR   0BFEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_REQUEST01 . . . . .    C ADDR   0BFCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_SELECTDF01. . . . .    C ADDR   0C41H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_SELECTDF0102. . . .    C ADDR   0C4BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_TAMPERED. . . . . .    C ADDR   0B87H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT02_TAMPEREDOVER. . . .    C ADDR   0B89H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_ESAMSYSINFOERR. . . .    C ADDR   0E6DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITCONTACT . . . . .    C ADDR   0AE0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITCONTACTSEC. . . .    C ADDR   0ADBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITESAMCARD. . . . .    C ADDR   0AD3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITNCONTACT. . . . .    C ADDR   0AF3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITNCONTACTOVER. . .    C ADDR   0B53H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITNCONTACTSEC . . .    C ADDR   0AF0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITNSELDF01. . . . .    C ADDR   0B51H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_INITUSERCARD. . . . .    C ADDR   0AD6H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_ISPRO . . . . . . . .    C ADDR   0B2FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_OVER. . . . . . . . .    C ADDR   0B5AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_OVER02. . . . . . . .    C ADDR   0B5AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_PPS . . . . . . . . .    C ADDR   0B57H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_REQUEST . . . . . . .    C ADDR   0B15H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_REQUEST01 . . . . . .    C ADDR   0B13H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_SELECTDF01. . . . . .    C ADDR   0B57H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_TAMPERED. . . . . . .    C ADDR   0AACH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BASEINIT_TAMPEREDOVER. . . . .    C ADDR   0AAEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CP01. . . . . . . . . . .    C ADDR   10E8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CP02. . . . . . . . . . .    C ADDR   10EFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CP03. . . . . . . . . . .    C ADDR   10F6H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CP04. . . . . . . . . . .    C ADDR   10F8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CPDIF . . . . . . . . . .    C ADDR   1114H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_CPSTARTLOOP . . . . . . .    C ADDR   10E7H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_NZC . . . . . . . . . . .    C ADDR   1051H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_OVER. . . . . . . . . . .    C ADDR   112BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_VERRCPLOOP. . . . . . . .    C ADDR   10FCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_ZC. . . . . . . . . . . .    C ADDR   1112H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BDCB_ZZSC. . . . . . . . . . .    C ADDR   108EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_APPAGAIN. . . . . . . . .    C ADDR   100FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_B . . . . . . . . . . . .    C ADDR   0FC4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_ERR . . . . . . . . . . .    C ADDR   0FE9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_OVER. . . . . . . . . . .    C ADDR   0FF8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_SECUEED . . . . . . . . .    C ADDR   0FCEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_SECUEEDKQ . . . . . . . .    C ADDR   0FD1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_SECUEEDKQOVER . . . . . .    C ADDR   0FE7H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_BEEP_SECUEEDNOKQ . . . . . . .    C ADDR   0FE2H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_03. . . . . . . . .    C ADDR   0303H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ACTIVEESAMHTHOK . .    C ADDR   03C5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ACTIVEOBU . . . . .    C ADDR   037BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ACTIVEOVER. . . . .    C ADDR   03D9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ACTIVESELDF01OK . .    C ADDR   03AFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_BEEP. . . . . . . .    C ADDR   04BAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_BEEPLOOP. . . . . .    C ADDR   04C8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CARDDIS . . . . . .    C ADDR   03E6H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CARDDISZZ . . . . .    C ADDR   02F7H   R   SEG=?PR?OBUMAIN?MATER
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   101

OBUMAIN_CARDACTIVE_CP01. . . . . . . .    C ADDR   02BBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CP02. . . . . . . .    C ADDR   02C2H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CP03. . . . . . . .    C ADDR   02C9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CP04. . . . . . . .    C ADDR   02CBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CPDIF . . . . . . .    C ADDR   049AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_CPSTARTLOOP . . . .    C ADDR   02BAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_DISANDPOWERDOWN . .    C ADDR   0404H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_DISOVER . . . . . .    C ADDR   0502H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_GDFXOBU . . . . . .    C ADDR   0306H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_GDFXOBUDISHV. . . .    C ADDR   0330H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_HVDIF . . . . . . .    C ADDR   04AFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_INSERT. . . . . . .    C ADDR   0440H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_INSERT02. . . . . .    C ADDR   0457H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_KPCW. . . . . . . .    C ADDR   04E8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_LOWVO . . . . . . .    C ADDR   042EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_NOCARD. . . . . . .    C ADDR   04F5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_NZC . . . . . . . .    C ADDR   01FBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_OVER. . . . . . . .    C ADDR   0500H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_OVEROV. . . . . . .    C ADDR   04D9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_READESAMHTHOK . . .    C ADDR   035AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_READOVER. . . . . .    C ADDR   036EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_READSELDF01OK . . .    C ADDR   0344H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_REBEACONID. . . . .    C ADDR   01CCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_REBEACONID22. . . .    C ADDR   01D1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_REBEACONIDOVER. . .    C ADDR   01DEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_SC. . . . . . . . .    C ADDR   04DBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_START . . . . . . .    C ADDR   01BBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_VERRCPLOOP. . . . .    C ADDR   02CFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_VERRCPLOOPZZ. . . .    C ADDR   02E4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZC. . . . . . . . .    C ADDR   02E8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCKQ. . . . . . . .    C ADDR   0481H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCKQ02. . . . . . .    C ADDR   047FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCKQOVER. . . . . .    C ADDR   0497H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCNOKQ. . . . . . .    C ADDR   0492H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZCZZ. . . . . . . .    C ADDR   02EEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDACTIVE_ZZSC. . . . . . . .    C ADDR   0238H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CARDINFO . .    C ADDR   116BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CASHCARD . .    C ADDR   118DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CASHCARDCPV.    C ADDR   11C9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CKOVER . . .    C ADDR   1152H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_CPBF . . . .    C ADDR   1133H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_GETCPUINFO .    C ADDR   1175H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_IN . . . . .    C ADDR   1236H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_INFO . . . .    C ADDR   118AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_MONEY. . . .    C ADDR   11DAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_NOCARDINFO .    C ADDR   1152H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_NOCARDSETMMIOV  C ADDR   1168H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_OTHER. . . .    C ADDR   11FBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_OVER . . . .    C ADDR   1209H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_OVER02 . . .    C ADDR   1243H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_PASSCARD . .    C ADDR   11EAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY02_START. . . .    C ADDR   114FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BDCP . . . . .    C ADDR   0EB9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BDCPLOOP . . .    C ADDR   0EB9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BDQLLOOP . . .    C ADDR   0EB9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BTVH . . . . .    C ADDR   023BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BTVH02 . . . .    C ADDR   1091H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_BTVHZZ . . . .    C ADDR   0241H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CARDINFO . . .    C ADDR   0EF1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CASHCARD . . .    C ADDR   0F13H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CASHCARDCPV. .    C ADDR   0F4FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CKOVER . . . .    C ADDR   0ED8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_CPBF . . . . .    C ADDR   0EB9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_DISPLAYINFO. .    C ADDR   01DEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_GETCPUINFO . .    C ADDR   0EFBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_INFO . . . . .    C ADDR   0F10H   R   SEG=?PR?OBUMAIN?MATER
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   102

OBUMAIN_CARDINFODISPLAY_MONEY. . . . .    C ADDR   0F60H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_NOCARDINFO . .    C ADDR   0ED8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_NOCARDSETMMIOV    C ADDR   0EEEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_OTHER. . . . .    C ADDR   0F93H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_OVER . . . . .    C ADDR   0FACH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_PASSCARD . . .    C ADDR   0F79H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_START. . . . .    C ADDR   0ED5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_TRADEERR . . .    C ADDR   0F9FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDINFODISPLAY_ZC . . . . . .    C ADDR   01E4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_0019GB . . . . . .    C ADDR   0D70H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_0019GD . . . . . .    C ADDR   0D96H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_COPYMONEY. . . . .    C ADDR   0CD4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_ESAMPREDEALOVER. .    C ADDR   0E95H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_OVER . . . . . . .    C ADDR   0EB5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_PPS. . . . . . . .    C ADDR   0CADH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_PREDEALCPUCARD . .    C ADDR   0CADH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_PREDEALMF. . . . .    C ADDR   0DBCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READ0002 . . . . .    C ADDR   0CBCH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READ0012 . . . . .    C ADDR   0CECH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READ0015 . . . . .    C ADDR   0D10H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READ0019 . . . . .    C ADDR   0D34H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READBLOCK01. . . .    C ADDR   0DBEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READBLOCK0101. . .    C ADDR   0DDBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READBLOCK04. . . .    C ADDR   0DDBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READBLOCK10. . . .    C ADDR   0DDBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_READSYSINFO. . . .    C ADDR   0C9CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_RECORDCARDTYPE . .    C ADDR   0DDBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_SELECT3F00R. . . .    C ADDR   0E53H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_TAMPERED . . . . .    C ADDR   0EB3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_TAMPEREDOVER . . .    C ADDR   0EB5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_USER . . . . . . .    C ADDR   0CA4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_USEROVER . . . . .    C ADDR   0E30H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0002. . . . .    C ADDR   0CCDH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0012. . . . .    C ADDR   0D03H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0015. . . . .    C ADDR   0D27H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0019GB. . . .    C ADDR   0D87H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITE0019GD. . . .    C ADDR   0DADH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CARDPREDEAL_WRITESYSINFO . . .    C ADDR   0E6FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_DISPLAYCD . . . . . .    C ADDR   0139H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_DISPLAYCDOVER . . . .    C ADDR   0150H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_DISPLAYMOVE . . . . .    C ADDR   0137H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_DISPLAYNCD. . . . . .    C ADDR   0149H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_REBEACONID. . . . . .    C ADDR   0158H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_REBEACONIDOVER. . . .    C ADDR   0168H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_REBEACONIDOVER02. . .    C ADDR   016AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CDACTIVE_SELECT3F00. . . . . .    C ADDR   0119H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX2_CHECKMOVX. .    C ADDR   1358H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX2_CHECKMOVXISOK   C ADDR   1362H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX2_CHECKMOVXISOK2  C ADDR   136FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOV. . .    C ADDR   137DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVERR .    C ADDR   139BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVISOK.    C ADDR   1386H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVISOK2    C ADDR   138EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVXERR.    C ADDR   1398H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_CHECKMEMORYANDEX_CHECKMOVXERR03   C ADDR   139EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_00. . . . . . . . . . . . .    C ADDR   12A1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_01. . . . . . . . . . . . .    C ADDR   12B1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_02. . . . . . . . . . . . .    C ADDR   12B9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_03. . . . . . . . . . . . .    C ADDR   12C1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_04. . . . . . . . . . . . .    C ADDR   12C9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_05. . . . . . . . . . . . .    C ADDR   12D1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_06. . . . . . . . . . . . .    C ADDR   12D9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_DR_OVER. . . . . . . . . . . .    C ADDR   12E1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_CHECKED . . . . . . . .    C ADDR   004EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_CHECKMEMORYERR. . . . .    C ADDR   0010H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_CHECKMEMORYOVER . . . .    C ADDR   0013H   R   SEG=?PR?OBUMAIN?MATER
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   103

OBUMAIN_MASTER_MAINSLEEP . . . . . . .    C ADDR   0081H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_MEMORYCLR . . . . . . .    C ADDR   00DBH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_MASTER_MEMORYCLR00 . . . . . .    C ADDR   0034H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_PINSLEEP_RTCOFF. . . . . . . .    C ADDR   00EDH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINSLEEP_RTCON . . . . . . . .    C ADDR   00D5H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINSLEEP_RTCSWOVER . . . . . .    C ADDR   010FH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINUNSLEEP_RTCOFF. . . . . . .    C ADDR   01A4H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINUNSLEEP_RTCON . . . . . . .    C ADDR   0192H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_PINUNSLEEP_RTCSWOVER . . . . .    C ADDR   01B4H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
OBUMAIN_RST_OVER . . . . . . . . . . .    C ADDR   017FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_SELECTDF01_ESAMRIGHT . . . . .    C ADDR   1034H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_SELECTDF01_OVER. . . . . . . .    C ADDR   1036H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_SYS_OVER . . . . . . . . . . .    C ADDR   1014H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_TIMERX_OVER. . . . . . . . . .    C ADDR   1046H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVENOCARD_DEAL. . . . .    C ADDR   0519H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVENOCARD_YD. . . . . .    C ADDR   0531H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_10OV. . . . . . . .    C ADDR   0806H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_ACTIONTYPE. . . . .    C ADDR   08EAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_AGAINVST. . . . . .    C ADDR   083CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_AGAINVSTCON . . . .    C ADDR   083CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BEACONID. . . . . .    C ADDR   0726H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BEACONID2 . . . . .    C ADDR   081CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST . . . . .    C ADDR   07ECH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST00 . . . .    C ADDR   085FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST01 . . . .    C ADDR   0868H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST02 . . . .    C ADDR   0871H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCAST03 . . . .    C ADDR   087AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BROADCASTOV . . . .    C ADDR   0816H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BST10 . . . . . . .    C ADDR   07FEH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BST100. . . . . . .    C ADDR   0803H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_BSTOVER . . . . . .    C ADDR   080EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_DESL. . . . . . . .    C ADDR   0991H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_DISPLAY . . . . . .    C ADDR   09C4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_DSRCSENDOLD . . . .    C ADDR   08D2H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_END . . . . . . . .    C ADDR   09CDH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_FRISTRX . . . . . .    C ADDR   0889H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_GETBST. . . . . . .    C ADDR   06B0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_GETRAND . . . . . .    C ADDR   0931H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_GETSECURE . . . . .    C ADDR   08F0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_HDLCTX01OVER. . . .    C ADDR   07C0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_LOOP. . . . . . . .    C ADDR   07C0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NBITHIGH. . . . . .    C ADDR   08CAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NBITLOW . . . . . .    C ADDR   08CFH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NBITOVER. . . . . .    C ADDR   08E8H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOEA02X . . . . . .    C ADDR   099AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOEAOV. . . . . . .    C ADDR   07D3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOEAOV01. . . . . .    C ADDR   08E5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOSETMMI. . . . . .    C ADDR   08E0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_NOTBROADCAST. . . .    C ADDR   0854H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OTHER . . . . . . .    C ADDR   0991H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OVDELAY . . . . . .    C ADDR   077EH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OVER. . . . . . . .    C ADDR   099DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OVERXXXX. . . . . .    C ADDR   059BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_OVERZZ. . . . . . .    C ADDR   08C1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PPS . . . . . . . .    C ADDR   083CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PRE . . . . . . . .    C ADDR   05F3H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PRE02 . . . . . . .    C ADDR   062CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PRE03 . . . . . . .    C ADDR   0664H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PREDEAL . . . . . .    C ADDR   09C1H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PREPRE. . . . . . .    C ADDR   060DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_PRESS . . . . . . .    C ADDR   05F0H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_RESPONSE. . . . . .    C ADDR   0991H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_RXBST . . . . . . .    C ADDR   0712H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SE1001ED. . . . . .    C ADDR   091CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SE1001PPS . . . . .    C ADDR   0902H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SECONDRX. . . . . .    C ADDR   08AFH   R   SEG=?PR?OBUMAIN?MATER
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   104

OBUMAIN_WAVEACTIVE_SELECT1001. . . . .    C ADDR   08F9H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SELECTED. . . . . .    C ADDR   0927H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SENDVST . . . . . .    C ADDR   0741H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SENDVST2. . . . . .    C ADDR   0837H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SETMMI. . . . . . .    C ADDR   0976H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SETMMIEA. . . . . .    C ADDR   07CDH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SETSECURE . . . . .    C ADDR   092CH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SLEEP . . . . . . .    C ADDR   083AH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SPANESAMRST . . . .    C ADDR   0782H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SPANESAMRSTH. . . .    C ADDR   078BH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SPANESAMRSTHH . . .    C ADDR   078DH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_SWGSM . . . . . . .    C ADDR   0989H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TAMPERED. . . . . .    C ADDR   06F5H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TAMPEREDOVER. . . .    C ADDR   06F7H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERCHANNEL . .    C ADDR   0936H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERCHANNELSELOV   C ADDR   095FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERPPS02 . . .    C ADDR   0971H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERSEL1001 . .    C ADDR   0942H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TRANSFERSELECTED. .    C ADDR   0968H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TXONE . . . . . . .    C ADDR   0799H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TXTWO . . . . . . .    C ADDR   079FH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_TXTWO02 . . . . . .    C ADDR   0851H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_VOLNORMAL . . . . .    C ADDR   05EAH   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_ZC01. . . . . . . .    C ADDR   08C4H   R   SEG=?PR?OBUMAIN?MATER
OBUMAIN_WAVEACTIVE_ZLYD. . . . . . . .    C ADDR   06D1H   R   SEG=?PR?OBUMAIN?MATER
P0 . . . . . . . . . . . . . . . . . .    D ADDR   0080H   A   
P1 . . . . . . . . . . . . . . . . . .    D ADDR   0090H   A   
P2 . . . . . . . . . . . . . . . . . .    D ADDR   00A0H   A   
P3 . . . . . . . . . . . . . . . . . .    D ADDR   00B0H   A   
P4 . . . . . . . . . . . . . . . . . .    N NUMB   00C0H   A   
PCA_PWM0 . . . . . . . . . . . . . . .    N NUMB   00F2H   A   
PCA_PWM1 . . . . . . . . . . . . . . .    N NUMB   00F3H   A   
PCA_PWM2 . . . . . . . . . . . . . . .    N NUMB   00F4H   A   
PCA_PWM3 . . . . . . . . . . . . . . .    N NUMB   00F5H   A   
PCA_PWM4 . . . . . . . . . . . . . . .    N NUMB   00F6H   A   
PCA_PWM5 . . . . . . . . . . . . . . .    N NUMB   00F7H   A   
PCON . . . . . . . . . . . . . . . . .    D ADDR   0087H   A   
PIN_522_MISO . . . . . . . . . . . . .    B ADDR   00C0H.1 A   
PIN_522_MOSI . . . . . . . . . . . . .    B ADDR   00C0H.6 A   
PIN_522_RST. . . . . . . . . . . . . .    B ADDR   0080H.4 A   
PIN_522_SCLK . . . . . . . . . . . . .    B ADDR   0080H.7 A   
PIN_522_SS . . . . . . . . . . . . . .    B ADDR   0080H.6 A   
PIN_5823BK_CS. . . . . . . . . . . . .    B ADDR   0090H.0 A   
PIN_5823BK_IRQ . . . . . . . . . . . .    B ADDR   0090H.2 A   
PIN_5823BK_MISO. . . . . . . . . . . .    B ADDR   0080H.0 A   
PIN_5823BK_MOSI. . . . . . . . . . . .    B ADDR   0080H.1 A   
PIN_5823BK_SCLK. . . . . . . . . . . .    B ADDR   00C0H.2 A   
PIN_BELL_01. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_BELL_02. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_BK_CE. . . . . . . . . . . . . . .    B ADDR   0090H.1 A   
PIN_CARD_EXIST . . . . . . . . . . . .    B ADDR   00B0H.3 A   
PIN_ESAM_RST . . . . . . . . . . . . .    B ADDR   0080H.5 A   
PIN_ESAM_RX. . . . . . . . . . . . . .    B ADDR   0080H.3 A   
PIN_ESAM_TX. . . . . . . . . . . . . .    B ADDR   0080H.3 A   
PIN_ES_RST . . . . . . . . . . . . . .    B ADDR   00A0H.6 A   
PIN_GRE. . . . . . . . . . . . . . . .    B ADDR   00C0H.4 A   
PIN_LCD_CS . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_DC . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_RST. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_SCL. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_SDA. . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_OUTPUT_CLK . . . . . . . . . . . .    B ADDR   00B0H.4 A   
PIN_PWRDWN . . . . . . . . . . . . . .    B ADDR   00A0H.4 A   
PIN_PWRDWN_LCD . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_PWR_GSM. . . . . . . . . . . . . .    B ADDR   00A0H.3 A   
PIN_PWR_LOWIO. . . . . . . . . . . . .    B ADDR   0090H.5 A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   105

PIN_PWR_SE . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_RED. . . . . . . . . . . . . . . .    B ADDR   00C0H.5 A   
PIN_SE_IO1 . . . . . . . . . . . . . .    B ADDR   00B0H.4 A   
PIN_SOFTSERIALRX . . . . . . . . . . .    B ADDR   00B0H.0 A   
PIN_SOFTSERIALTXH. . . . . . . . . . .    B ADDR   00B0H.1 A   
PIN_SW . . . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_UART2_RX . . . . . . . . . . . . .    B ADDR   0090H.6 A   
PIN_UART2_TX . . . . . . . . . . . . .    B ADDR   0090H.7 A   
PIN_UNFIX. . . . . . . . . . . . . . .    B ADDR   00B0H.5 A   
PIN_WAVE_CHANNEL1. . . . . . . . . . .    B ADDR   0080H.2 A   
PIN_WAVE_RX. . . . . . . . . . . . . .    B ADDR   0080H.2 A   
PSW. . . . . . . . . . . . . . . . . .    D ADDR   00D0H   A   
READ_BURST . . . . . . . . . . . . . .    N NUMB   00C0H   A   
REG_51_AUXR1 . . . . . . . . . . . . .    N NUMB   00A2H   A   
REG_5412AD_AUXR. . . . . . . . . . . .    N NUMB   008EH   A   
REG_5412AD_P0M0. . . . . . . . . . . .    N NUMB   0094H   A   
REG_5412AD_P0M1. . . . . . . . . . . .    N NUMB   0093H   A   
REG_5412AD_P1M0. . . . . . . . . . . .    N NUMB   0092H   A   
REG_5412AD_P1M1. . . . . . . . . . . .    N NUMB   0091H   A   
REG_5412AD_P2M0. . . . . . . . . . . .    N NUMB   0096H   A   
REG_5412AD_P2M1. . . . . . . . . . . .    N NUMB   0095H   A   
REG_5412AD_P3M0. . . . . . . . . . . .    N NUMB   00B2H   A   
REG_5412AD_P3M1. . . . . . . . . . . .    N NUMB   00B1H   A   
REG_5412AD_P4M0. . . . . . . . . . . .    N NUMB   00B4H   A   
REG_5412AD_P4M1. . . . . . . . . . . .    N NUMB   00B3H   A   
REG_5412AD_P4SW. . . . . . . . . . . .    N NUMB   00BBH   A   
REG_5412AD_SPCTL . . . . . . . . . . .    N NUMB   0085H   A   
REG_5412AD_SPDAT . . . . . . . . . . .    N NUMB   0086H   A   
REG_5412AD_SPSTAT. . . . . . . . . . .    N NUMB   0084H   A   
REG_MCU_WKCTH. . . . . . . . . . . . .    N NUMB   00ABH   A   
REG_MCU_WKCTL. . . . . . . . . . . . .    N NUMB   00AAH   A   
REG_RC522_BITFRAMINGREG. . . . . . . .    N NUMB   000DH   A   
REG_RC522_COLLREG. . . . . . . . . . .    N NUMB   000EH   A   
REG_RC522_COMIENREG. . . . . . . . . .    N NUMB   0002H   A   
REG_RC522_COMIRQREG. . . . . . . . . .    N NUMB   0004H   A   
REG_RC522_COMMANDREG . . . . . . . . .    N NUMB   0001H   A   
REG_RC522_CONTROLREG . . . . . . . . .    N NUMB   000CH   A   
REG_RC522_CRCRESULTREGH. . . . . . . .    N NUMB   0021H   A   
REG_RC522_CRCRESULTREGL. . . . . . . .    N NUMB   0022H   A   
REG_RC522_CWGSPREG . . . . . . . . . .    N NUMB   0028H   A   
REG_RC522_DEMODREG . . . . . . . . . .    N NUMB   0019H   A   
REG_RC522_DIVIENREG. . . . . . . . . .    N NUMB   0003H   A   
REG_RC522_DIVIRQREG. . . . . . . . . .    N NUMB   0005H   A   
REG_RC522_ERRORREG . . . . . . . . . .    N NUMB   0006H   A   
REG_RC522_FIFODATAREG. . . . . . . . .    N NUMB   0009H   A   
REG_RC522_FIFOLEVELREG . . . . . . . .    N NUMB   000AH   A   
REG_RC522_GSNREG . . . . . . . . . . .    N NUMB   0027H   A   
REG_RC522_MIFAREREG. . . . . . . . . .    N NUMB   001CH   A   
REG_RC522_MODEREG. . . . . . . . . . .    N NUMB   0011H   A   
REG_RC522_MODGSPREG. . . . . . . . . .    N NUMB   0029H   A   
REG_RC522_MODWIDTHREG. . . . . . . . .    N NUMB   0024H   A   
REG_RC522_RC522PAGE. . . . . . . . . .    N NUMB   0000H   A   
REG_RC522_RFCFGREG . . . . . . . . . .    N NUMB   0026H   A   
REG_RC522_RFU. . . . . . . . . . . . .    N NUMB   000FH   A   
REG_RC522_RXMODEREG. . . . . . . . . .    N NUMB   0013H   A   
REG_RC522_RXSELREG . . . . . . . . . .    N NUMB   0017H   A   
REG_RC522_RXTHRESHOLDREG . . . . . . .    N NUMB   0018H   A   
REG_RC522_SERIALSPEEDREG . . . . . . .    N NUMB   001FH   A   
REG_RC522_STATUS1REG . . . . . . . . .    N NUMB   0007H   A   
REG_RC522_STATUS2REG . . . . . . . . .    N NUMB   0008H   A   
REG_RC522_TCOUNTERVALUEREGH. . . . . .    N NUMB   002EH   A   
REG_RC522_TCOUNTERVALUEREGL. . . . . .    N NUMB   002FH   A   
REG_RC522_TMODEREG . . . . . . . . . .    N NUMB   002AH   A   
REG_RC522_TPRESCALERREG. . . . . . . .    N NUMB   002BH   A   
REG_RC522_TRELOADREGH. . . . . . . . .    N NUMB   002CH   A   
REG_RC522_TRELOADREGL. . . . . . . . .    N NUMB   002DH   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   106

REG_RC522_TXAUTOREG. . . . . . . . . .    N NUMB   0015H   A   
REG_RC522_TXCONTROLREG . . . . . . . .    N NUMB   0014H   A   
REG_RC522_TXMODEREG. . . . . . . . . .    N NUMB   0012H   A   
REG_RC522_TXSELREG . . . . . . . . . .    N NUMB   0016H   A   
REG_RC522_WATERLEVELREG. . . . . . . .    N NUMB   000BH   A   
REG_SYS_BRT. . . . . . . . . . . . . .    N NUMB   009CH   A   
REG_WAKECLK0 . . . . . . . . . . . . .    N NUMB   008FH   A   
REG_WAKECLK_04 . . . . . . . . . . . .    B ADDR   00D8H.4 A   
REG_WAKECLK_05 . . . . . . . . . . . .    B ADDR   00D8H.5 A   
REG_WAKE_CLK0. . . . . . . . . . . . .    N NUMB   008FH   A   
REG_WDT_CONTR. . . . . . . . . . . . .    N NUMB   00C1H   A   
RELOAD2_CONTR. . . . . . . . . . . . .    N NUMB   00EAH   A   
REN. . . . . . . . . . . . . . . . . .    B ADDR   0098H.4 A   
RI . . . . . . . . . . . . . . . . . .    B ADDR   0098H.0 A   
RS0. . . . . . . . . . . . . . . . . .    B ADDR   00D0H.3 A   
RS1. . . . . . . . . . . . . . . . . .    B ADDR   00D0H.4 A   
RX_EN. . . . . . . . . . . . . . . . .    C ADDR   -----       EXT
S2BUF. . . . . . . . . . . . . . . . .    N NUMB   009BH   A   
S2CON. . . . . . . . . . . . . . . . .    N NUMB   009AH   A   
SCON . . . . . . . . . . . . . . . . .    D ADDR   0098H   A   
SEG_OBUMAIN_CARDACTIVE . . . . . . . .    C ADDR   018DH   R   SEG=?PR?OBUMAIN?MATER
SEG_OBUMAIN_CDACTIVE . . . . . . . . .    C ADDR   0103H   R   SEG=?PR?OBUMAIN?MATER
SEG_OBUMAIN_WAVEACTIVE . . . . . . . .    C ADDR   0550H   R   SEG=?PR?OBUMAIN?MATER
SLEEP. . . . . . . . . . . . . . . . .    C ADDR   00ABH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
SP . . . . . . . . . . . . . . . . . .    D ADDR   0081H   A   
START_USER . . . . . . . . . . . . . .    C ADDR   00C6H   R   SEG=?PR?OBUMAIN?MATER
START_USER02 . . . . . . . . . . . . .    C ADDR   00D9H   R   SEG=?PR?OBUMAIN?MATER
STR_ACTCARDINVALID . . . . . . . . . .    C ADDR   -----       EXT
STR_ACTIVEFAIL . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ACTIVEOK . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ALREADYWRIN. . . . . . . . . . . .    C ADDR   -----       EXT
STR_CARDAPP_TIME . . . . . . . . . . .    C ADDR   002AH   R   SEG=?CO?OBUMAIN?STR
STR_CARDAPP_TIME02 . . . . . . . . . .    C ADDR   002FH   R   SEG=?CO?OBUMAIN?STR
STR_CHANG. . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_CLR. . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_CMDUP. . . . . . . . . . . . . . .    C ADDR   0034H   R   SEG=?CO?OBUMAIN?STR
STR_COLOR256_1 . . . . . . . . . . . .    C ADDR   -----       EXT
STR_COLOR256_2 . . . . . . . . . . . .    C ADDR   -----       EXT
STR_COLOR_1. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_CPBF . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_DSRC_DF. . . . . . . . . . . . . .    C ADDR   0027H   R   SEG=?CO?OBUMAIN?STR
STR_DSRC_SELDF . . . . . . . . . . . .    C ADDR   0021H   R   SEG=?CO?OBUMAIN?STR
STR_ERRCARD. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ERROR. . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_INPUT. . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_OUTPUT . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_RRING. . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_SRR. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_VOTALOW. . . . . . . . . . . .    C ADDR   -----       EXT
STR_HV02 . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ICON_BJ. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ILLEGALACTCARD . . . . . . . . . .    C ADDR   -----       EXT
STR_ILLEGALINPUTCARD . . . . . . . . .    C ADDR   -----       EXT
STR_INFLAG . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_INPUTCARDINVALID . . . . . . . . .    C ADDR   -----       EXT
STR_INPUTFAIL. . . . . . . . . . . . .    C ADDR   -----       EXT
STR_INPUTOK. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ISNOTSC. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_LOGCARD. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_LOWV . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_LOWVO. . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_MOVECARD . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_NOCARD . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_NOXCARD. . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_PASS . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_READBLOCK01. . . . . . . . . . . .    C ADDR   0000H   R   SEG=?CO?OBUMAIN?STR
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   107

STR_READBLOCK04. . . . . . . . . . . .    C ADDR   000BH   R   SEG=?CO?OBUMAIN?STR
STR_READBLOCK10. . . . . . . . . . . .    C ADDR   0016H   R   SEG=?CO?OBUMAIN?STR
STR_REWROK . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_RXCARDER . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_SET. . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_SETMMIER . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_SYS_OBUID. . . . . . . . . . . . .    C ADDR   002FH   A   
STR_UNFIX. . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_VHDIF. . . . . . . . . . . . . . .    C ADDR   -----       EXT
TCON . . . . . . . . . . . . . . . . .    D ADDR   0088H   A   
TEST_5823_LOOP . . . . . . . . . . . .    C ADDR   -----       EXT
TEST_SERIALTX03_ISSUE. . . . . . . . .    C ADDR   -----       EXT
TF0. . . . . . . . . . . . . . . . . .    B ADDR   0088H.5 A   
TF1. . . . . . . . . . . . . . . . . .    B ADDR   0088H.7 A   
TH0. . . . . . . . . . . . . . . . . .    D ADDR   008CH   A   
TH1. . . . . . . . . . . . . . . . . .    D ADDR   008DH   A   
TI . . . . . . . . . . . . . . . . . .    B ADDR   0098H.1 A   
TI_CCXXX0_ADDR . . . . . . . . . . . .    N NUMB   0009H   A   
TI_CCXXX0_AGCCTRL0 . . . . . . . . . .    N NUMB   001DH   A   
TI_CCXXX0_AGCCTRL1 . . . . . . . . . .    N NUMB   001CH   A   
TI_CCXXX0_AGCCTRL2 . . . . . . . . . .    N NUMB   001BH   A   
TI_CCXXX0_AGCTEST. . . . . . . . . . .    N NUMB   002BH   A   
TI_CCXXX0_BSCFG. . . . . . . . . . . .    N NUMB   001AH   A   
TI_CCXXX0_CHANNR . . . . . . . . . . .    N NUMB   000AH   A   
TI_CCXXX0_DEVIATN. . . . . . . . . . .    N NUMB   0015H   A   
TI_CCXXX0_FIFOTHR. . . . . . . . . . .    N NUMB   0003H   A   
TI_CCXXX0_FOCCFG . . . . . . . . . . .    N NUMB   0019H   A   
TI_CCXXX0_FREND0 . . . . . . . . . . .    N NUMB   0022H   A   
TI_CCXXX0_FREND1 . . . . . . . . . . .    N NUMB   0021H   A   
TI_CCXXX0_FREQ0. . . . . . . . . . . .    N NUMB   000FH   A   
TI_CCXXX0_FREQ1. . . . . . . . . . . .    N NUMB   000EH   A   
TI_CCXXX0_FREQ2. . . . . . . . . . . .    N NUMB   000DH   A   
TI_CCXXX0_FREQEST. . . . . . . . . . .    N NUMB   0032H   A   
TI_CCXXX0_FSCAL0 . . . . . . . . . . .    N NUMB   0026H   A   
TI_CCXXX0_FSCAL1 . . . . . . . . . . .    N NUMB   0025H   A   
TI_CCXXX0_FSCAL2 . . . . . . . . . . .    N NUMB   0024H   A   
TI_CCXXX0_FSCAL3 . . . . . . . . . . .    N NUMB   0023H   A   
TI_CCXXX0_FSCTRL0. . . . . . . . . . .    N NUMB   000CH   A   
TI_CCXXX0_FSCTRL1. . . . . . . . . . .    N NUMB   000BH   A   
TI_CCXXX0_FSTEST . . . . . . . . . . .    N NUMB   0029H   A   
TI_CCXXX0_IOCFG0 . . . . . . . . . . .    N NUMB   0002H   A   
TI_CCXXX0_IOCFG1 . . . . . . . . . . .    N NUMB   0001H   A   
TI_CCXXX0_IOCFG2 . . . . . . . . . . .    N NUMB   0000H   A   
TI_CCXXX0_LQI. . . . . . . . . . . . .    N NUMB   0033H   A   
TI_CCXXX0_MARCSTATE. . . . . . . . . .    N NUMB   0035H   A   
TI_CCXXX0_MCSM0. . . . . . . . . . . .    N NUMB   0018H   A   
TI_CCXXX0_MCSM1. . . . . . . . . . . .    N NUMB   0017H   A   
TI_CCXXX0_MCSM2. . . . . . . . . . . .    N NUMB   0016H   A   
TI_CCXXX0_MDMCFG0. . . . . . . . . . .    N NUMB   0014H   A   
TI_CCXXX0_MDMCFG1. . . . . . . . . . .    N NUMB   0013H   A   
TI_CCXXX0_MDMCFG2. . . . . . . . . . .    N NUMB   0012H   A   
TI_CCXXX0_MDMCFG3. . . . . . . . . . .    N NUMB   0011H   A   
TI_CCXXX0_MDMCFG4. . . . . . . . . . .    N NUMB   0010H   A   
TI_CCXXX0_NUM_RXBYTES. . . . . . . . .    N NUMB   007FH   A   
TI_CCXXX0_PARTNUM. . . . . . . . . . .    N NUMB   0030H   A   
TI_CCXXX0_PATABLE. . . . . . . . . . .    N NUMB   003EH   A   
TI_CCXXX0_PKTCTRL0 . . . . . . . . . .    N NUMB   0008H   A   
TI_CCXXX0_PKTCTRL1 . . . . . . . . . .    N NUMB   0007H   A   
TI_CCXXX0_PKTLEN . . . . . . . . . . .    N NUMB   0006H   A   
TI_CCXXX0_PKTSTATUS. . . . . . . . . .    N NUMB   0038H   A   
TI_CCXXX0_PTEST. . . . . . . . . . . .    N NUMB   002AH   A   
TI_CCXXX0_RCCTRL0. . . . . . . . . . .    N NUMB   0028H   A   
TI_CCXXX0_RCCTRL1. . . . . . . . . . .    N NUMB   0027H   A   
TI_CCXXX0_RSSI . . . . . . . . . . . .    N NUMB   0034H   A   
TI_CCXXX0_RXBYTES. . . . . . . . . . .    N NUMB   003BH   A   
TI_CCXXX0_RXFIFO . . . . . . . . . . .    N NUMB   003FH   A   
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   108

TI_CCXXX0_SAFC . . . . . . . . . . . .    N NUMB   0037H   A   
TI_CCXXX0_SCAL . . . . . . . . . . . .    N NUMB   0033H   A   
TI_CCXXX0_SFRX . . . . . . . . . . . .    N NUMB   003AH   A   
TI_CCXXX0_SFTX . . . . . . . . . . . .    N NUMB   003BH   A   
TI_CCXXX0_SIDLE. . . . . . . . . . . .    N NUMB   0036H   A   
TI_CCXXX0_SNOP . . . . . . . . . . . .    N NUMB   003DH   A   
TI_CCXXX0_SPWD . . . . . . . . . . . .    N NUMB   0039H   A   
TI_CCXXX0_SRES . . . . . . . . . . . .    N NUMB   0030H   A   
TI_CCXXX0_SRX. . . . . . . . . . . . .    N NUMB   0034H   A   
TI_CCXXX0_STX. . . . . . . . . . . . .    N NUMB   0035H   A   
TI_CCXXX0_SWOR . . . . . . . . . . . .    N NUMB   0038H   A   
TI_CCXXX0_SWORRST. . . . . . . . . . .    N NUMB   003CH   A   
TI_CCXXX0_SXOFF. . . . . . . . . . . .    N NUMB   0032H   A   
TI_CCXXX0_SYNC0. . . . . . . . . . . .    N NUMB   0005H   A   
TI_CCXXX0_SYNC1. . . . . . . . . . . .    N NUMB   0004H   A   
TI_CCXXX0_TEST0. . . . . . . . . . . .    N NUMB   002EH   A   
TI_CCXXX0_TEST1. . . . . . . . . . . .    N NUMB   002DH   A   
TI_CCXXX0_TEST2. . . . . . . . . . . .    N NUMB   002CH   A   
TI_CCXXX0_TXBYTES. . . . . . . . . . .    N NUMB   003AH   A   
TI_CCXXX0_TXFIFO . . . . . . . . . . .    N NUMB   003FH   A   
TI_CCXXX0_VCO_VC_DAC . . . . . . . . .    N NUMB   0039H   A   
TI_CCXXX0_VERSION. . . . . . . . . . .    N NUMB   0031H   A   
TI_CCXXX0_WORCTRL. . . . . . . . . . .    N NUMB   0020H   A   
TI_CCXXX0_WOREVT0. . . . . . . . . . .    N NUMB   001FH   A   
TI_CCXXX0_WOREVT1. . . . . . . . . . .    N NUMB   001EH   A   
TI_CCXXX0_WORTIME0 . . . . . . . . . .    N NUMB   0037H   A   
TI_CCXXX0_WORTIME1 . . . . . . . . . .    N NUMB   0036H   A   
TL0. . . . . . . . . . . . . . . . . .    D ADDR   008AH   A   
TL1. . . . . . . . . . . . . . . . . .    D ADDR   008BH   A   
TMOD . . . . . . . . . . . . . . . . .    D ADDR   0089H   A   
TR0. . . . . . . . . . . . . . . . . .    B ADDR   0088H.4 A   
TR1. . . . . . . . . . . . . . . . . .    B ADDR   0088H.6 A   
TX_CARRIER_EN. . . . . . . . . . . . .    C ADDR   -----       EXT
UNSLEEP. . . . . . . . . . . . . . . .    C ADDR   0168H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
WAKE_CLKO. . . . . . . . . . . . . . .    N NUMB   008FH   A   
WAVEACTIVE_PRE03_LOOP. . . . . . . . .    C ADDR   068BH   R   SEG=?PR?OBUMAIN?MATER
WAVEACTIVE_PRE03_PREDEAL . . . . . . .    C ADDR   069EH   R   SEG=?PR?OBUMAIN?MATER
WKO_BK . . . . . . . . . . . . . . . .    B ADDR   00B0H.2 A   
XDATA_433RXNUM . . . . . . . . . . . .    X ADDR   009FH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_54 . . . . . . . . . . . . . . .    X ADDR   009EH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_BEACONID . . . . . . . . . . . .    X ADDR   0082H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_BSTNUM . . . . . . . . . . . . .    X ADDR   0097H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_BUF. . . . . . . . . . . . . . .    X ADDR   0082H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_CELLID . . . . . . . . . . . . .    X ADDR   00ABH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_FIX. . . . . . . . . . . . . . .    X ADDR   008DH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_HIGHBAUD . . . . . . . . . . . .    X ADDR   0090H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_HOLD . . . . . . . . . . . . . .    X ADDR   00ADH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_ISSUECMD . . . . . . . . . . . .    X ADDR   008FH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_ISSUERSCTL . . . . . . . . . . .    X ADDR   008EH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_LASTBEACONID . . . . . . . . . .    X ADDR   00A1H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_LOADCELLTOUSER . . . . . . . . .    X ADDR   00A9H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_NUM. . . . . . . . . . . . . . .    X ADDR   008AH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_POWER. . . . . . . . . . . . . .    X ADDR   0093H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_RAND . . . . . . . . . . . . . .    X ADDR   0092H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_RTCMODE. . . . . . . . . . . . .    X ADDR   009AH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_RTCTIME. . . . . . . . . . . . .    X ADDR   0099H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SC . . . . . . . . . . . . . . .    X ADDR   0098H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SETMMI . . . . . . . . . . . . .    X ADDR   0096H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SETMMINUM. . . . . . . . . . . .    X ADDR   00A0H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SOFTFIRSTSCANTIME. . . . . . . .    X ADDR   008BH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SOFTSERIALP. . . . . . . . . . .    X ADDR   008CH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_SP . . . . . . . . . . . . . . .    X ADDR   009DH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_TFTINIT_FLAG . . . . . . . . . .    X ADDR   00FFH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_TOTALNUMH. . . . . . . . . . . .    X ADDR   009BH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_TOTALNUML. . . . . . . . . . . .    X ADDR   009CH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_TXBUF. . . . . . . . . . . . . .    X ADDR   0000H   R   SEG=?XDT?OBUMAIN?XDATAD
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   109

XDATA_UNIXTIME . . . . . . . . . . . .    X ADDR   0086H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_VARSTART . . . . . . . . . . . .    X ADDR   0082H   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_VSTDELAY . . . . . . . . . . . .    X ADDR   00AAH   R   SEG=?XDT?OBUMAIN?XDATAD
XDATA_VSTNUM . . . . . . . . . . . . .    X ADDR   0091H   R   SEG=?XDT?OBUMAIN?XDATAD
_DSPERRNUM . . . . . . . . . . . . . .    C ADDR   -----       EXT
_DSPMONEY. . . . . . . . . . . . . . .    C ADDR   -----       EXT
_ENTER_SLEEP_MODE. . . . . . . . . . .    C ADDR   -----       EXT
_ERASEFLASH. . . . . . . . . . . . . .    C ADDR   -----       EXT
_FUNC_LCD_DISPLAY. . . . . . . . . . .    C ADDR   -----       EXT
_FUNC_LCD_INIT . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_ACTIVEOBU . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_CARDCHANNEL . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_DECCOUNTER. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_GDFXOBU . . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_GETBALANCE. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_ISINORACT . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_READBINARY. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_READBINARY02. . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_READRECORD. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_SELECTFILE. . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_UPDATEBINARY. . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_CZ . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_IDLE . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_INIT . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RESET. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVOFF. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVON . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVWR . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVWR02 . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RX . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_SETWAKEUPTIME. . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_SPIOSINGLESOFT02 . . . . .    C ADDR   1249H   R   SEG=?PR?OBUMAIN?MATER
_FUN_CC1101_SPIOSOFTRXCC1101RXCC1101 .    C ADDR   -----       EXT
_FUN_CC1101_WAKEUP . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_INIT . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_INIT02 . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_INITDOWN . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_RELEASE. . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_RX . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_RXBST. . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_TX . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_CHANGEBAUD. . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL0. . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL1. . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_INIT. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACT_PPS . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_DSRC_NSPECIAL . . . . . . . . . .    C ADDR   -----       EXT
_FUN_DSRC_VST. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_AUDIO . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_GETCELLIDEN . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_GETOFFSET . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_INSERT. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_RTCEN . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_RTCOFF. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_RTCON . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_SERIALINTRX . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_5830INIT . . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_CHANGECHANNEL. . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_CHECKREG9TO18. . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_CLOSECLR . . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_FREXIAODUI . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_ISSLEEPMOD . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_RX . . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_RXSETMMI . . . . . . . . . .    C ADDR   -----       EXT
_FUN_HDLC_TX . . . . . . . . . . . . .    C ADDR   -----       EXT
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   110

_FUN_LCD_DISPLAYEXCHINA. . . . . . . .    C ADDR   -----       EXT
_FUN_LCD_DISPLAYEXMONEY. . . . . . . .    C ADDR   -----       EXT
_FUN_LCD_ICON. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_1MSDELAYC . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_BEEP. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_COMPARETIME . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_DATATOXDATA . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_DELAY . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_DELAYSIMPLAY. . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_ESAMERR . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_FLASHTODATA . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_FLASHTODATAEX . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_FLASHTOXDATA. . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_POWERADD. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_POWERPER. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_RAND. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_RANDDELAY . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_XDATATODATA . . . . . . . . .    C ADDR   -----       EXT
_FUN_MF_CHANNEL. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500ANTICOLL. . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500CONFIG. . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500REQUEST . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500RST . . . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500SELECT. . . . . . .    C ADDR   -----       EXT
_FUN_NCONTACT_RC500_PPS_CONFIG . . . .    C ADDR   -----       EXT
_FUN_OBUMAIN_BASEINIT. . . . . . . . .    C ADDR   0A82H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_BASEINIT02. . . . . . . .    C ADDR   0B5DH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_BDCB. . . . . . . . . . .    C ADDR   1047H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_BEEP. . . . . . . . . . .    C ADDR   0FBEH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_CARDINFODISPLAY . . . . .    C ADDR   0EB6H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_CARDINFODISPLAY02 . . . .    C ADDR   1130H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_CARDPREDEAL . . . . . . .    C ADDR   0C91H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_CHECKMEMORYANDEX. . . . .    C ADDR   134EH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_DR. . . . . . . . . . . .    C ADDR   12A1H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_ERRSHOW . . . . . . . . .    C ADDR   1316H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_ERRSHOW02 . . . . . . . .    C ADDR   134DH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_ERRSHOW03 . . . . . . . .    C ADDR   12E2H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_INITSYS . . . . . . . . .    C ADDR   09E7H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_PINSLEEP. . . . . . . . .    C ADDR   00ABH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
_FUN_OBUMAIN_PINUNSLEEP. . . . . . . .    C ADDR   0168H   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
_FUN_OBUMAIN_PREPU . . . . . . . . . .    C ADDR   1285H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_PRESLEEP. . . . . . . . .    C ADDR   1260H   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_RTCUP . . . . . . . . . .    C ADDR   112CH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_SELECTDF01. . . . . . . .    C ADDR   101AH   R   SEG=?PR?OBUMAIN?MATER
_FUN_OBUMAIN_SYSUNSLEEP. . . . . . . .    C ADDR   014CH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
_FUN_OBUMAIN_SYSUNSLEEP02. . . . . . .    C ADDR   015AH   R   SEG=?PR?OBUMAIN?TF0_TIMER_1
_FUN_OBUMAIN_TIMERX. . . . . . . . . .    C ADDR   1037H   R   SEG=?PR?OBUMAIN?MATER
_FUN_PROCARD_RATS. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_PRO_PPS . . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_AUDIOTXSOFT. . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_INIT . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXHARD . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXSOFT . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXSOFTRST. . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXTXINTERRUPT. . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_TXHARD . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_TXSOFT . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TESTCARDAPP_SELECTFILE. . . . . .    C ADDR   -----       EXT
_FUN_TEST_BEEP . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_CHECKRTCMODE . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_DISPLAY. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_DISPLAY02. . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_GSMTX. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_MASTER . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_RED. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_SERIALTX03 . . . . . . . . .    C ADDR   -----       EXT
A51 MACRO ASSEMBLER  OBUMAIN                                                              02/16/2017 09:49:06 PAGE   111

_POWER_UP. . . . . . . . . . . . . . .    C ADDR   -----       EXT
_RDFLASH . . . . . . . . . . . . . . .    C ADDR   -----       EXT
_RDFLASHXR . . . . . . . . . . . . . .    C ADDR   -----       EXT
_WRFLASH . . . . . . . . . . . . . . .    C ADDR   -----       EXT
_WRFLASHXR . . . . . . . . . . . . . .    C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
