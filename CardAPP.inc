;---段定义---
?pr?CARDAPP?Mater		SEGMENT CODE
?co?CARDAPP?FLASHSTR		SEGMENT	CODE
	
;--- CPU CARD ---
EXTRN	CODE(_FUN_Contact_INIT)									;初始化CPU卡
EXTRN	CODE(_FUN_Contact_Channel0)								;T0卡操作函数
EXTRN	CODE(_FUN_Contact_Channel1)								;T1卡操作函数
EXTRN	CODE(_FUN_Contact_PPS)									;PPS[设置指令]
EXTRN	CODE(_FUN_Contact_CHANGEBAUD)
EXTRN	CODE(_FUN_Contact_Channel)								;卡操作[软发送，硬接收])
EXTRN	CODE(_FUN_MF_Channel)
EXTRN	CODE(_FUN_ProCard_Channel)
EXTRN	CODE(_eraseflash)	
EXTRN	CODE(_wrflashXR)	
	
EXTRN	BIT(BIT_ISContact) 									;上一次及本次插卡类型，=1是接触卡=0是非接触卡
EXTRN	BIT(BIT_ProMF)	 									;=1 表示是pro卡，=0表示，MF卡
EXTRN	BIT(BIT_ESAMICC)
EXTRN	BIT(BIT_GETRESULT)
	
;--- 输出 ---
PUBLIC	_FUN_CARDAPP_SelectFile									; 选目录或文件
PUBLIC	_FUN_CARDAPP_ReadBinary									; 读二进制文件
PUBLIC	_FUN_CARDAPP_GetBalance									; 读余额
PUBLIC	_FUN_CARDAPP_ReadRecord									; 读记录
PUBLIC	_FUN_CARDAPP_CardChannel								; 卡片通道
PUBLIC	_FUN_CARDAPP_DECCounter									; 减记数
;PUBLIC	_FUN_CARDAPP_WriteBinary								; 写二进制文件
PUBLIC	_FUN_CARDAPP_ReadBinary02
PUBLIC	_FUN_CARDAPP_UpdateBinary
PUBLIC	_FUN_CARDAPP_GDFXOBU
PUBLIC	_FUN_CARDAPP_ACTIVEOBU
PUBLIC	_FUN_CARDAPP_ISInOrACT
	
;--- TEST ---
EXTRN	CODE(_FUN_TestContact_Channel0)
EXTRN	CODE(_FUN_TEST_DISPLAY)
EXTRN	CODE(_FUN_LIB_FLASHTODATA)
EXTRN	CODE(_FUN_LIB_XDATATODATA)
EXTRN	CODE(_FUN_LIB_DATATOXDATA)

EXTRN	CODE(_FUN_LIB_FLASHTOXDATA)
EXTRN	DATA(DATA_RXBUF)
EXTRN	XDATA(XDATA_TXBUF)
EXTRN	XDATA(XDATA_HOLD)
EXTRN	DATA(DATA_OBUID)	
	
PUBLIC	_FUN_TESTCARDAPP_SelectFile
RSEG	?co?CARDAPP?FLASHSTR
	
STR_CARDAPP_Rand:	;读文件
	DB	05H
	DB	00H,84H,00H,00H,04H
	
STR_CARDAPP_PIN:
	DB	05H
	DB	00H,20H,00H,00H,03H
	
STR_CARDAPP_88:
	DB	05H
	DB	00H,88H,02H,00H,54H
	;DB	00H,88H,02H,00H,71
	;DB	00H,88H,02H,00H,3FH
	
STR_CARDAPP_88_02:
	DB	05H
	;DB	00H,88H,02H,00H,54H
	;DB	00H,88H,02H,00H,71
	DB	00H,88H,02H,00H,1AH
	
STR_CARDAPP_88_03:
	DB	05H
	DB	00H,88H,02H,01H,0EH
	
STR_CARDAPP_88_04:
	DB	05H
	DB	00H,88H,02H,00H,06H
	
STR_CARDAPP_88_05:
	DB	05H
	DB	00H,88H,02H,01H,54H
	
STR_CARDAPP_88_06:
	DB	05H
	DB	00H,88H,02H,01H,36H
	
	
STR_CARDAPP_D681:
	DB	05H
	DB	04H,0d6H,81H,00H,53H
	;DB	04H,0d6H,81H,00H,3EH
	
STR_CARDAPP_D68102:
	DB	05H
	;DB	04H,0d6H,81H,00H,53H
	DB	04H,0d6H,81H,3AH,19H	
	
STR_CARDAPP_D68103:
	DB	05
	DB	04H,0d6H,81H,12H,0DH
	
STR_CARDAPP_D68104:
	DB	05
	DB	04H,0d6H,81H,1AH,005H
	;DB	04H,0d6H,81H,28H,005H
	
	
STR_CARDAPP_D68105:
	DB	05
	DB	04H,0d6H,9dH,00H,53H

STR_CARDAPP_D68106:
	DB	05
	DB	04H,0d6H,9dH,4fH,35H	
	
STR_CARDAPP_xor04d68100:
	DB	04
	DB	04H,0d6H,81H,00H

STR_CARDAPP_xor04d6811A:
	DB	04
	DB	04H,0d6H,81H,1AH
	;DB	04H,0d6H,81H,28H
	 
STR_CARDAPP_xor04d6813A:
	DB	04
	DB	04H,0d6H,81H,3AH
	
STR_CARDAPP_xor04d68112:
	DB	04
	DB	04H,0d6H,81H,12H
	
	
STR_CARDAPP_xor04d69D31:
	DB	04
	DB	04H,0d6H,9DH,00H	
	
STR_CARDAPP_xor04d69D4f:
	DB	04
	DB	04H,0d6H,9DH,4fH		
	
STR_CARDAPP_xor3e267a:
	DB	03
	;DB	3eH,026H,7aH
	DB	097H,03DH,06EH
	
	;00 B2 01 D4 1A
STR_CARDAPP_RX001A:
	DB	05
	;DB	000H,0B2H,001H,0D4H,1AH
	DB	000H,0B2H,001H,0D4H,28H
	
STR_CARDAPP_WX001A:
	DB	05
	;DB	000H,0DCH,001H,0D4H,1AH
	DB	000H,0DCH,001H,0D4H,28H
	
