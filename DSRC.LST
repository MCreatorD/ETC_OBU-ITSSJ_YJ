A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE     1


MACRO ASSEMBLER A51 V8.00d
OBJECT MODULE PLACED IN DSRC.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE DSRC.ASM SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     ;**********************************************************************
                       2     ;ÃèÊö£ºDSRCÍ¨Ñ¶³ÌÐò¼¯
                       3     ;º¯ÊÉêÃ÷
                       4     ;_FUN_DSRC_VST                                  ---     VSTÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý]
                       5     ;_FUN_DSRC_NSpecial                             ---     ·Ç¹ã²¥DSRCÐÅºÅ´¦Àí³ÌÐòÈë¿Ú(³VST£¬Æä
                             ËüDSRCÐÅºÅ´¦ÀíÓÉ´Ë½øÈë)
                       6     ;       ¸½ÊôÐò¶Î:SEG_DSRCSpecial_ComplexSeg     ---     DSRC¸´ÓÃ¶Î£¨´¦Àí´Ó'×Ö¶ÎÍ·'µ½'FildID
                             ||ChannelID'Ö®¼äµÄÊ¾Ý£©
                       7     ;       ¸½ÊôÐò¶Î:SEG_DSRC_GETSendBufLen         ---     ¼ÇÂ¼HDLC·¢ËÍç·³å³¤¶È
                       8     ;       ¸½ÊôÐò¶Î:SEG_DSRC_GetSecure             ---     GetSecureÅäÖÃº¯Ê
                       9     ;       ¸½ÊôÐò¶Î:SEG_DSRC_TransferChannel       ---     TransferChannelÅäÖÃº¯Ê
                      10     ;       ¸½ÊôÐò¶Î:SEG_DSRC_SetMMI                ---     SetMMIÅäÖÃº¯Ê
                      11     ;       
                      12     ;       ¸½ÊôÐò¶Î:SEG_DSRC_SetSecure(¿Õ)         ---     SetSecureÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ
                             ¾Ý]
                      13     ;       ¸½ÊôÐò¶Î:SEG_DSRC_GetRand(¿Õ)           ---     GetRandÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý
                             ]
                      14                             
                      15     ;º¯Ê¹ØÏµ
                      16     ;       DSRCÐÅºÅ -> _FUN_DSRC_NSpecial
                      17     ;                       |
                      18     ;               SEG_DSRCSpecial_ComplexSeg(DSRC¸´ÓÃ¶Î) <--------|
                      19     ;                       |                                       |                          
                                                  
                      20     ;                       |-----> SEG_DSRC_GetSecure -------------|
                      21     ;                       |               |                       |
                      22     ;                       |            <ÓÐºó¼Ì¶Î> ------ok------->|
                      23     ;                       |               |NO                     |
                      24     ;                       |               ½áÊø(RET)               |
                      25     ;                       |                                       |
                      26     ;                       |-----> SEG_DSRC_TransferChannel ------>|
                      27     ;                       |               |                       |
                      28     ;                       |            <ÓÐºó¼Ì¶Î> ------ok------->|
                      29     ;                       |               |NO                     |
                      30     ;                       |               ½áÊø(RET)               |
                      31     ;                       |                                       |
                      32     ;                       |-----> SEG_DSRC_SetMMI                 |
                      33     ;                       |               |                       |
                      34     ;                       |            <ÓÐºó¼Ì¶Î> ------ok------->|
                      35     ;                       |               |NO
                      36     ;                       |               ½áÊø(RET)
                      37     ;                       |----->SEG_DSRC_SetSecure(¿Õ)
                      38     ;                       |----->SEG_DSRC_GetRand(¿Õ)
                      39     ;
                      40     ;**********************************************************************
                      41     NAME    DSRC
                      42     
                      43     ;$include (DSRC.INC)
                +1    44     ;---¶Î¶¨Òå---
                +1    45     ?pr?DSRC?Mater          SEGMENT CODE
                +1    46     ?co?DSRC?COMMLIB        SEGMENT CODE
                +1    47     ;////////////////////////////////////////////////////////////////////////////////////////
                +1    48     ;--- Êä³ö ---
                +1    49     PUBLIC  _FUN_DSRC_VST
                +1    50     ;PUBLIC _FUN_DSRC_GetSecure
                +1    51     ;PUBLIC _FUN_DSRC_SetSecure
                +1    52     ;PUBLIC _FUN_DSRC_GetRand
                +1    53     ;PUBLIC _FUN_DSRC_TransferChannel
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE     2

                +1    54     ;PUBLIC _FUN_DSRC_SetMMI
                +1    55     PUBLIC  _FUN_DSRC_NSpecial
                +1    56     ;////////////////////////////////////////////////////////////////////////////////////////
                +1    57     ;--- ÊäÈë ---
                +1    58     EXTRN   BIT(BIT_Cellinfo)
                +1    59     EXTRN   BIT(BIT_INSERTCARD)
                +1    60     EXTRN   BIT(BIT_CHANNELFLAG)
                +1    61     EXTRN   BIT(BIT_ESAMICC)
                +1    62     EXTRN   BIT(BIT_T0T1)
                +1    63     EXTRN   BIT(BIT_ACCESS)
                +1    64     EXTRN   BIT(BIT_KEY)
                +1    65     EXTRN   BIT(BIT_N)
                +1    66     EXTRN   BIT(BIT_SETMMI)
                +1    67     EXTRN   BIT(BIT_GETRESULT)
                +1    68     EXTRN   BIT(BIT_ISContact)
                +1    69     EXTRN   BIT(BIT_PROMF)
                +1    70     EXTRN   BIT(BIT_BUFADDR)
                +1    71     EXTRN   BIT(BIT_SERIALOVERTIMERX)
                +1    72     EXTRN   BIT(BIT_VERIFY)
                +1    73     EXTRN   BIT(BIT_privateInfo)
                +1    74     EXTRN   BIT(BIT_gbICCInfo)
                +1    75     EXTRN   BIT(BIT_CD)
                +1    76     EXTRN   BIT(BIT_BJ1219)
                +1    77     EXTRN   BIT(BIT_ESAMErr)
                +1    78     EXTRN   BIT(BIT_ESAMOK)
                +1    79     ;extrn  bit(BIT_8054_flag)
                +1    80     
                +1    81     EXTRN   XDATA(XDATA_HOLD)
                +1    82     EXTRN   XDATA(XDATA_TXBUF)
                +1    83     EXTRN   XDATA(XDATA_BeaconID)
                +1    84     EXTRN   XDATA(XDATA_UnixTime)
                +1    85     EXTRN   XDATA(XDATA_SOFTFIRSTSCANTIME)
                +1    86     EXTRN   XDATA(XDATA_FIX)
                +1    87     EXTRN   XDATA(XDATA_Power)
                +1    88     EXTRN   XDATA(XDATA_CELLID)
                +1    89     ;EXTRN  XDATA(XDATA_SysParam)
                +1    90     
                +1    91     EXTRN   DATA(DATA_RXBUF)
                +1    92     EXTRN   DATA(DATA_DSRCTXLEN)
                +1    93     EXTRN   DATA(DATA_DSRCRXLEN)
                +1    94     EXTRN   DATA(DATA_CardNO)
                +1    95     ;EXTRN  DATA(DATA_VARTMP1)
                +1    96     
                +1    97     extrn   code(_eraseflash)
                +1    98     extrn   code(_wrflashxr)
                +1    99     EXTRN   CODE(STR_SYS_OBUID)
                +1   100     EXTRN   CODE(_FUN_LIB_FLASHTOXDATA)
                +1   101     EXTRN   CODE(_rdflashxr)
                +1   102     EXTRN   CODE(_FUN_Contact_Channel)
                +1   103     EXTRN   CODE(_FUN_CARDAPP_CardChannel)
                +1   104     EXTRN   CODE(_FUN_LIB_FLASHTODATAEX)
                +1   105     EXTRN   CODE(_FUN_SERIAL_RXSOFT)
                +1   106     EXTRN   CODE(_FUN_CARDAPP_SelectFile)
                +1   107     EXTRN   CODE(_FUN_HDLC_CHANGECHANNEL)
                +1   108     ;--- Library ---
                +1   109     EXTRN   CODE(_FUN_LIB_FLASHTODATA)
                +1   110     EXTRN   CODE(_getnewcrc_xr)
                +1   111     EXTRN   CODE(_getnewcrc)
                +1   112     
                +1   113     EXTRN   CODE(_FUN_LIB_ESAMErr)
                +1   114     
                +1   115     
                +1   116     ;--- TEST ---
                +1   117     ;EXTRN  CODE(STR_READVEHICLE)
                +1   118     ;EXTRN  CODE(_FUN_TESTContact_OPRET0)
                +1   119     EXTRN   CODE(_FUN_CARDAPP_UpdateBinary)
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE     3

                +1   120     EXTRN   CODE(_FUN_GSM_RTCDis)
                +1   121     EXTRN   CODE(_FUN_CARDAPP_ReadRecord)
                +1   122     EXTRN   CODE(_FUN_LIB_XDATATOXDATA)
                +1   123     ;EXTRN  CODE(_wrflashxr)
                +1   124     EXTRN   CODE(_FUN_LIB_XDATATODATA)
                +1   125     ;EXTRN  CODE(_FUN_CARDAPP_UpdateBinary)
                +1   126     EXTRN   CODE(_FUN_GSM_RTCEn)
                +1   127     EXTRN   CODE(_FUN_TEST_BEEP)
                +1   128     EXTRN   CODE(_FUN_TEST_DISPLAY)
                +1   129     EXTRN   CODE(_FUN_TEST_UARTDISPLAY)
                +1   130     extrn   xdata(XDATA_54)
                +1   131     ;////////////////////////////////////////////////////////////////////////////////////////
----            +1   132             RSEG    ?co?DSRC?COMMLIB
0000            +1   133     STR_DSRC_GETRND:
0000 05         +1   134             DB      05H
0001 00840000   +1   135             DB      00,84H,00,00,04H
0005 04                      
                +1   136     ;////////////////////////////////////////////////////////////////////////////////////////
0006            +1   137     STR_DSRC_VST:           ;VST»ù±¾×é³É
0006 0A         +1   138             DB      00AH                    ;³¤¶È
                +1   139             ;DB     0FFH,0FFH,0FFH,0FFH     ;MACµØÖ·
0007 C0         +1   140             DB      0C0H                    ;MAC¿ØÖÆÓò
0008 03         +1   141             DB      003H                    ;LLC¿ØÖÆÓò
0009 91         +1   142             DB      091H                    ;×Ö¶Î×ÖÍ·
000A D0         +1   143             DB      0D0H
000B 00         +1   144             DB      000H
000C 01         +1   145             DB      001H
000D C1         +1   146             DB      0C1H
000E 01         +1   147             DB      001H
000F FF         +1   148             DB      0FFH
0010 27         +1   149             DB      027H
0011            +1   150     STR_DSRC_VST02:         ;VST»ù±¾×é³É
0011 0A         +1   151             DB      00AH                    ;³¤¶È
                +1   152             ;DB     0FFH,0FFH,0FFH,0FFH     ;MACµØÖ·
0012 C0         +1   153             DB      0C0H                    ;MAC¿ØÖÆÓò
0013 03         +1   154             DB      003H                    ;LLC¿ØÖÆÓò
0014 91         +1   155             DB      091H                    ;×Ö¶Î×ÖÍ·
0015 D0         +1   156             DB      0D0H
0016 00         +1   157             DB      000H
0017 01         +1   158             DB      001H
0018 C1         +1   159             DB      0C1H
0019 02         +1   160             DB      002H
001A FF         +1   161             DB      0FFH
001B 27         +1   162             DB      027H
                +1   163             ; xx||26 Byte Sysinfo
                +1   164             ; 28h
                +1   165             ; 61 Byte IC Data
                +1   166             ; 4 Byte OBUID
                +1   167             ; 1 Byte equipmentClass & Version
                +1   168             ; 1 Byte ObuStatus
                +1   169             ; 1 Byte ESAMµÚ27×Ö½Ú "²ðÐ¶×´Ì¬"
                +1   170     ;////////////////////////////////////////////////////////////////////////////////////////
                +1   171     ;STR_DSRC_GetSecure:    ;GetSecure»ù±¾×é³É      
                +1   172     ;       DB      000H            ;³¤¶È
                +1   173     ;       DB      0E0H            ;MAC¿ØÖÆÓò
                +1   174     ;       DB      0F7H            ;LLC¿ØÖÆÓò(³­)
                +1   175     ;       DB      000H            ;LLC×´Ì¬Óò
                +1   176     ;       DB      091H            ;×Ö¶Î×ÖÍ·
                +1   177     ;       DB      018H            ;ACTION.response
                +1   178     ;       DB      001H            ;Dsrc-Did£¬ETCÓ¦ÓÃ¶ÔÓ¦1(³­)
                +1   179     ;       DB      015H            ;GetSecure.response
                +1   180     ;       DB      001H            ;ÎÄ¼þ±êÊ¶£¨FID£©(³­)
                +1   181     ;////////////////////////////////////////////////////////////////////////////////////////
                     182     
                     183     ;$include (COMMON.INC)
                +1   184             
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE     4

  009C          +1   185     BRT                                     EQU     09CH
  009C          +1   186     Reg_Sys_BRT                             EQU     09CH
                +1   187     ;RegBit_SysBRT_S1BRS                    BIT     Reg_Sys_BRT.1
                +1   188     
  009A          +1   189     S2CON                                   EQU     09AH
  009B          +1   190     S2BUF                                   EQU     09BH
  00AF          +1   191     IE2                                     EQU     0AFH
  00EA          +1   192     RELOAD2_CONTR                           EQU     0EAH
                +1   193             
  0001          +1   194     CONST_TIMEER02                          EQU     1       ;Ò»ÖÜ6Ãë
  00FE          +1   195     CONST_TIMEER03                          EQU     254;245
  0001          +1   196     CONST_TIMEER04                          EQU     1
                +1   197     
  00A2          +1   198     REG_51_AUXR1                            EQU     0A2H
  00AE          +1   199     EPCAI                                   BIT     IE.6
                +1   200     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////
                +1   201     ;NEW LCD
                +1   202     ;PIN_Sys_IsDownload                     BIT     P3.7
                +1   203     ;PIN_LCD_OLEDD1                         BIT     P1.2
                +1   204     ;PIN_LCD_OLEDD0                         BIT     P1.3
                +1   205     ;PIN_LCD_OLEDDC                         BIT     P1.4
                +1   206     ;PIN_LCD_OLEDRES                        BIT     P1.5
                +1   207     ;PIN_LCD_OLEDCS                         BIT     P4.3
                +1   208     ;PIN_LCD_BG                             BIT     P1.1
                +1   209     ;PIN_OLED_ENSY7208                      BIT     P4.0
  00C0          +1   210     P4                                      EQU     0C0H
                +1   211     ;------------------------------------------------------------------------------------------
                             -----
  0005          +1   212     CONST_MAX_RXNUM                         EQU     5
                +1   213     ;TI_CCxxx0_SRES                         EQU     30H
                +1   214     ;Configuration Registers                
  0046          +1   215     CONST_GDO2_VALUE                        EQU     46h;046H        ;06H
  0002          +1   216     CONST_GDO2_MCSM2                        EQU     2;03H
  00C0          +1   217     read_burst                              EQU     0C0H
  0000          +1   218     TI_CCxxx0_IOCFG2                        EQU     00H        ;GDO2 output pin configuration
  0001          +1   219     TI_CCxxx0_IOCFG1                        EQU     01H        ;GDO1 output pin configuration
  0002          +1   220     TI_CCxxx0_IOCFG0                        EQU     02H        ;GDO0 output pin configuration
  0003          +1   221     TI_CCxxx0_FIFOTHR                       EQU     03H        ;RX FIFO and TX FIFO thresholds
  0004          +1   222     TI_CCxxx0_SYNC1                         EQU     04H        ;Sync word, high byte
  0005          +1   223     TI_CCxxx0_SYNC0                         EQU     05H        ;Sync word, low byte
  0006          +1   224     TI_CCxxx0_PKTLEN                        EQU     06H        ;Packet length
  0007          +1   225     TI_CCxxx0_PKTCTRL1                      EQU     07H        ;Packet automation control
  0008          +1   226     TI_CCxxx0_PKTCTRL0                      EQU     08H        ;Packet automation control
  0009          +1   227     TI_CCxxx0_ADDR                          EQU     09H        ;Device address
  000A          +1   228     TI_CCxxx0_CHANNR                        EQU     0AH        ;Channel number
  000B          +1   229     TI_CCxxx0_FSCTRL1                       EQU     0BH        ;Frequency synthesizer control
  000C          +1   230     TI_CCxxx0_FSCTRL0                       EQU     0CH        ;Frequency synthesizer control
  000D          +1   231     TI_CCxxx0_FREQ2                         EQU     0DH        ;Frequency control word, high by
                             te
  000E          +1   232     TI_CCxxx0_FREQ1                         EQU     0EH        ;Frequency control word, middle 
                             byte
  000F          +1   233     TI_CCxxx0_FREQ0                         EQU     0FH        ;Frequency control word, low byt
                             e
  0010          +1   234     TI_CCxxx0_MDMCFG4                       EQU     10H        ;Modem configuration
  0011          +1   235     TI_CCxxx0_MDMCFG3                       EQU     11H        ;Modem configuration
  0012          +1   236     TI_CCxxx0_MDMCFG2                       EQU     12H        ;Modem configuration
  0013          +1   237     TI_CCxxx0_MDMCFG1                       EQU     13H        ;Modem configuration
  0014          +1   238     TI_CCxxx0_MDMCFG0                       EQU     14H        ;Modem configuration
  0015          +1   239     TI_CCxxx0_DEVIATN                       EQU     15H        ;Modem deviation setting
  0016          +1   240     TI_CCxxx0_MCSM2         EQU     16H        ;Main Radio Cntrl State Machine config
  0017          +1   241     TI_CCxxx0_MCSM1         EQU     17H        ;Main Radio Cntrl State Machine config
  0018          +1   242     TI_CCxxx0_MCSM0         EQU     18H        ;Main Radio Cntrl State Machine config
  0019          +1   243     TI_CCxxx0_FOCCFG        EQU     19H        ;Frequency Offset Compensation config
  001A          +1   244     TI_CCxxx0_BSCFG         EQU     1AH        ;Bit Synchronization configuration
  001B          +1   245     TI_CCxxx0_AGCCTRL2      EQU     1BH        ;AGC control
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE     5

  001C          +1   246     TI_CCxxx0_AGCCTRL1      EQU     1CH        ;AGC control
  001D          +1   247     TI_CCxxx0_AGCCTRL0      EQU     1DH        ;AGC control
  001E          +1   248     TI_CCxxx0_WOREVT1       EQU     1EH        ;High byte Event 0 timeout
  001F          +1   249     TI_CCxxx0_WOREVT0       EQU     1FH        ;Low byte Event 0 timeout
  0020          +1   250     TI_CCxxx0_WORCTRL       EQU     20H        ;Wake On Radio control
  0021          +1   251     TI_CCxxx0_FREND1        EQU     21H        ;Front end RX configuration
  0022          +1   252     TI_CCxxx0_FREND0        EQU     22H        ;Front end TX configuration
  0023          +1   253     TI_CCxxx0_FSCAL3        EQU     23H        ;Frequency synthesizer calibration
  0024          +1   254     TI_CCxxx0_FSCAL2        EQU     24H        ;Frequency synthesizer calibration
  0025          +1   255     TI_CCxxx0_FSCAL1        EQU     25H        ;Frequency synthesizer calibration
  0026          +1   256     TI_CCxxx0_FSCAL0        EQU     26H        ;Frequency synthesizer calibration
  0027          +1   257     TI_CCxxx0_RCCTRL1       EQU     27H        ;RC oscillator configuration
  0028          +1   258     TI_CCxxx0_RCCTRL0       EQU     28H        ;RC oscillator configuration
  0029          +1   259     TI_CCxxx0_FSTEST        EQU     29H        ;Frequency synthesizer cal control
  002A          +1   260     TI_CCxxx0_PTEST         EQU     2AH        ;Production test
  002B          +1   261     TI_CCxxx0_AGCTEST       EQU     2BH        ;AGC test
  002C          +1   262     TI_CCxxx0_TEST2         EQU     2CH        ;Various test settings       
  002D          +1   263     TI_CCxxx0_TEST1         EQU     2DH        ;Various test settings
  002E          +1   264     TI_CCxxx0_TEST0         EQU     2EH        ;Various test settings
                +1   265     
                +1   266     ;Strobe commands
  0030          +1   267     TI_CCxxx0_SRES          EQU     30H        ;Reset chip.
  0032          +1   268     TI_CCxxx0_SXOFF         EQU     32H        ;Turn off crystal oscillator.
  0033          +1   269     TI_CCxxx0_SCAL          EQU     33H        ;Calibrate freq synthesizer & disable
  0034          +1   270     TI_CCxxx0_SRX           EQU     34H        ;Enable RX.
  0035          +1   271     TI_CCxxx0_STX           EQU     35H        ;Enable TX.
  0036          +1   272     TI_CCxxx0_SIDLE         EQU     36H        ;Exit RX / TX
  0037          +1   273     TI_CCxxx0_SAFC          EQU     37H        ;AFC adjustment of freq synthesizer
  0038          +1   274     TI_CCxxx0_SWOR          EQU     38H        ;Start automatic RX polling sequence
  0039          +1   275     TI_CCxxx0_SPWD          EQU     39H        ;Enter pwr down mode when CSn goes hi
  003A          +1   276     TI_CCxxx0_SFRX          EQU     3AH        ;Flush the RX FIFO buffer.
  003B          +1   277     TI_CCxxx0_SFTX          EQU     3BH        ;Flush the TX FIFO buffer.
  003C          +1   278     TI_CCxxx0_SWORRST       EQU     3CH        ;Reset real time clock.
  003D          +1   279     TI_CCxxx0_SNOP          EQU     3DH        ;No operation.
                +1   280             
                +1   281     ;Status_registers
  0030          +1   282     TI_CCxxx0_PARTNUM                       EQU     30H        ;Part number
  0031          +1   283     TI_CCxxx0_VERSION                       EQU     31H        ;Current version number
  0032          +1   284     TI_CCxxx0_FREQEST                       EQU     32H        ;Frequency offset estimate
  0033          +1   285     TI_CCxxx0_LQI                           EQU     33H        ;Demodulator estimate for link q
                             uality
  0034          +1   286     TI_CCxxx0_RSSI                          EQU     34H        ;Received signal strength indica
                             tion
  0035          +1   287     TI_CCxxx0_MARCSTATE                     EQU     35H        ;Control state machine state
  0036          +1   288     TI_CCxxx0_WORTIME1                      EQU     36H        ;High byte of WOR timer
  0037          +1   289     TI_CCxxx0_WORTIME0                      EQU     37H        ;Low byte of WOR timer
  0038          +1   290     TI_CCxxx0_PKTSTATUS                     EQU     38H        ;Current GDOx status and packet 
                             status
  0039          +1   291     TI_CCxxx0_VCO_VC_DAC                    EQU     39H        ;Current setting from PLL cal mo
                             dule
  003A          +1   292     TI_CCxxx0_TXBYTES                       EQU     3AH        ;Underflow and # of bytes in TXF
                             IFO
  003B          +1   293     TI_CCxxx0_RXBYTES                       EQU     3BH        ;Overflow and # of bytes in RXFI
                             FO
  007F          +1   294     TI_CCxxx0_NUM_RXBYTES                   EQU     7FH        ;Mask "# of bytes" field in _RXB
                             YTES
                +1   295             
                +1   296     ;Other memory locations
  003E          +1   297     TI_CCxxx0_PATABLE                       EQU     3EH
  003F          +1   298     TI_CCxxx0_TXFIFO                        EQU     3FH
  003F          +1   299     TI_CCxxx0_RXFIFO                        EQU     3FH
                +1   300             
  0082          +1   301     PIN_WAVE_RX                             BIT     p0.2;P2.0;p0.1;p1.0
  00B4          +1   302     PIN_OUTPUT_CLK                          BIT     P3.4;P1.0
  008F          +1   303     REG_WAKE_CLK0                           EQU     08FH
  000F          +1   304     CONST_DATA_VALUE1                       EQU     15;20;20;20
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE     6

  00DE          +1   305     CONST_DATA_VALUE2                       EQU     208+14;14;255;208+14;14
                +1   306     ;------------------------------------------------------------------------------------------
                             -----
                +1   307     ;µçÔ´¿ØÖÆ
  0095          +1   308     PIN_PWRDWN_LCD                          BIT     p1.5;p1.3        
  00A4          +1   309     Pin_pwrdwn                              BIT     p2.4;P2.7        
  00A3          +1   310     PIN_PWR_GSM                             BIT     p2.3;P2.4        
                +1   311             
                +1   312     ;--- Active ---
  00B5          +1   313     Pin_unfix                               BIT     P3.5     
  00B3          +1   314     PIN_card_exist                          BIT     p3.3    
  00B2          +1   315     WKO_BK                                  BIT     P3.2     
  0095          +1   316     PIN_PWR_LOWIO                           BIT     p1.5;P2.1        
                +1   317             
                +1   318     ;--- ESAM ---
  0083          +1   319     PIN_ESAM_TX                             BIT     p0.3;P2.6        
  0083          +1   320     PIN_ESAM_RX                             BIT     p0.3;P2.6        
  0085          +1   321     PIN_ESAM_RST                            BIT     p0.5;P2.5        
                +1   322             
                +1   323     ;--- Éù¹â¿ØÖÆ ---
  00C5          +1   324     Pin_Red                                 BIT     p4.5;P4.1        
  00C4          +1   325     Pin_Gre                                 BIT     p4.4;P4.5
                +1   326     
  0095          +1   327     PIN_BELL_01                             BIT     p1.5;P0.3        
  0095          +1   328     PIN_BELL_02                             BIT     p1.5;P0.2        
                +1   329             
                +1   330     ;--- CC1101 ---
                +1   331     ;Pin_CC1101_SS                          BIT     p3.6     
                +1   332     ;PIN_CC1101_SCLK                                BIT     P2.2     
                +1   333     ;PIN_CC1101_MOSI                                BIT     P2.3     
                +1   334     ;PIN_CC1101_MISO                                BIT     p3.7     
                +1   335     ;PIN_CC1101_GDO2                                BIT     P1.6     
                +1   336             
                +1   337     ;--- Òº¾§Ò½Å ---
  0095          +1   338     Pin_LCD_CS                              BIT     p1.5;p1.4        
  0095          +1   339     Pin_LCD_RST                             BIT     P1.5;    
  0095          +1   340     Pin_LCD_DC                              BIT     p1.5;p1.7       
  0095          +1   341     Pin_LCD_SCL                             BIT     p1.5;p3.4       
  0095          +1   342     Pin_LCD_SDA                             BIT     p1.5;p4.3       
                +1   343             
                +1   344     ;--- 522 ---
  0087          +1   345     PIN_522_SCLK                            BIT     P0.7;P0.7        
  00C6          +1   346     PIN_522_MOSI                            BIT     p4.6;P0.5        
  00C1          +1   347     PIN_522_MISO                            BIT     p4.1;P0.4        
  0086          +1   348     Pin_522_SS                              BIT     P0.6;P0.6        
  0084          +1   349     Pin_522_RST                             BIT     p0.4;P4.6        
                +1   350             
  00B0          +1   351     PIN_SOFTSERIALRX                        BIT     P3.0     
  00B1          +1   352     PIN_SOFTSERIALTXH                       BIT     P3.1     
                +1   353             
  0095          +1   354     PIN_PWR_SE                              BIT     p1.5    ;p2.2   ; P2.4  ;       [ GSM ] 
  0095          +1   355     Pin_SW                                  BIT     p1.5    
                +1   356             
                +1   357             
                +1   358     ;fu dand wei
  00A6          +1   359     Pin_ES_Rst                              BIT     p2.6;P2.3       ;p4.0;P4.4      ; P4.4  
  00B4          +1   360     PIN_SE_IO1                              BIT     p3.4;p2.4       ;P4.4;p2.3;p4.4;P2.2    ; P
                             0.5
                +1   361             
                +1   362             
                +1   363     ;--- CC1101 ---
  0097          +1   364     PIN_UART2_TX                            BIT     p1.7    ;p3.6   ; P3.7
  0096          +1   365     PIN_UART2_RX                            BIT     P1.6    ; 
                +1   366             
  0000          +1   367     BUSY                                    BIT     20H.0
                +1   368     ;////////////////////////////////////////////////Ò½Å¶¨Òå///////////////////////////////////
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE     7

                             //////////////
                +1   369     ;ÉèÎª¸ß
  0091          +1   370     PIN_BK_CE                               BIT     p1.1     
  0090          +1   371     Pin_5823BK_CS                           BIT     P1.0
                +1   372     ;Éè³ÉÊäÈëÎª¸ß                           
  0080          +1   373     Pin_5823BK_MISO                         BIT     p0.0     
  0092          +1   374     Pin_5823BK_IRQ                          BIT     p1.2      
                +1   375     ;   Éè ³É µÍ
  0081          +1   376     Pin_5823BK_MOSI                         BIT     p0.1     
  00C2          +1   377     Pin_5823BK_SCLK                         BIT     p4.2     
                +1   378      
  0082          +1   379     PIN_WAVE_CHANNEL1                       BIT     p0.2;P2.0        
                +1   380      
                +1   381     ;=====================================================================================
  008F          +1   382     Reg_WakeClk0                            EQU     08fH
  00DC          +1   383     Reg_WakeClk_04                          BIT     CCON.4  ;P3.4
  00DD          +1   384     Reg_WakeClk_05                          BIT     CCON.5  ;P3.5
                +1   385     ;ÉùÃ÷STC12C5628AD ÏµÁÐ MCU ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷µØÖ·
  00B7          +1   386     IPH EQU 0B7H ;ÖÐ¶ÏÓÅÏÈ¼¶¸ßÎ»¼Ä´æÆ÷
  00AE          +1   387     EPCA_LVD EQU IE.6 ;PCA ÖÐ¶ÏºÍ LVD(µÍÑ¹¼ì²â)ÖÐ¶Ï¹²ÏíµÄ×ÜÖÐ¶Ï¿ØÖÆÎ»
  00F9          +1   388     CH EQU 0F9H ;PCA ¼ÆÊÆ÷¸ß8 Î»¡£
  00E9          +1   389     CL EQU 0E9H ;PCA ¼ÆÊÆ÷µÍ8 Î»¡£
                +1   390     
                +1   391     ;------------------------
  00D8          +1   392     CCON EQU 0D8H ;PCA ¿ØÖÆ¼Ä´æÆ÷¡£
  00D8          +1   393     CCF0 EQU CCON.0 ;PCA Ä£¿é0 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00D9          +1   394     CCF1 EQU CCON.1 ;PCA Ä£¿é1 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DA          +1   395     CCF2 EQU CCON.2 ;PCA Ä£¿é2 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DB          +1   396     CCF3 EQU CCON.3 ;PCA Ä£¿é3 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DC          +1   397     CCF4 EQU CCON.4 ;PCA Ä£¿é4 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DD          +1   398     CCF5 EQU CCON.5 ;PCA Ä£¿é5 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DE          +1   399     CR EQU CCON.6 ;1:ÔÊÐí PCA ¼ÆÊÆ÷¼ÆÊ, ±ØÐëÓÉÈí¼þÇå0¡£
  00DF          +1   400     CF EQU CCON.7 ;PCA ¼ÆÊÆ÷Òç³ö(CH,CL ÓÉ FFFFH ±äÎª 0000H)±êÖ¾,
                +1   401     ;PCA ¼ÆÊÆ÷Òç³öºóÓÉÓ²¼þÖÃÎ»,±ØÐëÓÉÈí¼þÇå0¡£
                +1   402     ;------------------------
  00D9          +1   403     CMOD EQU 0D9H ;PCA ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   404     
                +1   405     ;CMOD.7 CIDL: idle ×´Ì¬Ê± PCA ¼ÆÊÆ÷ÊÇ·ñ¼ÌÐø¼ÆÊ, 0: ¼ÌÐø¼ÆÊ, 1: Í£Ö¹¼ÆÊ¡£
                +1   406     ;CMOD.2 CPS1: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 1¡£
                +1   407     ;CMOD.1 CPS0: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 0¡£
                +1   408     ; CPS1 CPS0
                +1   409     ; 0 0 Íâ²¿¾§ÌåÆµÂÊ/12¡£
                +1   410     ; 0 1 Íâ²¿¾§ÌåÆµÂÊ/2¡£
                +1   411     ; 1 0 Timer 0 Òç³öÂö³å£¬
                +1   412     ; Timer 0 »¹¿ÉÍ¨¹ AUXR ¼Ä´æÆ÷ÉèÖÃ³É¹¤×÷ÔÚ 12T »ò 1T Ä£Ê½¡£
                +1   413     ; 1 1 ´Ó ECI/P3.4 ½ÅÊäÈëµÄÍâ²¿Ê±ÖÓ¡£
                +1   414     ;CMOD.0 ECF: PCA ¼ÆÊÆ÷Òç³öÖÐ¶ÏÔÊÐíÎ», 1-- ÔÊÐí CF(CCON.7) ²úÉúÖÐ¶Ï¡£
                +1   415     ;------------------------
  00FA          +1   416     CCAP0H EQU 0FAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FB          +1   417     CCAP1H EQU 0FBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FC          +1   418     CCAP2H EQU 0FCH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FD          +1   419     CCAP3H EQU 0FDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FE          +1   420     CCAP4H EQU 0FEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FF          +1   421     CCAP5H EQU 0FFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00EA          +1   422     CCAP0L EQU 0EAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EB          +1   423     CCAP1L EQU 0EBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EC          +1   424     CCAP2L EQU 0ECH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00ED          +1   425     CCAP3L EQU 0EDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EE          +1   426     CCAP4L EQU 0EEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EF          +1   427     CCAP5L EQU 0EFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
                +1   428     ;------------------------
  00F2          +1   429     PCA_PWM0 EQU 0F2H ;PCA Ä£¿é0 PWM ¼Ä´æÆ÷¡£
  00F3          +1   430     PCA_PWM1 EQU 0F3H ;PCA Ä£¿é1 PWM ¼Ä´æÆ÷¡£
  00F4          +1   431     PCA_PWM2 EQU 0F4H ;PCA Ä£¿é2 PWM ¼Ä´æÆ÷¡£
  00F5          +1   432     PCA_PWM3 EQU 0F5H ;PCA Ä£¿é3 PWM ¼Ä´æÆ÷¡£
  00F6          +1   433     PCA_PWM4 EQU 0F6H ;PCA Ä£¿é4 PWM ¼Ä´æÆ÷¡£
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE     8

  00F7          +1   434     PCA_PWM5 EQU 0F7H ;PCA Ä£¿é5 PWM ¼Ä´æÆ÷¡£
                +1   435     ;PCA_PWMn: 7 6 5 4 3 2 1 0
                +1   436     ; - - - - - - EPCnH EPCnL
                +1   437     ;B7-B2: ±£Áô
                +1   438     ;B1(EPCnH): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnH ×é³É 9 Î»Ê¡£
                +1   439     ;B0(EPCnL): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnL ×é³É 9 Î»Ê¡£
                +1   440     ;------------------------
  00DA          +1   441     CCAPM0 EQU 0DAH ;PCA Ä£¿é0 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DB          +1   442     CCAPM1 EQU 0DBH ;PCA Ä£¿é1 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DC          +1   443     CCAPM2 EQU 0DCH ;PCA Ä£¿é2 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DD          +1   444     CCAPM3 EQU 0DDH ;PCA Ä£¿é3 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DE          +1   445     CCAPM4 EQU 0DEH ;PCA Ä£¿é4 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DF          +1   446     CCAPM5 EQU 0DFH ;PCA Ä£¿é5 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   447     ;CCAPMn: 7 6 5 4 3 2 1 0
                +1   448     ; - ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   449     ;
                +1   450     ;ECOMn = 1:ÔÊÐí±È½Ï¹¦ÄÜ¡£
                +1   451     ;CAPPn = 1:ÔÊÐíÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   452     ;CAPNn = 1:ÔÊÐíÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   453     ;MATn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, ÔÊÐí CCON ÖÐµÄ CCFn ÖÃÎ»¡£
                +1   454     ;TOGn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, CEXn ½«·­×ª¡£
                +1   455     ;PWMn = 1:½« CEXn ÉèÖÃÎª PWM Êä³ö¡£
                +1   456     ;ECCFn = 1:ÔÊÐí CCON ÖÐµÄ CCFn ´¥·¢ÖÐ¶Ï¡£
                +1   457     ;ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   458     ; 0 0 0 0 0 0 0 00H Î´ÆôÓÃÈÎºÎ¹¦ÄÜ¡£
                +1   459     ; x 1 0 0 0 0 x 21H 16 Î»CEXn ÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   460     ; x 0 1 0 0 0 x 11H 16 Î»CEXn ÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   461     ; x 1 1 0 0 0 x 31H 16 Î»CEXn ±ßÑØ(ÉÏ¡¢ÏÂÑØ)´¥·¢²¶×½¹¦ÄÜ¡£
                +1   462     ; 1 0 0 1 0 0 x 49H 16 Î»Èí¼þ¶¨Ê±Æ÷¡£
                +1   463     ; 1 0 0 1 1 0 x 4DH 16 Î»¸ßËÙÂö³åÊä³ö¡£
                +1   464     ; 1 0 0 0 0 1 0 42H 8 Î» PWM¡£
                +1   465     ;------------------------------------------------------------------------------
                +1   466     ;==============================================================================
                +1   467     ;//////////////////////////////////////////////¹«¹²¼Ä´æÆ÷ /////////////////////////////////
                             //////////
  00C7          +1   468     ISP_CONTR                               EQU     0C7h
  008F          +1   469     WAKE_CLKO                               EQU     08fh
                +1   470     ;¸½¼ÓµÄ SFR WAKE_CLKO (µØÖ·£º0x8F)
                +1   471     ;b7 - PCAWAKEUP :1, ÔÊÐí PCA ÉÏÉÑØ / ÏÂ½µÑØÖÐ¶Ï »½ÐÑ powerdown¡£
                +1   472     ;b6 - RXD_PIN_IE:1, ÔÊÐí P3.0(RXD) ÏÂ½µÑØÖÃ RI£¬Ò²ÄÜÊ¹ RXD »½ÐÑ powerdown¡£
                +1   473     ;b5 - T1_PIN_IE :1, ÔÊÐí T1/P3.5 ½ÅÏÂ½µÑØÖÃ T1 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T1 ½Å»½ÐÑ powerdown¡£
                +1   474     ;b4 - T0_PIN_IE :1, ÔÊÐí T0/P3.4 ½ÅÏÂ½µÑØÖÃ T0 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T0 ½Å»½ÐÑ powerdown¡£
                +1   475     ;b3 - N/A
                +1   476     ;b2 - N/A
                +1   477     ;b1 - T1CLKO : ÔÊÐí T1 µÄÒç³öÔÚP1.1 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T1 Òç³öÂÊ
                +1   478     ;       T1 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / ( 256 - TH1 )
                +1   479     ;       T1 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / 12 / ( 256 - TH1 )
                +1   480     ;b0 -   T0CLKO : ÔÊÐí T0 µÄÒç³öÔÚP1.0 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T0 Òç³öÂÊ
                +1   481     ;       T0 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / ( 256 - TH0)
                +1   482     ;       T0 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / 12 / ( 256 - TH0 )
                +1   483     ;--------------------------------------------------------
                +1   484     ;--------------------------------------------------------
  0094          +1   485     REG_5412AD_P0M0                         EQU     094h;093h
  0093          +1   486     REG_5412AD_P0M1                         EQU     093h;094h
                +1   487     
  0092          +1   488     REG_5412AD_P1M0                         EQU     092h;091h
  0091          +1   489     REG_5412AD_P1M1                         EQU     091h;092h
                +1   490     
  0096          +1   491     REG_5412AD_P2M0                         EQU     096h;095h
  0095          +1   492     REG_5412AD_P2M1                         EQU     095h;096h
                +1   493     
  00B2          +1   494     REG_5412AD_P3M0                         EQU     0b2h;0b1h
  00B1          +1   495     REG_5412AD_P3M1                         EQU     0b1h;0b2h
                +1   496     
  00B4          +1   497     REG_5412AD_P4M0                         EQU     0b4h;0b3h
  00B3          +1   498     REG_5412AD_P4M1                         EQU     0b3h;0b4h
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE     9

                +1   499     ;-------------------------------------------------------------
  008E          +1   500     REG_5412AD_AUXR                         EQU     08EH            ;¸¨Öú¼Ä´æÆ÷
  0085          +1   501     REG_5412AD_spctl                        EQU     085H
  0084          +1   502     REG_5412AD_spstat                       EQU     084H
  0086          +1   503     REG_5412AD_spdat                        EQU     086H
  00C1          +1   504     REG_WDT_CONTR                           EQU     0C1H            ;0E1H;0C1H
  00BB          +1   505     REG_5412AD_P4SW                         EQU     0BBH
  00AB          +1   506     REG_MCU_WKCTH                           EQU     0ABH
  00AA          +1   507     REG_MCU_WKCTL                           EQU     0AAH    
                +1   508     ;//////////////////////////////////////////////RC522¼Ä´æÆ÷ ////////////////////////////////
                             ///////////////////
  0000          +1   509     REG_RC522_RC522PAGE                     EQU     00H
  0001          +1   510     REG_RC522_CommandReg                    EQU     01H
  0002          +1   511     REG_RC522_ComIEnReg                     EQU     02H
  0003          +1   512     REG_RC522_DivIEnReg                     EQU     03H
  0004          +1   513     REG_RC522_ComIrqReg                     EQU     04H
  0005          +1   514     REG_RC522_DivIrqReg                     EQU     05H
  0006          +1   515     REG_RC522_ErrorReg                      EQU     06h
  0007          +1   516     REG_RC522_Status1Reg                    EQU     07h
  0008          +1   517     REG_RC522_Status2Reg                    EQU     08h
  0009          +1   518     REG_RC522_FIFODataReg                   EQU     09h
  000A          +1   519     REG_RC522_FIFOLevelReg                  EQU     0ah
  000B          +1   520     REG_RC522_WaterLevelReg                 EQU     0bh
  000C          +1   521     REG_RC522_ControlReg                    EQU     0ch
  000D          +1   522     REG_RC522_BitFramingReg                 EQU     0dh
  000E          +1   523     REG_RC522_CollReg                       EQU     0eh
  000F          +1   524     REG_RC522_RFU                           EQU     0fh
  0011          +1   525     REG_RC522_ModeReg                       EQU     11h
  0012          +1   526     REG_RC522_TxModeReg                     EQU     12h
  0013          +1   527     REG_RC522_RxModeReg                     EQU     13h
  0014          +1   528     REG_RC522_TxControlReg                  EQU     14h
  0015          +1   529     REG_RC522_TxAutoReg                     EQU     15h
  0016          +1   530     REG_RC522_TxSelReg                      EQU     16h
  0017          +1   531     REG_RC522_RxSelReg                      EQU     17h
  0018          +1   532     REG_RC522_RxThresholdReg                EQU     18h
  0019          +1   533     REG_RC522_DemodReg                      EQU     19h
  001C          +1   534     REG_RC522_MifareReg                     EQU     1ch
  001F          +1   535     REG_RC522_SerialSpeedReg                EQU     1fh
  0021          +1   536     REG_RC522_CRCResultRegH                 EQU     21h
  0022          +1   537     REG_RC522_CRCResultRegL                 EQU     22h
  0024          +1   538     REG_RC522_ModWidthReg                   EQU     24h
  0026          +1   539     REG_RC522_RFCfgReg                      EQU     26h
  0027          +1   540     REG_RC522_GsNReg                        EQU     27h
  0028          +1   541     REG_RC522_CWGsPReg                      EQU     28h
  0029          +1   542     REG_RC522_ModGsPReg                     EQU     29h
  002A          +1   543     REG_RC522_TModeReg                      EQU     2ah
  002B          +1   544     REG_RC522_TPrescalerReg                 EQU     2bh
  002C          +1   545     REG_RC522_TReloadRegH                   EQU     2ch
  002D          +1   546     REG_RC522_TReloadRegL                   EQU     2dh
  002E          +1   547     REG_RC522_TCounterValueRegH             EQU     2eh
  002F          +1   548     REG_RC522_TCounterValueRegL             EQU     2fh
                +1   549             
                +1   550     ;/////////////////////////////////////////////////Ò»°ãÏµÍ³³£Á¿±í///////////////////////////
                             //////////////////////
  0001          +1   551     CONST_HOLD_5823TX                       EQU     1
  0000          +1   552     CONST_HOLD_5823RX                       EQU     0
                +1   553             
                +1   554             
  00FF          +1   555     CONST_SYS_TradeConfine                  EQU     255                             ;½»Ò×Ê±¼äÏÞ
                             ÖÆ
  000A          +1   556     CONST_SYS_PowerONTimer                  EQU     10                              ;ÉÏµç¶¨Ê±Æ÷
                                  
  0088          +1   557     CONST_SYS_PREFlag                       EQU     088H                            ;
  00AA          +1   558     CONST_SYS_AA                            EQU     0AAH
  0055          +1   559     CONST_SYS_55                            EQU     55H
  0004          +1   560     CONST_SYS_OBUIDLEN                      EQU     4                               ;obuid ³¤¶È
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    10

  0008          +1   561     CONST_BSTLIMIT                          EQU     8;20;10                 ;¼«ÏÞBST¸öÊ
  0064          +1   562     CONST_BSTLIMIT02                        EQU     100
                +1   563     
  00FF          +1   564     CONST_VSTLIMIT                          EQU     255     ;100                    ;¼«ÏÞVST¸öÊ
  00FA          +1   565     CONST_Pro_OverTime2S                    EQU     250                             ;³¬Ê±ÏÞÊ±£¬
                             196-246*30=1200MS 
                +1   566     ;/////////////////////////////////////////////////³öÈë¿Ú³£Á¿±í/////////////////////////////
                             ////////////////////
  0003          +1   567     CONST_ETC_INPUT                         EQU     3       ;ETC Èë¿Ú
  0001          +1   568     CONST_MTC_INPUT                         EQU     1       ;MTC Èë¿Ú
  0001          +1   569     CONST_INPUT_ISEnable                    EQU     1;=1²»ÆôÓÃ =0ÆôÓÃ
                +1   570     ;/////////////////////////////////////////////////×´Ì¬³£Á¿±í///////////////////////////////
                             //////////////////
  0000          +1   571     CONST_STATE_TRUE                        EQU     000H                            ;Ö´ÐÐ³É¹¦
  00FF          +1   572     CONST_STATE_FALSE                       EQU     0FFH                            ;³ÌÐòÖ´ÐÐ³ö
                             ´í
                +1   573     ;Ò»°ãÐÔ´íÎó     01      µ¼ÈëÊ§°Ü        STR_InputFail
                +1   574     ;ºÏÍ¬ºÅ²»Í¬     02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                +1   575     ;Ê¹ÓÃ´ÎÊ=FFH    03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
  0001          +1   576     CONST_STATE_InputFail                   EQU     01
  0002          +1   577     CONST_STATE_IllegalInputCard            EQU     02
  0003          +1   578     CONST_STATE_InputCardInvalid            EQU     03
                +1   579     ;Ò»°ãÐÔ´íÎó     04      ¼¤»îÊ§°Ü        STR_ActiveFail
                +1   580     ;ºÏÍ¬ºÅ²»Í¬     05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                +1   581     ;Ê¹ÓÃ´ÎÊ=FFH    06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
  0004          +1   582     CONST_STATE_ActiveFail                  EQU     04
  0005          +1   583     CONST_STATE_IllegalACTCard              EQU     05
  0006          +1   584     CONST_STATE_ACTCardInvalid              EQU     06
                +1   585             
  0007          +1   586     CONST_STATE_5823INIER                   EQU     07      ;5823³õÊ¼»¯³ö´í
  0008          +1   587     CONST_STATE_5823SleepEr                 EQU     08      ;5823ÐÝÃß³ö´í
  0009          +1   588     CONST_STATE_GetSecureSelFileEr          EQU     09      ;getsecureÑ¡¿¨Ä¿Â¼³ö´í
                +1   589     
  000A          +1   590     CONST_STATE_BaseNinit                   EQU     10      ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  000B          +1   591     CONST_STATE_BaseESAMDF01                EQU     11      ;Baseinit02º¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1   592             
  000C          +1   593     CONST_STATE_CARDPreDeal1001             EQU     12      ;Ô¤¶Á1001Ê§°Ü
  000D          +1   594     CONST_STATE_CARDPreDeal0002             EQU     13      ;Ô¤¶Á0002Ê§°Ü
  000E          +1   595     CONST_STATE_CARDPreDeal0012             EQU     14      ;Ô¤¶Á0012Ê§°Ü
  000F          +1   596     CONST_STATE_CARDPreDeal0015             EQU     15      ;Ô¤¶Á0015Ê§°Ü
  0010          +1   597     CONST_STATE_CARDPreDeal0019             EQU     16      ;Ô¤¶Á0019Ê§°Ü
  0011          +1   598     CONST_STATE_CARDPreDeal3f00             EQU     17      ;Ô¤¶Á3f00Ê§°Ü
  0012          +1   599     CONST_STATE_CARDPreDeal81               EQU     18      ;Ô¤¶Á81Ê§°Ü
                +1   600             
  0013          +1   601     CONST_STATE_BaseN01init                 EQU     19      ;Baseinitº¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  0014          +1   602     CONST_STATE_Base01ESAMDF01              EQU     20      ;Baseinitº¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1   603             
  0015          +1   604     CONST_STATE_Base01Contact               EQU     21      ;Baseinitº¯Ê£¬Ìøµ½½Ó´¥
  0016          +1   605     CONST_STATE_Base02Contact               EQU     22      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1   606             
  0017          +1   607     CONST_STATE_test                        EQU     23      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1   608             
  0018          +1   609     CONST_STATE_Base02Re                    EQU     24
  0019          +1   610     CONST_STATE_Base02AntiColl              EQU     25
  001A          +1   611     CONST_STATE_Base02Sel                   EQU     26
  001B          +1   612     CONST_STATE_Base02Rats                  EQU     27
                +1   613             
  001C          +1   614     CONST_STATE_Base01Re                    EQU     28
  001D          +1   615     CONST_STATE_Base01AntiColl              EQU     29
  001E          +1   616     CONST_STATE_Base01Sel                   EQU     30
  001F          +1   617     CONST_STATE_Base01Rats                  EQU     31      
                +1   618             
  0020          +1   619     CONST_STATE_MemoryEr                    EQU     32      
  0021          +1   620     CONST_STATE_ExMemoryEr                  EQU     33      
  0022          +1   621     CONST_STATE_ExMemoryEr02                EQU     34      
                +1   622             
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    11

  0001          +1   623     CONST_STATE_SERIALACCPET                EQU     001H                            ;´®¿Ú½ÓÊÕ´í
                             Îó
  0002          +1   624     CONST_STATE_SERIALOVERTIME              EQU     CONST_STATE_SERIALACCPET + 1    ;´®¿Ú½ÓÊÕ³¬
                             Ê±
  0003          +1   625     CONST_STATE_ACCEPTOVER                  EQU     CONST_STATE_SERIALOVERTIME + 1  ;´®¿Ú½ÓÊÕÍê
                             ±Ï£¬Ã»ÓÐºóÐø×Ö½Ú 
  0004          +1   626     CONST_STATE_ACCEPTOVERLEN               EQU     CONST_STATE_ACCEPTOVER + 1      ;´®¿Ú½ÓÊÕ³¬
                             ³¤
  0005          +1   627     CONST_STATE_RSTCPUER                    EQU     CONST_STATE_ACCEPTOVERLEN + 1   ;¸´Î»´®¿Ú´í
                             Îó
  0006          +1   628     CONST_STATE_AUTHER                      EQU     CONST_STATE_RSTCPUER + 1        ;ÈÏÖ¤Ê§°Ü
                +1   629             
                +1   630     ;--- ¹¤×÷Çø³£Á¿¶¨Òå ---
  0000          +1   631     CONST_WORKSTAION_0                      EQU     00H     ;¹¤×÷Çø0
  0001          +1   632     CONST_WORKSTAION_1                      EQU     01H     ;¹¤×÷Çø1
  0002          +1   633     CONST_WORKSTAION_2                      EQU     02H     ;¹¤×÷Çø2        
  0003          +1   634     CONST_WORKSTAION_3                      EQU     03H     ;¹¤×÷Çø3
                +1   635     
                +1   636     ;//////////////////////////////////////¿¨Æ¬Âß¼­³£Á¿¶¨Òå////////////////////////////////////
                             ////////
  0017          +1   637     CONST_CARD_PASS                         EQU     23
  0016          +1   638     CONST_CARD_CONSUME                      EQU     22
                +1   639     ;//////////////////////////////////////GSM³£Á¿¶¨Òå/////////////////////////////////////////
                             /////////
  0002          +1   640     CONST_LHX_FLAG                          EQU     2 ;0-¹ú±êOBU  1-GSM OBU  2-433 OBU
                +1   641     
                +1   642     ;RTC ´ó´°Ê±¼ä                           ;6·ÖÖÓ£¬Æ½¾ùÁ½ÃëÒ»´ÎcellID
                +1   643     ;CONST_RTCOverFlow                      EQU     144;180;180
                +1   644     ;CONST_RTCUartRX                        EQU     24;4;8,12,16,20,24;142;
                +1   645     
  0090          +1   646     CONST_RTCOverFlow                       EQU     144;20;144;6;144;6;12;144
                +1   647     ;CONST_RTCUartRX                                EQU     12
                +1   648     ;CONST_RTCUartRX02                      EQU     142
  0000          +1   649     CONST_Flag_INPUT                        EQU     0
  0001          +1   650     CONST_Flag_OutPUT                       EQU     1
                +1   651     
                +1   652     ;GSM CellID ¼ÇÂ¼Ê¾ÝËùÔÚµÄÎÄ¼þÃû
  0000          +1   653     CONST_Cellfile_H                        EQU     000H
  0009          +1   654     CONST_Cellfile_L                        EQU     09h;030H
                +1   655     
  00EF          +1   656     CONST_ESAMCellfile_H                    EQU     0EFH;000H
  0007          +1   657     CONST_ESAMCellfile_L                    EQU     07H;03h;030H
                +1   658     ;CONST_Cellfile_H                       EQU     000H
                +1   659     ;CONST_Cellfile_L                       EQU     008h
                +1   660     
  00F0          +1   661     CONST_GSM_MaxNum                        EQU     240
                +1   662     ;CONST_GSM_MaxNum                       EQU     5
                +1   663     
  0014          +1   664     CONST_GSM_PJNum                         EQU     20
                +1   665     ;CONST_GSM_PJNum                        EQU     1
                +1   666     
                +1   667     ;RTC Ð¡´°Ê±¼ä;
  0008          +1   668     CONST_MCU_WKCTH                         EQU     008H;0fh;00fH;00fH;00fH
  00FF          +1   669     CONST_MCU_WKCTL                         EQU     0FFH
                +1   670     
                +1   671     ;RTC ÊÇ·ñ¿ªÆô£¬±ê¼ÇÖµ
                +1   672     ;=CONST_RTC_ON ±íÊ¾¿ªÆô
                +1   673     ;= ÆäËü Ã»ÓÐ¿ªÆô
  0055          +1   674     CONST_RTC_ON                            EQU     55H
  00FF          +1   675     CONST_RTC_off                           EQU     0ffH
  0064          +1   676     CONST_SYS_RTCOverTime                   EQU     100
                +1   677     
                +1   678     ;²å¿¨½«obuÖÐCellid¼ÇÂ¼µ¼Èëµ½¿¨Æ¬ÖÐ£¬Ò»´ÎÐ´Èëµ½¿¨Æ¬ÖÐ cellID µÄ×Ö½ÚÊ
  0008          +1   679     CONST_GSM_NUM                           EQU     8               ;40
                +1   680     ;//////////////////////////////////////MF³£Á¿¶¨Òå//////////////////////////////////////////
                             ////////
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    12

  0000          +1   681     CONST_MF_READ                           EQU     00H     ;Ö¸ÁîÀàÐÍ ¶Á¿é
  0001          +1   682     CONST_MF_WRITE                          EQU     01H     ;Ö¸ÁîÀàÐÍ Ð´¿é
  0002          +1   683     CONST_MF_DECREMENT                      EQU     02H     ;Ö¸ÁîÀàÐÍ ¿Û¿î
  0003          +1   684     CONST_MF_INCREMENT                      EQU     03H     ;Ö¸ÁîÀàÐÍ ³äÖµ
  0004          +1   685     CONST_MF_RESTOR                         EQU     04H     ;Ö¸ÁîÀàÐÍ ±¸·Ý¿é
                +1   686     
  00C0          +1   687     CONST_MF_RC500DECREMENT                 EQU     0C0H    ;RC500 ¿Û¿î
  00C1          +1   688     CONST_MF_RC500INCREMENT                 EQU     0C1H    ;RC500 ³äÖµ
                +1   689     ;//////////////////////////////////////DSRC³£Á¿¶¨Òå////////////////////////////////////////
                             //////////
  0004          +1   690     CONST_DSRC_MACCTRL                      EQU     4       ;MAC¿ØÖÆÓò
  0005          +1   691     CONST_DSRC_LLCCTRL                      EQU     5       ;LLC¿ØÖÆÓò
  0006          +1   692     CONST_DSRC_HEAD                         EQU     6       ;×Ö¶Î×ÖÍ·
  0007          +1   693     CONST_DSRC_ACTION                       EQU     7       ;Action
  0008          +1   694     CONST_DSRC_DID                          EQU     8       ;DSRC-DID
  0009          +1   695     CONST_DSRC_ACTIONTYPE                   EQU     9       ;ActionType
  000A          +1   696     CONST_DSRC_CONTAIN                      EQU     10      ;Contain
  000B          +1   697     CONST_DSRC_Fill                         EQU     11      ;Fill
  000C          +1   698     CONST_SSRC_FID                          EQU     12      ;ÎÄ¼þ±êÊ¶£¨FID£©
                +1   699     
  0000          +1   700     CONST_DSRC_FildIDAPPKey                 EQU     0       ;0¨D¨DETC Ó¦ÓÃÃÜÔ¿ÎÄ¼þ
  0001          +1   701     CONST_DSRC_FildIDVehicle                EQU     1       ;1¨D¨DETC Ó¦ÓÃ³µÁ¾ÐÅÏ¢ÎÄ¼þ
  0002          +1   702     CONST_DSRC_FildIDConsume                EQU     2       ;2-ETC Ó¦ÓÃ½»Ò×¼ÇÂ¼ÎÄ¼þ
  0003          +1   703     CONST_DSRC_FildIDHold                   EQU     3       ;3-ETC Ó¦ÓÃ±£ÁôÎÄ¼þ
                +1   704     
  0001          +1   705     CONST_DSRC_ChannelIDICC                 EQU     1
  0002          +1   706     CONST_DSRC_ChannelIDSAM                 EQU     2
                +1   707     ;//////////////////////////////////////AcionType³£Á¿¶¨Òå///////////////////////////////////
                             ////////////
  0000          +1   708     Const_ActionType_GetSecure              EQU     0       ;getSecure
  0001          +1   709     Const_ActionType_SetSecure              EQU     1       ;setSecure
  0002          +1   710     Const_ActionType_GetRand                EQU     2       ;getRand
  0003          +1   711     Const_ActionType_TransferChannel        EQU     3       ;transferChannel
  0004          +1   712     Const_ActionType_SetMMI                 EQU     4       ;SetMMI
                +1   713     ;//////////////////////////////////////Flash³£Á¿¶¨Òå///////////////////////////////////////
                             ///////////
  0058          +1   714     CONST_Flash_SysinfoLen                  EQU     88;39;38+12     ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0004          +1   715     CONST_Flash_0002Len                     EQU     4       ; 0002ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È  
  0028          +1   716     CONST_Flash_0012Len                     EQU     40      ; 0012ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
                +1   717     ;CONST_Flash_0015Len                    EQU     33      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1   718     CONST_Flash_0015Len                     EQU     43      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  003C          +1   719     CONST_Flash_0019Len                     EQU     60;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1   720     CONST_Flash_0019GBLen                   EQU     43;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0001          +1   721     CONST_Flash_CardTypeLEN                 EQU     1       ; ÉÏ´Î²å¿¨ÊÇ½Ó´¥£¬»¹ÊÇ·Ç½Ó´¥
                +1   722     ;CONST_Flash_SYSPARAMLEN                EQU     1       ; ÏµÍ³²ÎÊ
  0008          +1   723     CONST_Flash_BeaconIDUnixTimeLen         EQU     8       ; ÌìÏßID¼°unixtime
  0001          +1   724     CONST_FALSH_PREFlagLen                  EQU     1       ; Ô¤´¦Àí±ê¼Ç=88,±íÊ¾ÉÏ»ØÔ¤´¦Àí³É¹¦
                +1   725     
                +1   726     ;************************************************************************************
                +1   727     ;ÌØ±ð±¸×¢: ÓÉÓÚÔÚÔ¤¶Á0015/0012/0019Ê±ÔÝ´æÔÚÍâ´æµÄ³¤¶È³¬¹128¸ö×Ö½Ú£¬ËùÒÔ£¬Íâ´æ±äÁ¿µÄÆðÆôÎ»ÖÃ
                             £¬ÒªÔÚConst_Flash_FileLen
                +1   728     ;³¤¶ÈÖ®ºó£¬Const_Flash_FileLen = 8F£¬Èç¹ûÒÔºóConst_Flash_FileLen³¤¶È¸ÄÁË£¬ÄÇÍâ´æµÄÆôÊ¼Î»ÖÃÒ
                             ²Òª¸Ä
                +1   729     ;Íâ´æµÄÆôÊ¼Î»ÖÃ¶¨ÒåÔÚOBUmain.incÖÐXDATA_VARSTARTµÄÖµ
                +1   730     ;************************************************************************************
  00EC          +1   731     Const_Flash_FileLen                     EQU     CONST_Flash_SysinfoLen + CONST_Flash_0015Le
                             n + CONST_Flash_0019Len + CONST_Flash_0012Len + CONST_Flash_0002Len + CONST_Flash_CardTypeLEN 
                +1   732     
  0072          +1   733     CONST_FLASH_Block01                     EQU     72H
                +1   734     
  0072          +1   735     CONST_FLASH_STARTHIGH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
  0000          +1   736     CONST_FLASH_STARTLOW                    EQU     00H                                        
                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
                +1   737     
  0072          +1   738     CONST_FLASH_SYSINFOH                    EQU     CONST_FLASH_Block01;2EH                    
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    13

                                                  ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ,LEN = 38 BYTE
  0000          +1   739     CONST_FLASH_SYSINFOL                    EQU     00H
                +1   740     
  0072          +1   741     CONST_FLASH_0002H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0002,LEN = 4 BYTE
  0058          +1   742     CONST_FLASH_0002L                       EQU     CONST_FLASH_SYSINFOL + CONST_Flash_SysinfoL
                             en
                +1   743     
  0072          +1   744     CONST_FLASH_0012H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0012,LEN = 24 BYTE
  005C          +1   745     CONST_FLASH_0012L                       EQU     CONST_FLASH_0002L + CONST_Flash_0002Len
                +1   746     
  0072          +1   747     CONST_FLASH_0015H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0015,LEN = 33 BYTE
  0084          +1   748     CONST_FLASH_0015L                       EQU     CONST_FLASH_0012L + CONST_Flash_0012Len
                +1   749     
  0072          +1   750     CONST_FLASH_0019H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0019,LEN = 43 BYTE      
  00AF          +1   751     CONST_FLASH_0019L                       EQU     CONST_FLASH_0015L + CONST_Flash_0015Len
                +1   752             
                +1   753     ;CONST_FLASH_01BlockH                   EQU     6EH;2EH                                    
                                  ; MF¿¨µÚ1¿éÊ¾Ý
                +1   754     ;CONST_FLASH_01BlockL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len
                +1   755             
                +1   756     ;CONST_FLASH_04BlockH                   EQU     6EH;2EH
                +1   757     ;CONST_FLASH_04BlockL                   EQU     CONST_FLASH_01BlockL + 16                  
                                  ;MF¿¨µÚ4¿éÊ¾Ý
                +1   758             
                +1   759     ;CONST_FLASH_10BlockH                   EQU     6EH;2EH
                +1   760     ;CONST_FLASH_10BlockL                   EQU     CONST_FLASH_04BlockL + 16                  
                                  ;MF¿¨µÚ16¿éÊ¾Ý
                +1   761             
  0072          +1   762     CONST_FLASH_LASTCARDH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ;ÉÏÒ»´Î²å¿¨ÀàÐÍ
  00EB          +1   763     CONST_FLASH_LASTCARDL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len    
                                  ;CONST_FLASH_10BlockL + 16
                +1   764             
                +1   765     ;CONST_FLASH_SYSPARAMH                  EQU     6EH;2EH                         ;ÏµÍ³²ÎÊ
                +1   766     ;CONST_FLASH_SYSPARAML                  EQU     CONST_FLASH_LASTCARDL + 1
                +1   767             
  0072          +1   768     CONST_Flash_BeaconIDUnixTimeH           EQU     CONST_FLASH_Block01;2EH
  00EC          +1   769     CONST_Flash_BeaconIDUnixTimeL           EQU     CONST_FLASH_LASTCARDL + 1       ; 8 byte Ìì
                             ÏßIDºÍunixtimeÊ±¼ä
                +1   770             
  0072          +1   771     CONST_FALSH_PREFlagH                    EQU     CONST_FLASH_Block01;2EH
  00F4          +1   772     CONST_FALSH_PREFlagL                    EQU     CONST_Flash_BeaconIDUnixTimeL + CONST_Flash
                             _BeaconIDUnixTimeLen;1 Byte
                +1   773             
  0072          +1   774     CONST_FALSH_PREFlag02H                  EQU     CONST_FLASH_Block01;2EH
  00F5          +1   775     CONST_FALSH_PREFlag02L                  EQU     CONST_FALSH_PREFlagL + 1        ;1      ;3 
                             Byte
                +1   776              
  0072          +1   777     CONST_FALSH_PREFlag03H                  EQU     CONST_FLASH_Block01;2EH
  00F6          +1   778     CONST_FALSH_PREFlag03L                  EQU     CONST_FALSH_PREFlag02L + 1      ;1      ;3 
                             Byte
                +1   779             
  0072          +1   780     CONST_FALSH_PowerH                      EQU     CONST_FLASH_Block01;2EH
  00F7          +1   781     CONST_FALSH_PowerL                      EQU     CONST_FALSH_PREFlag03L + 1      ;1      ;3 
                             Byte
                +1   782             
                +1   783     ;CONST_FLASH_SysRstH                    EQU     06CH
                +1   784     ;CONST_FLASH_SysRstL                    EQU     000H
                +1   785             
  006C          +1   786     CONST_FLASH_Sys0020H                    EQU     6ch;064H
  0000          +1   787     CONST_FLASH_Sys0020L                    EQU     000H
                +1   788             
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    14

  006A          +1   789     CONST_FLASH_Sys0020numH                 EQU     6ah;062H
  0000          +1   790     CONST_FLASH_Sys0020numL                 EQU     000H
                +1   791             
                +1   792     ;CONST_FLASH_SysHVH                     EQU     6CH;68h;062H
                +1   793     ;CONST_FLASH_SysHVL                     EQU     000H
                +1   794             
  00FF          +1   795     const_black_h                           EQU     0ffH
  00FF          +1   796     const_black_l                           EQU     0ffH
                +1   797             
  0000          +1   798     const_white_h                           EQU     000H;40h                                ; 0
                             0h
  0031          +1   799     const_white_l                           EQU     031H;80h                                ; 0
                             0h
                +1   800     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////////
                +1   801     ;(¾§Õñ*2)/(32*12*²¨ÌØÂÊ)                
                +1   802     ;CONST_SOF                              EQU     22118400                        ; 24576000
  0000          +1   803     CONST_SOF                               EQU     24576000                        ; µ±Ç°Ö÷Æµ¾
                             §ÌåÆµÂÊ
                +1   804     ;//////////////////////////////////////// PPS ³£Á¿ ¶¨Òå ///////////////////////////////////
                             ////////////
  0010          +1   805     CONST_PPS_9600                          EQU     10H                             
  0013          +1   806     CONST_PPS_38400                         EQU     13H
  0018          +1   807     CONST_PPS_115200                        EQU     18H
  0096          +1   808     CONST_PPS_230000                        EQU     96H
                +1   809     ;//////////////////////////////////////// ´®¿Ú ³£Á¿ ¶¨Òå //////////////////////////////////
                             /////////////
                +1   810             
  0000          +1   811     CONST_BAUD_9600                         EQU     00                              ; ²¨ÌØÂÊ±àÂ
                             ë
  0001          +1   812     CONST_BAUD_38400                        EQU     01
  0002          +1   813     CONST_BAUD_115200                       EQU     02
  0003          +1   814     CONST_BAUD_115200PC                     EQU     03
  0004          +1   815     CONST_BAUD_230000                       EQU     04
  0005          +1   816     CONST_BAUD_38400PC                      EQU     5
  0006          +1   817     CONST_BAUD_9600PC                       EQU     06                              ; ²¨ÌØÂÊ±àÂ
                             ë
                +1   818             
                +1   819     ;ÔÚ24.576MÏÂ´®¿ÚµÚÒ»¸ö×Ö½ÚÉè¶¨ÎªÒª¼ìË÷100MS = CONST_SOF/(10*(FF*FF) = 38 = 26H
  0010          +1   820     CONST_SOFTFIRSTSCANTIME                 EQU     16;8;32;16;8;10H        ; 10h   ;10h    ;10
                             H;0dH;10H    ;  26H
  00FF          +1   821     CONST_SOFTFIRSTSCANTIMEXX               EQU     0FFH    ; ESAM¿¨·Ç³£¹æÖ¸Áî£¬¼Ó´óËÑË÷Ê±¼äÏÞÖ
                             Æ[Èç80 E4Ö¸Áî]
  0070          +1   822     CONST_SOFTSECOND                        EQU     070H    ; 10H   ;  Èí½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼ä
                             ÏÞ³¤ CONST_SOFTSECOND*255¸öÖÜÆÚ
  0015          +1   823     CONST_HANDSECOND                        EQU     15H     ; 01AH[ÔÚ9600²¨ÌØÏÂ£¬Òª·Å¿íµ½1AH];Ó
                             ²½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼äÏÞ³¤ CONST_HANDSECOND*255¸öÖÜÆÚ
                +1   824                                                     
  0014          +1   825     CONST_SOFTBYTESP                        EQU     20;50;4 ;Èí´®¿Ú·¢ËÍ³ÌÐò×Ö½Ú¼ä¾à¿ØÖÆÓë_FUN_L
                             IB_DELAYSIMPLAYº¯ÊÅäºÏÊ¹ÓÃ
                +1   826     ;//////////////////////////////////////// Èí´®¿Ú ³£Á¿ ¶¨Òå ////////////////////////////////
                             ///////////////
                +1   827     ;CONST_BAUD_FULL9600                    EQU     637     ;2560
                +1   828     ;CONST_BAUD_HALF9600                    EQU     317     ;2560
                +1   829     ;CONST_BAUD_FULL9600                    EQU     576     ;2304
                +1   830     ;CONST_BAUD_HALF9600                    EQU     285     ;1152
                +1   831     ;CONST_BAUD_FULL9600                    EQU     76      ;2304
                +1   832     ;CONST_BAUD_HALF9600                    EQU     85      ;1152
                +1   833     ;CONST_BAUD_FULL38400                   EQU     157     ;640
                +1   834     ;CONST_BAUD_HALF38400                   EQU     77      ;213
                +1   835     ;CONST_BAUD_FULL38400                   EQU     141     ;576
                +1   836     ;CONST_BAUD_HALF38400                   EQU     69      ;288
                +1   837     ;CONST_BAUD_FULL115200                  EQU     50      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   838     ;CONST_BAUD_HALF115200                  EQU     21      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    15

                +1   839     ;CONST_BAUD_FULL115200                  EQU     45      ;192 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   840     ;CONST_BAUD_HALF115200                  EQU     21      ;96  Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   841             
  00B3          +1   842     CONST_BAUD_FULL9600                     EQU     179     ;[(24576000/9600)*(3.58/6)-12]/4-20
                             0=[2560*(3.59/6)-12]/4-250=(1527-12)/4-200=378.75=379-200=179
  0058          +1   843     CONST_BAUD_HALF9600                     EQU     88      ;[(24576000/9600/2)*(3.58/6)-12]/4-
                             100=[2560*(3.59/6)-12]/4=(763-12)/4-100=187.75=188-100=88
                +1   844     
  005D          +1   845     CONST_BAUD_FULL38400                    EQU     93      ;[(24576000/38400)*(3.58/6)-12]/4= 
                             [640 * (3.59/6)-12]/4 = (382-12)/4=92.5=93
  002D          +1   846     CONST_BAUD_HALF38400                    EQU     45      ;[(24576000/38400/2)*(3.58/6)-12]/4
                             = [320 * (3.59/6)-12]/4 = (191-12)/4=44.75=45
                +1   847     
  001D          +1   848     CONST_BAUD_FULL115200                   EQU     29      ;[(24576000/115200)*(3.58/6)-12]/4=
                             [213*(3.58/6)-12]/4=(127-12)/4=28.75=29
  000D          +1   849     CONST_BAUD_HALF115200                   EQU     13;     ;[(24576000/115200/2)*(3.58/6)-12]/
                             4=[115.5*(3.58/6)-12]/4=(64-12)/4=13
                +1   850     
  000F          +1   851     CONST_BAUD_FULL230000                   EQU     15;13   ;[(24576000/230000/2)*(3.58/6)]/4 =
                              64/4 = 16
  0008          +1   852     CONST_BAUD_HALF230000                   EQU     8;5     ;[(24576000/230000/2)*(3.58/6)]/4=[
                             115.5*(3.58/6)]/4=32/4=8
                +1   853             
  00B3          +1   854     CONST_BAUD_CURRENTBITFULL               EQU     CONST_BAUD_FULL9600
  0058          +1   855     CONST_BAUD_CURRENTBITHALF               EQU     CONST_BAUD_HALF9600
                +1   856     ;CONST_BAUD_BITHALF12                   EQU     CONST_BAUD_CURRENTBITHALF - 3
                +1   857     ;CONST_BAUD_BITFULL8                    EQU     CONST_BAUD_CURRENTBITFULL - 2
                +1   858     ;CONST_BAUD_BITFULL12                   EQU     CONST_BAUD_CURRENTBITFULL - 3
                +1   859     ;CONST_BAUD_BITFULL20                   EQU     CONST_BAUD_CURRENTBITFULL - 5
                +1   860     ;CONST_BAUD_BITFULL28                   EQU     CONST_BAUD_CURRENTBITFULL - 7
                +1   861             
  000C          +1   862     CONST_BAUD_BITHALF12                    EQU     3 + 9
  000B          +1   863     CONST_BAUD_BITFULL8                     EQU     2 + 9
  000C          +1   864     CONST_BAUD_BITFULL12                    EQU     3 + 9
  000E          +1   865     CONST_BAUD_BITFULL20                    EQU     5 + 9
  0010          +1   866     CONST_BAUD_BITFULL28                    EQU     7 + 9
                +1   867             
                +1   868     ;////////////////////////////////////////  Ó²´®¿Ú ³£Á¿ ¶¨Òå ///////////////////////////////
                             ////////////////
                +1   869     ;CONST_BAUD_HAND115200                  EQU     0FFH;(256 - CONST_SOF/(192*115200))     ;
                +1   870     ;CONST_BAUD_HAND38400                   EQU     0FDH;(256 - (CONST_SOF/(192*38400)))    ;
                +1   871     ;CONST_BAUD_HAND9600                    EQU     0F4H;(256 - CONST_SOF/(192*9600))       ;
                +1   872     
  00FC          +1   873     CONST_BAUD_HAND230000                   EQU     252     ;0FCH   24.576x1000000/(230000x6/3.
                             58=)/16 = 4 = F8H
  00F3          +1   874     CONST_BAUD_HAND115200PC                 EQU     243     ;243    ;24.576 / 0F3H  ;24576000 /
                              32179 = 764 / 16 = 47.7 = 48 = D0H
  00F8          +1   875     CONST_BAUD_HAND115200                   EQU     248     ;0F8H   ;24.576x1000000/(115200x6/3
                             .58=193073)/16 = 8 = F8H             
  00D8          +1   876     CONST_BAUD_HAND38400pc                  EQU     216     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  00E9          +1   877     CONST_BAUD_HAND38400                    EQU     233     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  0060          +1   878     CONST_BAUD_HAND9600pc                   EQU     96      ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1   879     
  00A3          +1   880     CONST_BAUD_HAND9600                     EQU     163     ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1   881     
                +1   882     ;24.576x1000000/(38400x9.6/3.58=102972)/16=15 = f1
                +1   883     ;24.576x1000000/(9600x9.6/3.58=25743)/16=60 = c4h
                +1   884     ;24.576x1000000/(230000x6/3.58=385475)/16=4 = fch
                +1   885     
                +1   886     ;////////////////////////////////////////  Ö¸Áî¼¯ /////////////////////////////////////////
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    16

                             //////
                +1   887     ;LL C2H LH 32H
                +1   888     ;ML 62H MH 12H
                +1   889     ;HL 32H HH 12H
                +1   890             
  0001          +1   891     CONST_ACT_L                             EQU     1
  0002          +1   892     CONST_ACT_M                             EQU     2
  0003          +1   893     CONST_ACT_H                             EQU     3
                +1   894             
  0002          +1   895     CONST_ACT_V                             EQU     CONST_ACT_M
                +1   896             
  000A          +1   897     CONST_ACT_L_L                           EQU     0ah;0C2H
  0006          +1   898     CONST_ACT_L_H                           EQU     06h;032H
                +1   899             
  0006          +1   900     CONST_ACT_M_L                           EQU     06h;062H
  0000          +1   901     CONST_ACT_M_H                           EQU     00h;012H
                +1   902             
  0000          +1   903     CONST_ACT_H_L                           EQU     00h;032H
  0001          +1   904     CONST_ACT_H_H                           EQU     01h;012H
                +1   905     
                     906     
                     907             
----                 908             RSEG    ?pr?DSRC?Mater
                     909             USING   0
                     910             
                     911     ;--------------------------------------------------------------------------
                     912     ;ÃèÊö:;VSTÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý]
                     913     ;Íâ²¿²ÎÊ
                     914     ;DATA_RXBUF     ---     ½ÓÊÕµ½µÄ BST ç·³å
                     915     ;XDATA_TXBUF    ---     ½«Òª·¢ËÍ VST
                     916     ;ÄÚ²¿²ÎÊ:
                     917     ;·µ»ØÖµ
                     918     ;R3             ---     ³¤¶È
                     919     ;R7             ---     ×´Ì¬Âë¡£Èç¹û½ÓÊÕµ½µÄbst²»ÕÈ·¾Í·µ»Ø´íÎó´úÂë
                     920     ;XDATA_TXBUF    ---     ·¢ËÍç·³å
                     921     ;DATA_DSRCLEN   ---     dsrcÊ¾ÝÖ¡³¤¶È£¬ÒÔ±ãÔÚÖØ·¢Ê±Ê¹ÓÃ
                     922     ;--------------------------------------------------------------------------     
0000                 923     _FUN_DSRC_VST:
                     924             
0000 C200     F      925     CLR     BIT_privateInfo
0002 C200     F      926     CLR     BIT_gbICCInfo
                     927             
                     928                     
                     929             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~        
0004 C200     F      930             CLR     BIT_Cellinfo
0006 7900     F      931             MOV     R1,#DATA_RXBUF + 18                     ;Parameter
0008 E7              932             MOV     A,@R1
                     933             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                     934             ;MOV    A,#22
                     935             ;MOV    R1,#DATA_RXBUF + 19                     ;Parameter
                     936             ;MOV    A,@R1
                     937             ;CALL   _FUN_TEST_DISPLAY
                     938             ;~~~~~~~~~~~~~~~~~~~~~~~~
                     939             ;MOV    C,ACC.1
                     940             ;MOV    BIT_ISCell,C
                     941             ;mov    a,#33
                     942             ;call   _fun_test_display
                     943             
0009 30E103          944             JnB     acc.1,_FUN_DSRC_VSTzc
000C 020000   F      945             JMP     _FUN_DSRC_VSTCell
000F                 946     _FUN_DSRC_VSTzc:        
                     947             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                     948             
                     949             ;ÉèÖÃMAC ID
000F 900000   F      950             MOV     DPTR,#STR_SYS_OBUID
0012 7F00     F      951             MOV     R7,#XDATA_TXBUF
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    17

0014 120000   F      952             CALL    _FUN_LIB_FLASHTOXDATA
                     953             
                     954             ;MOV    R3,#CONST_SYS_OBUIDLEN
                     955             ;CALL   _FUN_LIB_FLASHTODATAEX
                     956             
                     957             ;¼ÇÂ¼ÌìÏßID & ¼ÇÂ¼UnixÊ±¼ä [ ÒòÎª XDATA_BeaconID ºÍ XDATA_UnixTime ¿Õ¼ä¶¨³ÉÁ¬Ìå,ËùÒ
                             ÔÒ»ÆëCopy]
                     958             ;XDATA_BeaconID
                     959             ;¿ÉÄÜµ½Ê±»¹Òª½«Á½¸öÖµ·ÅÈëµ½flashÖÐ
0017 7900     F      960             MOV     R1,#DATA_RXBUF + 8
0019 7800     F      961             MOV     R0,#XDATA_BeaconID
001B 7A08            962             MOV     R2,#CONST_Flash_BeaconIDUnixTimeLen
001D                 963     DSRC_VST_BeanconLoop:
001D E7              964             MOV     A,@R1
                     965                     ;MOVX   @R0,A
001E 758301          966             MOV     DPH,#1 
0021 8882            967             MOV     DPL,R0 
0023 F0              968             MOVX    @DPTR,A
0024 09              969             INC     R1
0025 08              970             INC     R0
0026 DAF5            971             DJNZ    R2,DSRC_VST_BeanconLoop
                     972             
                     973             ;~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                     974             ;MOV    R0,#XDATA_UnixTime
                     975             ;CALL   _FUN_TEST_DISPLAY
                     976             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~
                     977             
                     978             ;ÉèÖÃVST»ù±¾ÐÅÏ¢
0028 900000   F      979             MOV     DPTR,#STR_DSRC_VST
002B 7F00     F      980             MOV     R7,#XDATA_TXBUF + 4
002D 120000   F      981             CALL    _FUN_LIB_FLASHTOXDATA
                     982             
                     983             ;¼ÇÂ¼ÐÅµÀºÅ
0030 7900     F      984             MOV     R1,#DATA_RXBUF + 16
0032 E7              985             MOV     A,@R1
0033 A2E0            986             MOV     C,ACC.0
0035 9200     F      987             MOV     BIT_CHANNELFLAG,C 
                     988             
                     989             ;JNB    BIT_CHANNELFLAG,DSRC_VST_BeanconLoop1
                     990             ;PUSH   AR1
                     991             ;PUSH   AR0
                     992             
                     993             ;~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                     994             ;MOV    A,#1
                     995             ;CALL   _FUN_TEST_DISPLAY
                     996             ;~~~~~~~~~~~~~~~~~~~~~~~~~
                     997             
                     998             ;CALL   _FUN_HDLC_CHANGECHANNEL                 ;ÉèÖÃÍ¨Ñ¶ÐÅµÀ
                     999             ;POP    AR0
                    1000             ;POP    AR1
                    1001             
                    1002             ;400us  
0037                1003     DSRC_VST_BeanconLoop1:
                    1004                     
                    1005             ;ÉèÖÃ·µ»ØÐÅµÀºÅ
0037 7800     F     1006             MOV     R0,#XDATA_TXBUF + 8
                    1007                     ;MOVX   A,@R0
0039 758301         1008             MOV     DPH,#1
003C 8882           1009             MOV     DPL,R0
003E E0             1010             MOVX    A,@DPTR
003F A200     F     1011             MOV     C,BIT_CHANNELFLAG
0041 92E0           1012             MOV     ACC.0,C
                    1013                     ;MOVX   @R0,A
0043 758301         1014             MOV     DPH,#1 
0046 8882           1015             MOV     DPL,R0 
0048 F0             1016             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    18

                    1017             
                    1018             ;ÉèÖÃ ApplicationList
0049 09             1019             INC     R1
004A 08             1020             INC     R0
004B E7             1021             MOV     A,@R1
                    1022                     ;MOVX   @R0,A
004C 758301         1023             MOV     DPH,#1 
004F 8882           1024             MOV     DPL,R0 
0051 F0             1025             MOVX    @DPTR,A
                    1026             
                    1027             ;ÉèÖÃParameter & ÎÞÀ©Õ¹, AID = 1 (ETC)
0052 09             1028             INC     R1
0053 08             1029             INC     R0
0054 E7             1030             MOV     A,@R1
0055 D2E7           1031             SETB    ACC.7
0057 D2E6           1032             SETB    ACC.6   ;Paramter
                    1033                     ;MOVX   @R0,A
0059 758301         1034             MOV     DPH,#1 
005C 8882           1035             MOV     DPL,R0 
005E F0             1036             MOVX    @DPTR,A
                    1037     
                    1038             ;Bit5¨D¨DgbICCInfo´æÔÚ±êÖ¾
                    1039             ;BIT_ISContact  
005F 7800     F     1040             MOV     R0,#XDATA_TXBUF + 12
0061 E4             1041             CLR     A
                    1042                     ;MOVX   @R0,A
0062 758301         1043             MOV     DPH,#1 
0065 8882           1044             MOV     DPL,R0 
0067 F0             1045             MOVX    @DPTR,A
                    1046     ;       JNB     BIT_INSERTCARD,DSRC_VST_infoo
                    1047     ;       SETB    C
                    1048     ;       JNB     BIT_ISContact,DSRC_VST_privateInfo
                    1049     ;DSRC_VST_DgbICCInfo:
                    1050     ;       MOV     ACC.5,C
                    1051     ;       JMP     DSRC_VST_infoo
                    1052     ;DSRC_VST_privateInfo:
                    1053     ;       MOV     ACC.6,C
                    1054     ;DSRC_VST_infoo:
                    1055     ;       ;MOV    C,BIT_INSERTCARD
                    1056     ;       ;MOV    ACC.5,C
                    1057     
                    1058     
0068 7800     F     1059             MOV     R0,#XDATA_TXBUF + 14
                    1060             
                    1061             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1062             ;MOV    A,#22
                    1063             ;CALL   _FUN_TEST_DISPLAY
                    1064             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1065                     
                    1066             ;--- ´ÓEPPROMÖÐ¶ÁÈ¡IC¿¨ÐÅÏ¢ ---
                    1067             ;JNB    BIT_INSERTCARD,DSRC_VST_NotUserCard     ;Ã»ÓÐ²å¿¨Ìø¹²»¶Á²»¶ÁIC¿¨ÐÅÏ¢
                    1068             
006A 7900     F     1069             MOV     R1,#DATA_RXBUF + 18                     ;Parameter
006C E7             1070             MOV     A,@R1
                    1071             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1072             ;MOV    A,#22
                    1073             ;MOV    R1,#DATA_RXBUF + 19                     ;Parameter
                    1074             ;MOV    A,@R1
                    1075             ;CALL   _FUN_TEST_DISPLAY
                    1076             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1077     
006D 30E60B         1078             JNB     ACC.6,DSRC_VST_NotUserCard              ;Ã»ÓÐÀ©Õ¹Ó¦ÓÃÊ±Ìø¹²»¶Á²»¶ÁIC¿¨ÐÅÏ¢
                    1079             
0070 7900     F     1080             MOV     R1,#DATA_RXBUF + 19
0072 E7             1081             MOV     A,@R1
                    1082             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    19

                    1083             ;MOV    A,#22
                    1084             ;MOV    R1,#DATA_RXBUF + 19                     ;Parameter
                    1085             ;MOV    A,@R1
                    1086             ;CALL   _FUN_TEST_DISPLAY
                    1087             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1088             
0073 30E705         1089             JNB     ACC.7,DSRC_VST_NotUserCard              ;Ã»ÓÐÀ©Õ¹Ó¦ÓÃÊ±Ìø¹²»¶Á²»¶ÁIC¿¨ÐÅÏ¢ 
                                          
                    1090                     
0076 7900     F     1091             MOV     R1,#DATA_RXBUF + 18                     ;Parameter
0078 E7             1092             MOV     A,@R1           
0079 8013           1093             JMP     DSRC_VST_PRE                            ;BST´øÔ¤´¦ÀíÁ÷³Ì
                    1094             
                    1095             ;Ã»ÓÐÓÃ»§¿¨»òÃ»ÓÐÀ©Õ¹Ó¦ÓÃÊ±
007B                1096     DSRC_VST_NotUserCard:   
                    1097     
                    1098             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1099             ;MOV    A,#23
                    1100             ;CALL   _FUN_TEST_DISPLAY
                    1101             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1102     
                    1103             ;´Ó EPPROM ÖÐ¶ÁÈ¡ 26 Byte ÒÑÊÂÏÈ´ÓESMA ÖÐÔ¤¶Áµ½FlashÖÐµÄ SysInfo ÎÄ¼þ
007B 758372         1104             MOV     DPH,#CONST_FLASH_SYSINFOH
007E 758200         1105             MOV     DPL,#CONST_FLASH_SYSINFOL
0081 750700   F     1106             MOV     AR7,#XDATA_TXBUF + 14
0084 7B1A           1107             MOV     R3,#26
0086 120000   F     1108             CALL    _RDFlashXR
                    1109     
0089 7800     F     1110             MOV     R0,#XDATA_TXBUF + 40
008B 020000   F     1111             JMP     DSRC_VST_SEGVSTTAIL
                    1112     
008E                1113     DSRC_VST_PRE:   ;BST ´øÔ¤´¦ÀíÁ÷³Ì
                    1114     
                    1115             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1116             ;MOV    A,#23
                    1117             ;CALL   _FUN_TEST_DISPLAY
                    1118             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1119             
                    1120             ;---JNB ACC.0,DSRC_VST_PREAID00
008E 020000   F     1121             JMP     DSRC_VST_PREAID01
                    1122             ;ACC.0=0/=1
0091                1123     DSRC_VST_PREAID00:      
                    1124             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1125             ;MOV    A,#24
                    1126             ;CALL   _FUN_TEST_DISPLAY
                    1127             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1128     
                    1129             ;---´Ó EPPROM ÖÐ¶ÁÈ¡ 26 Byte ÒÑÊÂÏÈ´ÓESMA ÖÐÔ¤¶Áµ½FlashÖÐµÄ SysInfo ÎÄ¼þ
0091 758372         1130             MOV     DPH,#CONST_FLASH_SYSINFOH
0094 758200         1131             MOV     DPL,#CONST_FLASH_SYSINFOL
0097 750700   F     1132             MOV     AR7,#XDATA_TXBUF + 14
009A 7B1A           1133             MOV     R3,#26
009C 120000   F     1134             CALL    _RDFlashXR
                    1135                     
                    1136             ;1 ÉèÖÃµÚ13¸ö×Ö½Ú               
                    1137             ;2 »ñÈ¡Ëæ»úÊ¼°ESAM¿¨¸´Î»ÐÅÏ¢
009F 7800     F     1138             MOV     R0,#XDATA_TXBUF+12      
00A1 7900     F     1139             MOV     R1,#DATA_RXBUF+19       ;Init Mode
00A3 E7             1140             MOV     A,@R1
                    1141     
00A4 B40077         1142             CJNE    A,#0,DSRC_VST_InitMode01
                    1143             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1144             ;MOV    A,#25
                    1145             ;CALL   _FUN_TEST_DISPLAY
                    1146             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    1147                     ;MOVX   A,@R0
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    20

00A7 758301         1148             MOV     DPH,#1
00AA 8882           1149             MOV     DPL,R0
00AC E0             1150             MOVX    A,@DPTR
00AD 4490           1151             ORL     A,#90H
                    1152                     ;MOVX   @R0,A
00AF 758301         1153             MOV     DPH,#1 
00B2 8882           1154             MOV     DPL,R0 
00B4 F0             1155             MOVX    @DPTR,A
                    1156     
00B5 7800     F     1157             MOV     R0,#XDATA_TXBUF+40
00B7 741D           1158             MOV     A,#1DH
                    1159                     ;MOVX   @R0,A
00B9 758301         1160             MOV     DPH,#1 
00BC 8882           1161             MOV     DPL,R0 
00BE F0             1162             MOVX    @DPTR,A
                    1163     
00BF 7800     F     1164             MOV     R0,#XDATA_TXBUF+49
00C1 7450           1165             MOV     A,#50H
                    1166                     ;MOVX   @R0,A
00C3 758301         1167             MOV     DPH,#1 
00C6 8882           1168             MOV     DPL,R0 
00C8 F0             1169             MOVX    @DPTR,A
                    1170             
                    1171             ;¸´Î»¿¨Æ¬
                    1172             ;CLR    PIN_ESAM_RST
                    1173             ;MOV    R7,#20H
                    1174             ;SETB   PIN_ESAM_RST
                    1175             
00C9 C200     F     1176             CLR     BIT_ESAMICC     
00CB D200     F     1177             setb    BIT_BUFADDR                     ;BIT_BUFADDR            ---     =0£¬½ÓÊÕÊ¾Ý
                             µ½ÄÚ´æ£»=1£¬½ÓÊÕÊ¾Ýµ½Íâ´æ
00CD D200     F     1178             SETB    BIT_SERIALOVERTIMERX            ;BIT_SERIALOVERTIMERX   ---     ´®¿ÚµÈ´½ÓÊÕ
                             ÊÇ·ñÓÐÊ±¼ä,ÏÞÖÆ=0Ã»ÓÐÏÞÖÆ;=1ÓÐÊ±¼äÏÞÖÆ
00CF D200     F     1179             SETB    BIT_VERIFY                      ;BIT_VERIFY             ---     ´®¿ÚÊÕ·¢ÊÇ·
                             ñÒª¼ÓÑéÎ»,=0²»Òª£¬=1Òª
00D1 7F00     F     1180             MOV     R7,#XDATA_TXBUF+50              ;R7                     ---     ½«Òª½ÓÊÕ×Ö·
                             û´®bufµÄÖ¸Õë
00D3 7B00           1181             MOV     R3,#000                 ;       
00D5 120000   F     1182             CALL    _FUN_SERIAL_RXSOFT              ;
00D8 EB             1183             MOV     A,R3                            ;
                    1184             
                    1185             ;Ñ¡DF01
00D9 C200     F     1186             CLR     BIT_ESAMICC
00DB C200     F     1187             CLR     BIT_GETRESULT
00DD 7F00     F     1188             MOV     R7,#DATA_RXBUF
00DF 7D00     F     1189             MOV     R5,#XDATA_TXBUF + 72
00E1 7BDF           1190             MOV     R3,#0dFH
00E3 7A01           1191             MOV     R2,#001H
00E5 120000   F     1192             CALL    _FUN_CARDAPP_SelectFile
                    1193             
                    1194             ;È¡Ëæ»úÊ        
00E8 900000   F     1195             MOV     DPTR,#STR_DSRC_GETRND
00EB 7F00     F     1196             MOV     R7,#DATA_RXBUF
00ED 120000   F     1197             CALL    _FUN_LIB_FLASHTODATA
                    1198             
00F0 D200     F     1199             SETB    BIT_GETRESULT           ;       BIT_GETRESULT           =1±íÊ¾È¡0Ê±£¬È¡·µ»Ø
                             ½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û(Ö»¶ÔT0¿¨£¬Ö¸Áî´óÓÚ5¸ö×Ö½ÚµÄÖ¸ÁîÓÐÐ§»òproÓÐÐ§)
00F2 C200     F     1200             CLR     BIT_ESAMICC             ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´
                             ¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
00F4 7F00     F     1201             MOV     R7,#XDATA_TXBUF + 41    ;       R7                      ---     ·¢ËÍç·³åÖ¸Õ
                             ë(ÄÚ´æ)
00F6 7D00     F     1202             MOV     R5,#DATA_RXBUF          ;       R5                      ---     ½ÓÊÕËÍç·³åÖ
                             ¸Õë(Íâ´æ)
                    1203                                             ;       R3                      ---     ½«Òª·¢ËÍÊ¾Ý
                             µÄ³¤¶È       
                    1204             
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    21

00F8 120000   F     1205             CALL    _FUN_Contact_Channel
00FB E4             1206             CLR     A
00FC 7800     F     1207             MOV     R0,#XDATA_TXBUF+45
                    1208                     ;MOVX   @R0,A
00FE 758301         1209             MOV     DPH,#1 
0101 8882           1210             MOV     DPL,R0 
0103 F0             1211             MOVX    @DPTR,A
0104 08             1212             INC     R0
                    1213                     ;MOVX   @R0,A
0105 758301         1214             MOV     DPH,#1 
0108 8882           1215             MOV     DPL,R0 
010A F0             1216             MOVX    @DPTR,A
010B 08             1217             INC     R0
                    1218                     ;MOVX   @R0,A
010C 758301         1219             MOV     DPH,#1 
010F 8882           1220             MOV     DPL,R0 
0111 F0             1221             MOVX    @DPTR,A
0112 08             1222             INC     R0
                    1223                     ;MOVX   @R0,A
0113 758301         1224             MOV     DPH,#1 
0116 8882           1225             MOV     DPL,R0 
0118 F0             1226             MOVX    @DPTR,A
0119 7800     F     1227             MOV     R0,#XDATA_TXBUF + 65
                    1228             
                    1229             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1230             ;MOV    A,#26
                    1231             ;CALL   _FUN_TEST_DISPLAY
                    1232             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1233             
011B 020000   F     1234             JMP     DSRC_VST_InitModeOver
011E                1235     DSRC_VST_InitMode01:
011E B4014C         1236             CJNE    A,#1,DSRC_VST_InitMode02
                    1237                     ;MOVX   A,@R0
0121 758301         1238             MOV     DPH,#1
0124 8882           1239             MOV     DPL,R0
0126 E0             1240             MOVX    A,@DPTR
0127 4480           1241             ORL     A,#80H  
                    1242                     ;MOVX   @R0,A
0129 758301         1243             MOV     DPH,#1 
012C 8882           1244             MOV     DPL,R0 
012E F0             1245             MOVX    @DPTR,A
                    1246     
012F 7800     F     1247             MOV     R0,#XDATA_TXBUF+40
0131 741D           1248             MOV     A,#1DH
                    1249                     ;MOVX   @R0,A
0133 758301         1250             MOV     DPH,#1 
0136 8882           1251             MOV     DPL,R0 
0138 F0             1252             MOVX    @DPTR,A
                    1253             
                    1254             ;È¡Ëæ»úÊ
0139 900000   F     1255             MOV     DPTR,#STR_DSRC_GETRND
013C 7F00     F     1256             MOV     R7,#DATA_RXBUF
013E 120000   F     1257             CALL    _FUN_LIB_FLASHTODATA
                    1258             
                    1259             
0141 D200     F     1260             SETB    BIT_GETRESULT           ;       BIT_GETRESULT           =1±íÊ¾È¡0Ê±£¬È¡·µ»Ø
                             ½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û(Ö»¶ÔT0¿¨£¬Ö¸Áî´óÓÚ5¸ö×Ö½ÚµÄÖ¸ÁîÓÐÐ§»òproÓÐÐ§)
0143 C200     F     1261             CLR     BIT_ESAMICC             ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´
                             ¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
0145 7F00     F     1262             MOV     R7,#XDATA_TXBUF + 41    ;       R7                      ---     ·¢ËÍç·³åÖ¸Õ
                             ë(ÄÚ´æ)
0147 7D00     F     1263             MOV     R5,#DATA_RXBUF          ;       R5                      ---     ½ÓÊÕËÍç·³åÖ
                             ¸Õë(Íâ´æ)
                    1264                                             ;       R3                      ---     ½«Òª·¢ËÍÊ¾Ý
                             µÄ³¤¶È       
0149 120000   F     1265             CALL    _FUN_Contact_Channel
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    22

                    1266             
014C E4             1267             CLR     A
014D 7800     F     1268             MOV     R0,#XDATA_TXBUF+45
                    1269                     ;MOVX   @R0,A
014F 758301         1270             MOV     DPH,#1 
0152 8882           1271             MOV     DPL,R0 
0154 F0             1272             MOVX    @DPTR,A
0155 08             1273             INC     R0
                    1274                     ;MOVX   @R0,A
0156 758301         1275             MOV     DPH,#1 
0159 8882           1276             MOV     DPL,R0 
015B F0             1277             MOVX    @DPTR,A
015C 08             1278             INC     R0
                    1279                     ;MOVX   @R0,A
015D 758301         1280             MOV     DPH,#1 
0160 8882           1281             MOV     DPL,R0 
0162 F0             1282             MOVX    @DPTR,A
0163 08             1283             INC     R0
                    1284                     ;MOVX   @R0,A
0164 758301         1285             MOV     DPH,#1 
0167 8882           1286             MOV     DPL,R0 
0169 F0             1287             MOVX    @DPTR,A         
                    1288     
                    1289             ;MOV    R0,#XDATA_TXBUF+49
016A 08             1290             INC     R0
                    1291     
                    1292             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1293             ; MOV   A,#27
                    1294             ; CALL  _FUN_TEST_DISPLAY
                    1295             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1296     
016B 8051           1297             JMP     DSRC_VST_InitModeOver
016D                1298     DSRC_VST_InitMode02:
016D B4024C         1299             CJNE    A,#2,DSRC_VST_InitModeOther
                    1300                     ;MOVX   A,@R0
0170 758301         1301             MOV     DPH,#1
0173 8882           1302             MOV     DPL,R0
0175 E0             1303             MOVX    A,@DPTR
0176 4480           1304             ORL     A,#80H  
                    1305                     ;MOVX   @R0,A
0178 758301         1306             MOV     DPH,#1 
017B 8882           1307             MOV     DPL,R0 
017D F0             1308             MOVX    @DPTR,A
                    1309             
017E 7800     F     1310             MOV     R0,#XDATA_TXBUF+40
0180 741D           1311             MOV     A,#1DH
                    1312                     ;MOVX   @R0,A
0182 758301         1313             MOV     DPH,#1 
0185 8882           1314             MOV     DPL,R0 
0187 F0             1315             MOVX    @DPTR,A
                    1316             
                    1317             ;È¡Ëæ»úÊ
0188 900000   F     1318             MOV     DPTR,#STR_DSRC_GETRND
018B 7F00     F     1319             MOV     R7,#DATA_RXBUF
018D 120000   F     1320             CALL    _FUN_LIB_FLASHTODATA
                    1321             
0190 D200     F     1322             SETB    BIT_GETRESULT           ;       BIT_GETRESULT           =1±íÊ¾È¡0Ê±£¬È¡·µ»Ø
                             ½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û(Ö»¶ÔT0¿¨£¬Ö¸Áî´óÓÚ5¸ö×Ö½ÚµÄÖ¸ÁîÓÐÐ§»òproÓÐÐ§)
0192 C200     F     1323             CLR     BIT_ESAMICC             ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´
                             ¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
0194 7F00     F     1324             MOV     R7,#XDATA_TXBUF + 41    ;       R7                      ---     ·¢ËÍç·³åÖ¸Õ
                             ë(ÄÚ´æ)
0196 7D00     F     1325             MOV     R5,#DATA_RXBUF          ;       R5                      ---     ½ÓÊÕËÍç·³åÖ
                             ¸Õë(Íâ´æ)
                    1326                                             ;       R3                      ---     ½«Òª·¢ËÍÊ¾Ý
                             µÄ³¤¶È
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    23

                    1327                                             
0198 120000   F     1328             CALL    _FUN_Contact_Channel
                    1329             
019B E4             1330             CLR     A
019C 7800     F     1331             MOV     R0,#XDATA_TXBUF+45
                    1332                     ;MOVX   @R0,A
019E 758301         1333             MOV     DPH,#1 
01A1 8882           1334             MOV     DPL,R0 
01A3 F0             1335             MOVX    @DPTR,A
01A4 08             1336             INC     R0
                    1337                     ;MOVX   @R0,A
01A5 758301         1338             MOV     DPH,#1 
01A8 8882           1339             MOV     DPL,R0 
01AA F0             1340             MOVX    @DPTR,A
01AB 08             1341             INC     R0
                    1342                     ;MOVX   @R0,A
01AC 758301         1343             MOV     DPH,#1 
01AF 8882           1344             MOV     DPL,R0 
01B1 F0             1345             MOVX    @DPTR,A
01B2 08             1346             INC     R0
                    1347                     ;MOVX   @R0,A
01B3 758301         1348             MOV     DPH,#1 
01B6 8882           1349             MOV     DPL,R0 
01B8 F0             1350             MOVX    @DPTR,A
                    1351             
01B9 08             1352             INC     R0
                    1353             ;MOV    R0,#XDATA_TXBUF+49
01BA 8002           1354             jmp     DSRC_VST_InitModeOver
01BC                1355     DSRC_VST_InitModeOther:
                    1356             
01BC 7800     F     1357             MOV     r0,#xdata_txbuf+40
                    1358             
                    1359             ;Ô­À´ºÃÏñÃ»ÓÐ¼Ó£¬ÒªÑéÖ¤27
01BE                1360     DSRC_VST_InitModeOver:
                    1361             
01BE 020000   F     1362             JMP     DSRC_VST_SEGVSTTAIL
01C1                1363     DSRC_VST_PREAID01:
                    1364             
                    1365             ;JB     BIT_INSERTCARD,DSRC_VST_PREAID01Start   ;Ã»ÓÐ²å¿¨Ìø¹²»¶Á²»¶ÁIC¿¨ÐÅÏ¢
                    1366             ;JMP    DSRC_VST_NotUserCard
01C1 7900     F     1367             MOV     R1,#DATA_RXBUF + 19                     ;
01C3 E7             1368             MOV     A,@R1
01C4 20E703         1369             JB      ACC.7,DSRC_VST_PREAID01Start
                    1370             ;---JMP DSRC_VST_BJ                             ;±±¾©´¦Àí·½Ê½
01C7 020000   F     1371             JMP     DSRC_VST_NotUserCard
01CA                1372     DSRC_VST_PREAID01Start:
                    1373             
01CA 7900     F     1374             MOV     R1,#DATA_RXBUF + 22                     ;ÏµÍ³ÐÅÏ¢ÎÄ¼þÔ¤´¦ÀíÄ£Ê½£¨³¤¶È£©
01CC E7             1375             MOV     A,@R1
                    1376             
                    1377             ;ÖÃÎ» gbICCInfo
                    1378             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1379             ;MOV    A,#26
                    1380             ;CALL   _FUN_TEST_DISPLAY
                    1381             ;~~~~~~~~~~~~~~~~~~~~~~~~       
01CD 7004           1382             JNZ     DSRC_VST_PREAID01READSYSINFO
01CF 7800     F     1383             MOV     R0,#XDATA_TXBUF + 13
01D1 8015           1384             JMP     DSRC_VST_PREREADSYSINFOOVER
                    1385             
01D3                1386     DSRC_VST_PREAID01READSYSINFO:
                    1387             
                    1388             ;´Ó EPPROM ÖÐ¶ÁÈ¡ XX Byte ÒÑÊÂÏÈ´ÓESMA ÖÐÔ¤¶Áµ½FlashÖÐµÄ SysInfo ÎÄ¼þ
01D3 758372         1389             MOV     DPH,#CONST_FLASH_SYSINFOH
01D6 758200         1390             MOV     DPL,#CONST_FLASH_SYSINFOL
01D9 750700   F     1391             MOV     AR7,#XDATA_TXBUF + 14
01DC FB             1392             MOV     R3,A
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    24

01DD C0E0           1393             PUSH    ACC
01DF 120000   F     1394             CALL    _RDFlashXR
01E2 D0E0           1395             POP     ACC
                    1396             
01E4 7800     F     1397             MOV     R0,#XDATA_TXBUF + 14
01E6 28             1398             ADD     A,R0
01E7 F8             1399             MOV     R0,A
01E8                1400     DSRC_VST_PREREADSYSINFOOVER:
                    1401             
01E8 200006   F     1402             JB      BIT_ISContact,DSRC_VST_CPUPre
01EB 200003   F     1403             JB      BIT_PROMF,DSRC_VST_CPUPre
01EE 020000   F     1404             JMP     DSRC_VST_MFPre
01F1                1405     DSRC_VST_CPUPre:        ;CPU¿¨Ô¤¶Á
                    1406             
01F1 7900     F     1407             MOV     R1,#DATA_RXBUF + 21                     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
01F3 E7             1408             MOV     A,@R1
                    1409     
01F4 7003           1410             JNZ     DSRC_VST_CPUPreStart                    ;µ±Ã»ÓÐÔ¤¶ÁÐÅÏ¢Ê±£¬Ôò½áÊø
01F6 020000   F     1411             JMP     DSRC_VST_SEGVSTTAIL
01F9                1412     DSRC_VST_CPUPreStart:           
01F9 200003   F     1413             JB      BIT_INSERTCARD,DSRC_VST_CPUPreHaveCard
01FC 020000   F     1414             JMP     DSRC_VST_SEGVSTTAIL
01FF                1415     DSRC_VST_CPUPreHaveCard:;ÓÐÔ¤¶Á£¬ÓÐ¿¨
01FF D200     F     1416             SETB    BIT_gbICCInfo   
                    1417     
0201 F5F0           1418             MOV     B,A
0203 7428           1419             MOV     A,#28H
                    1420                     ;MOVX   @R0,A
0205 758301         1421             MOV     DPH,#1 
0208 8882           1422             MOV     DPL,R0 
020A F0             1423             MOVX    @DPTR,A
020B 08             1424             INC     R0
020C E5F0           1425             MOV     A,B
                    1426             
020E 09             1427             INC     R1      ;23[]
020F 09             1428             INC     R1      ;24
                    1429             
                    1430             ;JNB    ACC.7,DSRC_VST_SEG0015  
0210 C0E0           1431             PUSH    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
0212 C001           1432             PUSH    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    1433             ;MOV    R1,#DATA_RXBUF+21
                    1434             ;MOV    A,@R1
                    1435             ;MOV    R1,#DATA_RXBUF+24
                    1436     
0214 20E502         1437             JB      ACC.5,DSRC_VST_SEG0015Start
0217 802B           1438             JMP     DSRC_VST_SEG0012
0219                1439     DSRC_VST_SEG0015Start:
0219 30E702         1440             JNB     ACC.7,DSRC_VST_SEG001512E
021C 09             1441             INC     R1
021D 09             1442             INC     R1
021E                1443     DSRC_VST_SEG001512E:    
021E 30E602         1444             JNB     ACC.6,DSRC_VST_SEG0015          
0221 09             1445             INC     R1
0222 09             1446             INC     R1
                    1447             
0223                1448     DSRC_VST_SEG0015:
                    1449             ;PUSH   AR1
                    1450             ;MOV    R1,#DATA_RXBUF + 21                     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    1451             ;MOV    A,@R1   
                    1452             ;POP    AR1
                    1453             ;JNB    ACC.5,DSRC_VST_SEG0012
                    1454     
                    1455     
                    1456             ;¶Á0015ÎÄ¼þ
0223 758372         1457             MOV     DPH,#CONST_FLASH_0015H
0226 7484           1458             MOV     A,#CONST_FLASH_0015L
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    25

0228 27             1459             ADD     A,@R1                                   ;0015Æ«ÒÆÁ¿
0229 F582           1460             MOV     DPL,A
                    1461     
022B 09             1462             INC     R1      
022C E7             1463             MOV     A,@R1   
022D FB             1464             MOV     R3,A                                    ;0015ÎÄ¼þ³¤¶È
                    1465             
                    1466             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    1467             ;MOV    A,#15
                    1468             ;MOV    A,R3
                    1469             ;CALL   _FUN_TEST_DISPLAY
                    1470             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    1471             
022E 850007         1472             MOV     AR7,AR0
0231 C003           1473             PUSH    AR3
0233 C000           1474             PUSH    AR0
0235 C001           1475             PUSH    AR1
0237 120000   F     1476             CALL    _RDFlashXR                              ;¶Áfalshº¯ÊÖ»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²
                             »push r1
023A D001           1477             POP     AR1
023C D000           1478             POP     AR0
023E D003           1479             POP     AR3
0240 09             1480             INC     R1
                    1481             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    1482             ;MOV    A,#15
                    1483             ;MOV    A,R0
                    1484             ;ADD    A,#39
                    1485             ;MOV    R0,A
                    1486             ;MOV    A,R3
                    1487             ;CALL   _FUN_TEST_DISPLAY
                    1488     
                    1489     
                    1490             ;MOV    A,R0
                    1491             ;CALL   _FUN_TEST_DISPLAY
                    1492             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    1493     
0241 E8             1494             MOV     A,R0
0242 2B             1495             ADD     A,R3
0243 F8             1496             MOV     R0,A
                    1497             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    1498             ;MOV    A,#16
                    1499             ;MOV    A,R0
                    1500             ;CALL   _FUN_TEST_DISPLAY
                    1501             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    1502     
                    1503             ;POP    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    1504             ;POP    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    1505             ;JMP    SEG_DSRC_GETSendBufLen
0244                1506     DSRC_VST_SEG0012:
                    1507             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    1508             ;MOV    A,#12
                    1509             ;CALL   _FUN_TEST_DISPLAY
                    1510             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    1511             
0244 D001           1512             POP     AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
0246 D0E0           1513             POP     ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    1514     
0248 C0E0           1515             PUSH    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
024A C001           1516             PUSH    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    1517     
024C 20E602         1518             JB      ACC.6,DSRC_VST_SEG0012Start
024F 8026           1519             JMP     DSRC_VST_SEG0019
0251                1520     DSRC_VST_SEG0012Start:
                    1521     
0251 30E702         1522             JNB     ACC.7,DSRC_VST_SEG001202E
0254 09             1523             INC     R1
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    26

0255 09             1524             INC     R1
0256                1525     DSRC_VST_SEG001202E:
                    1526     
                    1527             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    1528             ;MOV    A,#13
                    1529             ;CALL   _FUN_TEST_DISPLAY
                    1530             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    1531     
                    1532             ;¶Á0012ÎÄ¼þ
0256 758372         1533             MOV     DPH,#CONST_FLASH_0012H
0259 745C           1534             MOV     A,#CONST_FLASH_0012L
025B 27             1535             ADD     A,@R1                                   ;0012Æ«ÒÆÁ¿
025C F582           1536             MOV     DPL,A
                    1537     
025E 09             1538             INC     R1
025F E7             1539             MOV     A,@R1
                    1540             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    1541             ;MOV    A,#15
                    1542             ;CALL   _FUN_TEST_DISPLAY
                    1543             ;~~~~~~~~~~~~~~~~~~~~~~~~               
0260 FB             1544             MOV     R3,A                                    ;0012ÎÄ¼þ³¤¶È
                    1545             
0261 850007         1546             MOV     AR7,AR0
0264 C003           1547             PUSH    AR3
0266 C000           1548             PUSH    AR0
0268 C001           1549             PUSH    AR1
026A 120000   F     1550             CALL    _RDFlashXR                              ;¶ÁFlashº¯ÊÖ»²Ù×÷ÁË     R0£¬ËùÒÔÔÝ²
                             »PUSH R1
026D D001           1551             POP     AR1
026F D000           1552             POP     AR0
0271 D003           1553             POP     AR3
0273 09             1554             INC     R1
                    1555     
0274 E8             1556             MOV     A,R0
0275 2B             1557             ADD     A,R3
0276 F8             1558             MOV     R0,A
                    1559     
                    1560             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    1561             ;MOV    A,#16
                    1562             ;MOV    A,R0
                    1563             ;CALL   _FUN_TEST_DISPLAY
                    1564             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    1565             
                    1566             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1567             ;POP    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    1568             ;POP    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    1569             ;JMP    SEG_DSRC_GETSendBufLen
                    1570             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1571             
0277                1572     DSRC_VST_SEG0019:
                    1573             
                    1574             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1575             ;PUSH   AR1
                    1576             ;MOV    R1,#DATA_RXBUF + 21                     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    1577             ;MOV    A,@R1   
                    1578             ;POP    AR1
                    1579             ;JNB    ACC.4,DSRC_VST_SEG0002
                    1580             ;~~~~~~~~~~~~~~~~~~~~~~~~
0277 D001           1581             POP     AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
0279 D0E0           1582             POP     ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    1583     
027B C0E0           1584             PUSH    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
027D C001           1585             PUSH    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    1586     
027F 20E402         1587             JB      ACC.4,DSRC_VST_SEG0019Start
0282 8030           1588             JMP     DSRC_VST_SEG0002
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    27

0284                1589     DSRC_VST_SEG0019Start:
                    1590             
0284 30E702         1591             JNB     ACC.7,DSRC_VST_SEG001902E
0287 09             1592             INC     R1
0288 09             1593             INC     R1
0289                1594     DSRC_VST_SEG001902E:
0289 30E602         1595             JNB     ACC.6,DSRC_VST_SEG001912E
028C 09             1596             INC     R1
028D 09             1597             INC     R1
028E                1598     DSRC_VST_SEG001912E:
028E 30E502         1599             JNB     ACC.5,DSRC_VST_SEG001915E
0291 09             1600             INC     R1
0292 09             1601             INC     R1
0293                1602     DSRC_VST_SEG001915E:
                    1603             
                    1604             
                    1605             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    1606             ;MOV    A,#19
                    1607             ;CALL   _FUN_TEST_DISPLAY
                    1608             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    1609             
                    1610             ;¶Á0019ÎÄ¼þ
0293 758372         1611             MOV     DPH,#CONST_FLASH_0019H
0296 74AF           1612             MOV     A,#CONST_FLASH_0019L
0298 27             1613             ADD     A,@R1                                   ;0019Æ«ÒÆÁ¿
0299 F582           1614             MOV     DPL,A
                    1615     
029B 09             1616             INC     R1      
029C E7             1617             MOV     A,@R1   
029D FB             1618             MOV     R3,A                                    ;0019ÎÄ¼þ³¤¶È
                    1619             
029E 850007         1620             MOV     AR7,AR0
02A1 C003           1621             PUSH    AR3
02A3 C000           1622             PUSH    AR0
02A5 C001           1623             PUSH    AR1
02A7 120000   F     1624             CALL    _RDFlashXR                              ;¶Áfalshº¯ÊÖ»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²
                             »push r1
02AA D001           1625             POP     AR1
02AC D000           1626             POP     AR0
02AE D003           1627             POP     AR3
02B0 09             1628             INC     R1
02B1 E8             1629             MOV     A,R0
02B2 2B             1630             ADD     A,R3
02B3 F8             1631             MOV     R0,A
02B4                1632     DSRC_VST_SEG0002:
                    1633     
02B4 D001           1634             POP     AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
02B6 D0E0           1635             POP     ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    1636     
                    1637             ;PUSH   AR1
                    1638             ;MOV    R1,#DATA_RXBUF + 21                     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    1639             ;MOV    A,@R1   
                    1640             ;POP    AR1
                    1641             ;---JNB ACC.7,DSRC_VST_SEGVSTTAIL
02B8 20E702         1642             JB      ACC.7,DSRC_VST_READ0002
02BB 8028           1643             JMP     DSRC_VST_SEGVSTTAIL
02BD                1644     DSRC_VST_READ0002:
                    1645             
                    1646             ;MOV    R1,#DATA_RXBUF + 23                     ;¶¨Î»r1µ½bst'Ô¤¶Á0002Æ«ÒÆÁ¿'
                    1647     
                    1648             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1649             ;MOV    A,#02
                    1650             ;MOV    A,R0
                    1651             ;CALL   _FUN_TEST_DISPLAY
                    1652             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1653             ;¶Á0002ÎÄ¼þ
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    28

02BD 758372         1654             MOV     DPH,#CONST_FLASH_0002H
02C0 7458           1655             MOV     A,#CONST_FLASH_0002L
02C2 27             1656             ADD     A,@R1                                   ;0002Æ«ÒÆÁ¿
02C3 F582           1657             MOV     DPL,A
                    1658     
02C5 09             1659             INC     R1      
02C6 E7             1660             MOV     A,@R1   
02C7 FB             1661             MOV     R3,A                                    ;0002ÎÄ¼þ³¤¶È
                    1662             
02C8 850007         1663             MOV     AR7,AR0
02CB C003           1664             PUSH    AR3
02CD C000           1665             PUSH    AR0
02CF C001           1666             PUSH    AR1
02D1 120000   F     1667             CALL    _RDFlashXR                              ;¶Áfalshº¯ÊÖ»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²
                             »push r1
02D4 D001           1668             POP     AR1
02D6 D000           1669             POP     AR0
02D8 D003           1670             POP     AR3
02DA 09             1671             INC     R1
02DB E8             1672             MOV     A,R0
02DC 2B             1673             ADD     A,R3
02DD F8             1674             MOV     R0,A
                    1675     
                    1676             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1677             ;MOV    A,#02
                    1678             ;MOV    A,R0
                    1679             ;CALL   _FUN_TEST_DISPLAY
                    1680             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1681     
                    1682     
02DE 8005           1683             JMP     DSRC_VST_SEGVSTTAIL                     ;½áÊøÔ¤¶Á
                    1684     
                    1685             
                    1686             ;--- MF¿¨Ô¤¶Á ---
02E0                1687     DSRC_VST_MFPre:
02E0 200002   F     1688             JB      BIT_INSERTCARD,DSRC_VST_MFPreHaveCard
02E3 8000           1689             JMP     DSRC_VST_SEGVSTTAIL     
02E5                1690     DSRC_VST_MFPreHaveCard:
                    1691     ;       SETB    BIT_privateInfo
                    1692             
                    1693     ;       MOV     A,#65H                                  ;Container
                    1694     ;       INC     R0
                    1695             
                    1696             ;--- ÎïÀí¿¨ºÅ ---
                    1697     ;       PUSH    AR1
                    1698     ;       MOV     R1,#DATA_CardNO
                    1699     ;       MOV     A,@R1
                    1700             
                    1701     ;       INC     R1
                    1702     ;       INC     R0
                    1703     ;       MOV     A,@R1
                    1704             
                    1705     ;       INC     R1
                    1706     ;       INC     R0
                    1707     ;       MOV     A,@R1
                    1708             
                    1709     ;       INC     R1
                    1710     ;       INC     R0
                    1711     ;       MOV     A,@R1
                    1712             
                    1713     ;       INC     R0      
                    1714     ;       POP     AR1
                    1715             
                    1716             ;--- 01H block ---
                    1717     ;       MOV     DPH,#CONST_FLASH_01BlockH
                    1718     ;       MOV     DPL,#CONST_FLASH_01BlockL
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    29

                    1719     ;       MOV     R3,#16
                    1720     ;       MOV     AR7,AR0
                    1721     ;       PUSH    AR0
                    1722     ;       PUSH    AR3
                    1723     ;       CALL    _RDFlashXR              
                    1724     ;       POP     AR3
                    1725     ;       POP     AR0
                    1726     ;       MOV     A,R0
                    1727     ;       ADD     A,R3
                    1728     ;       MOV     R0,A
                    1729             
                    1730             ;--- 04H Block ---
                    1731     ;       MOV     DPH,#CONST_FLASH_04BlockH
                    1732     ;       MOV     DPL,#CONST_FLASH_04BlockL
                    1733     ;       MOV     R3,#16
                    1734     ;       MOV     AR7,AR0
                    1735     ;       PUSH    AR0
                    1736     ;       PUSH    AR3
                    1737     ;       CALL    _RDFlashXR              
                    1738     ;       POP     AR3
                    1739     ;       POP     AR0
                    1740     ;       MOV     A,R0
                    1741     ;       ADD     A,R3
                    1742     ;       MOV     R0,A    
                    1743             
                    1744             ;--- 10H block ---
                    1745     ;       MOV     DPH,#CONST_FLASH_10BlockH
                    1746     ;       MOV     DPL,#CONST_FLASH_10BlockL
                    1747     ;       MOV     R3,#16
                    1748     ;       MOV     AR7,AR0
                    1749     ;       PUSH    AR0
                    1750     ;       PUSH    AR3
                    1751     ;       CALL    _RDFlashXR              
                    1752     ;       POP     AR3
                    1753     ;       POP     AR0
                    1754     ;       MOV     A,R0
                    1755     ;       ADD     A,R3
                    1756     ;       MOV     R0,A
                    1757             
                    1758             ;--- R0½Óµ½·¢ËÍç·³åµÄÎ»ÖÃ ---
02E5                1759     DSRC_VST_SEGVSTTAIL:
                    1760             
                    1761             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    1762             ;MOV    A,R0
                    1763             ;CLR    C
                    1764             ;SUBB   A,#XDATA_TXBUF
                    1765             ;CALL   _FUN_TEST_DISPLAY
                    1766             ;~~~~~~~~~~~~~~~~~~~~~~~~       
02E5 C000           1767             PUSH    AR0
                    1768             
02E7 7800     F     1769             MOV     R0,#XDATA_TXBUF + 12
                    1770                     ;MOVX   A,@R0
02E9 758301         1771             MOV     DPH,#1
02EC 8882           1772             MOV     DPL,R0
02EE E0             1773             MOVX    A,@DPTR 
02EF A200     F     1774             MOV     C,BIT_privateInfo
02F1 92E6           1775             MOV     ACC.6,C
02F3 A200     F     1776             MOV     C,BIT_gbICCInfo
02F5 92E5           1777             MOV     ACC.5,C
                    1778                     ;MOVX   @R0,A
02F7 758301         1779             MOV     DPH,#1 
02FA 8882           1780             MOV     DPL,R0 
02FC F0             1781             MOVX    @DPTR,A
                    1782             
02FD D000           1783             POP     AR0
                    1784             
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    30

                    1785             ;ÉèÖÃMACID
02FF 900000   F     1786             MOV     DPTR,#STR_SYS_OBUID
0302 850007         1787             MOV     AR7,AR0
0305 120000   F     1788             CALL    _FUN_LIB_FLASHTOXDATA
                    1789     
                    1790             ;--- Éè±¸ÀàÐÍ ---
                    1791             ;dcba
                    1792             ;10H0 Îª²»Ö§³Ö IC ¿¨½Ó¿Ú£¬1 ÎªÖ§³Ö IC ¿¨½Ó¿Ú
                    1793             ;0 Îª²»Ö§³Ö×ÔÖ÷Â·¾¶±êÊ¶£¬ 1 ÎªÖ§³Ö×ÔÖ÷Â·¾¶±êÊ¶
0308 7430           1794             MOV     A,#30h
                    1795                     ;MOVX   @R0,A
030A 758301         1796             MOV     DPH,#1 
030D 8882           1797             MOV     DPL,R0 
030F F0             1798             MOVX    @DPTR,A
0310 08             1799             INC     R0
                    1800     
                    1801             ;--- Éè±¸×´Ì¬ ---
0311 E4             1802             CLR     A                                       
0312 A200     F     1803             MOV     C,BIT_INSERTCARD                                ;=1±íÊ¾µ±Ç°OBU²å¿¨;=0±íÊ¾µ±
                             Ç°OBUÃ»²å¿¨;
0314 B3             1804             CPL     C                                               ;Óë¹ú±êDSRC¶¨ÒåÏà·´£¬ËùÒÔ·´
                             Ò»ÏÂ
0315 92E7           1805             MOV     ACC.7,C                                         ;iccPresent -- ´æÔÚ£¨0£©£¬Î
                             Þ£¨1£©
0317 92E3           1806             MOV     ACC.3,C                                         ;iccStatus -- IC¿¨Õ³££¨0£©£
                             ¬³ö´í£¨1£©
                    1807             
                    1808             ;~~~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~~~~~~
                    1809     ;       JB      BIT_PROMF,ASDFSDAF      
                    1810     ;       MOV     A,#3
                    1811     ;       JMP     DISPLAY
                    1812     ;ASDFSDAF:
                    1813     ;       MOV     A,#4
                    1814     ;DISPLAY:
                    1815     ;       JMP     _FUN_TEST_DISPLAY
                    1816             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       
                    1817              
0319 E4             1818             CLR     A       
031A A200     F     1819             MOV     C,BIT_INSERTCARD
031C B3             1820             CPL     C
031D 92E7           1821             MOV     ACC.7,C
                    1822             
031F 300010   F     1823             JNB     BIT_INSERTCARD,DSRC_VST_CardTypeOver            ;µ±Ç°ÎÞ¿¨
0322 300002   F     1824             JNB     BIT_ISContact,DSRC_VST_CardTypePro              ;µ±Ç°ÊÇ·Ç½Ó¿¨
0325                1825     DSRC_VST_CardTypeContact:                                       ;½Ó´¥Ê½CPU¿¨            0  
                                  0       0       
0325 800B           1826             JMP     DSRC_VST_CardTypeOver                           ;µ±Ç°ÊÇ½Ó´¥¿¨
0327                1827     DSRC_VST_CardTypePro:                                           ;·Ç½Ó´¥Ê½CPU¿¨          0  
                                  1       0
0327 300004   F     1828             JNB     BIT_PROMF,DSRC_VST_CardTypeMF   
032A D2E5           1829             SETB    ACC.5
032C 8004           1830             JMP     DSRC_VST_CardTypeOver
032E                1831     DSRC_VST_CardTypeMF:                                            ;·Ç½Ó´¥Ê½Âß¼­¼ÓÃÜ¿¨     0  
                                  1       1       
032E D2E5           1832             SETB    ACC.5
0330 D2E4           1833             SETB    ACC.4
0332                1834     DSRC_VST_CardTypeOver:
                    1835             
                    1836             ;Locked -- OBUÎ´Ëø£¨0£©£¬±»Ëø£¨1£© Acc.2
                    1837             ;Tampered -- OBUÎ´±»²ð¶¯£¨0£©£¬±»²ð¶¯£¨1£© acc.1
                    1838             ;²ð¶¯µÄ±ê¼ÇÓÉ£¬²ð¶¯´ÎÊÊÇ·ñÎª0¡£=0±íÊ¾²ð¶¯£¬<> 0 ±íÊ¾Ã»ÓÐ²ð¶¯¹¡£
                    1839     ;       MOV     R1,#XDATA_FIX
                    1840     ;       PUSH    ACC
                    1841     ;       ANL     A,#0FH
                    1842                     
                    1843     ;       JZ      DSRC_VST_Tampered
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    31

                    1844     ;       CLR     C
                    1845     ;       JMP     DSRC_VST_TamperedOver
                    1846     ;DSRC_VST_Tampered:     
                    1847     ;       SETB    C
                    1848     ;       ;SETB   
                    1849     ;DSRC_VST_TamperedOver:
                    1850     ;       POP     ACC
                    1851             
0332 A200     F     1852             MOV     C,BIT_CD
                    1853             ;---CLR C
0334 92E1           1854             MOV     ACC.1,C
                    1855             
                    1856             ;Battery ¨C OBUµç³ØÕ³££¨0£©£¬µç³ØµçÁ¿µÍ£¨1£©    acc.0   
                    1857                     ;MOVX   @R0,A
0336 758301         1858             MOV     DPH,#1 
0339 8882           1859             MOV     DPL,R0 
033B F0             1860             MOVX    @DPTR,A 
033C 08             1861             INC     R0      
                    1862             
                    1863             ;ESAMµÚ27×Ö½Ú"²ðÐ¶×´Ì¬"
                    1864             ;---MOV A,#0FFH
                    1865             ;PUSH   AR0
                    1866             ;MOV    DPH,#CONST_FLASH_SYSINFOH
                    1867             ;MOV    DPL,#CONST_FLASH_SYSINFOL + 26
                    1868             ;MOV    AR7,#XDATA_FIX
                    1869             ;MOV    R3,#1
                    1870             ;CALL   _RDFlashXR      
                    1871             ;POP    AR0
                    1872             
033D 7900     F     1873             MOV     R1,#XDATA_FIX
                    1874                     ;MOVX   A,@R1
033F 758301         1875             MOV     DPH,#1
0342 8982           1876             MOV     DPL,R1
0344 E0             1877             MOVX    A,@DPTR
                    1878             ;MOV    A,#0FFH;ÔÝ¼Ó
                    1879             ;CLR    A
                    1880                     ;MOVX   @R0,A
0345 758301         1881             MOV     DPH,#1 
0348 8882           1882             MOV     DPL,R0 
034A F0             1883             MOVX    @DPTR,A
034B 08             1884             INC     R0
                    1885             
034C 020000   F     1886             JMP     SEG_DSRC_GETSendBufLen ;VST_OVER
                    1887             
                    1888     ;-------------------------------------------------------------------------      
                    1889     ;±±¾©BST´¦Àí
                    1890     ;RX[21].7 = 0
                    1891     ;       RX[21].0 = 0 Ã»ÓÐÔ¤´¦Àí,Ö»·µ»Ø26¸ö×Ö½ÚÏµÍ³ÐÅÏ¢ÎÄ¼þ
                    1892     ;       RX[21].0 = 1 ÓÐÔ¤´¦Àí
                    1893     ;       ´¢Öµ¿¨
                    1894     ;               RX[21].2 = 0    ·µ»Ø0012
                    1895     ;               RX[21].2 = 1    ·µ»Ø0019
                    1896     ;       ¼ÇÕË¿¨  
                    1897     ;               RX[21].1 = 0    ·µ»Ø0012
                    1898     ;               RX[21].1 = 1    ·µ»Ø0019
                    1899     ;·µ26¸öÏµÍ³ÐÅÏ¢ÎÄ¼þ
                    1900     ;·µ0015                 33  Byte
                    1901     ;·µ0012/0019            24  Byte
                    1902     ;·µ0002                 4   Byte
                    1903     ;------------------------------------------------------------------------       
034F                1904     DSRC_VST_BJ:
                    1905             ;¶ÁÏµÍ³ÐÅÏ¢ÎÄ¼þ 
                    1906     
                    1907             
034F 741A           1908             MOV     a,#26;³¤¶È
                    1909             ;´Ó EPPROM ÖÐ¶ÁÈ¡ XX Byte ÒÑÊÂÏÈ´ÓESMA ÖÐÔ¤¶Áµ½FlashÖÐµÄ SysInfo ÎÄ¼þ
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    32

0351 758372         1910             MOV     DPH,#CONST_FLASH_SYSINFOH
0354 758200         1911             MOV     DPL,#CONST_FLASH_SYSINFOL
0357 750700   F     1912             MOV     AR7,#XDATA_TXBUF + 14
035A FB             1913             MOV     R3,A
035B C0E0           1914             PUSH    ACC
035D 120000   F     1915             CALL    _RDFlashXR
0360 D0E0           1916             POP     ACC
                    1917             
0362 7800     F     1918             MOV     R0,#XDATA_TXBUF + 14
0364 28             1919             ADD     A,R0
0365 F8             1920             MOV     R0,A
                    1921             
                    1922     ;       JB      BIT_ISContact,DSRC_VST_BJCPUPre
                    1923     ;       JB      BIT_PROMF,DSRC_VST_BJCPUPre
                    1924     ;       JMP     DSRC_VST_MFPre
                    1925     ;DSRC_VST_BJCPUPre:     ;CPU¿¨Ô¤¶Á
                    1926             
                    1927     ;       JB      BIT_INSERTCARD,DSRC_VST_BJCPUPreHaveCard
                    1928     ;       JMP     DSRC_VST_SEGVSTTAIL
                    1929     ;DSRC_VST_BJCPUPreHaveCard:;ÓÐÔ¤¶Á£¬ÓÐ¿¨
                    1930     ;       SETB    BIT_gbICCInfo   
                    1931             
                    1932     
                    1933     
                    1934             
0366 7900     F     1935             MOV     R1,#DATA_RXBUF + 19
0368 E7             1936             MOV     A,@R1
                    1937                     
0369 30E005         1938             JNB     ACC.0,VST_BJ_SETBJNOPRE
036C 300002   F     1939             JNB     BIT_INSERTCARD,VST_BJ_SETBJNOPRE;Ã»ÓÐ²å¿¨Ê±Ò²²»Ô¤¶Á
                    1940     ;       SETB    BIT_BJPRE       
036F 8003           1941             JMP     VST_BJ_SETBJPREOVER
0371                1942     VST_BJ_SETBJNOPRE:
                    1943             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    1944             ;MOV    A,#44
                    1945             ;CALL   _FUN_TEST_DISPLAY
                    1946             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    1947     
0371 020000   F     1948             JMP     DSRC_VST_SEGVSTTAIL
0374                1949     VST_BJ_SETBJPREOVER:            
0374 200006   F     1950             JB      BIT_ISContact,DSRC_VST_BJCPUPre
0377 200003   F     1951             JB      BIT_PROMF,DSRC_VST_BJCPUPre
037A 020000   F     1952             JMP     DSRC_VST_MFPre
037D                1953     DSRC_VST_BJCPUPre:      ;CPU¿¨Ô¤¶Á
037D D200     F     1954             SETB    BIT_gbICCInfo   
                    1955     
                    1956     
037F C0E0           1957             PUSH    ACC
0381 7428           1958             MOV     A,#28H
                    1959                     ;MOVX   @R0,A
0383 758301         1960             MOV     DPH,#1 
0386 8882           1961             MOV     DPL,R0 
0388 F0             1962             MOVX    @DPTR,A
0389 08             1963             INC     R0
038A D0E0           1964             POP     ACC
                    1965             
                    1966             ;JMP    DSRC_VST_SEGVSTTAIL
                    1967     
                    1968             ;¶Á0015ÎÄ¼þÖÐµÚ9¸ö×Ö½Ú[ ¿¨ÀàÐÍ ]
038C C0E0           1969             PUSH    ACC
038E C000           1970             PUSH    AR0
0390 758372         1971             MOV     DPH,#CONST_FLASH_0015H
0393 75828C         1972             MOV     DPL,#CONST_FLASH_0015L + 8
0396 7B01           1973             MOV     R3,#1                                                           ;0015ÎÄ¼þ³¤
                             ¶È   
0398 7F00     F     1974             MOV     R7,#XDATA_TXBUF+100
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    33

039A 120000   F     1975             CALL    _RDFlashXR                                                      ;¶ÁFalshº¯Ê
                             Ö»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²»push r1     
039D 7800     F     1976             MOV     R0,#XDATA_TXBUF+100
                    1977                     ;MOVX   A,@R0
039F 758301         1978             MOV     DPH,#1
03A2 8882           1979             MOV     DPL,R0
03A4 E0             1980             MOVX    A,@DPTR
03A5 FA             1981             mov     R2,a
03A6 D000           1982             POP     AR0
03A8 D0E0           1983             POP     ACC
                    1984             
03AA BA1604         1985             CJNE    R2,#CONST_CARD_CONSUME,DSRC_VST_BJCPUPrePASS
03AD                1986     DSRC_VST_BJCPUPreCONSUME:
03AD A2E2           1987             MOV     C,ACC.2         
03AF 8002           1988             JMP     DSRC_VST_BJCPUPrePASSCONSUME
03B1                1989     DSRC_VST_BJCPUPrePASS:
03B1 A2E1           1990             MOV     C,ACC.1
03B3                1991     DSRC_VST_BJCPUPrePASSCONSUME:   
03B3 9200     F     1992             MOV     BIT_BJ1219,C    ;¶Á0012»¹ÊÇ0019
                    1993                             
                    1994             ;ÈÝÆ÷                   
                    1995     ;       MOV     A,#28H
                    1996     ;       INC     R0              ;
                    1997             
                    1998             ;¶Á0015
                    1999     
                    2000             ;JMP    DSRC_VST_SEGVSTTAIL
                    2001     
                    2002             ;¶Á0015ÎÄ¼þ
                    2003             ;mov    a,#8;offset
03B5 758372         2004             MOV     DPH,#CONST_FLASH_0015H
03B8 7484           2005             MOV     A,#CONST_FLASH_0015L
03BA 2408           2006             ADD     A,#8;@R1                                        ;0015Æ«ÒÆÁ¿
03BC F582           2007             MOV     DPL,A
                    2008     
                    2009             ;INC    R1      
                    2010             ;MOV    A,@R1   
                    2011     
03BE 7421           2012             mov     a,#33;0015 len  
03C0 FB             2013             MOV     R3,A                                    ;0015ÎÄ¼þ³¤¶È
                    2014     
                    2015             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2016             ;MOV    A,#15
                    2017             ;MOV    A,R3
                    2018             ;CALL   _FUN_TEST_DISPLAY
                    2019             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    2020             
03C1 850007         2021             MOV     AR7,AR0
03C4 C003           2022             PUSH    AR3
03C6 C000           2023             PUSH    AR0
03C8 C001           2024             PUSH    AR1
03CA 120000   F     2025             CALL    _RDFlashXR                              ;¶Áfalshº¯ÊÖ»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²
                             »push r1
03CD D001           2026             POP     AR1
03CF D000           2027             POP     AR0
03D1 D003           2028             POP     AR3
03D3 09             2029             INC     R1
                    2030             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2031             ;MOV    A,#15
                    2032             ;MOV    A,R0
                    2033             ;ADD    A,#39
                    2034             ;MOV    R0,A
                    2035             ;MOV    A,R3
                    2036             ;CALL   _FUN_TEST_DISPLAY
                    2037             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    2038     
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    34

03D4 E8             2039             MOV     A,R0
03D5 2B             2040             ADD     A,R3
03D6 F8             2041             MOV     R0,A
                    2042     
                    2043             ;JMP    DSRC_VST_SEGVSTTAIL
                    2044             
                    2045     
                    2046             
                    2047             ;¶Á0012»ò0019
03D7 300002   F     2048             JNB     BIT_BJ1219,VST_BJ_read0012
03DA 8022           2049             JMP     VST_BJ_read0019
03DC                2050     VST_BJ_read0012:
                    2051     
                    2052     
                    2053             ;¶Á0012ÎÄ¼þ
                    2054             ;mov    a,#0 ;offset
03DC 758372         2055             MOV     DPH,#CONST_FLASH_0012H
03DF 745C           2056             MOV     A,#CONST_FLASH_0012L
                    2057             ;ADD    A,@R1                                   ;0012Æ«ÒÆÁ¿
03E1 F582           2058             MOV     DPL,A
                    2059     
                    2060             ;INC    R1
                    2061             ;MOV    A,@R1
                    2062             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2063             ;MOV    A,#15
                    2064             ;CALL   _FUN_TEST_DISPLAY
                    2065             ;~~~~~~~~~~~~~~~~~~~~~~~~               
03E3 7418           2066             mov     a,#24
03E5 FB             2067             MOV     R3,A                                    ;0012ÎÄ¼þ³¤¶È
                    2068             
03E6 850007         2069             MOV     AR7,AR0
03E9 C003           2070             PUSH    AR3
03EB C000           2071             PUSH    AR0
03ED C001           2072             PUSH    AR1
03EF 120000   F     2073             CALL    _RDFlashXR                              ;¶ÁFlashº¯ÊÖ»²Ù×÷ÁË     R0£¬ËùÒÔÔÝ²
                             »PUSH R1
03F2 D001           2074             POP     AR1
03F4 D000           2075             POP     AR0
03F6 D003           2076             POP     AR3
03F8 09             2077             INC     R1
03F9 E8             2078             MOV     A,R0
03FA 2B             2079             ADD     A,R3
03FB F8             2080             MOV     R0,A
                    2081     
03FC 8022           2082             JMP     VST_BJ_read0002
03FE                2083     VST_BJ_read0019:
                    2084     
                    2085             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2086             ;MOV    A,#19
                    2087             ;CALL   _FUN_TEST_DISPLAY
                    2088             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    2089     
                    2090             ;¶Á0019ÎÄ¼þ
                    2091             ;mov    a,#3
03FE 758372         2092             MOV     DPH,#CONST_FLASH_0019H
0401 74AF           2093             MOV     A,#CONST_FLASH_0019L
0403 2403           2094             ADD     A,#3;@R1                                        ;0019Æ«ÒÆÁ¿
0405 F582           2095             MOV     DPL,A
                    2096     
                    2097             ;INC    R1      
                    2098             ;MOV    A,@R1   
0407 7418           2099             mov     a,#24
0409 FB             2100             MOV     R3,A                                    ;0019ÎÄ¼þ³¤¶È
                    2101             
040A 850007         2102             MOV     AR7,AR0
040D C003           2103             PUSH    AR3
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    35

040F C000           2104             PUSH    AR0
0411 C001           2105             PUSH    AR1
0413 120000   F     2106             CALL    _RDFlashXR                              ;¶Áfalshº¯ÊÖ»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²
                             »push r1
0416 D001           2107             POP     AR1
0418 D000           2108             POP     AR0
041A D003           2109             POP     AR3
041C 09             2110             INC     R1
041D E8             2111             MOV     A,R0
041E 2B             2112             ADD     A,R3
041F F8             2113             MOV     R0,A
                    2114     
0420                2115     VST_BJ_read0002:
                    2116             ;¶Á0002ÎÄ¼þ
                    2117             ;mov    a,#0
0420 758372         2118             MOV     DPH,#CONST_FLASH_0002H
0423 7458           2119             MOV     A,#CONST_FLASH_0002L
                    2120             ;ADD    A,@R1                                   ;0002Æ«ÒÆÁ¿
0425 F582           2121             MOV     DPL,A
                    2122     
                    2123             ;INC    R1      
                    2124             ;MOV    A,@R1   
0427 7404           2125             mov     a,#4
0429 FB             2126             MOV     R3,A                                    ;0002ÎÄ¼þ³¤¶È
                    2127             
042A 850007         2128             MOV     AR7,AR0
042D C003           2129             PUSH    AR3
042F C000           2130             PUSH    AR0
0431 C001           2131             PUSH    AR1
0433 120000   F     2132             CALL    _RDFlashXR                              ;¶Áfalshº¯ÊÖ»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²
                             »push r1
0436 D001           2133             POP     AR1
0438 D000           2134             POP     AR0
043A D003           2135             POP     AR3
043C 09             2136             INC     R1
043D E8             2137             MOV     A,R0
043E 2B             2138             ADD     A,R3
043F F8             2139             MOV     R0,A
                    2140             
                    2141             ;¶Á0002 
                    2142     ;VST_BJ_Over:
0440 020000   F     2143             JMP     DSRC_VST_SEGVSTTAIL;½áÊø±±¾©¿¨´¦Àí
                    2144     ;       JMP     SEG_DSRC_GETSendBufLen ;VST_OVER
                    2145                     
                    2146     ;-------------------------------------------------------------------------
                    2147     ;ÃèÊö:·Ç¹ã²¥DSRCÐÅºÅ´¦Àí³ÌÐòÈë¿Ú
                    2148     ;Íâ²¿²ÎÊ
                    2149     ;DATA_RXBUF     ---     ½ÓÊÕµ½µÄ·Ç¹ã²¥DSRç·³å
                    2150     ;XDATA_TXBUF    ---     ·Ç¹ã²¥DSR
                    2151     ;ÄÚ²¿²ÎÊ:
                    2152     ;
                    2153     ;·µ»ØÖµ:
                    2154     ;       BIT_N                           ---     NÎ»µÄÖµ
                    2155     ;       XDATA_TXBUF                     ---     ·Ç¹ã²¥DSRC      
                    2156     ;       DATA_DSRCRXLEN                  ---     ½ÓÊÕ³¤¶È
                    2157     ;       BIT_SETMMI                      ---     ÊÇ·ñ½ÓÊÕµ½SetMMIµÄ±ê¼Ç
                    2158     ;--------------------------------------------------------------------------     
0443                2159     _FUN_DSRC_NSpecial:
                    2160             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2161             ;MOV    A,#12
                    2162     ;       mov     r1,#DATA_RXBUF + 15
                    2163     ;       mov     a,@r1
                    2164     ;       xrl     a,#54h
                    2165     ;       jnz     DSRC_NSpecialor
                    2166             ;---CLR PIN_RED
                    2167             ;mov    a,#54
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    36

                    2168             ;CALL   _FUN_TEST_DISPLAY
                    2169     ;DSRC_NSpecialor:
                    2170             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~   
                    2171     
                    2172             ;--- ÉèÖÃMACID ---
0443 900000   F     2173             MOV     DPTR,#STR_SYS_OBUID
0446 7F00     F     2174             MOV     R7,#XDATA_TXBUF
0448 120000   F     2175             CALL    _FUN_LIB_FLASHTOXDATA
                    2176             
                    2177             ;--- »ù±¾ÐÅÏ¢ ---
044B 74E0           2178             MOV     A,#0E0H                                         ;MAC¿ØÖÆÓò
                    2179                     ;MOVX   @R0,A
044D 758301         2180             MOV     DPH,#1 
0450 8882           2181             MOV     DPL,R0 
0452 F0             2182             MOVX    @DPTR,A                                         ;MAC¿ØÖÆÓò
                    2183             
0453 08             2184             INC     R0                                              ;LLC¿ØÖÆÓò
0454 7900     F     2185             MOV     R1,#DATA_RXBUF + 5                              ;LLC¿ØÖÆÓò(³­)
0456 E7             2186             MOV     A,@R1
                    2187             
0457 A2E7           2188             MOV     C,ACC.7
0459 9200     F     2189             MOV     BIT_N,C
045B B3             2190             CPL     C
045C 92E7           2191             MOV     ACC.7,C
                    2192             ;MOV    BIT_N,C
                    2193             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2194             ;MOV    A,#12
                    2195             ;CALL   _FUN_TEST_DISPLAY
                    2196             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~           
                    2197                     ;MOVX   @R0,A
045E 758301         2198             MOV     DPH,#1 
0461 8882           2199             MOV     DPL,R0 
0463 F0             2200             MOVX    @DPTR,A
0464 08             2201             INC     R0                                              ;LLC×´Ì¬Óò
0465 7400           2202             MOV     A,#00H                                          ;LLC×´Ì¬Óò
                    2203                     ;MOVX   @R0,A
0467 758301         2204             MOV     DPH,#1 
046A 8882           2205             MOV     DPL,R0 
046C F0             2206             MOVX    @DPTR,A                                 
                    2207             
046D 08             2208             INC     R0                                              ;×Ö¶Î×ÖÍ·
046E 7900     F     2209             MOV     R1,#DATA_RXBUF + 6                              ;×Ö¶Î×ÖÍ·
                    2210             
                    2211     ;**********************************************************************
                    2212     ;ÃèÊö:"DSRC_Special_ComplexSeg"  DSRC¸´ÓÃ¶Î
                    2213     ;       Getsecure & Transferchannel & SetMMI & Event ¶¼¿ÉÒÔµ÷ÓÃ±¾¶Î
                    2214     ;Íâ²¿²ÎÊ:
                    2215     ;       R1      ---     Ö¸ÏòHDLC½ÓÊÕç·³åµÄ'×Ö¶Î×ÖÍ·'Î»ÖÃ
                    2216     ;       R0      ---     Ö¸ÏòHDLC·¢ËÍç·³åµÄ'×Ö¶Î×ÖÍ·'Î»ÖÃ
                    2217     ;²½Öè:
                    2218     ;       R1[1].3 = 0£¬ÔòÎÞÐèÏìÓ¦
                    2219     ;¹æÔòÈçÏÂ£º
                    2220     ;       R0[0]                           ---     ³­R1[0]                                 ---
                                  ×Ö¶ÎÍ·
                    2221     ;       R0[1] = 10H                     ---     r1[3] = 4
                    2222     ;               ||
                    2223     ;       R0[1] = 18H                     ---     r1[3] <> 4
                    2224     
                    2225     ;       R0[2]                           ---     ³­R1[2]                                 ---
                                  Dsrc-Did
                    2226     
                    2227     ;       R0[3](15H)                      ---     R1.[3] = 0 (GetSecure)                  ---
                                  Channel.response
                    2228     ;               ||
                    2229     ;       R0[3](19H)                      ---     R1.[3] = 3 (TransferChannel)
                    2230     ;               ||
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    37

                    2231     ;       R0[3](1BH)                      ---     R1.[3] = 4 (setmmi)
                    2232     
                    2233     ;       R0[4]                           ---     ³­R1.[6] »òR1.[6]+8¡£¸ù¾ÝR1.[1].4¾ö¶¨   ---
                                  FID  (GetSecure)
                    2234     ;               ||
                    2235     ;       R0[4]                           ---     ³­R1.[5]                                ---
                                  ChannelID (TransferChannel)
                    2236     ;               ||
                    2237     ;       R0[4]                           ---     0 (RET)(SetMMI)
                    2238     ;·µ»ØÖµ£º
                    2239     ;       BIT_KEY                         ---     ¼ÇÂ¼·Ç¹ã²¥µØÖ·ÖÐ 'fill' R1[5] »ò R1[5+8] µÚ
                             7Î» ¡®keyedForEncrypt¡¯µÄÖµ£¬(±íÊ¾ÊÇ·ñ´æÔÚ¼ÓÃÜË÷ÒºÅ)
                    2240     ;       BIT_ACCESS                      ---     ¼ÇÂ¼·Ç¹ã²¥µØÖ·ÖÐ 'ACTION.request R1[1] 'µÚÈ
                             Î» ¡®accessCredentials¡¯µÄÖµ£¬±íÊ¾ÊÇ·ñ´æÔÚ'·ÃÎÊÐí¿ÉÂë'
                    2241     ;**********************************************************************         
0470                2242     SEG_DSRCSpecial_ComplexSeg:
                    2243             
0470 09             2244             INC     R1                              ;R1[1]
0471 E7             2245             MOV     A,@R1
                    2246             ;---JNB ACC.2,DSRC_Special_Over         ;Paramter=0,ÔòÎÞÐèÏìÓ¦
0472 20E203         2247             JB      ACC.2,DSRCSpecial_ComplexSegSpecialZZ
0475 020000   F     2248             JMP     DSRC_Special_Over
0478                2249     DSRCSpecial_ComplexSegSpecialZZ:
                    2250             
                    2251             ;×Ö¶ÎÍ·
0478 19             2252             DEC     R1                              ;R1[0]
0479 E7             2253             MOV     A,@R1                           
                    2254                     ;MOVX   @R0,A
047A 758301         2255             MOV     DPH,#1 
047D 8882           2256             MOV     DPL,R0 
047F F0             2257             MOVX    @DPTR,A                         ;R0[0]
                    2258             
                    2259             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0480 09             2260             inc     r1
0481 09             2261             inc     r1
0482 09             2262             inc     r1
0483 E7             2263             mov     a,@r1   
                    2264     ;call   _fun_test_display
0484 6451           2265             xrl     a,#81
0486 7006           2266             jnz     DSRC_Special_zclc
0488 19             2267             dec     r1      ;01
0489 19             2268             dec     r1      ;05
048A 08             2269             inc     r0
048B 020000   F     2270             jmp     DSRC_Special_SWGSM
048E                2271     DSRC_Special_zclc:
048E 19             2272             dec     r1
048F 19             2273             dec     r1
0490 19             2274             dec     r1
                    2275             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    
                    2276             
                    2277             ;¼ÇÂ¼ AccessCredentials 
0491 09             2278             INC     R1                              ;R1[1]
0492 E7             2279             MOV     A,@R1
0493 A2E3           2280             MOV     C,ACC.3
0495 9200     F     2281             MOV     BIT_ACCESS,C
                    2282             
                    2283             ;È¡ActionTypeµÄÖµ
0497 09             2284             INC     R1                              ;R1[2]
0498 09             2285             INC     R1                              ;R1[3]
0499 E7             2286             MOV     A,@R1
049A FF             2287             MOV     R7,A
                    2288             
                    2289             ;--- ACTION.REQUEST ---
049B 08             2290             INC     R0                              ;R0[1]
049C BF040A         2291             CJNE    R7,#4,DSRC_Special_ACTIONOther
049F                2292     DSRC_Special_ACTIONSetMMI:
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    38

                    2293             ;--- MOV        A,#10H  
049F 7418           2294             MOV     A,#18H
                    2295                     ;MOVX   @R0,A
04A1 758301         2296             MOV     DPH,#1 
04A4 8882           2297             MOV     DPL,R0 
04A6 F0             2298             MOVX    @DPTR,A
04A7 8008           2299             JMP     DSRC_Special_ACTIONOVER
04A9                2300     DSRC_Special_ACTIONOther:       
04A9 7418           2301             MOV     A,#18H
                    2302                     ;MOVX   @R0,A
04AB 758301         2303             MOV     DPH,#1 
04AE 8882           2304             MOV     DPL,R0 
04B0 F0             2305             MOVX    @DPTR,A
04B1                2306     DSRC_Special_ACTIONOVER:
                    2307     
                    2308             ;Dsrc-Did
04B1 08             2309             INC     R0                              ;R0[2]
04B2 19             2310             DEC     R1                              ;R1[2]
04B3 E7             2311             MOV     A,@R1
                    2312                     ;MOVX   @R0,A
04B4 758301         2313             MOV     DPH,#1 
04B7 8882           2314             MOV     DPL,R0 
04B9 F0             2315             MOVX    @DPTR,A
                    2316             
                    2317             ;Channel.response
04BA 08             2318             INC     R0                              ;R0[3]
04BB BF000A         2319             CJNE    R7,#0,DSRC_Special_ChannelTransferChannel
04BE                2320     DSRC_Special_ChannelGetSecure:
04BE 7415           2321             MOV     A,#15H
                    2322                     ;MOVX   @R0,A
04C0 758301         2323             MOV     DPH,#1 
04C3 8882           2324             MOV     DPL,R0 
04C5 F0             2325             MOVX    @DPTR,A
04C6 8015           2326             JMP     DSRC_Special_ChannelOver
04C8                2327     DSRC_Special_ChannelTransferChannel:    
04C8 BF030A         2328             CJNE    R7,#3,DSRC_Special_ChannelSetMMI
04CB 7419           2329             MOV     A,#19H
                    2330                     ;MOVX   @R0,A
04CD 758301         2331             MOV     DPH,#1 
04D0 8882           2332             MOV     DPL,R0 
04D2 F0             2333             MOVX    @DPTR,A
04D3 8008           2334             JMP     DSRC_Special_ChannelOver        
04D5                2335     DSRC_Special_ChannelSetMMI:
04D5 741B           2336             MOV     A,#1BH
                    2337                     ;MOVX   @R0,A
04D7 758301         2338             MOV     DPH,#1 
04DA 8882           2339             MOV     DPL,R0 
04DC F0             2340             MOVX    @DPTR,A
04DD                2341     DSRC_Special_ChannelOver:
                    2342     
                    2343             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2344             ;MOV    A,r7
                    2345             ;CALL   _FUN_TEST_DISPLAY
                    2346             ;JMP    SEG_DSRC_GETSendBufLen
                    2347             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~           
                    2348             
                    2349             ;Èç¹ûÊÇGetsecure ¼ÇÂ¼r1[5]µÄÖµ£¬Èç¹ûÊÇTransferChannel£¬Ôò½«ChannelIDµÄÖµ¸ø·¢ËÍ,Èç¹û
                             ÊÇSetMMIÔò¸ø0        
04DD 09             2350             INC     R1                              ;R1[3]
04DE 09             2351             INC     R1                              ;R1[4]
04DF 09             2352             INC     R1                              ;R1[5]
04E0 08             2353             INC     R0                              ;R0[4]
                    2354             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2355             ;MOV    A,R7
                    2356             ;JMP    _FUN_TEST_DISPLAY
                    2357             ;JMP    SEG_DSRC_GETSendBufLen
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    39

                    2358             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~                   
                    2359     
04E1 BF001A         2360             CJNE    R7,#0,DSRC_Special_IDTransferChannel
04E4                2361     DSRC_Special_IDGetSecure:       ;ÈÏÖ¤Ö¸Áî
                    2362             ;INC    R1                                              ;R1[6]          
                    2363             ;MOV    A,@R1
                    2364             
                    2365             ;INC    R1                                              ;R1[7] Offset_H & ·ÃÎÊÐí¿ÉÂ
                             ë
04E4 300004   F     2366             JNB     BIT_ACCESS,DSRC_Special_IDGetSecureACCES        ;²»´æÔÚ·ÃÎÊÐí¿ÉÂë       
                    2367                     
                    2368             ;´æÔÚ·ÃÎÊÐí¿ÉÂë
04E7 E9             2369             MOV     A,R1
04E8 2408           2370             ADD     A,#8
04EA F9             2371             MOV     R1,A
04EB                2372     DSRC_Special_IDGetSecureACCES:
04EB 87E0           2373             MOV     ACC,@R1
04ED A2E7           2374             MOV     C,ACC.7
04EF 9200     F     2375             MOV     BIT_KEY,C
                    2376     
04F1 09             2377             INC     R1                              ;R1[6] & R1[6+8]
04F2 E7             2378             MOV     A,@R1
                    2379                     ;MOVX   @R0,A
04F3 758301         2380             MOV     DPH,#1 
04F6 8882           2381             MOV     DPL,R0 
04F8 F0             2382             MOVX    @DPTR,A
04F9 09             2383             INC     R1                              ;R1[7] & R1[6+8]   Offset_H & ·ÃÎÊÐí¿ÉÂë
04FA 08             2384             INC     R0                              ;R0[5] ESAM·µ»ØµÄ¼ÓÃÜÊ¾Ý
                    2385             
                    2386             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2387             ;MOV    A,@R1
                    2388             ;JMP    _FUN_TEST_DISPLAY
                    2389             ;JMP    SEG_DSRC_GETSendBufLen
                    2390             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    2391             ;---JMP DSRC_GetSecure_ReadVehicleInfo
04FB 020000   F     2392             JMP     SEG_DSRC_GetSecure
                    2393     ;****************************************************   
                    2394             ;-- Í¨µÀÖ¸Áî ---
04FE                2395     DSRC_Special_IDTransferChannel: ;Í¨µÀÖ¸Áî
                    2396             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2397             ;MOV    A,R7
                    2398             ;JMP    _FUN_TEST_DISPLAY
                    2399             ;JMP    SEG_DSRC_GETSendBufLen
                    2400             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~   
04FE BF0340         2401             CJNE    R7,#3,DSRC_Special_IDSetMMI
                    2402             ;¼ÇÂ¼ChannelID  
0501 E7             2403             MOV     A,@R1                           ;R1[5]
                    2404     
                    2405     
                    2406             ;call   _fun_test_display
0502                2407     DSRC_Special_ChannelOBU:;OBUÖ¸Áî
0502 B4000B         2408             CJNE    A,#0,DSRC_Special_ChannelICC
                    2409             
                    2410                     ;MOVX   @R0,A
0505 758301         2411             MOV     DPH,#1 
0508 8882           2412             MOV     DPL,R0 
050A F0             2413             MOVX    @DPTR,A
050B 08             2414             INC     R0                              ;R0[5]  ×Ü¶ÎÊ
050C 09             2415             INC     R1                              ;R1[6]  ×Ü¶ÎÊ   
                    2416             
050D 020000   F     2417             JMP     SEG_DSRC_TransferChannelOBU
0510                2418     DSRC_Special_ChannelICC:;Channelid = ICC
0510 B40104         2419             CJNE    A,#1,DSRC_Special_ChannelESAM
                    2420             
0513 D200     F     2421             SETB    BIT_ESAMICC
0515 801F           2422             JMP     DSRC_Special_ChannelIDOver
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    40

                    2423             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2424             ;MOV    A,#12
                    2425             ;CALL   _FUN_TEST_DISPLAY
                    2426             ;JMP    SEG_DSRC_GETSendBufLen
                    2427             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~           
                    2428             
0517                2429     DSRC_Special_ChannelESAM:       ;Channelid = ICC
0517 B40204         2430             CJNE    A,#2,DSRC_Special_ChannelPower;DSRC_Special_ChannelOther
051A C200     F     2431             CLR     BIT_ESAMICC
051C 8018           2432             JMP     DSRC_Special_ChannelIDOver
                    2433             
                    2434             
                    2435             
051E                2436     DSRC_Special_ChannelPower:      ;Channelid = Power
051E B4AA0B         2437             CJNE    A,#0aah,DSRC_Special_ChannelOther
                    2438                     ;MOVX   @R0,A
0521 758301         2439             MOV     DPH,#1 
0524 8882           2440             MOV     DPL,R0 
0526 F0             2441             MOVX    @DPTR,A
0527 08             2442             INC     R0                              ;R0[5]  ×Ü¶ÎÊ
0528 09             2443             INC     R1                              ;R1[6]  ×Ü¶ÎÊ
                    2444             
                    2445             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2446             ;MOV    A,#12
                    2447             ;CALL   _FUN_TEST_DISPLAY
                    2448             ;JMP    SEG_DSRC_GETSendBufLen
                    2449             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~           
                    2450             
0529 020000   F     2451             JMP     SEG_DSRC_Power
                    2452     
052C                2453     DSRC_Special_ChannelOther:      ;ÆäËüchannelid,³ICC ºÍESAMµÄÆäËüChannelÔÝ²»×ö´¦Àí
                    2454                     ;MOVX   @R0,A
052C 758301         2455             MOV     DPH,#1 
052F 8882           2456             MOV     DPL,R0 
0531 F0             2457             MOVX    @DPTR,A
0532 08             2458             INC     R0
0533 020000   F     2459             JMP     DSRC_Special_Over       
0536                2460     DSRC_Special_ChannelIDOver:
                    2461     
                    2462                     ;MOVX   @R0,A
0536 758301         2463             MOV     DPH,#1 
0539 8882           2464             MOV     DPL,R0 
053B F0             2465             MOVX    @DPTR,A
053C 08             2466             INC     R0                              ;R0[5]  ×Ü¶ÎÊ
053D 09             2467             INC     R1                              ;R1[6]  ×Ü¶ÎÊ   
                    2468             
                    2469             ;~~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~~~
                    2470             ;MOV    A,#12
                    2471             ;CALL   _FUN_TEST_DISPLAY
                    2472             ;JMP    SEG_DSRC_GETSendBufLen
                    2473             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~   
                    2474             
053E 020000   F     2475             JMP     SEG_DSRC_TransferChannel
                    2476     ;****************************************************
                    2477             ;--- ÏìÁåÖ¸Áî ---
0541                2478     DSRC_Special_IDSetMMI:                          ;ÏìÁåÖ¸Áî
                    2479             ;CJNE   R7,#4,DSRC_Special_IDSetMMI
0541 E4             2480             CLR     A
                    2481                     ;MOVX   @R0,A
0542 758301         2482             MOV     DPH,#1 
0545 8882           2483             MOV     DPL,R0 
0547 F0             2484             MOVX    @DPTR,A
0548 08             2485             INC     R0                              ;RET
                    2486             ;~~~~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~~~~~~~
                    2487             ;MOV    A,#37
                    2488             ;CALL   _FUN_TEST_DISPLAY
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    41

                    2489             ;JMP    SEG_DSRC_GETSendBufLen
                    2490             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0549 D200     F     2491             SETB    BIT_SETMMI                      ;ÉèÖÃ½ÓÊÕµ½SetMMIµÄ±ê¼Ç 
054B 020000   F     2492             JMP     DSRC_Special_Over               ;½áÊø
                    2493             ;jmp    SEG_DSRC_GETSendBufLen
                    2494             
054E                2495     DSRC_Special_SWGSM:                             ;¿ª¹ØGSMÖ¸Áî
                    2496             ;CJNE   R7,#81,DSRC_Special_OverSWGSM
                    2497             ;r1     ---     ACTION.request
                    2498             ;r0     ---     05
                    2499             
054E E7             2500             mov     a,@r1   ;05
054F 7410           2501             mov     a,#10h
                    2502                     ;MOVX   @R0,A
0551 758301         2503             MOV     DPH,#1 
0554 8882           2504             MOV     DPL,R0 
0556 F0             2505             MOVX    @DPTR,A
0557 09             2506             inc     r1
0558 08             2507             inc     r0
                    2508             
0559 E7             2509             mov     a,@r1   ;01
                    2510                     ;MOVX   @R0,A
055A 758301         2511             MOV     DPH,#1 
055D 8882           2512             MOV     DPL,R0 
055F F0             2513             MOVX    @DPTR,A
0560 09             2514             inc     r1
                    2515             
                    2516     ;       inc     r0      
                    2517     ;       mov     a,@r1   ;81
                    2518             
0561 09             2519             inc     r1      ;gsm ¿ØÖÆ
                    2520             
                    2521             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    2522             ;mov    a,@r1
                    2523             ;call   _fun_test_display
                    2524             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~   
0562 E7             2525             mov     a,@r1
0563 F5F0           2526             mov     b,a
0565 08             2527             inc     r0      ;ret
                    2528             
0566 E4             2529             clr     a
                    2530                     ;MOVX   @R0,A
0567 758301         2531             MOV     DPH,#1 
056A 8882           2532             MOV     DPL,R0 
056C F0             2533             MOVX    @DPTR,A
                    2534             
056D 09             2535             inc     r1
056E 08             2536             inc     r0
                    2537             
056F C001           2538             push    ar1
0571 C000           2539             push    ar0
                    2540             
0573 E5F0           2541             MOV     A,B
0575 6402           2542             XRL     A,#2
0577 6002           2543             JZ      DSRC_Special_output
0579 8075           2544             JMP     DSRC_Special_input
                    2545             
                    2546     ;=2 ³ö¿Ú
                    2547     ;               1.Çå GSM 0020
                    2548     ;               2.Çå¿¨Æ¬ 0020
                    2549     ;               3.½ûÖ¹ RTC£¬¹Ø GSM £¬¹Ø 
057B                2550     DSRC_Special_output:
                    2551             
057B 75836C         2552             MOV     DPH,#CONST_FLASH_Sys0020H
057E 758200         2553             MOV     DPL,#CONST_FLASH_Sys0020L
0581 7B01           2554             MOV     R3,#1
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    42

0583 120000   F     2555             CALL    _eraseflash
                    2556             
0586 75836A         2557             MOV     DPH,#CONST_FLASH_Sys0020numH
0589 758200         2558             MOV     DPL,#CONST_FLASH_Sys0020numL
058C 7B01           2559             MOV     R3,#1
058E 120000   F     2560             CALL    _eraseflash
                    2561             
0591 E4             2562             CLR     A
0592 7800     F     2563             MOV     R0,#XDATA_HOLD
                    2564                     ;MOVX   @R0,A
0594 758301         2565             MOV     DPH,#1 
0597 8882           2566             MOV     DPL,R0 
0599 F0             2567             MOVX    @DPTR,A
059A 08             2568             INC     R0
                    2569                     ;MOVX   @R0,A
059B 758301         2570             MOV     DPH,#1 
059E 8882           2571             MOV     DPL,R0 
05A0 F0             2572             MOVX    @DPTR,A
05A1 75836A         2573             MOV     DPH,#CONST_FLASH_Sys0020numH
05A4 758200         2574             MOV     DPL,#CONST_FLASH_Sys0020numL
05A7 7F00     F     2575             MOV     R7,#XDATA_HOLD
05A9 7B02           2576             MOV     R3,#2
05AB 120000   F     2577             CALL    _wrflashxr
                    2578             
05AE                2579     DSRC_Special_ClearCard:
                    2580             
                    2581             ;2.ÔòÇå¿¨Æ¬ ×ÜÊ 0020
                    2582             ;SETB   BIT_GETRESULT
                    2583             ;SETB   BIT_ESAMICC
                    2584             ;MOV    R7,#DATA_RXBUF+90
                    2585             ;MOV    R5,#XDATA_TXBUF+90
                    2586             ;MOV    R3,#10
                    2587             ;MOV    R2,#01
                    2588             ;CALL   _FUN_CARDAPP_SelectFile
                    2589             
                    2590             ;mov    A,R7
                    2591             ;CALL   _fun_test_display
                    2592             
05AE C200     F     2593             CLR     BIT_GETRESULT
05B0 D200     F     2594             SETB    BIT_ESAMICC
05B2 7F00     F     2595             MOV     R7,#DATA_RXBUF+90
05B4 7D00     F     2596             MOV     R5,#XDATA_TXBUF+50
05B6 7B10           2597             MOV     R3,#10H
05B8 7A01           2598             MOV     R2,#01H
05BA 120000   F     2599             CALL    _FUN_CARDAPP_SelectFile
05BD EF             2600             MOV     A,R7
                    2601             
                    2602     ;       2.ÔòÇå¿¨Æ¬ ×ÜÊ 0020
05BE D200     F     2603             SETB    BIT_GETRESULT
05C0 D200     F     2604             SETB    BIT_ESAMICC
05C2 7F00     F     2605             MOV     R7,#DATA_RXBUF+90
05C4 7D00     F     2606             MOV     R5,#XDATA_TXBUF+90
05C6 7B00           2607             MOV     R3,#const_cellfile_H
05C8 7A09           2608             MOV     R2,#const_cellfile_L
05CA 120000   F     2609             CALL    _FUN_CARDAPP_SelectFile
                    2610                     
                    2611             ;mov    A,R7
                    2612             ;CALL   _fun_test_display
                    2613                     
05CD D200     F     2614             SETB    BIT_GETRESULT
05CF D200     F     2615             SETB    BIT_ESAMICC
                    2616             
05D1 7B0C           2617             MOV     R3,#12  
05D3 7800     F     2618             MOV     R0,#DATA_RXBUF+90+5
05D5 E4             2619             CLR     A
05D6                2620     DSRC_Special_Card0020init:
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    43

05D6 F6             2621             MOV     @R0,a   
05D7 08             2622             INC     R0
05D8 DBFC           2623             DJNZ    R3,DSRC_Special_Card0020init
                    2624             
05DA 7F00     F     2625             MOV     R7,#DATA_RXBUF+90
05DC 7D00     F     2626             MOV     R5,#XDATA_TXBUF+90      
05DE 7C00           2627             MOV     R4,#00
05E0 7B00           2628             MOV     R3,#00
05E2 7A0C           2629             MOV     R2,#12                                  ;02H
05E4 120000   F     2630             CALL    _FUN_CARDAPP_UpdateBinary       
05E7 EF             2631             MOV     A,R7
                    2632             
                    2633             ;MOV    A,R7
                    2634             ;CALL   _fun_test_display
05E8 7003           2635             JNZ     DSRC_Special_DisableRTC
                    2636             ;3.½ûÖ¹RTC£¬¹ØGSM¹Ø
05EA 120000   F     2637             CALL    _Fun_GSM_RTCDis
                    2638             
                    2639             ;SETB   BIT_BUFADDR
                    2640             ;MOV    R7,#XDATA_TXBUF+90
                    2641             ;MOV    DPTR,#STR_GSM_CRR
                    2642             ;---CALL        _Fun_GSM_Audio\
                    2643             
05ED                2644     DSRC_Special_DisableRTC:
                    2645             
                    2646             ;¹Ø GSM µÄµçÔ´(Ò½Å´¶¨)
                    2647             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    2648             ;MOV    DPH,#CONST_FLASH_Sys0020numH
                    2649             ;MOV    DPL,#CONST_FLASH_Sys0020numL
                    2650             ;MOV    R7,#XDATA_HOLD
                    2651             ;MOV    R3,#2
                    2652             ;CALL   _rdflashxr
                    2653             
                    2654             ;SETB   BIT_BUFADDR
                    2655             ;MOV    R7,#XDATA_HOLD
                    2656             ;MOV    R3,#2
                    2657             ;CALL   _FUN_TEST_UARTDISPLAY
                    2658             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
05ED 020000   F     2659             JMP     DSRC_Special_OverSWGSM  ;½áÊø
                    2660             
                    2661     ;=1 Èë¿Ú
05F0                2662     DSRC_Special_input:             
                    2663             
                    2664     ;DSRC_Special_0019NOEaualOBU:   ;0019Óëobu 0020²»ÏàÍ¬
                    2665             
05F0 746C           2666             MOV     A,#CONST_FLASH_Sys0020H
05F2 7B06           2667             MOV     R3,#6
05F4                2668     DSRC_Special_0019NOEaualOBUlooper:
                    2669             
                    2670             ; ²Á³ flash
05F4 C0E0           2671             PUSH    ACC
05F6 C003           2672             PUSH    AR3
                    2673             
05F8 F583           2674             MOV     DPH,A
05FA 758200         2675             MOV     DPL,#CONST_FLASH_Sys0020L
05FD 7B01           2676             MOV     R3,#1
05FF 120000   F     2677             CALL    _eraseflash
                    2678             
0602 D003           2679             POP     AR3
0604 D0E0           2680             POP     ACC
                    2681             
0606 04             2682             INC     A
0607 DBEB           2683             DJNZ    R3,DSRC_Special_0019NOEaualOBUlooper
                    2684             
0609 C200     F     2685             clr     BIT_GETRESULT
060B D200     F     2686             SETB    BIT_ESAMICC
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    44

060D 7F00     F     2687             MOV     R7,#DATA_RXBUF+90
060F 7D00     F     2688             MOV     R5,#XDATA_TXBUF+50
0611 7B10           2689             MOV     R3,#10H
0613 7A01           2690             MOV     R2,#01H
0615 120000   F     2691             CALL    _FUN_CARDAPP_SelectFile
0618 EF             2692             MOV     A,R7
                    2693             
                    2694             ;¶Á 0019
0619 D200     F     2695             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
061B D200     F     2696             SETB    BIT_GETRESULT   
061D 7F00     F     2697             MOV     R7,#DATA_RXBUF+90                                               ;R7        
                                  ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
061F 7D00     F     2698             MOV     R5,#XDATA_TXBUF+50                      
0621 7C19           2699             MOV     R4,#19H                                                 ;R4             ---
                                  ÎÄ¼þID
0623 7A01           2700             MOV     R2,#1
0625 7B3C           2701             MOV     R3,#CONST_Flash_0019Len                                 ;R3             ---
                                  ³¤¶È
0627 120000   F     2702             CALL    _FUN_CARDAPP_ReadRecord 
                    2703             
062A 7F00     F     2704             MOV     r7,#XDATA_TXBUF+50+3
062C 7D00     F     2705             MOV     r5,#XDATA_HOLD+1
062E 7B09           2706             MOV     r3,#9
0630 120000   F     2707             CALL    _FUN_LIB_XDATATOXDATA
                    2708             
                    2709             ;1.µ¼Èë 0019 µÄ Èë¿ÚÊ±¼ä¼°Èë¿ÚµØµãµ½obu 0020    
                    2710             ;0020
0633 7800     F     2711             mov     r0,#XDATA_HOLD
0635 7402           2712             mov     a,#CONST_LHX_FLAG
                    2713                     ;MOVX   @R0,A
0637 758301         2714             MOV     DPH,#1 
063A 8882           2715             MOV     DPL,R0 
063C F0             2716             MOVX    @DPTR,A
063D 75836C         2717             MOV     DPH,#CONST_FLASH_Sys0020H
0640 758203         2718             MOV     DPL,#CONST_FLASH_Sys0020L+3
0643 7F00     F     2719             MOV     R7,#XDATA_HOLD
0645 7B0A           2720             MOV     R3,#10;9
0647 120000   F     2721             CALL    _wrflashxr      
                    2722             
                    2723             ;2.µ¼Èë 0019 µÄ Èë¿ÚÊ±¼ä¼°Èë¿ÚµØµãµ½card 0020
064A D200     F     2724             SETB    BIT_GETRESULT
064C D200     F     2725             SETB    BIT_ESAMICC
064E 7F00     F     2726             MOV     R7,#DATA_RXBUF+90
0650 7D00     F     2727             MOV     R5,#XDATA_TXBUF+50
0652 7B00           2728             MOV     R3,#const_cellfile_H
0654 7A09           2729             MOV     R2,#const_cellfile_L
0656 120000   F     2730             CALL    _FUN_CARDAPP_SelectFile
                    2731             
                    2732             ;MOV    A,R7
                    2733             ;CALL   _fun_test_display
                    2734             
0659 D200     F     2735             SETB    BIT_GETRESULT
065B D200     F     2736             SETB    BIT_ESAMICC
                    2737             
065D E4             2738             CLR     A
065E 7800     F     2739             mov     R0,#DATA_RXBUF+90+5
0660 F6             2740             mov     @r0,a
0661 08             2741             inc     r0
0662 F6             2742             mov     @r0,a
0663 08             2743             inc     r0
                    2744             
0664 7F00     F     2745             MOV     r7,#XDATA_HOLD
0666 7D00     F     2746             MOV     r5,#DATA_RXBUF+90+5+2
0668 7B0A           2747             MOV     r3,#10;9
066A 120000   F     2748             CALL    _FUN_LIB_XDATATODATA
                    2749             
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    45

066D 7F00     F     2750             MOV     R7,#DATA_RXBUF+90
066F 7D00     F     2751             MOV     R5,#XDATA_TXBUF+50
0671 7C00           2752             MOV     R4,#00
                    2753             ;---MOV R3,#02
0673 7B00           2754             MOV     R3,#00
                    2755             ;MOV    R2,#09
0675 7A0C           2756             MOV     R2,#12;11
0677 120000   F     2757             CALL    _FUN_CARDAPP_UpdateBinary
067A EF             2758             MOV     A,R7
                    2759             
                    2760             
                    2761             ;3.½áÊøÁ÷³Ì
                    2762     ;       SETB    BIT_BUFADDR
                    2763     ;       MOV     R7,#XDATA_TXBUF+50
                    2764     ;       MOV     DPTR,#STR_GSM_SRR
                    2765     ;       CALL    _Fun_GSM_Audio  
                    2766     
                    2767             ;¿ªÆô GSM
067B 120000   F     2768             CALL    _Fun_GSM_RTCEn
                    2769             ;JMP    DSRC_Special_OverSWGSM
                    2770             
067E                2771     DSRC_Special_OverSWGSM:
                    2772             
067E D000           2773             pop     ar0
0680 D001           2774             pop     ar1
                    2775             
0682                2776     DSRC_Special_Over:
                    2777             
0682 020000   F     2778             JMP     SEG_DSRC_GETSendBufLen                          ;¼ÆËã²¢±£´æHDLC·¢ËÍç·³å×Ü³¤
                             ¶È£¬´ËÊ±R0ÐèÖ¸ÏòÊ¾ÝºóÒ»¸ö×Ö½Ú        
                    2779     ;--------------------------------------------------------------------------
                    2780     ;ÃèÊö:;GETSECUREÅäÖÃº¯Ê
                    2781     ;Íâ²¿²ÎÊ
                    2782     ;       BIT_KEY         ---     ¼ÇÂ¼·Ç¹ã²¥µØÖ·ÖÐ 'fill'µÚ7Î» ¡®keyedForEncrypt¡¯µÄÖµ£¬(±íÊ¾
                             ÊÇ·ñ´æÔÚ¼ÓÃÜË÷ÒºÅ)
                    2783     ;       BIT_ACCESS      ---     ¼ÇÂ¼·Ç¹ã²¥µØÖ·ÖÐ 'ACTION.request'µÚÈÎ» ¡®accessCredentials¡
                             ¯µÄÖµ£¬±íÊ¾ÊÇ·ñ´æÔÚ'·ÃÎÊÐí¿ÉÂë'
                    2784     ;       R0              ---     Ö¸Ïò½«Òª·µ»Ø³µÁ¾ÐÅÏ¢µÄÍâ´æ
                    2785     ;       R1              ---     Ö¸Ïò  Offset_H ²Ù×÷Ê¾ÝÆðÊ¼Î»ÖÃ
                    2786     ;·µ»ØÖµ
                    2787     ;--------------------------------------------------------------------------     
0685                2788     SEG_DSRC_GetSecure:     
                    2789             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2790             ;MOV    A,R2
                    2791             ;mov    a,#13
                    2792             ;JMP    _FUN_TEST_DISPLAY
                    2793             ;~~~~~~~~~~~~~~~~~~~~~~~
                    2794             ;--- ´ÓESAM¿¨ÖÐ¶ÁÈ¡³µÁ¾ÐÅÏ¢ÎÄ¼þ ---
                    2795             ;ÃèÊö:¶Á³µÁ¾ÐÅÏ¢ÎÄ¼þ(×¨ÓÃÖ¸Áî)
                    2796             ;00 + B4 + Offset_H + Offset_L + Random(8 Byte) + ReadLen(XXX Byte) + KeyID(1 Byte)
                                  
                    2797             ;Offset_H + Offset_L + Len + Random + Key       
                    2798             ;~~~~~~~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~~~~~~~~~~
                    2799             ;MOV    A,#17
                    2800             ;MOV    R0,#DATA_RXBUF+15+9
                    2801             ;MOV    A,@R0
                    2802             ;JMP    _FUN_TEST_DISPLAY
                    2803             ;00 B4 00 00 0A Random(8 Byte) Len  keyID
                    2804             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~     
                    2805             ;MOV    R1,#DATA_RXBUF + 13
                    2806             ;INC    R1              ;Offset_H
0685 30004E   F     2807             JNB     BIT_ESAMOK,DSRC_GetSecure_Right 
0688 19             2808             DEC     R1              ;Fill
0689 19             2809             DEC     R1              ;Contain        
068A C001           2810             PUSH    AR1             ;FILL
                    2811             ;---MOV A,@R1
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    46

                    2812             ;---MOV C,ACC.7
                    2813             ;---MOV BIT_ACCESS,C    ;¼ÇÂ¼ GetSecure Ö¸ÁîÖÐÊÇ·ñ°üÀ¨ÓÐ [ ¼ÓÃÜÃÜÔ¿Ë÷ÒºÅ£¨¿ÉÑ¡£©]
                    2814             
068C 7700           2815             MOV     @R1,#00         ;Contain
068E 09             2816             INC     R1              ;Fill
068F 77B4           2817             MOV     @R1,#0B4H       ;
0691 09             2818             INC     R1              ;Offset_H
0692 09             2819             INC     R1              ;Offset_L
0693 09             2820             INC     R1              ;Len
0694 E7             2821             MOV     A,@R1           ;Record Length  
0695 770A           2822             MOV     @R1,#0AH        ;VALUE = CMD LEN        
                    2823             
0697 C0E0           2824             PUSH    ACC             ;Record Length  
                    2825     
0699 E9             2826             MOV     A,R1            ;LEN
069A 2409           2827             ADD     A,#9            ;MAC KEY
069C F9             2828             MOV     R1,A
                    2829     
069D D0E0           2830             POP     ACC             ;Length
                    2831     
069F C7             2832             XCH     A,@R1           ;MAC KEY VALUE
06A0 09             2833             INC     R1              ;¼ÓÃÜÃÜÔ¿Ë÷ÒºÅ
                    2834             ;XCH    @R1,A           ;¼ÓÃÜÃÜÔ¿Ë÷ÒºÅ  »ò ÏÂÒ»¶ÎµÄ×Ö¶ÎÍ·
06A1 C7             2835             XCH     A,@R1
06A2 FA             2836             MOV     R2,A            ;±£´æ ¼ÓÃÜÃÜÔ¿Ë÷ÒºÅ »ò ÏÂÒ»¶ÎµÄ×Ö¶ÎÍ·
                    2837     
06A3 D001           2838             POP     AR1             ;FILL
                    2839     
06A5 C200     F     2840             CLR     BIT_ESAMICC
06A7 D200     F     2841             SETB    BIT_GETRESULT
06A9 850107         2842             MOV     AR7,AR1
06AC 850005         2843             MOV     AR5,AR0
06AF 75030F         2844             MOV     AR3,#0FH
                    2845     
06B2 C001           2846             PUSH    AR1
06B4 C000           2847             PUSH    AR0
06B6 C002           2848             PUSH    AR2     ;±£´æ ¼ÓÃÜÃÜÔ¿Ë÷ÒºÅ »ò ÏÂÒ»¶ÎµÄ×Ö¶ÎÍ·
                    2849             ;CALL   _FUN_Contact_Channel
06B8 120000   F     2850             CALL    _FUN_CARDAPP_CardChannel
                    2851             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2852             ;MOV    A,R3
                    2853             
                    2854             ;POP    AR2     ;±£´æ ¼ÓÃÜÃÜÔ¿Ë÷ÒºÅ »ò ÏÂÒ»¶ÎµÄ×Ö¶ÎÍ·
                    2855             ;POP    AR0
                    2856             ;POP    AR1
                    2857             
                    2858             ;MOV    A,R0
                    2859             ;ADD    A,R3
                    2860             ;MOV    R0,A
                    2861             ;DEC    R0      ;È¥µô¶Á³µÁ¾ÐÅÏ¢ÎÄ¼þµÄIC¿¨·µ»ØµÄSW12
                    2862             ;DEC    R0      
                    2863             ;mov    a,r3
                    2864             ;JMP    _FUN_TEST_DISPLAY
                    2865             ;~~~~~~~~~~~~~~~~~~~~~~~        
06BB D002           2866             POP     AR2     ;±£´æ ¼ÓÃÜÃÜÔ¿Ë÷ÒºÅ »ò ÏÂÒ»¶ÎµÄ×Ö¶ÎÍ·
06BD D000           2867             POP     AR0
06BF D001           2868             POP     AR1
                    2869             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2870             ;MOV    A,R2
                    2871             ;SETB   BIT_BUFADDR;
                    2872             ;MOV    AR7,AR0
                    2873             ;MOV    R3,#15
                    2874             ;MOV    A,#1
                    2875             ;CALL   _FUN_TEST_UARTDISPLAY
                    2876             ;MOV    a,#23
                    2877             ;mov    
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    47

                    2878             ;JMP    _FUN_TEST_DISPLAY
                    2879             ;~~~~~~~~~~~~~~~~~~~~~~~                                
                    2880                                             
                    2881             ;Æ«ÒÆ R0µ½xdata_txbufÒÑÓÐÊ¾ÝµÄºóÒ»¸ö×Ö½Ú
06C1 E8             2882             MOV     A,R0
06C2 2B             2883             ADD     A,R3
06C3 F8             2884             MOV     R0,A
06C4 18             2885             DEC     R0      ;È¥µô¶Á³µÁ¾ÐÅÏ¢ÎÄ¼þµÄIC¿¨·µ»ØµÄSW12
06C5 18             2886             DEC     R0
                    2887             
                    2888                     ;MOVX   A,@R0
06C6 758301         2889             MOV     DPH,#1
06C9 8882           2890             MOV     DPL,R0
06CB E0             2891             MOVX    A,@DPTR
                    2892             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2893             ;JMP    _FUN_TEST_DISPLAY
                    2894             ;~~~~~~~~~~~~~~~~~~~~~~~                
06CC 6490           2895             XRL     A,#90H
06CE 6006           2896             JZ      DSRC_GetSecure_Right
06D0 300003   F     2897             JNB     BIT_ESAMErr,DSRC_GetSecure_Right
                    2898             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    2899             ;MOV    A,R2
                    2900             ;SETB   BIT_BUFADDR;
                    2901             ;MOV    AR7,AR1
                    2902             ;MOV    R3,#15
                    2903             ;MOV    A,#1
                    2904             ;CALL   _FUN_TEST_UARTDISPLAY
                    2905             ;MOV    a,#23
                    2906             ;JMP    _FUN_TEST_DISPLAY
                    2907             ;~~~~~~~~~~~~~~~~~~~~~~~                
                    2908     
06D3 120000   F     2909             CALL    _FUN_LIB_ESAMErr        
06D6                2910     DSRC_GetSecure_Right:
                    2911             
                    2912             ;¼ø±ðÂë£¨8¸ö×Ö½Ú£©£¬ÔÝÊ±È«Îª0 + RET[0]
06D6 7B09           2913             MOV     R3,#9
06D8                2914     DSRC_GetSecure_JBM:
06D8 E4             2915             CLR     A
                    2916                     ;MOVX   @R0,A
06D9 758301         2917             MOV     DPH,#1 
06DC 8882           2918             MOV     DPL,R0 
06DE F0             2919             MOVX    @DPTR,A
06DF 08             2920             INC     R0
06E0 DBF6           2921             DJNZ    R3,DSRC_GetSecure_JBM   
                    2922                     
                    2923             ;Æ«ÒÆR1
06E2 E9             2924             MOV     A,R1
06E3 200008   F     2925             JB      BIT_KEY,DSRC_GetSecure_ENKey    
06E6                2926     DSRC_GetSecure_NotENKey:;GetSecure Ö¸ÁîÖÐÃ»ÓÐ '¼ÓÃÜÃÜÔ¿Ë÷ÒºÅ'
06E6 240E           2927             ADD     A,#14;15
06E8 F9             2928             MOV     R1,A
06E9 EA             2929             MOV     A,R2
                    2930             ;INC    R1
06EA F7             2931             MOV     @R1,A
06EB E9             2932             MOV     A,R1
                    2933             ;INC    A       
06EC 8002           2934             JMP     DSRC_GetSecure_ENKeyOver
06EE                2935     DSRC_GetSecure_ENKey:;GetSecure Ö¸ÁîÖÐÓÐ '¼ÓÃÜÃÜÔ¿Ë÷ÒºÅ'
06EE 240F           2936             ADD     A,#15
                    2937             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~ 
                    2938             ;MOV    A,@R1
                    2939             ;MOV    A,#15
                    2940             ;JMP    _FUN_TEST_DISPLAY
                    2941             ;~~~~~~~~~~~~~~~~~~~~~~ 
06F0                2942     DSRC_GetSecure_ENKeyOver:
06F0 F9             2943             MOV     R1,A
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    48

                    2944             
06F1                2945     DSRC_GetSecure_Over:
                    2946             
                    2947             ;ÅÐ¶ÏÊÇ·ñ»¹ÓÐºó¼Ì¶Î (HDLC½ÓÊÕ×Ü³¤-µ±Ç°³¤¶È-4) >0Ôò±íÊ¾»¹ÓÐºó¼Ì¶Î
06F1 C000           2948             PUSH    AR0
06F3 7800     F     2949             MOV     R0,#DATA_DSRCRXLEN              ;HDLC½ÓÊÕµ½µÄÊ¾Ý×Ü³¤
06F5 E6             2950             MOV     A,@R0
06F6 D000           2951             POP     AR0     
06F8 7B00     F     2952             MOV     R3,#DATA_RXBUF
06FA 2B             2953             ADD     A,R3
                    2954             
06FB C3             2955             CLR     C
06FC 9404           2956             SUBB    A,#4
                    2957             
06FE C3             2958             CLR     C
06FF 99             2959             SUBB    A,R1
                    2960             
0700 4003           2961             JC      DSRC_GetSecure_NOTNextSeg
                    2962             
0702 020000   F     2963             JMP     SEG_DSRCSpecial_ComplexSeg      ;DSRC¸´ÓÃ¶Î
0705                2964     DSRC_GetSecure_NOTNextSeg:      ;Ã»ÓÐºó¼Ì¶Î
                    2965     
0705 020000   F     2966             JMP     SEG_DSRC_GETSendBufLen ;Getseucre Segment Over
                    2967     
                    2968     ;--------------------------------------------------------------------------
                    2969     ;ÃèÊö:;SEG_DSRC_PowerÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý]
                    2970     ;Íâ²¿²ÎÊ
                    2971     ;R1     ---     ½ÓÊÕµ½µÄTransferChannelç·³å,Ö¸Ïò×Ü¶ÎÊµÄÎ»ÖÃ
                    2972     ;R0     ---     ½«Òª·¢ËÍTransferChannelÏìÓ¦
                    2973     ;ÄÚ²¿²ÎÊ:
                    2974     ;·µ»ØÖµ
                    2975     ;--------------------------------------------------------------------------     
0708                2976     SEG_DSRC_Power:
                    2977             
0708 09             2978             INC     R1      ;APDUÖ¸ÁîµÄ³¤¶È
0709 09             2979             INC     R1      ;APDUÖ¸Áî
070A 09             2980             INC     R1      ;ÏÂÒ»ÌõAPDUÖ¸ÁîµÄ³¤¶È
                    2981             
070B 7401           2982             MOV     A,#1    ;×Ü¶ÎÊ
                    2983                     ;MOVX   @R0,A
070D 758301         2984             MOV     DPH,#1 
0710 8882           2985             MOV     DPL,R0 
0712 F0             2986             MOVX    @DPTR,A
                    2987             
0713 08             2988             INC     R0      ;APDUÖ¸ÁîµÄ³¤¶È
0714 7402           2989             MOV     A,#2
                    2990                     ;MOVX   @R0,A
0716 758301         2991             MOV     DPH,#1 
0719 8882           2992             MOV     DPL,R0 
071B F0             2993             MOVX    @DPTR,A
                    2994             
                    2995             ;INC    R0      ;APDUÖ¸Áî01
                    2996             ;CLR    A
                    2997             
071C 08             2998             INC     R0      ;APDUÖ¸Áî02
071D C000           2999             PUSH    AR0
071F 7800     F     3000             MOV     R0,#XDATA_Power 
                    3001                     ;MOVX   A,@R0
0721 758301         3002             MOV     DPH,#1
0724 8882           3003             MOV     DPL,R0
0726 E0             3004             MOVX    A,@DPTR 
                    3005             ;MOV    A,#99
                    3006     
0727 75F064         3007             MOV     B,#100
072A C5F0           3008             XCH     A,B
072C C3             3009             CLR     C
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    49

072D 95F0           3010             SUBB    A,B     
072F D000           3011             POP     AR0
                    3012     
                    3013             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    3014             ;MOV    A,#12
                    3015             ;CALL   _FUN_TEST_DISPLAY
                    3016             ;JMP    SEG_DSRC_GETSendBufLen
                    3017             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~   
                    3018             
                    3019             ;MOV    A,#99
0731 75F00A         3020             MOV     B,#10
0734 84             3021             DIV     AB
0735 B40A00         3022             CJNE    A,#10,$+3
0738 4012           3023             JC      DSRC_Power_1Byte
                    3024             ;100
073A 7401           3025             MOV     A,#1
                    3026                     ;MOVX   @R0,A
073C 758301         3027             MOV     DPH,#1 
073F 8882           3028             MOV     DPL,R0 
0741 F0             3029             MOVX    @DPTR,A
0742 08             3030             INC     R0
0743 E4             3031             CLR     A
                    3032                     ;MOVX   @R0,A
0744 758301         3033             MOV     DPH,#1 
0747 8882           3034             MOV     DPL,R0 
0749 F0             3035             MOVX    @DPTR,A
074A 8015           3036             JMP     DSRC_Power_Over
074C                3037     DSRC_Power_1Byte:       
074C E4             3038             CLR     A
                    3039                     ;MOVX   @R0,A
074D 758301         3040             MOV     DPH,#1 
0750 8882           3041             MOV     DPL,R0 
0752 F0             3042             MOVX    @DPTR,A 
                    3043             
0753 08             3044             INC     R0
0754 C3             3045             CLR     C       
0755 33             3046             RLC     A
0756 33             3047             RLC     A
0757 33             3048             RLC     A
0758 33             3049             RLC     A       
0759 45F0           3050             ORL     A,B
                    3051                     ;MOVX   @R0,A
075B 758301         3052             MOV     DPH,#1 
075E 8882           3053             MOV     DPL,R0 
0760 F0             3054             MOVX    @DPTR,A 
                    3055             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    3056             ;MOV    A,#12
                    3057             ;CALL   _FUN_TEST_DISPLAY
                    3058             ;JMP    SEG_DSRC_GETSendBufLen
                    3059             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~           
0761                3060     DSRC_Power_Over:
                    3061             
                    3062             ;JNC    DSRC_Power_Per
                    3063             ;CLR    A
                    3064     ;DSRC_Power_Per:                
                    3065                     
                    3066             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    3067             ;MOV    A,#12
                    3068             ;CALL   _FUN_TEST_DISPLAY
                    3069             ;JMP    SEG_DSRC_GETSendBufLen
                    3070             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~           
0761 08             3071             INC     R0      ;ÏÂÒ»ÌõAPDUÖ¸ÁîµÄ³¤¶È
                    3072             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    3073             ;MOV    A,#12
                    3074             ;CALL   _FUN_TEST_DISPLAY
                    3075             ;JMP    SEG_DSRC_GETSendBufLen
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    50

                    3076             
                    3077             ;PUSH   AR1
                    3078             ;MOV    R1,#XDATA_Power
                    3079             
                    3080             ;INC    R1
                    3081             ;INC    R0
                    3082             
                    3083             ;INC    R1
                    3084             ;INC    R0
                    3085                     
                    3086             ;INC    R1
                    3087             ;INC    R0
                    3088             
                    3089             ;POP    AR1
                    3090             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~           
                    3091     
                    3092             ;JMP    DSRC_TransferChannel_Over
0762 020000   F     3093             JMP     DSRC_TransferChannel_LoopEnd
                    3094     
                    3095     
                    3096     ;--------------------------------------------------------------------------
                    3097     ;ÃèÊö:;TransferChannelÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý]
                    3098     ;Íâ²¿²ÎÊ
                    3099     ;R1     ---     ½ÓÊÕµ½µÄTransferChannelç·³å,Ö¸Ïò×Ü¶ÎÊµÄÎ»ÖÃ
                    3100     ;R0     ---     ½«Òª·¢ËÍTransferChannelÏìÓ¦
                    3101     ;ÄÚ²¿²ÎÊ:
                    3102     ;·µ»ØÖµ
                    3103     ;--------------------------------------------------------------------------
0765                3104     SEG_DSRC_TransferChannel:
                    3105             
                    3106             ;×Ü¶ÎÊ
0765 E7             3107             MOV     A,@R1
                    3108                     ;MOVX   @R0,A
0766 758301         3109             MOV     DPH,#1 
0769 8882           3110             MOV     DPL,R0 
076B F0             3111             MOVX    @DPTR,A
076C FC             3112             MOV     R4,A
                    3113             
                    3114             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~ 
                    3115     ;       PUSH    ar0
                    3116     ;       MOV     R0,#DATA_DSRCRXLEN
                    3117     ;       MOV     A,@R0
                    3118     ;       XRL     A,#27
                    3119     
                    3120     ;       JZ      DSRC_TransferChannel_t001
                    3121     ;       MOV     A,@R0
                    3122     ;       POP     ar0     
                    3123     ;       MOV     R0,#DATA_RXBUF+15
                    3124     ;       MOV     A,@R0
                    3125     ;       MOV     a,#13
                    3126     ;       CALL    _FUN_TEST_DISPLAY
                    3127     ;DSRC_TransferChannel_t001:
                    3128     ;       pop     ar0
                    3129     
                    3130             ;MOV    A,R3
                    3131             ;MOV    A,#31
                    3132             ;JMP    _FUN_TEST_DISPLAY
                    3133             ;INC    R0
                    3134             ;JMP    SEG_DSRC_GETSendBufLen  
                    3135     
                    3136     
                    3137     ;       JNB     BIT_ESAMICC,DSRC_TransferChannel_ESAMCard
                    3138     ;DSRC_TransferChannel_UserCard: ;ÓÃ»§¿¨
                    3139     ;       JNB     BIT_INSERTCARD,DSRC_TransferChannel_NOCARD      ;       
                    3140     ;       JMP     DSRC_TransferChannel_Card
                    3141     ;DSRC_TransferChannel_ESAMCard: ;ESAM¿¨
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    51

                    3142     ;       JNB     BIT_ESAM,DSRC_TransferChannel_NOCARD    ;       
                    3143             ;JMP    DSRC_TransferChannel_Card       
                    3144     ;DSRC_TransferChannel_CardOver:
                    3145             ;BIT_ESAM       
                    3146             
                    3147     ;       jb      BIT_ESAMICC,DSRC_TransferChannel_esamor
                    3148     ;DSRC_TransferChannel_esam:
                    3149     ;       MOV     A,#41
                    3150     ;       JMP     _FUN_TEST_DISPLAY
                    3151     ;DSRC_TransferChannel_esamor:   
                    3152     ;       jnb     BIT_INSERTCARD,DSRC_TransferChannel_haveCARDor
                    3153     ;DSRC_TransferChannel_haveCARD:
                    3154     ;       MOV     A,#42
                    3155     ;       JMP     _FUN_TEST_DISPLAY
                    3156     ;DSRC_TransferChannel_haveCARDor:
                    3157             
                    3158             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    3159             ;Ã»ÓÐ²å¿¨ ²»×ö IC ¿¨´¦Àí
076D 300027   F     3160             JNB     BIT_ESAMICC,DSRC_TransferChannel_Card   ;µ±Ç°ChannelÈç¹ûÊÇESAM¿¨£¬ÔòÃ»ÓÐ²å¿
                             ¨ÎÊÌâ
0770 200024   F     3161             JB      BIT_INSERTCARD,DSRC_TransferChannel_Card        ;
                    3162     ;***************************************************************        
                    3163             ;--- ÎÞ¿¨´¦Àí ---       
0773                3164     DSRC_TransferChannel_NOCARD:
                    3165             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~ 
                    3166             ;MOV    A,R3
                    3167             ;MOV    A,@R1
                    3168             ;MOV    A,#32
                    3169             ;JMP    _FUN_TEST_DISPLAY
                    3170             ;JMP    SEG_DSRC_GETSendBufLen
                    3171             ;CALL   _FUN_TEST_BEEP
                    3172             ;~~~~~~~~~~~~~~~~~~~~~~
0773 08             3173             INC     R0                              ;³¤¶È   
0774 09             3174             INC     R1                              ;³¤¶È   
0775                3175     DSRC_TransferChannel_NOCardLOOP:                ;ÎÞ¿¨£¬µ«RSUÓÖÒªÇó·µ»ØIC¿¨ÐÅÏ¢Ê±£¬·µ»Ø ×Ü¶Î
                             Ê + ¶Î³¤1+ ×´Ì¬Âë1(FFFF)+ ¶Î³¤2+ ×´Ì¬Âë2(FFFF)+...
                    3176             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~ 
                    3177             ;MOV    A,R3
                    3178             ;MOV    A,@R1
                    3179             ;MOV    A,#32
                    3180             ;JMP    _FUN_TEST_DISPLAY
                    3181             ;JMP    SEG_DSRC_GETSendBufLen
                    3182             ;~~~~~~~~~~~~~~~~~~~~~~
                    3183                     
0775 7402           3184             MOV     A,#2
                    3185                     ;MOVX   @R0,A
0777 758301         3186             MOV     DPH,#1 
077A 8882           3187             MOV     DPL,R0 
077C F0             3188             MOVX    @DPTR,A
077D 08             3189             INC     R0
077E 74FF           3190             MOV     A,#0FFH
                    3191                     ;MOVX   @R0,A
0780 758301         3192             MOV     DPH,#1 
0783 8882           3193             MOV     DPL,R0 
0785 F0             3194             MOVX    @DPTR,A
0786 08             3195             INC     R0
                    3196                     ;MOVX   @R0,A
0787 758301         3197             MOV     DPH,#1 
078A 8882           3198             MOV     DPL,R0 
078C F0             3199             MOVX    @DPTR,A
078D 08             3200             INC     R0
                    3201             
078E E7             3202             MOV     A,@R1
078F 29             3203             ADD     A,R1
0790 04             3204             INC     A
0791 F9             3205             MOV     R1,A
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    52

0792 DCE1           3206             DJNZ    R4,DSRC_TransferChannel_NOCardLOOP
0794 020000   F     3207             JMP     DSRC_TransferChannel_Over
                    3208             
                    3209     ;****************************************************************       
                    3210             
                    3211             ;--- ÓÐ¿¨´¦Àí ---       
0797                3212     DSRC_TransferChannel_Card:
                    3213             ;~~~~~~~~~~~~~~~µ÷ÊÔ¶Î~~~~~~~~~~~~~~~~~~
                    3214             
                    3215             ;2¡¢ÑéÖ¤Ã¿Ò»´Îr1µÄÎ»ÖÃÊÇ·ñÕÈ·
                    3216             ;3¡¢ÑéÖ¤Ã¿´ÎÏÂ·¢¸ø¿¨Æ¬º¯ÊµÄÖ¸ÁîÊÇ·ñÕÈ·
                    3217             ;MOV    A,R1
                    3218             ;XRL    A,#47
                    3219             ;JZ     TransferChannel_Card_CON
                    3220             ;CALL   _FUN_TEST_BEEP
                    3221             ;mov    a,r1
                    3222             ;JMP    _FUN_TEST_DISPLAY
                    3223     ;TransferChannel_Card_CON:
                    3224             ;1¡¢½« transferchannel Ö¸ÁîÐ´ËÀ£¬ÒÔ×ö¼ì²é
                    3225             ;05 00 84 00 00 08 
                    3226             ;push   ar1
                    3227             ;inc    r1
                    3228             ;mov    @r1,#05
                    3229             ;inc    r1
                    3230             ;mov    @r1,#00
                    3231             ;inc    r1
                    3232             ;mov    @r1,#84h
                    3233             ;inc    r1
                    3234             ;mov    @r1,#00
                    3235             ;inc    r1
                    3236             ;mov    @r1,#00
                    3237             ;inc    r1
                    3238             ;mov    @r1,#08 
                    3239             ;pop    ar1
                    3240             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0797 08             3241             INC     R0                              ;³¤¶È   
0798 09             3242             INC     R1                              ;³¤¶È   
0799                3243     DSRC_TransferChannel_CardLOOP:
0799 E7             3244             MOV     A,@R1
079A FB             3245             MOV     R3,A
                    3246             
079B 09             3247             INC     R1                              ;Ö¸ÁîÍ·
079C 08             3248             INC     R0                              ;Ö¸ÁîÍ·
                    3249             
079D 850107         3250             MOV     AR7,AR1
07A0 850005         3251             MOV     AR5,AR0
                    3252             
07A3 C004           3253             PUSH    AR4
07A5 C001           3254             PUSH    AR1
07A7 C000           3255             PUSH    AR0
                    3256             
                    3257             ;µ±ÊÇÑ¡Ä¿Â¼Ö¸ÁîÊ±£¬ÖÃÎ»BIT_GETRESULT£¬±íÖ»·µ»Ø61³¤¶È
07A9 09             3258             INC     R1
07AA E7             3259             MOV     A,@R1
                    3260             
                    3261             ;~~~~~  µ÷ÓÃ²âÊÔ¶Î  ~~~~~
                    3262             ;MOV    A,@R1
                    3263             ;JMP    _FUN_TEST_DISPLAY
                    3264             ;~~~~~~~~~~~~~~~~~~~~~~~~~
07AB 300019   F     3265             JNB     BIT_ESAMICC,DSRC_TransferChannel_ESAMSpe
07AE                3266     DSRC_TransferChannel_UserSpe:;ÓÃ»§¿¨ÌØÊâ´¦Àí
                    3267             ;µ±Ç°Ö¸Áî£¬Èç¹ûÊÇÑ¡Ä¿Â¼Ö¸Áî£¬Ôò²»×ö²Ù×÷¡£
                    3268             
07AE 64A4           3269             XRL     A,#0A4H
07B0 D200     F     3270             SETB    BIT_GETRESULT
                    3271             ;-JNZ   DSRC_TransferChannel_SpeOver
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    53

                    3272             ;---CLR BIT_GETRESULT
                    3273             
07B2 E7             3274             MOV     A,@R1
07B3 6454           3275             XRL     A,#054H
                    3276             
07B5 7034           3277             JNZ     DSRC_TransferChannel_SpeOver
                    3278             ;---CLR BIT_GETRESULT
                    3279             ;---SETB        BIT_8054_flag   
07B7 C000           3280             push    ar0
07B9 7800     F     3281             mov     r0,#XDATA_54
07BB 7455           3282             mov     a,#CONST_SYS_55
                    3283                     ;MOVX   @R0,A
07BD 758301         3284             MOV     DPH,#1 
07C0 8882           3285             MOV     DPL,R0 
07C2 F0             3286             MOVX    @DPTR,A
07C3 D000           3287             pop     ar0
                    3288             
07C5 8024           3289             JMP     DSRC_TransferChannel_SpeOver
07C7                3290     DSRC_TransferChannel_ESAMSpe:;ESAM¿¨ÌØÊâ´¦Àí
                    3291             ;~~~~~  µ÷ÓÃ²âÊÔ¶Î  ~~~~~       
                    3292             ;MOV    A,@R1
                    3293             ;mov    A,#34
                    3294             ;JMP    _FUN_TEST_DISPLAY       
                    3295             ;~~~~~~~~~~~~~~~~~~~~~~~~~      
07C7 D200     F     3296             SETB    BIT_GETRESULT
07C9 64E4           3297             XRL     A,#0E4H
07CB 7010           3298             JNZ     DSRC_TransferChannel_ESAMSpeNOADDTIME
07CD                3299     DSRC_TransferChannel_ESAMSpeADDTIME:
                    3300             ;¼Ó´óËÑË÷Ê±¼äÏÞÖÆ
07CD C000           3301             PUSH    AR0
07CF 7800     F     3302             MOV     R0,#XDATA_SOFTFIRSTSCANTIME             
07D1 74FF           3303             MOV     A,#CONST_SOFTFIRSTSCANTIMEXX            
                    3304                     ;MOVX   @R0,A
07D3 758301         3305             MOV     DPH,#1 
07D6 8882           3306             MOV     DPL,R0 
07D8 F0             3307             MOVX    @DPTR,A                                         ;´®¿ÚµÚÒ»¸ö×Ö½Ú×î´óËÑË÷Ê±¼ä
                                          
07D9 D000           3308             POP     AR0     
07DB 800E           3309             JMP     DSRC_TransferChannel_SpeOver
07DD                3310     DSRC_TransferChannel_ESAMSpeNOADDTIME:
                    3311             ;Õ³£Ê±¼äÏÞÖÆ
07DD C000           3312             PUSH    AR0                                     
07DF 7800     F     3313             MOV     R0,#XDATA_SOFTFIRSTSCANTIME             
07E1 7410           3314             MOV     A,#CONST_SOFTFIRSTSCANTIME              
                    3315                     ;MOVX   @R0,A
07E3 758301         3316             MOV     DPH,#1 
07E6 8882           3317             MOV     DPL,R0 
07E8 F0             3318             MOVX    @DPTR,A                                         ;´®¿ÚµÚÒ»¸ö×Ö½Ú×î´óËÑË÷Ê±¼ä
                                          
07E9 D000           3319             POP     AR0                                     
07EB                3320     DSRC_TransferChannel_SpeOver:
                    3321             ;JNB    BIT_ESAMICC,DSRC_TransferChannel_Result ;Èç¹ûµ±Ç°ÊÇESAM¿¨£¬ÔòÒªÈ¡·µ»ØÖµ
                    3322             
                    3323             ;~~~~~  µ÷ÓÃ²âÊÔ¶Î  ~~~~~
                    3324             ;CALL   _FUN_TESTContact_OPRET0
                    3325             ;MOV    A,r3
                    3326             ;JMP    _FUN_TEST_DISPLAY       
                    3327             ;JMP    DSRC_TransferChannel_DEALOVER   
                    3328             ;~~~~~~~~~~~~~~~~~~~~~~~~~
                    3329             
07EB                3330     DSRC_TransferChannel_Result:
                    3331             ;---CALL        _FUN_Contact_Channel
07EB 120000   F     3332             CALL    _FUN_CARDAPP_CardChannel
                    3333             
                    3334             ;mov    a,#35
                    3335             ;call   _fun_test_display       
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    54

                    3336             ;---CALL        _FUN_TESTContact_OPRET0
07EE                3337     DSRC_TransferChannel_DEALOVER:  
07EE D000           3338             POP     AR0
07F0 D001           3339             POP     AR1
07F2 D004           3340             POP     AR4
                    3341             
07F4 EB             3342             MOV     A,R3
                    3343             
                    3344             ;~~~~~  µ÷ÓÃ²âÊÔ¶Î  ~~~~~       
                    3345             ;INC    R1
                    3346             ;MOV    A,@R1
                    3347             ;XRL    A,#0DCH
                    3348             ;XRL    A,#0A4H
                    3349             ;JNZ    DSRC_TransferChannelTEST
                    3350             ;MOV    A,#121
                    3351             ;MOV    A,R3
                    3352             ;JMP    _FUN_TEST_DISPLAY
                    3353     ;DSRC_TransferChannelTEST:
                    3354     ;       DEC     R1
                    3355             ;INC    R0
                    3356             ;JMP    SEG_DSRC_GETSendBufLen
                    3357             ;~~~~~~~~~~~~~~~~~~~~~~         
                    3358             
07F5 7023           3359             JNZ     DSRC_TransferChannel_CardRight
                    3360     ;****************************************************************
07F7                3361     DSRC_TransferChannel_CardErr:                   ;Í¨µÀÖ¸ÁîÖ´ÐÐÊ§°Ü
                    3362             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~ 
                    3363             ;½«½ÓÊÕÊ¾ÝÈ«copyµ½·¢ËÍÇø
                    3364     ;       mov     a,#01
                    3365     ;       inc     a
                    3366     ;       inc     r0
                    3367     ;       inc     a
                    3368     ;       inc     r0
                    3369     ;       mov     a,#0ffh
                    3370     ;       inc     r0
                    3371     ;       inc     r0
                    3372     
                    3373     ;       push    ar0
                    3374     ;       MOV     R0,#DATA_DSRCRXLEN
                    3375     ;       MOV     A,@R0
                    3376     ;       pop     ar0
                    3377     ;       inc     r0
                    3378     ;       mov     r3,a
                    3379     ;       mov     r1,#data_rxbuf  
                    3380     ;TransferChannel_CardErr_lp:
                    3381     ;       mov     a,@r1
                    3382     ;       inc     r1
                    3383     ;       inc     r0
                    3384     ;       djnz    r3,TransferChannel_CardErr_lp
                    3385     ;       JMP     SEG_DSRC_GETSendBufLen
                    3386             ;~~~~~~~~~~~~~~~~~~~~~~
                    3387     
07F7 18             3388             DEC     R0                              ;½«R0ÍËµ½³¤¶ÈÖµ
07F8 7402           3389             MOV     A,#2
                    3390                     ;MOVX   @R0,A
07FA 758301         3391             MOV     DPH,#1 
07FD 8882           3392             MOV     DPL,R0 
07FF F0             3393             MOVX    @DPTR,A
0800 08             3394             INC     R0
0801 74FF           3395             MOV     A,#0FFH
                    3396                     ;MOVX   @R0,A
0803 758301         3397             MOV     DPH,#1 
0806 8882           3398             MOV     DPL,R0 
0808 F0             3399             MOVX    @DPTR,A
0809 08             3400             INC     R0
                    3401                     ;MOVX   @R0,A
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    55

080A 758301         3402             MOV     DPH,#1 
080D 8882           3403             MOV     DPL,R0 
080F F0             3404             MOVX    @DPTR,A
0810 08             3405             INC     R0
                    3406                     
0811 19             3407             DEC     R1                              ;³¤¶È
0812 E7             3408             MOV     A,@R1
0813 09             3409             INC     R1                              ;Ö¸ÁîÍ·
0814 29             3410             ADD     A,R1                            ;ÏÂÒ»¶ÎÖ¸ÁîµÄ³¤¶È
0815 F9             3411             MOV     R1,A
0816 DC81           3412             DJNZ    R4,DSRC_TransferChannel_CardLOOP
0818 801A           3413             JMP     DSRC_TransferChannel_LoopEnd
                    3414             
081A                3415     DSRC_TransferChannel_CardRight:                 ;Í¨µÀÖ¸ÁîÖ´ÐÐ³É¹¦
081A EB             3416             MOV     A,R3
                    3417             
081B 18             3418             DEC     R0                              ;³¤¶È
                    3419                     ;MOVX   @R0,A
081C 758301         3420             MOV     DPH,#1 
081F 8882           3421             MOV     DPL,R0 
0821 F0             3422             MOVX    @DPTR,A
0822 08             3423             INC     R0
0823 E8             3424             MOV     A,R0            
0824 2B             3425             ADD     A,R3                            
0825 F8             3426             MOV     R0,A                            ;ÏÂÒ»¶ÎÖ¸ÁîµÄ³¤¶È
                    3427             
0826 19             3428             DEC     R1                              ;³¤¶È
0827 E7             3429             MOV     A,@R1
0828 09             3430             INC     R1                              ;Ö¸ÁîÍ·
0829 29             3431             ADD     A,R1                            ;ÏÂÒ»¶ÎÖ¸ÁîµÄ³¤¶È
082A F9             3432             MOV     R1,A
                    3433             ;---DJNZ        R4,DSRC_TransferChannel_CardLOOP
082B 1C             3434             DEC     R4
                    3435             ;CJNE   R4,#0,DSRC_TransferChannel_CardLOOP
082C BC0002         3436             CJNE    R4,#0,DSRC_TransferChannel_CardRightZZ
082F 8003           3437             JMP     DSRC_TransferChannel_LoopEnd
0831                3438     DSRC_TransferChannel_CardRightZZ:;Ì«³¤ÁË£¬ÐèÒªÖÐ×ªÒ»ÏÂ  
0831 020000   F     3439             JMP     DSRC_TransferChannel_CardLOOP
0834                3440     DSRC_TransferChannel_LoopEnd:
0834 E4             3441             CLR     A                               ;Ret
                    3442                     ;MOVX   @R0,A
0835 758301         3443             MOV     DPH,#1 
0838 8882           3444             MOV     DPL,R0 
083A F0             3445             MOVX    @DPTR,A
083B 08             3446             INC     R0                              ;ÏÂÒ»¶ÎÖ¸ÁîµÄ×Ö¶ÎÍ·(Èç¹ûÓÐºó¼Ì¶ÎµÄ»°)
                    3447             
                    3448             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~ 
                    3449             ;MOV    A,R3
                    3450             ;MOV    A,@R1
                    3451             ;MOV    A,#33
                    3452             ;JMP    _FUN_TEST_DISPLAY
                    3453             ;JMP    SEG_DSRC_GETSendBufLen
                    3454             ;~~~~~~~~~~~~~~~~~~~~~~
                    3455             
083C                3456     DSRC_TransferChannel_Over:
                    3457             ;ÅÐ¶ÏÊÇ·ñ»¹ÓÐºó¼Ì¶Î (HDLC½ÓÊÕ×Ü³¤-µ±Ç°³¤¶È-4) >0Ôò±íÊ¾»¹ÓÐºó¼Ì¶Î
083C C000           3458             PUSH    AR0
083E 7800     F     3459             MOV     R0,#DATA_DSRCRXLEN              ;HDLC½ÓÊÕµ½µÄÊ¾Ý×Ü³¤
0840 E6             3460             MOV     A,@R0
0841 D000           3461             POP     AR0
0843 7B00     F     3462             MOV     R3,#DATA_RXBUF
0845 2B             3463             ADD     A,R3
                    3464             
0846 C3             3465             CLR     C
0847 9404           3466             SUBB    A,#4
                    3467             
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    56

0849 C3             3468             CLR     C
084A 99             3469             SUBB    A,R1
                    3470             
084B 4003           3471             JC      DSRC_TransferChannel_NOTNextSeg 
                    3472             
                    3473             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~ 
                    3474             ;MOV    A,R3
                    3475             ;DEC    R1
                    3476             ;DEC    R1
                    3477             ;MOV    A,@R1
                    3478             ;MOV    A,#40
                    3479             ;MOV    A,R1
                    3480             ;JMP    _FUN_TEST_DISPLAY       
                    3481             ;~~~~~~~~~~~~~~~~~~~~~~ 
084D 020000   F     3482             JMP     SEG_DSRCSpecial_ComplexSeg      ;DSRC¸´ÓÃ¶Î
0850                3483     DSRC_TransferChannel_NOTNextSeg:;Ã»ÓÐºó¼Ì¶Î
0850 8068           3484             JMP     SEG_DSRC_GETSendBufLen                          ;¼ÆËã²¢±£´æHDLC·¢ËÍç·³å×Ü³¤
                             ¶È£¬´ËÊ±R0ÐèÖ¸ÏòÊ¾ÝºóÒ»¸ö×Ö½Ú
                    3485                     
                    3486     ;--------------------------------------------------------------------------
                    3487     ;ÃèÊö:;TransferChannelOBU OBUÍ¨µÀÖ¸Áî[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý]
                    3488     ;Íâ²¿²ÎÊ
                    3489     ;R1     ---     ½ÓÊÕµ½µÄTransferChannelç·³å,Ö¸Ïò×Ü¶ÎÊµÄÎ»ÖÃ
                    3490     ;R0     ---     ½«Òª·¢ËÍTransferChannelÏìÓ¦
                    3491     ;ÄÚ²¿²ÎÊ:
                    3492     ;·µ»ØÖµ         [OBUÄ¬ÈÏÒÑÑ¡ÔñÁËOBUÖÐµÄ1001ÏÂµÄ0020ÎÄ¼þ¡£Ö¸Áî²Î¿¼ 00 B0 Offset.01 Offset.00
                              Len]
                    3493     ;--------------------------------------------------------------------------
0852                3494     SEG_DSRC_TransferChannelOBU:    
                    3495             
                    3496             ; ×Ü¶ÎÊ 
0852 E7             3497             MOV     A,@R1
                    3498                     ;MOVX   @R0,A
0853 758301         3499             MOV     DPH,#1 
0856 8882           3500             MOV     DPL,R0 
0858 F0             3501             MOVX    @DPTR,A
0859 FC             3502             MOV     R4,A
                    3503             
085A 08             3504             INC     R0                              ;³¤¶È   
085B 09             3505             INC     R1                              ;³¤¶È   
085C                3506     DSRC_TransferChannelOBU_CardLOOP:
085C E7             3507             MOV     A,@R1
085D FB             3508             MOV     R3,A                            ;Len
                    3509             
085E 09             3510             INC     R1                              ;Ö¸ÁîÍ·
085F 08             3511             INC     R0                              ;Ö¸ÁîÍ·
                    3512             
0860 850107         3513             MOV     AR7,AR1
0863 850005         3514             MOV     AR5,AR0 
0866 C004           3515             PUSH    AR4
0868 C001           3516             PUSH    AR1
086A C000           3517             PUSH    AR0
                    3518             
                    3519             ;µ±ÊÇÑ¡Ä¿Â¼Ö¸ÁîÊ±£¬ÖÃÎ» BIT_GETRESULT£¬±íÖ»·µ»Ø61³¤¶È
                    3520             ;INC    R1
                    3521             ;MOV    A,@R1   
                    3522             ;´¦Àíº¯Ê
                    3523             
086C 120000   F     3524             CALL    _FUN_DSRC_OBUChannel
                    3525             
086F D000           3526             POP     AR0
0871 D001           3527             POP     AR1
0873 D004           3528             POP     AR4
                    3529             
0875 EB             3530             MOV     A,R3
0876 7023           3531             JNZ     DSRC_TransferChannelOBU_CardRight
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    57

                    3532             
0878                3533     DSRC_TransferChannelOBU_CardErr:                        ;Í¨µÀÖ¸ÁîÖ´ÐÐÊ§°Ü
                    3534     
0878 18             3535             DEC     R0                                      ;½«R0ÍËµ½³¤¶ÈÖµ
0879 7402           3536             MOV     A,#2
                    3537                     ;MOVX   @R0,A
087B 758301         3538             MOV     DPH,#1 
087E 8882           3539             MOV     DPL,R0 
0880 F0             3540             MOVX    @DPTR,A
0881 08             3541             INC     R0
0882 74FF           3542             MOV     A,#0FFH
                    3543                     ;MOVX   @R0,A
0884 758301         3544             MOV     DPH,#1 
0887 8882           3545             MOV     DPL,R0 
0889 F0             3546             MOVX    @DPTR,A
088A 08             3547             INC     R0
                    3548                     ;MOVX   @R0,A
088B 758301         3549             MOV     DPH,#1 
088E 8882           3550             MOV     DPL,R0 
0890 F0             3551             MOVX    @DPTR,A
0891 08             3552             INC     R0
                    3553                     
0892 19             3554             DEC     R1                                      ;³¤¶È
0893 E7             3555             MOV     A,@R1
0894 09             3556             INC     R1                                      ;Ö¸ÁîÍ·
0895 29             3557             ADD     A,R1                                    ;ÏÂÒ»¶ÎÖ¸ÁîµÄ³¤¶È
0896 F9             3558             MOV     R1,A
0897 DCC3           3559             DJNZ    R4,DSRC_TransferChannelOBU_CardLOOP     
0899 8015           3560             JMP     DSRC_TransferChannelOBU_LoopEnd
089B                3561     DSRC_TransferChannelOBU_CardRight:              ;Í¨µÀÖ¸ÁîÖ´ÐÐ³É¹¦
089B EB             3562             MOV     A,R3    
                    3563             
089C 18             3564             DEC     R0                              ;³¤¶È
                    3565                     ;MOVX   @R0,A
089D 758301         3566             MOV     DPH,#1 
08A0 8882           3567             MOV     DPL,R0 
08A2 F0             3568             MOVX    @DPTR,A
08A3 08             3569             INC     R0
08A4 E8             3570             MOV     A,R0            
08A5 2B             3571             ADD     A,R3                            
08A6 F8             3572             MOV     R0,A                            ;ÏÂÒ»¶ÎÖ¸ÁîµÄ³¤¶È
                    3573             
08A7 19             3574             DEC     R1                              ;³¤¶È
08A8 E7             3575             MOV     A,@R1
08A9 09             3576             INC     R1                              ;Ö¸ÁîÍ·
08AA 29             3577             ADD     A,R1                            ;ÏÂÒ»¶ÎÖ¸ÁîµÄ³¤¶È
08AB F9             3578             MOV     R1,A
                    3579             ;---DJNZ        R4,DSRC_TransferChannel_CardLOOP
08AC 1C             3580             DEC     R4
08AD BC00AC         3581             CJNE    R4,#0,DSRC_TransferChannelOBU_CardLOOP
                    3582     ;       JMP     DSRC_TransferChannel_LoopEnd
                    3583     ;DSRC_TransferChannelOBU_CardRightZZ:;Ì«³¤ÁË£¬ÐèÒªÖÐ×ªÒ»ÏÂ      
                    3584     ;       JMP     DSRC_TransferChannelOBU_CardLOOP
08B0                3585     DSRC_TransferChannelOBU_LoopEnd:
08B0 E4             3586             CLR     A                               ;Ret
                    3587                     ;MOVX   @R0,A
08B1 758301         3588             MOV     DPH,#1 
08B4 8882           3589             MOV     DPL,R0 
08B6 F0             3590             MOVX    @DPTR,A
08B7 08             3591             INC     R0                              ;ÏÂÒ»¶ÎÖ¸ÁîµÄ×Ö¶ÎÍ·(Èç¹ûÓÐºó¼Ì¶ÎµÄ»°)
                    3592                     
                    3593             ;ÅÐ¶ÏÊÇ·ñ»¹ÓÐºó¼Ì¶Î (HDLC½ÓÊÕ×Ü³¤-µ±Ç°³¤¶È-4) >0Ôò±íÊ¾»¹ÓÐºó¼Ì¶Î£¬Ã»ÓÐ¾Í½áÊø
08B8 8082           3594             JMP     DSRC_TransferChannel_Over       
                    3595     ;**********************************************************************
                    3596     ;SEG_DSRC_GETSendBufLen(¸½ÊôÐò¶Î)
                    3597     ;¸½ÊôÓÚ:_FUN_DSRC_VST & SEG_DSRC_GetSecure & SEG_DSRC_SetSecure & SEG_DSRC_GetRand & SEG_DS
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    58

                             RC_TransferChannel & SEG_DSRC_SetMMI & SEG_DSRC_GETSendBufLen
                    3598     ;ÃèÊö:DSRC cpu¿¨Ö¸Áî´¦Àíº¯Ê
                    3599     ;       R0              ---     Ö¸Ïò·¢ËÍç·³å×îºóÒ»¸ö×Ö½ÚµÄºóÒ»¸ö×Ö½Ú
                    3600     ;       DATA_DSRCLEN    ---     1 BYTE ÓÃÓÚ¼ÇÂ¼DSRC·¢ËÍ³¤¶È£¬ÒÔ±ãÔÚÖØ·¢Ê±Ê¹ÓÃ
                    3601     ;·µ»ØÖµ:
                    3602     ;       R3              ---     ·¢ËÍç·³åµÄ³¤¶È£¬ÒÔ±ãÔÚÖØ·¢DSRCÖ¡Ê±Ê¹ÓÃ
                    3603     ;********************************************************************** 
08BA                3604     SEG_DSRC_GETSendBufLen:
                    3605     
                    3606             ;¼ÆËãDSRCÖ¡Ê¾Ý³¤¶È
08BA E8             3607             MOV     A,R0
08BB C3             3608             CLR     C
08BC 9400     F     3609             SUBB    A,#XDATA_TXBUF
08BE FB             3610             MOV     R3,A
                    3611             
                    3612             ;¼ÇÂ¼·¢ËÍ³¤¶ÈÒÔ±ãÔÚÖØ·¢Ê±Ê¹ÓÃ
08BF F500     F     3613             MOV     DATA_DSRCTXLEN,A
08C1 7F00     F     3614             MOV     R7,#XDATA_TXBUF 
                    3615     
08C3 FD             3616             mov     r5,a
08C4 120000   F     3617             call    _getnewcrc_xr
08C7 E500     F     3618             mov     a,DATA_DSRCTXLEN
08C9 04             3619             inc     a
08CA 04             3620             inc     a
08CB F500     F     3621             mov     DATA_DSRCTXLEN,a
                    3622             
08CD 22             3623             RET
                    3624     ;--------------------------------------------------------------------------
                    3625     ;ÃèÊö:;SetMMI ÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý]
                    3626     ;Íâ²¿²ÎÊ        
                    3627     ;DATA_RXBUF     ---     ½ÓÊÕµ½µÄSetMMIç·³å
                    3628     ;XDATA_TXBUF    ---     ½«Òª·¢ËÍSetMMIÏìÓ¦
                    3629     ;ÄÚ²¿²ÎÊ:       
                    3630     ;R0             
                    3631     ;·µ»ØÖµ         
                    3632     ;--------------------------------------------------------------------------     
08CE                3633     SEG_DSRC_SetMMI:
                    3634             
08CE 22             3635             RET
                    3636     ;--------------------------------------------------------------------------
                    3637     ;ÃèÊö:;SETSECUREÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý]
                    3638     ;Íâ²¿²ÎÊ
                    3639     ;DATA_RXBUF     ---     ½ÓÊÕµ½µÄSETSECUREç·³å
                    3640     ;XDATA_TXBUF    ---     ½«Òª·¢ËÍSETSECUREÏìÓ¦
                    3641     ;ÄÚ²¿²ÎÊ:
                    3642     ;R0
                    3643     ;·µ»ØÖµ
                    3644     ;--------------------------------------------------------------------------     
08CF                3645     SEG_DSRC_SetSecure:
                    3646             
08CF 22             3647             RET
                    3648     ;--------------------------------------------------------------------------
                    3649     ;ÃèÊö:;GetRandÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý]
                    3650     ;Íâ²¿²ÎÊ
                    3651     ;DATA_RXBUF     ---     ½ÓÊÕµ½µÄGetRandç·³å
                    3652     ;XDATA_TXBUF    ---     ½«Òª·¢ËÍGetRandÏìÓ¦
                    3653     ;ÄÚ²¿²ÎÊ:
                    3654     ;R0
                    3655     ;·µ»ØÖµ
                    3656     ;--------------------------------------------------------------------------     
08D0                3657     SEG_DSRC_GetRand:
                    3658             
08D0 22             3659             RET
                    3660     ;--------------------------------------------------------------------------
                    3661     ;ÃèÊö:;GetRandÅäÖÃº¯Ê[Ö»×é×°Ê¾Ý£¬²»·¢ËÍÊ¾Ý]
                    3662     ;Íâ²¿²ÎÊ
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    59

                    3663     ;AR7    ---     Ö¸Áî(ÄÚ´æ)
                    3664     ;AR5    ---     ·µ»Ø(Íâ´æ)
                    3665     ;ÄÚ²¿²ÎÊ:
                    3666     ;R3     ---     ·µ»Ø³¤¶È
                    3667     ;·µ»ØÖµ
                    3668     ;       [ OBUÄ¬ÈÏÒÑÑ¡ÔñÁËOBUÖÐµÄ1001ÏÂµÄ0020ÎÄ¼þ¡£Ö¸Áî²Î¿¼ 00 B0 Offset.01 Offset.00 Len ]
                    3669     ;--------------------------------------------------------------------------
08D1                3670     _FUN_DSRC_OBUChannel:
                    3671             
                    3672             ;PUSH   AR3
08D1 850701         3673             MOV     AR1,AR7                         ;head
08D4 09             3674             INC     R1                              ;cmd
                    3675             
08D5 E7             3676             MOV     A,@R1
08D6 64B0           3677             XRL     A,#0B0H
                    3678             ;JNZ    DSRC_OBUChannel_NOCMD
08D8 6003           3679             JZ      DSRC_OBUChannel_ZZ01
08DA 020000   F     3680             JMP     DSRC_OBUChannel_NOCMD
08DD                3681     DSRC_OBUChannel_ZZ01:
                    3682             
                    3683             ;---¶ÁÈ¡Ô¤´¦Àí±ê¼Ç ---  
08DD 09             3684             INC     R1                              ;OFFSET 01
08DE 09             3685             INC     R1                              ;OFFSET 02
                    3686             
                    3687             ;------------------------------------------------------------------------
                    3688             ;Èç¹ûoffset=00 00 £¬ÔòÐèÒª´ÓCONST_FLASH_Sys0020numH/l¶ÁÈëÏàÓ¦µÄcellid¸öÊ
08DF C001           3689             PUSH    AR1                             ;OFFSET 02
08E1 C002           3690             PUSH    AR2
08E3 C003           3691             PUSH    AR3
08E5 C004           3692             PUSH    AR4
08E7 C005           3693             PUSH    AR5
08E9 C006           3694             PUSH    AR6
08EB C007           3695             PUSH    AR7
                    3696             
08ED C3             3697             CLR     C
08EE E7             3698             MOV     A,@R1                           ;OFFSET 02
08EF F5F0           3699             MOV     B,A
08F1 19             3700             DEC     R1                              ;OFFSET 01
08F2 E7             3701             MOV     A,@R1
08F3 45F0           3702             ORL     A,B
                    3703             
                    3704             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
                    3705             ;CALL   _FUN_TEST_DISPLAY
                    3706             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    3707             
08F5                3708     DSRC_OBUChannel_B01:                            ;²¹Ò»¸ö×Ö½Ú
                    3709             
08F5 B40126         3710             CJNE    A,#1,DSRC_OBUChannel_B02
                    3711             ;INC    R1                              ;OFFSET 01
08F8 E7             3712             MOV     A,@R1
08F9 7059           3713             JNZ     DSRC_OBUChannel_BBB
                    3714             
08FB C000           3715             PUSH    AR0
08FD 75836A         3716             MOV     DPH,#CONST_FLASH_Sys0020numH
0900 758201         3717             MOV     DPL,#CONST_FLASH_Sys0020numL+1
0903 750700   F     3718             MOV     AR7,#XDATA_HOLD
0906 7B01           3719             MOV     R3,#1
0908 120000   F     3720             CALL    _RDFlashXR
090B D000           3721             POP     AR0
                    3722             
                    3723             ;POP    AR0
090D 7900     F     3724             MOV     R1,#XDATA_HOLD
                    3725                     ;MOVX   A,@R1
090F 758301         3726             MOV     DPH,#1
0912 8982           3727             MOV     DPL,R1
0914 E0             3728             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    60

                    3729                     ;MOVX   @R0,A
0915 758301         3730             MOV     DPH,#1 
0918 8882           3731             MOV     DPL,R0 
091A F0             3732             MOVX    @DPTR,A
091B 08             3733             INC     R0
                    3734             
                    3735             ;MOV    B,#1
091C 8039           3736             JMP     DSRC_OBUChannel_Bover
                    3737             
091E                3738     DSRC_OBUChannel_B02:                            ;²¹Á½¸ö×Ö½Ú
091E 7034           3739             JNZ     DSRC_OBUChannel_BBB
                    3740             ;CJNE   A,#2,DSRC_OBUChannel_BBB
                    3741             ;INC    R1                              ;OFFSET 01
                    3742             ;MOV    A,@R1
                    3743             ;JNZ    DSRC_OBUChannel_BBB     
                    3744             
0920 C000           3745             PUSH    AR0
0922 75836A         3746             MOV     DPH,#CONST_FLASH_Sys0020numH
0925 758200         3747             MOV     DPL,#CONST_FLASH_Sys0020numL
0928 750700   F     3748             MOV     AR7,#XDATA_HOLD
092B 7B02           3749             MOV     R3,#2
092D 120000   F     3750             CALL    _RDFlashXR
0930 D000           3751             POP     AR0
                    3752             
0932 7900     F     3753             MOV     R1,#XDATA_HOLD
                    3754                     ;MOVX   A,@R1
0934 758301         3755             MOV     DPH,#1
0937 8982           3756             MOV     DPL,R1
0939 E0             3757             MOVX    A,@DPTR
                    3758                     ;MOVX   @R0,A
093A 758301         3759             MOV     DPH,#1 
093D 8882           3760             MOV     DPL,R0 
093F F0             3761             MOVX    @DPTR,A
                    3762             
0940 08             3763             INC     r0
0941 09             3764             INC     r1
                    3765                     ;MOVX   A,@R1
0942 758301         3766             MOV     DPH,#1
0945 8982           3767             MOV     DPL,R1
0947 E0             3768             MOVX    A,@DPTR
                    3769                     ;MOVX   @R0,A
0948 758301         3770             MOV     DPH,#1 
094B 8882           3771             MOV     DPL,R0 
094D F0             3772             MOVX    @DPTR,A
094E 08             3773             INC     r0
                    3774             
094F 75F002         3775             MOV     B,#2
0952 8003           3776             JMP     DSRC_OBUChannel_Bover
0954                3777     DSRC_OBUChannel_BBB:;²»²¹
0954 75F000         3778             mov     B,#0
0957                3779     DSRC_OBUChannel_Bover:
                    3780             ;POP    AR0
0957 D007           3781             POP     AR7
0959 D006           3782             POP     AR6
095B D005           3783             POP     AR5
095D D004           3784             POP     AR4
095F D003           3785             POP     AR3
0961 D002           3786             POP     AR2                     
0963 D001           3787             POP     AR1     ;OFFSET 02
                    3788             
                    3789             ;------------------------------------------------------------------------
0965 E7             3790             MOV     A,@R1                           ;offset 02
0966 C3             3791             CLR     C
0967 3400           3792             ADDC    A,#CONST_FLASH_Sys0020L
0969 F582           3793             MOV     DPL,A
096B 19             3794             DEC     R1                              ;offset 01
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    61

096C E7             3795             MOV     A,@R1
096D 346C           3796             ADDC    A,#CONST_FLASH_Sys0020H
096F F583           3797             MOV     DPH,A
                    3798             
0971 C3             3799             CLR     C
0972 E582           3800             MOV     A,DPL
0974 35F0           3801             addc    A,B
0976 F582           3802             MOV     DPL,A
0978 E583           3803             MOV     A,DPH
097A 3400           3804             addc    A,#0
097C F583           3805             MOV     DPH,A
                    3806             
                    3807     ;       MOV     DPH,A                                           ;#CONST_FALSH_PREFlagH  
                    3808     ;       INC     R1
                    3809     ;       MOV     A,@R1
                    3810     ;       MOV     DPL,A                                           ;#CONST_FALSH_PREFlagL
                    3811             
097E 09             3812             INC     R1      ;offset 02      
097F 09             3813             INC     R1      ;len
0980 E7             3814             MOV     A,@R1   
                    3815     
0981 C3             3816             clr     c
0982 95F0           3817             subb    a,b
0984 FB             3818             MOV     R3,A
                    3819             
                    3820             
                    3821             ;DEC    R3
                    3822             ;DEC    R3
                    3823             
0985 E5F0           3824             MOV     A,B
0987 C0E0           3825             PUSH    ACC     
0989 C003           3826             PUSH    AR3
098B C005           3827             PUSH    AR5
098D 850007         3828             MOV     AR7,AR0
                    3829             
                    3830             ;MOV    A,DPL
                    3831             ;CALL   _FUN_TEST_DISPLAY
                    3832             
                    3833             ;MOV    AR7,#XDATA_TXBUF
0990 120000   F     3834             CALL    _RDFlashXR
0993 D005           3835             POP     AR5
0995 D003           3836             POP     AR3
0997 D0E0           3837             POP     ACC
                    3838             
0999 C3             3839             CLR     C
099A 3B             3840             ADDC    A,R3
099B FB             3841             MOV     R3,A
                    3842             ;MOV    A,R3
                    3843             
099C ED             3844             MOV     A,R5
099D 2B             3845             ADD     A,R3
099E F8             3846             MOV     R0,A
099F 7490           3847             MOV     A,#90H
                    3848                     ;MOVX   @R0,A
09A1 758301         3849             MOV     DPH,#1 
09A4 8882           3850             MOV     DPL,R0 
09A6 F0             3851             MOVX    @DPTR,A
09A7 08             3852             INC     R0
09A8 E4             3853             CLR     A
                    3854                     ;MOVX   @R0,A
09A9 758301         3855             MOV     DPH,#1 
09AC 8882           3856             MOV     DPL,R0 
09AE F0             3857             MOVX    @DPTR,A
                    3858             
09AF 0B             3859             INC     R3
09B0 0B             3860             INC     R3
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    62

                    3861             
09B1 8002           3862             JMP     DSRC_OBUChannel_Over
                    3863             
09B3                3864     DSRC_OBUChannel_NOCMD:
                    3865             
                    3866             ;POP    AR3
09B3 E4             3867             CLR     A
09B4 FB             3868             MOV     R3,A
09B5                3869     DSRC_OBUChannel_Over:
                    3870             
09B5 22             3871             RET
                    3872     ;--------------------------------------------------------------------------     
                    3873     ;--------------------------------------------------------------------------     
09B6                3874     _FUN_DSRC_VSTCell:
                    3875             
                    3876     
                    3877             
09B6 C200     F     3878     CLR     BIT_privateInfo
09B8 C200     F     3879     CLR     BIT_gbICCInfo
                    3880             ;ÉèÖÃMAC ID
09BA 900000   F     3881             MOV     DPTR,#STR_SYS_OBUID
09BD 7F00     F     3882             MOV     R7,#XDATA_TXBUF
09BF 120000   F     3883             CALL    _FUN_LIB_FLASHTOXDATA
                    3884             
                    3885             ;MOV    R3,#CONST_SYS_OBUIDLEN
                    3886             ;CALL   _FUN_LIB_FLASHTODATAEX
                    3887             
                    3888             ;¼ÇÂ¼ÌìÏßID & ¼ÇÂ¼UnixÊ±¼ä [ ÒòÎª XDATA_BeaconID ºÍ XDATA_UnixTime ¿Õ¼ä¶¨³ÉÁ¬Ìå,ËùÒ
                             ÔÒ»ÆëCopy]
                    3889             ;XDATA_BeaconID
                    3890             ;¿ÉÄÜµ½Ê±»¹Òª½«Á½¸öÖµ·ÅÈëµ½flashÖÐ
09C2 7900     F     3891             MOV     R1,#DATA_RXBUF + 8
09C4 7800     F     3892             MOV     R0,#XDATA_BeaconID
09C6 7A08           3893             MOV     R2,#CONST_Flash_BeaconIDUnixTimeLen
09C8                3894     DSRC_VSTCell_BeanconLoop:
09C8 E7             3895             MOV     A,@R1
                    3896                     ;MOVX   @R0,A
09C9 758301         3897             MOV     DPH,#1 
09CC 8882           3898             MOV     DPL,R0 
09CE F0             3899             MOVX    @DPTR,A
09CF 09             3900             INC     R1
09D0 08             3901             INC     R0
09D1 DAF5           3902             DJNZ    R2,DSRC_VSTCell_BeanconLoop
                    3903             
                    3904             ;~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    3905             ;MOV    R0,#XDATA_UnixTime
                    3906             ;CALL   _FUN_TEST_DISPLAY
                    3907             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    3908             
                    3909             ;ÉèÖÃVST»ù±¾ÐÅÏ¢
09D3 900000   F     3910             MOV     DPTR,#STR_DSRC_VST02
09D6 7F00     F     3911             MOV     R7,#XDATA_TXBUF + 4
09D8 120000   F     3912             CALL    _FUN_LIB_FLASHTOXDATA
                    3913             
                    3914             ;¼ÇÂ¼ÐÅµÀºÅ
09DB 7900     F     3915             MOV     R1,#DATA_RXBUF + 16
09DD E7             3916             MOV     A,@R1
09DE A2E0           3917             MOV     C,ACC.0
09E0 9200     F     3918             MOV     BIT_CHANNELFLAG,C 
                    3919             
09E2 30000B   F     3920             JNB     BIT_CHANNELFLAG,DSRC_VSTCell_BeanconLoop1
09E5 C001           3921             PUSH    AR1
09E7 C000           3922             PUSH    AR0
                    3923             
                    3924             ;~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    3925             ;MOV    A,#1
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    63

                    3926             ;CALL   _FUN_TEST_DISPLAY
                    3927             ;~~~~~~~~~~~~~~~~~~~~~~~~~      
09E9 120000   F     3928             CALL    _FUN_HDLC_CHANGECHANNEL                 ;ÉèÖÃÍ¨Ñ¶ÐÅµÀ
09EC D000           3929             POP     AR0
09EE D001           3930             POP     AR1
                    3931             ;400us
                    3932             
09F0                3933     DSRC_VSTCell_BeanconLoop1:
                    3934             
                    3935             ;ÉèÖÃ·µ»ØÐÅµÀºÅ
09F0 7800     F     3936             MOV     R0,#XDATA_TXBUF + 8
                    3937                     ;MOVX   A,@R0
09F2 758301         3938             MOV     DPH,#1
09F5 8882           3939             MOV     DPL,R0
09F7 E0             3940             MOVX    A,@DPTR
09F8 A200     F     3941             MOV     C,BIT_CHANNELFLAG
09FA 92E0           3942             MOV     ACC.0,C
                    3943                     ;MOVX   @R0,A
09FC 758301         3944             MOV     DPH,#1 
09FF 8882           3945             MOV     DPL,R0 
0A01 F0             3946             MOVX    @DPTR,A
                    3947             
                    3948             ;ÉèÖÃ ApplicationList
0A02 09             3949             INC     R1
0A03 08             3950             INC     R0
0A04 E7             3951             MOV     A,@R1
                    3952                     ;MOVX   @R0,A
0A05 758301         3953             MOV     DPH,#1 
0A08 8882           3954             MOV     DPL,R0 
0A0A F0             3955             MOVX    @DPTR,A
                    3956             
                    3957             ;ÉèÖÃParameter & ÎÞÀ©Õ¹, AID = 1 (ETC)
0A0B 09             3958             INC     R1
0A0C 08             3959             INC     R0
0A0D E7             3960             MOV     A,@R1
0A0E D2E7           3961             SETB    ACC.7
0A10 D2E6           3962             SETB    ACC.6   ;Paramter
                    3963                     ;MOVX   @R0,A
0A12 758301         3964             MOV     DPH,#1 
0A15 8882           3965             MOV     DPL,R0 
0A17 F0             3966             MOVX    @DPTR,A
                    3967     
                    3968             ;Bit5¨D¨DgbICCInfo´æÔÚ±êÖ¾
                    3969             ;BIT_ISContact  
0A18 7800     F     3970             MOV     R0,#XDATA_TXBUF + 12
0A1A E4             3971             CLR     A
                    3972                     ;MOVX   @R0,A
0A1B 758301         3973             MOV     DPH,#1 
0A1E 8882           3974             MOV     DPL,R0 
0A20 F0             3975             MOVX    @DPTR,A
                    3976     ;       JNB     BIT_INSERTCARD,DSRC_VSTCell_infoo
                    3977     ;       SETB    C
                    3978     ;       JNB     BIT_ISContact,DSRC_VSTCell_privateInfo
                    3979     ;DSRC_VSTCell_DgbICCInfo:
                    3980     ;       MOV     ACC.5,C
                    3981     ;       JMP     DSRC_VSTCell_infoo
                    3982     ;DSRC_VSTCell_privateInfo:
                    3983     ;       MOV     ACC.6,C
                    3984     ;DSRC_VSTCell_infoo:
                    3985     ;       ;MOV    C,BIT_INSERTCARD
                    3986     ;       ;MOV    ACC.5,C
                    3987     
                    3988     
0A21 7800     F     3989             MOV     R0,#XDATA_TXBUF + 14
                    3990             
                    3991             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    64

                    3992             ;MOV    A,#22
                    3993             ;CALL   _FUN_TEST_DISPLAY
                    3994             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    3995                     
                    3996             ;--- ´ÓEPPROMÖÐ¶ÁÈ¡IC¿¨ÐÅÏ¢ ---
                    3997             ;JNB    BIT_INSERTCARD,DSRC_VSTCell_NotUserCard ;Ã»ÓÐ²å¿¨Ìø¹²»¶Á²»¶ÁIC¿¨ÐÅÏ¢
                    3998             
0A23 7900     F     3999             MOV     R1,#DATA_RXBUF + 18                     ;Parameter
0A25 E7             4000             MOV     A,@R1
                    4001             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4002             ;MOV    A,#22
                    4003             ;MOV    R1,#DATA_RXBUF + 19                     ;Parameter
                    4004             ;MOV    A,@R1
                    4005             ;CALL   _FUN_TEST_DISPLAY
                    4006             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4007     
0A26 30E60B         4008             JNB     ACC.6,DSRC_VSTCell_NotUserCard          ;Ã»ÓÐÀ©Õ¹Ó¦ÓÃÊ±Ìø¹²»¶Á²»¶ÁIC¿¨ÐÅÏ¢
                    4009             
0A29 7900     F     4010             MOV     R1,#DATA_RXBUF + 19
0A2B E7             4011             MOV     A,@R1
                    4012             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4013             ;MOV    A,#22
                    4014             ;MOV    R1,#DATA_RXBUF + 19                     ;Parameter
                    4015             ;MOV    A,@R1
                    4016             ;CALL   _FUN_TEST_DISPLAY
                    4017             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4018     
0A2C 30E705         4019             JNB     ACC.7,DSRC_VSTCell_NotUserCard          ;Ã»ÓÐÀ©Õ¹Ó¦ÓÃÊ±Ìø¹²»¶Á²»¶ÁIC¿¨ÐÅÏ¢ 
                                          
                    4020                     
0A2F 7900     F     4021             MOV     R1,#DATA_RXBUF + 18                     ;Parameter
0A31 E7             4022             MOV     A,@R1           
0A32 8013           4023             JMP     DSRC_VSTCell_PRE                                ;BST´øÔ¤´¦ÀíÁ÷³Ì
                    4024             
                    4025             ;Ã»ÓÐÓÃ»§¿¨»òÃ»ÓÐÀ©Õ¹Ó¦ÓÃÊ±
0A34                4026     DSRC_VSTCell_NotUserCard:       
                    4027     
                    4028             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4029             ;MOV    A,#23
                    4030             ;CALL   _FUN_TEST_DISPLAY
                    4031             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4032     
                    4033             ;´Ó EPPROM ÖÐ¶ÁÈ¡ 26 Byte ÒÑÊÂÏÈ´ÓESMA ÖÐÔ¤¶Áµ½FlashÖÐµÄ SysInfo ÎÄ¼þ
0A34 758372         4034             MOV     DPH,#CONST_FLASH_SYSINFOH
0A37 758200         4035             MOV     DPL,#CONST_FLASH_SYSINFOL
0A3A 750700   F     4036             MOV     AR7,#XDATA_TXBUF + 14
0A3D 7B1A           4037             MOV     R3,#26
0A3F 120000   F     4038             CALL    _RDFlashXR
                    4039             
0A42 7800     F     4040             MOV     R0,#XDATA_TXBUF + 40
0A44 020000   F     4041             JMP     DSRC_VSTCell_SEGVSTTAIL
                    4042             
0A47                4043     DSRC_VSTCell_PRE:       ;BST ´øÔ¤´¦ÀíÁ÷³Ì
                    4044             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4045             ;MOV    A,#23
                    4046             ;CALL   _FUN_TEST_DISPLAY
                    4047             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4048             ;---JNB ACC.0,DSRC_VSTCell_PREAID00
0A47 020000   F     4049             JMP     DSRC_VSTCell_PREAID01
                    4050             ;ACC.0=0/=1
0A4A                4051     DSRC_VSTCell_PREAID00:  
                    4052             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4053             ;MOV    A,#24
                    4054             ;CALL   _FUN_TEST_DISPLAY
                    4055             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4056     
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    65

                    4057             ;---´Ó EPPROM ÖÐ¶ÁÈ¡ 26 Byte ÒÑÊÂÏÈ´ÓESMA ÖÐÔ¤¶Áµ½FlashÖÐµÄ SysInfo ÎÄ¼þ
0A4A 758372         4058             MOV     DPH,#CONST_FLASH_SYSINFOH
0A4D 758200         4059             MOV     DPL,#CONST_FLASH_SYSINFOL
0A50 750700   F     4060             MOV     AR7,#XDATA_TXBUF + 14
0A53 7B1A           4061             MOV     R3,#26
0A55 120000   F     4062             CALL    _RDFlashXR
                    4063                     
                    4064             ;1 ÉèÖÃµÚ13¸ö×Ö½Ú               
                    4065             ;2 »ñÈ¡Ëæ»úÊ¼°ESAM¿¨¸´Î»ÐÅÏ¢
0A58 7800     F     4066             MOV     R0,#XDATA_TXBUF+12      
0A5A 7900     F     4067             MOV     R1,#DATA_RXBUF+19       ;Init Mode
0A5C E7             4068             MOV     A,@R1
                    4069     
0A5D B40077         4070             CJNE    A,#0,DSRC_VSTCell_InitMode01
                    4071             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4072             ;MOV    A,#25
                    4073             ;CALL   _FUN_TEST_DISPLAY
                    4074             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    4075                     ;MOVX   A,@R0
0A60 758301         4076             MOV     DPH,#1
0A63 8882           4077             MOV     DPL,R0
0A65 E0             4078             MOVX    A,@DPTR
0A66 4490           4079             ORL     A,#90H
                    4080                     ;MOVX   @R0,A
0A68 758301         4081             MOV     DPH,#1 
0A6B 8882           4082             MOV     DPL,R0 
0A6D F0             4083             MOVX    @DPTR,A
                    4084     
0A6E 7800     F     4085             MOV     R0,#XDATA_TXBUF+40
0A70 741D           4086             MOV     A,#1DH
                    4087                     ;MOVX   @R0,A
0A72 758301         4088             MOV     DPH,#1 
0A75 8882           4089             MOV     DPL,R0 
0A77 F0             4090             MOVX    @DPTR,A
                    4091     
0A78 7800     F     4092             MOV     R0,#XDATA_TXBUF+49
0A7A 7450           4093             MOV     A,#50H
                    4094                     ;MOVX   @R0,A
0A7C 758301         4095             MOV     DPH,#1 
0A7F 8882           4096             MOV     DPL,R0 
0A81 F0             4097             MOVX    @DPTR,A
                    4098             
                    4099             ;¸´Î»¿¨Æ¬
                    4100             ;CLR    PIN_ESAM_RST
                    4101             ;MOV    R7,#20H
                    4102             ;SETB   PIN_ESAM_RST
                    4103             
0A82 C200     F     4104             CLR     BIT_ESAMICC     
0A84 D200     F     4105             setb    BIT_BUFADDR                     ;BIT_BUFADDR            ---     =0£¬½ÓÊÕÊ¾Ý
                             µ½ÄÚ´æ£»=1£¬½ÓÊÕÊ¾Ýµ½Íâ´æ
0A86 D200     F     4106             SETB    BIT_SERIALOVERTIMERX            ;BIT_SERIALOVERTIMERX   ---     ´®¿ÚµÈ´½ÓÊÕ
                             ÊÇ·ñÓÐÊ±¼ä,ÏÞÖÆ=0Ã»ÓÐÏÞÖÆ;=1ÓÐÊ±¼äÏÞÖÆ
0A88 D200     F     4107             SETB    BIT_VERIFY                      ;BIT_VERIFY             ---     ´®¿ÚÊÕ·¢ÊÇ·
                             ñÒª¼ÓÑéÎ»,=0²»Òª£¬=1Òª
0A8A 7F00     F     4108             MOV     R7,#XDATA_TXBUF+50              ;R7                     ---     ½«Òª½ÓÊÕ×Ö·
                             û´®bufµÄÖ¸Õë
0A8C 7B00           4109             MOV     R3,#000                 ;       
0A8E 120000   F     4110             CALL    _FUN_SERIAL_RXSOFT              ;
0A91 EB             4111             MOV     A,R3                            ;
                    4112             
                    4113             ;Ñ¡DF01
0A92 C200     F     4114             CLR     BIT_ESAMICC
0A94 C200     F     4115             CLR     BIT_GETRESULT
0A96 7F00     F     4116             MOV     R7,#DATA_RXBUF
0A98 7D00     F     4117             MOV     R5,#XDATA_TXBUF + 72
0A9A 7BDF           4118             MOV     R3,#0dFH
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    66

0A9C 7A01           4119             MOV     R2,#001H
0A9E 120000   F     4120             CALL    _FUN_CARDAPP_SelectFile
                    4121             
                    4122             ;È¡Ëæ»úÊ        
0AA1 900000   F     4123             MOV     DPTR,#STR_DSRC_GETRND
0AA4 7F00     F     4124             MOV     R7,#DATA_RXBUF
0AA6 120000   F     4125             CALL    _FUN_LIB_FLASHTODATA
                    4126             
0AA9 D200     F     4127             SETB    BIT_GETRESULT           ;       BIT_GETRESULT           =1±íÊ¾È¡0Ê±£¬È¡·µ»Ø
                             ½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û(Ö»¶ÔT0¿¨£¬Ö¸Áî´óÓÚ5¸ö×Ö½ÚµÄÖ¸ÁîÓÐÐ§»òproÓÐÐ§)
0AAB C200     F     4128             CLR     BIT_ESAMICC             ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´
                             ¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
0AAD 7F00     F     4129             MOV     R7,#XDATA_TXBUF + 41    ;       R7                      ---     ·¢ËÍç·³åÖ¸Õ
                             ë(ÄÚ´æ)
0AAF 7D00     F     4130             MOV     R5,#DATA_RXBUF          ;       R5                      ---     ½ÓÊÕËÍç·³åÖ
                             ¸Õë(Íâ´æ)
                    4131                                             ;       R3                      ---     ½«Òª·¢ËÍÊ¾Ý
                             µÄ³¤¶È
                    4132             
0AB1 120000   F     4133             CALL    _FUN_Contact_Channel
                    4134             
0AB4 E4             4135             CLR     A
0AB5 7800     F     4136             MOV     R0,#XDATA_TXBUF+45
                    4137                     ;MOVX   @R0,A
0AB7 758301         4138             MOV     DPH,#1 
0ABA 8882           4139             MOV     DPL,R0 
0ABC F0             4140             MOVX    @DPTR,A
0ABD 08             4141             INC     R0
                    4142                     ;MOVX   @R0,A
0ABE 758301         4143             MOV     DPH,#1 
0AC1 8882           4144             MOV     DPL,R0 
0AC3 F0             4145             MOVX    @DPTR,A
0AC4 08             4146             INC     R0
                    4147                     ;MOVX   @R0,A
0AC5 758301         4148             MOV     DPH,#1 
0AC8 8882           4149             MOV     DPL,R0 
0ACA F0             4150             MOVX    @DPTR,A
0ACB 08             4151             INC     R0
                    4152                     ;MOVX   @R0,A
0ACC 758301         4153             MOV     DPH,#1 
0ACF 8882           4154             MOV     DPL,R0 
0AD1 F0             4155             MOVX    @DPTR,A
0AD2 7800     F     4156             MOV     R0,#XDATA_TXBUF + 65
                    4157             
                    4158             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4159             ;MOV    A,#26
                    4160             ;CALL   _FUN_TEST_DISPLAY
                    4161             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4162             
0AD4 020000   F     4163             JMP     DSRC_VSTCell_InitModeOver
0AD7                4164     DSRC_VSTCell_InitMode01:
0AD7 B4014C         4165             CJNE    A,#1,DSRC_VSTCell_InitMode02
                    4166                     ;MOVX   A,@R0
0ADA 758301         4167             MOV     DPH,#1
0ADD 8882           4168             MOV     DPL,R0
0ADF E0             4169             MOVX    A,@DPTR
0AE0 4480           4170             ORL     A,#80H  
                    4171                     ;MOVX   @R0,A
0AE2 758301         4172             MOV     DPH,#1 
0AE5 8882           4173             MOV     DPL,R0 
0AE7 F0             4174             MOVX    @DPTR,A
                    4175     
0AE8 7800     F     4176             MOV     R0,#XDATA_TXBUF+40
0AEA 741D           4177             MOV     A,#1DH
                    4178                     ;MOVX   @R0,A
0AEC 758301         4179             MOV     DPH,#1 
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    67

0AEF 8882           4180             MOV     DPL,R0 
0AF1 F0             4181             MOVX    @DPTR,A
                    4182             
                    4183             ;È¡Ëæ»úÊ
0AF2 900000   F     4184             MOV     DPTR,#STR_DSRC_GETRND
0AF5 7F00     F     4185             MOV     R7,#DATA_RXBUF
0AF7 120000   F     4186             CALL    _FUN_LIB_FLASHTODATA
                    4187             
                    4188             
0AFA D200     F     4189             SETB    BIT_GETRESULT           ;       BIT_GETRESULT           =1±íÊ¾È¡0Ê±£¬È¡·µ»Ø
                             ½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û(Ö»¶ÔT0¿¨£¬Ö¸Áî´óÓÚ5¸ö×Ö½ÚµÄÖ¸ÁîÓÐÐ§»òproÓÐÐ§)
0AFC C200     F     4190             CLR     BIT_ESAMICC             ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´
                             ¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
0AFE 7F00     F     4191             MOV     R7,#XDATA_TXBUF + 41    ;       R7                      ---     ·¢ËÍç·³åÖ¸Õ
                             ë(ÄÚ´æ)
0B00 7D00     F     4192             MOV     R5,#DATA_RXBUF          ;       R5                      ---     ½ÓÊÕËÍç·³åÖ
                             ¸Õë(Íâ´æ)
                    4193                                             ;       R3                      ---     ½«Òª·¢ËÍÊ¾Ý
                             µÄ³¤¶È       
0B02 120000   F     4194             CALL    _FUN_Contact_Channel
                    4195             
0B05 E4             4196             CLR     A
0B06 7800     F     4197             MOV     R0,#XDATA_TXBUF+45
                    4198                     ;MOVX   @R0,A
0B08 758301         4199             MOV     DPH,#1 
0B0B 8882           4200             MOV     DPL,R0 
0B0D F0             4201             MOVX    @DPTR,A
0B0E 08             4202             INC     R0
                    4203                     ;MOVX   @R0,A
0B0F 758301         4204             MOV     DPH,#1 
0B12 8882           4205             MOV     DPL,R0 
0B14 F0             4206             MOVX    @DPTR,A
0B15 08             4207             INC     R0
                    4208                     ;MOVX   @R0,A
0B16 758301         4209             MOV     DPH,#1 
0B19 8882           4210             MOV     DPL,R0 
0B1B F0             4211             MOVX    @DPTR,A
0B1C 08             4212             INC     R0
                    4213                     ;MOVX   @R0,A
0B1D 758301         4214             MOV     DPH,#1 
0B20 8882           4215             MOV     DPL,R0 
0B22 F0             4216             MOVX    @DPTR,A         
                    4217     
                    4218             ;MOV    R0,#XDATA_TXBUF+49
0B23 08             4219             INC     R0
                    4220     
                    4221             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4222             ; MOV   A,#27
                    4223             ; CALL  _FUN_TEST_DISPLAY
                    4224             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4225     
0B24 8051           4226             JMP     DSRC_VSTCell_InitModeOver
0B26                4227     DSRC_VSTCell_InitMode02:
0B26 B4024C         4228             CJNE    A,#2,DSRC_VSTCell_InitModeOther
                    4229                     ;MOVX   A,@R0
0B29 758301         4230             MOV     DPH,#1
0B2C 8882           4231             MOV     DPL,R0
0B2E E0             4232             MOVX    A,@DPTR
0B2F 4480           4233             ORL     A,#80H  
                    4234                     ;MOVX   @R0,A
0B31 758301         4235             MOV     DPH,#1 
0B34 8882           4236             MOV     DPL,R0 
0B36 F0             4237             MOVX    @DPTR,A
                    4238             
0B37 7800     F     4239             MOV     R0,#XDATA_TXBUF+40
0B39 741D           4240             MOV     A,#1DH
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    68

                    4241                     ;MOVX   @R0,A
0B3B 758301         4242             MOV     DPH,#1 
0B3E 8882           4243             MOV     DPL,R0 
0B40 F0             4244             MOVX    @DPTR,A
                    4245             
                    4246             ;È¡Ëæ»úÊ
0B41 900000   F     4247             MOV     DPTR,#STR_DSRC_GETRND
0B44 7F00     F     4248             MOV     R7,#DATA_RXBUF
0B46 120000   F     4249             CALL    _FUN_LIB_FLASHTODATA
                    4250                     
0B49 D200     F     4251             SETB    BIT_GETRESULT           ;       BIT_GETRESULT           =1±íÊ¾È¡0Ê±£¬È¡·µ»Ø
                             ½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û(Ö»¶ÔT0¿¨£¬Ö¸Áî´óÓÚ5¸ö×Ö½ÚµÄÖ¸ÁîÓÐÐ§»òproÓÐÐ§)
0B4B C200     F     4252             CLR     BIT_ESAMICC             ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´
                             ¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
0B4D 7F00     F     4253             MOV     R7,#XDATA_TXBUF + 41    ;       R7                      ---     ·¢ËÍç·³åÖ¸Õ
                             ë(ÄÚ´æ)
0B4F 7D00     F     4254             MOV     R5,#DATA_RXBUF          ;       R5                      ---     ½ÓÊÕËÍç·³åÖ
                             ¸Õë(Íâ´æ)
                    4255                                             ;       R3                      ---     ½«Òª·¢ËÍÊ¾Ý
                             µÄ³¤¶È       
0B51 120000   F     4256             CALL    _FUN_Contact_Channel
                    4257             
0B54 E4             4258             CLR     A
0B55 7800     F     4259             MOV     R0,#XDATA_TXBUF+45
                    4260                     ;MOVX   @R0,A
0B57 758301         4261             MOV     DPH,#1 
0B5A 8882           4262             MOV     DPL,R0 
0B5C F0             4263             MOVX    @DPTR,A
0B5D 08             4264             INC     R0
                    4265                     ;MOVX   @R0,A
0B5E 758301         4266             MOV     DPH,#1 
0B61 8882           4267             MOV     DPL,R0 
0B63 F0             4268             MOVX    @DPTR,A
0B64 08             4269             INC     R0
                    4270                     ;MOVX   @R0,A
0B65 758301         4271             MOV     DPH,#1 
0B68 8882           4272             MOV     DPL,R0 
0B6A F0             4273             MOVX    @DPTR,A
0B6B 08             4274             INC     R0
                    4275                     ;MOVX   @R0,A
0B6C 758301         4276             MOV     DPH,#1 
0B6F 8882           4277             MOV     DPL,R0 
0B71 F0             4278             MOVX    @DPTR,A         
                    4279     
0B72 08             4280             INC     R0
                    4281             ;MOV    R0,#XDATA_TXBUF+49
0B73 8002           4282             jmp     DSRC_VSTCell_InitModeOver
0B75                4283     DSRC_VSTCell_InitModeOther:
                    4284             
0B75 7800     F     4285             MOV     r0,#xdata_txbuf+40
                    4286             
                    4287             ;Ô­À´ºÃÏñÃ»ÓÐ¼Ó£¬ÒªÑéÖ¤27
0B77                4288     DSRC_VSTCell_InitModeOver:
                    4289     
0B77 020000   F     4290             JMP     DSRC_VSTCell_SEGVSTTAIL
                    4291     
0B7A                4292     DSRC_VSTCell_PREAID01:
                    4293             
                    4294             ;JB     BIT_INSERTCARD,DSRC_VSTCell_PREAID01Start       ;Ã»ÓÐ²å¿¨Ìø¹²»¶Á²»¶ÁIC¿¨ÐÅÏ
                             ¢
                    4295             ;JMP    DSRC_VSTCell_NotUserCard
0B7A 7900     F     4296             MOV     R1,#DATA_RXBUF + 19                     ;
0B7C E7             4297             MOV     A,@R1
0B7D 20E703         4298             JB      ACC.7,DSRC_VSTCell_PREAID01Start
                    4299             ;---JMP DSRC_VSTCell_BJ                         ;±±¾©´¦Àí·½Ê½
0B80 020000   F     4300             JMP     DSRC_VSTCell_NotUserCard
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    69

0B83                4301     DSRC_VSTCell_PREAID01Start:
                    4302             
                    4303     
                    4304             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
                    4305             ;2013-11-06
0B83 7900     F     4306             MOV     R1,#DATA_RXBUF + 20
0B85 E7             4307             MOV     A,@R1
0B86 A2E1           4308             MOV     C,ACC.1
                    4309             
                    4310             ;CALL   _fun_test_display
0B88 9200     F     4311             MOV     BIT_Cellinfo,C
                    4312             ;MOV    A,#26
                    4313             ;JB     BIT_Cellinfo,DSRC_VSTCell_PREAID01READSYSINFO
                    4314             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
                    4315             
0B8A 7900     F     4316             MOV     R1,#DATA_RXBUF + 22                     ;ÏµÍ³ÐÅÏ¢ÎÄ¼þÔ¤´¦ÀíÄ£Ê½£¨³¤¶È£©
0B8C E7             4317             MOV     A,@R1
                    4318             
                    4319             ;ÖÃÎ» gbICCInfo
                    4320             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4321             ;MOV    A,#26
                    4322             ;CALL   _FUN_TEST_DISPLAY
                    4323             ;~~~~~~~~~~~~~~~~~~~~~~~~       
0B8D 7004           4324             JNZ     DSRC_VSTCell_PREAID01READSYSINFO
0B8F 7800     F     4325             MOV     R0,#XDATA_TXBUF + 13
0B91 8015           4326             JMP     DSRC_VSTCell_PREREADSYSINFOOVER
                    4327             
0B93                4328     DSRC_VSTCell_PREAID01READSYSINFO:
                    4329             
                    4330             ;´Ó EPPROM ÖÐ¶ÁÈ¡ XX Byte ÒÑÊÂÏÈ´ÓESMA ÖÐÔ¤¶Áµ½FlashÖÐµÄ SysInfo ÎÄ¼þ
0B93 758372         4331             MOV     DPH,#CONST_FLASH_SYSINFOH
0B96 758200         4332             MOV     DPL,#CONST_FLASH_SYSINFOL
0B99 750700   F     4333             MOV     AR7,#XDATA_TXBUF + 14
0B9C FB             4334             MOV     R3,A
0B9D C0E0           4335             PUSH    ACC
0B9F 120000   F     4336             CALL    _RDFlashXR
0BA2 D0E0           4337             POP     ACC
                    4338             
0BA4 7800     F     4339             MOV     R0,#XDATA_TXBUF + 14
0BA6 28             4340             ADD     A,R0
0BA7 F8             4341             MOV     R0,A
0BA8                4342     DSRC_VSTCell_PREREADSYSINFOOVER:
                    4343             
0BA8 200006   F     4344             JB      BIT_ISContact,DSRC_VSTCell_CPUPre
0BAB 200003   F     4345             JB      BIT_PROMF,DSRC_VSTCell_CPUPre
0BAE 020000   F     4346             JMP     DSRC_VSTCell_MFPre
0BB1                4347     DSRC_VSTCell_CPUPre:    ;CPU¿¨Ô¤¶Á
                    4348             
0BB1 7900     F     4349             MOV     R1,#DATA_RXBUF + 21                     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
0BB3 E7             4350             MOV     A,@R1
                    4351     
0BB4 7003           4352             JNZ     DSRC_VSTCell_CPUPreStart                        ;µ±Ã»ÓÐÔ¤¶ÁÐÅÏ¢Ê±£¬Ôò½áÊø
0BB6 020000   F     4353             JMP     DSRC_VSTCell_SEGVSTTAIL
0BB9                4354     DSRC_VSTCell_CPUPreStart:               
0BB9 200003   F     4355             JB      BIT_INSERTCARD,DSRC_VSTCell_CPUPreHaveCard
0BBC 020000   F     4356             JMP     DSRC_VSTCell_SEGVSTTAIL
0BBF                4357     DSRC_VSTCell_CPUPreHaveCard:;ÓÐÔ¤¶Á£¬ÓÐ¿¨
0BBF D200     F     4358             SETB    BIT_gbICCInfo   
                    4359     
0BC1 F5F0           4360             MOV     B,A
0BC3 7428           4361             MOV     A,#28H
                    4362     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~             
0BC5 A200     F     4363             mov     c,BIT_Cellinfo
0BC7 92E1           4364             mov     acc.1,c;BIT_Cellinfo
                    4365             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~             
                    4366                     ;MOVX   @R0,A
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    70

0BC9 758301         4367             MOV     DPH,#1 
0BCC 8882           4368             MOV     DPL,R0 
0BCE F0             4369             MOVX    @DPTR,A
                    4370             
0BCF 08             4371             INC     R0
0BD0 E5F0           4372             MOV     A,B
                    4373     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~     
                    4374     ;Jb     BIT_Cellinfo,DSRC_VSTCell_nosysinfolen
0BD2 09             4375             INC     R1      ;22 ÏµÍ³ÐÅÏ¢ÎÄ¼þÔ¤´¦ÀíÄ£Ê½£¨³¤¶È£©
                    4376     ;DSRC_VSTCell_nosysinfolen:
                    4377     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~     
0BD3 09             4378             INC     R1      ;23 
                    4379             
                    4380             ;JNB    ACC.7,DSRC_VSTCell_SEG0015      
0BD4 C0E0           4381             PUSH    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
0BD6 C001           4382             PUSH    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    4383             ;MOV    R1,#DATA_RXBUF+21
                    4384             ;MOV    A,@R1
                    4385             ;MOV    R1,#DATA_RXBUF+24
                    4386     
                    4387     
                    4388     ;Bit7¨D¨D¶ÁÈ¡0002ÎÄ¼þ±êÖ¾
                    4389     ;Bit6¨D¨D¶ÁÈ¡0012ÎÄ¼þ±êÖ¾
                    4390     ;Bit5¨D¨D¶ÁÈ¡0015ÎÄ¼þ±êÖ¾
                    4391     ;Bit4¨D¨D¶ÁÈ¡0019ÎÄ¼þ±êÖ¾
                    4392     ;Bit3¡«Bit0¨D¨DÌî³ä
                    4393     
0BD8 20E502         4394             JB      ACC.5,DSRC_VSTCell_SEG0015Start
0BDB 802B           4395             JMP     DSRC_VSTCell_SEG0012
0BDD                4396     DSRC_VSTCell_SEG0015Start:
0BDD 30E702         4397             JNB     ACC.7,DSRC_VSTCell_SEG001512E
0BE0 09             4398             INC     R1
0BE1 09             4399             INC     R1
0BE2                4400     DSRC_VSTCell_SEG001512E:        
0BE2 30E602         4401             JNB     ACC.6,DSRC_VSTCell_SEG0015              
0BE5 09             4402             INC     R1
0BE6 09             4403             INC     R1
                    4404             
0BE7                4405     DSRC_VSTCell_SEG0015:
                    4406             ;PUSH   AR1
                    4407             ;MOV    R1,#DATA_RXBUF + 21                     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4408             ;MOV    A,@R1   
                    4409             ;POP    AR1
                    4410             ;JNB    ACC.5,DSRC_VSTCell_SEG0012
                    4411     
                    4412     
                    4413             ;¶Á0015ÎÄ¼þ
0BE7 758372         4414             MOV     DPH,#CONST_FLASH_0015H
0BEA 7484           4415             MOV     A,#CONST_FLASH_0015L
0BEC 27             4416             ADD     A,@R1                                   ;0015Æ«ÒÆÁ¿
0BED F582           4417             MOV     DPL,A
                    4418     
0BEF 09             4419             INC     R1      
0BF0 E7             4420             MOV     A,@R1   
0BF1 FB             4421             MOV     R3,A                                    ;0015ÎÄ¼þ³¤¶È
                    4422             
                    4423             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    4424             ;MOV    A,#15
                    4425             ;MOV    A,R3
                    4426             ;CALL   _FUN_TEST_DISPLAY
                    4427             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    4428             
0BF2 850007         4429             MOV     AR7,AR0
0BF5 C003           4430             PUSH    AR3
0BF7 C000           4431             PUSH    AR0
0BF9 C001           4432             PUSH    AR1
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    71

0BFB 120000   F     4433             CALL    _RDFlashXR                              ;¶Áfalshº¯ÊÖ»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²
                             »push r1
0BFE D001           4434             POP     AR1
0C00 D000           4435             POP     AR0
0C02 D003           4436             POP     AR3
0C04 09             4437             INC     R1
                    4438             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    4439             ;MOV    A,#15
                    4440             ;MOV    A,R0
                    4441             ;ADD    A,#39
                    4442             ;MOV    R0,A
                    4443             ;MOV    A,R3
                    4444             ;CALL   _FUN_TEST_DISPLAY
                    4445     
                    4446     
                    4447             ;MOV    A,R0
                    4448             ;CALL   _FUN_TEST_DISPLAY
                    4449             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    4450     
0C05 E8             4451             MOV     A,R0
0C06 2B             4452             ADD     A,R3
0C07 F8             4453             MOV     R0,A
                    4454             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    4455             ;MOV    A,#16
                    4456             ;MOV    A,R0
                    4457             ;CALL   _FUN_TEST_DISPLAY
                    4458             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    4459     
                    4460             ;POP    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    4461             ;POP    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4462             ;JMP    SEG_DSRC_GETSendBufLen
0C08                4463     DSRC_VSTCell_SEG0012:
                    4464             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    4465             ;MOV    A,#12
                    4466             ;CALL   _FUN_TEST_DISPLAY
                    4467             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    4468             
0C08 D001           4469             POP     AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
0C0A D0E0           4470             POP     ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4471     
0C0C C0E0           4472             PUSH    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
0C0E C001           4473             PUSH    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    4474     
0C10 20E602         4475             JB      ACC.6,DSRC_VSTCell_SEG0012Start
0C13 8026           4476             JMP     DSRC_VSTCell_SEG0019
0C15                4477     DSRC_VSTCell_SEG0012Start:
                    4478     
0C15 30E702         4479             JNB     ACC.7,DSRC_VSTCell_SEG001202E
0C18 09             4480             INC     R1
0C19 09             4481             INC     R1
0C1A                4482     DSRC_VSTCell_SEG001202E:
                    4483     
                    4484             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    4485             ;MOV    A,#13
                    4486             ;CALL   _FUN_TEST_DISPLAY
                    4487             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    4488     
                    4489             ;¶Á0012ÎÄ¼þ
0C1A 758372         4490             MOV     DPH,#CONST_FLASH_0012H
0C1D 745C           4491             MOV     A,#CONST_FLASH_0012L
0C1F 27             4492             ADD     A,@R1                                   ;0012Æ«ÒÆÁ¿
0C20 F582           4493             MOV     DPL,A
                    4494     
0C22 09             4495             INC     R1
0C23 E7             4496             MOV     A,@R1
                    4497             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    72

                    4498             ;MOV    A,#15
                    4499             ;CALL   _FUN_TEST_DISPLAY
                    4500             ;~~~~~~~~~~~~~~~~~~~~~~~~               
0C24 FB             4501             MOV     R3,A                                    ;0012ÎÄ¼þ³¤¶È
                    4502             
0C25 850007         4503             MOV     AR7,AR0
0C28 C003           4504             PUSH    AR3
0C2A C000           4505             PUSH    AR0
0C2C C001           4506             PUSH    AR1
0C2E 120000   F     4507             CALL    _RDFlashXR                              ;¶ÁFlashº¯ÊÖ»²Ù×÷ÁË     R0£¬ËùÒÔÔÝ²
                             »PUSH R1
0C31 D001           4508             POP     AR1
0C33 D000           4509             POP     AR0
0C35 D003           4510             POP     AR3
0C37 09             4511             INC     R1
                    4512     
0C38 E8             4513             MOV     A,R0
0C39 2B             4514             ADD     A,R3
0C3A F8             4515             MOV     R0,A
                    4516     
                    4517             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    4518             ;MOV    A,#16
                    4519             ;MOV    A,R0
                    4520             ;CALL   _FUN_TEST_DISPLAY
                    4521             ;~~~~~~~~~~~~~~~~~~~~~~~~               
                    4522             
                    4523             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4524             ;POP    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    4525             ;POP    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4526             ;JMP    SEG_DSRC_GETSendBufLen
                    4527             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4528             
0C3B                4529     DSRC_VSTCell_SEG0019:
                    4530             
                    4531             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4532             ;PUSH   AR1
                    4533             ;MOV    R1,#DATA_RXBUF + 21                     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4534             ;MOV    A,@R1   
                    4535             ;POP    AR1
                    4536             ;JNB    ACC.4,DSRC_VSTCell_SEG0002
                    4537             ;~~~~~~~~~~~~~~~~~~~~~~~~
0C3B D001           4538             POP     AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
0C3D D0E0           4539             POP     ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4540     
0C3F C0E0           4541             PUSH    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
0C41 C001           4542             PUSH    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    4543     
0C43 20E402         4544             JB      ACC.4,DSRC_VSTCell_SEG0019Start
0C46 8030           4545             JMP     DSRC_VSTCell_SEG0002
0C48                4546     DSRC_VSTCell_SEG0019Start:
                    4547             
0C48 30E702         4548             JNB     ACC.7,DSRC_VSTCell_SEG001902E
0C4B 09             4549             INC     R1
0C4C 09             4550             INC     R1
0C4D                4551     DSRC_VSTCell_SEG001902E:
0C4D 30E602         4552             JNB     ACC.6,DSRC_VSTCell_SEG001912E
0C50 09             4553             INC     R1
0C51 09             4554             INC     R1
0C52                4555     DSRC_VSTCell_SEG001912E:
0C52 30E502         4556             JNB     ACC.5,DSRC_VSTCell_SEG001915E
0C55 09             4557             INC     R1
0C56 09             4558             INC     R1
0C57                4559     DSRC_VSTCell_SEG001915E:
                    4560             
                    4561             
                    4562             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    73

                    4563             ;MOV    A,#19
                    4564             ;CALL   _FUN_TEST_DISPLAY
                    4565             ;~~~~~~~~~~~~~~~~~~~~~~~~       
                    4566             
                    4567             ;¶Á0019ÎÄ¼þ
0C57 758372         4568             MOV     DPH,#CONST_FLASH_0019H
0C5A 74AF           4569             MOV     A,#CONST_FLASH_0019L
0C5C 27             4570             ADD     A,@R1                                   ;0019Æ«ÒÆÁ¿
0C5D F582           4571             MOV     DPL,A
                    4572     
0C5F 09             4573             INC     R1      
0C60 E7             4574             MOV     A,@R1   
0C61 FB             4575             MOV     R3,A                                    ;0019ÎÄ¼þ³¤¶È
                    4576             
0C62 850007         4577             MOV     AR7,AR0
0C65 C003           4578             PUSH    AR3
0C67 C000           4579             PUSH    AR0
0C69 C001           4580             PUSH    AR1
0C6B 120000   F     4581             CALL    _RDFlashXR                              ;¶Áfalshº¯ÊÖ»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²
                             »push r1
0C6E D001           4582             POP     AR1
0C70 D000           4583             POP     AR0
0C72 D003           4584             POP     AR3
0C74 09             4585             INC     R1
0C75 E8             4586             MOV     A,R0
0C76 2B             4587             ADD     A,R3
0C77 F8             4588             MOV     R0,A
0C78                4589     DSRC_VSTCell_SEG0002:
                    4590     
0C78 D001           4591             POP     AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
0C7A D0E0           4592             POP     ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4593     
                    4594     
                    4595             ;PUSH   AR1
                    4596             ;MOV    R1,#DATA_RXBUF + 21                     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4597             ;MOV    A,@R1   
                    4598             ;POP    AR1
                    4599             ;---JNB ACC.7,DSRC_VSTCell_SEGVSTTAIL
0C7C 20E702         4600             JB      ACC.7,DSRC_VSTCell_READ0002
0C7F 8028           4601             JMP     DSRC_VSTCell_SEGVSTTAIL
0C81                4602     DSRC_VSTCell_READ0002:
                    4603             
                    4604             ;PUSH   ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4605             ;PUSH   AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    4606             
                    4607             
                    4608             ;MOV    R1,#DATA_RXBUF + 23                     ;¶¨Î»r1µ½bst'Ô¤¶Á0002Æ«ÒÆÁ¿'
                    4609     
                    4610             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4611             ;MOV    A,#02
                    4612             ;MOV    A,R0
                    4613             ;CALL   _FUN_TEST_DISPLAY
                    4614             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4615             ;¶Á0002ÎÄ¼þ
0C81 758372         4616             MOV     DPH,#CONST_FLASH_0002H
0C84 7458           4617             MOV     A,#CONST_FLASH_0002L
0C86 27             4618             ADD     A,@R1                                   ;0002Æ«ÒÆÁ¿
0C87 F582           4619             MOV     DPL,A
                    4620     
0C89 09             4621             INC     R1      
0C8A E7             4622             MOV     A,@R1   
0C8B FB             4623             MOV     R3,A                                    ;0002ÎÄ¼þ³¤¶È
                    4624             
0C8C 850007         4625             MOV     AR7,AR0
0C8F C003           4626             PUSH    AR3
0C91 C000           4627             PUSH    AR0
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    74

0C93 C001           4628             PUSH    AR1
0C95 120000   F     4629             CALL    _RDFlashXR                              ;¶Áfalshº¯ÊÖ»²Ù×÷ÁË     r0£¬ËùÒÔÔÝ²
                             »push r1
0C98 D001           4630             POP     AR1
0C9A D000           4631             POP     AR0
0C9C D003           4632             POP     AR3
0C9E 09             4633             INC     R1
0C9F E8             4634             MOV     A,R0
0CA0 2B             4635             ADD     A,R3
0CA1 F8             4636             MOV     R0,A
                    4637             
                    4638             ;~~~~~ µ÷ÓÃ²âÊÔº¯Ê ~~~~~
                    4639             ;MOV    A,#02
                    4640             ;MOV    A,R0
                    4641             ;CALL   _FUN_TEST_DISPLAY
                    4642             ;~~~~~~~~~~~~~~~~~~~~~~~~
                    4643             ;POP    AR1     ;Ô¤¶Á0002Æ«ÒÆÁ¿
                    4644             ;POP    ACC     ;¸÷Ô¤¶ÁÐÅÏ¢´æÔÚ±êÖ¾
                    4645             
0CA2 8005           4646             JMP     DSRC_VSTCell_SEGVSTTAIL                 ;½áÊøÔ¤¶Á
                    4647             
                    4648             ;--- MF¿¨Ô¤¶Á ---
0CA4                4649     DSRC_VSTCell_MFPre:
0CA4 200002   F     4650             JB      BIT_INSERTCARD,DSRC_VSTCell_MFPreHaveCard
0CA7 8000           4651             JMP     DSRC_VSTCell_SEGVSTTAIL 
0CA9                4652     DSRC_VSTCell_MFPreHaveCard:
                    4653     
                    4654             
                    4655             ;--- R0½Óµ½·¢ËÍç·³åµÄÎ»ÖÃ ---
0CA9                4656     DSRC_VSTCell_SEGVSTTAIL:
                    4657             
                    4658             ;~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~
                    4659             ;MOV    A,R0
                    4660             ;CLR    C
                    4661             ;SUBB   A,#XDATA_TXBUF
                    4662             ;CALL   _FUN_TEST_DISPLAY
                    4663             ;~~~~~~~~~~~~~~~~~~~~~~~~       
0CA9 C000           4664             PUSH    AR0
                    4665             ;~~~~~~~~~~~~~~~~~~~~~~~~       
0CAB 30002E   F     4666             JNB     BIT_Cellinfo,DSRC_VSTCell_SEGVSTTAILZC
                    4667             
0CAE 7900     F     4668             MOV     R1,#DATA_RXBUF+21
0CB0 E7             4669             MOV     A,@R1
                    4670             
0CB1 7900     F     4671             MOV     R1,#DATA_RXBUF+23;22
0CB3 7B04           4672             MOV     R3,#4
0CB5                4673     DSRC_VSTCell_LOOP01:
0CB5 33             4674             RLC     A
0CB6 5002           4675             JNC     DSRC_VSTCell_LOOP01OV
0CB8 09             4676             INC     R1
0CB9 09             4677             INC     R1
0CBA                4678     DSRC_VSTCell_LOOP01OV:
0CBA DBF9           4679             DJNZ    R3,DSRC_VSTCell_LOOP01
                    4680             
                    4681             ;¼ÇÂ¼   CellId
0CBC 09             4682             INC     R1                                              ;È¥µô³¤¶È
0CBD 7800     F     4683             MOV     R0,#XDATA_CELLID                                ;xdata_hold
0CBF E7             4684             MOV     A,@R1
                    4685             
                    4686             ;Call   _fun_test_display       
                    4687             
                    4688             ;MOVX   @R0,A
0CC0 758301         4689             MOV     DPH,#1 
0CC3 8882           4690             MOV     DPL,R0 
0CC5 F0             4691             MOVX    @DPTR,A
                    4692             
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    75

0CC6 09             4693             INC     R1
0CC7 08             4694             INC     R0
0CC8 E7             4695             MOV     A,@R1
                    4696                     ;MOVX   @R0,A
0CC9 758301         4697             MOV     DPH,#1 
0CCC 8882           4698             MOV     DPL,R0 
0CCE F0             4699             MOVX    @DPTR,A
                    4700             
                    4701             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    4702             ;CALL   _FUN_TEST_DISPLAY
                    4703             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    4704             
                    4705             ;»ØÓ¦±íÊ¾ÒÑÊÕµ½ CellID
0CCF D000           4706             pop     ar0
0CD1 7400           4707             mov     a,#00H
                    4708                     ;MOVX   @R0,A
0CD3 758301         4709             MOV     DPH,#1 
0CD6 8882           4710             MOV     DPL,R0 
0CD8 F0             4711             MOVX    @DPTR,A
0CD9 08             4712             inc     r0
0CDA C000           4713             push    ar0
0CDC                4714     DSRC_VSTCell_SEGVSTTAILZC:
                    4715             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       
0CDC 7800     F     4716             MOV     R0,#XDATA_TXBUF + 12
                    4717                     ;MOVX   A,@R0
0CDE 758301         4718             MOV     DPH,#1
0CE1 8882           4719             MOV     DPL,R0
0CE3 E0             4720             MOVX    A,@DPTR
0CE4 A200     F     4721             MOV     C,BIT_privateInfo
0CE6 92E6           4722             MOV     ACC.6,C
0CE8 A200     F     4723             MOV     C,BIT_gbICCInfo
0CEA 92E5           4724             MOV     ACC.5,C
                    4725                     ;MOVX   @R0,A
0CEC 758301         4726             MOV     DPH,#1 
0CEF 8882           4727             MOV     DPL,R0 
0CF1 F0             4728             MOVX    @DPTR,A
0CF2 D000           4729             POP     AR0
                    4730             
                    4731             ;ÉèÖÃMACID
0CF4 900000   F     4732             MOV     DPTR,#STR_SYS_OBUID
0CF7 850007         4733             MOV     AR7,AR0
0CFA 120000   F     4734             CALL    _FUN_LIB_FLASHTOXDATA
                    4735             
                    4736             ;--- Éè±¸ÀàÐÍ ---
0CFD 7430           4737             MOV     A,#30h                                          ;10H
                    4738                     ;MOVX   @R0,A
0CFF 758301         4739             MOV     DPH,#1 
0D02 8882           4740             MOV     DPL,R0 
0D04 F0             4741             MOVX    @DPTR,A
0D05 08             4742             INC     R0
                    4743             
                    4744             ;--- Éè±¸×´Ì¬ ---
0D06 E4             4745             CLR     A                                       
0D07 A200     F     4746             MOV     C,BIT_INSERTCARD                                ;=1±íÊ¾µ±Ç°OBU²å¿¨;=0±íÊ¾µ±
                             Ç°OBUÃ»²å¿¨;
0D09 B3             4747             CPL     C                                               ;Óë¹ú±êDSRC¶¨ÒåÏà·´£¬ËùÒÔ·´
                             Ò»ÏÂ
0D0A 92E7           4748             MOV     ACC.7,C                                         ;iccPresent -- ´æÔÚ£¨0£©£¬Î
                             Þ£¨1£©
0D0C 92E3           4749             MOV     ACC.3,C                                         ;iccStatus -- IC¿¨Õ³££¨0£©£
                             ¬³ö´í£¨1£©
                    4750             
                    4751             ;~~~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~~~~~~
                    4752     ;       JB      BIT_PROMF,ASDFSDAF      
                    4753     ;       MOV     A,#03
                    4754     ;       JMP     DISPLAY
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    76

                    4755     ;ASDFSDAF:
                    4756     ;       MOV     A,#04
                    4757     ;DISPLAY:
                    4758     ;       JMP     _FUN_TEST_DISPLAY
                    4759             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0D0E E4             4760             CLR     A
0D0F A200     F     4761             MOV     C,BIT_INSERTCARD
0D11 B3             4762             CPL     C
0D12 92E7           4763             MOV     ACC.7,C
0D14 300010   F     4764             JNB     BIT_INSERTCARD,DSRC_VSTCell_CardTypeOver                ;µ±Ç°ÎÞ¿¨
0D17 300002   F     4765             JNB     BIT_ISContact,DSRC_VSTCell_CardTypePro          ;µ±Ç°ÊÇ·Ç½Ó¿¨
0D1A                4766     DSRC_VSTCell_CardTypeContact:                                   ;½Ó´¥Ê½CPU¿¨            0  
                                  0       0       
0D1A 800B           4767             JMP     DSRC_VSTCell_CardTypeOver                               ;µ±Ç°ÊÇ½Ó´¥¿¨
0D1C                4768     DSRC_VSTCell_CardTypePro:                                               ;·Ç½Ó´¥Ê½CPU¿¨     
                                  0       1       0
0D1C 300004   F     4769             JNB     BIT_PROMF,DSRC_VSTCell_CardTypeMF       
0D1F D2E5           4770             SETB    ACC.5
0D21 8004           4771             JMP     DSRC_VSTCell_CardTypeOver
0D23                4772     DSRC_VSTCell_CardTypeMF:                                                ;·Ç½Ó´¥Ê½Âß¼­¼ÓÃÜ¿¨
                                  0       1       1       
0D23 D2E5           4773             SETB    ACC.5
0D25 D2E4           4774             SETB    ACC.4
0D27                4775     DSRC_VSTCell_CardTypeOver:
                    4776             
                    4777             ;Locked -- OBUÎ´Ëø£¨0£©£¬±»Ëø£¨1£© Acc.2
                    4778             ;Tampered -- OBUÎ´±»²ð¶¯£¨0£©£¬±»²ð¶¯£¨1£© acc.1
                    4779             ;²ð¶¯µÄ±ê¼ÇÓÉ£¬²ð¶¯´ÎÊÊÇ·ñÎª0¡£=0±íÊ¾²ð¶¯£¬<> 0 ±íÊ¾Ã»ÓÐ²ð¶¯¹¡£
                    4780     ;       MOV     R1,#XDATA_FIX
                    4781     ;       PUSH    ACC
                    4782     ;       ANL     A,#0FH
                    4783                     
                    4784     ;       JZ      DSRC_VSTCell_Tampered
                    4785     ;       CLR     C
                    4786     ;       JMP     DSRC_VSTCell_TamperedOver
                    4787     ;DSRC_VSTCell_Tampered: 
                    4788     ;       SETB    C
                    4789     ;       ;SETB   
                    4790     ;DSRC_VSTCell_TamperedOver:
                    4791     ;       POP     ACC
                    4792     
0D27 A200     F     4793             MOV     C,BIT_CD
                    4794             ;---clr c
0D29 92E1           4795             MOV     ACC.1,C
                    4796             
                    4797             ;Battery ¨C OBUµç³ØÕ³££¨0£©£¬µç³ØµçÁ¿µÍ£¨1£©    acc.0   
                    4798                     ;MOVX   @R0,A
0D2B 758301         4799             MOV     DPH,#1
0D2E 8882           4800             MOV     DPL,R0
0D30 F0             4801             MOVX    @DPTR,A
0D31 08             4802             INC     R0
                    4803             
                    4804             ;ESAMµÚ 27 ×Ö½Ú"²ðÐ¶×´Ì¬"
                    4805             ;---MOV A,#0FFH
                    4806             ;PUSH   AR0
                    4807             ;MOV    DPH,#CONST_FLASH_SYSINFOH
                    4808             ;MOV    DPL,#CONST_FLASH_SYSINFOL + 26
                    4809             ;MOV    AR7,#XDATA_FIX
                    4810             ;MOV    R3,#1
                    4811             ;CALL   _RDFlashXR      
                    4812             ;POP    AR0
                    4813             
0D32 7900     F     4814             MOV     R1,#XDATA_FIX
                    4815                     ;MOVX   A,@R1
0D34 758301         4816             MOV     DPH,#1
0D37 8982           4817             MOV     DPL,R1
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    77

0D39 E0             4818             MOVX    A,@DPTR
                    4819             ;MOV    A,#0FFH;ÔÝ¼Ó
                    4820             ;CLR    A
                    4821             
                    4822             ;MOVX   @R0,A
0D3A 758301         4823             MOV     DPH,#1 
0D3D 8882           4824             MOV     DPL,R0 
0D3F F0             4825             MOVX    @DPTR,A
0D40 08             4826             INC     R0
                    4827             
                    4828             ;CLR    A
                    4829             ;MOV    C,BIT_Cellinfo
                    4830             ;;MOV   ACC.0,C
                    4831             ;CALL   _FUN_TEST_DISPLAY       
0D41 020000   F     4832             JMP     SEG_DSRC_GETSendBufLen ;VST_OVER
                    4833             
                    4834             END
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    78

                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                             
                             
                             
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    79

SYMBOL TABLE LISTING
------ ----- -------


N A M E                                T Y P E  V A L U E   ATTRIBUTES

?CO?DSRC?COMMLIB. . . . . . . . . . .  C SEG    001CH       REL=UNIT
?PR?DSRC?MATER. . . . . . . . . . . .  C SEG    0D44H       REL=UNIT
ACC . . . . . . . . . . . . . . . . .  D ADDR   00E0H   A   
AR0 . . . . . . . . . . . . . . . . .  D ADDR   0000H   A   
AR1 . . . . . . . . . . . . . . . . .  D ADDR   0001H   A   
AR2 . . . . . . . . . . . . . . . . .  D ADDR   0002H   A   
AR3 . . . . . . . . . . . . . . . . .  D ADDR   0003H   A   
AR4 . . . . . . . . . . . . . . . . .  D ADDR   0004H   A   
AR5 . . . . . . . . . . . . . . . . .  D ADDR   0005H   A   
AR6 . . . . . . . . . . . . . . . . .  D ADDR   0006H   A   
AR7 . . . . . . . . . . . . . . . . .  D ADDR   0007H   A   
B . . . . . . . . . . . . . . . . . .  D ADDR   00F0H   A   
BIT_ACCESS. . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_BJ1219. . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_BUFADDR . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_CD. . . . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_CELLINFO. . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_CHANNELFLAG . . . . . . . . . . .  B ADDR   -----       EXT
BIT_ESAMERR . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_ESAMICC . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_ESAMOK. . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_GBICCINFO . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_GETRESULT . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_INSERTCARD. . . . . . . . . . . .  B ADDR   -----       EXT
BIT_ISCONTACT . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_KEY . . . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_N . . . . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_PRIVATEINFO . . . . . . . . . . .  B ADDR   -----       EXT
BIT_PROMF . . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_SERIALOVERTIMERX. . . . . . . . .  B ADDR   -----       EXT
BIT_SETMMI. . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_T0T1. . . . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_VERIFY. . . . . . . . . . . . . .  B ADDR   -----       EXT
BRT . . . . . . . . . . . . . . . . .  N NUMB   009CH   A   
BUSY. . . . . . . . . . . . . . . . .  B ADDR   0020H.0 A   
CCAP0H. . . . . . . . . . . . . . . .  N NUMB   00FAH   A   
CCAP0L. . . . . . . . . . . . . . . .  N NUMB   00EAH   A   
CCAP1H. . . . . . . . . . . . . . . .  N NUMB   00FBH   A   
CCAP1L. . . . . . . . . . . . . . . .  N NUMB   00EBH   A   
CCAP2H. . . . . . . . . . . . . . . .  N NUMB   00FCH   A   
CCAP2L. . . . . . . . . . . . . . . .  N NUMB   00ECH   A   
CCAP3H. . . . . . . . . . . . . . . .  N NUMB   00FDH   A   
CCAP3L. . . . . . . . . . . . . . . .  N NUMB   00EDH   A   
CCAP4H. . . . . . . . . . . . . . . .  N NUMB   00FEH   A   
CCAP4L. . . . . . . . . . . . . . . .  N NUMB   00EEH   A   
CCAP5H. . . . . . . . . . . . . . . .  N NUMB   00FFH   A   
CCAP5L. . . . . . . . . . . . . . . .  N NUMB   00EFH   A   
CCAPM0. . . . . . . . . . . . . . . .  N NUMB   00DAH   A   
CCAPM1. . . . . . . . . . . . . . . .  N NUMB   00DBH   A   
CCAPM2. . . . . . . . . . . . . . . .  N NUMB   00DCH   A   
CCAPM3. . . . . . . . . . . . . . . .  N NUMB   00DDH   A   
CCAPM4. . . . . . . . . . . . . . . .  N NUMB   00DEH   A   
CCAPM5. . . . . . . . . . . . . . . .  N NUMB   00DFH   A   
CCF0. . . . . . . . . . . . . . . . .  B ADDR   00D8H.0 A   
CCF1. . . . . . . . . . . . . . . . .  B ADDR   00D8H.1 A   
CCF2. . . . . . . . . . . . . . . . .  B ADDR   00D8H.2 A   
CCF3. . . . . . . . . . . . . . . . .  B ADDR   00D8H.3 A   
CCF4. . . . . . . . . . . . . . . . .  B ADDR   00D8H.4 A   
CCF5. . . . . . . . . . . . . . . . .  B ADDR   00D8H.5 A   
CCON. . . . . . . . . . . . . . . . .  N NUMB   00D8H   A   
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    80

CF. . . . . . . . . . . . . . . . . .  B ADDR   00D8H.7 A   
CH. . . . . . . . . . . . . . . . . .  N NUMB   00F9H   A   
CL. . . . . . . . . . . . . . . . . .  N NUMB   00E9H   A   
CMOD. . . . . . . . . . . . . . . . .  N NUMB   00D9H   A   
CONST_ACTIONTYPE_GETRAND. . . . . . .  N NUMB   0002H   A   
CONST_ACTIONTYPE_GETSECURE. . . . . .  N NUMB   0000H   A   
CONST_ACTIONTYPE_SETMMI . . . . . . .  N NUMB   0004H   A   
CONST_ACTIONTYPE_SETSECURE. . . . . .  N NUMB   0001H   A   
CONST_ACTIONTYPE_TRANSFERCHANNEL. . .  N NUMB   0003H   A   
CONST_ACT_H . . . . . . . . . . . . .  N NUMB   0003H   A   
CONST_ACT_H_H . . . . . . . . . . . .  N NUMB   0001H   A   
CONST_ACT_H_L . . . . . . . . . . . .  N NUMB   0000H   A   
CONST_ACT_L . . . . . . . . . . . . .  N NUMB   0001H   A   
CONST_ACT_L_H . . . . . . . . . . . .  N NUMB   0006H   A   
CONST_ACT_L_L . . . . . . . . . . . .  N NUMB   000AH   A   
CONST_ACT_M . . . . . . . . . . . . .  N NUMB   0002H   A   
CONST_ACT_M_H . . . . . . . . . . . .  N NUMB   0000H   A   
CONST_ACT_M_L . . . . . . . . . . . .  N NUMB   0006H   A   
CONST_ACT_V . . . . . . . . . . . . .  N NUMB   0002H   A   
CONST_BAUD_115200 . . . . . . . . . .  N NUMB   0002H   A   
CONST_BAUD_115200PC . . . . . . . . .  N NUMB   0003H   A   
CONST_BAUD_230000 . . . . . . . . . .  N NUMB   0004H   A   
CONST_BAUD_38400. . . . . . . . . . .  N NUMB   0001H   A   
CONST_BAUD_38400PC. . . . . . . . . .  N NUMB   0005H   A   
CONST_BAUD_9600 . . . . . . . . . . .  N NUMB   0000H   A   
CONST_BAUD_9600PC . . . . . . . . . .  N NUMB   0006H   A   
CONST_BAUD_BITFULL12. . . . . . . . .  N NUMB   000CH   A   
CONST_BAUD_BITFULL20. . . . . . . . .  N NUMB   000EH   A   
CONST_BAUD_BITFULL28. . . . . . . . .  N NUMB   0010H   A   
CONST_BAUD_BITFULL8 . . . . . . . . .  N NUMB   000BH   A   
CONST_BAUD_BITHALF12. . . . . . . . .  N NUMB   000CH   A   
CONST_BAUD_CURRENTBITFULL . . . . . .  N NUMB   00B3H   A   
CONST_BAUD_CURRENTBITHALF . . . . . .  N NUMB   0058H   A   
CONST_BAUD_FULL115200 . . . . . . . .  N NUMB   001DH   A   
CONST_BAUD_FULL230000 . . . . . . . .  N NUMB   000FH   A   
CONST_BAUD_FULL38400. . . . . . . . .  N NUMB   005DH   A   
CONST_BAUD_FULL9600 . . . . . . . . .  N NUMB   00B3H   A   
CONST_BAUD_HALF115200 . . . . . . . .  N NUMB   000DH   A   
CONST_BAUD_HALF230000 . . . . . . . .  N NUMB   0008H   A   
CONST_BAUD_HALF38400. . . . . . . . .  N NUMB   002DH   A   
CONST_BAUD_HALF9600 . . . . . . . . .  N NUMB   0058H   A   
CONST_BAUD_HAND115200 . . . . . . . .  N NUMB   00F8H   A   
CONST_BAUD_HAND115200PC . . . . . . .  N NUMB   00F3H   A   
CONST_BAUD_HAND230000 . . . . . . . .  N NUMB   00FCH   A   
CONST_BAUD_HAND38400. . . . . . . . .  N NUMB   00E9H   A   
CONST_BAUD_HAND38400PC. . . . . . . .  N NUMB   00D8H   A   
CONST_BAUD_HAND9600 . . . . . . . . .  N NUMB   00A3H   A   
CONST_BAUD_HAND9600PC . . . . . . . .  N NUMB   0060H   A   
CONST_BLACK_H . . . . . . . . . . . .  N NUMB   00FFH   A   
CONST_BLACK_L . . . . . . . . . . . .  N NUMB   00FFH   A   
CONST_BSTLIMIT. . . . . . . . . . . .  N NUMB   0008H   A   
CONST_BSTLIMIT02. . . . . . . . . . .  N NUMB   0064H   A   
CONST_CARD_CONSUME. . . . . . . . . .  N NUMB   0016H   A   
CONST_CARD_PASS . . . . . . . . . . .  N NUMB   0017H   A   
CONST_CELLFILE_H. . . . . . . . . . .  N NUMB   0000H   A   
CONST_CELLFILE_L. . . . . . . . . . .  N NUMB   0009H   A   
CONST_DATA_VALUE1 . . . . . . . . . .  N NUMB   000FH   A   
CONST_DATA_VALUE2 . . . . . . . . . .  N NUMB   00DEH   A   
CONST_DSRC_ACTION . . . . . . . . . .  N NUMB   0007H   A   
CONST_DSRC_ACTIONTYPE . . . . . . . .  N NUMB   0009H   A   
CONST_DSRC_CHANNELIDICC . . . . . . .  N NUMB   0001H   A   
CONST_DSRC_CHANNELIDSAM . . . . . . .  N NUMB   0002H   A   
CONST_DSRC_CONTAIN. . . . . . . . . .  N NUMB   000AH   A   
CONST_DSRC_DID. . . . . . . . . . . .  N NUMB   0008H   A   
CONST_DSRC_FILDIDAPPKEY . . . . . . .  N NUMB   0000H   A   
CONST_DSRC_FILDIDCONSUME. . . . . . .  N NUMB   0002H   A   
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    81

CONST_DSRC_FILDIDHOLD . . . . . . . .  N NUMB   0003H   A   
CONST_DSRC_FILDIDVEHICLE. . . . . . .  N NUMB   0001H   A   
CONST_DSRC_FILL . . . . . . . . . . .  N NUMB   000BH   A   
CONST_DSRC_HEAD . . . . . . . . . . .  N NUMB   0006H   A   
CONST_DSRC_LLCCTRL. . . . . . . . . .  N NUMB   0005H   A   
CONST_DSRC_MACCTRL. . . . . . . . . .  N NUMB   0004H   A   
CONST_ESAMCELLFILE_H. . . . . . . . .  N NUMB   00EFH   A   
CONST_ESAMCELLFILE_L. . . . . . . . .  N NUMB   0007H   A   
CONST_ETC_INPUT . . . . . . . . . . .  N NUMB   0003H   A   
CONST_FALSH_POWERH. . . . . . . . . .  N NUMB   0072H   A   
CONST_FALSH_POWERL. . . . . . . . . .  N NUMB   00F7H   A   
CONST_FALSH_PREFLAG02H. . . . . . . .  N NUMB   0072H   A   
CONST_FALSH_PREFLAG02L. . . . . . . .  N NUMB   00F5H   A   
CONST_FALSH_PREFLAG03H. . . . . . . .  N NUMB   0072H   A   
CONST_FALSH_PREFLAG03L. . . . . . . .  N NUMB   00F6H   A   
CONST_FALSH_PREFLAGH. . . . . . . . .  N NUMB   0072H   A   
CONST_FALSH_PREFLAGL. . . . . . . . .  N NUMB   00F4H   A   
CONST_FALSH_PREFLAGLEN. . . . . . . .  N NUMB   0001H   A   
CONST_FLAG_INPUT. . . . . . . . . . .  N NUMB   0000H   A   
CONST_FLAG_OUTPUT . . . . . . . . . .  N NUMB   0001H   A   
CONST_FLASH_0002H . . . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0002L . . . . . . . . . .  N NUMB   0058H   A   
CONST_FLASH_0002LEN . . . . . . . . .  N NUMB   0004H   A   
CONST_FLASH_0012H . . . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0012L . . . . . . . . . .  N NUMB   005CH   A   
CONST_FLASH_0012LEN . . . . . . . . .  N NUMB   0028H   A   
CONST_FLASH_0015H . . . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0015L . . . . . . . . . .  N NUMB   0084H   A   
CONST_FLASH_0015LEN . . . . . . . . .  N NUMB   002BH   A   
CONST_FLASH_0019GBLEN . . . . . . . .  N NUMB   002BH   A   
CONST_FLASH_0019H . . . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0019L . . . . . . . . . .  N NUMB   00AFH   A   
CONST_FLASH_0019LEN . . . . . . . . .  N NUMB   003CH   A   
CONST_FLASH_BEACONIDUNIXTIMEH . . . .  N NUMB   0072H   A   
CONST_FLASH_BEACONIDUNIXTIMEL . . . .  N NUMB   00ECH   A   
CONST_FLASH_BEACONIDUNIXTIMELEN . . .  N NUMB   0008H   A   
CONST_FLASH_BLOCK01 . . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_CARDTYPELEN . . . . . . .  N NUMB   0001H   A   
CONST_FLASH_FILELEN . . . . . . . . .  N NUMB   00ECH   A   
CONST_FLASH_LASTCARDH . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_LASTCARDL . . . . . . . .  N NUMB   00EBH   A   
CONST_FLASH_STARTHIGH . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_STARTLOW. . . . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYS0020H. . . . . . . . .  N NUMB   006CH   A   
CONST_FLASH_SYS0020L. . . . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYS0020NUMH . . . . . . .  N NUMB   006AH   A   
CONST_FLASH_SYS0020NUML . . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYSINFOH. . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_SYSINFOL. . . . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYSINFOLEN. . . . . . . .  N NUMB   0058H   A   
CONST_GDO2_MCSM2. . . . . . . . . . .  N NUMB   0002H   A   
CONST_GDO2_VALUE. . . . . . . . . . .  N NUMB   0046H   A   
CONST_GSM_MAXNUM. . . . . . . . . . .  N NUMB   00F0H   A   
CONST_GSM_NUM . . . . . . . . . . . .  N NUMB   0008H   A   
CONST_GSM_PJNUM . . . . . . . . . . .  N NUMB   0014H   A   
CONST_HANDSECOND. . . . . . . . . . .  N NUMB   0015H   A   
CONST_HOLD_5823RX . . . . . . . . . .  N NUMB   0000H   A   
CONST_HOLD_5823TX . . . . . . . . . .  N NUMB   0001H   A   
CONST_INPUT_ISENABLE. . . . . . . . .  N NUMB   0001H   A   
CONST_LHX_FLAG. . . . . . . . . . . .  N NUMB   0002H   A   
CONST_MAX_RXNUM . . . . . . . . . . .  N NUMB   0005H   A   
CONST_MCU_WKCTH . . . . . . . . . . .  N NUMB   0008H   A   
CONST_MCU_WKCTL . . . . . . . . . . .  N NUMB   00FFH   A   
CONST_MF_DECREMENT. . . . . . . . . .  N NUMB   0002H   A   
CONST_MF_INCREMENT. . . . . . . . . .  N NUMB   0003H   A   
CONST_MF_RC500DECREMENT . . . . . . .  N NUMB   00C0H   A   
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    82

CONST_MF_RC500INCREMENT . . . . . . .  N NUMB   00C1H   A   
CONST_MF_READ . . . . . . . . . . . .  N NUMB   0000H   A   
CONST_MF_RESTOR . . . . . . . . . . .  N NUMB   0004H   A   
CONST_MF_WRITE. . . . . . . . . . . .  N NUMB   0001H   A   
CONST_MTC_INPUT . . . . . . . . . . .  N NUMB   0001H   A   
CONST_PPS_115200. . . . . . . . . . .  N NUMB   0018H   A   
CONST_PPS_230000. . . . . . . . . . .  N NUMB   0096H   A   
CONST_PPS_38400 . . . . . . . . . . .  N NUMB   0013H   A   
CONST_PPS_9600. . . . . . . . . . . .  N NUMB   0010H   A   
CONST_PRO_OVERTIME2S. . . . . . . . .  N NUMB   00FAH   A   
CONST_RTCOVERFLOW . . . . . . . . . .  N NUMB   0090H   A   
CONST_RTC_OFF . . . . . . . . . . . .  N NUMB   00FFH   A   
CONST_RTC_ON. . . . . . . . . . . . .  N NUMB   0055H   A   
CONST_SOF . . . . . . . . . . . . . .  N NUMB   0000H   A   
CONST_SOFTBYTESP. . . . . . . . . . .  N NUMB   0014H   A   
CONST_SOFTFIRSTSCANTIME . . . . . . .  N NUMB   0010H   A   
CONST_SOFTFIRSTSCANTIMEXX . . . . . .  N NUMB   00FFH   A   
CONST_SOFTSECOND. . . . . . . . . . .  N NUMB   0070H   A   
CONST_SSRC_FID. . . . . . . . . . . .  N NUMB   000CH   A   
CONST_STATE_5823INIER . . . . . . . .  N NUMB   0007H   A   
CONST_STATE_5823SLEEPER . . . . . . .  N NUMB   0008H   A   
CONST_STATE_ACCEPTOVER. . . . . . . .  N NUMB   0003H   A   
CONST_STATE_ACCEPTOVERLEN . . . . . .  N NUMB   0004H   A   
CONST_STATE_ACTCARDINVALID. . . . . .  N NUMB   0006H   A   
CONST_STATE_ACTIVEFAIL. . . . . . . .  N NUMB   0004H   A   
CONST_STATE_AUTHER. . . . . . . . . .  N NUMB   0006H   A   
CONST_STATE_BASE01ANTICOLL. . . . . .  N NUMB   001DH   A   
CONST_STATE_BASE01CONTACT . . . . . .  N NUMB   0015H   A   
CONST_STATE_BASE01ESAMDF01. . . . . .  N NUMB   0014H   A   
CONST_STATE_BASE01RATS. . . . . . . .  N NUMB   001FH   A   
CONST_STATE_BASE01RE. . . . . . . . .  N NUMB   001CH   A   
CONST_STATE_BASE01SEL . . . . . . . .  N NUMB   001EH   A   
CONST_STATE_BASE02ANTICOLL. . . . . .  N NUMB   0019H   A   
CONST_STATE_BASE02CONTACT . . . . . .  N NUMB   0016H   A   
CONST_STATE_BASE02RATS. . . . . . . .  N NUMB   001BH   A   
CONST_STATE_BASE02RE. . . . . . . . .  N NUMB   0018H   A   
CONST_STATE_BASE02SEL . . . . . . . .  N NUMB   001AH   A   
CONST_STATE_BASEESAMDF01. . . . . . .  N NUMB   000BH   A   
CONST_STATE_BASEN01INIT . . . . . . .  N NUMB   0013H   A   
CONST_STATE_BASENINIT . . . . . . . .  N NUMB   000AH   A   
CONST_STATE_CARDPREDEAL0002 . . . . .  N NUMB   000DH   A   
CONST_STATE_CARDPREDEAL0012 . . . . .  N NUMB   000EH   A   
CONST_STATE_CARDPREDEAL0015 . . . . .  N NUMB   000FH   A   
CONST_STATE_CARDPREDEAL0019 . . . . .  N NUMB   0010H   A   
CONST_STATE_CARDPREDEAL1001 . . . . .  N NUMB   000CH   A   
CONST_STATE_CARDPREDEAL3F00 . . . . .  N NUMB   0011H   A   
CONST_STATE_CARDPREDEAL81 . . . . . .  N NUMB   0012H   A   
CONST_STATE_EXMEMORYER. . . . . . . .  N NUMB   0021H   A   
CONST_STATE_EXMEMORYER02. . . . . . .  N NUMB   0022H   A   
CONST_STATE_FALSE . . . . . . . . . .  N NUMB   00FFH   A   
CONST_STATE_GETSECURESELFILEER. . . .  N NUMB   0009H   A   
CONST_STATE_ILLEGALACTCARD. . . . . .  N NUMB   0005H   A   
CONST_STATE_ILLEGALINPUTCARD. . . . .  N NUMB   0002H   A   
CONST_STATE_INPUTCARDINVALID. . . . .  N NUMB   0003H   A   
CONST_STATE_INPUTFAIL . . . . . . . .  N NUMB   0001H   A   
CONST_STATE_MEMORYER. . . . . . . . .  N NUMB   0020H   A   
CONST_STATE_RSTCPUER. . . . . . . . .  N NUMB   0005H   A   
CONST_STATE_SERIALACCPET. . . . . . .  N NUMB   0001H   A   
CONST_STATE_SERIALOVERTIME. . . . . .  N NUMB   0002H   A   
CONST_STATE_TEST. . . . . . . . . . .  N NUMB   0017H   A   
CONST_STATE_TRUE. . . . . . . . . . .  N NUMB   0000H   A   
CONST_SYS_55. . . . . . . . . . . . .  N NUMB   0055H   A   
CONST_SYS_AA. . . . . . . . . . . . .  N NUMB   00AAH   A   
CONST_SYS_OBUIDLEN. . . . . . . . . .  N NUMB   0004H   A   
CONST_SYS_POWERONTIMER. . . . . . . .  N NUMB   000AH   A   
CONST_SYS_PREFLAG . . . . . . . . . .  N NUMB   0088H   A   
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    83

CONST_SYS_RTCOVERTIME . . . . . . . .  N NUMB   0064H   A   
CONST_SYS_TRADECONFINE. . . . . . . .  N NUMB   00FFH   A   
CONST_TIMEER02. . . . . . . . . . . .  N NUMB   0001H   A   
CONST_TIMEER03. . . . . . . . . . . .  N NUMB   00FEH   A   
CONST_TIMEER04. . . . . . . . . . . .  N NUMB   0001H   A   
CONST_VSTLIMIT. . . . . . . . . . . .  N NUMB   00FFH   A   
CONST_WHITE_H . . . . . . . . . . . .  N NUMB   0000H   A   
CONST_WHITE_L . . . . . . . . . . . .  N NUMB   0031H   A   
CONST_WORKSTAION_0. . . . . . . . . .  N NUMB   0000H   A   
CONST_WORKSTAION_1. . . . . . . . . .  N NUMB   0001H   A   
CONST_WORKSTAION_2. . . . . . . . . .  N NUMB   0002H   A   
CONST_WORKSTAION_3. . . . . . . . . .  N NUMB   0003H   A   
CR. . . . . . . . . . . . . . . . . .  B ADDR   00D8H.6 A   
DATA_CARDNO . . . . . . . . . . . . .  D ADDR   -----       EXT
DATA_DSRCRXLEN. . . . . . . . . . . .  D ADDR   -----       EXT
DATA_DSRCTXLEN. . . . . . . . . . . .  D ADDR   -----       EXT
DATA_RXBUF. . . . . . . . . . . . . .  D ADDR   -----       EXT
DPH . . . . . . . . . . . . . . . . .  D ADDR   0083H   A   
DPL . . . . . . . . . . . . . . . . .  D ADDR   0082H   A   
DSRC. . . . . . . . . . . . . . . . .  N NUMB   -----       
DSRCSPECIAL_COMPLEXSEGSPECIALZZ . . .  C ADDR   0478H   R   SEG=?PR?DSRC?MATER
DSRC_GETSECURE_ENKEY. . . . . . . . .  C ADDR   06EEH   R   SEG=?PR?DSRC?MATER
DSRC_GETSECURE_ENKEYOVER. . . . . . .  C ADDR   06F0H   R   SEG=?PR?DSRC?MATER
DSRC_GETSECURE_JBM. . . . . . . . . .  C ADDR   06D8H   R   SEG=?PR?DSRC?MATER
DSRC_GETSECURE_NOTENKEY . . . . . . .  C ADDR   06E6H   R   SEG=?PR?DSRC?MATER
DSRC_GETSECURE_NOTNEXTSEG . . . . . .  C ADDR   0705H   R   SEG=?PR?DSRC?MATER
DSRC_GETSECURE_OVER . . . . . . . . .  C ADDR   06F1H   R   SEG=?PR?DSRC?MATER
DSRC_GETSECURE_RIGHT. . . . . . . . .  C ADDR   06D6H   R   SEG=?PR?DSRC?MATER
DSRC_OBUCHANNEL_B01 . . . . . . . . .  C ADDR   08F5H   R   SEG=?PR?DSRC?MATER
DSRC_OBUCHANNEL_B02 . . . . . . . . .  C ADDR   091EH   R   SEG=?PR?DSRC?MATER
DSRC_OBUCHANNEL_BBB . . . . . . . . .  C ADDR   0954H   R   SEG=?PR?DSRC?MATER
DSRC_OBUCHANNEL_BOVER . . . . . . . .  C ADDR   0957H   R   SEG=?PR?DSRC?MATER
DSRC_OBUCHANNEL_NOCMD . . . . . . . .  C ADDR   09B3H   R   SEG=?PR?DSRC?MATER
DSRC_OBUCHANNEL_OVER. . . . . . . . .  C ADDR   09B5H   R   SEG=?PR?DSRC?MATER
DSRC_OBUCHANNEL_ZZ01. . . . . . . . .  C ADDR   08DDH   R   SEG=?PR?DSRC?MATER
DSRC_POWER_1BYTE. . . . . . . . . . .  C ADDR   074CH   R   SEG=?PR?DSRC?MATER
DSRC_POWER_OVER . . . . . . . . . . .  C ADDR   0761H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_0019NOEAUALOBULOOPER . .  C ADDR   05F4H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_ACTIONOTHER. . . . . . .  C ADDR   04A9H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_ACTIONOVER . . . . . . .  C ADDR   04B1H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_ACTIONSETMMI . . . . . .  C ADDR   049FH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CARD0020INIT . . . . . .  C ADDR   05D6H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELESAM. . . . . . .  C ADDR   0517H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELGETSECURE . . . .  C ADDR   04BEH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELICC . . . . . . .  C ADDR   0510H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELIDOVER. . . . . .  C ADDR   0536H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELOBU . . . . . . .  C ADDR   0502H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELOTHER . . . . . .  C ADDR   052CH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELOVER. . . . . . .  C ADDR   04DDH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELPOWER . . . . . .  C ADDR   051EH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELSETMMI. . . . . .  C ADDR   04D5H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CHANNELTRANSFERCHANNEL .  C ADDR   04C8H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_CLEARCARD. . . . . . . .  C ADDR   05AEH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_DISABLERTC . . . . . . .  C ADDR   05EDH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_IDGETSECURE. . . . . . .  C ADDR   04E4H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_IDGETSECUREACCES . . . .  C ADDR   04EBH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_IDSETMMI . . . . . . . .  C ADDR   0541H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_IDTRANSFERCHANNEL. . . .  C ADDR   04FEH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_INPUT. . . . . . . . . .  C ADDR   05F0H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_OUTPUT . . . . . . . . .  C ADDR   057BH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_OVER . . . . . . . . . .  C ADDR   0682H   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_OVERSWGSM. . . . . . . .  C ADDR   067EH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_SWGSM. . . . . . . . . .  C ADDR   054EH   R   SEG=?PR?DSRC?MATER
DSRC_SPECIAL_ZCLC . . . . . . . . . .  C ADDR   048EH   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNELOBU_CARDERR . . .  C ADDR   0878H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNELOBU_CARDLOOP. . .  C ADDR   085CH   R   SEG=?PR?DSRC?MATER
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    84

DSRC_TRANSFERCHANNELOBU_CARDRIGHT . .  C ADDR   089BH   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNELOBU_LOOPEND . . .  C ADDR   08B0H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_CARD . . . . . .  C ADDR   0797H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_CARDERR. . . . .  C ADDR   07F7H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_CARDLOOP . . . .  C ADDR   0799H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_CARDRIGHT. . . .  C ADDR   081AH   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_CARDRIGHTZZ. . .  C ADDR   0831H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_DEALOVER . . . .  C ADDR   07EEH   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_ESAMSPE. . . . .  C ADDR   07C7H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_ESAMSPEADDTIME .  C ADDR   07CDH   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_ESAMSPENOADDTIME  C ADDR   07DDH   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_LOOPEND. . . . .  C ADDR   0834H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_NOCARD . . . . .  C ADDR   0773H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_NOCARDLOOP . . .  C ADDR   0775H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_NOTNEXTSEG . . .  C ADDR   0850H   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_OVER . . . . . .  C ADDR   083CH   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_RESULT . . . . .  C ADDR   07EBH   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_SPEOVER. . . . .  C ADDR   07EBH   R   SEG=?PR?DSRC?MATER
DSRC_TRANSFERCHANNEL_USERSPE. . . . .  C ADDR   07AEH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_BEANCONLOOP. . . . . . .  C ADDR   09C8H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_BEANCONLOOP1 . . . . . .  C ADDR   09F0H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_CARDTYPECONTACT. . . . .  C ADDR   0D1AH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_CARDTYPEMF . . . . . . .  C ADDR   0D23H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_CARDTYPEOVER . . . . . .  C ADDR   0D27H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_CARDTYPEPRO. . . . . . .  C ADDR   0D1CH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_CPUPRE . . . . . . . . .  C ADDR   0BB1H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_CPUPREHAVECARD . . . . .  C ADDR   0BBFH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_CPUPRESTART. . . . . . .  C ADDR   0BB9H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_INITMODE01 . . . . . . .  C ADDR   0AD7H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_INITMODE02 . . . . . . .  C ADDR   0B26H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_INITMODEOTHER. . . . . .  C ADDR   0B75H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_INITMODEOVER . . . . . .  C ADDR   0B77H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_LOOP01 . . . . . . . . .  C ADDR   0CB5H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_LOOP01OV . . . . . . . .  C ADDR   0CBAH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_MFPRE. . . . . . . . . .  C ADDR   0CA4H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_MFPREHAVECARD. . . . . .  C ADDR   0CA9H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_NOTUSERCARD. . . . . . .  C ADDR   0A34H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_PRE. . . . . . . . . . .  C ADDR   0A47H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_PREAID00 . . . . . . . .  C ADDR   0A4AH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_PREAID01 . . . . . . . .  C ADDR   0B7AH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_PREAID01READSYSINFO. . .  C ADDR   0B93H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_PREAID01START. . . . . .  C ADDR   0B83H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_PREREADSYSINFOOVER . . .  C ADDR   0BA8H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_READ0002 . . . . . . . .  C ADDR   0C81H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG0002. . . . . . . . .  C ADDR   0C78H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG0012. . . . . . . . .  C ADDR   0C08H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG001202E . . . . . . .  C ADDR   0C1AH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG0012START . . . . . .  C ADDR   0C15H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG0015. . . . . . . . .  C ADDR   0BE7H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG001512E . . . . . . .  C ADDR   0BE2H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG0015START . . . . . .  C ADDR   0BDDH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG0019. . . . . . . . .  C ADDR   0C3BH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG001902E . . . . . . .  C ADDR   0C4DH   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG001912E . . . . . . .  C ADDR   0C52H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG001915E . . . . . . .  C ADDR   0C57H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEG0019START . . . . . .  C ADDR   0C48H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEGVSTTAIL . . . . . . .  C ADDR   0CA9H   R   SEG=?PR?DSRC?MATER
DSRC_VSTCELL_SEGVSTTAILZC . . . . . .  C ADDR   0CDCH   R   SEG=?PR?DSRC?MATER
DSRC_VST_BEANCONLOOP. . . . . . . . .  C ADDR   001DH   R   SEG=?PR?DSRC?MATER
DSRC_VST_BEANCONLOOP1 . . . . . . . .  C ADDR   0037H   R   SEG=?PR?DSRC?MATER
DSRC_VST_BJ . . . . . . . . . . . . .  C ADDR   034FH   R   SEG=?PR?DSRC?MATER
DSRC_VST_BJCPUPRE . . . . . . . . . .  C ADDR   037DH   R   SEG=?PR?DSRC?MATER
DSRC_VST_BJCPUPRECONSUME. . . . . . .  C ADDR   03ADH   R   SEG=?PR?DSRC?MATER
DSRC_VST_BJCPUPREPASS . . . . . . . .  C ADDR   03B1H   R   SEG=?PR?DSRC?MATER
DSRC_VST_BJCPUPREPASSCONSUME. . . . .  C ADDR   03B3H   R   SEG=?PR?DSRC?MATER
DSRC_VST_CARDTYPECONTACT. . . . . . .  C ADDR   0325H   R   SEG=?PR?DSRC?MATER
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    85

DSRC_VST_CARDTYPEMF . . . . . . . . .  C ADDR   032EH   R   SEG=?PR?DSRC?MATER
DSRC_VST_CARDTYPEOVER . . . . . . . .  C ADDR   0332H   R   SEG=?PR?DSRC?MATER
DSRC_VST_CARDTYPEPRO. . . . . . . . .  C ADDR   0327H   R   SEG=?PR?DSRC?MATER
DSRC_VST_CPUPRE . . . . . . . . . . .  C ADDR   01F1H   R   SEG=?PR?DSRC?MATER
DSRC_VST_CPUPREHAVECARD . . . . . . .  C ADDR   01FFH   R   SEG=?PR?DSRC?MATER
DSRC_VST_CPUPRESTART. . . . . . . . .  C ADDR   01F9H   R   SEG=?PR?DSRC?MATER
DSRC_VST_INITMODE01 . . . . . . . . .  C ADDR   011EH   R   SEG=?PR?DSRC?MATER
DSRC_VST_INITMODE02 . . . . . . . . .  C ADDR   016DH   R   SEG=?PR?DSRC?MATER
DSRC_VST_INITMODEOTHER. . . . . . . .  C ADDR   01BCH   R   SEG=?PR?DSRC?MATER
DSRC_VST_INITMODEOVER . . . . . . . .  C ADDR   01BEH   R   SEG=?PR?DSRC?MATER
DSRC_VST_MFPRE. . . . . . . . . . . .  C ADDR   02E0H   R   SEG=?PR?DSRC?MATER
DSRC_VST_MFPREHAVECARD. . . . . . . .  C ADDR   02E5H   R   SEG=?PR?DSRC?MATER
DSRC_VST_NOTUSERCARD. . . . . . . . .  C ADDR   007BH   R   SEG=?PR?DSRC?MATER
DSRC_VST_PRE. . . . . . . . . . . . .  C ADDR   008EH   R   SEG=?PR?DSRC?MATER
DSRC_VST_PREAID00 . . . . . . . . . .  C ADDR   0091H   R   SEG=?PR?DSRC?MATER
DSRC_VST_PREAID01 . . . . . . . . . .  C ADDR   01C1H   R   SEG=?PR?DSRC?MATER
DSRC_VST_PREAID01READSYSINFO. . . . .  C ADDR   01D3H   R   SEG=?PR?DSRC?MATER
DSRC_VST_PREAID01START. . . . . . . .  C ADDR   01CAH   R   SEG=?PR?DSRC?MATER
DSRC_VST_PREREADSYSINFOOVER . . . . .  C ADDR   01E8H   R   SEG=?PR?DSRC?MATER
DSRC_VST_READ0002 . . . . . . . . . .  C ADDR   02BDH   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG0002. . . . . . . . . . .  C ADDR   02B4H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG0012. . . . . . . . . . .  C ADDR   0244H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG001202E . . . . . . . . .  C ADDR   0256H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG0012START . . . . . . . .  C ADDR   0251H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG0015. . . . . . . . . . .  C ADDR   0223H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG001512E . . . . . . . . .  C ADDR   021EH   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG0015START . . . . . . . .  C ADDR   0219H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG0019. . . . . . . . . . .  C ADDR   0277H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG001902E . . . . . . . . .  C ADDR   0289H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG001912E . . . . . . . . .  C ADDR   028EH   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG001915E . . . . . . . . .  C ADDR   0293H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEG0019START . . . . . . . .  C ADDR   0284H   R   SEG=?PR?DSRC?MATER
DSRC_VST_SEGVSTTAIL . . . . . . . . .  C ADDR   02E5H   R   SEG=?PR?DSRC?MATER
EPCAI . . . . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
EPCA_LVD. . . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
IE. . . . . . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE2 . . . . . . . . . . . . . . . . .  N NUMB   00AFH   A   
IPH . . . . . . . . . . . . . . . . .  N NUMB   00B7H   A   
ISP_CONTR . . . . . . . . . . . . . .  N NUMB   00C7H   A   
P0. . . . . . . . . . . . . . . . . .  D ADDR   0080H   A   
P1. . . . . . . . . . . . . . . . . .  D ADDR   0090H   A   
P2. . . . . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P3. . . . . . . . . . . . . . . . . .  D ADDR   00B0H   A   
P4. . . . . . . . . . . . . . . . . .  N NUMB   00C0H   A   
PCA_PWM0. . . . . . . . . . . . . . .  N NUMB   00F2H   A   
PCA_PWM1. . . . . . . . . . . . . . .  N NUMB   00F3H   A   
PCA_PWM2. . . . . . . . . . . . . . .  N NUMB   00F4H   A   
PCA_PWM3. . . . . . . . . . . . . . .  N NUMB   00F5H   A   
PCA_PWM4. . . . . . . . . . . . . . .  N NUMB   00F6H   A   
PCA_PWM5. . . . . . . . . . . . . . .  N NUMB   00F7H   A   
PIN_522_MISO. . . . . . . . . . . . .  B ADDR   00C0H.1 A   
PIN_522_MOSI. . . . . . . . . . . . .  B ADDR   00C0H.6 A   
PIN_522_RST . . . . . . . . . . . . .  B ADDR   0080H.4 A   
PIN_522_SCLK. . . . . . . . . . . . .  B ADDR   0080H.7 A   
PIN_522_SS. . . . . . . . . . . . . .  B ADDR   0080H.6 A   
PIN_5823BK_CS . . . . . . . . . . . .  B ADDR   0090H.0 A   
PIN_5823BK_IRQ. . . . . . . . . . . .  B ADDR   0090H.2 A   
PIN_5823BK_MISO . . . . . . . . . . .  B ADDR   0080H.0 A   
PIN_5823BK_MOSI . . . . . . . . . . .  B ADDR   0080H.1 A   
PIN_5823BK_SCLK . . . . . . . . . . .  B ADDR   00C0H.2 A   
PIN_BELL_01 . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_BELL_02 . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_BK_CE . . . . . . . . . . . . . .  B ADDR   0090H.1 A   
PIN_CARD_EXIST. . . . . . . . . . . .  B ADDR   00B0H.3 A   
PIN_ESAM_RST. . . . . . . . . . . . .  B ADDR   0080H.5 A   
PIN_ESAM_RX . . . . . . . . . . . . .  B ADDR   0080H.3 A   
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    86

PIN_ESAM_TX . . . . . . . . . . . . .  B ADDR   0080H.3 A   
PIN_ES_RST. . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
PIN_GRE . . . . . . . . . . . . . . .  B ADDR   00C0H.4 A   
PIN_LCD_CS. . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_DC. . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_RST . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_SCL . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_SDA . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_OUTPUT_CLK. . . . . . . . . . . .  B ADDR   00B0H.4 A   
PIN_PWRDWN. . . . . . . . . . . . . .  B ADDR   00A0H.4 A   
PIN_PWRDWN_LCD. . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_PWR_GSM . . . . . . . . . . . . .  B ADDR   00A0H.3 A   
PIN_PWR_LOWIO . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_PWR_SE. . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_RED . . . . . . . . . . . . . . .  B ADDR   00C0H.5 A   
PIN_SE_IO1. . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
PIN_SOFTSERIALRX. . . . . . . . . . .  B ADDR   00B0H.0 A   
PIN_SOFTSERIALTXH . . . . . . . . . .  B ADDR   00B0H.1 A   
PIN_SW. . . . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_UART2_RX. . . . . . . . . . . . .  B ADDR   0090H.6 A   
PIN_UART2_TX. . . . . . . . . . . . .  B ADDR   0090H.7 A   
PIN_UNFIX . . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
PIN_WAVE_CHANNEL1 . . . . . . . . . .  B ADDR   0080H.2 A   
PIN_WAVE_RX . . . . . . . . . . . . .  B ADDR   0080H.2 A   
READ_BURST. . . . . . . . . . . . . .  N NUMB   00C0H   A   
REG_51_AUXR1. . . . . . . . . . . . .  N NUMB   00A2H   A   
REG_5412AD_AUXR . . . . . . . . . . .  N NUMB   008EH   A   
REG_5412AD_P0M0 . . . . . . . . . . .  N NUMB   0094H   A   
REG_5412AD_P0M1 . . . . . . . . . . .  N NUMB   0093H   A   
REG_5412AD_P1M0 . . . . . . . . . . .  N NUMB   0092H   A   
REG_5412AD_P1M1 . . . . . . . . . . .  N NUMB   0091H   A   
REG_5412AD_P2M0 . . . . . . . . . . .  N NUMB   0096H   A   
REG_5412AD_P2M1 . . . . . . . . . . .  N NUMB   0095H   A   
REG_5412AD_P3M0 . . . . . . . . . . .  N NUMB   00B2H   A   
REG_5412AD_P3M1 . . . . . . . . . . .  N NUMB   00B1H   A   
REG_5412AD_P4M0 . . . . . . . . . . .  N NUMB   00B4H   A   
REG_5412AD_P4M1 . . . . . . . . . . .  N NUMB   00B3H   A   
REG_5412AD_P4SW . . . . . . . . . . .  N NUMB   00BBH   A   
REG_5412AD_SPCTL. . . . . . . . . . .  N NUMB   0085H   A   
REG_5412AD_SPDAT. . . . . . . . . . .  N NUMB   0086H   A   
REG_5412AD_SPSTAT . . . . . . . . . .  N NUMB   0084H   A   
REG_MCU_WKCTH . . . . . . . . . . . .  N NUMB   00ABH   A   
REG_MCU_WKCTL . . . . . . . . . . . .  N NUMB   00AAH   A   
REG_RC522_BITFRAMINGREG . . . . . . .  N NUMB   000DH   A   
REG_RC522_COLLREG . . . . . . . . . .  N NUMB   000EH   A   
REG_RC522_COMIENREG . . . . . . . . .  N NUMB   0002H   A   
REG_RC522_COMIRQREG . . . . . . . . .  N NUMB   0004H   A   
REG_RC522_COMMANDREG. . . . . . . . .  N NUMB   0001H   A   
REG_RC522_CONTROLREG. . . . . . . . .  N NUMB   000CH   A   
REG_RC522_CRCRESULTREGH . . . . . . .  N NUMB   0021H   A   
REG_RC522_CRCRESULTREGL . . . . . . .  N NUMB   0022H   A   
REG_RC522_CWGSPREG. . . . . . . . . .  N NUMB   0028H   A   
REG_RC522_DEMODREG. . . . . . . . . .  N NUMB   0019H   A   
REG_RC522_DIVIENREG . . . . . . . . .  N NUMB   0003H   A   
REG_RC522_DIVIRQREG . . . . . . . . .  N NUMB   0005H   A   
REG_RC522_ERRORREG. . . . . . . . . .  N NUMB   0006H   A   
REG_RC522_FIFODATAREG . . . . . . . .  N NUMB   0009H   A   
REG_RC522_FIFOLEVELREG. . . . . . . .  N NUMB   000AH   A   
REG_RC522_GSNREG. . . . . . . . . . .  N NUMB   0027H   A   
REG_RC522_MIFAREREG . . . . . . . . .  N NUMB   001CH   A   
REG_RC522_MODEREG . . . . . . . . . .  N NUMB   0011H   A   
REG_RC522_MODGSPREG . . . . . . . . .  N NUMB   0029H   A   
REG_RC522_MODWIDTHREG . . . . . . . .  N NUMB   0024H   A   
REG_RC522_RC522PAGE . . . . . . . . .  N NUMB   0000H   A   
REG_RC522_RFCFGREG. . . . . . . . . .  N NUMB   0026H   A   
REG_RC522_RFU . . . . . . . . . . . .  N NUMB   000FH   A   
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    87

REG_RC522_RXMODEREG . . . . . . . . .  N NUMB   0013H   A   
REG_RC522_RXSELREG. . . . . . . . . .  N NUMB   0017H   A   
REG_RC522_RXTHRESHOLDREG. . . . . . .  N NUMB   0018H   A   
REG_RC522_SERIALSPEEDREG. . . . . . .  N NUMB   001FH   A   
REG_RC522_STATUS1REG. . . . . . . . .  N NUMB   0007H   A   
REG_RC522_STATUS2REG. . . . . . . . .  N NUMB   0008H   A   
REG_RC522_TCOUNTERVALUEREGH . . . . .  N NUMB   002EH   A   
REG_RC522_TCOUNTERVALUEREGL . . . . .  N NUMB   002FH   A   
REG_RC522_TMODEREG. . . . . . . . . .  N NUMB   002AH   A   
REG_RC522_TPRESCALERREG . . . . . . .  N NUMB   002BH   A   
REG_RC522_TRELOADREGH . . . . . . . .  N NUMB   002CH   A   
REG_RC522_TRELOADREGL . . . . . . . .  N NUMB   002DH   A   
REG_RC522_TXAUTOREG . . . . . . . . .  N NUMB   0015H   A   
REG_RC522_TXCONTROLREG. . . . . . . .  N NUMB   0014H   A   
REG_RC522_TXMODEREG . . . . . . . . .  N NUMB   0012H   A   
REG_RC522_TXSELREG. . . . . . . . . .  N NUMB   0016H   A   
REG_RC522_WATERLEVELREG . . . . . . .  N NUMB   000BH   A   
REG_SYS_BRT . . . . . . . . . . . . .  N NUMB   009CH   A   
REG_WAKECLK0. . . . . . . . . . . . .  N NUMB   008FH   A   
REG_WAKECLK_04. . . . . . . . . . . .  B ADDR   00D8H.4 A   
REG_WAKECLK_05. . . . . . . . . . . .  B ADDR   00D8H.5 A   
REG_WAKE_CLK0 . . . . . . . . . . . .  N NUMB   008FH   A   
REG_WDT_CONTR . . . . . . . . . . . .  N NUMB   00C1H   A   
RELOAD2_CONTR . . . . . . . . . . . .  N NUMB   00EAH   A   
S2BUF . . . . . . . . . . . . . . . .  N NUMB   009BH   A   
S2CON . . . . . . . . . . . . . . . .  N NUMB   009AH   A   
SEG_DSRCSPECIAL_COMPLEXSEG. . . . . .  C ADDR   0470H   R   SEG=?PR?DSRC?MATER
SEG_DSRC_GETRAND. . . . . . . . . . .  C ADDR   08D0H   R   SEG=?PR?DSRC?MATER
SEG_DSRC_GETSECURE. . . . . . . . . .  C ADDR   0685H   R   SEG=?PR?DSRC?MATER
SEG_DSRC_GETSENDBUFLEN. . . . . . . .  C ADDR   08BAH   R   SEG=?PR?DSRC?MATER
SEG_DSRC_POWER. . . . . . . . . . . .  C ADDR   0708H   R   SEG=?PR?DSRC?MATER
SEG_DSRC_SETMMI . . . . . . . . . . .  C ADDR   08CEH   R   SEG=?PR?DSRC?MATER
SEG_DSRC_SETSECURE. . . . . . . . . .  C ADDR   08CFH   R   SEG=?PR?DSRC?MATER
SEG_DSRC_TRANSFERCHANNEL. . . . . . .  C ADDR   0765H   R   SEG=?PR?DSRC?MATER
SEG_DSRC_TRANSFERCHANNELOBU . . . . .  C ADDR   0852H   R   SEG=?PR?DSRC?MATER
STR_DSRC_GETRND . . . . . . . . . . .  C ADDR   0000H   R   SEG=?CO?DSRC?COMMLIB
STR_DSRC_VST. . . . . . . . . . . . .  C ADDR   0006H   R   SEG=?CO?DSRC?COMMLIB
STR_DSRC_VST02. . . . . . . . . . . .  C ADDR   0011H   R   SEG=?CO?DSRC?COMMLIB
STR_SYS_OBUID . . . . . . . . . . . .  C ADDR   -----       EXT
TI_CCXXX0_ADDR. . . . . . . . . . . .  N NUMB   0009H   A   
TI_CCXXX0_AGCCTRL0. . . . . . . . . .  N NUMB   001DH   A   
TI_CCXXX0_AGCCTRL1. . . . . . . . . .  N NUMB   001CH   A   
TI_CCXXX0_AGCCTRL2. . . . . . . . . .  N NUMB   001BH   A   
TI_CCXXX0_AGCTEST . . . . . . . . . .  N NUMB   002BH   A   
TI_CCXXX0_BSCFG . . . . . . . . . . .  N NUMB   001AH   A   
TI_CCXXX0_CHANNR. . . . . . . . . . .  N NUMB   000AH   A   
TI_CCXXX0_DEVIATN . . . . . . . . . .  N NUMB   0015H   A   
TI_CCXXX0_FIFOTHR . . . . . . . . . .  N NUMB   0003H   A   
TI_CCXXX0_FOCCFG. . . . . . . . . . .  N NUMB   0019H   A   
TI_CCXXX0_FREND0. . . . . . . . . . .  N NUMB   0022H   A   
TI_CCXXX0_FREND1. . . . . . . . . . .  N NUMB   0021H   A   
TI_CCXXX0_FREQ0 . . . . . . . . . . .  N NUMB   000FH   A   
TI_CCXXX0_FREQ1 . . . . . . . . . . .  N NUMB   000EH   A   
TI_CCXXX0_FREQ2 . . . . . . . . . . .  N NUMB   000DH   A   
TI_CCXXX0_FREQEST . . . . . . . . . .  N NUMB   0032H   A   
TI_CCXXX0_FSCAL0. . . . . . . . . . .  N NUMB   0026H   A   
TI_CCXXX0_FSCAL1. . . . . . . . . . .  N NUMB   0025H   A   
TI_CCXXX0_FSCAL2. . . . . . . . . . .  N NUMB   0024H   A   
TI_CCXXX0_FSCAL3. . . . . . . . . . .  N NUMB   0023H   A   
TI_CCXXX0_FSCTRL0 . . . . . . . . . .  N NUMB   000CH   A   
TI_CCXXX0_FSCTRL1 . . . . . . . . . .  N NUMB   000BH   A   
TI_CCXXX0_FSTEST. . . . . . . . . . .  N NUMB   0029H   A   
TI_CCXXX0_IOCFG0. . . . . . . . . . .  N NUMB   0002H   A   
TI_CCXXX0_IOCFG1. . . . . . . . . . .  N NUMB   0001H   A   
TI_CCXXX0_IOCFG2. . . . . . . . . . .  N NUMB   0000H   A   
TI_CCXXX0_LQI . . . . . . . . . . . .  N NUMB   0033H   A   
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    88

TI_CCXXX0_MARCSTATE . . . . . . . . .  N NUMB   0035H   A   
TI_CCXXX0_MCSM0 . . . . . . . . . . .  N NUMB   0018H   A   
TI_CCXXX0_MCSM1 . . . . . . . . . . .  N NUMB   0017H   A   
TI_CCXXX0_MCSM2 . . . . . . . . . . .  N NUMB   0016H   A   
TI_CCXXX0_MDMCFG0 . . . . . . . . . .  N NUMB   0014H   A   
TI_CCXXX0_MDMCFG1 . . . . . . . . . .  N NUMB   0013H   A   
TI_CCXXX0_MDMCFG2 . . . . . . . . . .  N NUMB   0012H   A   
TI_CCXXX0_MDMCFG3 . . . . . . . . . .  N NUMB   0011H   A   
TI_CCXXX0_MDMCFG4 . . . . . . . . . .  N NUMB   0010H   A   
TI_CCXXX0_NUM_RXBYTES . . . . . . . .  N NUMB   007FH   A   
TI_CCXXX0_PARTNUM . . . . . . . . . .  N NUMB   0030H   A   
TI_CCXXX0_PATABLE . . . . . . . . . .  N NUMB   003EH   A   
TI_CCXXX0_PKTCTRL0. . . . . . . . . .  N NUMB   0008H   A   
TI_CCXXX0_PKTCTRL1. . . . . . . . . .  N NUMB   0007H   A   
TI_CCXXX0_PKTLEN. . . . . . . . . . .  N NUMB   0006H   A   
TI_CCXXX0_PKTSTATUS . . . . . . . . .  N NUMB   0038H   A   
TI_CCXXX0_PTEST . . . . . . . . . . .  N NUMB   002AH   A   
TI_CCXXX0_RCCTRL0 . . . . . . . . . .  N NUMB   0028H   A   
TI_CCXXX0_RCCTRL1 . . . . . . . . . .  N NUMB   0027H   A   
TI_CCXXX0_RSSI. . . . . . . . . . . .  N NUMB   0034H   A   
TI_CCXXX0_RXBYTES . . . . . . . . . .  N NUMB   003BH   A   
TI_CCXXX0_RXFIFO. . . . . . . . . . .  N NUMB   003FH   A   
TI_CCXXX0_SAFC. . . . . . . . . . . .  N NUMB   0037H   A   
TI_CCXXX0_SCAL. . . . . . . . . . . .  N NUMB   0033H   A   
TI_CCXXX0_SFRX. . . . . . . . . . . .  N NUMB   003AH   A   
TI_CCXXX0_SFTX. . . . . . . . . . . .  N NUMB   003BH   A   
TI_CCXXX0_SIDLE . . . . . . . . . . .  N NUMB   0036H   A   
TI_CCXXX0_SNOP. . . . . . . . . . . .  N NUMB   003DH   A   
TI_CCXXX0_SPWD. . . . . . . . . . . .  N NUMB   0039H   A   
TI_CCXXX0_SRES. . . . . . . . . . . .  N NUMB   0030H   A   
TI_CCXXX0_SRX . . . . . . . . . . . .  N NUMB   0034H   A   
TI_CCXXX0_STX . . . . . . . . . . . .  N NUMB   0035H   A   
TI_CCXXX0_SWOR. . . . . . . . . . . .  N NUMB   0038H   A   
TI_CCXXX0_SWORRST . . . . . . . . . .  N NUMB   003CH   A   
TI_CCXXX0_SXOFF . . . . . . . . . . .  N NUMB   0032H   A   
TI_CCXXX0_SYNC0 . . . . . . . . . . .  N NUMB   0005H   A   
TI_CCXXX0_SYNC1 . . . . . . . . . . .  N NUMB   0004H   A   
TI_CCXXX0_TEST0 . . . . . . . . . . .  N NUMB   002EH   A   
TI_CCXXX0_TEST1 . . . . . . . . . . .  N NUMB   002DH   A   
TI_CCXXX0_TEST2 . . . . . . . . . . .  N NUMB   002CH   A   
TI_CCXXX0_TXBYTES . . . . . . . . . .  N NUMB   003AH   A   
TI_CCXXX0_TXFIFO. . . . . . . . . . .  N NUMB   003FH   A   
TI_CCXXX0_VCO_VC_DAC. . . . . . . . .  N NUMB   0039H   A   
TI_CCXXX0_VERSION . . . . . . . . . .  N NUMB   0031H   A   
TI_CCXXX0_WORCTRL . . . . . . . . . .  N NUMB   0020H   A   
TI_CCXXX0_WOREVT0 . . . . . . . . . .  N NUMB   001FH   A   
TI_CCXXX0_WOREVT1 . . . . . . . . . .  N NUMB   001EH   A   
TI_CCXXX0_WORTIME0. . . . . . . . . .  N NUMB   0037H   A   
TI_CCXXX0_WORTIME1. . . . . . . . . .  N NUMB   0036H   A   
VST_BJ_READ0002 . . . . . . . . . . .  C ADDR   0420H   R   SEG=?PR?DSRC?MATER
VST_BJ_READ0012 . . . . . . . . . . .  C ADDR   03DCH   R   SEG=?PR?DSRC?MATER
VST_BJ_READ0019 . . . . . . . . . . .  C ADDR   03FEH   R   SEG=?PR?DSRC?MATER
VST_BJ_SETBJNOPRE . . . . . . . . . .  C ADDR   0371H   R   SEG=?PR?DSRC?MATER
VST_BJ_SETBJPREOVER . . . . . . . . .  C ADDR   0374H   R   SEG=?PR?DSRC?MATER
WAKE_CLKO . . . . . . . . . . . . . .  N NUMB   008FH   A   
WKO_BK. . . . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
XDATA_54. . . . . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_BEACONID. . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_CELLID. . . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_FIX . . . . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_HOLD. . . . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_POWER . . . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_SOFTFIRSTSCANTIME . . . . . . .  X ADDR   -----       EXT
XDATA_TXBUF . . . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_UNIXTIME. . . . . . . . . . . .  X ADDR   -----       EXT
_ERASEFLASH . . . . . . . . . . . . .  C ADDR   -----       EXT
A51 MACRO ASSEMBLER  DSRC                                                                 10/09/2016 12:08:02 PAGE    89

_FUN_CARDAPP_CARDCHANNEL. . . . . . .  C ADDR   -----       EXT
_FUN_CARDAPP_READRECORD . . . . . . .  C ADDR   -----       EXT
_FUN_CARDAPP_SELECTFILE . . . . . . .  C ADDR   -----       EXT
_FUN_CARDAPP_UPDATEBINARY . . . . . .  C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL. . . . . . . . .  C ADDR   -----       EXT
_FUN_DSRC_NSPECIAL. . . . . . . . . .  C ADDR   0443H   R   SEG=?PR?DSRC?MATER
_FUN_DSRC_OBUCHANNEL. . . . . . . . .  C ADDR   08D1H   R   SEG=?PR?DSRC?MATER
_FUN_DSRC_VST . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?DSRC?MATER
_FUN_DSRC_VSTCELL . . . . . . . . . .  C ADDR   09B6H   R   SEG=?PR?DSRC?MATER
_FUN_DSRC_VSTZC . . . . . . . . . . .  C ADDR   000FH   R   SEG=?PR?DSRC?MATER
_FUN_GSM_RTCDIS . . . . . . . . . . .  C ADDR   -----       EXT
_FUN_GSM_RTCEN. . . . . . . . . . . .  C ADDR   -----       EXT
_FUN_HDLC_CHANGECHANNEL . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_ESAMERR. . . . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_FLASHTODATA. . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_FLASHTODATAEX. . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_FLASHTOXDATA . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_XDATATODATA. . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_XDATATOXDATA . . . . . . . .  C ADDR   -----       EXT
_FUN_SERIAL_RXSOFT. . . . . . . . . .  C ADDR   -----       EXT
_FUN_TEST_BEEP. . . . . . . . . . . .  C ADDR   -----       EXT
_FUN_TEST_DISPLAY . . . . . . . . . .  C ADDR   -----       EXT
_FUN_TEST_UARTDISPLAY . . . . . . . .  C ADDR   -----       EXT
_GETNEWCRC. . . . . . . . . . . . . .  C ADDR   -----       EXT
_GETNEWCRC_XR . . . . . . . . . . . .  C ADDR   -----       EXT
_RDFLASHXR. . . . . . . . . . . . . .  C ADDR   -----       EXT
_WRFLASHXR. . . . . . . . . . . . . .  C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
