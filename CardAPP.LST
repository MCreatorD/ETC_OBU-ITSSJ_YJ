A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE     1


MACRO ASSEMBLER A51 V8.00d
OBJECT MODULE PLACED IN CardAPP.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE CardAPP.ASM SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     ;******************************************************************
                       2     ;ÃèÊö£º¿¨Æ¬²Ù×÷À©Õ¹³ÌÐò¼¯[ËüÔÚContact.asmµÄº¯Ê×öÀ©Õ¹Ó¦ÓÃ]
                       3     ;_FUN_CARDAPP_SelectFile                ---     Ñ¡Ä¿Â¼»òÎÄ¼þ
                       4     ;_FUN_CARDAPP_ReadBinary                ---     ¶Á¶þ½øÖÆÎÄ¼þ
                       5     ;_FUN_CARDAPP_GetBalance                ---     ¶ÁÓà¶î
                       6     ;_FUN_CARDAPP_ReadRecord                ---     ¶Á¼ÇÂ¼ÎÄ¼þ
                       7     ;_FUN_CARDAPP_CardChannel               ---     ¿¨Æ¬Í¨µÀº¯Ê(Ö§³Öcontact cpu/esam/pro/mf/)
                       8     ;_FUN_CARDAPP_DECCounter                ---     ¼õ¼ÇÊÆ÷ 
                       9     ;_FUN_CARDAPP_UpdateBinary              ---     Ð´¶þ½øÖÆÎÄ¼þ
                      10     ;******************************************************************
                      11     NAME    CARDAPP
                      12     
                      13     ;$include (COMMON.INC)
                +1    14             
  009C          +1    15     BRT                                     EQU     09CH
  009C          +1    16     Reg_Sys_BRT                             EQU     09CH
                +1    17     ;RegBit_SysBRT_S1BRS                    BIT     Reg_Sys_BRT.1
                +1    18     
  009A          +1    19     S2CON                                   EQU     09AH
  009B          +1    20     S2BUF                                   EQU     09BH
  00AF          +1    21     IE2                                     EQU     0AFH
  00EA          +1    22     RELOAD2_CONTR                           EQU     0EAH
                +1    23             
  0001          +1    24     CONST_TIMEER02                          EQU     1       ;Ò»ÖÜ6Ãë
  00FE          +1    25     CONST_TIMEER03                          EQU     254;245
  0001          +1    26     CONST_TIMEER04                          EQU     1
                +1    27     
  00A2          +1    28     REG_51_AUXR1                            EQU     0A2H
  00AE          +1    29     EPCAI                                   BIT     IE.6
                +1    30     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////
                +1    31     ;NEW LCD
                +1    32     ;PIN_Sys_IsDownload                     BIT     P3.7
                +1    33     ;PIN_LCD_OLEDD1                         BIT     P1.2
                +1    34     ;PIN_LCD_OLEDD0                         BIT     P1.3
                +1    35     ;PIN_LCD_OLEDDC                         BIT     P1.4
                +1    36     ;PIN_LCD_OLEDRES                        BIT     P1.5
                +1    37     ;PIN_LCD_OLEDCS                         BIT     P4.3
                +1    38     ;PIN_LCD_BG                             BIT     P1.1
                +1    39     ;PIN_OLED_ENSY7208                      BIT     P4.0
  00C0          +1    40     P4                                      EQU     0C0H
                +1    41     ;------------------------------------------------------------------------------------------
                             -----
  0005          +1    42     CONST_MAX_RXNUM                         EQU     5
                +1    43     ;TI_CCxxx0_SRES                         EQU     30H
                +1    44     ;Configuration Registers                
  0046          +1    45     CONST_GDO2_VALUE                        EQU     46h;046H        ;06H
  0002          +1    46     CONST_GDO2_MCSM2                        EQU     2;03H
  00C0          +1    47     read_burst                              EQU     0C0H
  0000          +1    48     TI_CCxxx0_IOCFG2                        EQU     00H        ;GDO2 output pin configuration
  0001          +1    49     TI_CCxxx0_IOCFG1                        EQU     01H        ;GDO1 output pin configuration
  0002          +1    50     TI_CCxxx0_IOCFG0                        EQU     02H        ;GDO0 output pin configuration
  0003          +1    51     TI_CCxxx0_FIFOTHR                       EQU     03H        ;RX FIFO and TX FIFO thresholds
  0004          +1    52     TI_CCxxx0_SYNC1                         EQU     04H        ;Sync word, high byte
  0005          +1    53     TI_CCxxx0_SYNC0                         EQU     05H        ;Sync word, low byte
  0006          +1    54     TI_CCxxx0_PKTLEN                        EQU     06H        ;Packet length
  0007          +1    55     TI_CCxxx0_PKTCTRL1                      EQU     07H        ;Packet automation control
  0008          +1    56     TI_CCxxx0_PKTCTRL0                      EQU     08H        ;Packet automation control
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE     2

  0009          +1    57     TI_CCxxx0_ADDR                          EQU     09H        ;Device address
  000A          +1    58     TI_CCxxx0_CHANNR                        EQU     0AH        ;Channel number
  000B          +1    59     TI_CCxxx0_FSCTRL1                       EQU     0BH        ;Frequency synthesizer control
  000C          +1    60     TI_CCxxx0_FSCTRL0                       EQU     0CH        ;Frequency synthesizer control
  000D          +1    61     TI_CCxxx0_FREQ2                         EQU     0DH        ;Frequency control word, high by
                             te
  000E          +1    62     TI_CCxxx0_FREQ1                         EQU     0EH        ;Frequency control word, middle 
                             byte
  000F          +1    63     TI_CCxxx0_FREQ0                         EQU     0FH        ;Frequency control word, low byt
                             e
  0010          +1    64     TI_CCxxx0_MDMCFG4                       EQU     10H        ;Modem configuration
  0011          +1    65     TI_CCxxx0_MDMCFG3                       EQU     11H        ;Modem configuration
  0012          +1    66     TI_CCxxx0_MDMCFG2                       EQU     12H        ;Modem configuration
  0013          +1    67     TI_CCxxx0_MDMCFG1                       EQU     13H        ;Modem configuration
  0014          +1    68     TI_CCxxx0_MDMCFG0                       EQU     14H        ;Modem configuration
  0015          +1    69     TI_CCxxx0_DEVIATN                       EQU     15H        ;Modem deviation setting
  0016          +1    70     TI_CCxxx0_MCSM2         EQU     16H        ;Main Radio Cntrl State Machine config
  0017          +1    71     TI_CCxxx0_MCSM1         EQU     17H        ;Main Radio Cntrl State Machine config
  0018          +1    72     TI_CCxxx0_MCSM0         EQU     18H        ;Main Radio Cntrl State Machine config
  0019          +1    73     TI_CCxxx0_FOCCFG        EQU     19H        ;Frequency Offset Compensation config
  001A          +1    74     TI_CCxxx0_BSCFG         EQU     1AH        ;Bit Synchronization configuration
  001B          +1    75     TI_CCxxx0_AGCCTRL2      EQU     1BH        ;AGC control
  001C          +1    76     TI_CCxxx0_AGCCTRL1      EQU     1CH        ;AGC control
  001D          +1    77     TI_CCxxx0_AGCCTRL0      EQU     1DH        ;AGC control
  001E          +1    78     TI_CCxxx0_WOREVT1       EQU     1EH        ;High byte Event 0 timeout
  001F          +1    79     TI_CCxxx0_WOREVT0       EQU     1FH        ;Low byte Event 0 timeout
  0020          +1    80     TI_CCxxx0_WORCTRL       EQU     20H        ;Wake On Radio control
  0021          +1    81     TI_CCxxx0_FREND1        EQU     21H        ;Front end RX configuration
  0022          +1    82     TI_CCxxx0_FREND0        EQU     22H        ;Front end TX configuration
  0023          +1    83     TI_CCxxx0_FSCAL3        EQU     23H        ;Frequency synthesizer calibration
  0024          +1    84     TI_CCxxx0_FSCAL2        EQU     24H        ;Frequency synthesizer calibration
  0025          +1    85     TI_CCxxx0_FSCAL1        EQU     25H        ;Frequency synthesizer calibration
  0026          +1    86     TI_CCxxx0_FSCAL0        EQU     26H        ;Frequency synthesizer calibration
  0027          +1    87     TI_CCxxx0_RCCTRL1       EQU     27H        ;RC oscillator configuration
  0028          +1    88     TI_CCxxx0_RCCTRL0       EQU     28H        ;RC oscillator configuration
  0029          +1    89     TI_CCxxx0_FSTEST        EQU     29H        ;Frequency synthesizer cal control
  002A          +1    90     TI_CCxxx0_PTEST         EQU     2AH        ;Production test
  002B          +1    91     TI_CCxxx0_AGCTEST       EQU     2BH        ;AGC test
  002C          +1    92     TI_CCxxx0_TEST2         EQU     2CH        ;Various test settings       
  002D          +1    93     TI_CCxxx0_TEST1         EQU     2DH        ;Various test settings
  002E          +1    94     TI_CCxxx0_TEST0         EQU     2EH        ;Various test settings
                +1    95     
                +1    96     ;Strobe commands
  0030          +1    97     TI_CCxxx0_SRES          EQU     30H        ;Reset chip.
  0032          +1    98     TI_CCxxx0_SXOFF         EQU     32H        ;Turn off crystal oscillator.
  0033          +1    99     TI_CCxxx0_SCAL          EQU     33H        ;Calibrate freq synthesizer & disable
  0034          +1   100     TI_CCxxx0_SRX           EQU     34H        ;Enable RX.
  0035          +1   101     TI_CCxxx0_STX           EQU     35H        ;Enable TX.
  0036          +1   102     TI_CCxxx0_SIDLE         EQU     36H        ;Exit RX / TX
  0037          +1   103     TI_CCxxx0_SAFC          EQU     37H        ;AFC adjustment of freq synthesizer
  0038          +1   104     TI_CCxxx0_SWOR          EQU     38H        ;Start automatic RX polling sequence
  0039          +1   105     TI_CCxxx0_SPWD          EQU     39H        ;Enter pwr down mode when CSn goes hi
  003A          +1   106     TI_CCxxx0_SFRX          EQU     3AH        ;Flush the RX FIFO buffer.
  003B          +1   107     TI_CCxxx0_SFTX          EQU     3BH        ;Flush the TX FIFO buffer.
  003C          +1   108     TI_CCxxx0_SWORRST       EQU     3CH        ;Reset real time clock.
  003D          +1   109     TI_CCxxx0_SNOP          EQU     3DH        ;No operation.
                +1   110             
                +1   111     ;Status_registers
  0030          +1   112     TI_CCxxx0_PARTNUM                       EQU     30H        ;Part number
  0031          +1   113     TI_CCxxx0_VERSION                       EQU     31H        ;Current version number
  0032          +1   114     TI_CCxxx0_FREQEST                       EQU     32H        ;Frequency offset estimate
  0033          +1   115     TI_CCxxx0_LQI                           EQU     33H        ;Demodulator estimate for link q
                             uality
  0034          +1   116     TI_CCxxx0_RSSI                          EQU     34H        ;Received signal strength indica
                             tion
  0035          +1   117     TI_CCxxx0_MARCSTATE                     EQU     35H        ;Control state machine state
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE     3

  0036          +1   118     TI_CCxxx0_WORTIME1                      EQU     36H        ;High byte of WOR timer
  0037          +1   119     TI_CCxxx0_WORTIME0                      EQU     37H        ;Low byte of WOR timer
  0038          +1   120     TI_CCxxx0_PKTSTATUS                     EQU     38H        ;Current GDOx status and packet 
                             status
  0039          +1   121     TI_CCxxx0_VCO_VC_DAC                    EQU     39H        ;Current setting from PLL cal mo
                             dule
  003A          +1   122     TI_CCxxx0_TXBYTES                       EQU     3AH        ;Underflow and # of bytes in TXF
                             IFO
  003B          +1   123     TI_CCxxx0_RXBYTES                       EQU     3BH        ;Overflow and # of bytes in RXFI
                             FO
  007F          +1   124     TI_CCxxx0_NUM_RXBYTES                   EQU     7FH        ;Mask "# of bytes" field in _RXB
                             YTES
                +1   125             
                +1   126     ;Other memory locations
  003E          +1   127     TI_CCxxx0_PATABLE                       EQU     3EH
  003F          +1   128     TI_CCxxx0_TXFIFO                        EQU     3FH
  003F          +1   129     TI_CCxxx0_RXFIFO                        EQU     3FH
                +1   130             
  0082          +1   131     PIN_WAVE_RX                             BIT     p0.2;P2.0;p0.1;p1.0
  00B4          +1   132     PIN_OUTPUT_CLK                          BIT     P3.4;P1.0
  008F          +1   133     REG_WAKE_CLK0                           EQU     08FH
  000F          +1   134     CONST_DATA_VALUE1                       EQU     15;20;20;20
  00DE          +1   135     CONST_DATA_VALUE2                       EQU     208+14;14;255;208+14;14
                +1   136     ;------------------------------------------------------------------------------------------
                             -----
                +1   137     ;µçÔ´¿ØÖÆ
  0095          +1   138     PIN_PWRDWN_LCD                          BIT     p1.5;p1.3        
  00A4          +1   139     Pin_pwrdwn                              BIT     p2.4;P2.7        
  00A3          +1   140     PIN_PWR_GSM                             BIT     p2.3;P2.4        
                +1   141             
                +1   142     ;--- Active ---
  00B5          +1   143     Pin_unfix                               BIT     P3.5     
  00B3          +1   144     PIN_card_exist                          BIT     p3.3    
  00B2          +1   145     WKO_BK                                  BIT     P3.2     
  0095          +1   146     PIN_PWR_LOWIO                           BIT     p1.5;P2.1        
                +1   147             
                +1   148     ;--- ESAM ---
  0083          +1   149     PIN_ESAM_TX                             BIT     p0.3;P2.6        
  0083          +1   150     PIN_ESAM_RX                             BIT     p0.3;P2.6        
  0085          +1   151     PIN_ESAM_RST                            BIT     p0.5;P2.5        
                +1   152             
                +1   153     ;--- Éù¹â¿ØÖÆ ---
  00C5          +1   154     Pin_Red                                 BIT     p4.5;P4.1        
  00C4          +1   155     Pin_Gre                                 BIT     p4.4;P4.5
                +1   156     
  0095          +1   157     PIN_BELL_01                             BIT     p1.5;P0.3        
  0095          +1   158     PIN_BELL_02                             BIT     p1.5;P0.2        
                +1   159             
                +1   160     ;--- CC1101 ---
                +1   161     ;Pin_CC1101_SS                          BIT     p3.6     
                +1   162     ;PIN_CC1101_SCLK                                BIT     P2.2     
                +1   163     ;PIN_CC1101_MOSI                                BIT     P2.3     
                +1   164     ;PIN_CC1101_MISO                                BIT     p3.7     
                +1   165     ;PIN_CC1101_GDO2                                BIT     P1.6     
                +1   166             
                +1   167     ;--- Òº¾§Ò½Å ---
  0095          +1   168     Pin_LCD_CS                              BIT     p1.5;p1.4        
  0095          +1   169     Pin_LCD_RST                             BIT     P1.5;    
  0095          +1   170     Pin_LCD_DC                              BIT     p1.5;p1.7       
  0095          +1   171     Pin_LCD_SCL                             BIT     p1.5;p3.4       
  0095          +1   172     Pin_LCD_SDA                             BIT     p1.5;p4.3       
                +1   173             
                +1   174     ;--- 522 ---
  0087          +1   175     PIN_522_SCLK                            BIT     P0.7;P0.7        
  00C6          +1   176     PIN_522_MOSI                            BIT     p4.6;P0.5        
  00C1          +1   177     PIN_522_MISO                            BIT     p4.1;P0.4        
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE     4

  0086          +1   178     Pin_522_SS                              BIT     P0.6;P0.6        
  0084          +1   179     Pin_522_RST                             BIT     p0.4;P4.6        
                +1   180             
  00B0          +1   181     PIN_SOFTSERIALRX                        BIT     P3.0     
  00B1          +1   182     PIN_SOFTSERIALTXH                       BIT     P3.1     
                +1   183             
  0095          +1   184     PIN_PWR_SE                              BIT     p1.5    ;p2.2   ; P2.4  ;       [ GSM ] 
  0095          +1   185     Pin_SW                                  BIT     p1.5    
                +1   186             
                +1   187             
                +1   188     ;fu dand wei
  00A6          +1   189     Pin_ES_Rst                              BIT     p2.6;P2.3       ;p4.0;P4.4      ; P4.4  
  00B4          +1   190     PIN_SE_IO1                              BIT     p3.4;p2.4       ;P4.4;p2.3;p4.4;P2.2    ; P
                             0.5
                +1   191             
                +1   192             
                +1   193     ;--- CC1101 ---
  0097          +1   194     PIN_UART2_TX                            BIT     p1.7    ;p3.6   ; P3.7
  0096          +1   195     PIN_UART2_RX                            BIT     P1.6    ; 
                +1   196             
  0000          +1   197     BUSY                                    BIT     20H.0
                +1   198     ;////////////////////////////////////////////////Ò½Å¶¨Òå///////////////////////////////////
                             //////////////
                +1   199     ;ÉèÎª¸ß
  0091          +1   200     PIN_BK_CE                               BIT     p1.1     
  0090          +1   201     Pin_5823BK_CS                           BIT     P1.0
                +1   202     ;Éè³ÉÊäÈëÎª¸ß                           
  0080          +1   203     Pin_5823BK_MISO                         BIT     p0.0     
  0092          +1   204     Pin_5823BK_IRQ                          BIT     p1.2      
                +1   205     ;   Éè ³É µÍ
  0081          +1   206     Pin_5823BK_MOSI                         BIT     p0.1     
  00C2          +1   207     Pin_5823BK_SCLK                         BIT     p4.2     
                +1   208      
  0082          +1   209     PIN_WAVE_CHANNEL1                       BIT     p0.2;P2.0        
                +1   210      
                +1   211     ;=====================================================================================
  008F          +1   212     Reg_WakeClk0                            EQU     08fH
  00DC          +1   213     Reg_WakeClk_04                          BIT     CCON.4  ;P3.4
  00DD          +1   214     Reg_WakeClk_05                          BIT     CCON.5  ;P3.5
                +1   215     ;ÉùÃ÷STC12C5628AD ÏµÁÐ MCU ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷µØÖ·
  00B7          +1   216     IPH EQU 0B7H ;ÖÐ¶ÏÓÅÏÈ¼¶¸ßÎ»¼Ä´æÆ÷
  00AE          +1   217     EPCA_LVD EQU IE.6 ;PCA ÖÐ¶ÏºÍ LVD(µÍÑ¹¼ì²â)ÖÐ¶Ï¹²ÏíµÄ×ÜÖÐ¶Ï¿ØÖÆÎ»
  00F9          +1   218     CH EQU 0F9H ;PCA ¼ÆÊÆ÷¸ß8 Î»¡£
  00E9          +1   219     CL EQU 0E9H ;PCA ¼ÆÊÆ÷µÍ8 Î»¡£
                +1   220     
                +1   221     ;------------------------
  00D8          +1   222     CCON EQU 0D8H ;PCA ¿ØÖÆ¼Ä´æÆ÷¡£
  00D8          +1   223     CCF0 EQU CCON.0 ;PCA Ä£¿é0 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00D9          +1   224     CCF1 EQU CCON.1 ;PCA Ä£¿é1 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DA          +1   225     CCF2 EQU CCON.2 ;PCA Ä£¿é2 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DB          +1   226     CCF3 EQU CCON.3 ;PCA Ä£¿é3 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DC          +1   227     CCF4 EQU CCON.4 ;PCA Ä£¿é4 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DD          +1   228     CCF5 EQU CCON.5 ;PCA Ä£¿é5 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DE          +1   229     CR EQU CCON.6 ;1:ÔÊÐí PCA ¼ÆÊÆ÷¼ÆÊ, ±ØÐëÓÉÈí¼þÇå0¡£
  00DF          +1   230     CF EQU CCON.7 ;PCA ¼ÆÊÆ÷Òç³ö(CH,CL ÓÉ FFFFH ±äÎª 0000H)±êÖ¾,
                +1   231     ;PCA ¼ÆÊÆ÷Òç³öºóÓÉÓ²¼þÖÃÎ»,±ØÐëÓÉÈí¼þÇå0¡£
                +1   232     ;------------------------
  00D9          +1   233     CMOD EQU 0D9H ;PCA ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   234     
                +1   235     ;CMOD.7 CIDL: idle ×´Ì¬Ê± PCA ¼ÆÊÆ÷ÊÇ·ñ¼ÌÐø¼ÆÊ, 0: ¼ÌÐø¼ÆÊ, 1: Í£Ö¹¼ÆÊ¡£
                +1   236     ;CMOD.2 CPS1: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 1¡£
                +1   237     ;CMOD.1 CPS0: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 0¡£
                +1   238     ; CPS1 CPS0
                +1   239     ; 0 0 Íâ²¿¾§ÌåÆµÂÊ/12¡£
                +1   240     ; 0 1 Íâ²¿¾§ÌåÆµÂÊ/2¡£
                +1   241     ; 1 0 Timer 0 Òç³öÂö³å£¬
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE     5

                +1   242     ; Timer 0 »¹¿ÉÍ¨¹ AUXR ¼Ä´æÆ÷ÉèÖÃ³É¹¤×÷ÔÚ 12T »ò 1T Ä£Ê½¡£
                +1   243     ; 1 1 ´Ó ECI/P3.4 ½ÅÊäÈëµÄÍâ²¿Ê±ÖÓ¡£
                +1   244     ;CMOD.0 ECF: PCA ¼ÆÊÆ÷Òç³öÖÐ¶ÏÔÊÐíÎ», 1-- ÔÊÐí CF(CCON.7) ²úÉúÖÐ¶Ï¡£
                +1   245     ;------------------------
  00FA          +1   246     CCAP0H EQU 0FAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FB          +1   247     CCAP1H EQU 0FBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FC          +1   248     CCAP2H EQU 0FCH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FD          +1   249     CCAP3H EQU 0FDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FE          +1   250     CCAP4H EQU 0FEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FF          +1   251     CCAP5H EQU 0FFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00EA          +1   252     CCAP0L EQU 0EAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EB          +1   253     CCAP1L EQU 0EBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EC          +1   254     CCAP2L EQU 0ECH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00ED          +1   255     CCAP3L EQU 0EDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EE          +1   256     CCAP4L EQU 0EEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EF          +1   257     CCAP5L EQU 0EFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
                +1   258     ;------------------------
  00F2          +1   259     PCA_PWM0 EQU 0F2H ;PCA Ä£¿é0 PWM ¼Ä´æÆ÷¡£
  00F3          +1   260     PCA_PWM1 EQU 0F3H ;PCA Ä£¿é1 PWM ¼Ä´æÆ÷¡£
  00F4          +1   261     PCA_PWM2 EQU 0F4H ;PCA Ä£¿é2 PWM ¼Ä´æÆ÷¡£
  00F5          +1   262     PCA_PWM3 EQU 0F5H ;PCA Ä£¿é3 PWM ¼Ä´æÆ÷¡£
  00F6          +1   263     PCA_PWM4 EQU 0F6H ;PCA Ä£¿é4 PWM ¼Ä´æÆ÷¡£
  00F7          +1   264     PCA_PWM5 EQU 0F7H ;PCA Ä£¿é5 PWM ¼Ä´æÆ÷¡£
                +1   265     ;PCA_PWMn: 7 6 5 4 3 2 1 0
                +1   266     ; - - - - - - EPCnH EPCnL
                +1   267     ;B7-B2: ±£Áô
                +1   268     ;B1(EPCnH): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnH ×é³É 9 Î»Ê¡£
                +1   269     ;B0(EPCnL): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnL ×é³É 9 Î»Ê¡£
                +1   270     ;------------------------
  00DA          +1   271     CCAPM0 EQU 0DAH ;PCA Ä£¿é0 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DB          +1   272     CCAPM1 EQU 0DBH ;PCA Ä£¿é1 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DC          +1   273     CCAPM2 EQU 0DCH ;PCA Ä£¿é2 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DD          +1   274     CCAPM3 EQU 0DDH ;PCA Ä£¿é3 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DE          +1   275     CCAPM4 EQU 0DEH ;PCA Ä£¿é4 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DF          +1   276     CCAPM5 EQU 0DFH ;PCA Ä£¿é5 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   277     ;CCAPMn: 7 6 5 4 3 2 1 0
                +1   278     ; - ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   279     ;
                +1   280     ;ECOMn = 1:ÔÊÐí±È½Ï¹¦ÄÜ¡£
                +1   281     ;CAPPn = 1:ÔÊÐíÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   282     ;CAPNn = 1:ÔÊÐíÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   283     ;MATn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, ÔÊÐí CCON ÖÐµÄ CCFn ÖÃÎ»¡£
                +1   284     ;TOGn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, CEXn ½«·­×ª¡£
                +1   285     ;PWMn = 1:½« CEXn ÉèÖÃÎª PWM Êä³ö¡£
                +1   286     ;ECCFn = 1:ÔÊÐí CCON ÖÐµÄ CCFn ´¥·¢ÖÐ¶Ï¡£
                +1   287     ;ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   288     ; 0 0 0 0 0 0 0 00H Î´ÆôÓÃÈÎºÎ¹¦ÄÜ¡£
                +1   289     ; x 1 0 0 0 0 x 21H 16 Î»CEXn ÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   290     ; x 0 1 0 0 0 x 11H 16 Î»CEXn ÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   291     ; x 1 1 0 0 0 x 31H 16 Î»CEXn ±ßÑØ(ÉÏ¡¢ÏÂÑØ)´¥·¢²¶×½¹¦ÄÜ¡£
                +1   292     ; 1 0 0 1 0 0 x 49H 16 Î»Èí¼þ¶¨Ê±Æ÷¡£
                +1   293     ; 1 0 0 1 1 0 x 4DH 16 Î»¸ßËÙÂö³åÊä³ö¡£
                +1   294     ; 1 0 0 0 0 1 0 42H 8 Î» PWM¡£
                +1   295     ;------------------------------------------------------------------------------
                +1   296     ;==============================================================================
                +1   297     ;//////////////////////////////////////////////¹«¹²¼Ä´æÆ÷ /////////////////////////////////
                             //////////
  00C7          +1   298     ISP_CONTR                               EQU     0C7h
  008F          +1   299     WAKE_CLKO                               EQU     08fh
                +1   300     ;¸½¼ÓµÄ SFR WAKE_CLKO (µØÖ·£º0x8F)
                +1   301     ;b7 - PCAWAKEUP :1, ÔÊÐí PCA ÉÏÉÑØ / ÏÂ½µÑØÖÐ¶Ï »½ÐÑ powerdown¡£
                +1   302     ;b6 - RXD_PIN_IE:1, ÔÊÐí P3.0(RXD) ÏÂ½µÑØÖÃ RI£¬Ò²ÄÜÊ¹ RXD »½ÐÑ powerdown¡£
                +1   303     ;b5 - T1_PIN_IE :1, ÔÊÐí T1/P3.5 ½ÅÏÂ½µÑØÖÃ T1 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T1 ½Å»½ÐÑ powerdown¡£
                +1   304     ;b4 - T0_PIN_IE :1, ÔÊÐí T0/P3.4 ½ÅÏÂ½µÑØÖÃ T0 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T0 ½Å»½ÐÑ powerdown¡£
                +1   305     ;b3 - N/A
                +1   306     ;b2 - N/A
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE     6

                +1   307     ;b1 - T1CLKO : ÔÊÐí T1 µÄÒç³öÔÚP1.1 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T1 Òç³öÂÊ
                +1   308     ;       T1 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / ( 256 - TH1 )
                +1   309     ;       T1 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / 12 / ( 256 - TH1 )
                +1   310     ;b0 -   T0CLKO : ÔÊÐí T0 µÄÒç³öÔÚP1.0 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T0 Òç³öÂÊ
                +1   311     ;       T0 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / ( 256 - TH0)
                +1   312     ;       T0 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / 12 / ( 256 - TH0 )
                +1   313     ;--------------------------------------------------------
                +1   314     ;--------------------------------------------------------
  0094          +1   315     REG_5412AD_P0M0                         EQU     094h;093h
  0093          +1   316     REG_5412AD_P0M1                         EQU     093h;094h
                +1   317     
  0092          +1   318     REG_5412AD_P1M0                         EQU     092h;091h
  0091          +1   319     REG_5412AD_P1M1                         EQU     091h;092h
                +1   320     
  0096          +1   321     REG_5412AD_P2M0                         EQU     096h;095h
  0095          +1   322     REG_5412AD_P2M1                         EQU     095h;096h
                +1   323     
  00B2          +1   324     REG_5412AD_P3M0                         EQU     0b2h;0b1h
  00B1          +1   325     REG_5412AD_P3M1                         EQU     0b1h;0b2h
                +1   326     
  00B4          +1   327     REG_5412AD_P4M0                         EQU     0b4h;0b3h
  00B3          +1   328     REG_5412AD_P4M1                         EQU     0b3h;0b4h
                +1   329     ;-------------------------------------------------------------
  008E          +1   330     REG_5412AD_AUXR                         EQU     08EH            ;¸¨Öú¼Ä´æÆ÷
  0085          +1   331     REG_5412AD_spctl                        EQU     085H
  0084          +1   332     REG_5412AD_spstat                       EQU     084H
  0086          +1   333     REG_5412AD_spdat                        EQU     086H
  00C1          +1   334     REG_WDT_CONTR                           EQU     0C1H            ;0E1H;0C1H
  00BB          +1   335     REG_5412AD_P4SW                         EQU     0BBH
  00AB          +1   336     REG_MCU_WKCTH                           EQU     0ABH
  00AA          +1   337     REG_MCU_WKCTL                           EQU     0AAH    
                +1   338     ;//////////////////////////////////////////////RC522¼Ä´æÆ÷ ////////////////////////////////
                             ///////////////////
  0000          +1   339     REG_RC522_RC522PAGE                     EQU     00H
  0001          +1   340     REG_RC522_CommandReg                    EQU     01H
  0002          +1   341     REG_RC522_ComIEnReg                     EQU     02H
  0003          +1   342     REG_RC522_DivIEnReg                     EQU     03H
  0004          +1   343     REG_RC522_ComIrqReg                     EQU     04H
  0005          +1   344     REG_RC522_DivIrqReg                     EQU     05H
  0006          +1   345     REG_RC522_ErrorReg                      EQU     06h
  0007          +1   346     REG_RC522_Status1Reg                    EQU     07h
  0008          +1   347     REG_RC522_Status2Reg                    EQU     08h
  0009          +1   348     REG_RC522_FIFODataReg                   EQU     09h
  000A          +1   349     REG_RC522_FIFOLevelReg                  EQU     0ah
  000B          +1   350     REG_RC522_WaterLevelReg                 EQU     0bh
  000C          +1   351     REG_RC522_ControlReg                    EQU     0ch
  000D          +1   352     REG_RC522_BitFramingReg                 EQU     0dh
  000E          +1   353     REG_RC522_CollReg                       EQU     0eh
  000F          +1   354     REG_RC522_RFU                           EQU     0fh
  0011          +1   355     REG_RC522_ModeReg                       EQU     11h
  0012          +1   356     REG_RC522_TxModeReg                     EQU     12h
  0013          +1   357     REG_RC522_RxModeReg                     EQU     13h
  0014          +1   358     REG_RC522_TxControlReg                  EQU     14h
  0015          +1   359     REG_RC522_TxAutoReg                     EQU     15h
  0016          +1   360     REG_RC522_TxSelReg                      EQU     16h
  0017          +1   361     REG_RC522_RxSelReg                      EQU     17h
  0018          +1   362     REG_RC522_RxThresholdReg                EQU     18h
  0019          +1   363     REG_RC522_DemodReg                      EQU     19h
  001C          +1   364     REG_RC522_MifareReg                     EQU     1ch
  001F          +1   365     REG_RC522_SerialSpeedReg                EQU     1fh
  0021          +1   366     REG_RC522_CRCResultRegH                 EQU     21h
  0022          +1   367     REG_RC522_CRCResultRegL                 EQU     22h
  0024          +1   368     REG_RC522_ModWidthReg                   EQU     24h
  0026          +1   369     REG_RC522_RFCfgReg                      EQU     26h
  0027          +1   370     REG_RC522_GsNReg                        EQU     27h
  0028          +1   371     REG_RC522_CWGsPReg                      EQU     28h
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE     7

  0029          +1   372     REG_RC522_ModGsPReg                     EQU     29h
  002A          +1   373     REG_RC522_TModeReg                      EQU     2ah
  002B          +1   374     REG_RC522_TPrescalerReg                 EQU     2bh
  002C          +1   375     REG_RC522_TReloadRegH                   EQU     2ch
  002D          +1   376     REG_RC522_TReloadRegL                   EQU     2dh
  002E          +1   377     REG_RC522_TCounterValueRegH             EQU     2eh
  002F          +1   378     REG_RC522_TCounterValueRegL             EQU     2fh
                +1   379             
                +1   380     ;/////////////////////////////////////////////////Ò»°ãÏµÍ³³£Á¿±í///////////////////////////
                             //////////////////////
  0001          +1   381     CONST_HOLD_5823TX                       EQU     1
  0000          +1   382     CONST_HOLD_5823RX                       EQU     0
                +1   383             
                +1   384             
  00FF          +1   385     CONST_SYS_TradeConfine                  EQU     255                             ;½»Ò×Ê±¼äÏÞ
                             ÖÆ
  000A          +1   386     CONST_SYS_PowerONTimer                  EQU     10                              ;ÉÏµç¶¨Ê±Æ÷
                                  
  0088          +1   387     CONST_SYS_PREFlag                       EQU     088H                            ;
  00AA          +1   388     CONST_SYS_AA                            EQU     0AAH
  0055          +1   389     CONST_SYS_55                            EQU     55H
  0004          +1   390     CONST_SYS_OBUIDLEN                      EQU     4                               ;obuid ³¤¶È
  0008          +1   391     CONST_BSTLIMIT                          EQU     8;20;10                 ;¼«ÏÞBST¸öÊ
  0064          +1   392     CONST_BSTLIMIT02                        EQU     100
                +1   393     
  00FF          +1   394     CONST_VSTLIMIT                          EQU     255     ;100                    ;¼«ÏÞVST¸öÊ
  00FA          +1   395     CONST_Pro_OverTime2S                    EQU     250                             ;³¬Ê±ÏÞÊ±£¬
                             196-246*30=1200MS 
                +1   396     ;/////////////////////////////////////////////////³öÈë¿Ú³£Á¿±í/////////////////////////////
                             ////////////////////
  0003          +1   397     CONST_ETC_INPUT                         EQU     3       ;ETC Èë¿Ú
  0001          +1   398     CONST_MTC_INPUT                         EQU     1       ;MTC Èë¿Ú
  0001          +1   399     CONST_INPUT_ISEnable                    EQU     1;=1²»ÆôÓÃ =0ÆôÓÃ
                +1   400     ;/////////////////////////////////////////////////×´Ì¬³£Á¿±í///////////////////////////////
                             //////////////////
  0000          +1   401     CONST_STATE_TRUE                        EQU     000H                            ;Ö´ÐÐ³É¹¦
  00FF          +1   402     CONST_STATE_FALSE                       EQU     0FFH                            ;³ÌÐòÖ´ÐÐ³ö
                             ´í
                +1   403     ;Ò»°ãÐÔ´íÎó     01      µ¼ÈëÊ§°Ü        STR_InputFail
                +1   404     ;ºÏÍ¬ºÅ²»Í¬     02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                +1   405     ;Ê¹ÓÃ´ÎÊ=FFH    03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
  0001          +1   406     CONST_STATE_InputFail                   EQU     01
  0002          +1   407     CONST_STATE_IllegalInputCard            EQU     02
  0003          +1   408     CONST_STATE_InputCardInvalid            EQU     03
                +1   409     ;Ò»°ãÐÔ´íÎó     04      ¼¤»îÊ§°Ü        STR_ActiveFail
                +1   410     ;ºÏÍ¬ºÅ²»Í¬     05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                +1   411     ;Ê¹ÓÃ´ÎÊ=FFH    06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
  0004          +1   412     CONST_STATE_ActiveFail                  EQU     04
  0005          +1   413     CONST_STATE_IllegalACTCard              EQU     05
  0006          +1   414     CONST_STATE_ACTCardInvalid              EQU     06
                +1   415             
  0007          +1   416     CONST_STATE_5823INIER                   EQU     07      ;5823³õÊ¼»¯³ö´í
  0008          +1   417     CONST_STATE_5823SleepEr                 EQU     08      ;5823ÐÝÃß³ö´í
  0009          +1   418     CONST_STATE_GetSecureSelFileEr          EQU     09      ;getsecureÑ¡¿¨Ä¿Â¼³ö´í
                +1   419     
  000A          +1   420     CONST_STATE_BaseNinit                   EQU     10      ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  000B          +1   421     CONST_STATE_BaseESAMDF01                EQU     11      ;Baseinit02º¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1   422             
  000C          +1   423     CONST_STATE_CARDPreDeal1001             EQU     12      ;Ô¤¶Á1001Ê§°Ü
  000D          +1   424     CONST_STATE_CARDPreDeal0002             EQU     13      ;Ô¤¶Á0002Ê§°Ü
  000E          +1   425     CONST_STATE_CARDPreDeal0012             EQU     14      ;Ô¤¶Á0012Ê§°Ü
  000F          +1   426     CONST_STATE_CARDPreDeal0015             EQU     15      ;Ô¤¶Á0015Ê§°Ü
  0010          +1   427     CONST_STATE_CARDPreDeal0019             EQU     16      ;Ô¤¶Á0019Ê§°Ü
  0011          +1   428     CONST_STATE_CARDPreDeal3f00             EQU     17      ;Ô¤¶Á3f00Ê§°Ü
  0012          +1   429     CONST_STATE_CARDPreDeal81               EQU     18      ;Ô¤¶Á81Ê§°Ü
                +1   430             
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE     8

  0013          +1   431     CONST_STATE_BaseN01init                 EQU     19      ;Baseinitº¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  0014          +1   432     CONST_STATE_Base01ESAMDF01              EQU     20      ;Baseinitº¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1   433             
  0015          +1   434     CONST_STATE_Base01Contact               EQU     21      ;Baseinitº¯Ê£¬Ìøµ½½Ó´¥
  0016          +1   435     CONST_STATE_Base02Contact               EQU     22      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1   436             
  0017          +1   437     CONST_STATE_test                        EQU     23      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1   438             
  0018          +1   439     CONST_STATE_Base02Re                    EQU     24
  0019          +1   440     CONST_STATE_Base02AntiColl              EQU     25
  001A          +1   441     CONST_STATE_Base02Sel                   EQU     26
  001B          +1   442     CONST_STATE_Base02Rats                  EQU     27
                +1   443             
  001C          +1   444     CONST_STATE_Base01Re                    EQU     28
  001D          +1   445     CONST_STATE_Base01AntiColl              EQU     29
  001E          +1   446     CONST_STATE_Base01Sel                   EQU     30
  001F          +1   447     CONST_STATE_Base01Rats                  EQU     31      
                +1   448             
  0020          +1   449     CONST_STATE_MemoryEr                    EQU     32      
  0021          +1   450     CONST_STATE_ExMemoryEr                  EQU     33      
  0022          +1   451     CONST_STATE_ExMemoryEr02                EQU     34      
                +1   452             
  0001          +1   453     CONST_STATE_SERIALACCPET                EQU     001H                            ;´®¿Ú½ÓÊÕ´í
                             Îó
  0002          +1   454     CONST_STATE_SERIALOVERTIME              EQU     CONST_STATE_SERIALACCPET + 1    ;´®¿Ú½ÓÊÕ³¬
                             Ê±
  0003          +1   455     CONST_STATE_ACCEPTOVER                  EQU     CONST_STATE_SERIALOVERTIME + 1  ;´®¿Ú½ÓÊÕÍê
                             ±Ï£¬Ã»ÓÐºóÐø×Ö½Ú 
  0004          +1   456     CONST_STATE_ACCEPTOVERLEN               EQU     CONST_STATE_ACCEPTOVER + 1      ;´®¿Ú½ÓÊÕ³¬
                             ³¤
  0005          +1   457     CONST_STATE_RSTCPUER                    EQU     CONST_STATE_ACCEPTOVERLEN + 1   ;¸´Î»´®¿Ú´í
                             Îó
  0006          +1   458     CONST_STATE_AUTHER                      EQU     CONST_STATE_RSTCPUER + 1        ;ÈÏÖ¤Ê§°Ü
                +1   459             
                +1   460     ;--- ¹¤×÷Çø³£Á¿¶¨Òå ---
  0000          +1   461     CONST_WORKSTAION_0                      EQU     00H     ;¹¤×÷Çø0
  0001          +1   462     CONST_WORKSTAION_1                      EQU     01H     ;¹¤×÷Çø1
  0002          +1   463     CONST_WORKSTAION_2                      EQU     02H     ;¹¤×÷Çø2        
  0003          +1   464     CONST_WORKSTAION_3                      EQU     03H     ;¹¤×÷Çø3
                +1   465     
                +1   466     ;//////////////////////////////////////¿¨Æ¬Âß¼­³£Á¿¶¨Òå////////////////////////////////////
                             ////////
  0017          +1   467     CONST_CARD_PASS                         EQU     23
  0016          +1   468     CONST_CARD_CONSUME                      EQU     22
                +1   469     ;//////////////////////////////////////GSM³£Á¿¶¨Òå/////////////////////////////////////////
                             /////////
  0002          +1   470     CONST_LHX_FLAG                          EQU     2 ;0-¹ú±êOBU  1-GSM OBU  2-433 OBU
                +1   471     
                +1   472     ;RTC ´ó´°Ê±¼ä                           ;6·ÖÖÓ£¬Æ½¾ùÁ½ÃëÒ»´ÎcellID
                +1   473     ;CONST_RTCOverFlow                      EQU     144;180;180
                +1   474     ;CONST_RTCUartRX                        EQU     24;4;8,12,16,20,24;142;
                +1   475     
  0090          +1   476     CONST_RTCOverFlow                       EQU     144;20;144;6;144;6;12;144
                +1   477     ;CONST_RTCUartRX                                EQU     12
                +1   478     ;CONST_RTCUartRX02                      EQU     142
  0000          +1   479     CONST_Flag_INPUT                        EQU     0
  0001          +1   480     CONST_Flag_OutPUT                       EQU     1
                +1   481     
                +1   482     ;GSM CellID ¼ÇÂ¼Ê¾ÝËùÔÚµÄÎÄ¼þÃû
  0000          +1   483     CONST_Cellfile_H                        EQU     000H
  0009          +1   484     CONST_Cellfile_L                        EQU     09h;030H
                +1   485     
  00EF          +1   486     CONST_ESAMCellfile_H                    EQU     0EFH;000H
  0007          +1   487     CONST_ESAMCellfile_L                    EQU     07H;03h;030H
                +1   488     ;CONST_Cellfile_H                       EQU     000H
                +1   489     ;CONST_Cellfile_L                       EQU     008h
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE     9

                +1   490     
  00F0          +1   491     CONST_GSM_MaxNum                        EQU     240
                +1   492     ;CONST_GSM_MaxNum                       EQU     5
                +1   493     
  0014          +1   494     CONST_GSM_PJNum                         EQU     20
                +1   495     ;CONST_GSM_PJNum                        EQU     1
                +1   496     
                +1   497     ;RTC Ð¡´°Ê±¼ä;
  0008          +1   498     CONST_MCU_WKCTH                         EQU     008H;0fh;00fH;00fH;00fH
  00FF          +1   499     CONST_MCU_WKCTL                         EQU     0FFH
                +1   500     
                +1   501     ;RTC ÊÇ·ñ¿ªÆô£¬±ê¼ÇÖµ
                +1   502     ;=CONST_RTC_ON ±íÊ¾¿ªÆô
                +1   503     ;= ÆäËü Ã»ÓÐ¿ªÆô
  0055          +1   504     CONST_RTC_ON                            EQU     55H
  00FF          +1   505     CONST_RTC_off                           EQU     0ffH
  0064          +1   506     CONST_SYS_RTCOverTime                   EQU     100
                +1   507     
                +1   508     ;²å¿¨½«obuÖÐCellid¼ÇÂ¼µ¼Èëµ½¿¨Æ¬ÖÐ£¬Ò»´ÎÐ´Èëµ½¿¨Æ¬ÖÐ cellID µÄ×Ö½ÚÊ
  0008          +1   509     CONST_GSM_NUM                           EQU     8               ;40
                +1   510     ;//////////////////////////////////////MF³£Á¿¶¨Òå//////////////////////////////////////////
                             ////////
  0000          +1   511     CONST_MF_READ                           EQU     00H     ;Ö¸ÁîÀàÐÍ ¶Á¿é
  0001          +1   512     CONST_MF_WRITE                          EQU     01H     ;Ö¸ÁîÀàÐÍ Ð´¿é
  0002          +1   513     CONST_MF_DECREMENT                      EQU     02H     ;Ö¸ÁîÀàÐÍ ¿Û¿î
  0003          +1   514     CONST_MF_INCREMENT                      EQU     03H     ;Ö¸ÁîÀàÐÍ ³äÖµ
  0004          +1   515     CONST_MF_RESTOR                         EQU     04H     ;Ö¸ÁîÀàÐÍ ±¸·Ý¿é
                +1   516     
  00C0          +1   517     CONST_MF_RC500DECREMENT                 EQU     0C0H    ;RC500 ¿Û¿î
  00C1          +1   518     CONST_MF_RC500INCREMENT                 EQU     0C1H    ;RC500 ³äÖµ
                +1   519     ;//////////////////////////////////////DSRC³£Á¿¶¨Òå////////////////////////////////////////
                             //////////
  0004          +1   520     CONST_DSRC_MACCTRL                      EQU     4       ;MAC¿ØÖÆÓò
  0005          +1   521     CONST_DSRC_LLCCTRL                      EQU     5       ;LLC¿ØÖÆÓò
  0006          +1   522     CONST_DSRC_HEAD                         EQU     6       ;×Ö¶Î×ÖÍ·
  0007          +1   523     CONST_DSRC_ACTION                       EQU     7       ;Action
  0008          +1   524     CONST_DSRC_DID                          EQU     8       ;DSRC-DID
  0009          +1   525     CONST_DSRC_ACTIONTYPE                   EQU     9       ;ActionType
  000A          +1   526     CONST_DSRC_CONTAIN                      EQU     10      ;Contain
  000B          +1   527     CONST_DSRC_Fill                         EQU     11      ;Fill
  000C          +1   528     CONST_SSRC_FID                          EQU     12      ;ÎÄ¼þ±êÊ¶£¨FID£©
                +1   529     
  0000          +1   530     CONST_DSRC_FildIDAPPKey                 EQU     0       ;0¨D¨DETC Ó¦ÓÃÃÜÔ¿ÎÄ¼þ
  0001          +1   531     CONST_DSRC_FildIDVehicle                EQU     1       ;1¨D¨DETC Ó¦ÓÃ³µÁ¾ÐÅÏ¢ÎÄ¼þ
  0002          +1   532     CONST_DSRC_FildIDConsume                EQU     2       ;2-ETC Ó¦ÓÃ½»Ò×¼ÇÂ¼ÎÄ¼þ
  0003          +1   533     CONST_DSRC_FildIDHold                   EQU     3       ;3-ETC Ó¦ÓÃ±£ÁôÎÄ¼þ
                +1   534     
  0001          +1   535     CONST_DSRC_ChannelIDICC                 EQU     1
  0002          +1   536     CONST_DSRC_ChannelIDSAM                 EQU     2
                +1   537     ;//////////////////////////////////////AcionType³£Á¿¶¨Òå///////////////////////////////////
                             ////////////
  0000          +1   538     Const_ActionType_GetSecure              EQU     0       ;getSecure
  0001          +1   539     Const_ActionType_SetSecure              EQU     1       ;setSecure
  0002          +1   540     Const_ActionType_GetRand                EQU     2       ;getRand
  0003          +1   541     Const_ActionType_TransferChannel        EQU     3       ;transferChannel
  0004          +1   542     Const_ActionType_SetMMI                 EQU     4       ;SetMMI
                +1   543     ;//////////////////////////////////////Flash³£Á¿¶¨Òå///////////////////////////////////////
                             ///////////
  0058          +1   544     CONST_Flash_SysinfoLen                  EQU     88;39;38+12     ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0004          +1   545     CONST_Flash_0002Len                     EQU     4       ; 0002ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È  
  0028          +1   546     CONST_Flash_0012Len                     EQU     40      ; 0012ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
                +1   547     ;CONST_Flash_0015Len                    EQU     33      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1   548     CONST_Flash_0015Len                     EQU     43      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  003C          +1   549     CONST_Flash_0019Len                     EQU     60;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1   550     CONST_Flash_0019GBLen                   EQU     43;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0001          +1   551     CONST_Flash_CardTypeLEN                 EQU     1       ; ÉÏ´Î²å¿¨ÊÇ½Ó´¥£¬»¹ÊÇ·Ç½Ó´¥
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    10

                +1   552     ;CONST_Flash_SYSPARAMLEN                EQU     1       ; ÏµÍ³²ÎÊ
  0008          +1   553     CONST_Flash_BeaconIDUnixTimeLen         EQU     8       ; ÌìÏßID¼°unixtime
  0001          +1   554     CONST_FALSH_PREFlagLen                  EQU     1       ; Ô¤´¦Àí±ê¼Ç=88,±íÊ¾ÉÏ»ØÔ¤´¦Àí³É¹¦
                +1   555     
                +1   556     ;************************************************************************************
                +1   557     ;ÌØ±ð±¸×¢: ÓÉÓÚÔÚÔ¤¶Á0015/0012/0019Ê±ÔÝ´æÔÚÍâ´æµÄ³¤¶È³¬¹128¸ö×Ö½Ú£¬ËùÒÔ£¬Íâ´æ±äÁ¿µÄÆðÆôÎ»ÖÃ
                             £¬ÒªÔÚConst_Flash_FileLen
                +1   558     ;³¤¶ÈÖ®ºó£¬Const_Flash_FileLen = 8F£¬Èç¹ûÒÔºóConst_Flash_FileLen³¤¶È¸ÄÁË£¬ÄÇÍâ´æµÄÆôÊ¼Î»ÖÃÒ
                             ²Òª¸Ä
                +1   559     ;Íâ´æµÄÆôÊ¼Î»ÖÃ¶¨ÒåÔÚOBUmain.incÖÐXDATA_VARSTARTµÄÖµ
                +1   560     ;************************************************************************************
  00EC          +1   561     Const_Flash_FileLen                     EQU     CONST_Flash_SysinfoLen + CONST_Flash_0015Le
                             n + CONST_Flash_0019Len + CONST_Flash_0012Len + CONST_Flash_0002Len + CONST_Flash_CardTypeLEN 
                +1   562     
  0072          +1   563     CONST_FLASH_Block01                     EQU     72H
                +1   564     
  0072          +1   565     CONST_FLASH_STARTHIGH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
  0000          +1   566     CONST_FLASH_STARTLOW                    EQU     00H                                        
                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
                +1   567     
  0072          +1   568     CONST_FLASH_SYSINFOH                    EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ,LEN = 38 BYTE
  0000          +1   569     CONST_FLASH_SYSINFOL                    EQU     00H
                +1   570     
  0072          +1   571     CONST_FLASH_0002H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0002,LEN = 4 BYTE
  0058          +1   572     CONST_FLASH_0002L                       EQU     CONST_FLASH_SYSINFOL + CONST_Flash_SysinfoL
                             en
                +1   573     
  0072          +1   574     CONST_FLASH_0012H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0012,LEN = 24 BYTE
  005C          +1   575     CONST_FLASH_0012L                       EQU     CONST_FLASH_0002L + CONST_Flash_0002Len
                +1   576     
  0072          +1   577     CONST_FLASH_0015H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0015,LEN = 33 BYTE
  0084          +1   578     CONST_FLASH_0015L                       EQU     CONST_FLASH_0012L + CONST_Flash_0012Len
                +1   579     
  0072          +1   580     CONST_FLASH_0019H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0019,LEN = 43 BYTE      
  00AF          +1   581     CONST_FLASH_0019L                       EQU     CONST_FLASH_0015L + CONST_Flash_0015Len
                +1   582             
                +1   583     ;CONST_FLASH_01BlockH                   EQU     6EH;2EH                                    
                                  ; MF¿¨µÚ1¿éÊ¾Ý
                +1   584     ;CONST_FLASH_01BlockL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len
                +1   585             
                +1   586     ;CONST_FLASH_04BlockH                   EQU     6EH;2EH
                +1   587     ;CONST_FLASH_04BlockL                   EQU     CONST_FLASH_01BlockL + 16                  
                                  ;MF¿¨µÚ4¿éÊ¾Ý
                +1   588             
                +1   589     ;CONST_FLASH_10BlockH                   EQU     6EH;2EH
                +1   590     ;CONST_FLASH_10BlockL                   EQU     CONST_FLASH_04BlockL + 16                  
                                  ;MF¿¨µÚ16¿éÊ¾Ý
                +1   591             
  0072          +1   592     CONST_FLASH_LASTCARDH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ;ÉÏÒ»´Î²å¿¨ÀàÐÍ
  00EB          +1   593     CONST_FLASH_LASTCARDL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len    
                                  ;CONST_FLASH_10BlockL + 16
                +1   594             
                +1   595     ;CONST_FLASH_SYSPARAMH                  EQU     6EH;2EH                         ;ÏµÍ³²ÎÊ
                +1   596     ;CONST_FLASH_SYSPARAML                  EQU     CONST_FLASH_LASTCARDL + 1
                +1   597             
  0072          +1   598     CONST_Flash_BeaconIDUnixTimeH           EQU     CONST_FLASH_Block01;2EH
  00EC          +1   599     CONST_Flash_BeaconIDUnixTimeL           EQU     CONST_FLASH_LASTCARDL + 1       ; 8 byte Ìì
                             ÏßIDºÍunixtimeÊ±¼ä
                +1   600             
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    11

  0072          +1   601     CONST_FALSH_PREFlagH                    EQU     CONST_FLASH_Block01;2EH
  00F4          +1   602     CONST_FALSH_PREFlagL                    EQU     CONST_Flash_BeaconIDUnixTimeL + CONST_Flash
                             _BeaconIDUnixTimeLen;1 Byte
                +1   603             
  0072          +1   604     CONST_FALSH_PREFlag02H                  EQU     CONST_FLASH_Block01;2EH
  00F5          +1   605     CONST_FALSH_PREFlag02L                  EQU     CONST_FALSH_PREFlagL + 1        ;1      ;3 
                             Byte
                +1   606              
  0072          +1   607     CONST_FALSH_PREFlag03H                  EQU     CONST_FLASH_Block01;2EH
  00F6          +1   608     CONST_FALSH_PREFlag03L                  EQU     CONST_FALSH_PREFlag02L + 1      ;1      ;3 
                             Byte
                +1   609             
  0072          +1   610     CONST_FALSH_PowerH                      EQU     CONST_FLASH_Block01;2EH
  00F7          +1   611     CONST_FALSH_PowerL                      EQU     CONST_FALSH_PREFlag03L + 1      ;1      ;3 
                             Byte
                +1   612             
                +1   613     ;CONST_FLASH_SysRstH                    EQU     06CH
                +1   614     ;CONST_FLASH_SysRstL                    EQU     000H
                +1   615             
  006C          +1   616     CONST_FLASH_Sys0020H                    EQU     6ch;064H
  0000          +1   617     CONST_FLASH_Sys0020L                    EQU     000H
                +1   618             
  006A          +1   619     CONST_FLASH_Sys0020numH                 EQU     6ah;062H
  0000          +1   620     CONST_FLASH_Sys0020numL                 EQU     000H
                +1   621             
                +1   622     ;CONST_FLASH_SysHVH                     EQU     6CH;68h;062H
                +1   623     ;CONST_FLASH_SysHVL                     EQU     000H
                +1   624             
  00FF          +1   625     const_black_h                           EQU     0ffH
  00FF          +1   626     const_black_l                           EQU     0ffH
                +1   627             
  0000          +1   628     const_white_h                           EQU     000H;40h                                ; 0
                             0h
  0031          +1   629     const_white_l                           EQU     031H;80h                                ; 0
                             0h
                +1   630     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////////
                +1   631     ;(¾§Õñ*2)/(32*12*²¨ÌØÂÊ)                
                +1   632     ;CONST_SOF                              EQU     22118400                        ; 24576000
  0000          +1   633     CONST_SOF                               EQU     24576000                        ; µ±Ç°Ö÷Æµ¾
                             §ÌåÆµÂÊ
                +1   634     ;//////////////////////////////////////// PPS ³£Á¿ ¶¨Òå ///////////////////////////////////
                             ////////////
  0010          +1   635     CONST_PPS_9600                          EQU     10H                             
  0013          +1   636     CONST_PPS_38400                         EQU     13H
  0018          +1   637     CONST_PPS_115200                        EQU     18H
  0096          +1   638     CONST_PPS_230000                        EQU     96H
                +1   639     ;//////////////////////////////////////// ´®¿Ú ³£Á¿ ¶¨Òå //////////////////////////////////
                             /////////////
                +1   640             
  0000          +1   641     CONST_BAUD_9600                         EQU     00                              ; ²¨ÌØÂÊ±àÂ
                             ë
  0001          +1   642     CONST_BAUD_38400                        EQU     01
  0002          +1   643     CONST_BAUD_115200                       EQU     02
  0003          +1   644     CONST_BAUD_115200PC                     EQU     03
  0004          +1   645     CONST_BAUD_230000                       EQU     04
  0005          +1   646     CONST_BAUD_38400PC                      EQU     5
  0006          +1   647     CONST_BAUD_9600PC                       EQU     06                              ; ²¨ÌØÂÊ±àÂ
                             ë
                +1   648             
                +1   649     ;ÔÚ24.576MÏÂ´®¿ÚµÚÒ»¸ö×Ö½ÚÉè¶¨ÎªÒª¼ìË÷100MS = CONST_SOF/(10*(FF*FF) = 38 = 26H
  0010          +1   650     CONST_SOFTFIRSTSCANTIME                 EQU     16;8;32;16;8;10H        ; 10h   ;10h    ;10
                             H;0dH;10H    ;  26H
  00FF          +1   651     CONST_SOFTFIRSTSCANTIMEXX               EQU     0FFH    ; ESAM¿¨·Ç³£¹æÖ¸Áî£¬¼Ó´óËÑË÷Ê±¼äÏÞÖ
                             Æ[Èç80 E4Ö¸Áî]
  0070          +1   652     CONST_SOFTSECOND                        EQU     070H    ; 10H   ;  Èí½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼ä
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    12

                             ÏÞ³¤ CONST_SOFTSECOND*255¸öÖÜÆÚ
  0015          +1   653     CONST_HANDSECOND                        EQU     15H     ; 01AH[ÔÚ9600²¨ÌØÏÂ£¬Òª·Å¿íµ½1AH];Ó
                             ²½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼äÏÞ³¤ CONST_HANDSECOND*255¸öÖÜÆÚ
                +1   654                                                     
  0014          +1   655     CONST_SOFTBYTESP                        EQU     20;50;4 ;Èí´®¿Ú·¢ËÍ³ÌÐò×Ö½Ú¼ä¾à¿ØÖÆÓë_FUN_L
                             IB_DELAYSIMPLAYº¯ÊÅäºÏÊ¹ÓÃ
                +1   656     ;//////////////////////////////////////// Èí´®¿Ú ³£Á¿ ¶¨Òå ////////////////////////////////
                             ///////////////
                +1   657     ;CONST_BAUD_FULL9600                    EQU     637     ;2560
                +1   658     ;CONST_BAUD_HALF9600                    EQU     317     ;2560
                +1   659     ;CONST_BAUD_FULL9600                    EQU     576     ;2304
                +1   660     ;CONST_BAUD_HALF9600                    EQU     285     ;1152
                +1   661     ;CONST_BAUD_FULL9600                    EQU     76      ;2304
                +1   662     ;CONST_BAUD_HALF9600                    EQU     85      ;1152
                +1   663     ;CONST_BAUD_FULL38400                   EQU     157     ;640
                +1   664     ;CONST_BAUD_HALF38400                   EQU     77      ;213
                +1   665     ;CONST_BAUD_FULL38400                   EQU     141     ;576
                +1   666     ;CONST_BAUD_HALF38400                   EQU     69      ;288
                +1   667     ;CONST_BAUD_FULL115200                  EQU     50      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   668     ;CONST_BAUD_HALF115200                  EQU     21      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   669     ;CONST_BAUD_FULL115200                  EQU     45      ;192 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   670     ;CONST_BAUD_HALF115200                  EQU     21      ;96  Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   671             
  00B3          +1   672     CONST_BAUD_FULL9600                     EQU     179     ;[(24576000/9600)*(3.58/6)-12]/4-20
                             0=[2560*(3.59/6)-12]/4-250=(1527-12)/4-200=378.75=379-200=179
  0058          +1   673     CONST_BAUD_HALF9600                     EQU     88      ;[(24576000/9600/2)*(3.58/6)-12]/4-
                             100=[2560*(3.59/6)-12]/4=(763-12)/4-100=187.75=188-100=88
                +1   674     
  005D          +1   675     CONST_BAUD_FULL38400                    EQU     93      ;[(24576000/38400)*(3.58/6)-12]/4= 
                             [640 * (3.59/6)-12]/4 = (382-12)/4=92.5=93
  002D          +1   676     CONST_BAUD_HALF38400                    EQU     45      ;[(24576000/38400/2)*(3.58/6)-12]/4
                             = [320 * (3.59/6)-12]/4 = (191-12)/4=44.75=45
                +1   677     
  001D          +1   678     CONST_BAUD_FULL115200                   EQU     29      ;[(24576000/115200)*(3.58/6)-12]/4=
                             [213*(3.58/6)-12]/4=(127-12)/4=28.75=29
  000D          +1   679     CONST_BAUD_HALF115200                   EQU     13;     ;[(24576000/115200/2)*(3.58/6)-12]/
                             4=[115.5*(3.58/6)-12]/4=(64-12)/4=13
                +1   680     
  000F          +1   681     CONST_BAUD_FULL230000                   EQU     15;13   ;[(24576000/230000/2)*(3.58/6)]/4 =
                              64/4 = 16
  0008          +1   682     CONST_BAUD_HALF230000                   EQU     8;5     ;[(24576000/230000/2)*(3.58/6)]/4=[
                             115.5*(3.58/6)]/4=32/4=8
                +1   683             
  00B3          +1   684     CONST_BAUD_CURRENTBITFULL               EQU     CONST_BAUD_FULL9600
  0058          +1   685     CONST_BAUD_CURRENTBITHALF               EQU     CONST_BAUD_HALF9600
                +1   686     ;CONST_BAUD_BITHALF12                   EQU     CONST_BAUD_CURRENTBITHALF - 3
                +1   687     ;CONST_BAUD_BITFULL8                    EQU     CONST_BAUD_CURRENTBITFULL - 2
                +1   688     ;CONST_BAUD_BITFULL12                   EQU     CONST_BAUD_CURRENTBITFULL - 3
                +1   689     ;CONST_BAUD_BITFULL20                   EQU     CONST_BAUD_CURRENTBITFULL - 5
                +1   690     ;CONST_BAUD_BITFULL28                   EQU     CONST_BAUD_CURRENTBITFULL - 7
                +1   691             
  000C          +1   692     CONST_BAUD_BITHALF12                    EQU     3 + 9
  000B          +1   693     CONST_BAUD_BITFULL8                     EQU     2 + 9
  000C          +1   694     CONST_BAUD_BITFULL12                    EQU     3 + 9
  000E          +1   695     CONST_BAUD_BITFULL20                    EQU     5 + 9
  0010          +1   696     CONST_BAUD_BITFULL28                    EQU     7 + 9
                +1   697             
                +1   698     ;////////////////////////////////////////  Ó²´®¿Ú ³£Á¿ ¶¨Òå ///////////////////////////////
                             ////////////////
                +1   699     ;CONST_BAUD_HAND115200                  EQU     0FFH;(256 - CONST_SOF/(192*115200))     ;
                +1   700     ;CONST_BAUD_HAND38400                   EQU     0FDH;(256 - (CONST_SOF/(192*38400)))    ;
                +1   701     ;CONST_BAUD_HAND9600                    EQU     0F4H;(256 - CONST_SOF/(192*9600))       ;
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    13

                +1   702     
  00FC          +1   703     CONST_BAUD_HAND230000                   EQU     252     ;0FCH   24.576x1000000/(230000x6/3.
                             58=)/16 = 4 = F8H
  00F3          +1   704     CONST_BAUD_HAND115200PC                 EQU     243     ;243    ;24.576 / 0F3H  ;24576000 /
                              32179 = 764 / 16 = 47.7 = 48 = D0H
  00F8          +1   705     CONST_BAUD_HAND115200                   EQU     248     ;0F8H   ;24.576x1000000/(115200x6/3
                             .58=193073)/16 = 8 = F8H             
  00D8          +1   706     CONST_BAUD_HAND38400pc                  EQU     216     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  00E9          +1   707     CONST_BAUD_HAND38400                    EQU     233     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  0060          +1   708     CONST_BAUD_HAND9600pc                   EQU     96      ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1   709     
  00A3          +1   710     CONST_BAUD_HAND9600                     EQU     163     ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1   711     
                +1   712     ;24.576x1000000/(38400x9.6/3.58=102972)/16=15 = f1
                +1   713     ;24.576x1000000/(9600x9.6/3.58=25743)/16=60 = c4h
                +1   714     ;24.576x1000000/(230000x6/3.58=385475)/16=4 = fch
                +1   715     
                +1   716     ;////////////////////////////////////////  Ö¸Áî¼¯ /////////////////////////////////////////
                             //////
                +1   717     ;LL C2H LH 32H
                +1   718     ;ML 62H MH 12H
                +1   719     ;HL 32H HH 12H
                +1   720             
  0001          +1   721     CONST_ACT_L                             EQU     1
  0002          +1   722     CONST_ACT_M                             EQU     2
  0003          +1   723     CONST_ACT_H                             EQU     3
                +1   724             
  0002          +1   725     CONST_ACT_V                             EQU     CONST_ACT_M
                +1   726             
  000A          +1   727     CONST_ACT_L_L                           EQU     0ah;0C2H
  0006          +1   728     CONST_ACT_L_H                           EQU     06h;032H
                +1   729             
  0006          +1   730     CONST_ACT_M_L                           EQU     06h;062H
  0000          +1   731     CONST_ACT_M_H                           EQU     00h;012H
                +1   732             
  0000          +1   733     CONST_ACT_H_L                           EQU     00h;032H
  0001          +1   734     CONST_ACT_H_H                           EQU     01h;012H
                +1   735     
                     736     
                     737     ;$include (CARDAPP.INC)
                +1   738     ;---¶Î¶¨Òå---
                +1   739     ?pr?CARDAPP?Mater               SEGMENT CODE
                +1   740     ?co?CARDAPP?FLASHSTR            SEGMENT CODE
                +1   741             
                +1   742     ;--- CPU CARD ---
                +1   743     EXTRN   CODE(_FUN_Contact_INIT)                                                            
                                  ;³õÊ¼»¯CPU¿¨
                +1   744     EXTRN   CODE(_FUN_Contact_Channel0)                                                        
                                  ;T0¿¨²Ù×÷º¯Ê
                +1   745     EXTRN   CODE(_FUN_Contact_Channel1)                                                        
                                  ;T1¿¨²Ù×÷º¯Ê
                +1   746     EXTRN   CODE(_FUN_Contact_PPS)                                                             
                                  ;PPS[ÉèÖÃÖ¸Áî]
                +1   747     EXTRN   CODE(_FUN_Contact_CHANGEBAUD)
                +1   748     EXTRN   CODE(_FUN_Contact_Channel)                                                         
                                  ;¿¨²Ù×÷[Èí·¢ËÍ£¬Ó²½ÓÊÕ])
                +1   749     EXTRN   CODE(_FUN_MF_Channel)
                +1   750     EXTRN   CODE(_FUN_ProCard_Channel)
                +1   751     EXTRN   CODE(_eraseflash)       
                +1   752     EXTRN   CODE(_wrflashXR)        
                +1   753             
                +1   754     EXTRN   BIT(BIT_ISContact)                                                                 
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    14

                                  ;ÉÏÒ»´Î¼°±¾´Î²å¿¨ÀàÐÍ£¬=1ÊÇ½Ó´¥¿¨=0ÊÇ·Ç½Ó´¥¿¨
                +1   755     EXTRN   BIT(BIT_ProMF)                                                                     
                                  ;=1 ±íÊ¾ÊÇpro¿¨£¬=0±íÊ¾£¬MF¿¨
                +1   756     EXTRN   BIT(BIT_ESAMICC)
                +1   757     EXTRN   BIT(BIT_GETRESULT)
                +1   758             
                +1   759     ;--- Êä³ö ---
                +1   760     PUBLIC  _FUN_CARDAPP_SelectFile                                                            
                                  ; Ñ¡Ä¿Â¼»òÎÄ¼þ
                +1   761     PUBLIC  _FUN_CARDAPP_ReadBinary                                                            
                                  ; ¶Á¶þ½øÖÆÎÄ¼þ
                +1   762     PUBLIC  _FUN_CARDAPP_GetBalance                                                            
                                  ; ¶ÁÓà¶î
                +1   763     PUBLIC  _FUN_CARDAPP_ReadRecord                                                            
                                  ; ¶Á¼ÇÂ¼
                +1   764     PUBLIC  _FUN_CARDAPP_CardChannel                                                           
                                  ; ¿¨Æ¬Í¨µÀ
                +1   765     PUBLIC  _FUN_CARDAPP_DECCounter                                                            
                                  ; ¼õ¼ÇÊ
                +1   766     ;PUBLIC _FUN_CARDAPP_WriteBinary                                                           
                                  ; Ð´¶þ½øÖÆÎÄ¼þ
                +1   767     PUBLIC  _FUN_CARDAPP_ReadBinary02
                +1   768     PUBLIC  _FUN_CARDAPP_UpdateBinary
                +1   769     PUBLIC  _FUN_CARDAPP_GDFXOBU
                +1   770     PUBLIC  _FUN_CARDAPP_ACTIVEOBU
                +1   771     PUBLIC  _FUN_CARDAPP_ISInOrACT
                +1   772             
                +1   773     ;--- TEST ---
                +1   774     EXTRN   CODE(_FUN_TestContact_Channel0)
                +1   775     EXTRN   CODE(_FUN_TEST_DISPLAY)
                +1   776     EXTRN   CODE(_FUN_LIB_FLASHTODATA)
                +1   777     EXTRN   CODE(_FUN_LIB_XDATATODATA)
                +1   778     EXTRN   CODE(_FUN_LIB_DATATOXDATA)
                +1   779     
                +1   780     EXTRN   CODE(_FUN_LIB_FLASHTOXDATA)
                +1   781     EXTRN   DATA(DATA_RXBUF)
                +1   782     EXTRN   XDATA(XDATA_TXBUF)
                +1   783     EXTRN   XDATA(XDATA_HOLD)
                +1   784     EXTRN   DATA(DATA_OBUID)        
                +1   785             
                +1   786     PUBLIC  _FUN_TESTCARDAPP_SelectFile
----            +1   787     RSEG    ?co?CARDAPP?FLASHSTR
                +1   788             
0000            +1   789     STR_CARDAPP_Rand:       ;¶ÁÎÄ¼þ
0000 05         +1   790             DB      05H
0001 00840000   +1   791             DB      00H,84H,00H,00H,04H
0005 04                      
                +1   792             
0006            +1   793     STR_CARDAPP_PIN:
0006 05         +1   794             DB      05H
0007 00200000   +1   795             DB      00H,20H,00H,00H,03H
000B 03                      
                +1   796             
000C            +1   797     STR_CARDAPP_88:
000C 05         +1   798             DB      05H
000D 00880200   +1   799             DB      00H,88H,02H,00H,54H
0011 54                      
                +1   800             ;DB     00H,88H,02H,00H,71
                +1   801             ;DB     00H,88H,02H,00H,3FH
                +1   802             
0012            +1   803     STR_CARDAPP_88_02:
0012 05         +1   804             DB      05H
                +1   805             ;DB     00H,88H,02H,00H,54H
                +1   806             ;DB     00H,88H,02H,00H,71
0013 00880200   +1   807             DB      00H,88H,02H,00H,1AH
0017 1A                      
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    15

                +1   808             
0018            +1   809     STR_CARDAPP_88_03:
0018 05         +1   810             DB      05H
0019 00880201   +1   811             DB      00H,88H,02H,01H,0EH
001D 0E                      
                +1   812             
001E            +1   813     STR_CARDAPP_88_04:
001E 05         +1   814             DB      05H
001F 00880200   +1   815             DB      00H,88H,02H,00H,06H
0023 06                      
                +1   816             
0024            +1   817     STR_CARDAPP_88_05:
0024 05         +1   818             DB      05H
0025 00880201   +1   819             DB      00H,88H,02H,01H,54H
0029 54                      
                +1   820             
002A            +1   821     STR_CARDAPP_88_06:
002A 05         +1   822             DB      05H
002B 00880201   +1   823             DB      00H,88H,02H,01H,36H
002F 36                      
                +1   824             
                +1   825             
0030            +1   826     STR_CARDAPP_D681:
0030 05         +1   827             DB      05H
0031 04D68100   +1   828             DB      04H,0d6H,81H,00H,53H
0035 53                      
                +1   829             ;DB     04H,0d6H,81H,00H,3EH
                +1   830             
0036            +1   831     STR_CARDAPP_D68102:
0036 05         +1   832             DB      05H
                +1   833             ;DB     04H,0d6H,81H,00H,53H
0037 04D6813A   +1   834             DB      04H,0d6H,81H,3AH,19H    
003B 19                      
                +1   835             
003C            +1   836     STR_CARDAPP_D68103:
003C 05         +1   837             DB      05
003D 04D68112   +1   838             DB      04H,0d6H,81H,12H,0DH
0041 0D                      
                +1   839             
0042            +1   840     STR_CARDAPP_D68104:
0042 05         +1   841             DB      05
0043 04D6811A   +1   842             DB      04H,0d6H,81H,1AH,005H
0047 05                      
                +1   843             ;DB     04H,0d6H,81H,28H,005H
                +1   844             
                +1   845             
0048            +1   846     STR_CARDAPP_D68105:
0048 05         +1   847             DB      05
0049 04D69D00   +1   848             DB      04H,0d6H,9dH,00H,53H
004D 53                      
                +1   849     
004E            +1   850     STR_CARDAPP_D68106:
004E 05         +1   851             DB      05
004F 04D69D4F   +1   852             DB      04H,0d6H,9dH,4fH,35H    
0053 35                      
                +1   853             
0054            +1   854     STR_CARDAPP_xor04d68100:
0054 04         +1   855             DB      04
0055 04D68100   +1   856             DB      04H,0d6H,81H,00H
                +1   857     
0059            +1   858     STR_CARDAPP_xor04d6811A:
0059 04         +1   859             DB      04
005A 04D6811A   +1   860             DB      04H,0d6H,81H,1AH
                +1   861             ;DB     04H,0d6H,81H,28H
                +1   862              
005E            +1   863     STR_CARDAPP_xor04d6813A:
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    16

005E 04         +1   864             DB      04
005F 04D6813A   +1   865             DB      04H,0d6H,81H,3AH
                +1   866             
0063            +1   867     STR_CARDAPP_xor04d68112:
0063 04         +1   868             DB      04
0064 04D68112   +1   869             DB      04H,0d6H,81H,12H
                +1   870             
                +1   871             
0068            +1   872     STR_CARDAPP_xor04d69D31:
0068 04         +1   873             DB      04
0069 04D69D00   +1   874             DB      04H,0d6H,9DH,00H        
                +1   875             
006D            +1   876     STR_CARDAPP_xor04d69D4f:
006D 04         +1   877             DB      04
006E 04D69D4F   +1   878             DB      04H,0d6H,9DH,4fH                
                +1   879             
0072            +1   880     STR_CARDAPP_xor3e267a:
0072 03         +1   881             DB      03
                +1   882             ;DB     3eH,026H,7aH
0073 973D6E     +1   883             DB      097H,03DH,06EH
                +1   884             
                +1   885             ;00 B2 01 D4 1A
0076            +1   886     STR_CARDAPP_RX001A:
0076 05         +1   887             DB      05
                +1   888             ;DB     000H,0B2H,001H,0D4H,1AH
0077 00B201D4   +1   889             DB      000H,0B2H,001H,0D4H,28H
007B 28                      
                +1   890             
007C            +1   891     STR_CARDAPP_WX001A:
007C 05         +1   892             DB      05
                +1   893             ;DB     000H,0DCH,001H,0D4H,1AH
007D 00DC01D4   +1   894             DB      000H,0DCH,001H,0D4H,28H
0081 28                      
                +1   895             
                     896     
                     897             
----                 898             RSEG    ?pr?CARDAPP?Mater
                     899             USING   0
                     900     ;--------------------------------------------------------------------------
                     901     ;ÃèÊö:Ð´¶þ½øÖÆÎÄ¼þ
                     902     ;00 d6 Offset Offset Len data
                     903     ;Íâ²¿²ÎÊ
                     904     ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
                     905     ;       R7                      ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                     906     ;       R7+5                    ---     ½«ÒªÐ´ÈëµÄÊ¾Ý
                     907     ;       R5                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                     908     ;       R4                      ---     offset01
                     909     ;       R3                      ---     offset02
                     910     ;       R2                      ---     len
                     911     
                     912     ;ÄÚ²¿²ÎÊ:
                     913     ;·µ»ØÖµ
                     914     ;       R7                      ---     ½ÓÊÕ×´Ì¬(ÕÈ·Îª0 £¬ÆäËüÎª²»ÕÈ·)
                     915     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                     916     ;--------------------------------------------------------------------------
0000                 917     _FUN_CARDAPP_UpdateBinary:
                     918             
0000 850700          919             MOV     AR0,AR7
0003 7600            920             MOV     @R0,#00
0005 08              921             INC     R0      
0006 76D6            922             MOV     @R0,#0d6H
0008 08              923             INC     R0
                     924             ;MOV    A,#80H
                     925             ;XRL    A,R4
0009 EC              926             MOV     A,R4
000A F6              927             MOV     @R0,A
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    17

000B 08              928             INC     R0
000C EB              929             MOV     A,R3
000D F6              930             MOV     @R0,A
000E 08              931             INC     R0
000F EA              932             MOV     A,R2
0010 F6              933             MOV     @R0,A   
0011 2405            934             add     A,#5    
0013 FB              935             MOV     R3,A
0014 C005            936             PUSH    AR5
                     937             ;---CALL        _FUN_Contact_Channel
0016 120000   F      938             CALL    _FUN_CARDAPP_CardChannel
0019 D005            939             POP     AR5
                     940             
                     941             ;·µ»Ø×´Ì¬Âë
001B ED              942             MOV     A,R5
001C 2B              943             ADD     A,R3
001D 14              944             DEC     A
001E 14              945             DEC     A
001F F8              946             MOV     R0,A
                     947                     ;MOVX   A,@R0
0020 758301          948             MOV     DPH,#1
0023 8882            949             MOV     DPL,R0
0025 E0              950             MOVX    A,@DPTR
0026 6490            951             XRL     A,#90H
0028 FF              952             MOV     R7,A
                     953             ;MOV    R7,#0
                     954             
0029 22              955             RET
                     956     ;--------------------------------------------------------------------------
                     957     ;ÃèÊö:Ñ¡Ä¿Â¼»òÎÄ¼þ(_FUN_CARDAPP_SelectFile)
                     958     ;00 A4 00 00 02 XX XX
                     959     ;Íâ²¿²ÎÊ
                     960     ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨   ;=0±íÊ¾ESAM
                     961     ;       R7                      ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                     962     ;       R5                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                     963     ;       R3                      ---     ÎÄ¼þID_High
                     964     ;       R2                      ---     ÎÄ¼þID_Low
                     965     ;ÄÚ²¿²ÎÊ:
                     966     ;·µ»ØÖµ
                     967     ;       R7                      ---     ½ÓÊÕ×´Ì¬(ÕÈ·Îª0 £¬ÆäËüÎª²»ÕÈ·)
                     968     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                     969     ;--------------------------------------------------------------------------     
002A                 970     _FUN_CARDAPP_SelectFile:
                     971     
002A 850700          972             MOV     AR0,AR7
002D 7600            973             MOV     @R0,#00
002F 08              974             INC     R0      
0030 76A4            975             MOV     @R0,#0A4H
0032 08              976             INC     R0      
0033 7600            977             MOV     @R0,#00
0035 08              978             INC     R0      
0036 7600            979             MOV     @R0,#00
0038 08              980             INC     R0              
0039 7602            981             MOV     @R0,#02
003B 08              982             INC     R0              
003C EB              983             MOV     A,R3
003D F6              984             MOV     @R0,A
003E 08              985             INC     R0
003F EA              986             MOV     A,R2
0040 F6              987             MOV     @R0,A
0041 7B07            988             MOV     R3,#07H                         ;LEN    
0043 C005            989             PUSH    AR5
                     990             ;---CALL        _FUN_Contact_Channel
0045 120000   F      991             CALL    _FUN_CARDAPP_CardChannel
                     992             ;CALL   _FUN_TestContact_Channel0
0048 D005            993             POP     AR5
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    18

                     994     
                     995             ;MOV    a,r3                                                    ;ÓÐµÄESAMÑ¡1001¿ì±È
                             PPS»ØÓ¦»¹¿ì£¬ËùÒÔÒªÔÙ²¹ÉÏÒ»Ð©ÑÓÊ±
                     996             ;CALL   _FUN_TEST_DISPLAY       
                     997                     
                     998             
                     999             ;·µ»Ø×´Ì¬Âë
004A ED             1000             MOV     A,R5
004B 2B             1001             ADD     A,R3
004C 14             1002             DEC     A
004D 14             1003             DEC     A
004E F8             1004             MOV     R0,A
                    1005                     ;MOVX   A,@R0
004F 758301         1006             MOV     DPH,#1
0052 8882           1007             MOV     DPL,R0
0054 E0             1008             MOVX    A,@DPTR 
                    1009     
                    1010             ;MOV    A,#31
                    1011     
0055 300004   F     1012             JNB     BIT_GETRESULT,CARDAPP_SelectFile_NOResult
0058                1013     CARDAPP_SelectFile_Result:      
0058 6490           1014             XRL     A,#90H
005A 8002           1015             JMP     CARDAPP_SelectFile_ResultOver
005C                1016     CARDAPP_SelectFile_NOResult:
005C 6461           1017             XRL     A,#61H
005E                1018     CARDAPP_SelectFile_ResultOver:
                    1019             
005E FF             1020             MOV     R7,A
                    1021             
005F 22             1022             RET
                    1023                     
                    1024     ;_FUN_TESTContact_OPRET0        
0060                1025     _FUN_TESTCARDAPP_SelectFile:
0060 850700         1026             MOV     AR0,AR7
0063 7600           1027             MOV     @R0,#00
0065 08             1028             INC     R0      
0066 76A4           1029             MOV     @R0,#0A4H
0068 08             1030             INC     R0      
0069 7600           1031             MOV     @R0,#00
006B 08             1032             INC     R0      
006C 7600           1033             MOV     @R0,#00
006E 08             1034             INC     R0              
006F 7602           1035             MOV     @R0,#02
0071 08             1036             INC     R0              
0072 EB             1037             MOV     A,R3
0073 F6             1038             MOV     @R0,A
0074 08             1039             INC     R0
0075 EA             1040             MOV     A,R2
0076 F6             1041             MOV     @R0,A
0077 7B07           1042             MOV     R3,#07H                         ;LEN    
0079 C005           1043             PUSH    AR5
                    1044             ;---CALL        _FUN_Contact_Channel
                    1045             ;---CALL        _FUN_CARDAPP_CardChannel
007B 120000   F     1046             CALL    _FUN_ProCard_Channel
                    1047             ;CALL   _FUN_TestContact_Channel0
007E D005           1048             POP     AR5
                    1049             
                    1050             ;·µ»Ø×´Ì¬Âë
0080 ED             1051             MOV     A,R5
0081 2B             1052             ADD     A,R3
0082 14             1053             DEC     A
0083 14             1054             DEC     A
0084 F8             1055             MOV     R0,A
                    1056                     ;MOVX   A,@R0
0085 758301         1057             MOV     DPH,#1
0088 8882           1058             MOV     DPL,R0
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    19

008A E0             1059             MOVX    A,@DPTR
008B 6490           1060             XRL     A,#90H
008D FF             1061             MOV     R7,A
008E 22             1062             RET
                    1063     ;--------------------------------------------------------------------------
                    1064     ;ÃèÊö:¶Á¶þ½øÖÆÎÄ¼þ
                    1065     ;00 B0 80^FildID Offset Len
                    1066     ;Íâ²¿²ÎÊ
                    1067     ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
                    1068     ;       R7                      ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                    1069     ;       R5                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1070     ;       R4                      ---     ÎÄ¼þID
                    1071     ;       R3                      ---     ³¤¶È
                    1072     ;       R2                      ---     offset
                    1073     
                    1074     ;ÄÚ²¿²ÎÊ:
                    1075     ;·µ»ØÖµ
                    1076     ;       R7                      ---     ½ÓÊÕ×´Ì¬(ÕÈ·Îª0 £¬ÆäËüÎª²»ÕÈ·)
                    1077     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                    1078     ;--------------------------------------------------------------------------     
008F                1079     _FUN_CARDAPP_ReadBinary:
                    1080             
008F 850700         1081             MOV     AR0,AR7
0092 7600           1082             MOV     @R0,#00
0094 08             1083             INC     R0      
0095 76B0           1084             MOV     @R0,#0B0H
0097 08             1085             INC     R0      
0098 7480           1086             MOV     A,#80H
009A 6C             1087             XRL     A,R4
009B F6             1088             MOV     @R0,A
009C 08             1089             INC     R0
009D EA             1090             MOV     A,R2
009E F6             1091             MOV     @R0,A
009F 08             1092             INC     R0
00A0 EB             1093             MOV     A,R3
00A1 F6             1094             MOV     @R0,A
00A2 7B05           1095             MOV     R3,#05H
                    1096             
00A4 C005           1097             PUSH    AR5
                    1098             ;---CALL        _FUN_Contact_Channel
00A6 120000   F     1099             CALL    _FUN_CARDAPP_CardChannel
00A9 D005           1100             POP     AR5
                    1101             
                    1102             ;·µ»Ø×´Ì¬Âë
00AB ED             1103             MOV     A,R5
00AC 2B             1104             ADD     A,R3
00AD 14             1105             DEC     A
00AE 14             1106             DEC     A
00AF F8             1107             MOV     R0,A
                    1108                     ;MOVX   A,@R0
00B0 758301         1109             MOV     DPH,#1
00B3 8882           1110             MOV     DPL,R0
00B5 E0             1111             MOVX    A,@DPTR
00B6 6490           1112             XRL     A,#90H
00B8 FF             1113             MOV     R7,A
                    1114             ;MOV    R7,#0
                    1115             
00B9 22             1116             RET
                    1117             
                    1118     ;--------------------------------------------------------------------------
                    1119     ;ÃèÊö:¶Á¶þ½øÖÆÎÄ¼þ
                    1120     ;00 B0 Offset Offset Len
                    1121     ;Íâ²¿²ÎÊ
                    1122     ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
                    1123     ;       R7                      ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                    1124     ;       R5                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    20

                    1125     ;       R4                      ---     offset01
                    1126     ;       R3                      ---     offset02
                    1127     ;       R2                      ---     len
                    1128     
                    1129     ;ÄÚ²¿²ÎÊ:
                    1130     ;·µ»ØÖµ
                    1131     ;       R7                      ---     ½ÓÊÕ×´Ì¬(ÕÈ·Îª0 £¬ÆäËüÎª²»ÕÈ·)
                    1132     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                    1133     ;--------------------------------------------------------------------------     
00BA                1134     _FUN_CARDAPP_ReadBinary02:
                    1135             
00BA 850700         1136             MOV     AR0,AR7
00BD 7600           1137             MOV     @R0,#00
00BF 08             1138             INC     R0      
00C0 76B0           1139             MOV     @R0,#0B0H
00C2 08             1140             INC     R0      
                    1141             ;MOV    A,#80H
                    1142             ;XRL    A,R4
00C3 EC             1143             MOV     A,R4
00C4 F6             1144             MOV     @R0,A
00C5 08             1145             INC     R0
00C6 EB             1146             MOV     A,R3
00C7 F6             1147             MOV     @R0,A
00C8 08             1148             INC     R0
00C9 EA             1149             MOV     A,R2
00CA F6             1150             MOV     @R0,A
00CB 7B05           1151             MOV     R3,#05H
                    1152             
00CD C005           1153             PUSH    AR5
                    1154             ;---CALL        _FUN_Contact_Channel
00CF 120000   F     1155             CALL    _FUN_CARDAPP_CardChannel
00D2 D005           1156             POP     AR5
                    1157             
                    1158             ;·µ»Ø×´Ì¬Âë
00D4 ED             1159             MOV     A,R5
00D5 2B             1160             ADD     A,R3
00D6 14             1161             DEC     A
00D7 14             1162             DEC     A
00D8 F8             1163             MOV     R0,A
                    1164                     ;MOVX   A,@R0
00D9 758301         1165             MOV     DPH,#1
00DC 8882           1166             MOV     DPL,R0
00DE E0             1167             MOVX    A,@DPTR
00DF 6490           1168             XRL     A,#90H
00E1 FF             1169             MOV     R7,A
                    1170             ;MOV    R7,#0
                    1171             
00E2 22             1172             RET     
                    1173     ;--------------------------------------------------------------------------
                    1174     ;ÃèÊö:¶ÁÓà¶î    
                    1175     ;80 5C 00 02 04
                    1176     ;Íâ²¿²ÎÊ
                    1177     ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
                    1178     ;       R7                      ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                    1179     ;       R5                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1180     ;ÄÚ²¿²ÎÊ:
                    1181     ;·µ»ØÖµ
                    1182     ;       R7                      ---     ½ÓÊÕ×´Ì¬(ÕÈ·Îª0 £¬ÆäËüÎª²»ÕÈ·)
                    1183     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                    1184     ;--------------------------------------------------------------------------             
00E3                1185     _FUN_CARDAPP_GetBalance:
                    1186             
00E3 850700         1187             MOV     AR0,AR7
00E6 7680           1188             MOV     @R0,#80H
00E8 08             1189             INC     R0
00E9 765C           1190             MOV     @R0,#5CH
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    21

00EB 08             1191             INC     R0
00EC 7600           1192             MOV     @R0,#00H
00EE 08             1193             INC     R0
00EF 7602           1194             MOV     @R0,#02H
00F1 08             1195             INC     R0
00F2 7604           1196             MOV     @R0,#04H
                    1197             ;INC    R0
                    1198             
00F4 7B05           1199             MOV     R3,#05H
00F6 C005           1200             PUSH    AR5
                    1201             ;MOV    A,R5
                    1202             ;MOV    A,#35
                    1203     ;       MOV     R2,#30
                    1204             ;---CALL        _FUN_Contact_Channel
00F8 120000   F     1205             CALL    _FUN_CARDAPP_CardChannel
                    1206             
                    1207     ;mov    a,r3
                    1208     ;CALL   _FUN_TEST_DISPLAY       
00FB D005           1209             POP     AR5
                    1210     
                    1211             ;·µ»Ø×´Ì¬Âë
00FD ED             1212             MOV     A,R5
00FE 2B             1213             ADD     A,R3
00FF 14             1214             DEC     A
0100 14             1215             DEC     A
0101 F8             1216             MOV     R0,A
                    1217                     ;MOVX   A,@R0
0102 758301         1218             MOV     DPH,#1
0105 8882           1219             MOV     DPL,R0
0107 E0             1220             MOVX    A,@DPTR
0108 6490           1221             XRL     A,#90H
010A FF             1222             MOV     R7,A
                    1223             
010B 22             1224             RET
                    1225             
                    1226     ;--------------------------------------------------------------------------
                    1227     ;ÃèÊö:¶Á¼ÇÂ¼ÎÄ¼þ
                    1228     ;00 B2 01 CC 2B 
                    1229     ;Íâ²¿²ÎÊ
                    1230     ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
                    1231     ;       R7                      ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                    1232     ;       R5                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1233     ;       R4                      ---     ÎÄ¼þÃû
                    1234     ;       R3                      ---     ³¤¶È
                    1235     ;       R2                      ---     ¼ÇÂ¼ºÅ  
                    1236     ;ÄÚ²¿²ÎÊ:
                    1237     ;·µ»ØÖµ
                    1238     ;       R7                      ---     ½ÓÊÕ×´Ì¬(ÕÈ·Îª0 £¬ÆäËüÎª²»ÕÈ·)
                    1239     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                    1240     ;--------------------------------------------------------------------------     
010C                1241     _FUN_CARDAPP_ReadRecord:
                    1242             
010C 850700         1243             MOV     AR0,AR7
010F 7600           1244             MOV     @R0,#00H
0111 08             1245             INC     R0
0112 76B2           1246             MOV     @R0,#0B2H
0114 08             1247             INC     R0
0115 EA             1248             mov     a,r2
0116 F6             1249             MOV     @R0,a;#02H
0117 08             1250             INC     R0
                    1251             
0118 EC             1252             MOV     A,R4
0119 C4             1253             SWAP    A               ;91
011A 03             1254             RR      A               ;48
011B 4404           1255             ORL     A,#4            ;4c
011D F6             1256             MOV     @R0,A
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    22

                    1257             
011E 08             1258             INC     R0
011F EB             1259             MOV     A,R3
0120 F6             1260             MOV     @R0,A
                    1261             
0121 7B05           1262             MOV     R3,#05H
0123 C005           1263             PUSH    AR5
                    1264             ;---CALL        _FUN_Contact_Channel
0125 120000   F     1265             CALL    _FUN_CARDAPP_CardChannel                
0128 D005           1266             POP     AR5
                    1267             
                    1268             ;·µ»Ø×´Ì¬Âë
012A ED             1269             MOV     A,R5
012B 2B             1270             ADD     A,R3
012C 14             1271             DEC     A
012D 14             1272             DEC     A
012E F8             1273             MOV     R0,A
                    1274                     ;MOVX   A,@R0
012F 758301         1275             MOV     DPH,#1
0132 8882           1276             MOV     DPL,R0
0134 E0             1277             MOVX    A,@DPTR
0135 6490           1278             XRL     A,#90H
0137 FF             1279             MOV     R7,A
                    1280             
0138 22             1281             RET
                    1282     ;--------------------------------------------------------------------------
                    1283     ;ÃèÊö:¼õ¼ÇÊÆ÷
                    1284     ;00 59 00 00 01
                    1285     ;µ±·µ»Ø69 85Ê±£¬±íÊ¾ÒÑ¾­¼õ¼ÇÊÆ÷ÎªÁã
                    1286     ;Íâ²¿²ÎÊ
                    1287     ;       R7                      ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                    1288     ;       R5                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1289     ;ÄÚ²¿²ÎÊ:
                    1290     ;·µ»ØÖµ   
                    1291     ;       R7                      ---     Ö´ÐÐ×´Ì¬Âë; =0 ±íÊ¾Ö´ÐÐ³É¹¦     ;=1 ±íÊ¾Ö´ÐÐÊ§°Ü
                    1292     ;       r3                      ---     ¼õ¼ÇÊ´ÎÊ
                    1293     ;--------------------------------------------------------------------------
0139                1294     _FUN_CARDAPP_DECCounter:
                    1295             
0139 850700         1296             MOV     AR0,AR7
013C 7600           1297             MOV     @R0,#00H
013E 08             1298             INC     R0
013F 7659           1299             MOV     @R0,#59H
0141 08             1300             INC     R0
0142 7600           1301             MOV     @R0,#00H
0144 08             1302             INC     R0
0145 7600           1303             MOV     @R0,#00H
0147 08             1304             INC     R0
0148 7601           1305             MOV     @R0,#01H
                    1306             ;INC    R0
                    1307             
014A 7B05           1308             MOV     R3,#05H
014C C005           1309             PUSH    AR5
                    1310             ;---CALL        _FUN_Contact_Channel
014E 120000   F     1311             CALL    _FUN_CARDAPP_CardChannel        
                    1312             ;CALL   _FUN_TestContact_Channel0       
0151 D005           1313             POP     AR5     
                    1314             ;·µ»Ø×´Ì¬Âë
0153 ED             1315             MOV     A,R5
0154 2B             1316             ADD     A,R3
0155 14             1317             DEC     A
0156 14             1318             DEC     A
0157 F8             1319             MOV     R0,A
                    1320                     ;MOVX   A,@R0
0158 758301         1321             MOV     DPH,#1
015B 8882           1322             MOV     DPL,R0
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    23

015D E0             1323             MOVX    A,@DPTR
015E 6490           1324             XRL     A,#90H
0160 FF             1325             MOV     R7,A
                    1326             
                    1327     ;       JNZ     CARDAPP_DECCounter_ZTCL 
                    1328             
0161 850500         1329             MOV     AR0,AR5
                    1330                     ;MOVX   A,@R0
0164 758301         1331             MOV     DPH,#1
0167 8882           1332             MOV     DPL,R0
0169 E0             1333             MOVX    A,@DPTR                 ;ËùÊ¡¼õ¼ÇÊ´ÎÊ
016A FB             1334             MOV     R3,A
                    1335     ;       JMP     CARDAPP_DECCounter_OVER
                    1336             
                    1337     ;CARDAPP_DECCounter_ZTCL:       
                    1338     ;       MOV     R7,#CONST_STATE_FALSE
                    1339     ;       MOV     AR0,AR5
                    1340     ;               ;MOVX   A,@R0
                    1341     
                    1342     ;       XRL     A,#69H
                    1343     ;       JNZ     CARDAPP_DECCounter_OVER
                    1344     ;       INC     R0
                    1345     ;               ;MOVX   A,@R0
                    1346     
                    1347     ;       XRL     A,#82H
                    1348     ;       JNZ     CARDAPP_DECCounter_OVER
                    1349     ;       MOV     R7,#CONST_STATE_TRUE    
                    1350     ;       MOV     R3,#0                   ;ËùÊ¡¼õ¼ÇÊ´ÎÊÎªÁã
016B                1351     CARDAPP_DECCounter_OVER:        
                    1352             
016B 22             1353             RET
                    1354     
                    1355     ;--------------------------------------------------------------------------
                    1356     ;ÃèÊö:Ð´¶þ½øÖÆÎÄ¼þ
                    1357     ;00 A4 00 00 02 XX XX
                    1358     ;Íâ²¿²ÎÊ
                    1359     ;       R7                      ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                    1360     ;       R5                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1361     ;       R4                      ---     ÎÄ¼þID
                    1362     ;       R3                      ---     ³¤¶È
                    1363     ;       R2                      ---     Offset
                    1364     ;ÄÚ²¿²ÎÊ:
                    1365     ;·µ»ØÖµ 
                    1366     ;       R7                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1367     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                    1368     ;--------------------------------------------------------------------------     
016C                1369     _FUN_CARDAPP_WriteBinary:       ;---    Ð´¶þ½øÖÆÎÄ¼þ
016C 020000   F     1370             JMP     _FUN_Contact_Channel
                    1371     ;--------------------------------------------------------------------------
                    1372     ;ÃèÊö:¶Á³µÁ¾ÐÅÏ¢ÎÄ¼þ(×¨ÓÃÖ¸Áî)
                    1373     ;00 + B4 + Offset_H + Offset_L + Random(8 Byte) + ReadLen(xx Byte) + KeyID(1 Byte)
                    1374     ;Íâ²¿²ÎÊ
                    1375     ;       BIT_ESAMICC             ---     µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
                    1376     ;       R7                      ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                    1377     ;       R5                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1378     ;       R3                      ---     ÎÄ¼þID_High
                    1379     ;       R2                      ---     ÎÄ¼þID_Low
                    1380     
                    1381     ;ÄÚ²¿²ÎÊ:
                    1382     ;·µ»ØÖµ
                    1383     ;       R7                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1384     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                    1385     ;--------------------------------------------------------------------------
016F                1386     _FUN_CARDAPP_ReadVehicleInfo:   
016F 020000   F     1387             JMP     _FUN_Contact_Channel
                    1388             
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    24

                    1389             
                    1390     ;--------------------------------------------------------------------------
                    1391     ;ÃèÊö:¿¨Æ¬Í¨µÀº¯Ê(Ö§³Öcontact cpu/esam/pro/mf/) 
                    1392     ;Íâ²¿²ÎÊ:
                    1393     ;BIT_ISContact                  ---     ÉÏÒ»´Î¼°±¾´Î²å¿¨ÀàÐÍ£¬=1ÊÇ½Ó´¥¿¨=0ÊÇ·Ç½Ó´¥¿¨
                    1394     ;BIT_cpu_ProMF                  ---     =1 ±íÊ¾ÊÇPRO¿¨£¬=0±íÊ¾£¬MF¿¨
                    1395     
                    1396     ;BIT_ESAMICC                    ---     µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM(Ö»ÔÚ½Ó´
                             ¥¿¨Í¨µÀÓÃ)
                    1397     ;BIT_GETRESULT                          =1±íÊ¾È¡0Ê±£¬È¡·µ»Ø½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û(Ö»¶ÔT0¿
                             ¨£¬Ö¸Áî´óÓÚ5¸ö×Ö½ÚµÄÖ¸ÁîÓÐÐ§»òproÓÐÐ§)
                    1398     
                    1399     ;R7                             ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                    1400     ;R5                             ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1401     ;R3                             ---     ½«Òª·¢ËÍÊ¾ÝµÄ³¤¶È
                    1402     ;·µ»ØÖµ
                    1403     ;       R7                      ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1404     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                    1405     ;
                    1406     ;ÓÅÏÈ¼¶ BIT_ESAMICC > BIT_ISContact > BIT_ProMF
                    1407     ;--------------------------------------------------------------------------
0172                1408     _FUN_CARDAPP_CardChannel:
0172 200005   F     1409             JB      BIT_ESAMICC,CARDAPP_CardChannel_ICC
0175                1410     CARDAPP_CardChannel_ESAM:;ESAM ¿¨
                    1411     
0175 120000   F     1412             CALL    _FUN_Contact_Channel    ;ESAM¿¨Í¨µÀ
0178 8013           1413             JMP     CARDAPP_CardChannel_Over
                    1414             
017A                1415     CARDAPP_CardChannel_ICC:;ÓÃ»§¿¨ 
                    1416             
017A 300005   F     1417             JNB     BIT_ISContact,CARDAPP_CardChannel_NContact      
                    1418             
                    1419             ;mov    a,#19
                    1420             ;call   _fun_test_display
                    1421             
017D 120000   F     1422             CALL    _FUN_Contact_Channel    ;CPU½Ó´¥¿¨Í¨µÀ
0180 800B           1423             JMP     CARDAPP_CardChannel_Over
0182                1424     CARDAPP_CardChannel_NContact:;·Ç½Ó¿¨
0182 200005   F     1425             JB      BIT_ProMF,CARDAPP_CardChannel_PRO
0185                1426     CARDAPP_CardChannel_MF: ;MF¿¨
0185 120000   F     1427             CALL    _FUN_MF_Channel         ;MF¿¨Í¨µÀ
0188 8003           1428             JMP     CARDAPP_CardChannel_Over
018A                1429     CARDAPP_CardChannel_PRO:;PRO¿¨
018A 120000   F     1430             CALL    _FUN_ProCard_Channel    ;Pro¿¨Í¨µÀ
                    1431     ;       MOV     a,r3                                                    ;ÓÐµÄESAMÑ¡1001¿ì±È
                             PPS»ØÓ¦»¹¿ì£¬ËùÒÔÒªÔÙ²¹ÉÏÒ»Ð©ÑÓÊ±
                    1432     ;       CALL    _FUN_TEST_DISPLAY       
                    1433                     
018D                1434     CARDAPP_CardChannel_Over:
                    1435             
018D 22             1436             RET
                    1437             
                    1438     ;--------------------------------------------------------------------------     
                    1439     ;ÃèÊö:¿¨Æ¬Í¨µÀº¯Ê(Ö§³Öcontact cpu/esam/pro/mf/) 
                    1440     ;Íâ²¿²ÎÊ:
                    1441     ;BIT_ISContact                  ---     ÉÏÒ»´Î¼°±¾´Î²å¿¨ÀàÐÍ£¬=1ÊÇ½Ó´¥¿¨=0ÊÇ·Ç½Ó´¥¿¨
                    1442     ;BIT_cpu_ProMF                  ---     =1 ±íÊ¾ÊÇPRO¿¨£¬=0±íÊ¾£¬MF¿¨
                    1443     
                    1444     ;BIT_ESAMICC                    ---     µ±Ç°²Ù×÷½Ó´¥¿¨µÄÀàÐÍ=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM(Ö»ÔÚ½Ó´
                             ¥¿¨Í¨µÀÓÃ)
                    1445     ;BIT_GETRESULT                          =1±íÊ¾È¡0Ê±£¬È¡·µ»Ø½á¹û£¬=0±íÊ¾²»È¡·µ»Ø½á¹û(Ö»¶ÔT0¿
                             ¨£¬Ö¸Áî´óÓÚ5¸ö×Ö½ÚµÄÖ¸ÁîÓÐÐ§»òproÓÐÐ§)
                    1446     
                    1447     ;R7                             ---     ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)
                    1448     ;R5                             ---     ½ÓÊÕËÍç·³åÖ¸Õë(Íâ´æ)
                    1449     ;R3                             ---     ½«Òª·¢ËÍÊ¾ÝµÄ³¤¶È
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    25

                    1450     ;·µ»ØÖµ
                    1451     ;       R7                      ---     ·µ»ØÖµ
                    1452     ;       R3                      ---     ½ÓÊÕµ½Ê¾ÝµÄ³¤¶È
                    1453     ;
                    1454     ;ÓÅÏÈ¼¶ BIT_ESAMICC > BIT_ISContact > BIT_ProMF
                    1455     ;--------------------------------------------------------------------------     
018E                1456     _FUN_CARDAPP_InnerCardChannel:
                    1457             
018E C005           1458             PUSH    AR5
0190 120000   F     1459             CALL    _FUN_CARDAPP_CardChannel                
0193 D005           1460             POP     AR5
                    1461             
                    1462             ;·µ»Ø×´Ì¬Âë
0195 ED             1463             MOV     A,R5
0196 2B             1464             ADD     A,R3
0197 14             1465             DEC     A
0198 14             1466             DEC     A
0199 F8             1467             MOV     R0,A
                    1468                     ;MOVX   A,@R0
019A 758301         1469             MOV     DPH,#1
019D 8882           1470             MOV     DPL,R0
019F E0             1471             MOVX    A,@DPTR
01A0 6490           1472             XRL     A,#90H
01A2 FF             1473             MOV     R7,A
                    1474             
01A3 22             1475             RET
                    1476             
                    1477     ;---------------------------------------------------------------------------
                    1478     ;ÃèÊö£º
                    1479     ;       ÊÇ·ñÊÇµ¼Èë¿¨»ò¼¤»î¿¨
                    1480     ;²ÎÊ:
                    1481     ;       ÎÞ
                    1482     ;·µ»ØÖµ
                    1483     ;       R7      =0³É¹¦,=ffÊ§°Ü
                    1484     ;       R5      =0Dµ¼Èë¿¨ ; = 0EH ¼¤»î¿¨
                    1485     ;--------------------------------------------------------------------------     
01A4                1486     _FUN_CARDAPP_ISInOrACT: 
                    1487             ;=== Ñ¡Ôñµ¼Èë¿¨µÄ1001Ä¿Â¼ ===
                    1488             ; BIT_ESAMICC=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
01A4 C200     F     1489             CLR     BIT_GETRESULT
01A6 D200     F     1490             SETB    BIT_ESAMICC
01A8 7F00     F     1491             MOV     R7,#DATA_RXBUF
01AA 7D00     F     1492             MOV     R5,#XDATA_TXBUF
01AC 7B10           1493             MOV     R3,#010H
01AE 7A01           1494             MOV     R2,#001H
01B0 120000   F     1495             CALL    _FUN_CARDAPP_SelectFile
01B3 EF             1496             MOV     A,R7
01B4 6002           1497             JZ      CARDAPP_ISInOrACT_Sel1001OK
01B6 8022           1498             JMP     CARDAPP_ISInOrACT_Err
                    1499             
01B8                1500     CARDAPP_ISInOrACT_Sel1001OK:            
                    1501             ;¶ÁÈ¡µ¼Èë¿¨ 0015 ÎÄ¼þ£¬ÅÐ¶ÏÊÇ·ñÎªµ¼Èë¿¨0E[µÚ9¸ö×Ö½Ú£¬ÏÂ±êÓÉ1¿ªÊ¼]
01B8 D200     F     1502             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
01BA D200     F     1503             SETB    BIT_GETRESULT   
01BC 7F00     F     1504             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
01BE 7D00     F     1505             MOV     R5,#XDATA_HOLD
01C0 7C95           1506             MOV     R4,#95h                                                 ;R4             ---
                                  ÎÄ¼þID
01C2 7B08           1507             MOV     R3,#08                                                  ;R3             ---
                                  ³¤¶È
01C4 7A01           1508             MOV     R2,#01
01C6 120000   F     1509             CALL    _FUN_CARDAPP_ReadBinary02
01C9 EF             1510             MOV     A,R7
01CA 6002           1511             JZ      CARDAPP_ISInOrACT_Read0015OK
01CC 800C           1512             JMP     CARDAPP_ISInOrACT_Err
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    26

                    1513                     
01CE                1514     CARDAPP_ISInOrACT_Read0015OK:   
01CE 7800     F     1515             MOV     R0,#XDATA_HOLD
                    1516                     ;MOVX   A,@R0
01D0 758301         1517             MOV     DPH,#1
01D3 8882           1518             MOV     DPL,R0
01D5 E0             1519             MOVX    A,@DPTR
                    1520             ;XRL    A,#0EH
01D6 FD             1521             MOV     R5,A
01D7                1522     CARDAPP_ISInOrACT_OVER:
01D7 7F00           1523             MOV     R7,#CONST_STATE_TRUE
01D9 22             1524             RET
                    1525             
01DA                1526     CARDAPP_ISInOrACT_Err:
01DA 7FFF           1527             MOV     R7,#CONST_STATE_FALSE
                    1528             
01DC 22             1529             RET
                    1530     ;---------------------------------------------------------------------------
                    1531     ;¹ã¶«µ¼Èë¿¨Á÷³Ì
                    1532     ;       Ñ¡Ôñµ¼Èë¿¨µÄ1001Ä¿Â¼
                    1533     ;       ¶ÁÈ¡µ¼Èë¿¨0015ÎÄ¼þ£¬ÅÐ¶ÏÊÇ·ñÎªµ¼Èë¿¨0D[µÚ9¸ö×Ö½Ú£¬ÏÂ±êÓÉ1¿ªÊ¼]
                    1534     ;       Ñ¡ÔñESAMµÄMFÄ¿Â¼
                    1535     ;       ¶ÁÈ¡OBUºÏÍ¬ÐòºÅ
                    1536     ;       ¶ÁÈ¡µ¼Èë¿¨0019ÎÄ¼þ,ÅÐ¶ÏÆäÖÐµÄºÏÍ¬ÐòÁÐºÅÓëOBUºÏÍ¬ÐòÁÐºÅÊÇ·ñÏàÍ¬
                    1537     ;       Ñ¡ÔñESAMµÄDF01Ä¿Â¼
                    1538     ;       
                    1539     ;·µ»ØÖµ
                    1540     ;       01 ±íÊ¾µ¼Èë¿¨Ê§Ð§
                    1541     ;--------------------------------------------------------------------------     
01DD                1542     _FUN_CARDAPP_GDFXOBU:
                    1543             
                    1544             ;=== Ñ¡Ôñµ¼Èë¿¨µÄ 1001 Ä¿Â¼ ===
                    1545             ; BIT_ESAMICC=1±íÊ¾ÓÃ»§¿¨;=0 ±íÊ¾ESAM
                    1546     ;       SETB    BIT_GETRESULT
                    1547     ;       SETB    BIT_ESAMICC
                    1548     ;       MOV     R7,#DATA_RXBUF
                    1549     ;       MOV     R5,#XDATA_TXBUF
                    1550     ;       MOV     R3,#010H
                    1551     ;       MOV     R2,#001H
                    1552     ;       CALL    _FUN_CARDAPP_SelectFile
                    1553             
                    1554             ;¶ÁÈ¡µ¼Èë¿¨ 0015 ÎÄ¼þ£¬ÅÐ¶ÏÊÇ·ñÎªµ¼Èë¿¨0D[µÚ9¸ö×Ö½Ú£¬ÏÂ±êÓÉ1¿ªÊ¼]
                    1555     ;       SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
                    1556     ;       SETB    BIT_GETRESULT   
                    1557     ;       MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
                    1558     ;       MOV     R5,#XDATA_HOLD
                    1559     ;       MOV     R4,#95h                                                 ;R4             ---
                                  ÎÄ¼þID
                    1560     ;       MOV     R3,#08                                                  ;R3             ---
                                  ³¤¶È
                    1561     ;       MOV     R2,#01;04;03
                    1562     ;       CALL    _FUN_CARDAPP_ReadBinary02
                    1563     ;       MOV     A,R7
                    1564     ;       JZ      CARDAPP_GDFXOBU_Read0015OK
                    1565     ;       JMP     CARDAPP_GDFXOBU_Err
                    1566             
                    1567     ;CARDAPP_GDFXOBU_Read0015OK:
                    1568     ;       MOV     R0,#XDATA_HOLD
                    1569     ;               ;MOVX   A,@R0
                    1570     
                    1571     ;       XRL     A,#0DH
                    1572     ;       JZ      CARDAPP_GDFXOBU_DRCard
                    1573     ;       JMP     CARDAPP_GDFXOBU_Err
                    1574             
01DD                1575     CARDAPP_GDFXOBU_DRCard:
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    27

                    1576             
                    1577             ;Ñ¡Ôñ ESAM µÄ MF Ä¿Â¼,Ö»½øÐÐµ½61
01DD C200     F     1578             CLR     BIT_GETRESULT
01DF C200     F     1579             CLR     BIT_ESAMICC
01E1 7F00     F     1580             MOV     R7,#DATA_RXBUF
01E3 7D00     F     1581             MOV     R5,#XDATA_TXBUF
01E5 7B3F           1582             MOV     R3,#03FH
01E7 7A00           1583             MOV     R2,#000H
01E9 120000   F     1584             CALL    _FUN_CARDAPP_SelectFile
01EC EF             1585             MOV     A,R7
01ED 6005           1586             JZ      CARDAPP_GDFXOBU_ReadSel3f00OK
01EF 7F01           1587             MOV     R7,#CONST_STATE_InputFail
01F1 020000   F     1588             JMP     CARDAPP_GDFXOBU_Err
                    1589             
01F4                1590     CARDAPP_GDFXOBU_ReadSel3f00OK:
                    1591             
                    1592             ;==============================
                    1593             ;¶ÁÈ¡ OBU ºÏÍ¬ÐòºÅ
                    1594             ;XDATA_HOLD[0~7] ESAM ºÏÍ¬ÐòºÅ
                    1595             ;==============================
01F4 C200     F     1596             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
01F6 D200     F     1597             SETB    BIT_GETRESULT   
01F8 7F00     F     1598             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
01FA 7D00     F     1599             MOV     R5,#XDATA_HOLD
01FC 7C81           1600             MOV     R4,#81h                                                 ;R4             ---
                                  ÎÄ¼þID
01FE 7B0A           1601             MOV     R3,#0ah                                                 ;R3             ---
                                  ³¤¶È
0200 7A08           1602             MOV     R2,#08;04;03
0202 120000   F     1603             CALL    _FUN_CARDAPP_ReadBinary02
0205 EF             1604             MOV     A,R7    
0206 6005           1605             JZ      CARDAPP_GDFXOBU_ReadESAMHTHOK
0208 7F01           1606             MOV     R7,#CONST_STATE_InputFail       
020A 020000   F     1607             JMP     CARDAPP_GDFXOBU_Err
                    1608             
020D                1609     CARDAPP_GDFXOBU_ReadESAMHTHOK:
                    1610             ;¶ÁÈ¡µ¼Èë¿¨ 0019 ºÏÍ¬ÐòºÅ
                    1611             ;XDATA_HOLD[0~7] ESAM ºÏÍ¬ÐòºÅ
                    1612             ;XDATA_txbuf[0~12] 0019ÎÄ¼þ
020D D200     F     1613             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
020F D200     F     1614             SETB    BIT_GETRESULT   
0211 7F00     F     1615             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
0213 7D00     F     1616             MOV     R5,#XDATA_TXBUF
0215 7C99           1617             MOV     R4,#99h                                                 ;R4             ---
                                  ÎÄ¼þID
0217 7B00           1618             MOV     R3,#00                                                  ;R3             ---
                                  ³¤¶È
0219 7A0D           1619             MOV     R2,#13;04;03
021B 120000   F     1620             CALL    _FUN_CARDAPP_ReadBinary02
021E EF             1621             MOV     A,R7    
021F 6005           1622             JZ      CARDAPP_GDFXOBU_Read0019OK
0221 7F01           1623             MOV     R7,#CONST_STATE_InputFail
0223 020000   F     1624             JMP     CARDAPP_GDFXOBU_Err
                    1625             
0226                1626     CARDAPP_GDFXOBU_Read0019OK:
                    1627             
                    1628             ;±È½Ï ºÏÍ¬ºÅ ÊÇ·ñÏàÍ¬
0226 7900     F     1629             MOV     r1,#xdata_txbuf+4
0228 7800     F     1630             MOV     r0,#xdata_HOLD
022A 7B08           1631             MOV     R3,#8
022C                1632     CARDAPP_GDFXOBU_COMP:
                    1633                     ;MOVX   A,@R1
022C 758301         1634             MOV     DPH,#1
022F 8982           1635             MOV     DPL,R1
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    28

0231 E0             1636             MOVX    A,@DPTR
0232 F5F0           1637             MOV     B,A
                    1638                     ;MOVX   A,@R0
0234 758301         1639             MOV     DPH,#1
0237 8882           1640             MOV     DPL,R0
0239 E0             1641             MOVX    A,@DPTR
023A 65F0           1642             XRL     A,B
                    1643             
023C 6005           1644             JZ      CARDAPP_GDFXOBU_NoErZZ
023E 7F02           1645             MOV     R7,#CONST_STATE_IllegalInputCard
0240 020000   F     1646             JMP     CARDAPP_GDFXOBU_Err
0243                1647     CARDAPP_GDFXOBU_NoErZZ: 
0243 09             1648             INC     R1
0244 08             1649             INC     R0
0245 DBE5           1650             DJNZ    R3,CARDAPP_GDFXOBU_COMP
                    1651             
0247                1652     CARDAPP_GDFXOBU_COMPOV: 
                    1653             ;XDATA_HOLD[0~7] ESAM ºÏÍ¬ÐòºÅ
                    1654             ;XDATA_txbuf[0~12] 0019ÎÄ¼þ
0247 7900     F     1655             MOV     R1,#xdata_txbuf+12
                    1656                     ;MOVX   A,@R1
0249 758301         1657             MOV     DPH,#1
024C 8982           1658             MOV     DPL,R1
024E E0             1659             MOVX    A,@DPTR
024F 64FF           1660             XRL     A,#0FFH
0251 7005           1661             JNZ     CARDAPP_GDFXOBU_Valid   
0253 7F03           1662             MOV     R7,#CONST_STATE_InputCardInvalid
0255 020000   F     1663             JMP     CARDAPP_GDFXOBU_Err
                    1664             
0258                1665     CARDAPP_GDFXOBU_Valid:
                    1666             
                    1667             ;Ñ¡Ôñ ESAM µÄ DF01 Ä¿Â¼
0258 C200     F     1668             CLR     BIT_GETRESULT
025A C200     F     1669             CLR     BIT_ESAMICC
025C 7F00     F     1670             MOV     R7,#DATA_RXBUF
025E 7D00     F     1671             MOV     R5,#XDATA_TXBUF
0260 7BDF           1672             MOV     R3,#0DFH
0262 7A01           1673             MOV     R2,#001H
0264 120000   F     1674             CALL    _FUN_CARDAPP_SelectFile
0267 EF             1675             MOV     A,R7
0268 6005           1676             JZ      CARDAPP_GDFXOBU_SelESAMDF01OK
026A 7F01           1677             MOV     R7,#CONST_STATE_InputFail       
026C 020000   F     1678             JMP     CARDAPP_GDFXOBU_Err
                    1679             
026F                1680     CARDAPP_GDFXOBU_SelESAMDF01OK:          
                    1681             ;»ñÈ¡ ESAM Ëæ»úÊ
                    1682             ;XDATA_HOLD[0~3] ESAM df01 rand
                    1683             ;XDATA_Txbuf[0~12] 0019 ÎÄ¼þ
026F 900000   F     1684             MOV     DPTR,#STR_CARDAPP_Rand
0272 7F00     F     1685             MOV     R7,#DATA_RXBUF
0274 120000   F     1686             CALL    _FUN_LIB_FLASHTODATA
                    1687             
0277 D200     F     1688             SETB    BIT_GETRESULT
0279 C200     F     1689             CLR     BIT_ESAMICC
027B 7F00     F     1690             MOV     R7,#DATA_RXBUF
027D 7D00     F     1691             MOV     R5,#XDATA_HOLD
                    1692             ;R3
027F 120000   F     1693             CALL    _FUN_CARDAPP_InnerCardChannel
0282 EF             1694             MOV     A,R7
0283 6005           1695             JZ      CARDAPP_GDFXOBU_GetESAMRandOK
0285 7F01           1696             MOV     R7,#CONST_STATE_InputFail
0287 020000   F     1697             JMP     CARDAPP_GDFXOBU_Err
                    1698             
028A                1699     CARDAPP_GDFXOBU_GetESAMRandOK:
                    1700             ;½«4×Ö½ÚËæ»úÊÓë¡°04D68100¡±£¨16½øÖÆÊ£¬4×Ö½Ú£©½øÐÐÒìÓò
                    1701             ;XDATA_HOLD[0~3]        DF01 RAND
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    29

                    1702             ;XDATA_txbuf[0~12]      0019ÎÄ¼þ
028A 7F00     F     1703             MOV     R7,#XDATA_HOLD
028C 7D00     F     1704             MOV     R5,#XDATA_HOLD+4
028E 7B04           1705             MOV     R3,#4
0290 900000   F     1706             MOV     DPtr,#STR_CARDAPP_xor04d68100
0293 120000   F     1707             CALL    _FUN_CARDAPP_xxDATAFlashXOR
                    1708             
                    1709             ;»ñµÃ0019ÎÄ¼þÖÐµÄ³µÁ¾ÐÅÏ¢
                    1710             ;XDATA_HOLD[0~3] ESAM DF01 Ëæ»úÊ
                    1711             ;XDATA_txbuf[0~78] 0019 ³µÁ¾ÐÅÏ¢
0296 D200     F     1712             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0298 D200     F     1713             SETB    BIT_GETRESULT                                           ;
029A 7F00     F     1714             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
029C 7D00     F     1715             MOV     R5,#XDATA_TXBUF
029E 7C99           1716             MOV     R4,#99h                                                 ;R4             ---
                                  ÎÄ¼þID
02A0 7B0D           1717             MOV     R3,#00DH                                                ;R3             ---
                                  ³¤¶È
02A2 7A4F           1718             MOV     R2,#04FH
02A4 120000   F     1719             CALL    _FUN_CARDAPP_ReadBinary02
02A7 EF             1720             MOV     A,R7
02A8 6005           1721             JZ      CARDAPP_GDFXOBU_Read0019VehicleOK
02AA 7F01           1722             MOV     R7,#CONST_STATE_InputFail
02AC 020000   F     1723             JMP     CARDAPP_GDFXOBU_Err
                    1724             
02AF                1725     CARDAPP_GDFXOBU_Read0019VehicleOK:
                    1726             
                    1727             ;»ñµÃ 0015 ÎÄ¼þÖÐµÄ³µÁ¾ÐÅÏ¢
                    1728             ;XDATA_HOLD[0~3]        ESAM DF01 Ëæ»úÊ
                    1729             ;XDATA_HOLD[4~6]        PIN
                    1730             ;XDATA_txbuf[0~78]      0019 ³µÁ¾ÐÅÏ¢
02AF D200     F     1731             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
02B1 D200     F     1732             SETB    BIT_GETRESULT   
02B3 7F00     F     1733             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
02B5 7D00     F     1734             MOV     R5,#XDATA_HOLD+4
02B7 7C95           1735             MOV     R4,#95h                                                 ;R4             ---
                                  ÎÄ¼þID
02B9 7B0E           1736             MOV     R3,#00EH                                                ;R3             ---
                                  ³¤¶È
02BB 7A06           1737             MOV     R2,#06H
02BD 120000   F     1738             CALL    _FUN_CARDAPP_ReadBinary02
02C0 EF             1739             MOV     A,R7    
02C1 6005           1740             JZ      CARDAPP_GDFXOBU_Read0015CardNoOK
02C3 7F01           1741             MOV     R7,#CONST_STATE_InputFail
02C5 020000   F     1742             JMP     CARDAPP_GDFXOBU_Err
02C8                1743     CARDAPP_GDFXOBU_Read0015CardNoOK:
                    1744     
                    1745             ;MOV                    R7,#CONST_STATE_TRUE
                    1746             ;XOR                    pre 3 / next 3
                    1747             ;XDATA_HOLD[0~3]        ESAM DF01 Ëæ»úÊ
                    1748             ;XDATA_HOLD[4~9]        Card NO
                    1749             ;XDATA_txbuf[0~78]      0019 ³µÁ¾ÐÅÏ¢
                    1750             ;MOV                    R0,#XDATA_HOLD+4
                    1751             ;MOV                    R1,#XDATA_HOLD+4+3
                    1752             
                    1753             ;µ¹Ò»ÏÂ
02C8 7800     F     1754             MOV     R0,#XDATA_HOLD + 4 + 3
                    1755                     ;MOVX   A,@R0
02CA 758301         1756             MOV     DPH,#1
02CD 8882           1757             MOV     DPL,R0
02CF E0             1758             MOVX    A,@DPTR
02D0 F5F0           1759             MOV     B,A
                    1760             
02D2 7800     F     1761             MOV     R0,#XDATA_HOLD + 4 + 5
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    30

                    1762                     ;MOVX   A,@R0
02D4 758301         1763             MOV     DPH,#1
02D7 8882           1764             MOV     DPL,R0
02D9 E0             1765             MOVX    A,@DPTR
                    1766             
02DA 7800     F     1767             MOV     R0,#XDATA_HOLD + 4 + 3
                    1768                     ;MOVX   @R0,A
02DC 758301         1769             MOV     DPH,#1 
02DF 8882           1770             MOV     DPL,R0 
02E1 F0             1771             MOVX    @DPTR,A
                    1772             
02E2 7800     F     1773             MOV     R0,#XDATA_HOLD + 4 + 5
02E4 E5F0           1774             MOV     A,B
                    1775                     ;MOVX   @R0,A
02E6 758301         1776             MOV     DPH,#1 
02E9 8882           1777             MOV     DPL,R0 
02EB F0             1778             MOVX    @DPTR,A
                    1779             
02EC 7F00     F     1780             MOV     R7,#XDATA_HOLD + 4
02EE 7D00     F     1781             MOV     R5,#XDATA_HOLD + 4 + 3
02F0 7B03           1782             MOV     R3,#3
02F2 120000   F     1783             CALL    _FUN_CARDAPP_xxDATAXOR
                    1784                     
                    1785             
                    1786             ;XDATA_HOLD[0~3]        ESAM DF01 Ëæ»úÊ
                    1787             ;XDATA_HOLD[4~6]        PIN
                    1788             ;XDATA_txbuf[0~78]      0019 ³µÁ¾ÐÅÏ¢   
02F5 7F00     F     1789             MOV     R7,#XDATA_HOLD+4
02F7 7D00     F     1790             MOV     R5,#XDATA_HOLD+4+3
02F9 7B03           1791             MOV     R3,#3
02FB 900000   F     1792             MOV     DPTR,#STR_CARDAPP_xor3e267a
02FE 120000   F     1793             CALL    _FUN_CARDAPP_xxDATAFLASHXOR
                    1794             
                    1795             ;PIN ÈÏÖ¤ '0020000003' + strPIN
                    1796             ;XDATA_HOLD[0~3]        ESAM DF01 Ëæ»úÊ
                    1797             ;XDATA_HOLD[4~6]        PIN
                    1798             ;XDATA_txbuf[0~78]      0019 ³µÁ¾ÐÅÏ¢
0301 900000   F     1799             MOV     DPTR,#STR_CARDAPP_PIN
0304 7F00     F     1800             MOV     R7,#DATA_RXBUF
0306 120000   F     1801             CALL    _FUN_LIB_FLASHTODATA
                    1802             
0309 7D00     F     1803             MOV     R5,#DATA_RXBUF + 5
030B 7F00     F     1804             MOV     R7,#XDATA_HOLD+4
030D 7B03           1805             MOV     R3,#3
030F 120000   F     1806             CALL    _FUN_LIB_XDATATODATA
                    1807             
0312 D200     F     1808             SETB    BIT_GETRESULT
0314 D200     F     1809             SETB    BIT_ESAMICC
0316 7F00     F     1810             MOV     R7,#DATA_RXBUF
0318 7D00     F     1811             MOV     R5,#XDATA_HOLD+7
                    1812             
031A 7B08           1813             MOV     R3,#5+3
031C 120000   F     1814             CALL    _FUN_CARDAPP_InnerCardChannel
031F EF             1815             MOV     A,R7
0320 6005           1816             JZ      CARDAPP_GDFXOBU_PINOK
0322 7F01           1817             MOV     R7,#CONST_STATE_InputFail
0324 020000   F     1818             JMP     CARDAPP_GDFXOBU_Err
                    1819             
0327                1820     CARDAPP_GDFXOBU_PINOK:
                    1821     
                    1822             ;MOV    R7,#CONST_STATE_TRUE
                    1823             ;RET
                    1824             
                    1825             ;ÄÚ²¿ ÈÏÖ¤ ¼ÆËãMAC01
                    1826             ;XDATA_HOLD[0~3]        RAND
                    1827             ;XDATA_HOLD[4~6]        PIN
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    31

                    1828             ;XDATA_HOLD[7~10]       MAC
                    1829             ;xdata_txbuf[0~78]      ³µÁ¾ÐÅÏ¢
                    1830             ;0088020054 + ran + 53 + ³µÁ¾ÐÅÏ¢
                    1831             ;008802003f + ran + 3E + ³µÁ¾ÐÅÏ¢[3Fh - 5h = 3A ]
0327 900000   F     1832             MOV     DPTR,#STR_CARDAPP_88
032A 7F00     F     1833             MOV     R7,#DATA_RXBUF
032C 120000   F     1834             CALL    _FUN_LIB_FLASHTODATA
                    1835             
032F 7D00     F     1836             MOV     R5,#DATA_RXBUF + 5
0331 7F00     F     1837             MOV     R7,#XDATA_HOLD
0333 7B04           1838             MOV     R3,#4
0335 120000   F     1839             CALL    _FUN_LIB_XDATATODATA
                    1840             
0338 7800     F     1841             MOV     R0,#DATA_RXBUF+5+4
                    1842             ;MOV    A,#3EH
033A 7453           1843             MOV     A,#53H
033C F6             1844             MOV     @R0,A
                    1845             
033D 7D00     F     1846             MOV     R5,#DATA_RXBUF+5+4+1
033F 7F00     F     1847             MOV     R7,#XDATA_TXBUF
                    1848             ;MOV    R3,#3AH
0341 7B4F           1849             MOV     R3,#4fH
0343 120000   F     1850             CALL    _FUN_LIB_XDATATODATA
                    1851             
0346 D200     F     1852             SETB    BIT_GETRESULT
0348 D200     F     1853             SETB    BIT_ESAMICC
034A 7F00     F     1854             MOV     R7,#DATA_RXBUF
034C 7D00     F     1855             MOV     R5,#XDATA_HOLD+7
                    1856             ;MOV    R3,#5H+4H+1H+3AH;63
034E 7B59           1857             MOV     R3,#5H+4H+1H+4fH;63
0350 120000   F     1858             CALL    _FUN_CARDAPP_InnerCardChannel
0353 EF             1859             MOV     A,R7
0354 6005           1860             JZ      CARDAPP_GDFXOBU_88OK
0356 7F01           1861             MOV     R7,#CONST_STATE_InputFail
0358 020000   F     1862             JMP     CARDAPP_GDFXOBU_Err
                    1863             
035B                1864     CARDAPP_GDFXOBU_88OK:
                    1865             ;MOV    R7,#CONST_STATE_TRUE
                    1866             ;RET
                    1867             
                    1868             ;¸üÐÂ EF01 ÎÄ¼þ
                    1869             ;XDATA_HOLD[0~3]        RAND
                    1870             ;XDATA_HOLD[4~6]        PIN
                    1871             ;XDATA_HOLD[7~A]        MAC
                    1872             ;xdata_txbuf[0~78]      ³µÁ¾ÐÅÏ¢
                    1873             ;04H,0d6H,81H,00H,53H + ³µÁ¾ÐÅÏ¢ + MAC
                    1874             ;04H,0d6H,81H,00H,3eH + ³µÁ¾ÐÅÏ¢ + MAC
035B 900000   F     1875             MOV     DPTR,#STR_CARDAPP_D681
035E 7F00     F     1876             MOV     R7,#DATA_RXBUF
0360 120000   F     1877             CALL    _FUN_LIB_FLASHTODATA
                    1878             
0363 7D00     F     1879             MOV     R5,#DATA_RXBUF + 5
0365 7F00     F     1880             MOV     R7,#XDATA_TXBUF
0367 7B4F           1881             MOV     R3,#4fh;58 3a
0369 120000   F     1882             CALL    _FUN_LIB_XDATATODATA
                    1883             
036C 750500   F     1884             MOV     AR5,#DATA_RXBUF + 5 + 4fh;58
036F 7F00     F     1885             MOV     R7,#XDATA_HOLD + 7
0371 7B04           1886             MOV     R3,#04
0373 120000   F     1887             CALL    _FUN_LIB_XDATATODATA
                    1888             
                    1889             
0376 D200     F     1890             SETB    BIT_GETRESULT
0378 C200     F     1891             CLR     BIT_ESAMICC
037A 7F00     F     1892             MOV     R7,#DATA_RXBUF
037C 7D00     F     1893             MOV     R5,#XDATA_HOLD+7+4
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    32

                    1894             ;MOV    R3,#5+58+4
037E 7B58           1895             MOV     R3,#5+4fh+4
0380 120000   F     1896             CALL    _FUN_CARDAPP_InnerCardChannel
                    1897             
                    1898     ;       MOV     R7,#DATA_RXBUF
                    1899     ;       MOV     R5,#CONST_SOFTBYTESP
                    1900     ;       CLR     BIT_BUFADDR                                     ;=0£¬·¢ËÍµÄÊÇÄÚ´æÊ¾Ý£»=1£¬·
                             ¢ËÍµÄÊÇÍâ´æÊ¾Ý
                    1901     ;       SETB    BIT_VERIFY                                      ;´®¿ÚÊÕ·¢ÊÇ·ñÒª¼ÓÑéÎ»,=0²»Ò
                             ª£¬=1Òª                                                      
                    1902     ;       CALL    _FUN_SERIAL_TXSOFT
                    1903                     
0383 EF             1904             MOV     A,R7
0384 6005           1905             JZ      CARDAPP_GDFXOBU_D681OK
0386 7F01           1906             MOV     R7,#CONST_STATE_InputFail
0388 020000   F     1907             JMP     CARDAPP_GDFXOBU_Err
038B                1908     CARDAPP_GDFXOBU_D681OK:
                    1909             
                    1910     
                    1911     ;----------------------------------------------------------------------------   
                    1912             ;MOV    R7,#0
                    1913             ;RET
                    1914             
                    1915             ;Ð´ÏµÍ³ÐÅÏ¢
                    1916             ;Ñ¡ÔñESAMµÄ 3F00 Ä¿Â¼
038B D200     F     1917             SETB    BIT_GETRESULT
038D C200     F     1918             CLR     BIT_ESAMICC
038F 7F00     F     1919             MOV     R7,#DATA_RXBUF
0391 7D00     F     1920             MOV     R5,#XDATA_TXBUF
0393 7B3F           1921             MOV     R3,#03FH
0395 7A00           1922             MOV     R2,#000H
0397 120000   F     1923             CALL    _FUN_CARDAPP_SelectFile
                    1924             
039A 6005           1925             JZ      CARDAPP_GDFXOBU_Sel3F00OK
039C 7F01           1926             MOV     R7,#CONST_STATE_InputFail
039E 020000   F     1927             JMP     CARDAPP_GDFXOBU_Err
                    1928             
03A1                1929     CARDAPP_GDFXOBU_Sel3F00OK:      
                    1930     ;----------------------------------------------------------------------------   
                    1931     ;½«µ¼Èë¿¨ÖÐ1001,001C£¬³µÁ¾ÐÅÏ¢Ð´ÈëESAM 3F00  EF1D[50~128]
                    1932     ;EF1D[1~49] [50~128]
                    1933     ;(1)¡¢  ¶ÔESAMÖ´ÐÐÖ¸Áî¡±00A40000023F00¡±,
                    1934     ; ¶Á [µ¼Èë¿¨].1001.001c.4fh¸ö×Ö½Ú
                    1935     ;00 b0 9c 00h 4fh 
                    1936     ; ÔÙÖ´ÐÐ¡± 0084000004¡±£¬²úÉú4×Ö½ÚËæ»úÊ£»
                    1937     ;04 D6 9d offset
                    1938     
                    1939     ;(2)¡¢  ½«4×Ö½ÚËæ»úÊÓë¡°04 D6 9D 00¡±£¨16½øÖÆÊ£¬4×Ö½Ú£©½øÐÐÒìÓò£¬µÃµ½µÄ½á¹û¼Ù¶¨ÎªÒì»òÖµ¡£
                    1940     
                    1941     ;00 88 02 01 + datalen + 4 + 1 + Òì»òÖµ + ¡°datalen+4¡± + Ê¾Ý
                    1942     ;(3)¡¢  ¶Ôµ¼Èë¿¨Ö´ÐÐÖ¸Áî00 88 02 01 54 + Òì»òÖµ  + 53 + data,µÃµ½½á¹ûÎª4×Ö½ÚµÄÄÚÈÝ£¬¼Ù¶¨ÎªM
                             AC¡£
                    1943     
                    1944     ;¡°04 D6 fileid offset +datalen+4¡±+ Ê¾Ý+¡¡MAC
                    1945     ;(4)¡¢  ¶ÔESAMÖ´ÐÐÖ¸Áî04H,0d6H,9dH,31H,53H+ Ê¾Ý+¡¡MAC£¬¼´Íê³É¶ÔMFÏÂµÄEF1dÎÄ¼þµÄ¸üÐÂ¡£
                    1946     
                    1947     ;5) ¶Á [µ¼Èë¿¨].1001.001c.49¸ö×Ö½Ú
                    1948     ;00 b0 9c 4fh 31h 
                    1949     ;6) Ïòesam È¡ rand
                    1950     ;00 84 00 00 08
                    1951     ;7).rand xor 04 d6 9d offset 
                    1952     ; rand xor 04 d6 9d 4f => xorValue
                    1953     ;8)¼ÆËãmac .00 88 02 01 + datalen + 4 + 1 + Òì»òÖµ + ¡°datalen+4¡± + Ê¾Ý
                    1954     ;00 88 02 01 31h+4+1 + xorValue +  31h+4 + data
                    1955     ;9.Ïòesam.3f00.ef1d,Ð´Èë128-79¸ö×Ö½Ú£¬ÆðÆôÎ»ÖÃ79 ¡°04 D6 fileid offset +datalen+4¡±+ Ê¾Ý+¡¡
                             MAC
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    33

                    1956     ;¡°04 D6 9d 4fh +31h+4¡±+ Ê¾Ý+¡¡MAC
                    1957     ;----------------------------------------------------------------------------
                    1958     
03A1 D200     F     1959             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
03A3 D200     F     1960             SETB    BIT_GETRESULT                                           ;
03A5 7F00     F     1961             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
03A7 7D00     F     1962             MOV     R5,#XDATA_TXBUF
03A9 7C9C           1963             MOV     R4,#9Ch                                                 ;R4             ---
                                  ÎÄ¼þID
03AB 7B00           1964             MOV     R3,#000H                                                ;R3             ---
                                  ³¤¶È
03AD 7A4F           1965             MOV     R2,#04FH
03AF 120000   F     1966             CALL    _FUN_CARDAPP_ReadBinary02
03B2 EF             1967             MOV     A,R7
03B3 6005           1968             JZ      CARDAPP_GDFXOBU_Read0019Vehicle02OK
03B5 7F01           1969             MOV     R7,#CONST_STATE_InputFail
03B7 020000   F     1970             JMP     CARDAPP_GDFXOBU_Err
                    1971             
03BA                1972     CARDAPP_GDFXOBU_Read0019Vehicle02OK:    
                    1973     
                    1974             ;mov    r0,#xdata_txbuf+27
                    1975             ;       ;MOVX   A,@R0
                    1976             ;MOV    DPH,#1
                    1977             ;MOV    DPL,R0
                    1978             ;MOVX   A,@DPTR
                    1979             ;MOV    A,#37
                    1980             ;call   _fun_test_display
                    1981     
                    1982             ;»ñÈ¡ESAMËæ»úÊ
                    1983             ;XDATA_HOLD[0~3]
                    1984             ;xdata_txbuf[0~78]      ³µÁ¾ÐÅÏ¢
03BA 900000   F     1985             MOV     DPTR,#STR_CARDAPP_Rand
03BD 7F00     F     1986             MOV     R7,#DATA_RXBUF
03BF 120000   F     1987             CALL    _FUN_LIB_FLASHTODATA    
                    1988             
03C2 D200     F     1989             SETB    BIT_GETRESULT
03C4 C200     F     1990             CLR     BIT_ESAMICC
03C6 7F00     F     1991             MOV     R7,#DATA_RXBUF
03C8 7D00     F     1992             MOV     R5,#XDATA_HOLD  
03CA 120000   F     1993             CALL    _FUN_CARDAPP_InnerCardChannel
                    1994             
03CD EF             1995             MOV     A,R7
03CE 6005           1996             JZ      CARDAPP_GDFXOBU_GetESAMRand04OK
03D0 7F01           1997             MOV     R7,#CONST_STATE_InputFail
03D2 020000   F     1998             JMP     CARDAPP_GDFXOBU_Err     
03D5                1999     CARDAPP_GDFXOBU_GetESAMRand04OK:
                    2000             
                    2001             ;½« 4 ×Ö½ÚËæ»úÊÓë  04 D6 9D 31£¨16½øÖÆÊ£¬4×Ö½Ú£©½øÐÐÒìÓò
                    2002             ;XDATA_HOLD[0~3]        RAND
03D5 7F00     F     2003             MOV     R7,#XDATA_HOLD
03D7 7D00     F     2004             MOV     R5,#XDATA_HOLD+4
03D9 7B04           2005             MOV     R3,#4
03DB 900000   F     2006             MOV     DPtr,#STR_CARDAPP_xor04d69D31
03DE 120000   F     2007             CALL    _FUN_CARDAPP_xxDATAFlashXOR
                    2008             
                    2009             ;XDATA_HOLD[0~3]        RAND    
                    2010             ;XDATA_HOLD[4~7]        MAC
                    2011             ;xdata_txbuf[0~78]      ³µÁ¾ÐÅÏ¢
                    2012             ;00 88 02 01 + datalen + 4 + 1 + Òì»òÖµ + ¡°datalen+4¡± + Ê¾Ý
                    2013             ;00 88 02 01 54 + rand + 53 + data
                    2014             ;0E = Ëæ»úÊºóÃæµÄ³¤¶È¼´ÈÕÆÚ³¤¶È¼Ó1 
                    2015             ;¼ÆËã MAC
03E1 900000   F     2016             MOV     DPTR,#STR_CARDAPP_88_05
03E4 7F00     F     2017             MOV     R7,#DATA_RXBUF
03E6 120000   F     2018             CALL    _FUN_LIB_FLASHTODATA
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    34

                    2019             
                    2020             ;MOV    R0,#DATA_RXBUF + 5
                    2021             ;MOV    R1,#XDATA_HOLD
                    2022             
03E9 7F00     F     2023             MOV     R7,#XDATA_HOLD
03EB 7D00     F     2024             MOV     R5,#DATA_RXBUF + 5
03ED 7B04           2025             MOV     R3,#4
03EF 120000   F     2026             CALL    _FUN_LIB_XDATATODATA
                    2027             
03F2 7800     F     2028             MOV     R0,#DATA_RXBUF+5+4
03F4 7453           2029             MOV     A,#53H  
03F6 F6             2030             MOV     @R0,A
                    2031             
03F7 750500   F     2032             MOV     AR5,#DATA_RXBUF+5+4+1
03FA 7F00     F     2033             MOV     R7,#XDATA_TXBUF
03FC 7B4F           2034             MOV     R3,#4fh
03FE 120000   F     2035             CALL    _FUN_LIB_XDATATODATA
                    2036             
0401 D200     F     2037             SETB    BIT_GETRESULT
0403 D200     F     2038             SETB    BIT_ESAMICC
0405 7F00     F     2039             MOV     R7,#DATA_RXBUF
0407 7D00     F     2040             MOV     R5,#XDATA_HOLD+4
0409 7B59           2041             MOV     R3,#5+4+1+4fh
040B 120000   F     2042             CALL    _FUN_CARDAPP_InnerCardChannel
                    2043             
040E EF             2044             MOV     A,R7
040F 6005           2045             JZ      CARDAPP_GDFXOBU_8804OK
0411 7F01           2046             MOV     R7,#CONST_STATE_InputFail
0413 020000   F     2047             JMP     CARDAPP_GDFXOBU_Err
                    2048             
0416                2049     CARDAPP_GDFXOBU_8804OK: 
                    2050     
                    2051             ;EF01 ÎÄ¼þµÄ¸üÐÂ
                    2052             ;XDATA_HOLD[0~3]        RAND
                    2053             ;XDATA_HOLD[4~7]        MAC
                    2054             ;XDATA_TXBUF[0~8]       0019 ÎÄ¼þÖÐµÄÈÕÆÚ
                    2055             ;¡°04 D6 fileid offset +datalen+4¡±+ Ê¾Ý+¡¡MAC
                    2056             ;04H,0d6H,9dH,31H,53H+ Ê¾Ý+¡¡MAC
0416 900000   F     2057             MOV     DPTR,#STR_CARDAPP_D68105
0419 7F00     F     2058             MOV     R7,#DATA_RXBUF
041B 120000   F     2059             CALL    _FUN_LIB_FLASHTODATA
                    2060             
041E 7D00     F     2061             MOV     R5,#DATA_RXBUF + 5
0420 7F00     F     2062             MOV     R7,#XDATA_TXBUF
0422 7B4F           2063             MOV     R3,#4fh
0424 120000   F     2064             CALL    _FUN_LIB_XDATATODATA
                    2065             
0427 750500   F     2066             MOV     AR5,#DATA_RXBUF + 5 + 4fh
042A 7F00     F     2067             MOV     R7,#XDATA_HOLD + 4
042C 7B04           2068             MOV     R3,#04
042E 120000   F     2069             CALL    _FUN_LIB_XDATATODATA
                    2070                     
0431 D200     F     2071             SETB    BIT_GETRESULT
0433 C200     F     2072             CLR     BIT_ESAMICC
0435 7F00     F     2073             MOV     R7,#DATA_RXBUF
0437 7D00     F     2074             MOV     R5,#XDATA_HOLD+7+4
0439 7B58           2075             MOV     R3,#5H+4fh+4H
043B 120000   F     2076             CALL    _FUN_CARDAPP_InnerCardChannel   
043E EF             2077             MOV     A,R7
                    2078             ;---JZ  CARDAPP_GDFXOBU_UpdataEF01OK
043F 6005           2079             JZ      CARDAPP_GDFXOBU_Updatesysinfo
0441 7F01           2080             MOV     R7,#CONST_STATE_InputFail
0443 020000   F     2081             JMP     CARDAPP_GDFXOBU_Err
                    2082     
0446                2083     CARDAPP_GDFXOBU_Updatesysinfo:
                    2084     
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    35

                    2085     ;5) ¶Á [µ¼Èë¿¨].1001.001c.49¸ö×Ö½Ú
                    2086     ;00 b0 00 4fh 31h 
                    2087     ;6) ÏòesamÈ¡rand
                    2088     ;00 84 00 00 08
                    2089     ;7).rand xor 04 d6 9d offset 
                    2090     ; rand xor 04 d6 9d 4f => xorValue
                    2091     ;8)¼ÆËãmac .00 88 02 01 + datalen + 4 + 1 + Òì»òÖµ + ¡°datalen+4¡± + Ê¾Ý
                    2092     ;00 88 02 01 31h+4+1 + xorValue +  31h+4 + data
                    2093     ;9.Ïòesam.3f00.ef1d,Ð´Èë128-79¸ö×Ö½Ú£¬ÆðÆôÎ»ÖÃ79 ¡°04 D6 fileid offset +datalen+4¡±+ Ê¾Ý+¡¡
                             MAC
                    2094     ;¡°04 D6 9d 4fh +31h+4¡±+ Ê¾Ý+¡¡MAC
0446 D200     F     2095             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0448 D200     F     2096             SETB    BIT_GETRESULT                                           ;
044A 7F00     F     2097             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
044C 7D00     F     2098             MOV     R5,#XDATA_TXBUF
044E 7C9C           2099             MOV     R4,#9Ch                                                 ;R4             ---
                                  ÎÄ¼þID
0450 7B4F           2100             MOV     R3,#04fH                                                ;R3             ---
                                  ³¤¶È
0452 7A31           2101             MOV     R2,#031H
0454 120000   F     2102             CALL    _FUN_CARDAPP_ReadBinary02
0457 EF             2103             MOV     A,R7
0458 6005           2104             JZ      CARDAPP_GDFXOBU_Read0019Vehicle03OK
045A 7F01           2105             MOV     R7,#CONST_STATE_InputFail
045C 020000   F     2106             JMP     CARDAPP_GDFXOBU_Err
                    2107             
045F                2108     CARDAPP_GDFXOBU_Read0019Vehicle03OK:    
                    2109     
                    2110             ;»ñÈ¡ESAMËæ»úÊ
                    2111             ;XDATA_HOLD[0~3]
                    2112             ;xdata_txbuf[0~48]      ³µÁ¾ÐÅÏ¢
045F 900000   F     2113             MOV     DPTR,#STR_CARDAPP_Rand
0462 7F00     F     2114             MOV     R7,#DATA_RXBUF
0464 120000   F     2115             CALL    _FUN_LIB_FLASHTODATA    
                    2116             
0467 D200     F     2117             SETB    BIT_GETRESULT
0469 C200     F     2118             CLR     BIT_ESAMICC
046B 7F00     F     2119             MOV     R7,#DATA_RXBUF
046D 7D00     F     2120             MOV     R5,#XDATA_HOLD  
046F 120000   F     2121             CALL    _FUN_CARDAPP_InnerCardChannel
                    2122             
0472 EF             2123             MOV     A,R7
0473 6005           2124             JZ      CARDAPP_GDFXOBU_GetESAMRand05OK
0475 7F01           2125             MOV     R7,#CONST_STATE_InputFail
0477 020000   F     2126             JMP     CARDAPP_GDFXOBU_Err     
047A                2127     CARDAPP_GDFXOBU_GetESAMRand05OK:
                    2128             
                    2129             ;½« 4 ×Ö½ÚËæ»úÊÓë  04 D6 9D 31£¨16½øÖÆÊ£¬4×Ö½Ú£©½øÐÐÒìÓò
                    2130             ;XDATA_HOLD[0~3]        RAND
047A 7F00     F     2131             MOV     R7,#XDATA_HOLD
047C 7D00     F     2132             MOV     R5,#XDATA_HOLD+4
047E 7B04           2133             MOV     R3,#4
0480 900000   F     2134             MOV     DPtr,#STR_CARDAPP_xor04d69D4f
0483 120000   F     2135             CALL    _FUN_CARDAPP_xxDATAFlashXOR
                    2136             
                    2137             ;XDATA_HOLD[0~3]        RAND    
                    2138             ;XDATA_HOLD[4~7]        MAC
                    2139             ;xdata_txbuf[0~48]      ³µÁ¾ÐÅÏ¢
                    2140             ;00 88 02 01 + datalen + 4 + 1 + Òì»òÖµ + ¡°datalen+4¡± + Ê¾Ý
                    2141             ;00 88 02 01 54 + rand + 53 + data
                    2142             ;00 88 02 01 31h+4+1 + xorValue +  31h+4 + data
                    2143             ;0E = Ëæ»úÊºóÃæµÄ³¤¶È¼´ÈÕÆÚ³¤¶È¼Ó1 
                    2144             ;¼ÆËã MAC
0486 900000   F     2145             MOV     DPTR,#STR_CARDAPP_88_06
0489 7F00     F     2146             MOV     R7,#DATA_RXBUF
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    36

048B 120000   F     2147             CALL    _FUN_LIB_FLASHTODATA
                    2148             
                    2149             ;MOV    R0,#DATA_RXBUF + 5
                    2150             ;MOV    R1,#XDATA_HOLD
                    2151             
048E 7F00     F     2152             MOV     R7,#XDATA_HOLD
0490 7D00     F     2153             MOV     R5,#DATA_RXBUF + 5
0492 7B04           2154             MOV     R3,#4
0494 120000   F     2155             CALL    _FUN_LIB_XDATATODATA
                    2156             
0497 7800     F     2157             MOV     R0,#DATA_RXBUF+5+4
0499 7435           2158             MOV     A,#35H  
049B F6             2159             MOV     @R0,A
                    2160             
049C 750500   F     2161             MOV     AR5,#DATA_RXBUF+5+4+1
049F 7F00     F     2162             MOV     R7,#XDATA_TXBUF
04A1 7B31           2163             MOV     R3,#31h
04A3 120000   F     2164             CALL    _FUN_LIB_XDATATODATA
                    2165             
04A6 D200     F     2166             SETB    BIT_GETRESULT
04A8 D200     F     2167             SETB    BIT_ESAMICC
04AA 7F00     F     2168             MOV     R7,#DATA_RXBUF
04AC 7D00     F     2169             MOV     R5,#XDATA_HOLD+4
04AE 7B3B           2170             MOV     R3,#5+4+1+31h
04B0 120000   F     2171             CALL    _FUN_CARDAPP_InnerCardChannel
                    2172             
04B3 EF             2173             MOV     A,R7
04B4 6005           2174             JZ      CARDAPP_GDFXOBU_88042OK
04B6 7F01           2175             MOV     R7,#CONST_STATE_InputFail
04B8 020000   F     2176             JMP     CARDAPP_GDFXOBU_Err
                    2177             
04BB                2178     CARDAPP_GDFXOBU_88042OK:        
                    2179     
                    2180             ;EF01 ÎÄ¼þµÄ¸üÐÂ
                    2181             ;XDATA_HOLD[0~3]        RAND
                    2182             ;XDATA_HOLD[4~7]        MAC
                    2183             ;XDATA_TXBUF[0~8]       0019 ÎÄ¼þÖÐµÄÈÕÆÚ
                    2184             ;¡°04 D6 fileid offset +datalen+4¡±+ Ê¾Ý+¡¡MAC
                    2185             ;¡°04 D6 9d 4fh +31h+4¡±+ Ê¾Ý+¡¡MAC
04BB 900000   F     2186             MOV     DPTR,#STR_CARDAPP_D68106
04BE 7F00     F     2187             MOV     R7,#DATA_RXBUF
04C0 120000   F     2188             CALL    _FUN_LIB_FLASHTODATA
                    2189             
04C3 7D00     F     2190             MOV     R5,#DATA_RXBUF + 5
04C5 7F00     F     2191             MOV     R7,#XDATA_TXBUF
04C7 7B31           2192             MOV     R3,#31h
04C9 120000   F     2193             CALL    _FUN_LIB_XDATATODATA
                    2194             
04CC 750500   F     2195             MOV     AR5,#DATA_RXBUF + 5 + 31h
04CF 7F00     F     2196             MOV     R7,#XDATA_HOLD + 4
04D1 7B04           2197             MOV     R3,#04
04D3 120000   F     2198             CALL    _FUN_LIB_XDATATODATA
                    2199                     
04D6 D200     F     2200             SETB    BIT_GETRESULT
04D8 C200     F     2201             CLR     BIT_ESAMICC
04DA 7F00     F     2202             MOV     R7,#DATA_RXBUF
04DC 7D00     F     2203             MOV     R5,#XDATA_HOLD+7+4
04DE 7B3A           2204             MOV     R3,#5H+31h+4H
04E0 120000   F     2205             CALL    _FUN_CARDAPP_InnerCardChannel   
04E3 EF             2206             MOV     A,R7
                    2207             ;---JZ  CARDAPP_GDFXOBU_UpdataEF01OK
04E4 6005           2208             JZ      CARDAPP_GDFXOBU_Updatesysinfo2
04E6 7F01           2209             MOV     R7,#CONST_STATE_InputFail
04E8 020000   F     2210             JMP     CARDAPP_GDFXOBU_Err
                    2211     
04EB                2212     CARDAPP_GDFXOBU_Updatesysinfo2:
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    37

                    2213     
                    2214     ;----------------------------------------------------------------------------   
                    2215             ;mov    r0,#DATA_RXBUF+5+1bh
                    2216             ;mov    a,@r0
                    2217             ;mov    a,r3
                    2218             ;call   _fun_test_display       
                    2219             
                    2220             ;CLR    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
                    2221             ;SETB   BIT_GETRESULT   
                    2222             ;MOV    R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
                    2223             ;MOV    R5,#XDATA_HOLD
                    2224             ;MOV    R4,#00h                                                 ;R4             ---
                                  ÎÄ¼þID
                    2225             ;MOV    R3,#1bh                                                 ;R3             ---
                                  ³¤¶È
                    2226             ;MOV    R2,#12;04;03
                    2227             ;CALL   _FUN_CARDAPP_ReadBinary02
                    2228             ;MOV    A,R7    
                    2229             
                    2230             ;mov    r0,#XDATA_HOLD
                    2231             ;       ;MOVX   A,@R0
                    2232             ;MOV    DPH,#1
                    2233             ;MOV    DPL,R0
                    2234             ;MOVX   A,@DPTR
                    2235             ;MOV    A,#37
                    2236             ;call   _fun_test_display       
                    2237             
                    2238             ;mov    a,#37
                    2239             ;call   _fun_test_display
                    2240     ;----------------------------------------------------------------------------   
                    2241             ;»ñÈ¡ESAMËæ»úÊ
                    2242             ;XDATA_HOLD[0~3]
04EB 900000   F     2243             MOV     DPTR,#STR_CARDAPP_Rand
04EE 7F00     F     2244             MOV     R7,#DATA_RXBUF
04F0 120000   F     2245             CALL    _FUN_LIB_FLASHTODATA    
                    2246             
04F3 D200     F     2247             SETB    BIT_GETRESULT
04F5 C200     F     2248             CLR     BIT_ESAMICC
04F7 7F00     F     2249             MOV     R7,#DATA_RXBUF
04F9 7D00     F     2250             MOV     R5,#XDATA_HOLD  
04FB 120000   F     2251             CALL    _FUN_CARDAPP_InnerCardChannel
                    2252     
04FE EF             2253             MOV     A,R7
04FF 6005           2254             JZ      CARDAPP_GDFXOBU_GetESAMRand03OK
0501 7F01           2255             MOV     R7,#CONST_STATE_InputFail
0503 020000   F     2256             JMP     CARDAPP_GDFXOBU_Err
                    2257             
0506                2258     CARDAPP_GDFXOBU_GetESAMRand03OK:        
                    2259             ;½« 4 ×Ö½ÚËæ»úÊÓë  ¡°04d68112¡± £¨16½øÖÆÊ£¬4×Ö½Ú£©½øÐÐÒìÓò
                    2260             ;XDATA_HOLD[0~3]        RAND
0506 7F00     F     2261             MOV     R7,#XDATA_HOLD
0508 7D00     F     2262             MOV     R5,#XDATA_HOLD+4
050A 7B04           2263             MOV     R3,#4
050C 900000   F     2264             MOV     DPtr,#STR_CARDAPP_xor04d68112
050F 120000   F     2265             CALL    _FUN_CARDAPP_xxDATAFlashXOR
                    2266             
                    2267             ;»ñµÃ 0019 ÎÄ¼þÖÐµÄÏµÍ³ÐÅÏ¢     
                    2268             ;XDATA_TXBUF[0~8]       0019ÎÄ¼þÖÐµÄÈÕÆÚ
                    2269             ;00 B0 99 5C 09         5CÆ«ÒÆÁ¿,09³¤¶È
0512 D200     F     2270             SETB    BIT_ESAMICC                                             ; µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0514 D200     F     2271             SETB    BIT_GETRESULT                                           ; 
0516 7F00     F     2272             MOV     R7,#DATA_RXBUF                                          ; R7            ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
0518 7D00     F     2273             MOV     R5,#XDATA_TXBUF                                         ; 
051A 7C99           2274             MOV     R4,#99h                                                 ; R4            ---
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    38

                                  ÎÄ¼þID
051C 7B5C           2275             MOV     R3,#05CH                                                ; R3            ---
                                  ³¤¶È
051E 7A09           2276             MOV     R2,#009H
0520 120000   F     2277             CALL    _FUN_CARDAPP_ReadBinary02
                    2278     
0523 EF             2279             MOV     A,R7
0524 6005           2280             JZ      CARDAPP_GDFXOBU_Read0019DATAOK
0526 7F01           2281             MOV     R7,#CONST_STATE_InputFail
0528 020000   F     2282             JMP     CARDAPP_GDFXOBU_Err
                    2283             
052B                2284     CARDAPP_GDFXOBU_Read0019DATAOK:
                    2285             ;XDATA_HOLD[0~3]        RAND    
                    2286             ;XDATA_HOLD[4~7]        MAC
                    2287             ;XDATA_TXBUF[0~8]       0019ÎÄ¼þÖÐµÄÈÕÆÚ
                    2288             ;00 88 02 01 0E + rand + 0D + data
                    2289             ;0E = Ëæ»úÊºóÃæµÄ³¤¶È¼´ÈÕÆÚ³¤¶È¼Ó1 
                    2290             ;¼ÆËã MAC
052B 900000   F     2291             MOV     DPTR,#STR_CARDAPP_88_03
052E 7F00     F     2292             MOV     R7,#DATA_RXBUF
0530 120000   F     2293             CALL    _FUN_LIB_FLASHTODATA
                    2294             
                    2295             ;MOV    R0,#DATA_RXBUF + 5
                    2296             ;MOV    R1,#XDATA_HOLD
                    2297             
0533 7F00     F     2298             MOV     R7,#XDATA_HOLD
0535 7D00     F     2299             MOV     R5,#DATA_RXBUF + 5
0537 7B04           2300             MOV     R3,#4
0539 120000   F     2301             CALL    _FUN_LIB_XDATATODATA
                    2302             
053C 7800     F     2303             MOV     R0,#DATA_RXBUF+5+4
053E 740D           2304             MOV     A,#0DH  
0540 F6             2305             MOV     @R0,A
                    2306             
0541 750500   F     2307             MOV     AR5,#DATA_RXBUF+5+4+1
0544 7F00     F     2308             MOV     R7,#XDATA_TXBUF
0546 7B09           2309             MOV     R3,#09
0548 120000   F     2310             CALL    _FUN_LIB_XDATATODATA
                    2311             
054B D200     F     2312             SETB    BIT_GETRESULT
054D D200     F     2313             SETB    BIT_ESAMICC
054F 7F00     F     2314             MOV     R7,#DATA_RXBUF
0551 7D00     F     2315             MOV     R5,#XDATA_HOLD+4
0553 7B13           2316             MOV     R3,#5+4+1+9
0555 120000   F     2317             CALL    _FUN_CARDAPP_InnerCardChannel
                    2318             
0558 EF             2319             MOV     A,R7
0559 6005           2320             JZ      CARDAPP_GDFXOBU_8803OK
055B 7F01           2321             MOV     R7,#CONST_STATE_InputFail
055D 020000   F     2322             JMP     CARDAPP_GDFXOBU_Err
                    2323             
0560                2324     CARDAPP_GDFXOBU_8803OK:         
                    2325             
                    2326             ;EF01 ÎÄ¼þµÄ¸üÐÂ
                    2327             ;XDATA_HOLD[0~3]        RAND
                    2328             ;XDATA_HOLD[4~7]        MAC
                    2329             ;XDATA_TXBUF[0~8]       0019 ÎÄ¼þÖÐµÄÈÕÆÚ
                    2330             ;¡° 04 D6 81 12 0D ¡± + 0019 ÎÄ¼þÖÐµÄÈÕÆÚ        +¡¡MAC
0560 900000   F     2331             MOV     DPTR,#STR_CARDAPP_D68103
0563 7F00     F     2332             MOV     R7,#DATA_RXBUF
0565 120000   F     2333             CALL    _FUN_LIB_FLASHTODATA
                    2334             
0568 7D00     F     2335             MOV     R5,#DATA_RXBUF + 5
056A 7F00     F     2336             MOV     R7,#XDATA_TXBUF
056C 7B09           2337             MOV     R3,#09H
056E 120000   F     2338             CALL    _FUN_LIB_XDATATODATA
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    39

                    2339             
0571 750500   F     2340             MOV     AR5,#DATA_RXBUF + 5 + 09H
0574 7F00     F     2341             MOV     R7,#XDATA_HOLD + 4
0576 7B04           2342             MOV     R3,#04
0578 120000   F     2343             CALL    _FUN_LIB_XDATATODATA
                    2344                     
057B D200     F     2345             SETB    BIT_GETRESULT
057D C200     F     2346             CLR     BIT_ESAMICC
057F 7F00     F     2347             MOV     R7,#DATA_RXBUF
0581 7D00     F     2348             MOV     R5,#XDATA_HOLD+7+4
0583 7B12           2349             MOV     R3,#5H+09H+4H
0585 120000   F     2350             CALL    _FUN_CARDAPP_InnerCardChannel   
0588 EF             2351             MOV     A,R7
                    2352             ;---JZ  CARDAPP_GDFXOBU_UpdataEF01OK
0589 6004           2353             JZ      CARDAPP_GDFXOBU_UpdateOBUID
058B 7F01           2354             MOV     R7,#CONST_STATE_InputFail
058D 8060           2355             JMP     CARDAPP_GDFXOBU_Err
                    2356             
                    2357             ;=== »ØÐ´OBUID£¬»ØÐ´µ¼Èë´ÎÊ ===
058F                2358     CARDAPP_GDFXOBU_UpdateOBUID:
                    2359             
                    2360             ;¶ÁÈ¡µ¼Èë¿¨ 0019 ºÏÍ¬ÐòºÅ
                    2361             ;XDATA_txbuf[0~12] 0019ÎÄ¼þ
                    2362             ;XDATA_txbuf[13~13+12] 0019ÎÄ¼þ ³µÅÆ
058F D200     F     2363             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0591 D200     F     2364             SETB    BIT_GETRESULT   
0593 7F00     F     2365             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
0595 7D00     F     2366             MOV     R5,#XDATA_TXBUF
0597 7C99           2367             MOV     R4,#99h                                                 ;R4             ---
                                  ÎÄ¼þID
0599 7B00           2368             MOV     R3,#00                                                  ;R3             ---
                                  ³¤¶È
059B 7A19           2369             MOV     R2,#13+12                                               ;04;03
059D 120000   F     2370             CALL    _FUN_CARDAPP_ReadBinary02
05A0 EF             2371             MOV     A,R7    
05A1 6004           2372             JZ      CARDAPP_GDFXOBU_Read001902OK
05A3 7F01           2373             MOV     R7,#CONST_STATE_InputFail
05A5 8048           2374             JMP     CARDAPP_GDFXOBU_Err
                    2375     
05A7                2376     CARDAPP_GDFXOBU_Read001902OK:   
                    2377             ;Ð´³µÅÆµ½flash
                    2378             ;MOV    DPH,#CONST_FLASH_SysHVH
                    2379             ;MOV    DPL,#CONST_FLASH_SysHVL
                    2380             ;MOV    R3,#1
                    2381             ;CALL   _eraseflash
                    2382             
                    2383             ;MOV    DPH,#CONST_FLASH_SysHVH
                    2384             ;MOV    DPL,#CONST_FLASH_SysHVL
                    2385             ;MOV    R7,#XDATA_TXBUF+13
                    2386             ;MOV    R3,#12
                    2387             ;CALL   _wrflashXR
                    2388     
05A7 7F00     F     2389             MOV     R7,#XDATA_TXBUF
05A9 7D00     F     2390             MOV     R5,#DATA_OBUID
05AB 7B04           2391             MOV     R3,#4
05AD 120000   F     2392             CALL    _FUN_LIB_DATATOXDATA
                    2393                     
05B0 7800     F     2394             MOV     R0,#XDATA_TXBUF+12
                    2395                     ;MOVX   A,@R0
05B2 758301         2396             MOV     DPH,#1
05B5 8882           2397             MOV     DPL,R0
05B7 E0             2398             MOVX    A,@DPTR
05B8 64FF           2399             XRL     A,#0FFH
05BA 7002           2400             JNZ     CARDAPP_GDFXOBU_Read001902COUNT
                    2401             ;MOV    R7,#CONST_STATE_InputFail
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    40

                    2402             ;JMP    CARDAPP_GDFXOBU_Err
05BC 802E           2403             JMP     CARDAPP_GDFXOBU_UpdataEF01OK
05BE                2404     CARDAPP_GDFXOBU_Read001902COUNT:
                    2405                     ;MOVX   A,@R0
05BE 758301         2406             MOV     DPH,#1
05C1 8882           2407             MOV     DPL,R0
05C3 E0             2408             MOVX    A,@DPTR
                    2409             ;---INC A
05C4 14             2410             DEC     A
                    2411                     ;MOVX   @R0,A
05C5 758301         2412             MOV     DPH,#1 
05C8 8882           2413             MOV     DPL,R0 
05CA F0             2414             MOVX    @DPTR,A
                    2415             
                    2416             ;¸üÐÂ0019
                    2417             ;Ð´ÓÃ»§¿¨ 32 byte 5~56
05CB D200     F     2418             SETB    BIT_GETRESULT
05CD D200     F     2419             SETB    BIT_ESAMICC     
05CF 7D00     F     2420             MOV     R5,#DATA_RXBUF + 5
05D1 7F00     F     2421             MOV     R7,#XDATA_TXBUF
05D3 7B0D           2422             MOV     R3,#13
05D5 120000   F     2423             CALL    _FUN_LIB_XDATATODATA
05D8 7C00           2424             MOV     R4,#00
05DA 7B00           2425             MOV     R3,#00  
05DC 7F00     F     2426             MOV     R7,#DATA_RXBUF
05DE 7D00     F     2427             MOV     R5,#XDATA_TXBUF
05E0 7A0D           2428             MOV     R2,#13
05E2 120000   F     2429             CALL    _FUN_CARDAPP_UpdateBinary
05E5 EF             2430             MOV     A,R7
05E6 6004           2431             JZ      CARDAPP_GDFXOBU_UpdataEF01OK    
05E8 7F01           2432             MOV     R7,#CONST_STATE_InputFail
05EA 8003           2433             JMP     CARDAPP_GDFXOBU_Err
                    2434             
05EC                2435     CARDAPP_GDFXOBU_UpdataEF01OK:
                    2436             
05EC 7F00           2437             MOV     R7,#CONST_STATE_TRUE
                    2438             
05EE 22             2439             RET
                    2440     ;--------------------------------------------------------------------------
05EF                2441     CARDAPP_GDFXOBU_Err:
                    2442             
05EF 22             2443             RET
                    2444     ;--------------------------------------------------------------------------
                    2445     ;¹ã¶«¼¤»î¿¨Á÷³Ì
                    2446     ;·µ»ØÖµ
                    2447     ;       01 ±íÊ¾µ¼Èë¿¨Ê§Ð§
                    2448     ;--------------------------------------------------------------------------
05F0                2449     _FUN_CARDAPP_ACTIVEOBU: 
                    2450             
                    2451             ;=== Ñ¡Ôñµ¼Èë¿¨µÄ1001Ä¿Â¼ ===
                    2452             ; BIT_ESAMICC=1±íÊ¾ÓÃ»§¿¨;=0±íÊ¾ESAM
                    2453     ;       CLR     BIT_GETRESULT
                    2454     ;       SETB    BIT_ESAMICC
                    2455     ;       MOV     R7,#DATA_RXBUF
                    2456     ;       MOV     R5,#XDATA_TXBUF
                    2457     ;       MOV     R3,#010H
                    2458     ;       MOV     R2,#001H
                    2459     ;       CALL    _FUN_CARDAPP_SelectFile
                    2460     ;       MOV     A,R7
                    2461     ;       JZ      CARDAPP_ACTIVEOBU_Sel1001OK
                    2462     ;       JMP     CARDAPP_ACTIVEOBU_Err
                    2463             
                    2464     ;CARDAPP_ACTIVEOBU_Sel1001OK:           
                    2465             ;¶ÁÈ¡µ¼Èë¿¨ 0015 ÎÄ¼þ£¬ÅÐ¶ÏÊÇ·ñÎªµ¼Èë¿¨0E[µÚ9¸ö×Ö½Ú£¬ÏÂ±êÓÉ1¿ªÊ¼]
                    2466     ;       SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
                    2467     ;       SETB    BIT_GETRESULT   
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    41

                    2468     ;       MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
                    2469     ;;      MOV     R5,#XDATA_HOLD
                    2470     ;       MOV     R4,#95h                                                 ;R4             ---
                                  ÎÄ¼þID
                    2471     ;       MOV     R3,#08                                                  ;R3             ---
                                  ³¤¶È
                    2472     ;       MOV     R2,#01
                    2473     ;       CALL    _FUN_CARDAPP_ReadBinary02
                    2474     ;       MOV     A,R7
                    2475     ;       JZ      CARDAPP_ACTIVEOBU_Read0015OK
                    2476     ;       JMP     CARDAPP_ACTIVEOBU_Err
                    2477             
                    2478     ;CARDAPP_ACTIVEOBU_Read0015OK:  
                    2479     ;       MOV     R0,#XDATA_HOLD
                    2480     ;               ;MOVX   A,@R0
                    2481     
                    2482     ;       XRL     A,#0EH
                    2483     ;       JZ      CARDAPP_ACTIVEOBU_DRCard
                    2484     ;       JMP     CARDAPP_ACTIVEOBU_Err
                    2485             
05F0                2486     CARDAPP_ACTIVEOBU_DRCard:
                    2487             ;Ñ¡Ôñ ESAM µÄ MF Ä¿Â¼,Ö»½øÐÐµ½61
05F0 C200     F     2488             CLR     BIT_GETRESULT
05F2 C200     F     2489             CLR     BIT_ESAMICC
05F4 7F00     F     2490             MOV     R7,#DATA_RXBUF
05F6 7D00     F     2491             MOV     R5,#XDATA_TXBUF
05F8 7B3F           2492             MOV     R3,#03FH
05FA 7A00           2493             MOV     R2,#000H
05FC 120000   F     2494             CALL    _FUN_CARDAPP_SelectFile
05FF EF             2495             MOV     A,R7
0600 6005           2496             JZ      CARDAPP_ACTIVEOBU_ReadSel3f00OK
0602 7F04           2497             MOV     R7,#CONST_STATE_ActiveFail
0604 020000   F     2498             JMP     CARDAPP_ACTIVEOBU_Err
                    2499             
0607                2500     CARDAPP_ACTIVEOBU_ReadSel3f00OK:
                    2501             ;==============================
                    2502             ;¶ÁÈ¡ OBU ºÏÍ¬ÐòºÅ
                    2503             ;XDATA_HOLD[0~7] ESAM ºÏÍ¬ÐòºÅ
                    2504             ;==============================
0607 C200     F     2505             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0609 D200     F     2506             SETB    BIT_GETRESULT   
060B 7F00     F     2507             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
060D 7D00     F     2508             MOV     R5,#XDATA_HOLD
060F 7C81           2509             MOV     R4,#81h                                                 ;R4             ---
                                  ÎÄ¼þID
0611 7B0A           2510             MOV     R3,#0ah                                                 ;R3             ---
                                  ³¤¶È
0613 7A08           2511             MOV     R2,#08
0615 120000   F     2512             CALL    _FUN_CARDAPP_ReadBinary02
0618 EF             2513             MOV     A,R7
0619 6005           2514             JZ      CARDAPP_ACTIVEOBU_ReadESAMHTHOK
061B 7F04           2515             MOV     R7,#CONST_STATE_ActiveFail
061D 020000   F     2516             JMP     CARDAPP_ACTIVEOBU_Err
0620                2517     CARDAPP_ACTIVEOBU_ReadESAMHTHOK:        
                    2518             ;¶ÁÈ¡µ¼Èë¿¨ 001A ºÏÍ¬ÐòºÅ,¹²20Ìõ¼ÇÂ¼
                    2519             ;XDATA_HOLD[0~7] ESAM ºÏÍ¬ÐòºÅ
                    2520             ;XDATA_txbuf[0~1A] 001aÎÄ¼þ
                    2521             ;STR_CARDAPP_RX001A = 000H,0B2H,001H,0D4H,1AH
0620 7A14           2522             MOV     R2,#14H
0622                2523     CARDAPP_ACTIVEOBU_RX001A:
                    2524             
0622 900000   F     2525             MOV     DPTR,#STR_CARDAPP_RX001A
0625 7F00     F     2526             MOV     R7,#DATA_RXBUF
0627 C002           2527             PUSH    AR2
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    42

0629 120000   F     2528             CALL    _FUN_LIB_FLASHTODATA
062C D002           2529             POP     AR2     
                    2530             
                    2531             ;µ±Ç°¶Á¼ÇÂ¼ºÅ
062E 7800     F     2532             MOV     R0,#DATA_RXBUF+2
0630 EA             2533             MOV     A,R2
0631 F6             2534             MOV     @R0,A
                    2535             
0632 D200     F     2536             SETB    BIT_GETRESULT
0634 D200     F     2537             SETB    BIT_ESAMICC
0636 7F00     F     2538             MOV     R7,#DATA_RXBUF
0638 7D00     F     2539             MOV     R5,#XDATA_txbuf
063A C002           2540             PUSH    AR2
063C 120000   F     2541             CALL    _FUN_CARDAPP_InnerCardChannel
063F D002           2542             POP     AR2
                    2543             
0641 EF             2544             MOV     A,R7
0642 6005           2545             JZ      CARDAPP_ACTIVEOBU_Read001AOK    
0644 7F04           2546             MOV     R7,#CONST_STATE_ActiveFail
0646 020000   F     2547             JMP     CARDAPP_ACTIVEOBU_Err
                    2548             
0649                2549     CARDAPP_ACTIVEOBU_Read001AOK:
                    2550             ;±È½Ï ºÏÍ¬ºÅ ÊÇ·ñÏàÍ¬
0649 7900     F     2551             MOV     r1,#xdata_txbuf+5
064B 7800     F     2552             MOV     r0,#xdata_HOLD
064D 7B08           2553             MOV     R3,#8
064F                2554     CARDAPP_ACTIVEOBU_COMP:
                    2555                     ;MOVX   A,@R1
064F 758301         2556             MOV     DPH,#1
0652 8982           2557             MOV     DPL,R1
0654 E0             2558             MOVX    A,@DPTR
0655 F5F0           2559             MOV     B,A
                    2560                     ;MOVX   A,@R0
                    2561     ;       MOV     DPH,#1
0657 8882           2562             MOV     DPL,R0
0659 E0             2563             MOVX    A,@DPTR
065A 65F0           2564             XRL     A,B
065C 6007           2565             JZ      CARDAPP_ACTIVEOBU_NoErZZ
065E DAC2           2566             DJNZ    R2,CARDAPP_ACTIVEOBU_RX001A
0660 7F05           2567             MOV     R7,#CONST_STATE_IllegalACTCard
                    2568             
0662 020000   F     2569             JMP     CARDAPP_ACTIVEOBU_Err
0665                2570     CARDAPP_ACTIVEOBU_NoErZZ:
0665 09             2571             INC     R1
0666 08             2572             INC     R0
0667 DBE6           2573             DJNZ    R3,CARDAPP_ACTIVEOBU_COMP
                    2574             
0669                2575     CARDAPP_ACTIVEOBU_COMPOV:
                    2576             ;MOV    A,R2
                    2577             ;CALL   _FUN_TEST_DISPLAY
                    2578             
                    2579             ;XDATA_HOLD[11]         ¼ÇÂ¼ºÅ
                    2580             ;XDATA_HOLD[0~7]        ESAM ºÏÍ¬ÐòºÅ
                    2581             ;XDATA_TXBUF[0~1A]      001AÎÄ¼þ
0669 7900     F     2582             MOV     R1,#xdata_txbuf+4
                    2583                     ;MOVX   A,@R1
066B 758301         2584             MOV     DPH,#1
066E 8982           2585             MOV     DPL,R1
0670 E0             2586             MOVX    A,@DPTR
0671 64FF           2587             XRL     A,#0FFH
0673 7005           2588             JNZ     CARDAPP_ACTIVEOBU_Valid
0675 7F06           2589             MOV     R7,#CONST_STATE_ACTCardInvalid
0677 020000   F     2590             JMP     CARDAPP_ACTIVEOBU_Err
                    2591             
067A                2592     CARDAPP_ACTIVEOBU_Valid:
                    2593             
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    43

                    2594             ;~~~~~~~~~~~~~
                    2595             ;¼ÇÂ¼´ÎÊ
067A 7800     F     2596             MOV     R0,#XDATA_HOLD+13
067C EA             2597             MOV     A,R2
                    2598                     ;MOVX   @R0,A
067D 758301         2599             MOV     DPH,#1 
0680 8882           2600             MOV     DPL,R0 
0682 F0             2601             MOVX    @DPTR,A
                    2602             ;~~~~~~~~~~~~~  
                    2603             ;»ñÈ¡ ESAM Ëæ»úÊ
                    2604             ;XDATA_HOLD[0~3] ESAM  rand
                    2605             ;XDATA_HOLD[13] ¼ÇÂ¼ºÅ  
                    2606             ;XDATA_txbuf[0~1A] 001aÎÄ¼þ
0683 900000   F     2607             MOV     DPTR,#STR_CARDAPP_Rand
0686 7F00     F     2608             MOV     R7,#DATA_RXBUF
0688 120000   F     2609             CALL    _FUN_LIB_FLASHTODATA
                    2610             
068B D200     F     2611             SETB    BIT_GETRESULT
068D C200     F     2612             CLR     BIT_ESAMICC
068F 7F00     F     2613             MOV     R7,#DATA_RXBUF
0691 7D00     F     2614             MOV     R5,#XDATA_HOLD
0693 120000   F     2615             CALL    _FUN_CARDAPP_InnerCardChannel
0696 EF             2616             MOV     A,R7
0697 6005           2617             JZ      CARDAPP_ACTIVEOBU_GetESAMRandOK
0699 7F04           2618             MOV     R7,#CONST_STATE_ActiveFail
069B 020000   F     2619             JMP     CARDAPP_ACTIVEOBU_Err
                    2620             
069E                2621     CARDAPP_ACTIVEOBU_GetESAMRandOK:
                    2622             ;~~~~~~~~~~~~~
                    2623             ;MOV    R0,#XDATA_HOLD+11
                    2624             ;       ;MOVX   A,@R0
                    2625             ;MOV    DPH,#1
                    2626             ;MOV    DPL,R0
                    2627             ;MOVX   A,@DPTR
                    2628             ;CALL   _FUN_TEST_DISPLAY
                    2629             ;~~~~~~~~~~~~~  
                    2630             ;½«4×Ö½ÚËæ»úÊÓë¡°04D6811A¡±£¨16½øÖÆÊ£¬4×Ö½Ú£©½øÐÐÒìÓò
                    2631             ;XDATA_HOLD[0~3]   RAND
                    2632             ;XDATA_HOLD[11] ¼ÇÂ¼ºÅ  
                    2633             ;XDATA_txbuf[0~1A] 001aÎÄ¼þ
069E 7F00     F     2634             MOV     R7,#XDATA_HOLD
06A0 7D00     F     2635             MOV     R5,#XDATA_HOLD+4
06A2 7B04           2636             MOV     R3,#4
06A4 900000   F     2637             MOV     DPtr,#STR_CARDAPP_xor04d6811A
06A7 120000   F     2638             CALL    _FUN_CARDAPP_xxDATAFlashXOR
                    2639             
                    2640             ;»ñµÃ 0015 ÎÄ¼þÖÐµÄ³µÁ¾ÐÅÏ¢
                    2641             ;XDATA_HOLD[0~3]        ESAM DF01 Ëæ»úÊ
                    2642             ;XDATA_HOLD[4~6]        PIN
                    2643             ;XDATA_HOLD[11]         ¼ÇÂ¼ºÅ  
                    2644             ;XDATA_txbuf[0~1A] 001aÎÄ¼þ
06AA D200     F     2645             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
06AC D200     F     2646             SETB    BIT_GETRESULT   
06AE 7F00     F     2647             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
06B0 7D00     F     2648             MOV     R5,#XDATA_HOLD+4
06B2 7C95           2649             MOV     R4,#95h                                                 ;R4             ---
                                  ÎÄ¼þID
06B4 7B0E           2650             MOV     R3,#00EH                                                ;R3             ---
                                  ³¤¶È
06B6 7A06           2651             MOV     R2,#06H
06B8 120000   F     2652             CALL    _FUN_CARDAPP_ReadBinary02
06BB EF             2653             MOV     A,R7
06BC 6005           2654             JZ      CARDAPP_ACTIVEOBU_Read0015CardNoOK
06BE 7F04           2655             MOV     R7,#CONST_STATE_ActiveFail
06C0 020000   F     2656             JMP     CARDAPP_ACTIVEOBU_Err
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    44

                    2657             
06C3                2658     CARDAPP_ACTIVEOBU_Read0015CardNoOK:
                    2659             ;mov    a,#34
                    2660             ;call   _fun_test_display
                    2661             ;XDATA_HOLD[0~3]        ESAM DF01 Ëæ»úÊ 
                    2662             ;XDATA_HOLD[4~6]        PIN                     
                    2663             ;XDATA_HOLD[11]         ¼ÇÂ¼ºÅ                  
                    2664             ;XDATA_txbuf[0~14]      001A ÎÄ¼þ
                    2665             ;µ¹Ò»ÏÂ
06C3 7800     F     2666             MOV     R0,#XDATA_HOLD + 4 + 3
                    2667                     ;MOVX   A,@R0
06C5 758301         2668             MOV     DPH,#1
06C8 8882           2669             MOV     DPL,R0
06CA E0             2670             MOVX    A,@DPTR
06CB F5F0           2671             MOV     B,A
                    2672             ;call   _fun_test_display
                    2673             
06CD 7800     F     2674             MOV     R0,#XDATA_HOLD + 4 + 5
                    2675                     ;MOVX   A,@R0
06CF 758301         2676             MOV     DPH,#1
06D2 8882           2677             MOV     DPL,R0
06D4 E0             2678             MOVX    A,@DPTR
                    2679             
06D5 7800     F     2680             MOV     R0,#XDATA_HOLD + 4 + 3
                    2681                     ;MOVX   @R0,A
06D7 758301         2682             MOV     DPH,#1 
06DA 8882           2683             MOV     DPL,R0 
06DC F0             2684             MOVX    @DPTR,A
                    2685             
06DD 7800     F     2686             MOV     R0,#XDATA_HOLD + 4 + 5
06DF E5F0           2687             MOV     A,B
                    2688                     ;MOVX   @R0,A
06E1 758301         2689             MOV     DPH,#1 
06E4 8882           2690             MOV     DPL,R0 
06E6 F0             2691             MOVX    @DPTR,A
                    2692             
06E7 7F00     F     2693             MOV     R7,#XDATA_HOLD + 4
06E9 7D00     F     2694             MOV     R5,#XDATA_HOLD + 4 + 3
06EB 7B03           2695             MOV     R3,#3
06ED 120000   F     2696             CALL    _FUN_CARDAPP_xxDATAXOR  
                    2697                             
                    2698             ;MOV    R7,#XDATA_HOLD + 4      
                    2699             ;MOV    R5,#XDATA_HOLD + 4 + 3  
                    2700             ;MOV    R3,#03                  
                    2701             ;CALL   _FUN_CARDAPP_XXDATAXOR
                    2702             
                    2703             ;XDATA_HOLD[0~3]        ESAM DF01 Ëæ »ú Ê       
                    2704             ;XDATA_HOLD[4~6]        PIN                     
                    2705             ;XDATA_HOLD[11]         ¼ÇÂ¼ºÅ                  
                    2706             ;XDATA_TXBUF[0~14]      001A ÎÄ¼þ               
06F0 7F00     F     2707             MOV     R7,#XDATA_HOLD+4                        
06F2 7D00     F     2708             MOV     R5,#XDATA_HOLD+4+3                      
06F4 7B03           2709             MOV     R3,#03                                  
06F6 900000   F     2710             MOV     DPTR,#STR_CARDAPP_xor3e267a             
06F9 120000   F     2711             CALL    _FUN_CARDAPP_xxDATAFLASHXOR             
                    2712             
                    2713             ;PIN ÈÏÖ¤ '0020000003' + strPIN
06FC 900000   F     2714             MOV     DPTR,#STR_CARDAPP_PIN
06FF 7F00     F     2715             MOV     R7,#DATA_RXBUF
0701 120000   F     2716             CALL    _FUN_LIB_FLASHTODATA
                    2717             
0704 7D00     F     2718             MOV     R5,#DATA_RXBUF + 5
0706 7F00     F     2719             MOV     R7,#XDATA_HOLD + 4
0708 7B03           2720             MOV     R3,#3
070A 120000   F     2721             CALL    _FUN_LIB_XDATATODATA
                    2722             
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    45

070D D200     F     2723             SETB    BIT_GETRESULT
070F D200     F     2724             SETB    BIT_ESAMICC
0711 7F00     F     2725             MOV     R7,#DATA_RXBUF
0713 7D00     F     2726             MOV     R5,#XDATA_HOLD+7
                    2727             
0715 7B08           2728             MOV     R3,#5+3
0717 120000   F     2729             CALL    _FUN_CARDAPP_InnerCardChannel
071A EF             2730             MOV     A,R7
071B 6005           2731             JZ      CARDAPP_ACTIVEOBU_PINOK
071D 7F04           2732             MOV     R7,#CONST_STATE_ActiveFail
071F 020000   F     2733             JMP     CARDAPP_ACTIVEOBU_Err
                    2734             
0722                2735     CARDAPP_ACTIVEOBU_PINOK:
                    2736             ;mov    a,#35
                    2737             ;call   _fun_test_display
                    2738             ;MOV    R7,#CONST_STATE_TRUE
                    2739             ;RET
                    2740             
                    2741             ;ÄÚ²¿ ÈÏÖ¤ ¼ÆËãMAC01
                    2742             ;XDATA_HOLD[0~3]        ESAM Ëæ»úÊ
                    2743             ;XDATA_HOLD[4~6]        PIN
                    2744             ;XDATA_HOLD[7~10]       MAC
                    2745             ;XDATA_HOLD[11]         ¼ÇÂ¼ºÅ  
                    2746             ;XDATA_txbuf[0~14]      001AÎÄ¼þ        
                    2747             ;00 88 02 + ÃÜÔ¿±êÊ¶[1 BYTE] + 06H + RAND + 05H + OBU×´Ì¬[1 BYTE]
0722 900000   F     2748             MOV     DPTR,#STR_CARDAPP_88_04
0725 7F00     F     2749             MOV     R7,#DATA_RXBUF
0727 120000   F     2750             CALL    _FUN_LIB_FLASHTODATA
                    2751             
                    2752             ;ÃÜÔ¿±êÊ¶[1 BYTE]
072A 7800     F     2753             MOV     R0,#DATA_RXBUF + 3
072C 7900     F     2754             MOV     R1,#XDATA_txbuf + 14
                    2755                     ;MOVX   A,@R1
072E 758301         2756             MOV     DPH,#1
0731 8982           2757             MOV     DPL,R1
0733 E0             2758             MOVX    A,@DPTR
0734 F6             2759             MOV     @R0,A
                    2760             
                    2761             ;COPY RAND
0735 7D00     F     2762             MOV     R5,#DATA_RXBUF + 5
0737 7F00     F     2763             MOV     R7,#XDATA_HOLD
0739 7B04           2764             MOV     R3,#4
073B 120000   F     2765             CALL    _FUN_LIB_XDATATODATA
                    2766             
073E 7800     F     2767             MOV     R0,#DATA_RXBUF+5+4
0740 7405           2768             MOV     A,#05H
0742 F6             2769             MOV     @R0,A
                    2770             
0743 7800     F     2771             MOV     R0,#DATA_RXBUF+5+4+1
0745 7900     F     2772             MOV     R1,#XDATA_TXBUF+13
                    2773                     ;MOVX   A,@R1
0747 758301         2774             MOV     DPH,#1
074A 8982           2775             MOV     DPL,R1
074C E0             2776             MOVX    A,@DPTR
074D F6             2777             MOV     @R0,A
                    2778             
074E D200     F     2779             SETB    BIT_GETRESULT
0750 D200     F     2780             SETB    BIT_ESAMICC
0752 7F00     F     2781             MOV     R7,#DATA_RXBUF
0754 7D00     F     2782             MOV     R5,#XDATA_HOLD+7
0756 7B0B           2783             MOV     R3,#5H+4H+1H+1H
0758 120000   F     2784             CALL    _FUN_CARDAPP_InnerCardChannel
075B EF             2785             MOV     A,R7
075C 6005           2786             JZ      CARDAPP_ACTIVEOBU_88OK
075E 7F04           2787             MOV     R7,#CONST_STATE_ActiveFail
0760 020000   F     2788             JMP     CARDAPP_ACTIVEOBU_Err
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    46

                    2789             
0763                2790     CARDAPP_ACTIVEOBU_88OK:
                    2791     
                    2792             ;MOV    R7,#CONST_STATE_TRUE
                    2793             ;RET
                    2794             ;¸üÐÂ EF01 ÎÄ¼þ
                    2795             ;XDATA_HOLD[0~3]        ESAM Ëæ»úÊ
                    2796             ;XDATA_HOLD[4~6]        PIN
                    2797             ;XDATA_HOLD[7~10]       MAC
                    2798             ;XDATA_HOLD[11]         ¼ÇÂ¼ºÅ  
                    2799             ;XDATA_txbuf[0~14]      001AÎÄ¼þ
                    2800             ;04 D6 81 1A 05 + OBU×´Ì¬[1 BYTE] + MAC
0763 900000   F     2801             MOV     DPTR,#STR_CARDAPP_D68104
0766 7F00     F     2802             MOV     R7,#DATA_RXBUF
0768 120000   F     2803             CALL    _FUN_LIB_FLASHTODATA
                    2804             
076B 7D00     F     2805             MOV     R5,#DATA_RXBUF + 5
076D 7900     F     2806             MOV     R1,#XDATA_TXBUF+13
                    2807                     ;MOVX   A,@R1
076F 758301         2808             MOV     DPH,#1
0772 8982           2809             MOV     DPL,R1
0774 E0             2810             MOVX    A,@DPTR
0775 F6             2811             MOV     @R0,A
                    2812             
0776 750500   F     2813             MOV     AR5,#DATA_RXBUF + 5 + 1
0779 7F00     F     2814             MOV     R7,#XDATA_HOLD + 7
077B 7B04           2815             MOV     R3,#04
077D 120000   F     2816             CALL    _FUN_LIB_XDATATODATA
                    2817             
0780 D200     F     2818             SETB    BIT_GETRESULT
0782 C200     F     2819             CLR     BIT_ESAMICC
0784 7F00     F     2820             MOV     R7,#DATA_RXBUF
0786 7D00     F     2821             MOV     R5,#XDATA_HOLD+7+4
0788 7B0A           2822             MOV     R3,#5+1+4
078A 120000   F     2823             CALL    _FUN_CARDAPP_InnerCardChannel
078D EF             2824             MOV     A,R7
078E 6005           2825             JZ      CARDAPP_ACTIVEOBU_WR001A
0790 7F04           2826             MOV     R7,#CONST_STATE_ActiveFail
0792 020000   F     2827             JMP     CARDAPP_ACTIVEOBU_Err
                    2828             
                    2829             ;»ØÐ´ 001A OBUID ºÍ¼¤»î´ÎÊ
0795                2830     CARDAPP_ACTIVEOBU_WR001A:
                    2831             
                    2832             ;---¶Á³ö¼¤»î¿¨ÖÐ OBUID ºÍ¼¤»î´ÎÊ
0795 900000   F     2833             MOV     DPTR,#STR_CARDAPP_RX001A
0798 7F00     F     2834             MOV     R7,#DATA_RXBUF
079A C002           2835             PUSH    AR2
079C 120000   F     2836             CALL    _FUN_LIB_FLASHTODATA
079F D002           2837             POP     AR2
                    2838             
                    2839             ;µ±Ç° ¶Á ¼ÇÂ¼ºÅ
07A1 7800     F     2840             MOV     R0,#DATA_RXBUF+2
07A3 7900     F     2841             MOV     R1,#XDATA_HOLD+13
                    2842                     ;MOVX   A,@R1
07A5 758301         2843             MOV     DPH,#1
07A8 8982           2844             MOV     DPL,R1
07AA E0             2845             MOVX    A,@DPTR
                    2846             
                    2847             ;MOV    A,R2
                    2848             ;MOV    A,#30
                    2849             ;CALL   _FUN_TEST_DISPLAY
                    2850             
07AB F6             2851             MOV     @R0,A
07AC D200     F     2852             SETB    BIT_GETRESULT
07AE D200     F     2853             SETB    BIT_ESAMICC
07B0 7F00     F     2854             MOV     R7,#DATA_RXBUF
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    47

07B2 7D00     F     2855             MOV     R5,#XDATA_txbuf
                    2856             ;PUSH   AR2
07B4 120000   F     2857             CALL    _FUN_CARDAPP_InnerCardChannel
                    2858             ;POP    AR2
07B7 EF             2859             MOV     A,R7
07B8 6004           2860             JZ      CARDAPP_ACTIVEOBU_Read001A02OK
                    2861             
                    2862             ;MOV    A,#31
                    2863             ;CALL   _FUN_TEST_DISPLAY
                    2864             
07BA 7F04           2865             MOV     R7,#CONST_STATE_ActiveFail
07BC 8057           2866             JMP     CARDAPP_ACTIVEOBU_Err
                    2867             
07BE                2868     CARDAPP_ACTIVEOBU_Read001A02OK:
                    2869             
                    2870             ;MOV    A,#40
                    2871             ;CALL   _fun_test_display
                    2872             
07BE 7F00     F     2873             MOV     R7,#XDATA_TXBUF
07C0 7D00     F     2874             MOV     R5,#DATA_OBUID
07C2 7B04           2875             MOV     R3,#4
07C4 120000   F     2876             CALL    _FUN_LIB_DATATOXDATA
                    2877             
07C7 7800     F     2878             MOV     R0,#XDATA_TXBUF+4
                    2879                     ;MOVX   A,@R0
07C9 758301         2880             MOV     DPH,#1
07CC 8882           2881             MOV     DPL,R0
07CE E0             2882             MOVX    A,@DPTR
                    2883             ;CALL   _fun_test_display
07CF 64FF           2884             XRL     A,#0FFH
                    2885             ;CALL   _fun_test_display
07D1 7002           2886             JNZ     CARDAPP_ACTIVEOBU_Read001902COUNT
                    2887             ;MOV    R7,#CONST_STATE_InputFail
                    2888             ;JMP    CARDAPP_GDFXOBU_Err
07D3 803D           2889             JMP     CARDAPP_ACTIVEOBU_D681OK
07D5                2890     CARDAPP_ACTIVEOBU_Read001902COUNT:
                    2891                     ;MOVX   A,@R0
07D5 758301         2892             MOV     DPH,#1
07D8 8882           2893             MOV     DPL,R0
07DA E0             2894             MOVX    A,@DPTR
                    2895             ;---INC A
07DB 14             2896             DEC     A
                    2897                     ;MOVX   @R0,A
07DC 758301         2898             MOV     DPH,#1 
07DF 8882           2899             MOV     DPL,R0 
07E1 F0             2900             MOVX    @DPTR,A
                    2901             
                    2902             ;MOV    A,#41
                    2903             ;CALL   _fun_test_display       
                    2904             
                    2905             ;»ØÐ´Ê¾Ý
07E2 900000   F     2906             MOV     DPTR,#STR_CARDAPP_WX001A
07E5 7F00     F     2907             MOV     R7,#DATA_RXBUF
07E7 120000   F     2908             CALL    _FUN_LIB_FLASHTODATA
                    2909             
07EA 7800     F     2910             MOV     R0,#DATA_RXBUF+2
07EC 7900     F     2911             MOV     R1,#XDATA_hold+13
                    2912                     ;MOVX   A,@R1
07EE 758301         2913             MOV     DPH,#1
07F1 8982           2914             MOV     DPL,R1
07F3 E0             2915             MOVX    A,@DPTR
07F4 F6             2916             MOV     @R0,A
                    2917             
                    2918             ;CALL   _fun_test_display
07F5 7D00     F     2919             MOV     R5,#DATA_RXBUF + 5
07F7 7F00     F     2920             MOV     R7,#XDATA_txbuf
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    48

07F9 7B1A           2921             MOV     R3,#26
07FB 120000   F     2922             CALL    _FUN_LIB_XDATATODATA
                    2923             
07FE D200     F     2924             SETB    BIT_GETRESULT
0800 D200     F     2925             SETB    BIT_ESAMICC
0802 7F00     F     2926             MOV     R7,#DATA_RXBUF
0804 7D00     F     2927             MOV     R5,#XDATA_txbuf
                    2928             ;MOV    R3,#26+5
0806 7B2D           2929             MOV     R3,#40+5
0808 120000   F     2930             CALL    _FUN_CARDAPP_InnerCardChannel
080B EF             2931             MOV     A,R7
                    2932             ;CALL   _FUN_TEST_DISPLAY
080C 6004           2933             JZ      CARDAPP_ACTIVEOBU_D681OK
080E 7F04           2934             MOV     R7,#CONST_STATE_ActiveFail
0810 8003           2935             JMP     CARDAPP_ACTIVEOBU_Err   
                    2936             
0812                2937     CARDAPP_ACTIVEOBU_D681OK:
0812 7F00           2938             MOV     R7,#CONST_STATE_TRUE
0814 22             2939             RET
                    2940             
0815                2941     CARDAPP_ACTIVEOBU_Err:
0815 22             2942             RET     
                    2943     ;--------------------------------------------------------------------------
                    2944     ;Íâ´æÒì»ò
                    2945     ;       Íâ´æ1           R7
                    2946     ;       Íâ´æ2           R5
                    2947     ;       Íâ´æ³¤¶È        R3
                    2948     ;·µ»ØÖµ
                    2949     ;       ·µ»ØÖµ·ÅÈëµ½R7ÖÐ
                    2950     ;--------------------------------------------------------------------------
0816                2951     _FUN_CARDAPP_xXDATAXOR:
                    2952             
0816 850700         2953             MOV     AR0,AR7
0819 850501         2954             MOV     AR1,AR5
081C                2955     CARDAPP_xxDATAXOR_LOOP:
                    2956                     ;MOVX   A,@R0
081C 758301         2957             MOV     DPH,#1
081F 8882           2958             MOV     DPL,R0
0821 E0             2959             MOVX    A,@DPTR
0822 F5F0           2960             MOV     B,A
                    2961                     ;MOVX   A,@R1
0824 758301         2962             MOV     DPH,#1
0827 8982           2963             MOV     DPL,R1
0829 E0             2964             MOVX    A,@DPTR
082A 65F0           2965             XRL     A,B
                    2966                     ;MOVX   @R0,A
082C 758301         2967             MOV     DPH,#1 
082F 8882           2968             MOV     DPL,R0 
0831 F0             2969             MOVX    @DPTR,A
0832 09             2970             INC     R1
0833 08             2971             INC     R0
0834 DBE6           2972             DJNZ    R3,CARDAPP_xxDATAXOR_LOOP
                    2973             
0836 22             2974             RET
                    2975     ;--------------------------------------------------------------------------
                    2976     ;Íâ´æÒì»ò
                    2977     ;       flash           dptr
                    2978     ;       Íâ´æ1           R7
                    2979     ;       Íâ´æ2           R5
                    2980     ;       Íâ´æ³¤¶È        R3
                    2981     ;·µ»ØÖµ
                    2982     ;       ·µ»ØÖµ·ÅÈëµ½ R7 ÖÐ
                    2983     ;--------------------------------------------------------------------------
0837                2984     _FUN_CARDAPP_xXDATAFlashXOR:
                    2985             
                    2986             ;½«Íâ´æÊ¾Ý Copy R5
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    49

                    2987             ;MOV    DPTR,#STR_CARDAPP_8802
                    2988             ;MOV    R7,#DATA_RXBUF
0837 C007           2989             PUSH    AR7
0839 C003           2990             PUSH    AR3
083B C005           2991             PUSH    AR5
083D 850507         2992             MOV     AR7,AR5
0840 120000   F     2993             CALL    _FUN_LIB_FLASHTOXDATA
0843 D005           2994             POP     AR5
0845 D003           2995             POP     AR3
0847 D007           2996             POP     AR7
                    2997             
0849 120000   F     2998             CALL    _FUN_CARDAPP_xxDATAXOR
                    2999             
084C 22             3000             RET
                    3001     ;--------------------------------------------------------------------------     
                    3002     
                    3003     
                    3004             
                    3005             
                    3006             END
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    50

SYMBOL TABLE LISTING
------ ----- -------


N A M E                              T Y P E  V A L U E   ATTRIBUTES

?CO?CARDAPP?FLASHSTR. . . . . . . .  C SEG    0082H       REL=UNIT
?PR?CARDAPP?MATER . . . . . . . . .  C SEG    084DH       REL=UNIT
AR0 . . . . . . . . . . . . . . . .  D ADDR   0000H   A   
AR1 . . . . . . . . . . . . . . . .  D ADDR   0001H   A   
AR2 . . . . . . . . . . . . . . . .  D ADDR   0002H   A   
AR3 . . . . . . . . . . . . . . . .  D ADDR   0003H   A   
AR5 . . . . . . . . . . . . . . . .  D ADDR   0005H   A   
AR7 . . . . . . . . . . . . . . . .  D ADDR   0007H   A   
B . . . . . . . . . . . . . . . . .  D ADDR   00F0H   A   
BIT_ESAMICC . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_GETRESULT . . . . . . . . . . .  B ADDR   -----       EXT
BIT_ISCONTACT . . . . . . . . . . .  B ADDR   -----       EXT
BIT_PROMF . . . . . . . . . . . . .  B ADDR   -----       EXT
BRT . . . . . . . . . . . . . . . .  N NUMB   009CH   A   
BUSY. . . . . . . . . . . . . . . .  B ADDR   0020H.0 A   
CARDAPP . . . . . . . . . . . . . .  N NUMB   -----       
CARDAPP_ACTIVEOBU_88OK. . . . . . .  C ADDR   0763H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_COMP. . . . . . .  C ADDR   064FH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_COMPOV. . . . . .  C ADDR   0669H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_D681OK. . . . . .  C ADDR   0812H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_DRCARD. . . . . .  C ADDR   05F0H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_ERR . . . . . . .  C ADDR   0815H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_GETESAMRANDOK . .  C ADDR   069EH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_NOERZZ. . . . . .  C ADDR   0665H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_PINOK . . . . . .  C ADDR   0722H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_READ0015CARDNOOK.  C ADDR   06C3H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_READ001902COUNT .  C ADDR   07D5H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_READ001A02OK. . .  C ADDR   07BEH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_READ001AOK. . . .  C ADDR   0649H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_READESAMHTHOK . .  C ADDR   0620H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_READSEL3F00OK . .  C ADDR   0607H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_RX001A. . . . . .  C ADDR   0622H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_VALID . . . . . .  C ADDR   067AH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ACTIVEOBU_WR001A. . . . . .  C ADDR   0795H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_CARDCHANNEL_ESAM. . . . . .  C ADDR   0175H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_CARDCHANNEL_ICC . . . . . .  C ADDR   017AH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_CARDCHANNEL_MF. . . . . . .  C ADDR   0185H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_CARDCHANNEL_NCONTACT. . . .  C ADDR   0182H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_CARDCHANNEL_OVER. . . . . .  C ADDR   018DH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_CARDCHANNEL_PRO . . . . . .  C ADDR   018AH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_DECCOUNTER_OVER . . . . . .  C ADDR   016BH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_8803OK. . . . . . .  C ADDR   0560H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_88042OK . . . . . .  C ADDR   04BBH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_8804OK. . . . . . .  C ADDR   0416H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_88OK. . . . . . . .  C ADDR   035BH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_COMP. . . . . . . .  C ADDR   022CH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_COMPOV. . . . . . .  C ADDR   0247H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_D681OK. . . . . . .  C ADDR   038BH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_DRCARD. . . . . . .  C ADDR   01DDH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_ERR . . . . . . . .  C ADDR   05EFH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_GETESAMRAND03OK . .  C ADDR   0506H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_GETESAMRAND04OK . .  C ADDR   03D5H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_GETESAMRAND05OK . .  C ADDR   047AH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_GETESAMRANDOK . . .  C ADDR   028AH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_NOERZZ. . . . . . .  C ADDR   0243H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_PINOK . . . . . . .  C ADDR   0327H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_READ0015CARDNOOK. .  C ADDR   02C8H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_READ001902COUNT . .  C ADDR   05BEH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_READ001902OK. . . .  C ADDR   05A7H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_READ0019DATAOK. . .  C ADDR   052BH   R   SEG=?PR?CARDAPP?MATER
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    51

CARDAPP_GDFXOBU_READ0019OK. . . . .  C ADDR   0226H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_READ0019VEHICLE02OK  C ADDR   03BAH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_READ0019VEHICLE03OK  C ADDR   045FH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_READ0019VEHICLEOK .  C ADDR   02AFH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_READESAMHTHOK . . .  C ADDR   020DH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_READSEL3F00OK . . .  C ADDR   01F4H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_SEL3F00OK . . . . .  C ADDR   03A1H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_SELESAMDF01OK . . .  C ADDR   026FH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_UPDATAEF01OK. . . .  C ADDR   05ECH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_UPDATEOBUID . . . .  C ADDR   058FH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_UPDATESYSINFO . . .  C ADDR   0446H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_UPDATESYSINFO2. . .  C ADDR   04EBH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_GDFXOBU_VALID . . . . . . .  C ADDR   0258H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ISINORACT_ERR . . . . . . .  C ADDR   01DAH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ISINORACT_OVER. . . . . . .  C ADDR   01D7H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ISINORACT_READ0015OK. . . .  C ADDR   01CEH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_ISINORACT_SEL1001OK . . . .  C ADDR   01B8H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_SELECTFILE_NORESULT . . . .  C ADDR   005CH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_SELECTFILE_RESULT . . . . .  C ADDR   0058H   R   SEG=?PR?CARDAPP?MATER
CARDAPP_SELECTFILE_RESULTOVER . . .  C ADDR   005EH   R   SEG=?PR?CARDAPP?MATER
CARDAPP_XXDATAXOR_LOOP. . . . . . .  C ADDR   081CH   R   SEG=?PR?CARDAPP?MATER
CCAP0H. . . . . . . . . . . . . . .  N NUMB   00FAH   A   
CCAP0L. . . . . . . . . . . . . . .  N NUMB   00EAH   A   
CCAP1H. . . . . . . . . . . . . . .  N NUMB   00FBH   A   
CCAP1L. . . . . . . . . . . . . . .  N NUMB   00EBH   A   
CCAP2H. . . . . . . . . . . . . . .  N NUMB   00FCH   A   
CCAP2L. . . . . . . . . . . . . . .  N NUMB   00ECH   A   
CCAP3H. . . . . . . . . . . . . . .  N NUMB   00FDH   A   
CCAP3L. . . . . . . . . . . . . . .  N NUMB   00EDH   A   
CCAP4H. . . . . . . . . . . . . . .  N NUMB   00FEH   A   
CCAP4L. . . . . . . . . . . . . . .  N NUMB   00EEH   A   
CCAP5H. . . . . . . . . . . . . . .  N NUMB   00FFH   A   
CCAP5L. . . . . . . . . . . . . . .  N NUMB   00EFH   A   
CCAPM0. . . . . . . . . . . . . . .  N NUMB   00DAH   A   
CCAPM1. . . . . . . . . . . . . . .  N NUMB   00DBH   A   
CCAPM2. . . . . . . . . . . . . . .  N NUMB   00DCH   A   
CCAPM3. . . . . . . . . . . . . . .  N NUMB   00DDH   A   
CCAPM4. . . . . . . . . . . . . . .  N NUMB   00DEH   A   
CCAPM5. . . . . . . . . . . . . . .  N NUMB   00DFH   A   
CCF0. . . . . . . . . . . . . . . .  B ADDR   00D8H.0 A   
CCF1. . . . . . . . . . . . . . . .  B ADDR   00D8H.1 A   
CCF2. . . . . . . . . . . . . . . .  B ADDR   00D8H.2 A   
CCF3. . . . . . . . . . . . . . . .  B ADDR   00D8H.3 A   
CCF4. . . . . . . . . . . . . . . .  B ADDR   00D8H.4 A   
CCF5. . . . . . . . . . . . . . . .  B ADDR   00D8H.5 A   
CCON. . . . . . . . . . . . . . . .  N NUMB   00D8H   A   
CF. . . . . . . . . . . . . . . . .  B ADDR   00D8H.7 A   
CH. . . . . . . . . . . . . . . . .  N NUMB   00F9H   A   
CL. . . . . . . . . . . . . . . . .  N NUMB   00E9H   A   
CMOD. . . . . . . . . . . . . . . .  N NUMB   00D9H   A   
CONST_ACTIONTYPE_GETRAND. . . . . .  N NUMB   0002H   A   
CONST_ACTIONTYPE_GETSECURE. . . . .  N NUMB   0000H   A   
CONST_ACTIONTYPE_SETMMI . . . . . .  N NUMB   0004H   A   
CONST_ACTIONTYPE_SETSECURE. . . . .  N NUMB   0001H   A   
CONST_ACTIONTYPE_TRANSFERCHANNEL. .  N NUMB   0003H   A   
CONST_ACT_H . . . . . . . . . . . .  N NUMB   0003H   A   
CONST_ACT_H_H . . . . . . . . . . .  N NUMB   0001H   A   
CONST_ACT_H_L . . . . . . . . . . .  N NUMB   0000H   A   
CONST_ACT_L . . . . . . . . . . . .  N NUMB   0001H   A   
CONST_ACT_L_H . . . . . . . . . . .  N NUMB   0006H   A   
CONST_ACT_L_L . . . . . . . . . . .  N NUMB   000AH   A   
CONST_ACT_M . . . . . . . . . . . .  N NUMB   0002H   A   
CONST_ACT_M_H . . . . . . . . . . .  N NUMB   0000H   A   
CONST_ACT_M_L . . . . . . . . . . .  N NUMB   0006H   A   
CONST_ACT_V . . . . . . . . . . . .  N NUMB   0002H   A   
CONST_BAUD_115200 . . . . . . . . .  N NUMB   0002H   A   
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    52

CONST_BAUD_115200PC . . . . . . . .  N NUMB   0003H   A   
CONST_BAUD_230000 . . . . . . . . .  N NUMB   0004H   A   
CONST_BAUD_38400. . . . . . . . . .  N NUMB   0001H   A   
CONST_BAUD_38400PC. . . . . . . . .  N NUMB   0005H   A   
CONST_BAUD_9600 . . . . . . . . . .  N NUMB   0000H   A   
CONST_BAUD_9600PC . . . . . . . . .  N NUMB   0006H   A   
CONST_BAUD_BITFULL12. . . . . . . .  N NUMB   000CH   A   
CONST_BAUD_BITFULL20. . . . . . . .  N NUMB   000EH   A   
CONST_BAUD_BITFULL28. . . . . . . .  N NUMB   0010H   A   
CONST_BAUD_BITFULL8 . . . . . . . .  N NUMB   000BH   A   
CONST_BAUD_BITHALF12. . . . . . . .  N NUMB   000CH   A   
CONST_BAUD_CURRENTBITFULL . . . . .  N NUMB   00B3H   A   
CONST_BAUD_CURRENTBITHALF . . . . .  N NUMB   0058H   A   
CONST_BAUD_FULL115200 . . . . . . .  N NUMB   001DH   A   
CONST_BAUD_FULL230000 . . . . . . .  N NUMB   000FH   A   
CONST_BAUD_FULL38400. . . . . . . .  N NUMB   005DH   A   
CONST_BAUD_FULL9600 . . . . . . . .  N NUMB   00B3H   A   
CONST_BAUD_HALF115200 . . . . . . .  N NUMB   000DH   A   
CONST_BAUD_HALF230000 . . . . . . .  N NUMB   0008H   A   
CONST_BAUD_HALF38400. . . . . . . .  N NUMB   002DH   A   
CONST_BAUD_HALF9600 . . . . . . . .  N NUMB   0058H   A   
CONST_BAUD_HAND115200 . . . . . . .  N NUMB   00F8H   A   
CONST_BAUD_HAND115200PC . . . . . .  N NUMB   00F3H   A   
CONST_BAUD_HAND230000 . . . . . . .  N NUMB   00FCH   A   
CONST_BAUD_HAND38400. . . . . . . .  N NUMB   00E9H   A   
CONST_BAUD_HAND38400PC. . . . . . .  N NUMB   00D8H   A   
CONST_BAUD_HAND9600 . . . . . . . .  N NUMB   00A3H   A   
CONST_BAUD_HAND9600PC . . . . . . .  N NUMB   0060H   A   
CONST_BLACK_H . . . . . . . . . . .  N NUMB   00FFH   A   
CONST_BLACK_L . . . . . . . . . . .  N NUMB   00FFH   A   
CONST_BSTLIMIT. . . . . . . . . . .  N NUMB   0008H   A   
CONST_BSTLIMIT02. . . . . . . . . .  N NUMB   0064H   A   
CONST_CARD_CONSUME. . . . . . . . .  N NUMB   0016H   A   
CONST_CARD_PASS . . . . . . . . . .  N NUMB   0017H   A   
CONST_CELLFILE_H. . . . . . . . . .  N NUMB   0000H   A   
CONST_CELLFILE_L. . . . . . . . . .  N NUMB   0009H   A   
CONST_DATA_VALUE1 . . . . . . . . .  N NUMB   000FH   A   
CONST_DATA_VALUE2 . . . . . . . . .  N NUMB   00DEH   A   
CONST_DSRC_ACTION . . . . . . . . .  N NUMB   0007H   A   
CONST_DSRC_ACTIONTYPE . . . . . . .  N NUMB   0009H   A   
CONST_DSRC_CHANNELIDICC . . . . . .  N NUMB   0001H   A   
CONST_DSRC_CHANNELIDSAM . . . . . .  N NUMB   0002H   A   
CONST_DSRC_CONTAIN. . . . . . . . .  N NUMB   000AH   A   
CONST_DSRC_DID. . . . . . . . . . .  N NUMB   0008H   A   
CONST_DSRC_FILDIDAPPKEY . . . . . .  N NUMB   0000H   A   
CONST_DSRC_FILDIDCONSUME. . . . . .  N NUMB   0002H   A   
CONST_DSRC_FILDIDHOLD . . . . . . .  N NUMB   0003H   A   
CONST_DSRC_FILDIDVEHICLE. . . . . .  N NUMB   0001H   A   
CONST_DSRC_FILL . . . . . . . . . .  N NUMB   000BH   A   
CONST_DSRC_HEAD . . . . . . . . . .  N NUMB   0006H   A   
CONST_DSRC_LLCCTRL. . . . . . . . .  N NUMB   0005H   A   
CONST_DSRC_MACCTRL. . . . . . . . .  N NUMB   0004H   A   
CONST_ESAMCELLFILE_H. . . . . . . .  N NUMB   00EFH   A   
CONST_ESAMCELLFILE_L. . . . . . . .  N NUMB   0007H   A   
CONST_ETC_INPUT . . . . . . . . . .  N NUMB   0003H   A   
CONST_FALSH_POWERH. . . . . . . . .  N NUMB   0072H   A   
CONST_FALSH_POWERL. . . . . . . . .  N NUMB   00F7H   A   
CONST_FALSH_PREFLAG02H. . . . . . .  N NUMB   0072H   A   
CONST_FALSH_PREFLAG02L. . . . . . .  N NUMB   00F5H   A   
CONST_FALSH_PREFLAG03H. . . . . . .  N NUMB   0072H   A   
CONST_FALSH_PREFLAG03L. . . . . . .  N NUMB   00F6H   A   
CONST_FALSH_PREFLAGH. . . . . . . .  N NUMB   0072H   A   
CONST_FALSH_PREFLAGL. . . . . . . .  N NUMB   00F4H   A   
CONST_FALSH_PREFLAGLEN. . . . . . .  N NUMB   0001H   A   
CONST_FLAG_INPUT. . . . . . . . . .  N NUMB   0000H   A   
CONST_FLAG_OUTPUT . . . . . . . . .  N NUMB   0001H   A   
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    53

CONST_FLASH_0002H . . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0002L . . . . . . . . .  N NUMB   0058H   A   
CONST_FLASH_0002LEN . . . . . . . .  N NUMB   0004H   A   
CONST_FLASH_0012H . . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0012L . . . . . . . . .  N NUMB   005CH   A   
CONST_FLASH_0012LEN . . . . . . . .  N NUMB   0028H   A   
CONST_FLASH_0015H . . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0015L . . . . . . . . .  N NUMB   0084H   A   
CONST_FLASH_0015LEN . . . . . . . .  N NUMB   002BH   A   
CONST_FLASH_0019GBLEN . . . . . . .  N NUMB   002BH   A   
CONST_FLASH_0019H . . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0019L . . . . . . . . .  N NUMB   00AFH   A   
CONST_FLASH_0019LEN . . . . . . . .  N NUMB   003CH   A   
CONST_FLASH_BEACONIDUNIXTIMEH . . .  N NUMB   0072H   A   
CONST_FLASH_BEACONIDUNIXTIMEL . . .  N NUMB   00ECH   A   
CONST_FLASH_BEACONIDUNIXTIMELEN . .  N NUMB   0008H   A   
CONST_FLASH_BLOCK01 . . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_CARDTYPELEN . . . . . .  N NUMB   0001H   A   
CONST_FLASH_FILELEN . . . . . . . .  N NUMB   00ECH   A   
CONST_FLASH_LASTCARDH . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_LASTCARDL . . . . . . .  N NUMB   00EBH   A   
CONST_FLASH_STARTHIGH . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_STARTLOW. . . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYS0020H. . . . . . . .  N NUMB   006CH   A   
CONST_FLASH_SYS0020L. . . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYS0020NUMH . . . . . .  N NUMB   006AH   A   
CONST_FLASH_SYS0020NUML . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYSINFOH. . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_SYSINFOL. . . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYSINFOLEN. . . . . . .  N NUMB   0058H   A   
CONST_GDO2_MCSM2. . . . . . . . . .  N NUMB   0002H   A   
CONST_GDO2_VALUE. . . . . . . . . .  N NUMB   0046H   A   
CONST_GSM_MAXNUM. . . . . . . . . .  N NUMB   00F0H   A   
CONST_GSM_NUM . . . . . . . . . . .  N NUMB   0008H   A   
CONST_GSM_PJNUM . . . . . . . . . .  N NUMB   0014H   A   
CONST_HANDSECOND. . . . . . . . . .  N NUMB   0015H   A   
CONST_HOLD_5823RX . . . . . . . . .  N NUMB   0000H   A   
CONST_HOLD_5823TX . . . . . . . . .  N NUMB   0001H   A   
CONST_INPUT_ISENABLE. . . . . . . .  N NUMB   0001H   A   
CONST_LHX_FLAG. . . . . . . . . . .  N NUMB   0002H   A   
CONST_MAX_RXNUM . . . . . . . . . .  N NUMB   0005H   A   
CONST_MCU_WKCTH . . . . . . . . . .  N NUMB   0008H   A   
CONST_MCU_WKCTL . . . . . . . . . .  N NUMB   00FFH   A   
CONST_MF_DECREMENT. . . . . . . . .  N NUMB   0002H   A   
CONST_MF_INCREMENT. . . . . . . . .  N NUMB   0003H   A   
CONST_MF_RC500DECREMENT . . . . . .  N NUMB   00C0H   A   
CONST_MF_RC500INCREMENT . . . . . .  N NUMB   00C1H   A   
CONST_MF_READ . . . . . . . . . . .  N NUMB   0000H   A   
CONST_MF_RESTOR . . . . . . . . . .  N NUMB   0004H   A   
CONST_MF_WRITE. . . . . . . . . . .  N NUMB   0001H   A   
CONST_MTC_INPUT . . . . . . . . . .  N NUMB   0001H   A   
CONST_PPS_115200. . . . . . . . . .  N NUMB   0018H   A   
CONST_PPS_230000. . . . . . . . . .  N NUMB   0096H   A   
CONST_PPS_38400 . . . . . . . . . .  N NUMB   0013H   A   
CONST_PPS_9600. . . . . . . . . . .  N NUMB   0010H   A   
CONST_PRO_OVERTIME2S. . . . . . . .  N NUMB   00FAH   A   
CONST_RTCOVERFLOW . . . . . . . . .  N NUMB   0090H   A   
CONST_RTC_OFF . . . . . . . . . . .  N NUMB   00FFH   A   
CONST_RTC_ON. . . . . . . . . . . .  N NUMB   0055H   A   
CONST_SOF . . . . . . . . . . . . .  N NUMB   0000H   A   
CONST_SOFTBYTESP. . . . . . . . . .  N NUMB   0014H   A   
CONST_SOFTFIRSTSCANTIME . . . . . .  N NUMB   0010H   A   
CONST_SOFTFIRSTSCANTIMEXX . . . . .  N NUMB   00FFH   A   
CONST_SOFTSECOND. . . . . . . . . .  N NUMB   0070H   A   
CONST_SSRC_FID. . . . . . . . . . .  N NUMB   000CH   A   
CONST_STATE_5823INIER . . . . . . .  N NUMB   0007H   A   
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    54

CONST_STATE_5823SLEEPER . . . . . .  N NUMB   0008H   A   
CONST_STATE_ACCEPTOVER. . . . . . .  N NUMB   0003H   A   
CONST_STATE_ACCEPTOVERLEN . . . . .  N NUMB   0004H   A   
CONST_STATE_ACTCARDINVALID. . . . .  N NUMB   0006H   A   
CONST_STATE_ACTIVEFAIL. . . . . . .  N NUMB   0004H   A   
CONST_STATE_AUTHER. . . . . . . . .  N NUMB   0006H   A   
CONST_STATE_BASE01ANTICOLL. . . . .  N NUMB   001DH   A   
CONST_STATE_BASE01CONTACT . . . . .  N NUMB   0015H   A   
CONST_STATE_BASE01ESAMDF01. . . . .  N NUMB   0014H   A   
CONST_STATE_BASE01RATS. . . . . . .  N NUMB   001FH   A   
CONST_STATE_BASE01RE. . . . . . . .  N NUMB   001CH   A   
CONST_STATE_BASE01SEL . . . . . . .  N NUMB   001EH   A   
CONST_STATE_BASE02ANTICOLL. . . . .  N NUMB   0019H   A   
CONST_STATE_BASE02CONTACT . . . . .  N NUMB   0016H   A   
CONST_STATE_BASE02RATS. . . . . . .  N NUMB   001BH   A   
CONST_STATE_BASE02RE. . . . . . . .  N NUMB   0018H   A   
CONST_STATE_BASE02SEL . . . . . . .  N NUMB   001AH   A   
CONST_STATE_BASEESAMDF01. . . . . .  N NUMB   000BH   A   
CONST_STATE_BASEN01INIT . . . . . .  N NUMB   0013H   A   
CONST_STATE_BASENINIT . . . . . . .  N NUMB   000AH   A   
CONST_STATE_CARDPREDEAL0002 . . . .  N NUMB   000DH   A   
CONST_STATE_CARDPREDEAL0012 . . . .  N NUMB   000EH   A   
CONST_STATE_CARDPREDEAL0015 . . . .  N NUMB   000FH   A   
CONST_STATE_CARDPREDEAL0019 . . . .  N NUMB   0010H   A   
CONST_STATE_CARDPREDEAL1001 . . . .  N NUMB   000CH   A   
CONST_STATE_CARDPREDEAL3F00 . . . .  N NUMB   0011H   A   
CONST_STATE_CARDPREDEAL81 . . . . .  N NUMB   0012H   A   
CONST_STATE_EXMEMORYER. . . . . . .  N NUMB   0021H   A   
CONST_STATE_EXMEMORYER02. . . . . .  N NUMB   0022H   A   
CONST_STATE_FALSE . . . . . . . . .  N NUMB   00FFH   A   
CONST_STATE_GETSECURESELFILEER. . .  N NUMB   0009H   A   
CONST_STATE_ILLEGALACTCARD. . . . .  N NUMB   0005H   A   
CONST_STATE_ILLEGALINPUTCARD. . . .  N NUMB   0002H   A   
CONST_STATE_INPUTCARDINVALID. . . .  N NUMB   0003H   A   
CONST_STATE_INPUTFAIL . . . . . . .  N NUMB   0001H   A   
CONST_STATE_MEMORYER. . . . . . . .  N NUMB   0020H   A   
CONST_STATE_RSTCPUER. . . . . . . .  N NUMB   0005H   A   
CONST_STATE_SERIALACCPET. . . . . .  N NUMB   0001H   A   
CONST_STATE_SERIALOVERTIME. . . . .  N NUMB   0002H   A   
CONST_STATE_TEST. . . . . . . . . .  N NUMB   0017H   A   
CONST_STATE_TRUE. . . . . . . . . .  N NUMB   0000H   A   
CONST_SYS_55. . . . . . . . . . . .  N NUMB   0055H   A   
CONST_SYS_AA. . . . . . . . . . . .  N NUMB   00AAH   A   
CONST_SYS_OBUIDLEN. . . . . . . . .  N NUMB   0004H   A   
CONST_SYS_POWERONTIMER. . . . . . .  N NUMB   000AH   A   
CONST_SYS_PREFLAG . . . . . . . . .  N NUMB   0088H   A   
CONST_SYS_RTCOVERTIME . . . . . . .  N NUMB   0064H   A   
CONST_SYS_TRADECONFINE. . . . . . .  N NUMB   00FFH   A   
CONST_TIMEER02. . . . . . . . . . .  N NUMB   0001H   A   
CONST_TIMEER03. . . . . . . . . . .  N NUMB   00FEH   A   
CONST_TIMEER04. . . . . . . . . . .  N NUMB   0001H   A   
CONST_VSTLIMIT. . . . . . . . . . .  N NUMB   00FFH   A   
CONST_WHITE_H . . . . . . . . . . .  N NUMB   0000H   A   
CONST_WHITE_L . . . . . . . . . . .  N NUMB   0031H   A   
CONST_WORKSTAION_0. . . . . . . . .  N NUMB   0000H   A   
CONST_WORKSTAION_1. . . . . . . . .  N NUMB   0001H   A   
CONST_WORKSTAION_2. . . . . . . . .  N NUMB   0002H   A   
CONST_WORKSTAION_3. . . . . . . . .  N NUMB   0003H   A   
CR. . . . . . . . . . . . . . . . .  B ADDR   00D8H.6 A   
DATA_OBUID. . . . . . . . . . . . .  D ADDR   -----       EXT
DATA_RXBUF. . . . . . . . . . . . .  D ADDR   -----       EXT
DPH . . . . . . . . . . . . . . . .  D ADDR   0083H   A   
DPL . . . . . . . . . . . . . . . .  D ADDR   0082H   A   
EPCAI . . . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
EPCA_LVD. . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
IE. . . . . . . . . . . . . . . . .  D ADDR   00A8H   A   
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    55

IE2 . . . . . . . . . . . . . . . .  N NUMB   00AFH   A   
IPH . . . . . . . . . . . . . . . .  N NUMB   00B7H   A   
ISP_CONTR . . . . . . . . . . . . .  N NUMB   00C7H   A   
P0. . . . . . . . . . . . . . . . .  D ADDR   0080H   A   
P1. . . . . . . . . . . . . . . . .  D ADDR   0090H   A   
P2. . . . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P3. . . . . . . . . . . . . . . . .  D ADDR   00B0H   A   
P4. . . . . . . . . . . . . . . . .  N NUMB   00C0H   A   
PCA_PWM0. . . . . . . . . . . . . .  N NUMB   00F2H   A   
PCA_PWM1. . . . . . . . . . . . . .  N NUMB   00F3H   A   
PCA_PWM2. . . . . . . . . . . . . .  N NUMB   00F4H   A   
PCA_PWM3. . . . . . . . . . . . . .  N NUMB   00F5H   A   
PCA_PWM4. . . . . . . . . . . . . .  N NUMB   00F6H   A   
PCA_PWM5. . . . . . . . . . . . . .  N NUMB   00F7H   A   
PIN_522_MISO. . . . . . . . . . . .  B ADDR   00C0H.1 A   
PIN_522_MOSI. . . . . . . . . . . .  B ADDR   00C0H.6 A   
PIN_522_RST . . . . . . . . . . . .  B ADDR   0080H.4 A   
PIN_522_SCLK. . . . . . . . . . . .  B ADDR   0080H.7 A   
PIN_522_SS. . . . . . . . . . . . .  B ADDR   0080H.6 A   
PIN_5823BK_CS . . . . . . . . . . .  B ADDR   0090H.0 A   
PIN_5823BK_IRQ. . . . . . . . . . .  B ADDR   0090H.2 A   
PIN_5823BK_MISO . . . . . . . . . .  B ADDR   0080H.0 A   
PIN_5823BK_MOSI . . . . . . . . . .  B ADDR   0080H.1 A   
PIN_5823BK_SCLK . . . . . . . . . .  B ADDR   00C0H.2 A   
PIN_BELL_01 . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_BELL_02 . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_BK_CE . . . . . . . . . . . . .  B ADDR   0090H.1 A   
PIN_CARD_EXIST. . . . . . . . . . .  B ADDR   00B0H.3 A   
PIN_ESAM_RST. . . . . . . . . . . .  B ADDR   0080H.5 A   
PIN_ESAM_RX . . . . . . . . . . . .  B ADDR   0080H.3 A   
PIN_ESAM_TX . . . . . . . . . . . .  B ADDR   0080H.3 A   
PIN_ES_RST. . . . . . . . . . . . .  B ADDR   00A0H.6 A   
PIN_GRE . . . . . . . . . . . . . .  B ADDR   00C0H.4 A   
PIN_LCD_CS. . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_DC. . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_RST . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_SCL . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_SDA . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_OUTPUT_CLK. . . . . . . . . . .  B ADDR   00B0H.4 A   
PIN_PWRDWN. . . . . . . . . . . . .  B ADDR   00A0H.4 A   
PIN_PWRDWN_LCD. . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_PWR_GSM . . . . . . . . . . . .  B ADDR   00A0H.3 A   
PIN_PWR_LOWIO . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_PWR_SE. . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_RED . . . . . . . . . . . . . .  B ADDR   00C0H.5 A   
PIN_SE_IO1. . . . . . . . . . . . .  B ADDR   00B0H.4 A   
PIN_SOFTSERIALRX. . . . . . . . . .  B ADDR   00B0H.0 A   
PIN_SOFTSERIALTXH . . . . . . . . .  B ADDR   00B0H.1 A   
PIN_SW. . . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_UART2_RX. . . . . . . . . . . .  B ADDR   0090H.6 A   
PIN_UART2_TX. . . . . . . . . . . .  B ADDR   0090H.7 A   
PIN_UNFIX . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
PIN_WAVE_CHANNEL1 . . . . . . . . .  B ADDR   0080H.2 A   
PIN_WAVE_RX . . . . . . . . . . . .  B ADDR   0080H.2 A   
READ_BURST. . . . . . . . . . . . .  N NUMB   00C0H   A   
REG_51_AUXR1. . . . . . . . . . . .  N NUMB   00A2H   A   
REG_5412AD_AUXR . . . . . . . . . .  N NUMB   008EH   A   
REG_5412AD_P0M0 . . . . . . . . . .  N NUMB   0094H   A   
REG_5412AD_P0M1 . . . . . . . . . .  N NUMB   0093H   A   
REG_5412AD_P1M0 . . . . . . . . . .  N NUMB   0092H   A   
REG_5412AD_P1M1 . . . . . . . . . .  N NUMB   0091H   A   
REG_5412AD_P2M0 . . . . . . . . . .  N NUMB   0096H   A   
REG_5412AD_P2M1 . . . . . . . . . .  N NUMB   0095H   A   
REG_5412AD_P3M0 . . . . . . . . . .  N NUMB   00B2H   A   
REG_5412AD_P3M1 . . . . . . . . . .  N NUMB   00B1H   A   
REG_5412AD_P4M0 . . . . . . . . . .  N NUMB   00B4H   A   
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    56

REG_5412AD_P4M1 . . . . . . . . . .  N NUMB   00B3H   A   
REG_5412AD_P4SW . . . . . . . . . .  N NUMB   00BBH   A   
REG_5412AD_SPCTL. . . . . . . . . .  N NUMB   0085H   A   
REG_5412AD_SPDAT. . . . . . . . . .  N NUMB   0086H   A   
REG_5412AD_SPSTAT . . . . . . . . .  N NUMB   0084H   A   
REG_MCU_WKCTH . . . . . . . . . . .  N NUMB   00ABH   A   
REG_MCU_WKCTL . . . . . . . . . . .  N NUMB   00AAH   A   
REG_RC522_BITFRAMINGREG . . . . . .  N NUMB   000DH   A   
REG_RC522_COLLREG . . . . . . . . .  N NUMB   000EH   A   
REG_RC522_COMIENREG . . . . . . . .  N NUMB   0002H   A   
REG_RC522_COMIRQREG . . . . . . . .  N NUMB   0004H   A   
REG_RC522_COMMANDREG. . . . . . . .  N NUMB   0001H   A   
REG_RC522_CONTROLREG. . . . . . . .  N NUMB   000CH   A   
REG_RC522_CRCRESULTREGH . . . . . .  N NUMB   0021H   A   
REG_RC522_CRCRESULTREGL . . . . . .  N NUMB   0022H   A   
REG_RC522_CWGSPREG. . . . . . . . .  N NUMB   0028H   A   
REG_RC522_DEMODREG. . . . . . . . .  N NUMB   0019H   A   
REG_RC522_DIVIENREG . . . . . . . .  N NUMB   0003H   A   
REG_RC522_DIVIRQREG . . . . . . . .  N NUMB   0005H   A   
REG_RC522_ERRORREG. . . . . . . . .  N NUMB   0006H   A   
REG_RC522_FIFODATAREG . . . . . . .  N NUMB   0009H   A   
REG_RC522_FIFOLEVELREG. . . . . . .  N NUMB   000AH   A   
REG_RC522_GSNREG. . . . . . . . . .  N NUMB   0027H   A   
REG_RC522_MIFAREREG . . . . . . . .  N NUMB   001CH   A   
REG_RC522_MODEREG . . . . . . . . .  N NUMB   0011H   A   
REG_RC522_MODGSPREG . . . . . . . .  N NUMB   0029H   A   
REG_RC522_MODWIDTHREG . . . . . . .  N NUMB   0024H   A   
REG_RC522_RC522PAGE . . . . . . . .  N NUMB   0000H   A   
REG_RC522_RFCFGREG. . . . . . . . .  N NUMB   0026H   A   
REG_RC522_RFU . . . . . . . . . . .  N NUMB   000FH   A   
REG_RC522_RXMODEREG . . . . . . . .  N NUMB   0013H   A   
REG_RC522_RXSELREG. . . . . . . . .  N NUMB   0017H   A   
REG_RC522_RXTHRESHOLDREG. . . . . .  N NUMB   0018H   A   
REG_RC522_SERIALSPEEDREG. . . . . .  N NUMB   001FH   A   
REG_RC522_STATUS1REG. . . . . . . .  N NUMB   0007H   A   
REG_RC522_STATUS2REG. . . . . . . .  N NUMB   0008H   A   
REG_RC522_TCOUNTERVALUEREGH . . . .  N NUMB   002EH   A   
REG_RC522_TCOUNTERVALUEREGL . . . .  N NUMB   002FH   A   
REG_RC522_TMODEREG. . . . . . . . .  N NUMB   002AH   A   
REG_RC522_TPRESCALERREG . . . . . .  N NUMB   002BH   A   
REG_RC522_TRELOADREGH . . . . . . .  N NUMB   002CH   A   
REG_RC522_TRELOADREGL . . . . . . .  N NUMB   002DH   A   
REG_RC522_TXAUTOREG . . . . . . . .  N NUMB   0015H   A   
REG_RC522_TXCONTROLREG. . . . . . .  N NUMB   0014H   A   
REG_RC522_TXMODEREG . . . . . . . .  N NUMB   0012H   A   
REG_RC522_TXSELREG. . . . . . . . .  N NUMB   0016H   A   
REG_RC522_WATERLEVELREG . . . . . .  N NUMB   000BH   A   
REG_SYS_BRT . . . . . . . . . . . .  N NUMB   009CH   A   
REG_WAKECLK0. . . . . . . . . . . .  N NUMB   008FH   A   
REG_WAKECLK_04. . . . . . . . . . .  B ADDR   00D8H.4 A   
REG_WAKECLK_05. . . . . . . . . . .  B ADDR   00D8H.5 A   
REG_WAKE_CLK0 . . . . . . . . . . .  N NUMB   008FH   A   
REG_WDT_CONTR . . . . . . . . . . .  N NUMB   00C1H   A   
RELOAD2_CONTR . . . . . . . . . . .  N NUMB   00EAH   A   
S2BUF . . . . . . . . . . . . . . .  N NUMB   009BH   A   
S2CON . . . . . . . . . . . . . . .  N NUMB   009AH   A   
STR_CARDAPP_88. . . . . . . . . . .  C ADDR   000CH   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_88_02 . . . . . . . . .  C ADDR   0012H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_88_03 . . . . . . . . .  C ADDR   0018H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_88_04 . . . . . . . . .  C ADDR   001EH   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_88_05 . . . . . . . . .  C ADDR   0024H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_88_06 . . . . . . . . .  C ADDR   002AH   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_D681. . . . . . . . . .  C ADDR   0030H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_D68102. . . . . . . . .  C ADDR   0036H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_D68103. . . . . . . . .  C ADDR   003CH   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_D68104. . . . . . . . .  C ADDR   0042H   R   SEG=?CO?CARDAPP?FLASHSTR
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    57

STR_CARDAPP_D68105. . . . . . . . .  C ADDR   0048H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_D68106. . . . . . . . .  C ADDR   004EH   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_PIN . . . . . . . . . .  C ADDR   0006H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_RAND. . . . . . . . . .  C ADDR   0000H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_RX001A. . . . . . . . .  C ADDR   0076H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_WX001A. . . . . . . . .  C ADDR   007CH   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_XOR04D68100 . . . . . .  C ADDR   0054H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_XOR04D68112 . . . . . .  C ADDR   0063H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_XOR04D6811A . . . . . .  C ADDR   0059H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_XOR04D6813A . . . . . .  C ADDR   005EH   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_XOR04D69D31 . . . . . .  C ADDR   0068H   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_XOR04D69D4F . . . . . .  C ADDR   006DH   R   SEG=?CO?CARDAPP?FLASHSTR
STR_CARDAPP_XOR3E267A . . . . . . .  C ADDR   0072H   R   SEG=?CO?CARDAPP?FLASHSTR
TI_CCXXX0_ADDR. . . . . . . . . . .  N NUMB   0009H   A   
TI_CCXXX0_AGCCTRL0. . . . . . . . .  N NUMB   001DH   A   
TI_CCXXX0_AGCCTRL1. . . . . . . . .  N NUMB   001CH   A   
TI_CCXXX0_AGCCTRL2. . . . . . . . .  N NUMB   001BH   A   
TI_CCXXX0_AGCTEST . . . . . . . . .  N NUMB   002BH   A   
TI_CCXXX0_BSCFG . . . . . . . . . .  N NUMB   001AH   A   
TI_CCXXX0_CHANNR. . . . . . . . . .  N NUMB   000AH   A   
TI_CCXXX0_DEVIATN . . . . . . . . .  N NUMB   0015H   A   
TI_CCXXX0_FIFOTHR . . . . . . . . .  N NUMB   0003H   A   
TI_CCXXX0_FOCCFG. . . . . . . . . .  N NUMB   0019H   A   
TI_CCXXX0_FREND0. . . . . . . . . .  N NUMB   0022H   A   
TI_CCXXX0_FREND1. . . . . . . . . .  N NUMB   0021H   A   
TI_CCXXX0_FREQ0 . . . . . . . . . .  N NUMB   000FH   A   
TI_CCXXX0_FREQ1 . . . . . . . . . .  N NUMB   000EH   A   
TI_CCXXX0_FREQ2 . . . . . . . . . .  N NUMB   000DH   A   
TI_CCXXX0_FREQEST . . . . . . . . .  N NUMB   0032H   A   
TI_CCXXX0_FSCAL0. . . . . . . . . .  N NUMB   0026H   A   
TI_CCXXX0_FSCAL1. . . . . . . . . .  N NUMB   0025H   A   
TI_CCXXX0_FSCAL2. . . . . . . . . .  N NUMB   0024H   A   
TI_CCXXX0_FSCAL3. . . . . . . . . .  N NUMB   0023H   A   
TI_CCXXX0_FSCTRL0 . . . . . . . . .  N NUMB   000CH   A   
TI_CCXXX0_FSCTRL1 . . . . . . . . .  N NUMB   000BH   A   
TI_CCXXX0_FSTEST. . . . . . . . . .  N NUMB   0029H   A   
TI_CCXXX0_IOCFG0. . . . . . . . . .  N NUMB   0002H   A   
TI_CCXXX0_IOCFG1. . . . . . . . . .  N NUMB   0001H   A   
TI_CCXXX0_IOCFG2. . . . . . . . . .  N NUMB   0000H   A   
TI_CCXXX0_LQI . . . . . . . . . . .  N NUMB   0033H   A   
TI_CCXXX0_MARCSTATE . . . . . . . .  N NUMB   0035H   A   
TI_CCXXX0_MCSM0 . . . . . . . . . .  N NUMB   0018H   A   
TI_CCXXX0_MCSM1 . . . . . . . . . .  N NUMB   0017H   A   
TI_CCXXX0_MCSM2 . . . . . . . . . .  N NUMB   0016H   A   
TI_CCXXX0_MDMCFG0 . . . . . . . . .  N NUMB   0014H   A   
TI_CCXXX0_MDMCFG1 . . . . . . . . .  N NUMB   0013H   A   
TI_CCXXX0_MDMCFG2 . . . . . . . . .  N NUMB   0012H   A   
TI_CCXXX0_MDMCFG3 . . . . . . . . .  N NUMB   0011H   A   
TI_CCXXX0_MDMCFG4 . . . . . . . . .  N NUMB   0010H   A   
TI_CCXXX0_NUM_RXBYTES . . . . . . .  N NUMB   007FH   A   
TI_CCXXX0_PARTNUM . . . . . . . . .  N NUMB   0030H   A   
TI_CCXXX0_PATABLE . . . . . . . . .  N NUMB   003EH   A   
TI_CCXXX0_PKTCTRL0. . . . . . . . .  N NUMB   0008H   A   
TI_CCXXX0_PKTCTRL1. . . . . . . . .  N NUMB   0007H   A   
TI_CCXXX0_PKTLEN. . . . . . . . . .  N NUMB   0006H   A   
TI_CCXXX0_PKTSTATUS . . . . . . . .  N NUMB   0038H   A   
TI_CCXXX0_PTEST . . . . . . . . . .  N NUMB   002AH   A   
TI_CCXXX0_RCCTRL0 . . . . . . . . .  N NUMB   0028H   A   
TI_CCXXX0_RCCTRL1 . . . . . . . . .  N NUMB   0027H   A   
TI_CCXXX0_RSSI. . . . . . . . . . .  N NUMB   0034H   A   
TI_CCXXX0_RXBYTES . . . . . . . . .  N NUMB   003BH   A   
TI_CCXXX0_RXFIFO. . . . . . . . . .  N NUMB   003FH   A   
TI_CCXXX0_SAFC. . . . . . . . . . .  N NUMB   0037H   A   
TI_CCXXX0_SCAL. . . . . . . . . . .  N NUMB   0033H   A   
TI_CCXXX0_SFRX. . . . . . . . . . .  N NUMB   003AH   A   
TI_CCXXX0_SFTX. . . . . . . . . . .  N NUMB   003BH   A   
A51 MACRO ASSEMBLER  CARDAPP                                                              10/09/2016 12:08:02 PAGE    58

TI_CCXXX0_SIDLE . . . . . . . . . .  N NUMB   0036H   A   
TI_CCXXX0_SNOP. . . . . . . . . . .  N NUMB   003DH   A   
TI_CCXXX0_SPWD. . . . . . . . . . .  N NUMB   0039H   A   
TI_CCXXX0_SRES. . . . . . . . . . .  N NUMB   0030H   A   
TI_CCXXX0_SRX . . . . . . . . . . .  N NUMB   0034H   A   
TI_CCXXX0_STX . . . . . . . . . . .  N NUMB   0035H   A   
TI_CCXXX0_SWOR. . . . . . . . . . .  N NUMB   0038H   A   
TI_CCXXX0_SWORRST . . . . . . . . .  N NUMB   003CH   A   
TI_CCXXX0_SXOFF . . . . . . . . . .  N NUMB   0032H   A   
TI_CCXXX0_SYNC0 . . . . . . . . . .  N NUMB   0005H   A   
TI_CCXXX0_SYNC1 . . . . . . . . . .  N NUMB   0004H   A   
TI_CCXXX0_TEST0 . . . . . . . . . .  N NUMB   002EH   A   
TI_CCXXX0_TEST1 . . . . . . . . . .  N NUMB   002DH   A   
TI_CCXXX0_TEST2 . . . . . . . . . .  N NUMB   002CH   A   
TI_CCXXX0_TXBYTES . . . . . . . . .  N NUMB   003AH   A   
TI_CCXXX0_TXFIFO. . . . . . . . . .  N NUMB   003FH   A   
TI_CCXXX0_VCO_VC_DAC. . . . . . . .  N NUMB   0039H   A   
TI_CCXXX0_VERSION . . . . . . . . .  N NUMB   0031H   A   
TI_CCXXX0_WORCTRL . . . . . . . . .  N NUMB   0020H   A   
TI_CCXXX0_WOREVT0 . . . . . . . . .  N NUMB   001FH   A   
TI_CCXXX0_WOREVT1 . . . . . . . . .  N NUMB   001EH   A   
TI_CCXXX0_WORTIME0. . . . . . . . .  N NUMB   0037H   A   
TI_CCXXX0_WORTIME1. . . . . . . . .  N NUMB   0036H   A   
WAKE_CLKO . . . . . . . . . . . . .  N NUMB   008FH   A   
WKO_BK. . . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
XDATA_HOLD. . . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_TXBUF . . . . . . . . . . . .  X ADDR   -----       EXT
_ERASEFLASH . . . . . . . . . . . .  C ADDR   -----       EXT
_FUN_CARDAPP_ACTIVEOBU. . . . . . .  C ADDR   05F0H   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_CARDCHANNEL. . . . . .  C ADDR   0172H   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_DECCOUNTER . . . . . .  C ADDR   0139H   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_GDFXOBU. . . . . . . .  C ADDR   01DDH   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_GETBALANCE . . . . . .  C ADDR   00E3H   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_INNERCARDCHANNEL . . .  C ADDR   018EH   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_ISINORACT. . . . . . .  C ADDR   01A4H   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_READBINARY . . . . . .  C ADDR   008FH   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_READBINARY02 . . . . .  C ADDR   00BAH   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_READRECORD . . . . . .  C ADDR   010CH   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_READVEHICLEINFO. . . .  C ADDR   016FH   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_SELECTFILE . . . . . .  C ADDR   002AH   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_UPDATEBINARY . . . . .  C ADDR   0000H   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_WRITEBINARY. . . . . .  C ADDR   016CH   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_XXDATAFLASHXOR . . . .  C ADDR   0837H   R   SEG=?PR?CARDAPP?MATER
_FUN_CARDAPP_XXDATAXOR. . . . . . .  C ADDR   0816H   R   SEG=?PR?CARDAPP?MATER
_FUN_CONTACT_CHANGEBAUD . . . . . .  C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL. . . . . . . .  C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL0 . . . . . . .  C ADDR   -----       EXT
_FUN_CONTACT_CHANNEL1 . . . . . . .  C ADDR   -----       EXT
_FUN_CONTACT_INIT . . . . . . . . .  C ADDR   -----       EXT
_FUN_CONTACT_PPS. . . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DATATOXDATA. . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_FLASHTODATA. . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_FLASHTOXDATA . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_XDATATODATA. . . . . . . .  C ADDR   -----       EXT
_FUN_MF_CHANNEL . . . . . . . . . .  C ADDR   -----       EXT
_FUN_PROCARD_CHANNEL. . . . . . . .  C ADDR   -----       EXT
_FUN_TESTCARDAPP_SELECTFILE . . . .  C ADDR   0060H   R   SEG=?PR?CARDAPP?MATER
_FUN_TESTCONTACT_CHANNEL0 . . . . .  C ADDR   -----       EXT
_FUN_TEST_DISPLAY . . . . . . . . .  C ADDR   -----       EXT
_WRFLASHXR. . . . . . . . . . . . .  C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
