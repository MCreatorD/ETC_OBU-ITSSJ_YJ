A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE     1


MACRO ASSEMBLER A51 V8.00d
OBJECT MODULE PLACED IN HDLC.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE HDLC.ASM SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     ;**********************************************************************
                       2     ;ÃèÊö£ºHDLCÍ¨Ñ¶³ÌÐò¼¯
                       3     ;º¯ÊÉêÃ÷
                       4     ;×ö³ÉÏÂÐÐ256K; ÉÏÐÐ512K
                       5     ;_FUN_HDLC_RX                                   ---     HDLC½ÓÊÕº¯Ê
                       6     ;       ¸½ÊôÐò¶Î:;SEG_HDLC_GETF1Cycle           ---     ²éÑ¯µÚÒ»¸ö"1"µÄÂö³å
                       7     ;       ¸½ÊôÐò¶Î:;SEG_RX_GET7E                  ---     ²éÑ¯µÚÒ»¸ö"7E"µÄÂö³å
                       8     ;       ¸½ÊôÐò¶Î:;SEG_RX_GETCycle               ---     ËÑË÷Âö³å
                       9     ;_FUN_HDLC_RXForBST                             ---     HDLC½ÓÊÕº¯Ê(½ÓÊÕµÚÒ»¸öBST×¨ÓÃ)
                      10     ;_FUN_HDLC_TX                                   ---     HDLC·¢ËÍº¯Ê
                      11     ;       ¸½ÊôÐò¶Î:SEG_HDLC_TX7E                  ---     ·¢ËÍ7E
                      12     ;_FUN_HDLC_CHANGECHANNEL                        ---     ¸ü¸ÄÍ¨µÀ
                      13     ;**********************************************************************
                      14     ;Rx_En                  ½ÓÊÕÊ¹ÄÜ»ò½ûÖ¹
                      15     ;Tx_Carrier_En          ·¢ËÍÔØ²¨Ê¹ÄÜ»ò½ûÖ¹
                      16     ;_Power_Up              Ê¹ÄÜÉÏµç»ò¹Ø±ÕÉÏµç
                      17     ;Wake_up                        »½ÐÑÊ¹ÄÜ»ò½ûÓÃ
                      18     ;_Enter_Idle_Mode       ½øÈë´»úÄ£Ê½
                      19     ;_Enter_Sleep_Mode      ½øÈëË¯ÃßÄ£Ê½
                      20     ;_Enter_Receive_Mode    ½øÈë½ÓÊÕÄ£Ê½
                      21     ;_Enter_TX_Carrier_Mode ½øÈë·¢ÔØ²¨Ä£Ê½
                      22     ;_Enable_Wake_Up                ½øÈë»½ÐÑÄ£Ê½
                      23     ;_Disable_Wake_Up       ¹Ø±Õ»½ÐÑÄ£Ê½
                      24     ;_TXDIOpin              ·¢ËÍDIO pin Ê¾ÝÁ÷ÅäÖÃ
                      25     ;_BK_SPIRST             ¸´Î»»òÊ¹ÄÜBK5822 SPI¼Ä´æÆ÷
                      26     ;_BK5822_RST            ¸´Î»BK5822
                      27     ;_AutoASKReg            ³õÊ¼»¯BK5822
                      28     ;_FUN_HDLC_5822Init     
                      29     ;wkoup_sj
                      30     ;_FUN_HDLC_Frexiaodui
                      31     ;**********************************************************************
                      32             
                      33     NAME    HDLC
                      34     
                      35     ;$include (HDLC.INC)
                +1    36     ;---¶Î¶¨Òå---
                +1    37     ?pr?HDLC?Mater  SEGMENT CODE
                +1    38     ?co?HDLC?FLASHSTR       SEGMENT CODE
                +1    39     EXTRN   BIT(BIT_CHANNELFLAG)
                +1    40     ;EXTRN  BIT(BIT_HDLCRXS)
                +1    41     ;EXTRN  BIT(BIT_HDLC_BST_FIRST)
                +1    42     EXTRN   BIT(BIT_BUFADDR)
                +1    43     EXTRN   BIT(BIT_BST)
                +1    44     EXTRN   BIT(BIT_TMP)
                +1    45     
                +1    46     EXTRN   DATA(DATA_RXBUF)
                +1    47     EXTRN   DATA(DATA_PowerONTimer)
                +1    48     EXTRN   DATA(DATA_DSRCTXLEN,DATA_DSRCRXLEN)
                +1    49     EXTRN   XDATA(XDATA_TOTALNUML)
                +1    50     EXTRN   XDATA(XDATA_HOLD)
                +1    51     
                +1    52     EXTRN   CODE(_FUN_LIB_DELAY)
                +1    53     ;EXTRN  CODE(_getrsuadcrc)
                +1    54     EXTRN   CODE(_FUN_LIB_BEEP)
                +1    55     EXTRN   CODE(_getnewcrc_xr)
                +1    56     EXTRN   CODE(_getnewcrc)
                +1    57     EXTRN   CODE(ap_start)
                +1    58     
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE     2

                +1    59     EXTRN   CODE(_FUN_LIB_DELAY50)
                +1    60     EXTRN   CODE(_FUN_LIB_DELAY49)
                +1    61     EXTRN   CODE(_FUN_LIB_DELAY48)
                +1    62     EXTRN   CODE(_FUN_LIB_DELAY47)
                +1    63     EXTRN   CODE(_FUN_LIB_DELAY46)
                +1    64     EXTRN   CODE(_FUN_LIB_DELAY45)
                +1    65     EXTRN   CODE(_FUN_LIB_DELAY44)
                +1    66     EXTRN   CODE(_FUN_LIB_DELAY43)
                +1    67     EXTRN   CODE(_FUN_LIB_DELAY42)
                +1    68     EXTRN   CODE(_FUN_LIB_DELAY41)
                +1    69     EXTRN   CODE(_FUN_LIB_DELAY40)
                +1    70     EXTRN   CODE(_FUN_LIB_DELAY39)
                +1    71     EXTRN   CODE(_FUN_LIB_DELAY38)
                +1    72     EXTRN   CODE(_FUN_LIB_DELAY37)
                +1    73     EXTRN   CODE(_FUN_LIB_DELAY36)
                +1    74     EXTRN   CODE(_FUN_LIB_DELAY35)
                +1    75     EXTRN   CODE(_FUN_LIB_DELAY34)
                +1    76     EXTRN   CODE(_FUN_LIB_DELAY33)
                +1    77     EXTRN   CODE(_FUN_LIB_DELAY32)
                +1    78     EXTRN   CODE(_FUN_LIB_DELAY31)
                +1    79     EXTRN   CODE(_FUN_LIB_DELAY30)
                +1    80     EXTRN   CODE(_FUN_LIB_DELAY29)
                +1    81     EXTRN   CODE(_FUN_LIB_DELAY28)
                +1    82     EXTRN   CODE(_FUN_LIB_DELAY27)
                +1    83     EXTRN   CODE(_FUN_LIB_DELAY26)
                +1    84     EXTRN   CODE(_FUN_LIB_DELAY25)
                +1    85     EXTRN   CODE(_FUN_LIB_DELAY24)
                +1    86     EXTRN   CODE(_FUN_LIB_DELAY23)
                +1    87     EXTRN   CODE(_FUN_LIB_DELAY22)
                +1    88     EXTRN   CODE(_FUN_LIB_DELAY21)
                +1    89     EXTRN   CODE(_FUN_LIB_DELAY20)
                +1    90     EXTRN   CODE(_FUN_LIB_DELAY19)
                +1    91     EXTRN   CODE(_FUN_LIB_DELAY18)
                +1    92     EXTRN   CODE(_FUN_LIB_DELAY17)
                +1    93     EXTRN   CODE(_FUN_LIB_DELAY16)
                +1    94     EXTRN   CODE(_FUN_LIB_DELAY15)
                +1    95     EXTRN   CODE(_FUN_LIB_DELAY14)
                +1    96     EXTRN   CODE(_FUN_LIB_DELAY13)
                +1    97     EXTRN   CODE(_FUN_LIB_DELAY12)
                +1    98     EXTRN   CODE(_FUN_LIB_DELAY11)
                +1    99     EXTRN   CODE(_FUN_LIB_DELAY10)
                +1   100     EXTRN   CODE(_FUN_LIB_FLASHTOXDATA)
                +1   101     ;EXTRN  CODE(_FUN_LIB_POWERDOWN)
                +1   102     
                +1   103     ;--- Êä³ö¶¨Òå ---
                +1   104     PUBLIC  _FUN_HOLD_DIOPOINT
                +1   105     PUBLIC  _FUN_HDLC_RX                    ;HDLC½ÓÊÕº¯Ê
                +1   106     ;PUBLIC _FUN_HDLC_RXForBST              ;HDLC½ÓÊÕº¯Ê(½ÓÊÕµÚÒ»¸öBST×¨ÓÃ)
                +1   107     PUBLIC  _FUN_HDLC_TX                    ;HDLC·¢ËÍº¯Ê
                +1   108     PUBLIC  _FUN_HDLC_CHANGECHANNEL         ;¸ü¸ÄÍ¨µÀ
                +1   109     PUBLIC  _FUN_HDLC_5830Init
                +1   110     ;PUBLIC _FUN_HDLC_5822Init
                +1   111     PUBLIC  _AutoASKReg
                +1   112     PUBLIC  _FUN_HDLC_5822Init
                +1   113     PUBLIC  _FUN_HDLC_Frexiaodui
                +1   114     ;;--- FOR TEST --- 
                +1   115     EXTRN   CODE(_FUN_TEST_DISPLAY)
                +1   116     EXTRN   CODE(_FUN_TEST_BEEP)
                +1   117     EXTRN   CODE(_FUN_LIB_FLASHTOXDATALen)
                +1   118     ;PUBLIC _rxfromrsu
                +1   119     EXTRN   XDATA(XDATA_NUM)
                +1   120     EXTRN   XDATA(XDATA_TXBUF)
                +1   121     
                +1   122     PUBLIC  SPI_RW
                +1   123     PUBLIC  SPI_Read_Reg
                +1   124     ;public SPI_Read_FIFO
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE     3

                +1   125     ;--- Êä³öº¯Ê ---
                +1   126     ;-----BK5822--------------------------------
                +1   127     ;PUBLIC _AutoASKReg
                +1   128     public  SPI_Write_Reg
                +1   129     PUBLIC  _Enter_TX_Carrier_Mode
                +1   130     PUBLIC  _Enter_Sleep_Mode
                +1   131     ;PUBLIC _TXDIOpin
                +1   132     PUBLIC  _Enter_Receive_Mode
                +1   133     PUBLIC  _Power_Up
                +1   134     PUBLIC  Tx_Carrier_En
                +1   135     PUBLIC  _FUN_HDLC_RXSetMMI
                +1   136     
                +1   137     PUBLIC  _FUN_HDLC_CLOSECLR
                +1   138     ;PUBLIC _AutoASKReg_read
                +1   139     ;PUBLIC _AutoASKReg_uppower
                +1   140     
                +1   141     PUBLIC  Rx_En
                +1   142     PUBLIC  _FUN_HDLC_ISSleepMod
                +1   143     PUBLIC  _FUN_HDLC_CheckReg9To18
                +1   144     PUBLIC  HDLC_5823_RXLOOP
                +1   145     PUBLIC  _FUN_HDLC_SWRX
                +1   146     ;PUBLIC _Enable_Wake_Up
                +1   147     ;PUBLIC _BK5822_RST             ;¸´Î»BK5822 ¼Ä´æÆ÷
                +1   148     ;PUBLIC _BK5822_RXTX            ;R7=0 ½øÈë½ÓÊÕÄ£Ê½      R7=1 ½øÈë·¢ËÍÄ£Ê½
                +1   149     PUBLIC  Rx_Carrier_En
                +1   150             
                +1   151     PUBLIC  _Write_18_L,_Write_18_H 
                +1   152             
----            +1   153             RSEG    ?co?HDLC?FLASHSTR
0000            +1   154     RegArrOBU:
                +1   155             
0000 42565659   +1   156     DB      042H,056H,056H,059H ;00
                +1   157     ;DB     020H,0e6H,03aH,0ECH ;01[no] 0x20 00 3B EC  5.79G
0004 50E43AEC   +1   158     DB      050H,0e4H,03aH,0ecH ;5.79G
                +1   159     ;DB     020H,000H,03bH,0ECH ;01[no] 0x20 00 3B EC  5.80G
0008 2000F009   +1   160     DB      020H,000H,0F0H,009H ;02 0x20 00 F0 09
000C 603B0031   +1   161     DB      060H,03BH,000H,031H ;03 0x60 3B 00 31
                +1   162     ;DB     03FH,0CFH,01CH,03FH ;4 FIFO·¢Éä
                +1   163     ;DB     03DH,0CFH,00CH,03FH ;4;²âÊÔÔØ²¨
                +1   164     ;DB     03FH,0CFH,00CH,03FH ;4 µ÷ÖÃfm0£¬µ«²»ÊÇcw mode
                +1   165     ;DB     03FH,0CFH,00CH,038H ;4 µ÷ÖÃfm0£¬µ«²»ÊÇcw mode
                +1   166             ;3c 0F 0C 38
                +1   167             ;3F CF 1C 38
                +1   168             ;3F CF 1C 38
0010 3F0F0C38   +1   169     DB      03FH,00FH,00CH,038H ;4 µ÷ÖÃfm0£¬µ«²»ÊÇcw mode 0x3C 0F 0C 38     380C0F3C
                +1   170     ;DB     03CH,00FH,00CH,038H
                +1   171             ;w 0x3E CF 0C 04;
0014 30D7F202   +1   172     DB      030H,0D7H,0F2H,002H ;05 0x30 D7 F2 02
                +1   173     ;DB     030H,06CH,0BDH,001H  ; 6¸öÂö³å          12.5~18k
                +1   174     ;---DB      030H,030H,0BDH,001H  ; »½ÐÑ6¸öÂö³å          11.5K--16K
0018 30303D02   +1   175     DB      030H,030H,03DH,002H  ; »½ÐÑ8¸öÂö³å      11.5K--16K
                +1   176     ;DB      030H,030H,03DH,003H ; »½ÐÑ12¸öÂö³å     11.5K--16K
                +1   177     ;DB      030H,01cH,03DH,003H ; »½ÐÑ12¸öÂö³å     13K--15K(»½ÐÑÁéÃô¶È×îµÍ)
                +1   178     ;DB      010H,01cH,03DH,003H ;»½ÐÑ12¸öÂö³å  13K--15K(»½ÐÑÁéÃô¶È×î¸ß)
001C 0000009E   +1   179     DB      000H,000H,000H,09EH ;H 07 0x0000009E  »½ÐÑ¸ßÔöÒæ
                +1   180     
                +1   181     ;DB     000H,000H,000H,092H ;L                   »½ÐÑµÍÔöÒæ
0020 00000000   +1   182     DB      000H,000H,000H,000H ;08 0x00000000
                +1   183     ;9~
0024            +1   184     RegArrOBU_09:
0024 1F500498   +1   185     DB      01FH,050H,004H,098H ;09 0x1F 50 04 18[no]
                +1   186     ;DB     01FH,050H,004H,018H ;09 0x1F 50 04 18[no]
0028 FF010000   +1   187     DB      0FFH,001H,000H,000H ;10 0xFF 01 00 00
002C 04143041   +1   188     DB      004H,014H,030H,041H ;11 0x04 14 30 41
0030 10800140   +1   189     DB      010H,080H,001H,040H ;12 0x10 80 01 40
0034 20000280   +1   190     DB      020H,000H,002H,080H ;13 0x20 00 02 80
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE     4

0038            +1   191     RegArrOBU14:
0038 CD4C5555   +1   192     DB      0CDH,04CH,055H,055H ;14 0xCD 4C 55 55
                +1   193     ;DB     0DDH,093H,074H,000H ;15 0xF1 13 70 00[no]
                +1   194     ;DB     0F1H,013H,070H,000H ;15 0xF1 13 70 00[no]
                +1   195     ;DB     0DDH,093H,074H,000H ;15 0xF1 13 70 00[no]
                +1   196     
003C            +1   197     RegArrOBU15:
                +1   198     ;DB     0DFH,013H,074H,000H ;15 0xF1 13 70 00[no]
                +1   199     ;DB     0DDH,093H,074H,000H ;15 0xF1 13 70 00[no]
003C FD93220F   +1   200     db      0FDH,093H,022H,00fH ;REG15[18]=0  REG15[5]=1 CRC ³õÖµFFFF
                +1   201     
                +1   202     
0040            +1   203     db      
                +1   204     ;       RegArrRSU_15[0] = 0xD3;
                +1   205     ;       RegArrRSU_15[1] = 0x27;
                +1   206     ;       RegArrRSU_15[2] = 0x74;
                +1   207     ;       RegArrRSU_15[3] = 0xFF;  
                +1   208     ;<15>
                +1   209     ;Pin22 DIO output enable ¡°0h¡±: DIO output BK5823 Datasheet ETC OBU SOC. 2012 Beken Corpor
                             ation Proprietary and Confidential Page 27 of 31 data ¡°1h¡±: DIO input data
                +1   210     ;DB     0F1H,013H,070H,000H
                +1   211     ;<3.2>  ¡°11¡±: transmit data inputted from DIO
                +1   212     ;---------------------------------------------------------
0040            +1   213     RegArrASKAnalogReg17:
0040 00040488   +1   214             DB      000H,004H,004H,088H,084H,062H,0C1H,068H,038H,07EH,0BEH,0E7H,0DFH,0FFH   ;(×
                             î¼Ñ)
0044 8462C168                
0048 387EBEE7                
004C DFFF                    
                +1   215     ;DB     000H,000H,040H,080H,000H,00AH,091H,04AH,0A8H,094H,06AH,0B5H,05AH,0ADH  ;(²î5dbm)
                +1   216     ;DB     000H,000H,000H,020H,040H,000H,085H,048H,025H,054H,04AH,0A5H,052H,0A9H   ;(²î6dbM)
                +1   217     ;DB     000H,000H,000H,000H,010H,020H,080H,042H,0A4H,012H,02AH,095H,04AH,0A5H   ;(²î8dbm)
                +1   218     ;DB      000H,000H,000H,000H,000H,008H,010H,040H,021H,052H,009H,085H,042H,0A1H   ; (²î10dbm
                             )
                +1   219     ;DB     000H,000H,000H,000H,000H,000H,004H,008H,0A0H,010H,0A9H,054H,02AH,095H ;(²î13dbM)
                +1   220     ;DB       000H,000H,000H,000H,000H,000H,000H,000H,001H,002H,028H,014H,00AH,085H ;²î20dbm  ½
                             ÓÊÕ/»½ÐÑ²î11¸öDBM{10/14m}
                +1   221     
004E            +1   222     RegArrASKAnalogReg18:
004E 411004C1   +1   223             db        041H,010H,004H,0C1H,0FFH,0FFH,0FFH,01FH,004H,001H,00CH
0052 FFFFFF1F                
0056 04010C                  
                +1   224             
                +1   225             ;db     0c3h,030h,00ch,0c3h,0ffh,0ffh,0ffh,03fh,00ch,003h,00ch;[ÕÅ1]    
                +1   226             
0059            +1   227     RegArrASKAnalogReg18_H:
0059 411004C1   +1   228             db      041H,010H,004H,0C1H,0FFH,0FFH,0FFH,01FH,004H,001H,00CH;[org]
005D FFFFFF1F                
0061 04010C                  
0064            +1   229     RegArrASKAnalogReg18_L:
                +1   230             ;db     041H,010H,004H,0C1H,0FFH,0FFH,0FFH,01FH,004H,001H,00CH;[org]
0064 C3300CC3   +1   231             db      0c3h,030h,00ch,0c3h,0ffh,0ffh,0ffh,03fh,00ch,003h,00ch;[ÕÅ1]    
0068 FFFFFF3F                
006C 0C030C                  
                +1   232             
                +1   233     
                +1   234             
                +1   235             
                +1   236             
                     237     
                     238     ;$include (COMMON.INC)
                +1   239             
  009C          +1   240     BRT                                     EQU     09CH
  009C          +1   241     Reg_Sys_BRT                             EQU     09CH
                +1   242     ;RegBit_SysBRT_S1BRS                    BIT     Reg_Sys_BRT.1
                +1   243     
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE     5

  009A          +1   244     S2CON                                   EQU     09AH
  009B          +1   245     S2BUF                                   EQU     09BH
  00AF          +1   246     IE2                                     EQU     0AFH
  00EA          +1   247     RELOAD2_CONTR                           EQU     0EAH
                +1   248             
  0001          +1   249     CONST_TIMEER02                          EQU     1       ;Ò»ÖÜ6Ãë
  00FE          +1   250     CONST_TIMEER03                          EQU     254;245
  0001          +1   251     CONST_TIMEER04                          EQU     1
                +1   252     
  00A2          +1   253     REG_51_AUXR1                            EQU     0A2H
  00AE          +1   254     EPCAI                                   BIT     IE.6
                +1   255     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////
                +1   256     ;NEW LCD
                +1   257     ;PIN_Sys_IsDownload                     BIT     P3.7
                +1   258     ;PIN_LCD_OLEDD1                         BIT     P1.2
                +1   259     ;PIN_LCD_OLEDD0                         BIT     P1.3
                +1   260     ;PIN_LCD_OLEDDC                         BIT     P1.4
                +1   261     ;PIN_LCD_OLEDRES                        BIT     P1.5
                +1   262     ;PIN_LCD_OLEDCS                         BIT     P4.3
                +1   263     ;PIN_LCD_BG                             BIT     P1.1
                +1   264     ;PIN_OLED_ENSY7208                      BIT     P4.0
  00C0          +1   265     P4                                      EQU     0C0H
                +1   266     ;------------------------------------------------------------------------------------------
                             -----
  0005          +1   267     CONST_MAX_RXNUM                         EQU     5
                +1   268     ;TI_CCxxx0_SRES                         EQU     30H
                +1   269     ;Configuration Registers                
  0046          +1   270     CONST_GDO2_VALUE                        EQU     46h;046H        ;06H
  0002          +1   271     CONST_GDO2_MCSM2                        EQU     2;03H
  00C0          +1   272     read_burst                              EQU     0C0H
  0000          +1   273     TI_CCxxx0_IOCFG2                        EQU     00H        ;GDO2 output pin configuration
  0001          +1   274     TI_CCxxx0_IOCFG1                        EQU     01H        ;GDO1 output pin configuration
  0002          +1   275     TI_CCxxx0_IOCFG0                        EQU     02H        ;GDO0 output pin configuration
  0003          +1   276     TI_CCxxx0_FIFOTHR                       EQU     03H        ;RX FIFO and TX FIFO thresholds
  0004          +1   277     TI_CCxxx0_SYNC1                         EQU     04H        ;Sync word, high byte
  0005          +1   278     TI_CCxxx0_SYNC0                         EQU     05H        ;Sync word, low byte
  0006          +1   279     TI_CCxxx0_PKTLEN                        EQU     06H        ;Packet length
  0007          +1   280     TI_CCxxx0_PKTCTRL1                      EQU     07H        ;Packet automation control
  0008          +1   281     TI_CCxxx0_PKTCTRL0                      EQU     08H        ;Packet automation control
  0009          +1   282     TI_CCxxx0_ADDR                          EQU     09H        ;Device address
  000A          +1   283     TI_CCxxx0_CHANNR                        EQU     0AH        ;Channel number
  000B          +1   284     TI_CCxxx0_FSCTRL1                       EQU     0BH        ;Frequency synthesizer control
  000C          +1   285     TI_CCxxx0_FSCTRL0                       EQU     0CH        ;Frequency synthesizer control
  000D          +1   286     TI_CCxxx0_FREQ2                         EQU     0DH        ;Frequency control word, high by
                             te
  000E          +1   287     TI_CCxxx0_FREQ1                         EQU     0EH        ;Frequency control word, middle 
                             byte
  000F          +1   288     TI_CCxxx0_FREQ0                         EQU     0FH        ;Frequency control word, low byt
                             e
  0010          +1   289     TI_CCxxx0_MDMCFG4                       EQU     10H        ;Modem configuration
  0011          +1   290     TI_CCxxx0_MDMCFG3                       EQU     11H        ;Modem configuration
  0012          +1   291     TI_CCxxx0_MDMCFG2                       EQU     12H        ;Modem configuration
  0013          +1   292     TI_CCxxx0_MDMCFG1                       EQU     13H        ;Modem configuration
  0014          +1   293     TI_CCxxx0_MDMCFG0                       EQU     14H        ;Modem configuration
  0015          +1   294     TI_CCxxx0_DEVIATN                       EQU     15H        ;Modem deviation setting
  0016          +1   295     TI_CCxxx0_MCSM2         EQU     16H        ;Main Radio Cntrl State Machine config
  0017          +1   296     TI_CCxxx0_MCSM1         EQU     17H        ;Main Radio Cntrl State Machine config
  0018          +1   297     TI_CCxxx0_MCSM0         EQU     18H        ;Main Radio Cntrl State Machine config
  0019          +1   298     TI_CCxxx0_FOCCFG        EQU     19H        ;Frequency Offset Compensation config
  001A          +1   299     TI_CCxxx0_BSCFG         EQU     1AH        ;Bit Synchronization configuration
  001B          +1   300     TI_CCxxx0_AGCCTRL2      EQU     1BH        ;AGC control
  001C          +1   301     TI_CCxxx0_AGCCTRL1      EQU     1CH        ;AGC control
  001D          +1   302     TI_CCxxx0_AGCCTRL0      EQU     1DH        ;AGC control
  001E          +1   303     TI_CCxxx0_WOREVT1       EQU     1EH        ;High byte Event 0 timeout
  001F          +1   304     TI_CCxxx0_WOREVT0       EQU     1FH        ;Low byte Event 0 timeout
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE     6

  0020          +1   305     TI_CCxxx0_WORCTRL       EQU     20H        ;Wake On Radio control
  0021          +1   306     TI_CCxxx0_FREND1        EQU     21H        ;Front end RX configuration
  0022          +1   307     TI_CCxxx0_FREND0        EQU     22H        ;Front end TX configuration
  0023          +1   308     TI_CCxxx0_FSCAL3        EQU     23H        ;Frequency synthesizer calibration
  0024          +1   309     TI_CCxxx0_FSCAL2        EQU     24H        ;Frequency synthesizer calibration
  0025          +1   310     TI_CCxxx0_FSCAL1        EQU     25H        ;Frequency synthesizer calibration
  0026          +1   311     TI_CCxxx0_FSCAL0        EQU     26H        ;Frequency synthesizer calibration
  0027          +1   312     TI_CCxxx0_RCCTRL1       EQU     27H        ;RC oscillator configuration
  0028          +1   313     TI_CCxxx0_RCCTRL0       EQU     28H        ;RC oscillator configuration
  0029          +1   314     TI_CCxxx0_FSTEST        EQU     29H        ;Frequency synthesizer cal control
  002A          +1   315     TI_CCxxx0_PTEST         EQU     2AH        ;Production test
  002B          +1   316     TI_CCxxx0_AGCTEST       EQU     2BH        ;AGC test
  002C          +1   317     TI_CCxxx0_TEST2         EQU     2CH        ;Various test settings       
  002D          +1   318     TI_CCxxx0_TEST1         EQU     2DH        ;Various test settings
  002E          +1   319     TI_CCxxx0_TEST0         EQU     2EH        ;Various test settings
                +1   320     
                +1   321     ;Strobe commands
  0030          +1   322     TI_CCxxx0_SRES          EQU     30H        ;Reset chip.
  0032          +1   323     TI_CCxxx0_SXOFF         EQU     32H        ;Turn off crystal oscillator.
  0033          +1   324     TI_CCxxx0_SCAL          EQU     33H        ;Calibrate freq synthesizer & disable
  0034          +1   325     TI_CCxxx0_SRX           EQU     34H        ;Enable RX.
  0035          +1   326     TI_CCxxx0_STX           EQU     35H        ;Enable TX.
  0036          +1   327     TI_CCxxx0_SIDLE         EQU     36H        ;Exit RX / TX
  0037          +1   328     TI_CCxxx0_SAFC          EQU     37H        ;AFC adjustment of freq synthesizer
  0038          +1   329     TI_CCxxx0_SWOR          EQU     38H        ;Start automatic RX polling sequence
  0039          +1   330     TI_CCxxx0_SPWD          EQU     39H        ;Enter pwr down mode when CSn goes hi
  003A          +1   331     TI_CCxxx0_SFRX          EQU     3AH        ;Flush the RX FIFO buffer.
  003B          +1   332     TI_CCxxx0_SFTX          EQU     3BH        ;Flush the TX FIFO buffer.
  003C          +1   333     TI_CCxxx0_SWORRST       EQU     3CH        ;Reset real time clock.
  003D          +1   334     TI_CCxxx0_SNOP          EQU     3DH        ;No operation.
                +1   335             
                +1   336     ;Status_registers
  0030          +1   337     TI_CCxxx0_PARTNUM                       EQU     30H        ;Part number
  0031          +1   338     TI_CCxxx0_VERSION                       EQU     31H        ;Current version number
  0032          +1   339     TI_CCxxx0_FREQEST                       EQU     32H        ;Frequency offset estimate
  0033          +1   340     TI_CCxxx0_LQI                           EQU     33H        ;Demodulator estimate for link q
                             uality
  0034          +1   341     TI_CCxxx0_RSSI                          EQU     34H        ;Received signal strength indica
                             tion
  0035          +1   342     TI_CCxxx0_MARCSTATE                     EQU     35H        ;Control state machine state
  0036          +1   343     TI_CCxxx0_WORTIME1                      EQU     36H        ;High byte of WOR timer
  0037          +1   344     TI_CCxxx0_WORTIME0                      EQU     37H        ;Low byte of WOR timer
  0038          +1   345     TI_CCxxx0_PKTSTATUS                     EQU     38H        ;Current GDOx status and packet 
                             status
  0039          +1   346     TI_CCxxx0_VCO_VC_DAC                    EQU     39H        ;Current setting from PLL cal mo
                             dule
  003A          +1   347     TI_CCxxx0_TXBYTES                       EQU     3AH        ;Underflow and # of bytes in TXF
                             IFO
  003B          +1   348     TI_CCxxx0_RXBYTES                       EQU     3BH        ;Overflow and # of bytes in RXFI
                             FO
  007F          +1   349     TI_CCxxx0_NUM_RXBYTES                   EQU     7FH        ;Mask "# of bytes" field in _RXB
                             YTES
                +1   350             
                +1   351     ;Other memory locations
  003E          +1   352     TI_CCxxx0_PATABLE                       EQU     3EH
  003F          +1   353     TI_CCxxx0_TXFIFO                        EQU     3FH
  003F          +1   354     TI_CCxxx0_RXFIFO                        EQU     3FH
                +1   355             
  0082          +1   356     PIN_WAVE_RX                             BIT     p0.2;P2.0;p0.1;p1.0
  00B4          +1   357     PIN_OUTPUT_CLK                          BIT     P3.4;P1.0
  008F          +1   358     REG_WAKE_CLK0                           EQU     08FH
  000F          +1   359     CONST_DATA_VALUE1                       EQU     15;20;20;20
  00DE          +1   360     CONST_DATA_VALUE2                       EQU     208+14;14;255;208+14;14
                +1   361     ;------------------------------------------------------------------------------------------
                             -----
                +1   362     ;µçÔ´¿ØÖÆ
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE     7

  0095          +1   363     PIN_PWRDWN_LCD                          BIT     p1.5;p1.3        
  00A4          +1   364     Pin_pwrdwn                              BIT     p2.4;P2.7        
  00A3          +1   365     PIN_PWR_GSM                             BIT     p2.3;P2.4        
                +1   366             
                +1   367     ;--- Active ---
  00B5          +1   368     Pin_unfix                               BIT     P3.5     
  00B3          +1   369     PIN_card_exist                          BIT     p3.3    
  00B2          +1   370     WKO_BK                                  BIT     P3.2     
  0095          +1   371     PIN_PWR_LOWIO                           BIT     p1.5;P2.1        
                +1   372             
                +1   373     ;--- ESAM ---
  0083          +1   374     PIN_ESAM_TX                             BIT     p0.3;P2.6        
  0083          +1   375     PIN_ESAM_RX                             BIT     p0.3;P2.6        
  0085          +1   376     PIN_ESAM_RST                            BIT     p0.5;P2.5        
                +1   377             
                +1   378     ;--- Éù¹â¿ØÖÆ ---
  00C5          +1   379     Pin_Red                                 BIT     p4.5;P4.1        
  00C4          +1   380     Pin_Gre                                 BIT     p4.4;P4.5
                +1   381     
  0095          +1   382     PIN_BELL_01                             BIT     p1.5;P0.3        
  0095          +1   383     PIN_BELL_02                             BIT     p1.5;P0.2        
                +1   384             
                +1   385     ;--- CC1101 ---
                +1   386     ;Pin_CC1101_SS                          BIT     p3.6     
                +1   387     ;PIN_CC1101_SCLK                                BIT     P2.2     
                +1   388     ;PIN_CC1101_MOSI                                BIT     P2.3     
                +1   389     ;PIN_CC1101_MISO                                BIT     p3.7     
                +1   390     ;PIN_CC1101_GDO2                                BIT     P1.6     
                +1   391             
                +1   392     ;--- Òº¾§Ò½Å ---
  0095          +1   393     Pin_LCD_CS                              BIT     p1.5;p1.4        
  0095          +1   394     Pin_LCD_RST                             BIT     P1.5;    
  0095          +1   395     Pin_LCD_DC                              BIT     p1.5;p1.7       
  0095          +1   396     Pin_LCD_SCL                             BIT     p1.5;p3.4       
  0095          +1   397     Pin_LCD_SDA                             BIT     p1.5;p4.3       
                +1   398             
                +1   399     ;--- 522 ---
  0087          +1   400     PIN_522_SCLK                            BIT     P0.7;P0.7        
  00C6          +1   401     PIN_522_MOSI                            BIT     p4.6;P0.5        
  00C1          +1   402     PIN_522_MISO                            BIT     p4.1;P0.4        
  0086          +1   403     Pin_522_SS                              BIT     P0.6;P0.6        
  0084          +1   404     Pin_522_RST                             BIT     p0.4;P4.6        
                +1   405             
  00B0          +1   406     PIN_SOFTSERIALRX                        BIT     P3.0     
  00B1          +1   407     PIN_SOFTSERIALTXH                       BIT     P3.1     
                +1   408             
  0095          +1   409     PIN_PWR_SE                              BIT     p1.5    ;p2.2   ; P2.4  ;       [ GSM ] 
  0095          +1   410     Pin_SW                                  BIT     p1.5    
                +1   411             
                +1   412             
                +1   413     ;fu dand wei
  00A6          +1   414     Pin_ES_Rst                              BIT     p2.6;P2.3       ;p4.0;P4.4      ; P4.4  
  00B4          +1   415     PIN_SE_IO1                              BIT     p3.4;p2.4       ;P4.4;p2.3;p4.4;P2.2    ; P
                             0.5
                +1   416             
                +1   417             
                +1   418     ;--- CC1101 ---
  0097          +1   419     PIN_UART2_TX                            BIT     p1.7    ;p3.6   ; P3.7
  0096          +1   420     PIN_UART2_RX                            BIT     P1.6    ; 
                +1   421             
  0000          +1   422     BUSY                                    BIT     20H.0
                +1   423     ;////////////////////////////////////////////////Ò½Å¶¨Òå///////////////////////////////////
                             //////////////
                +1   424     ;ÉèÎª¸ß
  0091          +1   425     PIN_BK_CE                               BIT     p1.1     
  0090          +1   426     Pin_5823BK_CS                           BIT     P1.0
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE     8

                +1   427     ;Éè³ÉÊäÈëÎª¸ß                           
  0080          +1   428     Pin_5823BK_MISO                         BIT     p0.0     
  0092          +1   429     Pin_5823BK_IRQ                          BIT     p1.2      
                +1   430     ;   Éè ³É µÍ
  0081          +1   431     Pin_5823BK_MOSI                         BIT     p0.1     
  00C2          +1   432     Pin_5823BK_SCLK                         BIT     p4.2     
                +1   433      
  0082          +1   434     PIN_WAVE_CHANNEL1                       BIT     p0.2;P2.0        
                +1   435      
                +1   436     ;=====================================================================================
  008F          +1   437     Reg_WakeClk0                            EQU     08fH
  00DC          +1   438     Reg_WakeClk_04                          BIT     CCON.4  ;P3.4
  00DD          +1   439     Reg_WakeClk_05                          BIT     CCON.5  ;P3.5
                +1   440     ;ÉùÃ÷STC12C5628AD ÏµÁÐ MCU ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷µØÖ·
  00B7          +1   441     IPH EQU 0B7H ;ÖÐ¶ÏÓÅÏÈ¼¶¸ßÎ»¼Ä´æÆ÷
  00AE          +1   442     EPCA_LVD EQU IE.6 ;PCA ÖÐ¶ÏºÍ LVD(µÍÑ¹¼ì²â)ÖÐ¶Ï¹²ÏíµÄ×ÜÖÐ¶Ï¿ØÖÆÎ»
  00F9          +1   443     CH EQU 0F9H ;PCA ¼ÆÊÆ÷¸ß8 Î»¡£
  00E9          +1   444     CL EQU 0E9H ;PCA ¼ÆÊÆ÷µÍ8 Î»¡£
                +1   445     
                +1   446     ;------------------------
  00D8          +1   447     CCON EQU 0D8H ;PCA ¿ØÖÆ¼Ä´æÆ÷¡£
  00D8          +1   448     CCF0 EQU CCON.0 ;PCA Ä£¿é0 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00D9          +1   449     CCF1 EQU CCON.1 ;PCA Ä£¿é1 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DA          +1   450     CCF2 EQU CCON.2 ;PCA Ä£¿é2 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DB          +1   451     CCF3 EQU CCON.3 ;PCA Ä£¿é3 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DC          +1   452     CCF4 EQU CCON.4 ;PCA Ä£¿é4 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DD          +1   453     CCF5 EQU CCON.5 ;PCA Ä£¿é5 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DE          +1   454     CR EQU CCON.6 ;1:ÔÊÐí PCA ¼ÆÊÆ÷¼ÆÊ, ±ØÐëÓÉÈí¼þÇå0¡£
  00DF          +1   455     CF EQU CCON.7 ;PCA ¼ÆÊÆ÷Òç³ö(CH,CL ÓÉ FFFFH ±äÎª 0000H)±êÖ¾,
                +1   456     ;PCA ¼ÆÊÆ÷Òç³öºóÓÉÓ²¼þÖÃÎ»,±ØÐëÓÉÈí¼þÇå0¡£
                +1   457     ;------------------------
  00D9          +1   458     CMOD EQU 0D9H ;PCA ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   459     
                +1   460     ;CMOD.7 CIDL: idle ×´Ì¬Ê± PCA ¼ÆÊÆ÷ÊÇ·ñ¼ÌÐø¼ÆÊ, 0: ¼ÌÐø¼ÆÊ, 1: Í£Ö¹¼ÆÊ¡£
                +1   461     ;CMOD.2 CPS1: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 1¡£
                +1   462     ;CMOD.1 CPS0: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 0¡£
                +1   463     ; CPS1 CPS0
                +1   464     ; 0 0 Íâ²¿¾§ÌåÆµÂÊ/12¡£
                +1   465     ; 0 1 Íâ²¿¾§ÌåÆµÂÊ/2¡£
                +1   466     ; 1 0 Timer 0 Òç³öÂö³å£¬
                +1   467     ; Timer 0 »¹¿ÉÍ¨¹ AUXR ¼Ä´æÆ÷ÉèÖÃ³É¹¤×÷ÔÚ 12T »ò 1T Ä£Ê½¡£
                +1   468     ; 1 1 ´Ó ECI/P3.4 ½ÅÊäÈëµÄÍâ²¿Ê±ÖÓ¡£
                +1   469     ;CMOD.0 ECF: PCA ¼ÆÊÆ÷Òç³öÖÐ¶ÏÔÊÐíÎ», 1-- ÔÊÐí CF(CCON.7) ²úÉúÖÐ¶Ï¡£
                +1   470     ;------------------------
  00FA          +1   471     CCAP0H EQU 0FAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FB          +1   472     CCAP1H EQU 0FBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FC          +1   473     CCAP2H EQU 0FCH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FD          +1   474     CCAP3H EQU 0FDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FE          +1   475     CCAP4H EQU 0FEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FF          +1   476     CCAP5H EQU 0FFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00EA          +1   477     CCAP0L EQU 0EAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EB          +1   478     CCAP1L EQU 0EBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EC          +1   479     CCAP2L EQU 0ECH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00ED          +1   480     CCAP3L EQU 0EDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EE          +1   481     CCAP4L EQU 0EEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EF          +1   482     CCAP5L EQU 0EFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
                +1   483     ;------------------------
  00F2          +1   484     PCA_PWM0 EQU 0F2H ;PCA Ä£¿é0 PWM ¼Ä´æÆ÷¡£
  00F3          +1   485     PCA_PWM1 EQU 0F3H ;PCA Ä£¿é1 PWM ¼Ä´æÆ÷¡£
  00F4          +1   486     PCA_PWM2 EQU 0F4H ;PCA Ä£¿é2 PWM ¼Ä´æÆ÷¡£
  00F5          +1   487     PCA_PWM3 EQU 0F5H ;PCA Ä£¿é3 PWM ¼Ä´æÆ÷¡£
  00F6          +1   488     PCA_PWM4 EQU 0F6H ;PCA Ä£¿é4 PWM ¼Ä´æÆ÷¡£
  00F7          +1   489     PCA_PWM5 EQU 0F7H ;PCA Ä£¿é5 PWM ¼Ä´æÆ÷¡£
                +1   490     ;PCA_PWMn: 7 6 5 4 3 2 1 0
                +1   491     ; - - - - - - EPCnH EPCnL
                +1   492     ;B7-B2: ±£Áô
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE     9

                +1   493     ;B1(EPCnH): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnH ×é³É 9 Î»Ê¡£
                +1   494     ;B0(EPCnL): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnL ×é³É 9 Î»Ê¡£
                +1   495     ;------------------------
  00DA          +1   496     CCAPM0 EQU 0DAH ;PCA Ä£¿é0 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DB          +1   497     CCAPM1 EQU 0DBH ;PCA Ä£¿é1 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DC          +1   498     CCAPM2 EQU 0DCH ;PCA Ä£¿é2 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DD          +1   499     CCAPM3 EQU 0DDH ;PCA Ä£¿é3 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DE          +1   500     CCAPM4 EQU 0DEH ;PCA Ä£¿é4 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DF          +1   501     CCAPM5 EQU 0DFH ;PCA Ä£¿é5 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   502     ;CCAPMn: 7 6 5 4 3 2 1 0
                +1   503     ; - ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   504     ;
                +1   505     ;ECOMn = 1:ÔÊÐí±È½Ï¹¦ÄÜ¡£
                +1   506     ;CAPPn = 1:ÔÊÐíÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   507     ;CAPNn = 1:ÔÊÐíÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   508     ;MATn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, ÔÊÐí CCON ÖÐµÄ CCFn ÖÃÎ»¡£
                +1   509     ;TOGn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, CEXn ½«·­×ª¡£
                +1   510     ;PWMn = 1:½« CEXn ÉèÖÃÎª PWM Êä³ö¡£
                +1   511     ;ECCFn = 1:ÔÊÐí CCON ÖÐµÄ CCFn ´¥·¢ÖÐ¶Ï¡£
                +1   512     ;ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   513     ; 0 0 0 0 0 0 0 00H Î´ÆôÓÃÈÎºÎ¹¦ÄÜ¡£
                +1   514     ; x 1 0 0 0 0 x 21H 16 Î»CEXn ÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   515     ; x 0 1 0 0 0 x 11H 16 Î»CEXn ÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   516     ; x 1 1 0 0 0 x 31H 16 Î»CEXn ±ßÑØ(ÉÏ¡¢ÏÂÑØ)´¥·¢²¶×½¹¦ÄÜ¡£
                +1   517     ; 1 0 0 1 0 0 x 49H 16 Î»Èí¼þ¶¨Ê±Æ÷¡£
                +1   518     ; 1 0 0 1 1 0 x 4DH 16 Î»¸ßËÙÂö³åÊä³ö¡£
                +1   519     ; 1 0 0 0 0 1 0 42H 8 Î» PWM¡£
                +1   520     ;------------------------------------------------------------------------------
                +1   521     ;==============================================================================
                +1   522     ;//////////////////////////////////////////////¹«¹²¼Ä´æÆ÷ /////////////////////////////////
                             //////////
  00C7          +1   523     ISP_CONTR                               EQU     0C7h
  008F          +1   524     WAKE_CLKO                               EQU     08fh
                +1   525     ;¸½¼ÓµÄ SFR WAKE_CLKO (µØÖ·£º0x8F)
                +1   526     ;b7 - PCAWAKEUP :1, ÔÊÐí PCA ÉÏÉÑØ / ÏÂ½µÑØÖÐ¶Ï »½ÐÑ powerdown¡£
                +1   527     ;b6 - RXD_PIN_IE:1, ÔÊÐí P3.0(RXD) ÏÂ½µÑØÖÃ RI£¬Ò²ÄÜÊ¹ RXD »½ÐÑ powerdown¡£
                +1   528     ;b5 - T1_PIN_IE :1, ÔÊÐí T1/P3.5 ½ÅÏÂ½µÑØÖÃ T1 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T1 ½Å»½ÐÑ powerdown¡£
                +1   529     ;b4 - T0_PIN_IE :1, ÔÊÐí T0/P3.4 ½ÅÏÂ½µÑØÖÃ T0 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T0 ½Å»½ÐÑ powerdown¡£
                +1   530     ;b3 - N/A
                +1   531     ;b2 - N/A
                +1   532     ;b1 - T1CLKO : ÔÊÐí T1 µÄÒç³öÔÚP1.1 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T1 Òç³öÂÊ
                +1   533     ;       T1 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / ( 256 - TH1 )
                +1   534     ;       T1 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / 12 / ( 256 - TH1 )
                +1   535     ;b0 -   T0CLKO : ÔÊÐí T0 µÄÒç³öÔÚP1.0 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T0 Òç³öÂÊ
                +1   536     ;       T0 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / ( 256 - TH0)
                +1   537     ;       T0 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / 12 / ( 256 - TH0 )
                +1   538     ;--------------------------------------------------------
                +1   539     ;--------------------------------------------------------
  0094          +1   540     REG_5412AD_P0M0                         EQU     094h;093h
  0093          +1   541     REG_5412AD_P0M1                         EQU     093h;094h
                +1   542     
  0092          +1   543     REG_5412AD_P1M0                         EQU     092h;091h
  0091          +1   544     REG_5412AD_P1M1                         EQU     091h;092h
                +1   545     
  0096          +1   546     REG_5412AD_P2M0                         EQU     096h;095h
  0095          +1   547     REG_5412AD_P2M1                         EQU     095h;096h
                +1   548     
  00B2          +1   549     REG_5412AD_P3M0                         EQU     0b2h;0b1h
  00B1          +1   550     REG_5412AD_P3M1                         EQU     0b1h;0b2h
                +1   551     
  00B4          +1   552     REG_5412AD_P4M0                         EQU     0b4h;0b3h
  00B3          +1   553     REG_5412AD_P4M1                         EQU     0b3h;0b4h
                +1   554     ;-------------------------------------------------------------
  008E          +1   555     REG_5412AD_AUXR                         EQU     08EH            ;¸¨Öú¼Ä´æÆ÷
  0085          +1   556     REG_5412AD_spctl                        EQU     085H
  0084          +1   557     REG_5412AD_spstat                       EQU     084H
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    10

  0086          +1   558     REG_5412AD_spdat                        EQU     086H
  00C1          +1   559     REG_WDT_CONTR                           EQU     0C1H            ;0E1H;0C1H
  00BB          +1   560     REG_5412AD_P4SW                         EQU     0BBH
  00AB          +1   561     REG_MCU_WKCTH                           EQU     0ABH
  00AA          +1   562     REG_MCU_WKCTL                           EQU     0AAH    
                +1   563     ;//////////////////////////////////////////////RC522¼Ä´æÆ÷ ////////////////////////////////
                             ///////////////////
  0000          +1   564     REG_RC522_RC522PAGE                     EQU     00H
  0001          +1   565     REG_RC522_CommandReg                    EQU     01H
  0002          +1   566     REG_RC522_ComIEnReg                     EQU     02H
  0003          +1   567     REG_RC522_DivIEnReg                     EQU     03H
  0004          +1   568     REG_RC522_ComIrqReg                     EQU     04H
  0005          +1   569     REG_RC522_DivIrqReg                     EQU     05H
  0006          +1   570     REG_RC522_ErrorReg                      EQU     06h
  0007          +1   571     REG_RC522_Status1Reg                    EQU     07h
  0008          +1   572     REG_RC522_Status2Reg                    EQU     08h
  0009          +1   573     REG_RC522_FIFODataReg                   EQU     09h
  000A          +1   574     REG_RC522_FIFOLevelReg                  EQU     0ah
  000B          +1   575     REG_RC522_WaterLevelReg                 EQU     0bh
  000C          +1   576     REG_RC522_ControlReg                    EQU     0ch
  000D          +1   577     REG_RC522_BitFramingReg                 EQU     0dh
  000E          +1   578     REG_RC522_CollReg                       EQU     0eh
  000F          +1   579     REG_RC522_RFU                           EQU     0fh
  0011          +1   580     REG_RC522_ModeReg                       EQU     11h
  0012          +1   581     REG_RC522_TxModeReg                     EQU     12h
  0013          +1   582     REG_RC522_RxModeReg                     EQU     13h
  0014          +1   583     REG_RC522_TxControlReg                  EQU     14h
  0015          +1   584     REG_RC522_TxAutoReg                     EQU     15h
  0016          +1   585     REG_RC522_TxSelReg                      EQU     16h
  0017          +1   586     REG_RC522_RxSelReg                      EQU     17h
  0018          +1   587     REG_RC522_RxThresholdReg                EQU     18h
  0019          +1   588     REG_RC522_DemodReg                      EQU     19h
  001C          +1   589     REG_RC522_MifareReg                     EQU     1ch
  001F          +1   590     REG_RC522_SerialSpeedReg                EQU     1fh
  0021          +1   591     REG_RC522_CRCResultRegH                 EQU     21h
  0022          +1   592     REG_RC522_CRCResultRegL                 EQU     22h
  0024          +1   593     REG_RC522_ModWidthReg                   EQU     24h
  0026          +1   594     REG_RC522_RFCfgReg                      EQU     26h
  0027          +1   595     REG_RC522_GsNReg                        EQU     27h
  0028          +1   596     REG_RC522_CWGsPReg                      EQU     28h
  0029          +1   597     REG_RC522_ModGsPReg                     EQU     29h
  002A          +1   598     REG_RC522_TModeReg                      EQU     2ah
  002B          +1   599     REG_RC522_TPrescalerReg                 EQU     2bh
  002C          +1   600     REG_RC522_TReloadRegH                   EQU     2ch
  002D          +1   601     REG_RC522_TReloadRegL                   EQU     2dh
  002E          +1   602     REG_RC522_TCounterValueRegH             EQU     2eh
  002F          +1   603     REG_RC522_TCounterValueRegL             EQU     2fh
                +1   604             
                +1   605     ;/////////////////////////////////////////////////Ò»°ãÏµÍ³³£Á¿±í///////////////////////////
                             //////////////////////
  0001          +1   606     CONST_HOLD_5823TX                       EQU     1
  0000          +1   607     CONST_HOLD_5823RX                       EQU     0
                +1   608             
                +1   609             
  00FF          +1   610     CONST_SYS_TradeConfine                  EQU     255                             ;½»Ò×Ê±¼äÏÞ
                             ÖÆ
  000A          +1   611     CONST_SYS_PowerONTimer                  EQU     10                              ;ÉÏµç¶¨Ê±Æ÷
                                  
  0088          +1   612     CONST_SYS_PREFlag                       EQU     088H                            ;
  00AA          +1   613     CONST_SYS_AA                            EQU     0AAH
  0055          +1   614     CONST_SYS_55                            EQU     55H
  0004          +1   615     CONST_SYS_OBUIDLEN                      EQU     4                               ;obuid ³¤¶È
  0008          +1   616     CONST_BSTLIMIT                          EQU     8;20;10                 ;¼«ÏÞBST¸öÊ
  0064          +1   617     CONST_BSTLIMIT02                        EQU     100
                +1   618     
  00FF          +1   619     CONST_VSTLIMIT                          EQU     255     ;100                    ;¼«ÏÞVST¸öÊ
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    11

  00FA          +1   620     CONST_Pro_OverTime2S                    EQU     250                             ;³¬Ê±ÏÞÊ±£¬
                             196-246*30=1200MS 
                +1   621     ;/////////////////////////////////////////////////³öÈë¿Ú³£Á¿±í/////////////////////////////
                             ////////////////////
  0003          +1   622     CONST_ETC_INPUT                         EQU     3       ;ETC Èë¿Ú
  0001          +1   623     CONST_MTC_INPUT                         EQU     1       ;MTC Èë¿Ú
  0001          +1   624     CONST_INPUT_ISEnable                    EQU     1;=1²»ÆôÓÃ =0ÆôÓÃ
                +1   625     ;/////////////////////////////////////////////////×´Ì¬³£Á¿±í///////////////////////////////
                             //////////////////
  0000          +1   626     CONST_STATE_TRUE                        EQU     000H                            ;Ö´ÐÐ³É¹¦
  00FF          +1   627     CONST_STATE_FALSE                       EQU     0FFH                            ;³ÌÐòÖ´ÐÐ³ö
                             ´í
                +1   628     ;Ò»°ãÐÔ´íÎó     01      µ¼ÈëÊ§°Ü        STR_InputFail
                +1   629     ;ºÏÍ¬ºÅ²»Í¬     02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                +1   630     ;Ê¹ÓÃ´ÎÊ=FFH    03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
  0001          +1   631     CONST_STATE_InputFail                   EQU     01
  0002          +1   632     CONST_STATE_IllegalInputCard            EQU     02
  0003          +1   633     CONST_STATE_InputCardInvalid            EQU     03
                +1   634     ;Ò»°ãÐÔ´íÎó     04      ¼¤»îÊ§°Ü        STR_ActiveFail
                +1   635     ;ºÏÍ¬ºÅ²»Í¬     05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                +1   636     ;Ê¹ÓÃ´ÎÊ=FFH    06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
  0004          +1   637     CONST_STATE_ActiveFail                  EQU     04
  0005          +1   638     CONST_STATE_IllegalACTCard              EQU     05
  0006          +1   639     CONST_STATE_ACTCardInvalid              EQU     06
                +1   640             
  0007          +1   641     CONST_STATE_5823INIER                   EQU     07      ;5823³õÊ¼»¯³ö´í
  0008          +1   642     CONST_STATE_5823SleepEr                 EQU     08      ;5823ÐÝÃß³ö´í
  0009          +1   643     CONST_STATE_GetSecureSelFileEr          EQU     09      ;getsecureÑ¡¿¨Ä¿Â¼³ö´í
                +1   644     
  000A          +1   645     CONST_STATE_BaseNinit                   EQU     10      ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  000B          +1   646     CONST_STATE_BaseESAMDF01                EQU     11      ;Baseinit02º¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1   647             
  000C          +1   648     CONST_STATE_CARDPreDeal1001             EQU     12      ;Ô¤¶Á1001Ê§°Ü
  000D          +1   649     CONST_STATE_CARDPreDeal0002             EQU     13      ;Ô¤¶Á0002Ê§°Ü
  000E          +1   650     CONST_STATE_CARDPreDeal0012             EQU     14      ;Ô¤¶Á0012Ê§°Ü
  000F          +1   651     CONST_STATE_CARDPreDeal0015             EQU     15      ;Ô¤¶Á0015Ê§°Ü
  0010          +1   652     CONST_STATE_CARDPreDeal0019             EQU     16      ;Ô¤¶Á0019Ê§°Ü
  0011          +1   653     CONST_STATE_CARDPreDeal3f00             EQU     17      ;Ô¤¶Á3f00Ê§°Ü
  0012          +1   654     CONST_STATE_CARDPreDeal81               EQU     18      ;Ô¤¶Á81Ê§°Ü
                +1   655             
  0013          +1   656     CONST_STATE_BaseN01init                 EQU     19      ;Baseinitº¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  0014          +1   657     CONST_STATE_Base01ESAMDF01              EQU     20      ;Baseinitº¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1   658             
  0015          +1   659     CONST_STATE_Base01Contact               EQU     21      ;Baseinitº¯Ê£¬Ìøµ½½Ó´¥
  0016          +1   660     CONST_STATE_Base02Contact               EQU     22      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1   661             
  0017          +1   662     CONST_STATE_test                        EQU     23      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1   663             
  0018          +1   664     CONST_STATE_Base02Re                    EQU     24
  0019          +1   665     CONST_STATE_Base02AntiColl              EQU     25
  001A          +1   666     CONST_STATE_Base02Sel                   EQU     26
  001B          +1   667     CONST_STATE_Base02Rats                  EQU     27
                +1   668             
  001C          +1   669     CONST_STATE_Base01Re                    EQU     28
  001D          +1   670     CONST_STATE_Base01AntiColl              EQU     29
  001E          +1   671     CONST_STATE_Base01Sel                   EQU     30
  001F          +1   672     CONST_STATE_Base01Rats                  EQU     31      
                +1   673             
  0020          +1   674     CONST_STATE_MemoryEr                    EQU     32      
  0021          +1   675     CONST_STATE_ExMemoryEr                  EQU     33      
  0022          +1   676     CONST_STATE_ExMemoryEr02                EQU     34      
                +1   677             
  0001          +1   678     CONST_STATE_SERIALACCPET                EQU     001H                            ;´®¿Ú½ÓÊÕ´í
                             Îó
  0002          +1   679     CONST_STATE_SERIALOVERTIME              EQU     CONST_STATE_SERIALACCPET + 1    ;´®¿Ú½ÓÊÕ³¬
                             Ê±
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    12

  0003          +1   680     CONST_STATE_ACCEPTOVER                  EQU     CONST_STATE_SERIALOVERTIME + 1  ;´®¿Ú½ÓÊÕÍê
                             ±Ï£¬Ã»ÓÐºóÐø×Ö½Ú 
  0004          +1   681     CONST_STATE_ACCEPTOVERLEN               EQU     CONST_STATE_ACCEPTOVER + 1      ;´®¿Ú½ÓÊÕ³¬
                             ³¤
  0005          +1   682     CONST_STATE_RSTCPUER                    EQU     CONST_STATE_ACCEPTOVERLEN + 1   ;¸´Î»´®¿Ú´í
                             Îó
  0006          +1   683     CONST_STATE_AUTHER                      EQU     CONST_STATE_RSTCPUER + 1        ;ÈÏÖ¤Ê§°Ü
                +1   684             
                +1   685     ;--- ¹¤×÷Çø³£Á¿¶¨Òå ---
  0000          +1   686     CONST_WORKSTAION_0                      EQU     00H     ;¹¤×÷Çø0
  0001          +1   687     CONST_WORKSTAION_1                      EQU     01H     ;¹¤×÷Çø1
  0002          +1   688     CONST_WORKSTAION_2                      EQU     02H     ;¹¤×÷Çø2        
  0003          +1   689     CONST_WORKSTAION_3                      EQU     03H     ;¹¤×÷Çø3
                +1   690     
                +1   691     ;//////////////////////////////////////¿¨Æ¬Âß¼­³£Á¿¶¨Òå////////////////////////////////////
                             ////////
  0017          +1   692     CONST_CARD_PASS                         EQU     23
  0016          +1   693     CONST_CARD_CONSUME                      EQU     22
                +1   694     ;//////////////////////////////////////GSM³£Á¿¶¨Òå/////////////////////////////////////////
                             /////////
  0002          +1   695     CONST_LHX_FLAG                          EQU     2 ;0-¹ú±êOBU  1-GSM OBU  2-433 OBU
                +1   696     
                +1   697     ;RTC ´ó´°Ê±¼ä                           ;6·ÖÖÓ£¬Æ½¾ùÁ½ÃëÒ»´ÎcellID
                +1   698     ;CONST_RTCOverFlow                      EQU     144;180;180
                +1   699     ;CONST_RTCUartRX                        EQU     24;4;8,12,16,20,24;142;
                +1   700     
  0090          +1   701     CONST_RTCOverFlow                       EQU     144;20;144;6;144;6;12;144
                +1   702     ;CONST_RTCUartRX                                EQU     12
                +1   703     ;CONST_RTCUartRX02                      EQU     142
  0000          +1   704     CONST_Flag_INPUT                        EQU     0
  0001          +1   705     CONST_Flag_OutPUT                       EQU     1
                +1   706     
                +1   707     ;GSM CellID ¼ÇÂ¼Ê¾ÝËùÔÚµÄÎÄ¼þÃû
  0000          +1   708     CONST_Cellfile_H                        EQU     000H
  0009          +1   709     CONST_Cellfile_L                        EQU     09h;030H
                +1   710     
  00EF          +1   711     CONST_ESAMCellfile_H                    EQU     0EFH;000H
  0007          +1   712     CONST_ESAMCellfile_L                    EQU     07H;03h;030H
                +1   713     ;CONST_Cellfile_H                       EQU     000H
                +1   714     ;CONST_Cellfile_L                       EQU     008h
                +1   715     
  00F0          +1   716     CONST_GSM_MaxNum                        EQU     240
                +1   717     ;CONST_GSM_MaxNum                       EQU     5
                +1   718     
  0014          +1   719     CONST_GSM_PJNum                         EQU     20
                +1   720     ;CONST_GSM_PJNum                        EQU     1
                +1   721     
                +1   722     ;RTC Ð¡´°Ê±¼ä;
  0008          +1   723     CONST_MCU_WKCTH                         EQU     008H;0fh;00fH;00fH;00fH
  00FF          +1   724     CONST_MCU_WKCTL                         EQU     0FFH
                +1   725     
                +1   726     ;RTC ÊÇ·ñ¿ªÆô£¬±ê¼ÇÖµ
                +1   727     ;=CONST_RTC_ON ±íÊ¾¿ªÆô
                +1   728     ;= ÆäËü Ã»ÓÐ¿ªÆô
  0055          +1   729     CONST_RTC_ON                            EQU     55H
  00FF          +1   730     CONST_RTC_off                           EQU     0ffH
  0064          +1   731     CONST_SYS_RTCOverTime                   EQU     100
                +1   732     
                +1   733     ;²å¿¨½«obuÖÐCellid¼ÇÂ¼µ¼Èëµ½¿¨Æ¬ÖÐ£¬Ò»´ÎÐ´Èëµ½¿¨Æ¬ÖÐ cellID µÄ×Ö½ÚÊ
  0008          +1   734     CONST_GSM_NUM                           EQU     8               ;40
                +1   735     ;//////////////////////////////////////MF³£Á¿¶¨Òå//////////////////////////////////////////
                             ////////
  0000          +1   736     CONST_MF_READ                           EQU     00H     ;Ö¸ÁîÀàÐÍ ¶Á¿é
  0001          +1   737     CONST_MF_WRITE                          EQU     01H     ;Ö¸ÁîÀàÐÍ Ð´¿é
  0002          +1   738     CONST_MF_DECREMENT                      EQU     02H     ;Ö¸ÁîÀàÐÍ ¿Û¿î
  0003          +1   739     CONST_MF_INCREMENT                      EQU     03H     ;Ö¸ÁîÀàÐÍ ³äÖµ
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    13

  0004          +1   740     CONST_MF_RESTOR                         EQU     04H     ;Ö¸ÁîÀàÐÍ ±¸·Ý¿é
                +1   741     
  00C0          +1   742     CONST_MF_RC500DECREMENT                 EQU     0C0H    ;RC500 ¿Û¿î
  00C1          +1   743     CONST_MF_RC500INCREMENT                 EQU     0C1H    ;RC500 ³äÖµ
                +1   744     ;//////////////////////////////////////DSRC³£Á¿¶¨Òå////////////////////////////////////////
                             //////////
  0004          +1   745     CONST_DSRC_MACCTRL                      EQU     4       ;MAC¿ØÖÆÓò
  0005          +1   746     CONST_DSRC_LLCCTRL                      EQU     5       ;LLC¿ØÖÆÓò
  0006          +1   747     CONST_DSRC_HEAD                         EQU     6       ;×Ö¶Î×ÖÍ·
  0007          +1   748     CONST_DSRC_ACTION                       EQU     7       ;Action
  0008          +1   749     CONST_DSRC_DID                          EQU     8       ;DSRC-DID
  0009          +1   750     CONST_DSRC_ACTIONTYPE                   EQU     9       ;ActionType
  000A          +1   751     CONST_DSRC_CONTAIN                      EQU     10      ;Contain
  000B          +1   752     CONST_DSRC_Fill                         EQU     11      ;Fill
  000C          +1   753     CONST_SSRC_FID                          EQU     12      ;ÎÄ¼þ±êÊ¶£¨FID£©
                +1   754     
  0000          +1   755     CONST_DSRC_FildIDAPPKey                 EQU     0       ;0¨D¨DETC Ó¦ÓÃÃÜÔ¿ÎÄ¼þ
  0001          +1   756     CONST_DSRC_FildIDVehicle                EQU     1       ;1¨D¨DETC Ó¦ÓÃ³µÁ¾ÐÅÏ¢ÎÄ¼þ
  0002          +1   757     CONST_DSRC_FildIDConsume                EQU     2       ;2-ETC Ó¦ÓÃ½»Ò×¼ÇÂ¼ÎÄ¼þ
  0003          +1   758     CONST_DSRC_FildIDHold                   EQU     3       ;3-ETC Ó¦ÓÃ±£ÁôÎÄ¼þ
                +1   759     
  0001          +1   760     CONST_DSRC_ChannelIDICC                 EQU     1
  0002          +1   761     CONST_DSRC_ChannelIDSAM                 EQU     2
                +1   762     ;//////////////////////////////////////AcionType³£Á¿¶¨Òå///////////////////////////////////
                             ////////////
  0000          +1   763     Const_ActionType_GetSecure              EQU     0       ;getSecure
  0001          +1   764     Const_ActionType_SetSecure              EQU     1       ;setSecure
  0002          +1   765     Const_ActionType_GetRand                EQU     2       ;getRand
  0003          +1   766     Const_ActionType_TransferChannel        EQU     3       ;transferChannel
  0004          +1   767     Const_ActionType_SetMMI                 EQU     4       ;SetMMI
                +1   768     ;//////////////////////////////////////Flash³£Á¿¶¨Òå///////////////////////////////////////
                             ///////////
  0058          +1   769     CONST_Flash_SysinfoLen                  EQU     88;39;38+12     ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0004          +1   770     CONST_Flash_0002Len                     EQU     4       ; 0002ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È  
  0028          +1   771     CONST_Flash_0012Len                     EQU     40      ; 0012ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
                +1   772     ;CONST_Flash_0015Len                    EQU     33      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1   773     CONST_Flash_0015Len                     EQU     43      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  003C          +1   774     CONST_Flash_0019Len                     EQU     60;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1   775     CONST_Flash_0019GBLen                   EQU     43;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0001          +1   776     CONST_Flash_CardTypeLEN                 EQU     1       ; ÉÏ´Î²å¿¨ÊÇ½Ó´¥£¬»¹ÊÇ·Ç½Ó´¥
                +1   777     ;CONST_Flash_SYSPARAMLEN                EQU     1       ; ÏµÍ³²ÎÊ
  0008          +1   778     CONST_Flash_BeaconIDUnixTimeLen         EQU     8       ; ÌìÏßID¼°unixtime
  0001          +1   779     CONST_FALSH_PREFlagLen                  EQU     1       ; Ô¤´¦Àí±ê¼Ç=88,±íÊ¾ÉÏ»ØÔ¤´¦Àí³É¹¦
                +1   780     
                +1   781     ;************************************************************************************
                +1   782     ;ÌØ±ð±¸×¢: ÓÉÓÚÔÚÔ¤¶Á0015/0012/0019Ê±ÔÝ´æÔÚÍâ´æµÄ³¤¶È³¬¹128¸ö×Ö½Ú£¬ËùÒÔ£¬Íâ´æ±äÁ¿µÄÆðÆôÎ»ÖÃ
                             £¬ÒªÔÚConst_Flash_FileLen
                +1   783     ;³¤¶ÈÖ®ºó£¬Const_Flash_FileLen = 8F£¬Èç¹ûÒÔºóConst_Flash_FileLen³¤¶È¸ÄÁË£¬ÄÇÍâ´æµÄÆôÊ¼Î»ÖÃÒ
                             ²Òª¸Ä
                +1   784     ;Íâ´æµÄÆôÊ¼Î»ÖÃ¶¨ÒåÔÚOBUmain.incÖÐXDATA_VARSTARTµÄÖµ
                +1   785     ;************************************************************************************
  00EC          +1   786     Const_Flash_FileLen                     EQU     CONST_Flash_SysinfoLen + CONST_Flash_0015Le
                             n + CONST_Flash_0019Len + CONST_Flash_0012Len + CONST_Flash_0002Len + CONST_Flash_CardTypeLEN 
                +1   787     
  0072          +1   788     CONST_FLASH_Block01                     EQU     72H
                +1   789     
  0072          +1   790     CONST_FLASH_STARTHIGH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
  0000          +1   791     CONST_FLASH_STARTLOW                    EQU     00H                                        
                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
                +1   792     
  0072          +1   793     CONST_FLASH_SYSINFOH                    EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ,LEN = 38 BYTE
  0000          +1   794     CONST_FLASH_SYSINFOL                    EQU     00H
                +1   795     
  0072          +1   796     CONST_FLASH_0002H                       EQU     CONST_FLASH_Block01;2EH                    
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    14

                                                  ; ÓÃ»§¿¨0002,LEN = 4 BYTE
  0058          +1   797     CONST_FLASH_0002L                       EQU     CONST_FLASH_SYSINFOL + CONST_Flash_SysinfoL
                             en
                +1   798     
  0072          +1   799     CONST_FLASH_0012H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0012,LEN = 24 BYTE
  005C          +1   800     CONST_FLASH_0012L                       EQU     CONST_FLASH_0002L + CONST_Flash_0002Len
                +1   801     
  0072          +1   802     CONST_FLASH_0015H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0015,LEN = 33 BYTE
  0084          +1   803     CONST_FLASH_0015L                       EQU     CONST_FLASH_0012L + CONST_Flash_0012Len
                +1   804     
  0072          +1   805     CONST_FLASH_0019H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0019,LEN = 43 BYTE      
  00AF          +1   806     CONST_FLASH_0019L                       EQU     CONST_FLASH_0015L + CONST_Flash_0015Len
                +1   807             
                +1   808     ;CONST_FLASH_01BlockH                   EQU     6EH;2EH                                    
                                  ; MF¿¨µÚ1¿éÊ¾Ý
                +1   809     ;CONST_FLASH_01BlockL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len
                +1   810             
                +1   811     ;CONST_FLASH_04BlockH                   EQU     6EH;2EH
                +1   812     ;CONST_FLASH_04BlockL                   EQU     CONST_FLASH_01BlockL + 16                  
                                  ;MF¿¨µÚ4¿éÊ¾Ý
                +1   813             
                +1   814     ;CONST_FLASH_10BlockH                   EQU     6EH;2EH
                +1   815     ;CONST_FLASH_10BlockL                   EQU     CONST_FLASH_04BlockL + 16                  
                                  ;MF¿¨µÚ16¿éÊ¾Ý
                +1   816             
  0072          +1   817     CONST_FLASH_LASTCARDH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ;ÉÏÒ»´Î²å¿¨ÀàÐÍ
  00EB          +1   818     CONST_FLASH_LASTCARDL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len    
                                  ;CONST_FLASH_10BlockL + 16
                +1   819             
                +1   820     ;CONST_FLASH_SYSPARAMH                  EQU     6EH;2EH                         ;ÏµÍ³²ÎÊ
                +1   821     ;CONST_FLASH_SYSPARAML                  EQU     CONST_FLASH_LASTCARDL + 1
                +1   822             
  0072          +1   823     CONST_Flash_BeaconIDUnixTimeH           EQU     CONST_FLASH_Block01;2EH
  00EC          +1   824     CONST_Flash_BeaconIDUnixTimeL           EQU     CONST_FLASH_LASTCARDL + 1       ; 8 byte Ìì
                             ÏßIDºÍunixtimeÊ±¼ä
                +1   825             
  0072          +1   826     CONST_FALSH_PREFlagH                    EQU     CONST_FLASH_Block01;2EH
  00F4          +1   827     CONST_FALSH_PREFlagL                    EQU     CONST_Flash_BeaconIDUnixTimeL + CONST_Flash
                             _BeaconIDUnixTimeLen;1 Byte
                +1   828             
  0072          +1   829     CONST_FALSH_PREFlag02H                  EQU     CONST_FLASH_Block01;2EH
  00F5          +1   830     CONST_FALSH_PREFlag02L                  EQU     CONST_FALSH_PREFlagL + 1        ;1      ;3 
                             Byte
                +1   831              
  0072          +1   832     CONST_FALSH_PREFlag03H                  EQU     CONST_FLASH_Block01;2EH
  00F6          +1   833     CONST_FALSH_PREFlag03L                  EQU     CONST_FALSH_PREFlag02L + 1      ;1      ;3 
                             Byte
                +1   834             
  0072          +1   835     CONST_FALSH_PowerH                      EQU     CONST_FLASH_Block01;2EH
  00F7          +1   836     CONST_FALSH_PowerL                      EQU     CONST_FALSH_PREFlag03L + 1      ;1      ;3 
                             Byte
                +1   837             
                +1   838     ;CONST_FLASH_SysRstH                    EQU     06CH
                +1   839     ;CONST_FLASH_SysRstL                    EQU     000H
                +1   840             
  006C          +1   841     CONST_FLASH_Sys0020H                    EQU     6ch;064H
  0000          +1   842     CONST_FLASH_Sys0020L                    EQU     000H
                +1   843             
  006A          +1   844     CONST_FLASH_Sys0020numH                 EQU     6ah;062H
  0000          +1   845     CONST_FLASH_Sys0020numL                 EQU     000H
                +1   846             
                +1   847     ;CONST_FLASH_SysHVH                     EQU     6CH;68h;062H
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    15

                +1   848     ;CONST_FLASH_SysHVL                     EQU     000H
                +1   849             
  00FF          +1   850     const_black_h                           EQU     0ffH
  00FF          +1   851     const_black_l                           EQU     0ffH
                +1   852             
  0000          +1   853     const_white_h                           EQU     000H;40h                                ; 0
                             0h
  0031          +1   854     const_white_l                           EQU     031H;80h                                ; 0
                             0h
                +1   855     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////////
                +1   856     ;(¾§Õñ*2)/(32*12*²¨ÌØÂÊ)                
                +1   857     ;CONST_SOF                              EQU     22118400                        ; 24576000
  0000          +1   858     CONST_SOF                               EQU     24576000                        ; µ±Ç°Ö÷Æµ¾
                             §ÌåÆµÂÊ
                +1   859     ;//////////////////////////////////////// PPS ³£Á¿ ¶¨Òå ///////////////////////////////////
                             ////////////
  0010          +1   860     CONST_PPS_9600                          EQU     10H                             
  0013          +1   861     CONST_PPS_38400                         EQU     13H
  0018          +1   862     CONST_PPS_115200                        EQU     18H
  0096          +1   863     CONST_PPS_230000                        EQU     96H
                +1   864     ;//////////////////////////////////////// ´®¿Ú ³£Á¿ ¶¨Òå //////////////////////////////////
                             /////////////
                +1   865             
  0000          +1   866     CONST_BAUD_9600                         EQU     00                              ; ²¨ÌØÂÊ±àÂ
                             ë
  0001          +1   867     CONST_BAUD_38400                        EQU     01
  0002          +1   868     CONST_BAUD_115200                       EQU     02
  0003          +1   869     CONST_BAUD_115200PC                     EQU     03
  0004          +1   870     CONST_BAUD_230000                       EQU     04
  0005          +1   871     CONST_BAUD_38400PC                      EQU     5
  0006          +1   872     CONST_BAUD_9600PC                       EQU     06                              ; ²¨ÌØÂÊ±àÂ
                             ë
                +1   873             
                +1   874     ;ÔÚ24.576MÏÂ´®¿ÚµÚÒ»¸ö×Ö½ÚÉè¶¨ÎªÒª¼ìË÷100MS = CONST_SOF/(10*(FF*FF) = 38 = 26H
  0010          +1   875     CONST_SOFTFIRSTSCANTIME                 EQU     16;8;32;16;8;10H        ; 10h   ;10h    ;10
                             H;0dH;10H    ;  26H
  00FF          +1   876     CONST_SOFTFIRSTSCANTIMEXX               EQU     0FFH    ; ESAM¿¨·Ç³£¹æÖ¸Áî£¬¼Ó´óËÑË÷Ê±¼äÏÞÖ
                             Æ[Èç80 E4Ö¸Áî]
  0070          +1   877     CONST_SOFTSECOND                        EQU     070H    ; 10H   ;  Èí½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼ä
                             ÏÞ³¤ CONST_SOFTSECOND*255¸öÖÜÆÚ
  0015          +1   878     CONST_HANDSECOND                        EQU     15H     ; 01AH[ÔÚ9600²¨ÌØÏÂ£¬Òª·Å¿íµ½1AH];Ó
                             ²½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼äÏÞ³¤ CONST_HANDSECOND*255¸öÖÜÆÚ
                +1   879                                                     
  0014          +1   880     CONST_SOFTBYTESP                        EQU     20;50;4 ;Èí´®¿Ú·¢ËÍ³ÌÐò×Ö½Ú¼ä¾à¿ØÖÆÓë_FUN_L
                             IB_DELAYSIMPLAYº¯ÊÅäºÏÊ¹ÓÃ
                +1   881     ;//////////////////////////////////////// Èí´®¿Ú ³£Á¿ ¶¨Òå ////////////////////////////////
                             ///////////////
                +1   882     ;CONST_BAUD_FULL9600                    EQU     637     ;2560
                +1   883     ;CONST_BAUD_HALF9600                    EQU     317     ;2560
                +1   884     ;CONST_BAUD_FULL9600                    EQU     576     ;2304
                +1   885     ;CONST_BAUD_HALF9600                    EQU     285     ;1152
                +1   886     ;CONST_BAUD_FULL9600                    EQU     76      ;2304
                +1   887     ;CONST_BAUD_HALF9600                    EQU     85      ;1152
                +1   888     ;CONST_BAUD_FULL38400                   EQU     157     ;640
                +1   889     ;CONST_BAUD_HALF38400                   EQU     77      ;213
                +1   890     ;CONST_BAUD_FULL38400                   EQU     141     ;576
                +1   891     ;CONST_BAUD_HALF38400                   EQU     69      ;288
                +1   892     ;CONST_BAUD_FULL115200                  EQU     50      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   893     ;CONST_BAUD_HALF115200                  EQU     21      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   894     ;CONST_BAUD_FULL115200                  EQU     45      ;192 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   895     ;CONST_BAUD_HALF115200                  EQU     21      ;96  Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    16

                +1   896             
  00B3          +1   897     CONST_BAUD_FULL9600                     EQU     179     ;[(24576000/9600)*(3.58/6)-12]/4-20
                             0=[2560*(3.59/6)-12]/4-250=(1527-12)/4-200=378.75=379-200=179
  0058          +1   898     CONST_BAUD_HALF9600                     EQU     88      ;[(24576000/9600/2)*(3.58/6)-12]/4-
                             100=[2560*(3.59/6)-12]/4=(763-12)/4-100=187.75=188-100=88
                +1   899     
  005D          +1   900     CONST_BAUD_FULL38400                    EQU     93      ;[(24576000/38400)*(3.58/6)-12]/4= 
                             [640 * (3.59/6)-12]/4 = (382-12)/4=92.5=93
  002D          +1   901     CONST_BAUD_HALF38400                    EQU     45      ;[(24576000/38400/2)*(3.58/6)-12]/4
                             = [320 * (3.59/6)-12]/4 = (191-12)/4=44.75=45
                +1   902     
  001D          +1   903     CONST_BAUD_FULL115200                   EQU     29      ;[(24576000/115200)*(3.58/6)-12]/4=
                             [213*(3.58/6)-12]/4=(127-12)/4=28.75=29
  000D          +1   904     CONST_BAUD_HALF115200                   EQU     13;     ;[(24576000/115200/2)*(3.58/6)-12]/
                             4=[115.5*(3.58/6)-12]/4=(64-12)/4=13
                +1   905     
  000F          +1   906     CONST_BAUD_FULL230000                   EQU     15;13   ;[(24576000/230000/2)*(3.58/6)]/4 =
                              64/4 = 16
  0008          +1   907     CONST_BAUD_HALF230000                   EQU     8;5     ;[(24576000/230000/2)*(3.58/6)]/4=[
                             115.5*(3.58/6)]/4=32/4=8
                +1   908             
  00B3          +1   909     CONST_BAUD_CURRENTBITFULL               EQU     CONST_BAUD_FULL9600
  0058          +1   910     CONST_BAUD_CURRENTBITHALF               EQU     CONST_BAUD_HALF9600
                +1   911     ;CONST_BAUD_BITHALF12                   EQU     CONST_BAUD_CURRENTBITHALF - 3
                +1   912     ;CONST_BAUD_BITFULL8                    EQU     CONST_BAUD_CURRENTBITFULL - 2
                +1   913     ;CONST_BAUD_BITFULL12                   EQU     CONST_BAUD_CURRENTBITFULL - 3
                +1   914     ;CONST_BAUD_BITFULL20                   EQU     CONST_BAUD_CURRENTBITFULL - 5
                +1   915     ;CONST_BAUD_BITFULL28                   EQU     CONST_BAUD_CURRENTBITFULL - 7
                +1   916             
  000C          +1   917     CONST_BAUD_BITHALF12                    EQU     3 + 9
  000B          +1   918     CONST_BAUD_BITFULL8                     EQU     2 + 9
  000C          +1   919     CONST_BAUD_BITFULL12                    EQU     3 + 9
  000E          +1   920     CONST_BAUD_BITFULL20                    EQU     5 + 9
  0010          +1   921     CONST_BAUD_BITFULL28                    EQU     7 + 9
                +1   922             
                +1   923     ;////////////////////////////////////////  Ó²´®¿Ú ³£Á¿ ¶¨Òå ///////////////////////////////
                             ////////////////
                +1   924     ;CONST_BAUD_HAND115200                  EQU     0FFH;(256 - CONST_SOF/(192*115200))     ;
                +1   925     ;CONST_BAUD_HAND38400                   EQU     0FDH;(256 - (CONST_SOF/(192*38400)))    ;
                +1   926     ;CONST_BAUD_HAND9600                    EQU     0F4H;(256 - CONST_SOF/(192*9600))       ;
                +1   927     
  00FC          +1   928     CONST_BAUD_HAND230000                   EQU     252     ;0FCH   24.576x1000000/(230000x6/3.
                             58=)/16 = 4 = F8H
  00F3          +1   929     CONST_BAUD_HAND115200PC                 EQU     243     ;243    ;24.576 / 0F3H  ;24576000 /
                              32179 = 764 / 16 = 47.7 = 48 = D0H
  00F8          +1   930     CONST_BAUD_HAND115200                   EQU     248     ;0F8H   ;24.576x1000000/(115200x6/3
                             .58=193073)/16 = 8 = F8H             
  00D8          +1   931     CONST_BAUD_HAND38400pc                  EQU     216     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  00E9          +1   932     CONST_BAUD_HAND38400                    EQU     233     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  0060          +1   933     CONST_BAUD_HAND9600pc                   EQU     96      ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1   934     
  00A3          +1   935     CONST_BAUD_HAND9600                     EQU     163     ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1   936     
                +1   937     ;24.576x1000000/(38400x9.6/3.58=102972)/16=15 = f1
                +1   938     ;24.576x1000000/(9600x9.6/3.58=25743)/16=60 = c4h
                +1   939     ;24.576x1000000/(230000x6/3.58=385475)/16=4 = fch
                +1   940     
                +1   941     ;////////////////////////////////////////  Ö¸Áî¼¯ /////////////////////////////////////////
                             //////
                +1   942     ;LL C2H LH 32H
                +1   943     ;ML 62H MH 12H
                +1   944     ;HL 32H HH 12H
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    17

                +1   945             
  0001          +1   946     CONST_ACT_L                             EQU     1
  0002          +1   947     CONST_ACT_M                             EQU     2
  0003          +1   948     CONST_ACT_H                             EQU     3
                +1   949             
  0002          +1   950     CONST_ACT_V                             EQU     CONST_ACT_M
                +1   951             
  000A          +1   952     CONST_ACT_L_L                           EQU     0ah;0C2H
  0006          +1   953     CONST_ACT_L_H                           EQU     06h;032H
                +1   954             
  0006          +1   955     CONST_ACT_M_L                           EQU     06h;062H
  0000          +1   956     CONST_ACT_M_H                           EQU     00h;012H
                +1   957             
  0000          +1   958     CONST_ACT_H_L                           EQU     00h;032H
  0001          +1   959     CONST_ACT_H_H                           EQU     01h;012H
                +1   960     
                     961     
                     962             
----                 963             RSEG    ?pr?HDLC?Mater
                     964             USING   0
                     965             
                     966     ;--------------------------------------------------------------------------
                     967     ;ÃèÊö:HDLC·¢ËÍº¯Ê
                     968     ;Íâ²¿²ÎÊ
                     969     ;BIT_CHANNELFLAG        ---     =1±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ1;=0±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ0
                     970     ;PIN_WAVE_CHANNEL0      ---     Î¢²¨ÊÕ·¢ÍÈ0
                     971     ;PIN_WAVE_CHANNEL1      ---     Î¢²¨ÊÕ·¢ÍÈ1
                     972     ;R7                     ---     ½«Òª·¢ËÍ×Ö·û´®bufµÄÖ¸Õë
                     973     ;R3                     ---     ½«Òª·¢ËÍÊ¾Ý×Ö½Ú³¤¶È
                     974     
                     975     ;ÄÚ²¿²ÎÊ:
                     976     ;R0
                     977     ;--------------------------------------------------------------------------
0000                 978     _FUN_HDLC_TX:
0000 7F01            979             MOV     R7,#1
0002 120000   F      980             CALL    Tx_Carrier_En
                     981             
0005 20B535          982             JB      Pin_unfix,HDLC_TX_unfix
0008 DFFE            983             DJNZ    R7,$
000A DFFE            984             DJNZ    R7,$
000C DFFE            985             DJNZ    R7,$
000E DFFE            986             DJNZ    R7,$
0010 DFFE            987             DJNZ    R7,$
0012 DFFE            988             DJNZ    R7,$
0014 DFFE            989             DJNZ    R7,$
0016 DFFE            990             DJNZ    R7,$
0018 DFFE            991             DJNZ    R7,$
001A DFFE            992             DJNZ    R7,$
001C DFFE            993             DJNZ    R7,$
001E DFFE            994             DJNZ    R7,$
0020 DFFE            995             DJNZ    R7,$
0022 DFFE            996             DJNZ    R7,$
0024 DFFE            997             DJNZ    R7,$
0026 DFFE            998             DJNZ    R7,$
0028 DFFE            999             DJNZ    R7,$
002A DFFE           1000             DJNZ    R7,$
002C DFFE           1001             DJNZ    R7,$
002E DFFE           1002             DJNZ    R7,$
0030 DFFE           1003             DJNZ    R7,$
0032 20B508         1004             JB      Pin_unfix,HDLC_TX_unfix
                    1005             
0035 7F00           1006             MOV     R7,#0
0037 120000   F     1007             CALL    Tx_Carrier_En
                    1008             
003A 020000   F     1009             JMP     ap_start
                    1010     
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    18

003D                1011     HDLC_TX_unfix:
003D 7800     F     1012             MOV     R0,#XDATA_TOTALNUML
003F C3             1013             CLR     C
                    1014                     ;MOVX   A,@R0
0040 758301         1015             MOV     DPH,#1
0043 8882           1016             MOV     DPL,R0
0045 E0             1017             MOVX    A,@DPTR
0046 F5F0           1018             MOV     B,A
0048 7401           1019             MOV     A,#1
004A 35F0           1020             ADDC    A,B
                    1021                     ;MOVX   @R0,A
                    1022             ;MOV    DPH,#1 
004C 8882           1023             MOV     DPL,R0 
004E F0             1024             MOVX    @DPTR,A
                    1025             
004F 18             1026             DEC     R0                      ;[1]
                    1027                     ;MOVX   A,@R0
                    1028             ;MOV    DPH,#1
0050 8882           1029             MOV     DPL,R0
0052 E0             1030             MOVX    A,@DPTR
0053 F5F0           1031             MOV     B,A     
0055 7400           1032             MOV     A,#0
0057 35F0           1033             ADDC    A,B
                    1034                     ;MOVX   @R0,A
                    1035             ;MOV    DPH,#1 
0059 8882           1036             MOV     DPL,R0 
005B F0             1037             MOVX    @DPTR,A
                    1038             ;µ±³¬¹0x800=2048´ÎÊ±£¬Ç¿ÐÐ¹Ø·¢ÉäÐÝÃß
005C B40400         1039             CJNE    A,#4,$+3
005F 4008           1040             JC      HDLC_TX_WDT
                    1041             
0061 7F00           1042             MOV     R7,#0
0063 120000   F     1043             CALL    Tx_Carrier_En
                    1044             
0066 020000   F     1045             JMP     ap_start
                    1046             
0069                1047     HDLC_TX_WDT:    
                    1048             ;---MOV REG_WDT_CONTR,#00111111B
                    1049             ;MOV    REG_WDT_CONTR,#00111110B
                    1050             ;240us
0069 7FFF           1051             MOV     R7,#255
006B DFFE           1052             DJNZ    R7,$
006D DFFE           1053             DJNZ    R7,$
006F DFFE           1054             DJNZ    R7,$
0071 DFFE           1055             DJNZ    R7,$
0073 DFFE           1056             DJNZ    R7,$
0075 DFFE           1057             DJNZ    R7,$
                    1058             
0077 120000   F     1059             CALL    HDLC_TX_T
                    1060             
007A 7F00           1061             MOV     R7,#00
007C 120000   F     1062             CALL    Tx_Carrier_En
                    1063             
                    1064             ;¿ª½ÓÊÕÊ¹ÄÜ
007F 7D0F           1065             MOV     R5,#15
0081 7E04           1066             MOV     R6,#4
0083 7F00     F     1067             MOV     R7,#XDATA_HOLD
0085 D200     F     1068             SETB    BIT_BUFADDR
0087 120000   F     1069             CALL    SPI_Read_Reg
                    1070             
008A 7800     F     1071             MOV     R0,#XDATA_HOLD
                    1072                     ;MOVX   A,@R0
008C 758301         1073             MOV     DPH,#1
008F 8882           1074             MOV     DPL,R0
0091 E0             1075             MOVX    A,@DPTR
0092 4402           1076             orl     A,#00000010B
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    19

                    1077                     ;MOVX   @R0,A
                    1078             ;MOV    DPH,#1 
0094 8882           1079             MOV     DPL,R0 
0096 F0             1080             MOVX    @DPTR,A
                    1081             
0097 7D0F           1082             MOV     R5,#15
0099 7E04           1083             MOV     R6,#4
009B 7F00     F     1084             MOV     R7,#XDATA_HOLD
009D 120000   F     1085             CALL    SPI_Write_Reg
                    1086     
00A0 22             1087             RET
                    1088     ;///////////////////////////////////////////////////////////////////////////
                    1089             
00A1                1090     HDLC_TX_T:
00A1 C282           1091             CLR     PIN_WAVE_CHANNEL1
                    1092      
                    1093     ;       MOV     R0,#XDATA_TXBUF                         ;1
00A3 758301         1094             mov     dph,#1
00A6 758200   F     1095             mov     dpl,#XDATA_TXBUF
00A9 E500     F     1096             MOV     A,DATA_DSRCTXLEN
                    1097             
00AB FB             1098             MOV     R3,a
                    1099             
                    1100             ;---²¹·¢16¸ö"1"---
00AC 7A10           1101             MOV     R2,#16                                  ;2
00AE                1102     HDLC_TX_SET:;(0,7)                                      ;1
                    1103     ;       CPL     PIN_WAVE_CHANNEL0                       ;4      
00AE 00             1104             NOP
00AF 00             1105             NOP
00B0 00             1106             NOP
00B1 00             1107             NOP
00B2 B282           1108             CPL     PIN_WAVE_CHANNEL1                       ;4
                    1109             
00B4 BA0200         1110             CJNE    R2,#2,$+3                               ;4
00B7 4005           1111             JC      HDLC_TX_SETOVER                         ;3
                    1112             
                    1113             ;*** Insert 48 - 19 = 29 Cycle ***
00B9 120000   F     1114             CALL    _FUN_LIB_DELAY29
                    1115             
00BC DAF0           1116             DJNZ    R2,HDLC_TX_SET                          ;4 = 8  
00BE                1117     HDLC_TX_SETOVER:
                    1118             ;*** Insert 48 - 17 = 31 Cycle ***
00BE 120000   F     1119             CALL    _FUN_LIB_DELAY31
                    1120             
                    1121             ;2 ·¢ËÍÇ°µ¼Âë·¢17¸öÁã
00C1 7A22           1122             MOV     R2,#34                                  ;2
00C3                1123     HDLC_TX_PRECODE:;(0,7)                                  ;1
                    1124     ;       CPL     PIN_WAVE_CHANNEL0                       ;4
00C3 00             1125             NOP
00C4 00             1126             NOP
00C5 00             1127             NOP
00C6 00             1128             NOP
00C7 B282           1129             CPL     PIN_WAVE_CHANNEL1                       ;4
                    1130             
00C9 BA0200         1131             CJNE    R2,#2,$+3                               ;4
00CC 4007           1132             JC      HDLC_TX_FALGCODESTART                   ;3
                    1133             
00CE 00             1134             NOP
00CF 00             1135             NOP
00D0 00             1136             NOP
                    1137             
00D1 00             1138             NOP
00D2 00             1139             NOP
                    1140             
00D3 DAEE           1141             DJNZ    R2,HDLC_TX_PRECODE                      ;4 = 8  
                    1142             ;3 ·¢ËÍ7E 0111 1110
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    20

00D5                1143     HDLC_TX_FALGCODESTART:  
00D5 00             1144             NOP                                             ;1
00D6 00             1145             NOP
00D7 00             1146             NOP
00D8 120000   F     1147             CALL    SEG_HDLC_TX7E;(10,8)
00DB 00             1148             NOP                                             ;1
                    1149             ;3 ·¢ËÍHDLCÊ¾Ý
                    1150             ;R0     ---     ç·³åÖ¸Õë
                    1151             ;R3     ---     ç·³å³¤¶È
                    1152             ;R2     ---     Î»Ñ­»·
                    1153             ;R4     ---     Î»¼ÇÂ¼
00DC                1154     HDLC_TX_SENDDATASTART:
00DC 7C00           1155             MOV     R4,#00H                                 ;2
00DE                1156     HDLC_TX_SENDDATA:                                       ;´óÑ­»·
00DE 7A08           1157             MOV     R2,#08                                  ;2
                    1158             ;MOVX   A,@R0
                    1159             ;MOV    DPH,#1
                    1160             ;MOV    DPL,R0                                  ;
00E0 E0             1161             MOVX    A,@DPTR                                 ;3                              ;3
00E1                1162     HDLC_TX_DATAFLAGCODE:                                   ;Ð¡Ñ­»·
00E1 13             1163             RRC     A                                       ;1
00E2 502C           1164             JNC     HDLC_TX_DATAFLAGCODE_0                  ;3
                    1165     ;**********************************************************************
00E4                1166     HDLC_TX_DATAFLAGCODE_1:
00E4 00             1167             NOP
00E5 00             1168             NOP
00E6 00             1169             NOP
00E7 00             1170             NOP
00E8 B282           1171             CPL     PIN_WAVE_CHANNEL1                       ;4
                    1172     
00EA 0C             1173             INC     R4                                      ;300
00EB BC0505         1174             CJNE    R4,#5,HDLC_TX_DATAFLAGCODE_1ZC          ;4   ²»µÈÓÚ5Ê±Ìø×ª
                    1175             ;²åÈëÒ»Î»µÄ"0"
                    1176             ;*** Insert 48-19= 29 cycle ***
00EE 120000   F     1177             CALL    _FUN_LIB_DELAY29
00F1 801D           1178             JMP     HDLC_TX_DATAFLAGCODE_0                  ;4 ²åÈëÒ»Î»µÄ"0"
00F3                1179     HDLC_TX_DATAFLAGCODE_1ZC:
                    1180             ; Insert 6 Cycle 
00F3 00             1181             NOP                                             ;1
00F4 00             1182             NOP                                             ;1
00F5 00             1183             NOP                                             ;1
00F6 00             1184             NOP                                             ;1
00F7 00             1185             NOP                                             ;1      
00F8 00             1186             NOP
                    1187             
00F9 BA0200         1188             CJNE    R2,#2,$+3                               ;4
00FC 4003           1189             JC      HDLC_TX_DATAFLAGCODE_1ZCOVER            ;3
                    1190             ;Ð¡Ñ­»·±È´óÑ­»·ÉÙÁË11Âö³å£¬²¹Æë
                    1191             ;*** Insert 12 Cycle ***
00FE 120000   F     1192             CALL    _FUN_LIB_DELAY12
0101                1193     HDLC_TX_DATAFLAGCODE_1ZCOVER:
0101 DADE           1194             DJNZ    R2,HDLC_TX_DATAFLAGCODE                 ;4
                    1195             
                    1196             ;INC    R0                                      ;3
0103 A3             1197             inc     dptr                                    ;1
0104 00             1198             nop
0105 00             1199             nop     
                    1200             
0106 DBD6           1201             DJNZ    R3,HDLC_TX_SENDDATA                     ;4 ·¢ËÍ×ÖÑ­»·
                    1202             
0108 00             1203             NOP                                             ;1
0109 00             1204             NOP
010A 00             1205             NOP     
010B 120000   F     1206             CALL    SEG_HDLC_TX7E                           ;(10,8)
010E 8040           1207             JMP     HDLC_TX_SENDENDCODE
                    1208     ;**********************************************************************
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    21

0110                1209     HDLC_TX_DATAFLAGCODE_0:                                 ;·¢ËÍ0
                    1210     ;       CPL     PIN_WAVE_CHANNEL0                       ;4
0110 00             1211             NOP
0111 00             1212             NOP
0112 00             1213             NOP
0113 00             1214             NOP
0114 B282           1215             CPL     PIN_WAVE_CHANNEL1                       ;4
0116 7C00           1216             MOV     R4,#0                                   ;2
0118 BA0200         1217             CJNE    R2,#2,$+3                               ;4  R2=1 Ìø×ª
011B 4017           1218             JC      HDLC_TX_DATAFLAGCODE_0FZC               ;3
011D                1219     HDLC_TX_DATAFLAGCODE_0ZC:                               ;0
                    1220             ;*** Insert Cycle 7 ***
011D 00             1221             NOP                                             ;1
011E 00             1222             NOP                                             ;1
011F 00             1223             NOP                                             ;1
0120 00             1224             NOP                                             ;1
0121 00             1225             NOP                                             ;1
0122 00             1226             NOP                                             ;1
0123 00             1227             NOP                                             ;1      
0124 00             1228             NOP
0125 00             1229             NOP
0126 00             1230             NOP
0127 00             1231             NOP
0128 B282           1232             CPL     PIN_WAVE_CHANNEL1                       ;4
                    1233             ;*** Insert Cycle 8 ***
012A 00             1234             NOP                                             ;1
012B 00             1235             NOP                                             ;1
012C 00             1236             NOP                                             ;1
012D 00             1237             NOP                                             ;1
012E 00             1238             NOP                                             ;1
012F 00             1239             NOP                                             ;1
0130 00             1240             NOP                                             ;1
0131 00             1241             NOP                                             ;1
0132 DAAD           1242             DJNZ    R2,HDLC_TX_DATAFLAGCODE                 ;4
0134                1243     HDLC_TX_DATAFLAGCODE_0FZC:
                    1244             ;4 Cycle
0134 00             1245             NOP
0135 00             1246             NOP
0136 00             1247             NOP
0137 00             1248             NOP
                    1249             ;INC    R0                                      ;3
0138 A3             1250             inc     dptr
0139 00             1251             nop     
013A 00             1252             nop
                    1253             
013B 00             1254             NOP
013C 00             1255             NOP
013D 00             1256             NOP
013E 00             1257             NOP
013F B282           1258             CPL     PIN_WAVE_CHANNEL1                       ;4
0141 00             1259             NOP
0142 00             1260             NOP
0143 00             1261             NOP
0144 DB98           1262             DJNZ    R3,HDLC_TX_SENDDATA                     ;4
                    1263             
0146 00             1264             NOP                                             ;1
0147 00             1265             NOP
0148 00             1266             NOP     
0149 120000   F     1267             CALL    SEG_HDLC_TX7E                           ;(10,8)
014C 00             1268             NOP
014D 00             1269             NOP
014E 00             1270             NOP
014F 00             1271             NOP
                    1272             ;--- ·¢ËÍºóµ¼Âë ---
0150                1273     HDLC_TX_SENDENDCODE:
0150 00             1274             NOP                                             ;1
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    22

0151 00             1275             NOP                                             ;1
0152 00             1276             NOP                                             ;1
0153 00             1277             NOP                                             ;1
0154 00             1278             NOP                                             ;1
0155 00             1279             NOP                                             ;1
                    1280             
0156 7A08           1281             MOV     R2,#8;35                                        ;2
0158                1282     HDLC_TX_ENDCODE:;(0,7)                                  ;1
                    1283     ;       CPL     PIN_WAVE_CHANNEL0                       ;4
0158 00             1284             NOP
0159 00             1285             NOP
015A 00             1286             NOP
015B 00             1287             NOP
015C B282           1288             CPL     PIN_WAVE_CHANNEL1                       ;4
                    1289     
015E BA0200         1290             CJNE    R2,#2,$+3                               ;4
0161 4007           1291             JC      HDLC_TX_OVER                            ;3
                    1292     
0163 00             1293             NOP
0164 00             1294             NOP
0165 00             1295             NOP
0166 00             1296             NOP
0167 00             1297             NOP
                    1298     
0168 DAEE           1299             DJNZ    R2,HDLC_TX_ENDCODE                      ;4 = 8  
016A                1300     HDLC_TX_OVER:
                    1301             ;--- ½«·¢ËÍÒ½ÅÀ­¸ß ---
016A 00             1302             NOP
016B 00             1303             NOP
016C 00             1304             NOP
016D 00             1305             NOP
016E C282           1306             CLR     PIN_WAVE_CHANNEL1
                    1307             
0170 22             1308             RET                                             ;4
                    1309     ;**********************************************************************
                    1310     ;SEG_HDLC_TX7E(¸½ÊôÐò¶Î)
                    1311     ;¸½Êô:_FUN_HDLC_TX
                    1312     ;ÃèÊö:·¢ËÍ7E
                    1313     ;**********************************************************************
0171                1314     SEG_HDLC_TX7E:;(10,8)
0171 00             1315             NOP
0172 00             1316             NOP
0173 00             1317             NOP
0174 00             1318             NOP
0175 B282           1319             CPL     PIN_WAVE_CHANNEL1                       ;4
                    1320             ;*** Insert Cycle 24 - 8 =16 ***
0177 120000   F     1321             CALL    _FUN_LIB_DELAY16
                    1322             
017A 00             1323             NOP
017B 00             1324             NOP
017C 00             1325             NOP
017D 00             1326             NOP
017E B282           1327             CPL     PIN_WAVE_CHANNEL1                       ;4
                    1328             ;*** Insert Cycle 24 - 10 =14 ***
0180 120000   F     1329             CALL    _FUN_LIB_DELAY14
                    1330             
0183 7A06           1331             MOV     R2,#6                                   ;2
0185                1332     HDLC_TX7E_FALGCODE:
0185 00             1333             NOP
0186 00             1334             NOP
0187 00             1335             NOP
0188 00             1336             NOP
0189 B282           1337             CPL     PIN_WAVE_CHANNEL1                       ;4
                    1338             
018B BA0200         1339             CJNE    R2,#2,$+3                               ;4
018E 4005           1340             JC      HDLC_TX7E_FALGCODE0                     ;3      
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    23

                    1341             ;*** Insert Cycle 48 - 19 = ***
0190 120000   F     1342             CALL    _FUN_LIB_DELAY29
                    1343     
0193 DAF0           1344             DJNZ    R2,HDLC_TX7E_FALGCODE                   ;4
0195                1345     HDLC_TX7E_FALGCODE0:
                    1346             ;*** Insert Cycle 48 - 15 = 33 ***
0195 120000   F     1347             CALL    _FUN_LIB_DELAY33
                    1348             
0198 00             1349             NOP
0199 00             1350             NOP
019A 00             1351             NOP
019B 00             1352             NOP
019C B282           1353             CPL     PIN_WAVE_CHANNEL1                       ;4      
                    1354             ;*** Insert Cycle 24 - 8 = 16***
019E 120000   F     1355             CALL    _FUN_LIB_DELAY16        
                    1356     
01A1 00             1357             NOP
01A2 00             1358             NOP
01A3 00             1359             NOP
01A4 00             1360             NOP
01A5 B282           1361             CPL     PIN_WAVE_CHANNEL1                       ;4      
                    1362             
01A7 22             1363             RET
                    1364     ;--------------------------------------------------------------------------
                    1365     ;ÃèÊö:HDLC½ÓÊÕº¯Ê
                    1366     ;Íâ²¿²ÎÊ
                    1367     ;BIT_HDLCLASTD          ---     ¼ÇÂ¼HDLCÉÏÒ»´ÎµÄsµçÆ½×´Ì¬
                    1368     ;PIN_WAVE_RX            ---     Î¢²¨½ÓÊÕÍÈ
                    1369     ;DATA_RXBUF             ---     ½«Òª½ÓÊÕ×Ö·û´®bufµÄÖ¸Õë
                    1370     ;ÄÚ²¿²ÎÊ:
                    1371     ;R4                     ---     ¼ÇÂ¼"1"µÄ¸öÊ
                    1372     ;·µ»ØÖµ:
                    1373     ;R3                     ---     ½ÓÊÕµÄÊ¾Ý³¤¶È
                    1374     ;--------------------------------------------------------------------------
                    1375     ;96 / 72
01A8                1376     _FUN_HDLC_RX:
                    1377             ;ÒÑ½ÓÊÕµ½Ê¾Ý£¬ÏÈÇå£¬·ÀÖ¹ÊÕµ½ÉÏÒ»´ÎµÄÊ¾Ý
01A8 209224         1378             JB      Pin_5823BK_IRQ,HDLC_5823_RXLOOPS
                    1379     ;       MOV     A,#3    
                    1380     ;       CALL    _FUN_TEST_DISPLAY
01AB 7D0F           1381             MOV     R5,#15
01AD 7E04           1382             MOV     R6,#4
01AF 7F00     F     1383             MOV     R7,#XDATA_HOLD
01B1 D200     F     1384             SETB    BIT_BUFADDR
01B3 120000   F     1385             CALL    SPI_Read_Reg
                    1386             
01B6 7800     F     1387             MOV     R0,#XDATA_HOLD+3
                    1388                     ;MOVX   A,@R0
01B8 758301         1389             MOV     DPH,#1
01BB 8882           1390             MOV     DPL,R0
01BD E0             1391             MOVX    A,@DPTR
01BE 440F           1392             ORL     A,#00001111B
                    1393                     ;MOVX   @R0,A
01C0 758301         1394             MOV     DPH,#1 
01C3 8882           1395             MOV     DPL,R0 
01C5 F0             1396             MOVX    @DPTR,A
                    1397             
01C6 7D0F           1398             MOV     R5,#15
01C8 7E04           1399             MOV     R6,#4
01CA 7F00     F     1400             MOV     R7,#XDATA_HOLD
01CC 120000   F     1401             CALL    SPI_Write_Reg
01CF                1402     HDLC_5823_RXLOOPS:
                    1403             ;¿ª½Ó ÊÕ Ê¹ÄÜ
01CF 7D0F           1404             MOV     R5,#15
01D1 7E04           1405             MOV     R6,#4
01D3 7F00     F     1406             MOV     R7,#XDATA_HOLD
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    24

01D5 D200     F     1407             SETB    BIT_BUFADDR
01D7 120000   F     1408             CALL    SPI_Read_Reg
                    1409             
01DA 7800     F     1410             MOV     R0,#XDATA_HOLD
                    1411                     ;MOVX   A,@R0
01DC 758301         1412             MOV     DPH,#1
01DF 8882           1413             MOV     DPL,R0
01E1 E0             1414             MOVX    A,@DPTR
01E2 4402           1415             orl     A,#00000010B; ·ÀÖ¹AGCËøËÀ¼°·ÀÖ¹5823½ÓÊÕÃ»ÓÐÊ¹ÄÜ
                    1416                     ;MOVX   @R0,A
                    1417             ;MOV    DPH,#1 
01E4 8882           1418             MOV     DPL,R0 
01E6 F0             1419             MOVX    @DPTR,A
                    1420             
01E7 7D0F           1421             MOV     R5,#15
01E9 7E04           1422             MOV     R6,#4
01EB 7F00     F     1423             MOV     R7,#XDATA_HOLD
01ED 120000   F     1424             CALL    SPI_Write_Reg
                    1425             
01F0                1426     HDLC_5823_RXLOOP:
01F0 2092FD         1427             JB      Pin_5823BK_IRQ,HDLC_5823_RXLOOP 
                    1428     ;       MOV     A,#4
                    1429     ;       CALL    _FUN_TEST_DISPLAY
                    1430     
                    1431             ;=== ¶Á½ÓÊÕ±ê¼Ç¼Ä´æÆ÷ ===
                    1432             ;reg6.2 =1 ±íÊ¾½ÓÊÕ³ö´í[½âÂë³ö´í£¬»òCRC³ö´íÕâÒ»Î»¶¼ÎªÖÃ]
                    1433             ;reg6.1 = 1 ±íÊ¾½ÓÊÕµ½Ê¾Ý       
01F3 7D06           1434             MOV     R5,#06h
01F5 7E04           1435             MOV     R6,#4
01F7 7F00     F     1436             MOV     R7,#XDATA_HOLD
01F9 D200     F     1437             SETB    BIT_BUFADDR
01FB 120000   F     1438             CALL    SPI_Read_Reg
                    1439             
01FE 7800     F     1440             MOV     R0,#XDATA_HOLD
                    1441                     ;MOVX   A,@R0
0200 758301         1442             MOV     DPH,#1
0203 8882           1443             MOV     DPL,R0
0205 E0             1444             MOVX    A,@DPTR
                    1445             ;½ÓÊÕ³ö´í±ê¼Ç
0206 A2E2           1446             MOV     C,ACC.2
0208 4004           1447             JC      hdlc_5823_ClearRXEr
                    1448             ;½ÓÊÕÕ¿Ë±ê¼Ç
020A A2E1           1449             MOV     C,ACC.1
020C 4023           1450             JC      hdlc_5823_ReceviceData
                    1451             ;½ÓÊÕ³ö´í£¬Çåreg15.26 ½ÓÊÕ³ö´í±ê¼Ç£¬²»Çå£¬Ôò5823»á´¦ÔÚÒ»Ö±ÔÚidleÄ£Ê½,irq½Å»áÒ»Ö±Îªµ
                             Í
                    1452             ;×¢ÒâÇåÊÇÓÃ 1 Çå£¬²»ÊÇ 0 
                    1453             ;×¢Òâ½ÓÊÕ³ö´í±ê¼Ç£¬²»Çå£¬Ôò5823»á´¦ÔÚÒ»Ö±ÔÚidleÄ£Ê½,irq½Å»áÒ»Ö±ÎªµÍ
020E                1454     hdlc_5823_ClearRXEr:
020E 7D0F           1455             MOV     R5,#15
0210 7E04           1456             MOV     R6,#4
0212 7F00     F     1457             MOV     R7,#XDATA_HOLD
0214 D200     F     1458             SETB    BIT_BUFADDR
0216 120000   F     1459             CALL    SPI_Read_Reg
                    1460             
0219 7800     F     1461             MOV     R0,#XDATA_HOLD+3
                    1462                     ;MOVX   A,@R0
021B 758301         1463             MOV     DPH,#1
021E 8882           1464             MOV     DPL,R0
0220 E0             1465             MOVX    A,@DPTR
0221 440F           1466             ORL     A,#00001111B
                    1467                     ;MOVX   @R0,A
                    1468             ;MOV    DPH,#1 
0223 8882           1469             MOV     DPL,R0 
0225 F0             1470             MOVX    @DPTR,A
                    1471             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    25

0226 7D0F           1472             MOV     R5,#15
0228 7E04           1473             MOV     R6,#4
022A 7F00     F     1474             MOV     R7,#XDATA_HOLD
022C 120000   F     1475             CALL    SPI_Write_Reg
                    1476             
022F 80BF           1477             JMP     hdlc_5823_RXLOOP
                    1478             
                    1479     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /
                    1480             ;½ÓÊÕµ½Ê¾Ý£¬
                    1481             ;¶ÁReg5<0~7>£¬FIFO ½ÓÊÕ³¤¶È
                    1482             ;Èç¹û½ÓÊÕµ½µÄÊ¾Ý³¤¶ÈÎª 0
                    1483             ;       ÇåReg 15.25 
                    1484             ;       ·ñÔò£¬¶Á¿Õ FIFO [Reg16]
                    1485             ;×¢ÒâÇåÊÇÓÃ 1 Çå£¬²»ÊÇ 0 
                    1486             ;×¢Òâ½ÓÊÕ±ê¼Ç£¬²»Çå£¬Ôò5823»á´¦ÔÚÒ»Ö±ÔÚidleÄ£Ê½,irq½Å»áÒ»Ö±ÎªµÍ
                    1487             ;×¢Òâ¶Á¿ÕFIFO»òÇå½ÓÊÕ±ê¼Ç£¬¶¼»á½«5823´ÓidleÄ£Ê½×ª³É½ÓÊÕÄ£Ê½
                    1488     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /
0231                1489     hdlc_5823_ReceviceData: 
                    1490             ;=== ¹Ø½ÓÊÕÊ¹ÄÜ ===
0231 7D0F           1491             MOV     R5,#15
0233 7E04           1492             MOV     R6,#4
0235 7F00     F     1493             MOV     R7,#XDATA_HOLD
0237 D200     F     1494             SETB    BIT_BUFADDR
0239 120000   F     1495             CALL    SPI_Read_Reg
                    1496             
023C 7800     F     1497             MOV     R0,#XDATA_HOLD
                    1498                     ;MOVX   A,@R0
023E 758301         1499             MOV     DPH,#1
0241 8882           1500             MOV     DPL,R0
0243 E0             1501             MOVX    A,@DPTR
0244 54FD           1502             anl     A,#11111101B
                    1503                     ;MOVX   @R0,A
                    1504             ;MOV    DPH,#1 
0246 8882           1505             MOV     DPL,R0 
0248 F0             1506             MOVX    @DPTR,A
                    1507             
0249 7D0F           1508             MOV     R5,#15
024B 7E04           1509             MOV     R6,#4
024D 7F00     F     1510             MOV     R7,#XDATA_HOLD
024F 120000   F     1511             CALL    SPI_Write_Reg 
                    1512             
                    1513             ;=== ¶Á½ÓÊÕÊ¾Ý³¤¶È ===
0252 7D05           1514             MOV     R5,#05h
0254 7E04           1515             MOV     R6,#04h
0256 7F00     F     1516             MOV     R7,#XDATA_HOLD
0258 D200     F     1517             SETB    BIT_BUFADDR
025A 120000   F     1518             CALL    SPI_Read_Reg
025D 7800     F     1519             MOV     R0,#XDATA_HOLD
                    1520                     ;MOVX   A,@R0
                    1521             ;MOV    DPH,#1
025F 8882           1522             MOV     DPL,R0
0261 E0             1523             MOVX    A,@DPTR
                    1524             ;mov    r7,#200
                    1525             ;call   _fun_lib_delay
0262 7021           1526             JNZ     hdlc_5823_RXFIFO
                    1527             ;½ÓÊÕlen¶ÈÎª0Ê±£¬Çå½ÓÊÕÎ»
0264 7D0F           1528             MOV     R5,#15
0266 7E04           1529             MOV     R6,#4
0268 7F00     F     1530             MOV     R7,#XDATA_HOLD
026A D200     F     1531             SETB    BIT_BUFADDR
026C 120000   F     1532             CALL    SPI_Read_Reg
026F 7800     F     1533             MOV     R0,#XDATA_HOLD+3
                    1534                     ;MOVX   A,@R0
                    1535             ;MOV    DPH,#1
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    26

0271 8882           1536             MOV     DPL,R0
0273 E0             1537             MOVX    A,@DPTR
0274 440F           1538             ORL     A,#00001111B
                    1539                     ;MOVX   @R0,A
                    1540             ;MOV    DPH,#1 
0276 8882           1541             MOV     DPL,R0 
0278 F0             1542             MOVX    @DPTR,A 
0279 7D0F           1543             MOV     R5,#15
027B 7E04           1544             MOV     R6,#4
027D 7F00     F     1545             MOV     R7,#XDATA_HOLD
027F 120000   F     1546             CALL    SPI_Write_Reg   
0282 020000   F     1547             JMP     hdlc_5823_RXLOOP        
0285                1548     hdlc_5823_RXFIFO:       ;¼õCRC ³¤¶Èºó,½ÓÊÕ³¤¶ÈÊÇ·ñ´óÓÚ0
0285 14             1549             DEC     A
0286 14             1550             DEC     A
0287 6085           1551             JZ      hdlc_5823_ClearRXEr     
0289 B48100         1552             CJNE    A,#129,$+3
028C 4003           1553             JC      hdlc_5823_RXFIFOLENOK
028E 020000   F     1554             JMP     hdlc_5823_ClearRXEr
0291                1555     hdlc_5823_RXFIFOLENOK:
0291 7800     F     1556             MOV     R0,#DATA_DSRCRXLEN
0293 F6             1557             MOV     @R0,a
                    1558             
0294 D285           1559             SETB    PIN_ESAM_RST    
0296 D283           1560             SETB    PIN_ESAM_RX
                    1561             
                    1562             ;=== ½ÓÊ¾Ý ===
0298 7D10           1563             MOV     R5,#16
029A 7800     F     1564             MOV     R0,#XDATA_HOLD
                    1565                     ;MOVX   A,@R0
                    1566             ;MOV    DPH,#1
029C 8882           1567             MOV     DPL,R0
029E E0             1568             MOVX    A,@DPTR
029F FE             1569             MOV     R6,A            
                    1570             ;-------------------------------------------
                    1571             ;Èë¿Ú£º R5      Òª¶ÁµÄ¼Ä´æÆ÷
                    1572             ;       R6      ¶Á³öR6¸ö×Ö½Ú
                    1573             ;       R7      ¶Á³ö×Ö½Ú´æ·ÅµØÖ·Ö¸Õë
                    1574             ;MOV    R7,#XDATA_HOLD
                    1575             ;-------------------------------------------    
02A0 C200     F     1576             CLR     BIT_BUFADDR
02A2 7F00     F     1577             MOV     R7,#DATA_RXBUF
02A4 C006           1578             PUSH    AR6
02A6 120000   F     1579             CALL    SPI_Read_Reg
02A9 D006           1580             POP     AR6
                    1581             ;=== Çå±ê¼Ç ===
02AB 7D0F           1582             MOV     R5,#15
02AD 7E04           1583             MOV     R6,#4
02AF 7F00     F     1584             MOV     R7,#XDATA_HOLD
02B1 D200     F     1585             SETB    BIT_BUFADDR
02B3 120000   F     1586             CALL    SPI_Read_Reg    
02B6 7800     F     1587             MOV     R0,#XDATA_HOLD+3
                    1588                     ;MOVX   A,@R0
                    1589             ;MOV    DPH,#1
02B8 8882           1590             MOV     DPL,R0
02BA E0             1591             MOVX    A,@DPTR
02BB 440F           1592             ORL     A,#00001111B
                    1593                     ;MOVX   @R0,A
                    1594             ;MOV    DPH,#1 
02BD 8882           1595             MOV     DPL,R0 
02BF F0             1596             MOVX    @DPTR,A 
02C0 7D0F           1597             MOV     R5,#15
02C2 7E04           1598             MOV     R6,#4
02C4 7F00     F     1599             MOV     R7,#XDATA_HOLD
02C6 120000   F     1600             CALL    SPI_Write_Reg   
02C9 7800     F     1601             MOV     R0,#DATA_DSRCRXLEN
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    27

02CB E6             1602             MOV     A,@R0
02CC F503           1603             MOV     AR3,A   
                    1604             
02CE 22             1605             RET     
                    1606     ;//////////////////////////////////////////////////////////////////////////////////////////
                             //////////////
                    1607     ;ÃèÊö:;5830³õÊ¼»¯
                    1608     ;Íâ²¿²ÎÊ
                    1609     ;PIN_5830_CLK           ---     5830Ê±ÖÓÏß
                    1610     ;PIN_5830_DATA          ---     5830Ê¾ÝÏß
                    1611     ;PIN_5830_EN            ---     5830Ê¹ÄÜÏß
                    1612     ;BIT_CHANNELFLAG        ---     = 1±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ1,  =0 ±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ0
                    1613     ;12.288
                    1614     ;5.79G  20 A0   04 EF   32 00   00 07   83 38
                    1615     ;5.80G  AB 80   04 EF   32 00   00 07   83 38
                    1616     ;16.3849M
                    1617     ;579
                    1618     ;00952009AF320000078338
                    1619     ;580
                    1620     ;00FD5009AF320000078338
                    1621     ;--------------------------------------------------------------------------
02CF                1622     _FUN_HDLC_5830Init:
02CF C2C2           1623             CLR     Pin_5823BK_SCLK
02D1 D290           1624             SETB    Pin_5823BK_CS   
02D3 120000   F     1625             CALL    _FUN_HDLC_5822Init
02D6 120000   F     1626             CALL    _FUN_HDLC_Frexiaodui
02D9 22             1627             RET
                    1628     ;-----------------------------------------------------
                    1629     ;SPI¶ÁÐ´×Ó³ÌÐò
                    1630     ;Èë¿Ú£ºACC
                    1631     ;³ö¿Ú£ºACC
                    1632     ;-----------------------------------------------------
02DA                1633     SPI_RW:
02DA C290           1634             CLR     Pin_5823BK_CS
02DC C007           1635             PUSH    AR7
02DE 7F08           1636             MOV     R7,#8
02E0                1637     SPI_RW_1:       
02E0 33             1638             RLC     A                       ;1
02E1 9281           1639             MOV     Pin_5823BK_MOSI,C       ;4
02E3 D2C2           1640             SETB    Pin_5823BK_SCLK         ;4
02E5 A280           1641             MOV     C,Pin_5823BK_MISO       ;4
02E7 C2C2           1642             CLR     Pin_5823BK_SCLK         ;4
                    1643             
02E9 DFF5           1644             DJNZ    R7,SPI_RW_1             ;4
02EB C281           1645             CLR     Pin_5823BK_MOSI         ;
02ED 33             1646             RLC     A                       ;
02EE D007           1647             POP     AR7                     ;
                    1648                     
02F0 22             1649             RET
                    1650     ;////////////////////////////////////////////////////////       
02F1                1651     SPI_R:  
02F1 D2C2           1652             SETB    Pin_5823BK_SCLK         ;4
02F3 A280           1653             MOV     C,Pin_5823BK_MISO       ;3
02F5 C2C2           1654             CLR     Pin_5823BK_SCLK         ;4
02F7 33             1655             RLC     A                       ;1
                    1656     
02F8 D2C2           1657             SETB    Pin_5823BK_SCLK         ;4
02FA A280           1658             MOV     C,Pin_5823BK_MISO       ;3
02FC C2C2           1659             CLR     Pin_5823BK_SCLK         ;4
02FE 33             1660             RLC     A                       ;1
                    1661     
02FF D2C2           1662             SETB    Pin_5823BK_SCLK         ;4
0301 A280           1663             MOV     C,Pin_5823BK_MISO       ;3
0303 C2C2           1664             CLR     Pin_5823BK_SCLK         ;4
0305 33             1665             RLC     A                       ;1
                    1666             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    28

0306 D2C2           1667             SETB    Pin_5823BK_SCLK         ;4
0308 A280           1668             MOV     C,Pin_5823BK_MISO       ;3
030A C2C2           1669             CLR     Pin_5823BK_SCLK         ;4
030C 33             1670             RLC     A                       ;1
                    1671             
030D D2C2           1672             SETB    Pin_5823BK_SCLK         ;4
030F A280           1673             MOV     C,Pin_5823BK_MISO       ;3
0311 C2C2           1674             CLR     Pin_5823BK_SCLK         ;4
0313 33             1675             RLC     A                       ;1
                    1676             
0314 D2C2           1677             SETB    Pin_5823BK_SCLK         ;4
0316 A280           1678             MOV     C,Pin_5823BK_MISO       ;3
0318 C2C2           1679             CLR     Pin_5823BK_SCLK         ;4
031A 33             1680             RLC     A                       ;1p
                    1681             
031B D2C2           1682             SETB    Pin_5823BK_SCLK         ;4
031D A280           1683             MOV     C,Pin_5823BK_MISO       ;3
031F C2C2           1684             CLR     Pin_5823BK_SCLK         ;4
0321 33             1685             RLC     A                       ;1
                    1686             
0322 D2C2           1687             SETB    Pin_5823BK_SCLK         ;4
0324 A280           1688             MOV     C,Pin_5823BK_MISO       ;3
0326 C2C2           1689             CLR     Pin_5823BK_SCLK         ;4
0328 33             1690             RLC     A                       ;1
                    1691             
0329 22             1692             RET
                    1693     ;--------------------------------------------------------------
                    1694     ;²ÎÊ
                    1695     ;Èë¿Ú£º R5      Òª¶ÁµÄ¼Ä´æÆ÷
                    1696     ;       R6      ¶Á³öR6¸ö×Ö½Ú
                    1697     ;       R7      ¶Á³ö×Ö½Ú´æ·ÅµØÖ·Ö¸Õë
                    1698     ;       A       ---     ½ÓÊÕÖµ
                    1699     ;--------------------------------------------------------------
032A                1700     SPI_Read_Reg:           ;´ÓR5ËùÖ¸ÏòµÄBK5822¼Ä´æÆ÷¶Á³öR6¸ö×Ö½Ú´æ·Åµ½Ö¸ÕëR7ËùÖ¸ÏòµÄÄÚ´æ(DATA/
                             IDATA)
032A C290           1701             CLR     Pin_5823BK_CS
032C 7A01           1702             MOV     R2,#1;0
032E DAFE           1703             DJNZ    R2,$
                    1704     
0330 ED             1705             MOV     A,R5
0331 120000   F     1706             CALL    SPI_W   ;¶ÁµØÖ·ÃüÁî
                    1707             
0334 EF             1708             MOV     A,R7
0335 F8             1709             MOV     R0,A
0336                1710     SPI_Read_Reg_1:
0336 7400           1711             MOV     A,#0
0338 120000   F     1712             CALL    SPI_R
033B 200003   F     1713             JB      BIT_BUFADDR,SPI_Read_Reg_movx
033E                1714     SPI_Read_Reg_mov:
033E F6             1715             MOV     @R0,A
033F 800E           1716             jmp     SPI_Read_Reg_movov
0341                1717     SPI_Read_Reg_movx:
                    1718                     ;MOVX   @R0,A
0341 C083           1719             push    dph
0343 C082           1720             push    dpl
0345 758301         1721             MOV     DPH,#1 
0348 8882           1722             MOV     DPL,R0 
034A F0             1723             MOVX    @DPTR,A
034B D082           1724             pop     dpl
034D D083           1725             pop     dph
                    1726     
034F                1727     SPI_Read_Reg_movov:
034F 08             1728             INC     R0
0350 DEE4           1729             DJNZ    R6,SPI_Read_Reg_1
0352 7A01           1730             MOV     R2,#1;0
0354 DAFE           1731             DJNZ    R2,$
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    29

0356 D290           1732             SETB    Pin_5823BK_CS
                    1733             
0358 22             1734             RET     
                    1735     ;--------------------------------------------------------------
                    1736     ;²ÎÊ
                    1737     ;       A       ---     ·¢ËÍÖµ
                    1738     ;--------------------------------------------------------------
0359                1739     SPI_W:
0359 33             1740             RLC     A                       ;1
035A 9281           1741             MOV     Pin_5823BK_MOSI,C       ;3
035C D2C2           1742             SETB    Pin_5823BK_SCLK         ;4
035E C2C2           1743             CLR     Pin_5823BK_SCLK         ;4
                    1744             
0360 33             1745             RLC     A                       ;1
0361 9281           1746             MOV     Pin_5823BK_MOSI,C       ;3
0363 D2C2           1747             SETB    Pin_5823BK_SCLK         ;4
0365 C2C2           1748             CLR     Pin_5823BK_SCLK         ;4
                    1749     
0367 33             1750             RLC     A                       ;1
0368 9281           1751             MOV     Pin_5823BK_MOSI,C       ;3
036A D2C2           1752             SETB    Pin_5823BK_SCLK         ;4
036C C2C2           1753             CLR     Pin_5823BK_SCLK         ;4
                    1754     
036E 33             1755             RLC     A                       ;1
036F 9281           1756             MOV     Pin_5823BK_MOSI,C       ;3
0371 D2C2           1757             SETB    Pin_5823BK_SCLK         ;4
0373 C2C2           1758             CLR     Pin_5823BK_SCLK         ;4
                    1759     
0375 33             1760             RLC     A                       ;1
0376 9281           1761             MOV     Pin_5823BK_MOSI,C       ;3
0378 D2C2           1762             SETB    Pin_5823BK_SCLK         ;4
037A C2C2           1763             CLR     Pin_5823BK_SCLK         ;4
                    1764     
037C 33             1765             RLC     A                       ;1
037D 9281           1766             MOV     Pin_5823BK_MOSI,C       ;3
037F D2C2           1767             SETB    Pin_5823BK_SCLK         ;4
0381 C2C2           1768             CLR     Pin_5823BK_SCLK         ;4
                    1769     
0383 33             1770             RLC     A                       ;1
0384 9281           1771             MOV     Pin_5823BK_MOSI,C       ;3
0386 D2C2           1772             SETB    Pin_5823BK_SCLK         ;4
0388 C2C2           1773             CLR     Pin_5823BK_SCLK         ;4
                    1774     
                    1775     
038A 33             1776             RLC     A                       ;1
038B 9281           1777             MOV     Pin_5823BK_MOSI,C       ;3
038D D2C2           1778             SETB    Pin_5823BK_SCLK         ;4
038F C2C2           1779             CLR     Pin_5823BK_SCLK         ;4
                    1780      
0391 C281           1781             CLR     Pin_5823BK_MOSI
0393 22             1782             RET
                    1783     ;-------------------------------------------------------
                    1784     ;´ÓR5ËùÖ¸ÏòµÄBK5822¼Ä´æÆ÷Ð´ÈëR6¸ö×Ö½Ú,Ö¸ÕëR7ËùÖ¸ÏòµÄÄÚ´æ
                    1785     ;Èë¿Ú£º R5      ÒªÐ´µÄ¼Ä´æÆ÷
                    1786     ;       R6      Ð´ÈëR6¸ö×Ö½Ú
                    1787     ;       R7      Ð´Èë×Ö½Ú´æ·ÅµØÖ·Ö¸Õë
                    1788     ;³ö¿Ú£º R5      ²Ù×÷×´Ì¬·µ»Ø
                    1789     ;-------------------------------------------------------
0394                1790     SPI_Write_Reg:          ;´ÓR5ËùÖ¸ÏòµÄBK5822¼Ä´æÆ÷Ð´ÈëR6¸ö×Ö½Ú,Ö¸ÕëR7ËùÖ¸ÏòµÄÍâ´æ(XDATA)
0394 C290           1791             CLR     Pin_5823BK_CS
                    1792             
0396 7A01           1793             MOV     R2,#1
0398 DAFE           1794             DJNZ    R2,$
                    1795             
039A ED             1796             MOV     A,R5
039B 4420           1797             ORL     A,#020H
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    30

039D 120000   F     1798             Call    SPI_W
                    1799             
03A0 FD             1800             MOV     R5,A
03A1 EF             1801             MOV     A,R7
03A2 F8             1802             MOV     R0,A
                    1803     
03A3                1804     SPI_Write_Reg_1:        
                    1805                     ;MOVX   A,@R0
03A3 C083           1806             push    dph
03A5 C082           1807             push    dpl             
03A7 758301         1808             MOV     DPH,#1
03AA 8882           1809             MOV     DPL,R0
03AC E0             1810             MOVX    A,@DPTR
03AD D082           1811             pop     dpl
03AF D083           1812             pop     dph
                    1813     
03B1 120000   F     1814             CALL    SPI_W
03B4 08             1815             INC     R0      
03B5 DEEC           1816             DJNZ    R6,SPI_Write_Reg_1
                    1817             
03B7 7A01           1818             MOV     R2,#1
03B9 DAFE           1819             DJNZ    R2,$
                    1820             
03BB D290           1821             SETB    Pin_5823BK_CS
                    1822             
03BD 22             1823             RET
                    1824     ;-----------------------------------------------------------------
                    1825     ;½ÓÊÕÊ¹ÄÜ»ò½ûÖ¹
                    1826     ;Èë¿Ú£º R7      1Ê¹ÄÜ½ÓÊÕ£¬0½û½ÓÊÕ
                    1827     ;set REG15<1> 1 or 0
                    1828     ;´Ó¸ß×Ö½Ú¿ªÊ¼
                    1829     ;-----------------------------------------------------------------
03BE                1830     Rx_En:
03BE C290           1831             CLR     Pin_5823BK_CS
                    1832             
03C0 7A0A           1833             MOV     R2,#10
03C2 DAFE           1834             DJNZ    R2,$
                    1835             
03C4 740F           1836             MOV     A,#15
03C6 4420           1837             ORL     A,#020H         ;Ð´ÃüÁî
03C8 120000   F     1838             CALL    SPI_W
                    1839     
03CB 900000   F     1840             MOV     DPTR,#RegArrOBU
                    1841                                     ;15 * 4 = 60    ¼Ä´æÆ÷15
03CE EF             1842             MOV     A,R7
03CF 7007           1843             JNZ     Rx_En_1         ;¹Ø½ÓÊÕ
                    1844             
03D1 743C           1845             MOV     A,#60
03D3 93             1846             MOVC    A,@A+DPTR
03D4 54FD           1847             ANL     A,#0FDH;1111 1101
03D6 8005           1848             JMP     Rx_En_2
                    1849             
03D8                1850     Rx_En_1:                        ;´ò¿ª½ÓÊÕ
03D8 743C           1851             MOV     A,#60
03DA 93             1852             MOVC    A,@A+DPTR
03DB 4402           1853             ORL     A,#002H
                    1854     
03DD                1855     Rx_En_2:
03DD 120000   F     1856             CALL    SPI_W
                    1857             
03E0 743D           1858             MOV     A,#61
03E2 93             1859             MOVC    A,@A+DPTR
03E3 120000   F     1860             CALL    SPI_W
                    1861             
03E6 743E           1862             MOV     A,#62
03E8 93             1863             MOVC    A,@A+DPTR
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    31

03E9 120000   F     1864             CALL    SPI_W
                    1865             
03EC 743F           1866             MOV     A,#63
03EE 93             1867             MOVC    A,@A+DPTR
03EF 120000   F     1868             CALL    SPI_W
                    1869             
03F2 7A0A           1870             MOV     R2,#10
03F4 DAFE           1871             DJNZ    R2,$    
                    1872     
03F6 D290           1873             SETB    Pin_5823BK_CS   
                    1874             
03F8 22             1875             RET
                    1876     ;-----------------------------------------------------------
                    1877     ;·¢ËÍÔØ²¨Ê¹ÄÜ»ò½ûÖ¹
                    1878     ;Èë¿Ú£º R7      1Ê¹ÄÜ½ÓÊÕ£¬0½û½ÓÊÕ
                    1879     ;set REG4<1,0>  1 or 0
                    1880     ;´ÓµÍ×Ö½Ú¿ªÊ¼ 16 17 18 19
                    1881     ;-----------------------------------------------------------------
03F9                1882     Tx_Carrier_En:
03F9 C290           1883             CLR     Pin_5823BK_CS
                    1884             
03FB 7A0A           1885             mov     r2,#10
03FD DAFE           1886             djnz    r2,$
                    1887             
03FF 7404           1888             MOV     A,#4
0401 4420           1889             ORL     A,#020H                 ;Ð´ÃüÁî
0403 120000   F     1890             CALL    SPI_W                   ;
                    1891             
0406 900000   F     1892             MOV     DPTR,#RegArrOBU         ;
0409 EF             1893             MOV     A,R7                    ;
040A 6023           1894             JZ      Tx_Carrier_En_1         ;
                    1895                                             ;¹Ø±Õ·¢ÔØ²¨
040C                1896     Tx_Carrier_En_0:                        ;Ê¹ÄÜ·¢ÔØ²¨                             
040C 7413           1897             MOV     A,#19
040E 93             1898             MOVC    A,@A+DPTR
040F 120000   F     1899             CALL    SPI_W
                    1900             
0412 7412           1901             MOV     A,#18
0414 93             1902             MOVC    A,@A+DPTR
0415 120000   F     1903             CALL    SPI_W
                    1904             
0418 7411           1905             MOV     A,#17
041A 93             1906             MOVC    A,@A+DPTR
041B 120000   F     1907             CALL    SPI_W
                    1908             
041E 7410           1909             MOV     A,#16
0420 93             1910             MOVC    A,@A+DPTR
0421 54FD           1911             ANL     A,#11111101B;0FDH
0423 54FE           1912             ANL     A,#11111110B;0FEH
0425 120000   F     1913             CALL    SPI_W
                    1914             
0428 7A0A           1915             mov     r2,#10
042A DAFE           1916             djnz    r2,$
                    1917             
042C D290           1918             SETB    Pin_5823BK_CS   
042E 22             1919             RET
                    1920             
042F                1921     Tx_Carrier_En_1:        ;Ê¹ÄÜ·¢ÔØ²¨
042F 7413           1922             MOV     A,#19
0431 93             1923             MOVC    A,@A+DPTR
0432 120000   F     1924             CALL    SPI_W
                    1925             
0435 7412           1926             MOV     A,#18
0437 93             1927             MOVC    A,@A+DPTR
0438 120000   F     1928             CALL    SPI_W
                    1929             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    32

043B 7411           1930             MOV     A,#17
043D 93             1931             MOVC    A,@A+DPTR
043E 120000   F     1932             CALL    SPI_W
                    1933             
0441 7410           1934             MOV     A,#16
0443 93             1935             MOVC    A,@A+DPTR
0444 4402           1936             ORL     A,#00000010B;002H
0446 4401           1937             ORL     A,#00000001B;001H
0448 120000   F     1938             CALL    SPI_W
                    1939             
044B 7A0A           1940             mov     r2,#10
044D DAFE           1941             djnz    r2,$
                    1942             
044F D290           1943             SETB    Pin_5823BK_CS   
0451 22             1944             RET     
                    1945     ;///////////////////////////////////////////////////////////////////
                    1946     ;0 µ÷ÖÆ½ÓÊÕ
                    1947     ;1 °ü½ÓÊÕ
0452                1948     Rx_Carrier_En:
0452 C290           1949             CLR     Pin_5823BK_CS
                    1950             
0454 7A0A           1951             mov     R2,#10
0456 DAFE           1952             djnz    R2,$
                    1953             
0458 7404           1954             MOV     A,#4
045A 4420           1955             ORL     A,#020H                 ;Ð´ÃüÁî
045C 120000   F     1956             CALL    SPI_W                   ;
                    1957             
045F 900000   F     1958             MOV     DPTR,#RegArrOBU         ;
0462 EF             1959             MOV     A,R7                    ;
0463 7021           1960             JnZ     Rx_Carrier_En_1         ;
                    1961     ;0 °ü½ÓÊÕ
0465                1962     Rx_Carrier_En_0:                                                
0465 7413           1963             MOV     A,#19
0467 93             1964             MOVC    A,@A+DPTR
0468 120000   F     1965             CALL    SPI_W
                    1966             
046B 7412           1967             MOV     A,#18
046D 93             1968             MOVC    A,@A+DPTR
046E 120000   F     1969             CALL    SPI_W
                    1970             
0471 7411           1971             MOV     A,#17
0473 93             1972             MOVC    A,@A+DPTR
0474 120000   F     1973             CALL    SPI_W
                    1974             
0477 7410           1975             MOV     A,#16
0479 93             1976             MOVC    A,@A+DPTR
                    1977             ;orl    A,#00000010b
047A 54FE           1978             anl     A,#11111110b    
047C 120000   F     1979             CALL    SPI_W
                    1980             
047F 7A0A           1981             mov     r2,#10
0481 DAFE           1982             djnz    r2,$
                    1983             
0483 D290           1984             SETB    Pin_5823BK_CS   
0485 22             1985             RET
                    1986             
                    1987     ;1 µ÷ÖÆ½ÓÊÕ
0486                1988     Rx_Carrier_En_1:         
0486 7413           1989             MOV     A,#19
0488 93             1990             MOVC    A,@A+DPTR
0489 120000   F     1991             CALL    SPI_W
                    1992             
048C 7412           1993             MOV     A,#18
048E 93             1994             MOVC    A,@A+DPTR
048F 120000   F     1995             CALL    SPI_W
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    33

                    1996             
0492 7411           1997             MOV     A,#17
0494 93             1998             MOVC    A,@A+DPTR
0495 120000   F     1999             CALL    SPI_W
                    2000             
0498 7410           2001             MOV     A,#16
049A 93             2002             MOVC    A,@A+DPTR
049B 4401           2003             orl     A,#00000001b
049D 120000   F     2004             CALL    SPI_W
                    2005             
04A0 7A0A           2006             mov     r2,#10
04A2 DAFE           2007             djnz    r2,$
                    2008             
04A4 D290           2009             SETB    Pin_5823BK_CS   
04A6 22             2010             RET     
                    2011     ;///////////////////////////////////////////////////////////////////
                    2012     ;---------------------------------------------------------
                    2013     ;Ê¹ÄÜÉÏµç»ò¹Ø±ÕÉÏµç
                    2014     ;Èë¿Ú£º R7
                    2015     ;set REG9<0> 1 or 0
                    2016     ;´Ó¸ß×Ö½Ú¿ªÊ¼
                    2017     ;---------------------------------------------------------
04A7                2018     _Power_Up:
04A7 C290           2019             CLR     Pin_5823BK_CS
                    2020             
04A9 7A0A           2021             mov     r2,#10
04AB DAFE           2022             djnz    r2,$
                    2023                     
04AD 7409           2024             MOV     A,#9
04AF 4420           2025             ORL     A,#020H                 ;Ð´ÃüÁî
04B1 120000   F     2026             CALL    SPI_W
                    2027             
04B4 900000   F     2028             MOV     DPTR,#RegArrOBU         ;9 * 4 = 36     ¼Ä´æÆ÷15
04B7 EF             2029             MOV     A,R7
04B8 7007           2030             JNZ     Power_Up_1              ;¹Ø½ÓÊÕ
                    2031             
04BA 7424           2032             MOV     A,#36
04BC 93             2033             MOVC    A,@A+DPTR
04BD 54FE           2034             ANL     A,#0FEH
04BF 8005           2035             JMP     Power_Up_2
                    2036             
04C1                2037     Power_Up_1:                             ;´ò¿ª½ÓÊÕ
04C1 7424           2038             MOV     A,#36
04C3 93             2039             MOVC    A,@A+DPTR
04C4 4401           2040             ORL     A,#001H
                    2041     
04C6                2042     Power_Up_2:
04C6 120000   F     2043             CALL    SPI_W
                    2044             
04C9 7425           2045             MOV     A,#37
04CB 93             2046             MOVC    A,@A+DPTR
04CC 120000   F     2047             CALL    SPI_W
                    2048             
04CF 7426           2049             MOV     A,#38
04D1 93             2050             MOVC    A,@A+DPTR
04D2 120000   F     2051             CALL    SPI_W
                    2052             
04D5 7427           2053             MOV     A,#39
04D7 93             2054             MOVC    A,@A+DPTR
04D8 120000   F     2055             CALL    SPI_W
                    2056     
04DB 7A0A           2057             mov     r2,#10
04DD DAFE           2058             djnz    r2,$
                    2059             
04DF D290           2060             SETB    Pin_5823BK_CS
                    2061             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    34

04E1 22             2062             RET
                    2063     ;---------------------------------------------------------
                    2064     ;»½ÐÑÊ¹ÄÜ»ò½ûÓÃ
                    2065     ;Èë¿Ú£º R7
                    2066     ;set REG4<7> wkdisen 1 or 0
                    2067     ;´ÓµÍ×Ö½Ú¿ªÊ¼ 16 17 18 19
                    2068     ;---------------------------------------------------------
04E2                2069     Wake_up:
04E2 C290           2070             CLR     Pin_5823BK_CS
                    2071             
04E4 7404           2072             MOV     A,#4
04E6 4420           2073             ORL     A,#020H         ;Ð´ÃüÁî
04E8 120000   F     2074             CALL    SPI_RW
                    2075     
04EB 900000   F     2076             MOV     DPTR,#RegArrOBU
                    2077                                     ;4 * 4 = 16     ¼Ä´æÆ÷4
04EE 7413           2078             MOV     A,#19
04F0 93             2079             MOVC    A,@A+DPTR
04F1 120000   F     2080             CALL    SPI_RW
                    2081             
04F4 7412           2082             MOV     A,#18
04F6 93             2083             MOVC    A,@A+DPTR
04F7 120000   F     2084             CALL    SPI_RW
                    2085             
04FA 7411           2086             MOV     A,#17
04FC 93             2087             MOVC    A,@A+DPTR
04FD 120000   F     2088             CALL    SPI_RW
                    2089             
0500 EF             2090             MOV     A,R7
0501 600B           2091             JZ      Wake_up_1
                    2092             ;WriteArr[3]&=0x7f;             ;»½ÐÑ½ûÓÃ
0503 7410           2093             MOV     A,#16
0505 93             2094             MOVC    A,@A+DPTR
0506 547F           2095             ANL     A,#07FH
0508 120000   F     2096             CALL    SPI_RW
                    2097             
050B D290           2098             SETB    Pin_5823BK_CS
                    2099             
050D 22             2100             RET
                    2101             
050E                2102     Wake_up_1:                              
                    2103             ;WriteArr[3]|=0x80;             ;»½ÐÑÊ¹ÄÜ
050E 7410           2104             MOV     A,#16
0510 93             2105             MOVC    A,@A+DPTR
0511 4480           2106             ORL     A,#080H
0513 120000   F     2107             CALL    SPI_RW
                    2108             
0516 D290           2109             SETB    Pin_5823BK_CS
                    2110             
0518 22             2111             RET
                    2112             
                    2113     ;------------------------------------------------------------
                    2114     ;½øÈë´»úÄ£Ê½
                    2115     ;       
                    2116     ;------------------------------------------------------------
0519                2117     _Enter_Idle_Mode:
                    2118             
0519 7F00           2119             MOV     R7,#0
051B 120000   F     2120             CALL    Rx_En
                    2121             
051E 7AC8           2122             MOV     R2,#200
0520 DAFE           2123             djnz    R2,$
0522 7A64           2124             MOV     R2,#100
0524 DAFE           2125             djnz    R2,$
                    2126     
0526 7F00           2127             MOV     R7,#0
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    35

0528 120000   F     2128             CALL    Tx_Carrier_En
                    2129             
052B 7AC8           2130             MOV     R2,#200
052D DAFE           2131             djnz    R2,$
052F 7A64           2132             MOV     R2,#100
0531 DAFE           2133             djnz    R2,$
                    2134             
0533 7F01           2135             MOV     R7,#1
0535 120000   F     2136             CALL    _Power_Up
                    2137             
0538 22             2138             RET
                    2139     ;-----------------------------------------------------------
                    2140     ;½øÈëË¯ÃßÄ£Ê½
                    2141     ;-----------------------------------------------------------
0539                2142     _Enter_Sleep_Mode:
                    2143             
                    2144     ;       PUSH    AR7
                    2145     ;       PUSH    AR6
                    2146     ;       PUSH    AR5
                    2147     ;       PUSH    AR4
                    2148     ;       PUSH    AR3
                    2149     ;       PUSH    AR2
                    2150     ;       PUSH    AR1
                    2151     ;       PUSH    AR0
                    2152             
0539 7F00           2153             MOV     R7,#00
053B 120000   F     2154             CALL    Rx_En
                    2155             
                    2156     ;       MOV     R2,#200
                    2157     ;       djnz    r2,$
                    2158     ;       MOV     R2,#100
                    2159     ;       djnz    r2,$
                    2160             
053E 7F00           2161             MOV     R7,#000
0540 120000   F     2162             CALL    Tx_Carrier_En
                    2163     
                    2164     ;       MOV     R2,#200
                    2165     ;       djnz    r2,$
                    2166     ;       MOV     R2,#100
                    2167     ;       djnz    r2,$
                    2168             
                    2169             ;=== soft wake end ===
0543 7D09           2170             MOV     R5,#9
0545 7E04           2171             MOV     R6,#4
0547 7F00     F     2172             MOV     R7,#XDATA_HOLD
0549 D200     F     2173             SETB    BIT_BUFADDR
054B 120000   F     2174             CALL    SPI_Read_Reg
                    2175             
                    2176             ;Ð´1
054E 7800     F     2177             MOV     R0,#XDATA_HOLD+1
                    2178                     ;MOVX   A,@R0
0550 758301         2179             MOV     DPH,#1
0553 8882           2180             MOV     DPL,R0
0555 E0             2181             MOVX    A,@DPTR
0556 4404           2182             ORL     A,#00000100B;
                    2183                     ;MOVX   @R0,A
0558 758301         2184             MOV     DPH,#1 
055B 8882           2185             MOV     DPL,R0 
055D F0             2186             MOVX    @DPTR,A 
055E 7D09           2187             MOV     R5,#9
0560 7E04           2188             MOV     R6,#4
0562 7F00     F     2189             MOV     R7,#XDATA_HOLD
0564 120000   F     2190             CALL    SPI_Write_Reg
                    2191             
                    2192             ;Ð´0
0567 7800     F     2193             MOV     R0,#XDATA_HOLD+1
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    36

                    2194                     ;MOVX   A,@R0
0569 758301         2195             MOV     DPH,#1
056C 8882           2196             MOV     DPL,R0
056E E0             2197             MOVX    A,@DPTR
056F 54FB           2198             anl     A,#11111011B
                    2199                     ;MOVX   @R0,A
0571 758301         2200             MOV     DPH,#1 
0574 8882           2201             MOV     DPL,R0 
0576 F0             2202             MOVX    @DPTR,A 
0577 7D09           2203             MOV     R5,#9
0579 7E04           2204             MOV     R6,#4
057B 7F00     F     2205             MOV     R7,#XDATA_HOLD
057D 120000   F     2206             CALL    SPI_Write_Reg           
                    2207             
                    2208     
0580 7F00           2209             MOV     R7,#0
0582 120000   F     2210             CALL    _Power_Up
                    2211             
0585 C282           2212             clr     PIN_WAVE_CHANNEL1
                    2213             
                    2214     ;       POP     AR0
                    2215     ;       POP     AR1
                    2216     ;       POP     AR2
                    2217     ;       POP     AR3
                    2218     ;       POP     AR4
                    2219     ;       POP     AR5
                    2220     ;       POP     AR6
                    2221     ;       POP     AR7             
                    2222             
0587 22             2223             RET
                    2224     ;------------------------------------------------------------
                    2225     ;½øÈë½ÓÊÕÄ£Ê½
                    2226     ;------------------------------------------------------------
0588                2227     _Enter_Receive_Mode:
                    2228             
0588 7F00           2229             MOV     R7,#0
058A 120000   F     2230             CALL    Tx_Carrier_En
                    2231             
058D 7AC8           2232             MOV     R2,#200
058F DAFE           2233             djnz    r2,$
0591 7A64           2234             MOV     R2,#100
0593 DAFE           2235             djnz    R2,$
                    2236             
0595 7F01           2237             MOV     R7,#1
0597 120000   F     2238             CALL    _Power_Up
                    2239             
059A 7AC8           2240             MOV     R2,#200
059C DAFE           2241             Djnz    R2,$
059E 7A64           2242             MOV     R2,#100
05A0 DAFE           2243             Djnz    R2,$
                    2244             
05A2 7F01           2245             MOV     R7,#1
05A4 120000   F     2246             CALL    Rx_En
                    2247             
05A7 22             2248             RET
                    2249     ;------------------------------------------------------------
                    2250     ;½øÈë·¢ÔØ²¨Ä£Ê½
                    2251     ;------------------------------------------------------------
05A8                2252     _Enter_TX_Carrier_Mode:
05A8 7F01           2253             MOV     R7,#1
05AA 120000   F     2254             CALL    _Power_Up
                    2255             
05AD 7AC8           2256             MOV     R2,#200
05AF DAFE           2257             djnz    r2,$
05B1 7A64           2258             MOV     R2,#100
05B3 DAFE           2259             djnz    r2,$
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    37

                    2260     
05B5 7F01           2261             MOV     R7,#1
05B7 120000   F     2262             CALL    Tx_Carrier_En
05BA 22             2263             RET
                    2264     ;------------------------------------------------------------
                    2265     ;½øÈë»½ÐÑÄ£Ê½
                    2266     ;------------------------------------------------------------
05BB                2267     _Enable_Wake_Up:
05BB 7F00           2268             MOV     R7,#0
05BD 120000   F     2269             CALL    Rx_En
                    2270             
05C0 7AC8           2271             MOV     R2,#200
05C2 DAFE           2272             djnz    r2,$
05C4 7A64           2273             MOV     R2,#100
05C6 DAFE           2274             djnz    r2,$
                    2275     
05C8 7F00           2276             MOV     R7,#0
05CA 120000   F     2277             CALL    Tx_Carrier_En
                    2278             
05CD 7AC8           2279             MOV     R2,#200
05CF DAFE           2280             djnz    r2,$
05D1 7A64           2281             MOV     R2,#100
05D3 DAFE           2282             djnz    r2,$
                    2283             
05D5 7F00           2284             MOV     R7,#0
05D7 120000   F     2285             CALL    _Power_Up
                    2286             
05DA 7AC8           2287             MOV     R2,#200
05DC DAFE           2288             djnz    r2,$
05DE 7A64           2289             MOV     R2,#100
05E0 DAFE           2290             djnz    r2,$
                    2291             
05E2 7F01           2292             MOV     R7,#1
05E4 120000   F     2293             CALL    Wake_up
05E7 22             2294             RET
                    2295     ;------------------------------------------------------------
                    2296     ;¹Ø±Õ»½ÐÑÄ£Ê½
                    2297     ;------------------------------------------------------------
05E8                2298     _Disable_Wake_Up:
05E8 7F00           2299             MOV     R7,#0
05EA 120000   F     2300             CALL    Rx_En
                    2301             
05ED 7AC8           2302             MOV     R2,#200
05EF DAFE           2303             djnz    r2,$
05F1 7A64           2304             MOV     R2,#100
05F3 DAFE           2305             djnz    r2,$
                    2306             
05F5 7F00           2307             MOV     R7,#0
05F7 120000   F     2308             CALL    _Power_Up
                    2309             
05FA 7AC8           2310             MOV     R2,#200
05FC DAFE           2311             djnz    r2,$
05FE 7A64           2312             MOV     R2,#100
0600 DAFE           2313             djnz    r2,$
                    2314             
0602 7F00           2315             MOV     R7,#0
0604 120000   F     2316             CALL    Tx_Carrier_En
                    2317             
0607 7AC8           2318             MOV     R2,#200
0609 DAFE           2319             djnz    r2,$
060B 7A64           2320             MOV     R2,#100
060D DAFE           2321             djnz    r2,$
                    2322             
060F 7F00           2323             MOV     R7,#0
0611 120000   F     2324             CALL    Wake_up
0614 22             2325             RET
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    38

                    2326     
                    2327     ;---------------------------------------------------------
                    2328     ;·¢ËÍDIO pin Ê¾ÝÁ÷ÅäÖÃ
                    2329     ;REG15[3:2] = 11        0-orl-0CH
                    2330     ;REG15[15] = 1          1-orl-80H
                    2331     ;REG4[1] = 0            0-anl-fdH
                    2332     ;REG4[22] = 1           2-orl-40H
                    2333     
                    2334     ;DB     03DH,0EFH,05CH,02CH,;//4        DIO ·¢ËÍ
                    2335     ;DB     0DFH,093H,074H,007H;,//15       DIO ·¢ËÍ
                    2336     ;---------------------------------------------------------
                    2337     ;_TXDIOpin:
                    2338     ;       CLR     Pin_5823BK_CS
                    2339     ;       MOV     R2,#10
                    2340     ;       DJNZ    R2,$
                    2341             
                    2342     ;       MOV     DPTR,#RegArrOBU
                    2343     
                    2344     ;       MOV     A,#15
                    2345     ;       ORL     A,#020H         ;Ð´ÃüÁî
                    2346     ;       CALL    SPI_RW
                    2347             
                    2348     ;       MOV     A,#60
                    2349     ;       MOVC    A,@A+DPTR
                    2350     ;       ORL     A,#00CH
                    2351     ;       CALL    SPI_RW
                    2352             
                    2353     ;       MOV     A,#61
                    2354     ;       MOVC    A,@A+DPTR
                    2355     ;       ORL     A,#080H
                    2356     ;       CALL    SPI_RW
                    2357             
                    2358     ;       MOV     A,#62
                    2359     ;       MOVC    A,@A+DPTR
                    2360     ;       CALL    SPI_RW
                    2361             
                    2362     ;       MOV     A,#63
                    2363     ;       MOVC    A,@A+DPTR
                    2364     ;       CALL    SPI_RW
                    2365             
                    2366     ;       MOV     R2,#10
                    2367     ;       DJNZ    R2,$
                    2368     ;       SETB    Pin_5823BK_CS   
                    2369             
                    2370     ;       MOV     R2,#200
                    2371     ;       DJNZ    R2,$
                    2372     ;       MOV     R2,#100
                    2373     ;       DJNZ    R2,$
                    2374             
                    2375     ;       CLR     Pin_5823BK_CS
                    2376     ;       mov     r2,#10
                    2377     ;       djnz    r2,$
                    2378             
                    2379     ;       MOV     A,#4
                    2380     ;       ORL     A,#020H         ;Ð´ÃüÁî
                    2381     ;       CALL    SPI_RW
                    2382     
                    2383     ;       MOV     DPTR,#RegArrOBU
                    2384                                             ;¹Ø±Õ·¢ÔØ²¨
                    2385     ;       MOV     A,#19
                    2386     ;       MOVC    A,@A+DPTR
                    2387     ;       CALL    SPI_RW
                    2388             
                    2389     ;       MOV     A,#18
                    2390     ;       MOVC    A,@A+DPTR
                    2391     ;       ORL     A,#040H
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    39

                    2392     ;       CALL    SPI_RW
                    2393             
                    2394     ;       MOV     A,#17
                    2395     ;       MOVC    A,@A+DPTR
                    2396     ;       CALL    SPI_RW
                    2397             
                    2398     ;       MOV     A,#16
                    2399     ;       MOVC    A,@A+DPTR
                    2400     ;       ANL     A,#0FDH
                    2401     ;       CALL    SPI_RW
                    2402             
                    2403     ;       mov     r2,#10
                    2404     ;       djnz    r2,$
                    2405             
                    2406     ;       SETB    Pin_5823BK_CS   
                    2407             ;-----SETB      TX_SW_BK        ;·¢Éä¹©µç
                    2408             
                    2409     ;       RET
                    2410     ;-----------------------------------------------------------------
                    2411     ;¸´Î»»òÊ¹ÄÜBK5822 SPI¼Ä´æÆ÷
                    2412     ;Èë¿Ú£º R7      1Ê¹ÄÜ£¬0¸´Î»
                    2413     ;set REG15<0> 1 or 0
                    2414     ;´Ó¸ß×Ö½Ú¿ªÊ¼
                    2415     ;-----------------------------------------------------------------
0615                2416     _BK_SPIRST:             ;¸´Î»»òÊ¹ÄÜ BK5822 SPI¼Ä´æÆ÷    R7:1 Ê¹ÄÜ£¬0 ¸´Î»       
0615 C290           2417             CLR     Pin_5823BK_CS
                    2418             
0617 740F           2419             MOV     A,#15
0619 4420           2420             ORL     A,#020H                 ;Ð´ÃüÁî
061B 120000   F     2421             CALL    SPI_RW
                    2422             
061E 900000   F     2423             MOV     DPTR,#RegArrOBU         ;15 * 4 = 60    ¼Ä´æÆ÷15
0621 EF             2424             MOV     A,R7
0622 7007           2425             JNZ     BK_SPIRST_1             ;0¸´Î»
                    2426             
0624 743C           2427             MOV     A,#60
0626 93             2428             MOVC    A,@A+DPTR
0627 54FE           2429             ANL     A,#0FEH
0629 8005           2430             JMP     BK_SPIRST_2
                    2431             
062B                2432     BK_SPIRST_1:                            ;1Ê¹ÄÜ
062B 743C           2433             MOV     A,#60
062D 93             2434             MOVC    A,@A+DPTR
062E 4401           2435             ORL     A,#001H
0630                2436     BK_SPIRST_2:
0630 120000   F     2437             CALL    SPI_RW
                    2438             
0633 743D           2439             MOV     A,#61
0635 93             2440             MOVC    A,@A+DPTR
0636 120000   F     2441             CALL    SPI_RW
                    2442             
0639 743E           2443             MOV     A,#62
063B 93             2444             MOVC    A,@A+DPTR
063C 120000   F     2445             CALL    SPI_RW
                    2446             
063F 743F           2447             MOV     A,#63
0641 93             2448             MOVC    A,@A+DPTR
0642 120000   F     2449             CALL    SPI_RW
                    2450     
0645 D290           2451             SETB    Pin_5823BK_CS
                    2452             
0647 22             2453             RET
                    2454     ;-----------------------------------------------------------
0648                2455     _BK5822_RST:    ;¸´Î»BK5822
                    2456     ;------rst SPI------------------------
0648 7F00           2457             MOV     R7,#0
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    40

064A 120000   F     2458             CALL    _BK_SPIRST
                    2459             
                    2460     ;       MOV     R7,#255                                         ; 5;50
                    2461     ;       djnz    r7,$
064D 7F01           2462             MOV     R7,#1;10                                                ; 5;50
064F 120000   F     2463             CALL    BK5822_1MSDELAY
                    2464             
0652 7F01           2465             MOV     R7,#1
0654 120000   F     2466             CALL    _BK_SPIRST
                    2467     
0657 22             2468             RET
                    2469     ;----------------------------------------
                    2470     ;
                    2471     ;----------------------------------------
0658                2472     BK5822_1MSDELAY:
0658                2473     BK5822_Loop:
0658 7D18           2474             MOV     R5,#24
065A                2475     BK5822_Loop1:
065A 7EFF           2476             MOV     R6,#255
065C                2477     BK5822_Loop2:
065C DEFE           2478             DJNZ    R6,BK5822_Loop2
065E DDFA           2479             DJNZ    R5,BK5822_Loop1
0660 DFF6           2480             DJNZ    R7,BK5822_Loop
                    2481             
0662                2482     BK5822_OVER:
                    2483             
0662 22             2484             RET
                    2485     ;------------------------------------------------------------
                    2486     ;³õÊ¼»¯BK5822
                    2487     ;------------------------------------------------------------
0663                2488     _AutoASKReg:
0663 C2C2           2489             clr     Pin_5823BK_SCLK
0665 C281           2490             clr     Pin_5823BK_MOSI
0667 D290           2491             SETB    Pin_5823BK_CS
0669 7AC8           2492             MOV     R2,#200
066B DAFE           2493             DJNZ    R2,$
066D 900000   F     2494             MOV     DPTR,#RegArrOBU
                    2495             ;0---8
0670 7F00           2496             MOV     R7,#0           ;µÚ¼¸¸ö×Ö½Ú             
0672 7E09           2497             MOV     R6,#9           ;¼Ä´æÆ÷¸öÊ
0674 7D00           2498             MOV     R5,#0           ;¼Ä´æÆ÷µØÖ·ºÅ
0676                2499     AutoASKReg_08:
                    2500             ;300=48us
0676 7AC8           2501             MOV     R2,#200
0678 DAFE           2502             DJNZ    R2,$
067A 7A64           2503             MOV     R2,#100
067C DAFE           2504             DJNZ    R2,$
                    2505             
067E C290           2506             CLR     Pin_5823BK_CS           
0680 ED             2507             MOV     A,R5
0681 4420           2508             ORL     A,#020H         ;Ð´ÃüÁî
0683 120000   F     2509             CALL    SPI_W
                    2510             
0686 7403           2511             MOV     A,#3
0688 2F             2512             ADD     A,R7
0689 93             2513             MOVC    A,@A+DPTR
068A 120000   F     2514             CALL    SPI_W
                    2515             
068D 7402           2516             MOV     A,#2
068F 2F             2517             ADD     A,R7
0690 93             2518             MOVC    A,@A+DPTR
0691 120000   F     2519             CALL    SPI_W
                    2520             
0694 7401           2521             MOV     A,#1
0696 2F             2522             ADD     A,R7
0697 93             2523             MOVC    A,@A+DPTR
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    41

0698 120000   F     2524             CALL    SPI_W
                    2525             
069B 7400           2526             MOV     A,#0
069D 2F             2527             ADD     A,R7
069E 93             2528             MOVC    A,@A+DPTR
069F 120000   F     2529             CALL    SPI_W
                    2530             
06A2 7A0A           2531             MOV     R2,#10
06A4 DAFE           2532             DJNZ    R2,$
                    2533             
06A6 D290           2534             SETB    Pin_5823BK_CS
                    2535             
06A8 7404           2536             MOV     A,#4
06AA 2F             2537             ADD     A,R7
06AB FF             2538             MOV     R7,A
06AC 0D             2539             INC     R5
06AD DEC7           2540             DJNZ    R6,AutoASKReg_08
                    2541     ;-----------------------------------------------
                    2542             ;9---15
06AF 7F24           2543             MOV     R7,#36          ;µÚ¼¸¸ö×Ö½Ú     
06B1 7E07           2544             MOV     R6,#7;8         ;¼Ä´æÆ÷¸öÊ
06B3 7D09           2545             MOV     R5,#9           ;¼Ä´æÆ÷µØÖ·ºÅ
06B5                2546     AutoASKReg_916:
06B5 7AC8           2547             MOV     R2,#200
06B7 DAFE           2548             DJNZ    R2,$
06B9 7A64           2549             MOV     R2,#100
06BB DAFE           2550             DJNZ    R2,$    
06BD C290           2551             CLR     Pin_5823BK_CS
06BF 7A0A           2552             MOV     R2,#10
06C1 DAFE           2553             DJNZ    R2,$
                    2554                                     
06C3 ED             2555             MOV     A,R5
06C4 4420           2556             ORL     A,#020H         ;Ð´ÃüÁî
06C6 120000   F     2557             CALL    SPI_W
                    2558             
06C9 7400           2559             MOV     A,#0
06CB 2F             2560             ADD     A,R7
06CC 93             2561             MOVC    A,@A+DPTR
06CD 120000   F     2562             CALL    SPI_W
                    2563             
06D0 7401           2564             MOV     A,#1
06D2 2F             2565             ADD     A,R7
06D3 93             2566             MOVC    A,@A+DPTR
06D4 120000   F     2567             CALL    SPI_W
                    2568             
06D7 7402           2569             MOV     A,#2
06D9 2F             2570             ADD     A,R7
06DA 93             2571             MOVC    A,@A+DPTR
06DB 120000   F     2572             CALL    SPI_W
                    2573             
06DE 7403           2574             MOV     A,#3
06E0 2F             2575             ADD     A,R7
06E1 93             2576             MOVC    A,@A+DPTR
06E2 120000   F     2577             CALL    SPI_W
                    2578             
06E5 7A0A           2579             MOV     R2,#10
06E7 DAFE           2580             DJNZ    R2,$
                    2581             
06E9 D290           2582             SETB    Pin_5823BK_CS
                    2583             
06EB 7404           2584             MOV     A,#4
06ED 2F             2585             ADD     A,R7
06EE FF             2586             MOV     R7,A
06EF 0D             2587             INC     R5
06F0 DEC3           2588             DJNZ    R6,AutoASKReg_916
                    2589             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    42

06F2 7AC8           2590             MOV     R2,#200
06F4 DAFE           2591             DJNZ    R2,$
06F6 7A64           2592             MOV     R2,#100
06F8 DAFE           2593             DJNZ    R2,$
                    2594     
06FA C290           2595             CLR     Pin_5823BK_CS
                    2596             
06FC 7A0A           2597             MOV     R2,#10
06FE DAFE           2598             DJNZ    R2,$
                    2599             
0700 900000   F     2600             MOV     DPTR,#RegArrASKAnalogReg17
                    2601             
0703 7411           2602             MOV     A,#17
0705 4420           2603             ORL     A,#020H         ;Ð´ÃüÁî
0707 120000   F     2604             CALL    SPI_W
                    2605             
070A 7E0E           2606             MOV     R6,#14;13               ;¼Ä´æÆ÷×Ö½Ú¸öÊÎª14¸ö£¬ÏÈ³õÊ¼»¯13--1¸ö£¬ÔÙ³õÊ¼»¯0
070C 7A00           2607             mov     r2,#0
070E                2608     AutoASKReg_17:
070E EA             2609             MOV     a,r2
070F 93             2610             MOVC    A,@A+DPTR
0710 120000   F     2611             CALL    SPI_W
0713 0A             2612             INC     r2
0714 DEF8           2613             DJNZ    R6,AutoASKReg_17
                    2614             
0716 7A0A           2615             MOV     R2,#10
0718 DAFE           2616             DJNZ    R2,$
                    2617             
071A D290           2618             SETB    Pin_5823BK_CS
                    2619             
071C 7AC8           2620             MOV     R2,#200
071E DAFE           2621             DJNZ    R2,$
0720 7A64           2622             MOV     R2,#100
0722 DAFE           2623             DJNZ    R2,$
                    2624             
                    2625             
                    2626             
                    2627             
0724 C290           2628             CLR     Pin_5823BK_CS
0726 7A0A           2629             MOV     R2,#10
0728 DAFE           2630             DJNZ    R2,$
072A 900000   F     2631             MOV     DPTR,#RegArrASKAnalogReg18
                    2632             
072D 7412           2633             MOV     A,#18
072F 4420           2634             ORL     A,#020H         ;Ð´ÃüÁî
0731 120000   F     2635             CALL    SPI_W
                    2636             
                    2637             
                    2638             
0734 7E0B           2639             MOV     R6,#11;10               ;¼Ä´æÆ÷×Ö½Ú¸öÊÎª11¸ö£¬ÏÈ³õÊ¼»¯11--1¸ö£¬ÔÙ³õÊ¼»¯0
0736 7A00           2640             MOV     R2,#0
0738                2641     AutoASKReg_18:
0738 EA             2642             MOV     A,R2
0739 93             2643             MOVC    A,@A+DPTR
073A 120000   F     2644             CALL    SPI_W
073D 0A             2645             INC     R2
073E DEF8           2646             DJNZ    R6,AutoASKReg_18
                    2647             
0740 7A0A           2648             MOV     R2,#10
0742 DAFE           2649             DJNZ    R2,$
0744 D290           2650             SETB    Pin_5823BK_CS   
                    2651             ;ret    
0746 120000   F     2652             call    wkoup_sj        ;»½ÐÑÐ£×¼
                    2653                     
0749 7F06           2654             MOV     R7,#6
074B 120000   F     2655             CALL    BK5822_1MSDELAY 
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    43

                    2656             ;------------------------------------
                    2657             ;»½ÐÑÐ£×¼
                    2658             ;°Ñ¼Ä´æÆ÷reg7µÄÊ¾Ý·Åµ½DATA_RXBUF+5
074E 900000   F     2659             MOV     DPTR,#RegArrOBU
0751 7800     F     2660             MOV     R0,#DATA_RXBUF+5
0753 741F           2661             MOV     A,#31
0755 93             2662             MOVC    A,@A+DPTR
0756 F6             2663             MOV     @R0,A
                    2664             
0757 08             2665             INC     R0
0758 741E           2666             MOV     A,#30
075A 93             2667             MOVC    A,@A+DPTR
075B F6             2668             MOV     @R0,A
                    2669             
075C 08             2670             INC     R0
075D 741D           2671             MOV     A,#29
075F 93             2672             MOVC    A,@A+DPTR
0760 F6             2673             MOV     @R0,A
                    2674             
0761 08             2675             INC     R0
0762 741C           2676             MOV     A,#28
0764 93             2677             MOVC    A,@A+DPTR
0765 F6             2678             MOV     @R0,A
                    2679             
0766 7D07           2680             MOV     R5,#7
0768 7E04           2681             MOV     R6,#4
076A 7F00     F     2682             MOV     R7,#DATA_RXBUF
076C C200     F     2683             clr     BIT_BUFADDR
076E 120000   F     2684             CALL    SPI_Read_Reg            ;´ÓR5ËùÖ¸ÏòµÄBK5822¼Ä´æÆ÷¶Á³öR6¸ö×Ö½Ú´æ·Åµ½Ö¸ÕëR7Ëù
                             Ö¸ÏòµÄÄÚ´æ(DATA/IDATA)
                    2685             
0771 7800     F     2686             MOV     R0,#DATA_RXBUF
0773 E6             2687             MOV     A,@R0
0774 B40A00         2688             CJNE    A,#0AH,$+3
0777 5007           2689             JNC     WKO_SJ_1
                    2690             
0779 7800     F     2691             MOV     R0,#DATA_RXBUF+5        
077B E6             2692             MOV     A,@R0
077C 547F           2693             ANL     A,#07FH         ;0111
077E 8003           2694             JMP     WKO_SJ_2
                    2695             
0780                2696     WKO_SJ_1:
0780 7800     F     2697             MOV     R0,#DATA_RXBUF+5        
0782 E6             2698             MOV     A,@R0
0783                2699     WKO_SJ_2:       
0783 4440           2700             ORL     A,#40H
0785 F6             2701             MOV     @R0,A
0786 120000   F     2702             CALL    WIRTE_REG7      ;Ð´¼Ä´æÆ÷7£¬ÒªÐ´µÄÊ¾ÝÔÚDATA_RXBUF
0789 120000   F     2703             call    wkoup_sj        ;»½ÐÑÐ£×¼
078C 7F06           2704             MOV     R7,#6
078E 120000   F     2705             CALL    BK5822_1MSDELAY
                    2706     
0791 7D07           2707             MOV     R5,#7
0793 7E04           2708             MOV     R6,#4
0795 7F00     F     2709             MOV     R7,#DATA_RXBUF
0797 C200     F     2710             CLR     BIT_BUFADDR
0799 120000   F     2711             CALL    SPI_Read_Reg            ;´ÓR5ËùÖ¸ÏòµÄBK5822¼Ä´æÆ÷¶Á³öR6¸ö×Ö½Ú´æ·Åµ½Ö¸ÕëR7Ëù
                             Ö¸ÏòµÄÄÚ´æ(DATA/IDATA)
079C 7800     F     2712             MOV     R0,#DATA_RXBUF
079E E6             2713             MOV     A,@R0
079F B40A00         2714             CJNE    A,#0AH,$+3
07A2 5007           2715             JNC     WKO_SJ_3
07A4 7800     F     2716             MOV     R0,#DATA_RXBUF+5        
07A6 E6             2717             MOV     A,@R0
07A7 54BF           2718             ANL     A,#0BFH         ;1011
07A9 8003           2719             JMP     WKO_SJ_4
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    44

07AB                2720     WKO_SJ_3:
07AB 7800     F     2721             MOV     R0,#DATA_RXBUF+5        
07AD E6             2722             MOV     A,@R0
07AE                2723     WKO_SJ_4:       
07AE 4420           2724             ORL     A,#20H
07B0 F6             2725             MOV     @R0,A
07B1 120000   F     2726             CALL    WIRTE_REG7      ;Ð´¼Ä´æÆ÷7£¬ÒªÐ´µÄÊ¾ÝÔÚDATA_RXBUF
07B4 120000   F     2727             call    wkoup_sj        ;»½ÐÑÐ£×¼
07B7 7F06           2728             MOV     R7,#6
07B9 120000   F     2729             CALL    BK5822_1MSDELAY 
                    2730             
07BC 7D07           2731             MOV     R5,#7
07BE 7E04           2732             MOV     R6,#4
07C0 7F00     F     2733             MOV     R7,#DATA_RXBUF
07C2 C200     F     2734             CLR     BIT_BUFADDR
07C4 120000   F     2735             CALL    SPI_Read_Reg            ;´ÓR5ËùÖ¸ÏòµÄBK5822¼Ä´æÆ÷¶Á³öR6¸ö×Ö½Ú´æ·Åµ½Ö¸ÕëR7Ëù
                             Ö¸ÏòµÄÄÚ´æ(DATA/IDATA)
07C7 7800     F     2736             MOV     R0,#DATA_RXBUF
07C9 E6             2737             MOV     A,@R0
07CA B40A00         2738             CJNE    A,#0AH,$+3
07CD 5007           2739             JNC     WKO_SJ_5
07CF 7800     F     2740             MOV     R0,#DATA_RXBUF+5        
07D1 E6             2741             MOV     A,@R0
07D2 54DF           2742             ANL     A,#0DFH         ;1101
07D4 8003           2743             JMP     WKO_SJ_6
07D6                2744     WKO_SJ_5:
07D6 7800     F     2745             MOV     R0,#DATA_RXBUF+5        
07D8 E6             2746             MOV     A,@R0
07D9                2747     WKO_SJ_6:
07D9 F6             2748             MOV     @R0,A
07DA 120000   F     2749             CALL    WIRTE_REG7      ;Ð´¼Ä´æÆ÷7£¬ÒªÐ´µÄÊ¾ÝÔÚDATA_RXBUF
07DD 120000   F     2750             call    wkoup_sj        ;»½ÐÑÐ£×¼
07E0 7F06           2751             MOV     R7,#6
07E2 120000   F     2752             CALL    BK5822_1MSDELAY 
                    2753             
07E5 7D07           2754             MOV     R5,#7
07E7 7E04           2755             MOV     R6,#4
07E9 7F00     F     2756             MOV     R7,#DATA_RXBUF
07EB C200     F     2757             CLR     BIT_BUFADDR
07ED 120000   F     2758             CALL    SPI_Read_Reg            ;´ÓR5ËùÖ¸ÏòµÄBK5822¼Ä´æÆ÷¶Á³öR6¸ö×Ö½Ú´æ·Åµ½Ö¸ÕëR7Ëù
                             Ö¸ÏòµÄÄÚ´æ(DATA/IDATA)
07F0 7800     F     2759             MOV     R0,#DATA_RXBUF
07F2 E6             2760             MOV     A,@R0
                    2761     
07F3 22             2762             RET
                    2763     ;======================================================
07F4                2764     wkoup_sj:       ;»½ÐÑÐ£×¼       
                    2765     ;//toggle reg15 bit 28  
                    2766     ;WriteArr[3]=WriteArr[3]|0x10;
07F4 7AF0           2767             MOV     R2,#240
07F6 DAFE           2768             DJNZ    R2,$
07F8 7A82           2769             MOV     R2,#130
07FA DAFE           2770             DJNZ    R2,$
                    2771     
07FC 900000   F     2772             MOV     DPTR,#RegArrOBU
                    2773             
07FF C290           2774             CLR     Pin_5823BK_CS
                    2775             
0801 7A0A           2776             MOV     R2,#10
0803 DAFE           2777             DJNZ    R2,$
                    2778     
0805 740F           2779             MOV     A,#15
0807 4420           2780             ORL     A,#020H         ;Ð´ÃüÁî
0809 120000   F     2781             CALL    SPI_RW
                    2782             
                    2783             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    45

080C 743C           2784             MOV     A,#60
080E 93             2785             MOVC    A,@A+DPTR
080F 120000   F     2786             CALL    SPI_RW
                    2787             
0812 743D           2788             MOV     A,#61
0814 93             2789             MOVC    A,@A+DPTR
0815 120000   F     2790             CALL    SPI_RW
                    2791             
0818 743E           2792             MOV     A,#62
081A 93             2793             MOVC    A,@A+DPTR
081B 120000   F     2794             CALL    SPI_RW
                    2795             
081E 743F           2796             MOV     A,#63
0820 93             2797             MOVC    A,@A+DPTR
0821 4410           2798             ORL     A,#010H
0823 120000   F     2799             CALL    SPI_RW
                    2800             
0826 7A0A           2801             MOV     R2,#10
0828 DAFE           2802             DJNZ    R2,$
                    2803             
082A D290           2804             SETB    Pin_5823BK_CS   
                    2805     
082C 7F04           2806             MOV     R7,#4   ;2mS
082E 120000   F     2807             CALL    BK5822_1MSDELAY 
                    2808     
0831 7AF0           2809             MOV     R2,#240
0833 DAFE           2810             DJNZ    R2,$
0835 7A82           2811             MOV     R2,#130
0837 DAFE           2812             DJNZ    R2,$    
                    2813     
0839 740F           2814             MOV     A,#15
083B 4420           2815             ORL     A,#020H
083D 120000   F     2816             CALL    SPI_RW
                    2817             
                    2818             
0840 743C           2819             MOV     A,#60
0842 93             2820             MOVC    A,@A+DPTR
0843 120000   F     2821             CALL    SPI_RW
                    2822             
0846 743D           2823             MOV     A,#61
0848 93             2824             MOVC    A,@A+DPTR
0849 120000   F     2825             CALL    SPI_RW
                    2826             
084C 743E           2827             MOV     A,#62
084E 93             2828             MOVC    A,@A+DPTR
084F 120000   F     2829             CALL    SPI_RW
                    2830             
0852 743F           2831             MOV     A,#63
0854 93             2832             MOVC    A,@A+DPTR
0855 54EF           2833             ANL     A,#0EFH
0857 120000   F     2834             CALL    SPI_RW
                    2835             
085A 7A0A           2836             MOV     R2,#10
085C DAFE           2837             DJNZ    R2,$
                    2838             
085E D290           2839             SETB    Pin_5823BK_CS
0860 22             2840             RET
                    2841     ;======================================================
0861                2842     WIRTE_REG7:     ;Ð´¼Ä´æÆ÷7£¬ÒªÐ´µÄÊ¾ÝÔÚDATA_RXBUF       
0861 7407           2843             MOV     A,#7
0863 4420           2844             ORL     A,#020H         ;Ð´ÃüÁî
0865 120000   F     2845             CALL    SPI_RW
                    2846                                     ;4 * 7 = 28     ¼Ä´æÆ÷7
0868 7800     F     2847             MOV     R0,#DATA_RXBUF+5
086A E6             2848             MOV     A,@R0
086B 120000   F     2849             CALL    SPI_RW
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    46

                    2850             
086E 08             2851             INC     R0
086F E6             2852             MOV     A,@R0
0870 120000   F     2853             CALL    SPI_RW
                    2854             
0873 08             2855             INC     R0
0874 E6             2856             MOV     A,@R0
0875 120000   F     2857             CALL    SPI_RW
                    2858             
0878 08             2859             INC     R0
0879 E6             2860             MOV     A,@R0
087A 120000   F     2861             CALL    SPI_RW
                    2862             
087D D290           2863             SETB    Pin_5823BK_CS
                    2864             
087F 22             2865             RET                     
                    2866     ;=====================================================
0880 7AC8           2867             MOV     R2,#200
0882 DAFE           2868             DJNZ    R2,$
0884 7A64           2869             MOV     R2,#100
0886 DAFE           2870             DJNZ    R2,$
                    2871     
0888 900000   F     2872             MOV     DPTR,#RegArrOBU 
                    2873     
088B 740F           2874             MOV     A,#15
088D 4420           2875             ORL     A,#020H         ;Ð´ÃüÁî
088F 120000   F     2876             CALL    SPI_RW
                    2877             
0892 743C           2878             MOV     A,#60
0894 93             2879             MOVC    A,@A+DPTR
0895 120000   F     2880             CALL    SPI_RW
                    2881             
0898 743D           2882             MOV     A,#61
089A 93             2883             MOVC    A,@A+DPTR
089B 120000   F     2884             CALL    SPI_RW
                    2885             
089E 743E           2886             MOV     A,#62
08A0 93             2887             MOVC    A,@A+DPTR
08A1 120000   F     2888             CALL    SPI_RW
                    2889             
08A4 743F           2890             MOV     A,#63
08A6 93             2891             MOVC    A,@A+DPTR
08A7 4410           2892             ORL     A,#010H
08A9 120000   F     2893             CALL    SPI_RW
                    2894             
08AC 7A0A           2895             MOV     R2,#10
08AE DAFE           2896             DJNZ    R2,$
                    2897             
08B0 D290           2898             SETB    Pin_5823BK_CS   
                    2899     
08B2 7F14           2900             MOV     R7,#20
08B4 120000   F     2901             CALL    BK5822_1MSDELAY 
                    2902     ;       WriteArr[3]=WriteArr[3]&0xef;
08B7 7AC8           2903             MOV     R2,#200
08B9 DAFE           2904             DJNZ    R2,$
08BB 7A64           2905             MOV     R2,#100
08BD DAFE           2906             DJNZ    R2,$
                    2907             
08BF 740F           2908             MOV     A,#15
08C1 4420           2909             ORL     A,#020H         ;Ð´ÃüÁî
08C3 120000   F     2910             CALL    SPI_RW
                    2911             
08C6 743C           2912             MOV     A,#60
08C8 93             2913             MOVC    A,@A+DPTR
08C9 120000   F     2914             CALL    SPI_RW
                    2915             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    47

08CC 743D           2916             MOV     A,#61
08CE 93             2917             MOVC    A,@A+DPTR
08CF 120000   F     2918             CALL    SPI_RW
                    2919             
08D2 743E           2920             MOV     A,#62
08D4 93             2921             MOVC    A,@A+DPTR
08D5 120000   F     2922             CALL    SPI_RW
                    2923             
08D8 743F           2924             MOV     A,#63
08DA 93             2925             MOVC    A,@A+DPTR
08DB 54EF           2926             ANL     A,#0EFH
08DD 120000   F     2927             CALL    SPI_RW
                    2928             
08E0 7A0A           2929             MOV     R2,#10
08E2 DAFE           2930             DJNZ    R2,$
                    2931             
08E4 D290           2932             SETB    Pin_5823BK_CS   
                    2933             
08E6 7F14           2934             MOV     R7,#20
08E8 120000   F     2935             CALL    BK5822_1MSDELAY
                    2936             
08EB 22             2937             RET     
                    2938     ;////////////////////////////////////////////////////// 
08EC                2939     _FUN_HDLC_5822Init:
                    2940             
08EC 120000   F     2941             CALL    _BK5822_RST
                    2942     ;       MOV     R7,#1
                    2943     ;       CALL    _FUN_LIB_DELAY  
                    2944             
08EF 120000   F     2945             CALL    _AutoASKReg
                    2946     ;       MOV     R7,#3
                    2947     ;       CALL    _FUN_LIB_DELAY
08F2 22             2948             RET
                    2949     ;//////////////////////////////////////////////////////         
                    2950     ;/////////////////////////////////////////////////////////////////////////////////////
                    2951     ;½«reg5<26>ÏÈÐ´ 1 ,ÔÙÐ´ 0 £¬×öÆµÂÊÐ§×¼
                    2952     ;20 21 22 23
                    2953     ;/////////////////////////////////////////////////////////////////////////////////////
08F3                2954     _FUN_HDLC_Frexiaodui:
                    2955             
08F3 900000   F     2956             MOV     DPTR,#RegArrOBU 
08F6 7800     F     2957             mov     r0,#XDATA_HOLD
08F8 7414           2958             MOV     A,#20
08FA 93             2959             MOVC    A,@A+DPTR
                    2960             
                    2961                     ;MOVX   @R0,A
08FB C083           2962             push    dph
08FD C082           2963             push    dpl
                    2964             
08FF 758301         2965             MOV     DPH,#1 
0902 8882           2966             MOV     DPL,R0 
0904 F0             2967             MOVX    @DPTR,A
0905 D082           2968             pop     dpl
0907 D083           2969             pop     dph
                    2970             
0909 08             2971             INC     R0
090A 7415           2972             MOV     A,#21
090C 93             2973             MOVC    A,@A+DPTR
                    2974                     ;MOVX   @R0,A
090D C083           2975             push    dph
090F C082           2976             push    dpl             
0911 758301         2977             MOV     DPH,#1 
0914 8882           2978             MOV     DPL,R0 
0916 F0             2979             MOVX    @DPTR,A
0917 D082           2980             pop     dpl
0919 D083           2981             pop     dph
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    48

                    2982     
091B 08             2983             INC     R0
091C 7416           2984             MOV     A,#22
091E 93             2985             MOVC    A,@A+DPTR
                    2986                     ;MOVX   @R0,A
091F C083           2987             push    dph
0921 C082           2988             push    dpl             
0923 758301         2989             MOV     DPH,#1 
0926 8882           2990             MOV     DPL,R0 
0928 F0             2991             MOVX    @DPTR,A
0929 D082           2992             pop     dpl
092B D083           2993             pop     dph
092D 08             2994             INC     R0
092E 7417           2995             MOV     A,#23
0930 93             2996             MOVC    A,@A+DPTR
                    2997                     ;MOVX   @R0,A
0931 C083           2998             push    dph
0933 C082           2999             push    dpl             
0935 758301         3000             MOV     DPH,#1 
0938 8882           3001             MOV     DPL,R0 
093A F0             3002             MOVX    @DPTR,A
093B D082           3003             pop     dpl
093D D083           3004             pop     dph
093F C290           3005             CLR     Pin_5823BK_CS
                    3006             
0941 7A0A           3007             MOV     R2,#10
0943 DAFE           3008             DJNZ    R2,$
                    3009             
0945 7405           3010             MOV     A,#5
0947 4420           3011             ORL     A,#020H         ;Ð´ÃüÁî
0949 120000   F     3012             CALL    SPI_W           
                    3013             
094C 7800     F     3014             MOV     R0,#XDATA_HOLD+3
                    3015                     ;MOVX   A,@R0
094E 758301         3016             MOV     DPH,#1
0951 8882           3017             MOV     DPL,R0
0953 E0             3018             MOVX    A,@DPTR
0954 4404           3019             ORL     A,#00000100B
0956 120000   F     3020             CALL    SPI_W
                    3021             
0959 7800     F     3022             MOV     R0,#XDATA_HOLD+2
                    3023                     ;MOVX   A,@R0
                    3024     ;       MOV     DPH,#1
095B 8882           3025             MOV     DPL,R0
095D E0             3026             MOVX    A,@DPTR
095E 120000   F     3027             CALL    SPI_W   
                    3028             
0961 7800     F     3029             MOV     R0,#XDATA_HOLD+1
                    3030                     ;MOVX   A,@R0
                    3031     ;       MOV     DPH,#1
0963 8882           3032             MOV     DPL,R0
0965 E0             3033             MOVX    A,@DPTR
0966 120000   F     3034             CALL    SPI_W   
                    3035             
0969 7800     F     3036             MOV     R0,#XDATA_HOLD
                    3037                     ;MOVX   A,@R0
                    3038     ;       MOV     DPH,#1
096B 8882           3039             MOV     DPL,R0
096D E0             3040             MOVX    A,@DPTR
096E 120000   F     3041             CALL    SPI_W
                    3042             
0971 7A0A           3043             MOV     R2,#10
0973 DAFE           3044             DJNZ    R2,$    
0975 D290           3045             SETB    Pin_5823BK_CS   
                    3046             
0977 7AC8           3047             MOV     R2,#200
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    49

0979 DAFE           3048             DJNZ    R2,$
097B 7A64           3049             MOV     R2,#100
097D DAFE           3050             DJNZ    R2,$
                    3051     
097F C290           3052             CLR     Pin_5823BK_CS
                    3053             
0981 7A0A           3054             MOV     R2,#10
0983 DAFE           3055             DJNZ    R2,$
                    3056             
0985 7405           3057             MOV     A,#5
0987 4420           3058             ORL     A,#020H         ;Ð´ÃüÁî
0989 120000   F     3059             CALL    SPI_W           
                    3060     
098C 7800     F     3061             MOV     R0,#XDATA_HOLD+3
                    3062                     ;MOVX   A,@R0
                    3063     ;       MOV     DPH,#1
098E 8882           3064             MOV     DPL,R0
0990 E0             3065             MOVX    A,@DPTR
0991 54FB           3066             ANL     A,#11111011B
0993 120000   F     3067             CALL    SPI_W   
                    3068             
0996 7800     F     3069             MOV     R0,#XDATA_HOLD+2
                    3070                     ;MOVX   A,@R0
                    3071     ;       MOV     DPH,#1
0998 8882           3072             MOV     DPL,R0
099A E0             3073             MOVX    A,@DPTR
099B 120000   F     3074             CALL    SPI_W   
                    3075             
099E 7800     F     3076             MOV     R0,#XDATA_HOLD+1
                    3077                     ;MOVX   A,@R0
                    3078     ;       MOV     DPH,#1
09A0 8882           3079             MOV     DPL,R0
09A2 E0             3080             MOVX    A,@DPTR
09A3 120000   F     3081             CALL    SPI_W   
                    3082             
09A6 7800     F     3083             MOV     R0,#XDATA_HOLD
                    3084                     ;MOVX   A,@R0
                    3085     ;       MOV     DPH,#1
09A8 8882           3086             MOV     DPL,R0
09AA E0             3087             MOVX    A,@DPTR
09AB 120000   F     3088             CALL    SPI_W
                    3089             
09AE 7A0A           3090             MOV     R2,#10
09B0 DAFE           3091             DJNZ    R2,$    
09B2 D290           3092             SETB    Pin_5823BK_CS   
                    3093             
09B4 7AC8           3094             MOV     R2,#200
09B6 DAFE           3095             DJNZ    R2,$
09B8 7A64           3096             MOV     R2,#100
09BA DAFE           3097             DJNZ    R2,$
                    3098     
09BC 22             3099             RET
                    3100             
                    3101     ;/////////////////////////////////////////////////////////////////////////////////////  
                    3102     
09BD                3103     _FUN_HDLC_RXSetMMI:     
                    3104             ;ÒÑ½ÓÊÕµ½Ê¾Ý£¬ÏÈÇå£¬·ÀÖ¹ÊÕµ½ÉÏÒ»´ÎµÄÊ¾Ý
09BD 209221         3105             JB      Pin_5823BK_IRQ,HDLC_5823_RXSetMMILOOPS
                    3106             
09C0 7D0F           3107             MOV     R5,#15
09C2 7E04           3108             MOV     R6,#4
09C4 7F00     F     3109             MOV     R7,#XDATA_HOLD
09C6 D200     F     3110             SETB    BIT_BUFADDR
09C8 120000   F     3111             CALL    SPI_Read_Reg
                    3112             
09CB 7800     F     3113             MOV     R0,#XDATA_HOLD+3
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    50

                    3114                     ;MOVX   A,@R0
09CD 758301         3115             MOV     DPH,#1
09D0 8882           3116             MOV     DPL,R0
09D2 E0             3117             MOVX    A,@DPTR
09D3 440F           3118             ORL     A,#00001111B
                    3119                     ;MOVX   @R0,A
                    3120     ;       MOV     DPH,#1 
09D5 8882           3121             MOV     DPL,R0 
09D7 F0             3122             MOVX    @DPTR,A
                    3123             
09D8 7D0F           3124             MOV     R5,#15
09DA 7E04           3125             MOV     R6,#4
09DC 7F00     F     3126             MOV     R7,#XDATA_HOLD
09DE 120000   F     3127             CALL    SPI_Write_Reg
09E1                3128     HDLC_5823_RXSetMMILOOPS:
                    3129             ;¿ª½Ó ÊÕ Ê¹ÄÜ
09E1 7D0F           3130             MOV     R5,#15
09E3 7E04           3131             MOV     R6,#4
09E5 7F00     F     3132             MOV     R7,#XDATA_HOLD
09E7 D200     F     3133             SETB    BIT_BUFADDR
09E9 120000   F     3134             CALL    SPI_Read_Reg
                    3135             
09EC 7800     F     3136             MOV     R0,#XDATA_HOLD
                    3137                     ;MOVX   A,@R0
09EE 758301         3138             MOV     DPH,#1
09F1 8882           3139             MOV     DPL,R0
09F3 E0             3140             MOVX    A,@DPTR
09F4 4402           3141             orl     A,#00000010B; ·ÀÖ¹AGCËøËÀ¼°·ÀÖ¹5823½ÓÊÕÃ»ÓÐÊ¹ÄÜ
                    3142                     ;MOVX   @R0,A
                    3143     ;       MOV     DPH,#1 
09F6 8882           3144             MOV     DPL,R0 
09F8 F0             3145             MOVX    @DPTR,A
                    3146             
09F9 7D0F           3147             MOV     R5,#15
09FB 7E04           3148             MOV     R6,#4
09FD 7F00     F     3149             MOV     R7,#XDATA_HOLD
09FF 120000   F     3150             CALL    SPI_Write_Reg
                    3151             
0A02                3152     _HDLC_RXSetMMIRXLOOP:
0A02 D2AF           3153             setb    ea
                    3154     
0A04                3155     _HDLC_RXSetMMIRXLOOP02:
0A04 2092FD         3156             JB      Pin_5823BK_IRQ,_HDLC_RXSetMMIRXLOOP02   
0A07 C2AF           3157             clr     ea
                    3158             ;=== ¶Á½ÓÊÕ±ê¼Ç¼Ä´æÆ÷ ===
                    3159             ;reg6.2 =1 ±íÊ¾½ÓÊÕ³ö´í[½âÂë³ö´í£¬»òCRC³ö´íÕâÒ»Î»¶¼ÎªÖÃ]
                    3160             ;reg6.1 = 1 ±íÊ¾½ÓÊÕµ½Ê¾Ý       
0A09 7D06           3161             MOV     R5,#06h
0A0B 7E04           3162             MOV     R6,#4
0A0D 7F00     F     3163             MOV     R7,#XDATA_HOLD
0A0F D200     F     3164             SETB    BIT_BUFADDR
0A11 120000   F     3165             CALL    SPI_Read_Reg
                    3166             
0A14 7800     F     3167             MOV     R0,#XDATA_HOLD
                    3168                     ;MOVX   A,@R0
0A16 758301         3169             MOV     DPH,#1
0A19 8882           3170             MOV     DPL,R0
0A1B E0             3171             MOVX    A,@DPTR
                    3172             
                    3173             ;½ÓÊÕ³ö´í±ê¼Ç
0A1C A2E2           3174             MOV     C,ACC.2
0A1E 4004           3175             JC      _HDLC_RXSetMMIClearRXEr
                    3176             
                    3177             ;½ÓÊÕÕ¿Ë±ê¼Ç
0A20 A2E1           3178             MOV     C,ACC.1
0A22 4023           3179             JC      _HDLC_RXSetMMIReceviceData
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    51

                    3180             
                    3181             ;½ÓÊÕ³ö´í£¬Çåreg15.26 ½ÓÊÕ³ö´í±ê¼Ç£¬²»Çå£¬Ôò5823»á´¦ÔÚÒ»Ö±ÔÚidleÄ£Ê½,irq½Å»áÒ»Ö±Îªµ
                             Í
                    3182             ;×¢ÒâÇåÊÇÓÃ 1 Çå£¬²»ÊÇ 0 
                    3183             ;×¢Òâ½ÓÊÕ³ö´í±ê¼Ç£¬²»Çå£¬Ôò5823»á´¦ÔÚÒ»Ö±ÔÚidleÄ£Ê½,irq½Å»áÒ»Ö±ÎªµÍ
                    3184             
0A24                3185     _HDLC_RXSetMMIClearRXEr:
                    3186             
0A24 7D0F           3187             MOV     R5,#15
0A26 7E04           3188             MOV     R6,#4
0A28 7F00     F     3189             MOV     R7,#XDATA_HOLD
0A2A D200     F     3190             SETB    BIT_BUFADDR
0A2C 120000   F     3191             CALL    SPI_Read_Reg
                    3192             
0A2F 7800     F     3193             MOV     R0,#XDATA_HOLD+3
                    3194                     ;MOVX   A,@R0
0A31 758301         3195             MOV     DPH,#1
0A34 8882           3196             MOV     DPL,R0
0A36 E0             3197             MOVX    A,@DPTR
0A37 440F           3198             ORL     A,#00001111B
                    3199                     ;MOVX   @R0,A
                    3200     ;       MOV     DPH,#1 
0A39 8882           3201             MOV     DPL,R0 
0A3B F0             3202             MOVX    @DPTR,A
                    3203             
0A3C 7D0F           3204             MOV     R5,#15
0A3E 7E04           3205             MOV     R6,#4
0A40 7F00     F     3206             MOV     R7,#XDATA_HOLD
0A42 120000   F     3207             CALL    SPI_Write_Reg
                    3208             
0A45 80BB           3209             JMP     _HDLC_RXSetMMIRXLOOP
                    3210             
                    3211     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /
                    3212             ;½ÓÊÕµ½Ê¾Ý£¬
                    3213             ;¶ÁReg5<0~7>£¬FIFO ½ÓÊÕ³¤¶È
                    3214             ;Èç¹û½ÓÊÕµ½µÄÊ¾Ý³¤¶ÈÎª 0
                    3215             ;       ÇåReg 15.25 
                    3216             ;       ·ñÔò£¬¶Á¿Õ FIFO [Reg16]
                    3217             ;×¢ÒâÇåÊÇÓÃ 1 Çå£¬²»ÊÇ 0 
                    3218             ;×¢Òâ½ÓÊÕ±ê¼Ç£¬²»Çå£¬Ôò5823»á´¦ÔÚÒ»Ö±ÔÚidleÄ£Ê½,irq½Å»áÒ»Ö±ÎªµÍ
                    3219             ;×¢Òâ¶Á¿ÕFIFO»òÇå½ÓÊÕ±ê¼Ç£¬¶¼»á½«5823´ÓidleÄ£Ê½×ª³É½ÓÊÕÄ£Ê½
                    3220     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /
0A47                3221     _HDLC_RXSetMMIReceviceData:     
                    3222             ;=== ¹Ø½ÓÊÕÊ¹ÄÜ ===
0A47 7D0F           3223             MOV     R5,#15
0A49 7E04           3224             MOV     R6,#4
0A4B 7F00     F     3225             MOV     R7,#XDATA_HOLD
0A4D D200     F     3226             SETB    BIT_BUFADDR
0A4F 120000   F     3227             CALL    SPI_Read_Reg
                    3228             
0A52 7800     F     3229             MOV     R0,#XDATA_HOLD
                    3230                     ;MOVX   A,@R0
0A54 758301         3231             MOV     DPH,#1
0A57 8882           3232             MOV     DPL,R0
0A59 E0             3233             MOVX    A,@DPTR
0A5A 54FD           3234             anl     A,#11111101B
                    3235                     ;MOVX   @R0,A
                    3236             ;MOV    DPH,#1 
0A5C 8882           3237             MOV     DPL,R0 
0A5E F0             3238             MOVX    @DPTR,A
                    3239             
0A5F 7D0F           3240             MOV     R5,#15
0A61 7E04           3241             MOV     R6,#4
0A63 7F00     F     3242             MOV     R7,#XDATA_HOLD
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    52

0A65 120000   F     3243             CALL    SPI_Write_Reg 
                    3244             
                    3245             ;=== ¶Á½ÓÊÕÊ¾Ý³¤¶È ===
0A68 7D05           3246             MOV     R5,#05h
0A6A 7E04           3247             MOV     R6,#04h
0A6C 7F00     F     3248             MOV     R7,#XDATA_HOLD
0A6E D200     F     3249             SETB    BIT_BUFADDR
0A70 120000   F     3250             CALL    SPI_Read_Reg
0A73 7800     F     3251             MOV     R0,#XDATA_HOLD
                    3252                     ;MOVX   A,@R0
                    3253             ;MOV    DPH,#1
0A75 8882           3254             MOV     DPL,R0
0A77 E0             3255             MOVX    A,@DPTR
                    3256             
0A78 7021           3257             JNZ     _HDLC_RXSetMMIRXFIFO
                    3258             ;½ÓÊÕ¶ÈÎª0Ê±£¬Çå½ÓÊÕÎ»
0A7A 7D0F           3259             MOV     R5,#15
0A7C 7E04           3260             MOV     R6,#4
0A7E 7F00     F     3261             MOV     R7,#XDATA_HOLD
0A80 D200     F     3262             SETB    BIT_BUFADDR
0A82 120000   F     3263             CALL    SPI_Read_Reg
                    3264             
0A85 7800     F     3265             MOV     R0,#XDATA_HOLD+3
                    3266                     ;MOVX   A,@R0
                    3267             ;MOV    DPH,#1
0A87 8882           3268             MOV     DPL,R0
0A89 E0             3269             MOVX    A,@DPTR
0A8A 440F           3270             ORL     A,#00001111B
                    3271                     ;MOVX   @R0,A
                    3272     ;       MOV     DPH,#1 
0A8C 8882           3273             MOV     DPL,R0 
0A8E F0             3274             MOVX    @DPTR,A
                    3275             
0A8F 7D0F           3276             MOV     R5,#15
0A91 7E04           3277             MOV     R6,#4
0A93 7F00     F     3278             MOV     R7,#XDATA_HOLD
0A95 120000   F     3279             CALL    SPI_Write_Reg
                    3280             
0A98 020000   F     3281             JMP     _HDLC_RXSetMMIRXLOOP
                    3282             
0A9B                3283     _HDLC_RXSetMMIRXFIFO:;¼õCRC ³¤¶Èºó,½ÓÊÕ³¤¶ÈÊÇ·ñ´óÓÚ0
0A9B 14             3284             dec     a
0A9C 14             3285             dec     a
0A9D 6085           3286             jz      _HDLC_RXSetMMIClearRXEr
                    3287             
0A9F B48100         3288             CJNE    A,#129,$+3
0AA2 4003           3289             JC      hdlc_5823_RXSETFIFOLENOK
0AA4 020000   F     3290             JMP     _HDLC_RXSetMMIClearRXEr
0AA7                3291     hdlc_5823_RXSETFIFOLENOK:       
0AA7 7800     F     3292             mov     r0,#DATA_DSRCRXLEN
0AA9 F6             3293             mov     @r0,a
                    3294             ;=== ½ÓÊ¾Ý ===
0AAA 7D10           3295             MOV     R5,#16
0AAC 7800     F     3296             MOV     R0,#XDATA_HOLD
                    3297                     ;MOVX   A,@R0
0AAE 758301         3298             MOV     DPH,#1
0AB1 8882           3299             MOV     DPL,R0
0AB3 E0             3300             MOVX    A,@DPTR
0AB4 FE             3301             MOV     R6,A            
                    3302     
0AB5 C200     F     3303             CLR     BIT_BUFADDR     
0AB7 7F00     F     3304             MOV     R7,#DATA_RXBUF
0AB9 C006           3305             PUSH    AR6
                    3306     ;Èë¿Ú£º R5      Òª¶ÁµÄ¼Ä´æÆ÷
                    3307     ;       R6      ¶Á³öR6¸ö×Ö½Ú
                    3308     ;       R7      ¶Á³ö×Ö½Ú´æ·ÅµØÖ·Ö¸Õë    
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    53

0ABB 120000   F     3309             CALL    SPI_Read_Reg
0ABE D006           3310             POP     AR6
                    3311             
0AC0 7800     F     3312             mov     r0,#DATA_DSRCRXLEN
0AC2 E6             3313             mov     a,@r0
0AC3 F503           3314             mov     ar3,a
                    3315             
0AC5 22             3316             RET
                    3317     ;--------------------------------------------------------------
                    3318     ;=0¹Øµ÷ÖÃ;=1¿ªµ÷ÖÃ(°ÑDIOÉèÊäÈë)
                    3319     ;--------------------------------------------------------------
                    3320     ;_FUN_HDLC_TiaoZhi:
                    3321     ;       PUSH    AR7
                    3322             
                    3323     ;       MOV     R5,#15
                    3324     ;       MOV     R6,#4
                    3325     ;       MOV     R7,#XDATA_HOLD
                    3326     ;       SETB    BIT_BUFADDR
                    3327     ;       CALL    SPI_Read_Reg
                    3328             
                    3329     ;       MOV     R0,#XDATA_HOLD+1
                    3330     ;               ;MOVX   A,@R0
                    3331     
                    3332     ;       MOV     B,A
                    3333     
                    3334     ;       POP     AR7     
                    3335     ;       MOV     A,R7
                    3336     ;       MOV     C,ACC.0
                    3337     ;       MOV     A,B
                    3338     ;       MOV     ACC.7,C 
                    3339     ;               ;MOVX   @R0,A
                    3340     
                    3341     
                    3342     ;       MOV     R5,#15
                    3343     ;       MOV     R6,#4
                    3344     ;       MOV     R7,#XDATA_HOLD
                    3345     ;       CALL    SPI_Write_Reg
                    3346     
                    3347     ;       RET
                    3348     ;---------------------------------------------------------
                    3349     ;¸Ä±ä·¢ÉäÍ¨µÀ
                    3350     ;------------------------------------------------------------------------------------------
                             ---
                    3351     ;ÃèÊö:¸ü¸ÄÍ¨µÀ
                    3352     ;Íâ²¿²ÎÊ
                    3353     ;BIT_CHANNELFLAG        ---     =1±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ1,=0±íÊ¾µ±Ç°Ê¹ÓÃÐÅµÀ0
                    3354     ;REG1
                    3355     ;´ÓµÍ×Ö½Ú¿ªÊ¼
                    3356     ;---------------------------------------------------------
0AC6                3357     _FUN_HDLC_CHANGECHANNEL:
0AC6 200030   F     3358             JB      BIT_CHANNELFLAG,HDLC_CHANGECHANNEL_1
                    3359                                     ;5.79GHz  ÓÉ020H,0e6H,03aH,0ECH¸Ä050H,0e4H,03aH,0ecH ;5.79G
                              
0AC9 C290           3360             CLR     Pin_5823BK_CS
0ACB 7A01           3361             MOV     R2,#1;0
0ACD DAFE           3362             DJNZ    R2,$
                    3363             
0ACF 7401           3364             MOV     A,#1
0AD1 4420           3365             ORL     A,#020H         ;Ð´ÃüÁî
0AD3 120000   F     3366             CALL    SPI_W
                    3367     
0AD6 74EC           3368             MOV     A,#0ECH
0AD8 120000   F     3369             CALL    SPI_W
                    3370             
0ADB 743A           3371             MOV     A,#03AH
0ADD 120000   F     3372             CALL    SPI_W
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    54

                    3373             
0AE0 74E4           3374             MOV     A,#0E4H
0AE2 120000   F     3375             CALL    SPI_W
                    3376             
0AE5 7450           3377             MOV     A,#050H
0AE7 120000   F     3378             CALL    SPI_W
                    3379             
0AEA 7A01           3380             MOV     R2,#1;0
0AEC DAFE           3381             DJNZ    R2,$
0AEE D290           3382             SETB    Pin_5823BK_CS
                    3383             
0AF0 7A01           3384             MOV     R2,#1;200
0AF2 DAFE           3385             DJNZ    R2,$
0AF4 7A01           3386             MOV     R2,#1;00
0AF6 DAFE           3387             DJNZ    R2,$
                    3388             
0AF8 22             3389             RET
                    3390             
0AF9                3391     HDLC_CHANGECHANNEL_1:           ;5.8GHz 020H,000H,03bH,0ECH ¸Ä040H 0FEH 03AH 0ECH,
0AF9 C290           3392             CLR     Pin_5823BK_CS
0AFB 7A01           3393             MOV     R2,#1;0
0AFD DAFE           3394             DJNZ    R2,$
                    3395             
0AFF 7401           3396             MOV     A,#1
0B01 4420           3397             ORL     A,#020H         ;Ð´ÃüÁî
0B03 120000   F     3398             CALL    SPI_W
                    3399     
0B06 74EC           3400             MOV     A,#0ECH
0B08 120000   F     3401             CALL    SPI_W
                    3402             
0B0B 743A           3403             MOV     A,#03AH
0B0D 120000   F     3404             CALL    SPI_W
                    3405             
0B10 74FE           3406             MOV     A,#0FEH
0B12 120000   F     3407             CALL    SPI_W
                    3408             
0B15 7440           3409             MOV     A,#040H
0B17 120000   F     3410             CALL    SPI_W
                    3411             
0B1A 7A01           3412             MOV     R2,#1;0
0B1C DAFE           3413             DJNZ    R2,$
0B1E D290           3414             SETB    Pin_5823BK_CS
0B20 7A01           3415             MOV     R2,#1;200
0B22 DAFE           3416             DJNZ    R2,$
0B24 7A01           3417             MOV     R2,#1;00
0B26 DAFE           3418             DJNZ    R2,$
                    3419             
0B28 22             3420             RET
                    3421     ;-----------------------------------------------------------
                    3422     ;¹Ø½ÓÊÕÊ¹ÄÜ
                    3423     ;Çå½ÓÊÕ±ê¼Ç
0B29                3424     _FUN_HDLC_CLOSECLR:
                    3425             
0B29 120000   F     3426             CALL    _BK5822_RST
0B2C 7F00           3427             MOV     R7,#0
0B2E 120000   F     3428             CALL    Rx_En
                    3429             
0B31 22             3430             RET     
                    3431             ;=== ¹Ø½ÓÊÕÊ¹ÄÜ ===
                    3432     ;       MOV     R7,#0
                    3433     ;       CALL    Rx_En
                    3434             ;=== Çå±ê¼Ç=== 
                    3435     ;       MOV     R5,#15
                    3436     ;       MOV     R6,#4
                    3437     ;       MOV     R7,#XDATA_HOLD
                    3438     ;       SETB    BIT_BUFADDR
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    55

                    3439     ;       CALL    SPI_Read_Reg
                    3440             ;Çå½ÓÊÕ±ê¼Ç
                    3441     ;       MOV     R0,#XDATA_HOLD+3
                    3442     ;               ;MOVX   A,@R0
                    3443     
                    3444     ;       ORL     A,#00001111B
                    3445     ;               ;MOVX   @R0,A
                    3446     
                    3447     
                    3448             ;¹Ø½ÓÊÕÊ¹ÄÜ
                    3449             ;MOV    R0,#XDATA_HOLD
                    3450             ;       ;MOVX   A,@R0
                    3451     
                    3452             ;anl    A,#11111101B
                    3453             ;       ;MOVX   @R0,A
                    3454     
                    3455     
                    3456     ;       MOV     R5,#15
                    3457     ;       MOV     R6,#4
                    3458     ;       MOV     R7,#XDATA_HOLD
                    3459     ;       CALL    SPI_Write_Reg
                    3460             
                    3461             ;=== soft wake end ===
                    3462     ;       MOV     R5,#9
                    3463     ;       MOV     R6,#4
                    3464     ;       MOV     R7,#XDATA_HOLD
                    3465     ;       SETB    BIT_BUFADDR
                    3466     ;       CALL    SPI_Read_Reg
                    3467             
                    3468             ;Ð´1
                    3469     ;       MOV     R0,#XDATA_HOLD+2
                    3470     ;               ;MOVX   A,@R0
                    3471     
                    3472     ;       ORL     A,#00000100B
                    3473     ;               ;MOVX   @R0,A
                    3474     
                    3475     ;       MOV     R5,#15
                    3476     ;       MOV     R6,#4
                    3477     ;       MOV     R7,#XDATA_HOLD
                    3478     ;       CALL    SPI_Write_Reg
                    3479             
                    3480             ;Ð´0
                    3481     ;       MOV     R0,#XDATA_HOLD+2
                    3482     ;               ;MOVX   A,@R0
                    3483     
                    3484     ;       anl     A,#11111011B
                    3485     ;               ;MOVX   @R0,A
                    3486     
                    3487     ;       MOV     R5,#15
                    3488     ;       MOV     R6,#4
                    3489     ;       MOV     R7,#XDATA_HOLD
                    3490     ;       CALL    SPI_Write_Reg
                    3491     ;       RET
                    3492     ;-----------------------------------------------------------
                    3493     ;       ¶Áreg9¼Ä´æÆ÷£¬²é¿´5823ÊÇ·ñSleep
                    3494     ;·µ»ØÖµ
                    3495     ;c      =0 sleep
                    3496     ;       =1 no sleep
                    3497     ;-----------------------------------------------------------
0B32                3498     _FUN_HDLC_ISSleepMod:
                    3499             ;=== ¹Ø½ÓÊÕÊ¹ÄÜ ===
0B32 7D09           3500             MOV     R5,#09
0B34 7E04           3501             MOV     R6,#4
0B36 7F00     F     3502             MOV     R7,#XDATA_HOLD
0B38 D200     F     3503             SETB    BIT_BUFADDR
0B3A 120000   F     3504             CALL    SPI_Read_Reg
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    56

                    3505             ;¹Ø½ÓÊÕÊ¹ÄÜ
0B3D 7800     F     3506             MOV     R0,#XDATA_HOLD
                    3507                     ;MOVX   A,@R0
0B3F 758301         3508             MOV     DPH,#1
0B42 8882           3509             MOV     DPL,R0
0B44 E0             3510             MOVX    A,@DPTR
0B45 A2E0           3511             mov     c,acc.0
0B47 22             3512             RET
                    3513     ;-----------------------------------------------------------
                    3514     ;       ¼ì²é5823 reg9~18Ð´µÄÊÇ·ñÕÈ·
                    3515     ;·µ»ØÖµ
                    3516     ;       R7=0 ÕÈ·,=FF ²»ÕÈ·
                    3517     ;-----------------------------------------------------------
0B48                3518     _FUN_HDLC_CheckReg9To18:
                    3519             ;±È½Ïreg9 ~ reg15
0B48 900000   F     3520             MOV     DPTR,#RegArrOBU14
0B4B 7A06           3521             MOV     R2,#6
0B4D                3522     HDLC_CheckReg9To18_LOOP:
0B4D C002           3523             PUSH    AR2
                    3524     
0B4F EA             3525             MOV     A,R2
0B50 2408           3526             ADD     A,#8
0B52 FD             3527             MOV     R5,A
0B53 7E04           3528             MOV     R6,#4
0B55 7F00     F     3529             MOV     R7,#XDATA_HOLD
0B57 D200     F     3530             SETB    BIT_BUFADDR
0B59 120000   F     3531             CALL    SPI_Read_Reg
                    3532             
0B5C 7F00     F     3533             MOV     R7,#XDATA_HOLD+4
0B5E 7B04           3534             MOV     R3,#04  
0B60 120000   F     3535             CALL    _FUN_LIB_FLASHTOXDATALen
                    3536                     
0B63 7800     F     3537             MOV     R0,#XDATA_HOLD
0B65 7900     F     3538             MOV     R1,#XDATA_HOLD+4
0B67 7B04           3539             MOV     R3,#4
0B69                3540     HDLC_CheckReg9To18_CompLOOP:
                    3541                     ;MOVX   A,@R0
0B69 C083           3542             push    dph
0B6B C082           3543             push    dpl
0B6D 758301         3544             MOV     DPH,#1
0B70 8882           3545             MOV     DPL,R0
0B72 E0             3546             MOVX    A,@DPTR
0B73 F5F0           3547             MOV     B,A
                    3548                     ;MOVX   A,@R1
                    3549     ;       MOV     DPH,#1
0B75 8982           3550             MOV     DPL,R1
0B77 E0             3551             MOVX    A,@DPTR
0B78 D082           3552             pop     dpl
0B7A D083           3553             pop     dph
0B7C 65F0           3554             XRL     A,B
0B7E 6005           3555             JZ      HDLC_CheckReg9To18_CompCon
0B80 D002           3556             POP     AR2
0B82 020000   F     3557             JMP     HDLC_CheckReg9To18_ERR
0B85                3558     HDLC_CheckReg9To18_CompCon:     
0B85 08             3559             INC     R0
0B86 09             3560             INC     R1
0B87 DBE0           3561             DJNZ    R3,HDLC_CheckReg9To18_CompLOOP
                    3562     
0B89 C3             3563             CLR     C
0B8A 7404           3564             MOV     A,#4
0B8C F5F0           3565             MOV     B,A
0B8E E582           3566             MOV     A,DPL   
0B90 95F0           3567             SUBB    A,B
0B92 F582           3568             MOV     DPL,A
                    3569             
0B94 E4             3570             CLR     A
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    57

0B95 F5F0           3571             MOV     B,A
0B97 E583           3572             MOV     A,DPH
0B99 95F0           3573             SUBB    A,B
0B9B F583           3574             MOV     DPH,A
0B9D D002           3575             POP     AR2
0B9F DAAC           3576             DJNZ    R2,HDLC_CheckReg9To18_LOOP
                    3577             ;=== ±È½Ïreg17 ===
0BA1 7D11           3578             MOV     R5,#17
0BA3 7E0E           3579             MOV     R6,#14
0BA5 7F00     F     3580             MOV     R7,#XDATA_HOLD
0BA7 D200     F     3581             SETB    BIT_BUFADDR
0BA9 120000   F     3582             CALL    SPI_Read_Reg
                    3583             
0BAC 900000   F     3584             MOV     DPTR,#RegArrASKAnalogReg17
0BAF 7F00     F     3585             MOV     R7,#XDATA_HOLD+14
0BB1 7B0E           3586             MOV     R3,#14
0BB3 120000   F     3587             CALL    _FUN_LIB_FLASHTOXDATALen
                    3588             
0BB6 7800     F     3589             MOV     R0,#XDATA_HOLD
0BB8 7900     F     3590             MOV     R1,#XDATA_HOLD+14
0BBA 7B0E           3591             MOV     R3,#14
0BBC                3592     HDLC_CheckReg9To18_Comp17LOOP:
                    3593                     ;MOVX   A,@R0
0BBC 758301         3594             MOV     DPH,#1
0BBF 8882           3595             MOV     DPL,R0
0BC1 E0             3596             MOVX    A,@DPTR
0BC2 F5F0           3597             MOV     B,A
                    3598                     ;MOVX   A,@R1
0BC4 758301         3599             MOV     DPH,#1
0BC7 8982           3600             MOV     DPL,R1
0BC9 E0             3601             MOVX    A,@DPTR
0BCA 65F0           3602             XRL     A,B
0BCC 6004           3603             JZ      HDLC_CheckReg9To18_Comp17Con
0BCE D003           3604             POP     AR3
0BD0 803C           3605             JMP     HDLC_CheckReg9To18_ERR
0BD2                3606     HDLC_CheckReg9To18_Comp17Con:
0BD2 08             3607             INC     R0
0BD3 09             3608             INC     R1
0BD4 DBE6           3609             DJNZ    R3,HDLC_CheckReg9To18_Comp17LOOP
                    3610             ;=== ±È½Ï Reg18 ===
0BD6 7D12           3611             MOV     R5,#18
0BD8 7E0B           3612             MOV     R6,#11
0BDA 7F00     F     3613             MOV     R7,#XDATA_HOLD
0BDC D200     F     3614             SETB    BIT_BUFADDR
0BDE 120000   F     3615             CALL    SPI_Read_Reg
                    3616             
0BE1 900000   F     3617             MOV     DPTR,#RegArrASKAnalogReg18
0BE4 7F00     F     3618             MOV     R7,#XDATA_HOLD+11
0BE6 7B0B           3619             MOV     R3,#11
0BE8 120000   F     3620             CALL    _FUN_LIB_FLASHTOXDATALen
                    3621             
0BEB 7800     F     3622             MOV     R0,#XDATA_HOLD
0BED 7900     F     3623             MOV     R1,#XDATA_HOLD+11
0BEF 7B0B           3624             MOV     R3,#11
0BF1                3625     HDLC_CheckReg9To18_Comp18LOOP:
                    3626                     ;MOVX   A,@R0
0BF1 758301         3627             MOV     DPH,#1
0BF4 8882           3628             MOV     DPL,R0
0BF6 E0             3629             MOVX    A,@DPTR
0BF7 F5F0           3630             MOV     B,A
                    3631                     ;MOVX   A,@R1
0BF9 758301         3632             MOV     DPH,#1
0BFC 8982           3633             MOV     DPL,R1
0BFE E0             3634             MOVX    A,@DPTR
0BFF 65F0           3635             XRL     A,B
0C01 6004           3636             JZ      HDLC_CheckReg9To18_Comp18Con
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    58

0C03 D003           3637             POP     AR3
0C05 8007           3638             JMP     HDLC_CheckReg9To18_ERR
0C07                3639     HDLC_CheckReg9To18_Comp18Con:   
0C07 08             3640             INC     R0
0C08 09             3641             INC     R1
0C09 DBE6           3642             DJNZ    R3,HDLC_CheckReg9To18_Comp18LOOP
                    3643             
0C0B 7F00           3644             MOV     R7,#CONST_STATE_TRUE
0C0D 22             3645             RET
0C0E                3646     HDLC_CheckReg9To18_ERR:
0C0E 7FFF           3647             MOV     R7,#CONST_STATE_FALSE
0C10 22             3648             RET
                    3649     ;-----------------------------------------------------------
                    3650     ;REG4.0
                    3651     ;       1 Normal
                    3652     ;       0 CW
                    3653     ;R7     =1 NORMAL
                    3654     ;R7     =0 CW
0C11                3655     _FUN_HDLC_SWRX:
                    3656             
0C11 C007           3657             PUSH    AR7
0C13 7D04           3658             MOV     R5,#4
0C15 7E04           3659             MOV     R6,#4
0C17 7F00     F     3660             MOV     R7,#XDATA_HOLD
0C19 D200     F     3661             SETB    BIT_BUFADDR
0C1B 120000   F     3662             CALL    SPI_Read_Reg
                    3663             
0C1E 7800     F     3664             MOV     R0,#XDATA_HOLD+3
0C20 758301         3665             MOV     DPH,#1
0C23 8882           3666             MOV     DPL,R0
0C25 E0             3667             MOVX    A,@DPTR
0C26 D007           3668             POP     AR7
                    3669             
0C28 EF             3670             MOV     A,R7
0C29 7004           3671             JNZ     HDLC_SWRX_1
0C2B                3672     HDLC_SWRX_0:
0C2B 54FE           3673             ANL     A,#11111110B
0C2D 8002           3674             JMP     HDLC_SWRX_01OVER
0C2F                3675     HDLC_SWRX_1:
0C2F 4401           3676             ORL     A,#00000001B
0C31                3677     HDLC_SWRX_01OVER:
                    3678             
0C31 8882           3679             MOV     DPL,R0 
0C33 F0             3680             MOVX    @DPTR,A 
                    3681             
0C34 7D04           3682             MOV     R5,#4
0C36 7E04           3683             MOV     R6,#4
0C38 7F00     F     3684             MOV     R7,#XDATA_HOLD
0C3A 120000   F     3685             CALL    SPI_Write_Reg
                    3686             
0C3D 22             3687             RET
                    3688             
                    3689     ;////////////////////////////////////////////////////////////////////////////////
                    3690     ;REG15.15 = 0 OUTPUT
                    3691     ;REG15.15 = 1 INPUT
                    3692     ;R7
0C3E                3693     _FUN_HOLD_DIOPOINT:
                    3694             
0C3E C007           3695             PUSH    AR7
                    3696             ;¿ª½ÓÊÕÊ¹ÄÜ
0C40 7D0F           3697             MOV     R5,#15
0C42 7E04           3698             MOV     R6,#4
0C44 7F00     F     3699             MOV     R7,#XDATA_HOLD
0C46 D200     F     3700             SETB    BIT_BUFADDR
0C48 120000   F     3701             CALL    SPI_Read_Reg
                    3702             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    59

0C4B 7800     F     3703             MOV     R0,#XDATA_HOLD+1
0C4D 758301         3704             MOV     DPH,#1
0C50 8882           3705             MOV     DPL,R0
0C52 E0             3706             MOVX    A,@DPTR 
                    3707             
0C53 D007           3708             POP     AR7
                    3709             
0C55 BF0004         3710             CJNE    R7,#00,HOLD_DIOPOINT_1
0C58                3711     HOLD_DIOPOINT_0:
0C58 547F           3712             ANL     A,#01111111B
0C5A 8002           3713             JMP     HOLD_DIOPOINT_10
0C5C                3714     HOLD_DIOPOINT_1:
0C5C 4480           3715             ORL     A,#10000000B
0C5E                3716     HOLD_DIOPOINT_10:
                    3717             
0C5E 8882           3718             MOV     DPL,R0
0C60 F0             3719             MOVX    @DPTR,A
                    3720             
0C61 7D0F           3721             MOV     R5,#15
0C63 7E04           3722             MOV     R6,#04
0C65 7F00     F     3723             MOV     R7,#XDATA_HOLD
0C67 120000   F     3724             CALL    SPI_Write_Reg
                    3725             
0C6A 22             3726             RET
                    3727     ;////////////////////////////////////////////////////////////////////////////////
                    3728     
                    3729     ;///////////////////////////////
0C6B                3730     _Write_18_H:
                    3731             
0C6B C290           3732             CLR     Pin_5823BK_CS   
                    3733      
                    3734      
0C6D 7A0A           3735             mov     r2,#10
0C6F DAFE           3736             djnz    r2,$
                    3737             
0C71 D290           3738             SETB    Pin_5823BK_CS
                    3739     
0C73 7AC8           3740             MOV     R2,#200
0C75 DAFE           3741             DJNZ    R2,$
0C77 7A64           3742             MOV     R2,#100
0C79 DAFE           3743             DJNZ    R2,$
                    3744             
0C7B C290           3745             CLR     Pin_5823BK_CS
0C7D 7A0A           3746             MOV     R2,#10
0C7F DAFE           3747             DJNZ    R2,$
0C81 900000   F     3748             MOV     DPTR,#RegArrASKAnalogReg18_H
                    3749             
0C84 7412           3750             MOV     A,#18
0C86 4420           3751             ORL     A,#020H         ;Ð´ÃüÁî
0C88 120000   F     3752             CALL    SPI_W
                    3753             
                    3754             
                    3755             
0C8B 7E0B           3756             MOV     R6,#11;10               ;¼Ä´æÆ÷×Ö½Ú¸öÊÎª11¸ö£¬ÏÈ³õÊ¼»¯11--1¸ö£¬ÔÙ³õÊ¼»¯0
0C8D 7A00           3757             MOV     R2,#0
0C8F                3758     _Write_18_H_Loop:
0C8F EA             3759             MOV     A,R2
0C90 93             3760             MOVC    A,@A+DPTR
0C91 120000   F     3761             CALL    SPI_W
0C94 0A             3762             INC     R2
0C95 DEF8           3763             DJNZ    R6,_Write_18_H_Loop
                    3764             
0C97 7A0A           3765             MOV     R2,#10
0C99 DAFE           3766             DJNZ    R2,$
0C9B D290           3767             SETB    Pin_5823BK_CS           
                    3768             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    60

0C9D 7AC8           3769             MOV     R2,#200
0C9F DAFE           3770             DJNZ    R2,$
0CA1 7A64           3771             MOV     R2,#100
0CA3 DAFE           3772             DJNZ    R2,$
                    3773     
                    3774     
0CA5 22             3775             RET
                    3776             
                    3777     ;//////////////////////////////////////////////////////////////////////////////////////////
                    3778     ;//////////////////////////////////////////////////////////////////////////////////////////
                    3779     ;//////////////////////////////////////////////////////////////////////////////////////////
                    3780             
0CA6                3781     _Write_18_L:
                    3782             ;ret
                    3783      
                    3784             
                    3785             
                    3786             
                    3787             
0CA6 7AC8           3788             MOV     R2,#200
0CA8 DAFE           3789             DJNZ    R2,$
0CAA 7A64           3790             MOV     R2,#100
0CAC DAFE           3791             DJNZ    R2,$
                    3792             
0CAE C290           3793             CLR     Pin_5823BK_CS
0CB0 7A0A           3794             MOV     R2,#10
0CB2 DAFE           3795             DJNZ    R2,$
0CB4 900000   F     3796             MOV     DPTR,#RegArrASKAnalogReg18_L
                    3797             
0CB7 7412           3798             MOV     A,#18
0CB9 4420           3799             ORL     A,#020H         ;Ð´ÃüÁî
0CBB 120000   F     3800             CALL    SPI_W
                    3801             
                    3802             
                    3803             
0CBE 7E0B           3804             MOV     R6,#11;10               ;¼Ä´æÆ÷×Ö½Ú¸öÊÎª11¸ö£¬ÏÈ³õÊ¼»¯11--1¸ö£¬ÔÙ³õÊ¼»¯0
0CC0 7A00           3805             MOV     R2,#0
0CC2                3806     _Write_18_L_Loop:
0CC2 EA             3807             MOV     A,R2
0CC3 93             3808             MOVC    A,@A+DPTR
0CC4 120000   F     3809             CALL    SPI_W
0CC7 0A             3810             INC     R2
0CC8 DEF8           3811             DJNZ    R6,_Write_18_L_Loop
                    3812             
0CCA 7A0A           3813             MOV     R2,#10
0CCC DAFE           3814             DJNZ    R2,$
0CCE D290           3815             SETB    Pin_5823BK_CS           
                    3816             
0CD0 7AC8           3817             MOV     R2,#200
0CD2 DAFE           3818             DJNZ    R2,$
0CD4 7A64           3819             MOV     R2,#100
0CD6 DAFE           3820             DJNZ    R2,$
                    3821             
0CD8 22             3822             RET     
                    3823     
                    3824     
                    3825     
                    3826      
                    3827     
                    3828     
                    3829             END
                             
                             
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    61

SYMBOL TABLE LISTING
------ ----- -------


N A M E                           T Y P E  V A L U E   ATTRIBUTES

?CO?HDLC?FLASHSTR. . . . . . . .  C SEG    006FH       REL=UNIT
?PR?HDLC?MATER . . . . . . . . .  C SEG    0CD9H       REL=UNIT
ACC. . . . . . . . . . . . . . .  D ADDR   00E0H   A   
AP_START . . . . . . . . . . . .  C ADDR   -----       EXT
AR2. . . . . . . . . . . . . . .  D ADDR   0002H   A   
AR3. . . . . . . . . . . . . . .  D ADDR   0003H   A   
AR6. . . . . . . . . . . . . . .  D ADDR   0006H   A   
AR7. . . . . . . . . . . . . . .  D ADDR   0007H   A   
AUTOASKREG_08. . . . . . . . . .  C ADDR   0676H   R   SEG=?PR?HDLC?MATER
AUTOASKREG_17. . . . . . . . . .  C ADDR   070EH   R   SEG=?PR?HDLC?MATER
AUTOASKREG_18. . . . . . . . . .  C ADDR   0738H   R   SEG=?PR?HDLC?MATER
AUTOASKREG_916 . . . . . . . . .  C ADDR   06B5H   R   SEG=?PR?HDLC?MATER
B. . . . . . . . . . . . . . . .  D ADDR   00F0H   A   
BIT_BST. . . . . . . . . . . . .  B ADDR   -----       EXT
BIT_BUFADDR. . . . . . . . . . .  B ADDR   -----       EXT
BIT_CHANNELFLAG. . . . . . . . .  B ADDR   -----       EXT
BIT_TMP. . . . . . . . . . . . .  B ADDR   -----       EXT
BK5822_1MSDELAY. . . . . . . . .  C ADDR   0658H   R   SEG=?PR?HDLC?MATER
BK5822_LOOP. . . . . . . . . . .  C ADDR   0658H   R   SEG=?PR?HDLC?MATER
BK5822_LOOP1 . . . . . . . . . .  C ADDR   065AH   R   SEG=?PR?HDLC?MATER
BK5822_LOOP2 . . . . . . . . . .  C ADDR   065CH   R   SEG=?PR?HDLC?MATER
BK5822_OVER. . . . . . . . . . .  C ADDR   0662H   R   SEG=?PR?HDLC?MATER
BK_SPIRST_1. . . . . . . . . . .  C ADDR   062BH   R   SEG=?PR?HDLC?MATER
BK_SPIRST_2. . . . . . . . . . .  C ADDR   0630H   R   SEG=?PR?HDLC?MATER
BRT. . . . . . . . . . . . . . .  N NUMB   009CH   A   
BUSY . . . . . . . . . . . . . .  B ADDR   0020H.0 A   
CCAP0H . . . . . . . . . . . . .  N NUMB   00FAH   A   
CCAP0L . . . . . . . . . . . . .  N NUMB   00EAH   A   
CCAP1H . . . . . . . . . . . . .  N NUMB   00FBH   A   
CCAP1L . . . . . . . . . . . . .  N NUMB   00EBH   A   
CCAP2H . . . . . . . . . . . . .  N NUMB   00FCH   A   
CCAP2L . . . . . . . . . . . . .  N NUMB   00ECH   A   
CCAP3H . . . . . . . . . . . . .  N NUMB   00FDH   A   
CCAP3L . . . . . . . . . . . . .  N NUMB   00EDH   A   
CCAP4H . . . . . . . . . . . . .  N NUMB   00FEH   A   
CCAP4L . . . . . . . . . . . . .  N NUMB   00EEH   A   
CCAP5H . . . . . . . . . . . . .  N NUMB   00FFH   A   
CCAP5L . . . . . . . . . . . . .  N NUMB   00EFH   A   
CCAPM0 . . . . . . . . . . . . .  N NUMB   00DAH   A   
CCAPM1 . . . . . . . . . . . . .  N NUMB   00DBH   A   
CCAPM2 . . . . . . . . . . . . .  N NUMB   00DCH   A   
CCAPM3 . . . . . . . . . . . . .  N NUMB   00DDH   A   
CCAPM4 . . . . . . . . . . . . .  N NUMB   00DEH   A   
CCAPM5 . . . . . . . . . . . . .  N NUMB   00DFH   A   
CCF0 . . . . . . . . . . . . . .  B ADDR   00D8H.0 A   
CCF1 . . . . . . . . . . . . . .  B ADDR   00D8H.1 A   
CCF2 . . . . . . . . . . . . . .  B ADDR   00D8H.2 A   
CCF3 . . . . . . . . . . . . . .  B ADDR   00D8H.3 A   
CCF4 . . . . . . . . . . . . . .  B ADDR   00D8H.4 A   
CCF5 . . . . . . . . . . . . . .  B ADDR   00D8H.5 A   
CCON . . . . . . . . . . . . . .  N NUMB   00D8H   A   
CF . . . . . . . . . . . . . . .  B ADDR   00D8H.7 A   
CH . . . . . . . . . . . . . . .  N NUMB   00F9H   A   
CL . . . . . . . . . . . . . . .  N NUMB   00E9H   A   
CMOD . . . . . . . . . . . . . .  N NUMB   00D9H   A   
CONST_ACTIONTYPE_GETRAND . . . .  N NUMB   0002H   A   
CONST_ACTIONTYPE_GETSECURE . . .  N NUMB   0000H   A   
CONST_ACTIONTYPE_SETMMI. . . . .  N NUMB   0004H   A   
CONST_ACTIONTYPE_SETSECURE . . .  N NUMB   0001H   A   
CONST_ACTIONTYPE_TRANSFERCHANNEL  N NUMB   0003H   A   
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    62

CONST_ACT_H. . . . . . . . . . .  N NUMB   0003H   A   
CONST_ACT_H_H. . . . . . . . . .  N NUMB   0001H   A   
CONST_ACT_H_L. . . . . . . . . .  N NUMB   0000H   A   
CONST_ACT_L. . . . . . . . . . .  N NUMB   0001H   A   
CONST_ACT_L_H. . . . . . . . . .  N NUMB   0006H   A   
CONST_ACT_L_L. . . . . . . . . .  N NUMB   000AH   A   
CONST_ACT_M. . . . . . . . . . .  N NUMB   0002H   A   
CONST_ACT_M_H. . . . . . . . . .  N NUMB   0000H   A   
CONST_ACT_M_L. . . . . . . . . .  N NUMB   0006H   A   
CONST_ACT_V. . . . . . . . . . .  N NUMB   0002H   A   
CONST_BAUD_115200. . . . . . . .  N NUMB   0002H   A   
CONST_BAUD_115200PC. . . . . . .  N NUMB   0003H   A   
CONST_BAUD_230000. . . . . . . .  N NUMB   0004H   A   
CONST_BAUD_38400 . . . . . . . .  N NUMB   0001H   A   
CONST_BAUD_38400PC . . . . . . .  N NUMB   0005H   A   
CONST_BAUD_9600. . . . . . . . .  N NUMB   0000H   A   
CONST_BAUD_9600PC. . . . . . . .  N NUMB   0006H   A   
CONST_BAUD_BITFULL12 . . . . . .  N NUMB   000CH   A   
CONST_BAUD_BITFULL20 . . . . . .  N NUMB   000EH   A   
CONST_BAUD_BITFULL28 . . . . . .  N NUMB   0010H   A   
CONST_BAUD_BITFULL8. . . . . . .  N NUMB   000BH   A   
CONST_BAUD_BITHALF12 . . . . . .  N NUMB   000CH   A   
CONST_BAUD_CURRENTBITFULL. . . .  N NUMB   00B3H   A   
CONST_BAUD_CURRENTBITHALF. . . .  N NUMB   0058H   A   
CONST_BAUD_FULL115200. . . . . .  N NUMB   001DH   A   
CONST_BAUD_FULL230000. . . . . .  N NUMB   000FH   A   
CONST_BAUD_FULL38400 . . . . . .  N NUMB   005DH   A   
CONST_BAUD_FULL9600. . . . . . .  N NUMB   00B3H   A   
CONST_BAUD_HALF115200. . . . . .  N NUMB   000DH   A   
CONST_BAUD_HALF230000. . . . . .  N NUMB   0008H   A   
CONST_BAUD_HALF38400 . . . . . .  N NUMB   002DH   A   
CONST_BAUD_HALF9600. . . . . . .  N NUMB   0058H   A   
CONST_BAUD_HAND115200. . . . . .  N NUMB   00F8H   A   
CONST_BAUD_HAND115200PC. . . . .  N NUMB   00F3H   A   
CONST_BAUD_HAND230000. . . . . .  N NUMB   00FCH   A   
CONST_BAUD_HAND38400 . . . . . .  N NUMB   00E9H   A   
CONST_BAUD_HAND38400PC . . . . .  N NUMB   00D8H   A   
CONST_BAUD_HAND9600. . . . . . .  N NUMB   00A3H   A   
CONST_BAUD_HAND9600PC. . . . . .  N NUMB   0060H   A   
CONST_BLACK_H. . . . . . . . . .  N NUMB   00FFH   A   
CONST_BLACK_L. . . . . . . . . .  N NUMB   00FFH   A   
CONST_BSTLIMIT . . . . . . . . .  N NUMB   0008H   A   
CONST_BSTLIMIT02 . . . . . . . .  N NUMB   0064H   A   
CONST_CARD_CONSUME . . . . . . .  N NUMB   0016H   A   
CONST_CARD_PASS. . . . . . . . .  N NUMB   0017H   A   
CONST_CELLFILE_H . . . . . . . .  N NUMB   0000H   A   
CONST_CELLFILE_L . . . . . . . .  N NUMB   0009H   A   
CONST_DATA_VALUE1. . . . . . . .  N NUMB   000FH   A   
CONST_DATA_VALUE2. . . . . . . .  N NUMB   00DEH   A   
CONST_DSRC_ACTION. . . . . . . .  N NUMB   0007H   A   
CONST_DSRC_ACTIONTYPE. . . . . .  N NUMB   0009H   A   
CONST_DSRC_CHANNELIDICC. . . . .  N NUMB   0001H   A   
CONST_DSRC_CHANNELIDSAM. . . . .  N NUMB   0002H   A   
CONST_DSRC_CONTAIN . . . . . . .  N NUMB   000AH   A   
CONST_DSRC_DID . . . . . . . . .  N NUMB   0008H   A   
CONST_DSRC_FILDIDAPPKEY. . . . .  N NUMB   0000H   A   
CONST_DSRC_FILDIDCONSUME . . . .  N NUMB   0002H   A   
CONST_DSRC_FILDIDHOLD. . . . . .  N NUMB   0003H   A   
CONST_DSRC_FILDIDVEHICLE . . . .  N NUMB   0001H   A   
CONST_DSRC_FILL. . . . . . . . .  N NUMB   000BH   A   
CONST_DSRC_HEAD. . . . . . . . .  N NUMB   0006H   A   
CONST_DSRC_LLCCTRL . . . . . . .  N NUMB   0005H   A   
CONST_DSRC_MACCTRL . . . . . . .  N NUMB   0004H   A   
CONST_ESAMCELLFILE_H . . . . . .  N NUMB   00EFH   A   
CONST_ESAMCELLFILE_L . . . . . .  N NUMB   0007H   A   
CONST_ETC_INPUT. . . . . . . . .  N NUMB   0003H   A   
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    63

CONST_FALSH_POWERH . . . . . . .  N NUMB   0072H   A   
CONST_FALSH_POWERL . . . . . . .  N NUMB   00F7H   A   
CONST_FALSH_PREFLAG02H . . . . .  N NUMB   0072H   A   
CONST_FALSH_PREFLAG02L . . . . .  N NUMB   00F5H   A   
CONST_FALSH_PREFLAG03H . . . . .  N NUMB   0072H   A   
CONST_FALSH_PREFLAG03L . . . . .  N NUMB   00F6H   A   
CONST_FALSH_PREFLAGH . . . . . .  N NUMB   0072H   A   
CONST_FALSH_PREFLAGL . . . . . .  N NUMB   00F4H   A   
CONST_FALSH_PREFLAGLEN . . . . .  N NUMB   0001H   A   
CONST_FLAG_INPUT . . . . . . . .  N NUMB   0000H   A   
CONST_FLAG_OUTPUT. . . . . . . .  N NUMB   0001H   A   
CONST_FLASH_0002H. . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0002L. . . . . . . .  N NUMB   0058H   A   
CONST_FLASH_0002LEN. . . . . . .  N NUMB   0004H   A   
CONST_FLASH_0012H. . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0012L. . . . . . . .  N NUMB   005CH   A   
CONST_FLASH_0012LEN. . . . . . .  N NUMB   0028H   A   
CONST_FLASH_0015H. . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0015L. . . . . . . .  N NUMB   0084H   A   
CONST_FLASH_0015LEN. . . . . . .  N NUMB   002BH   A   
CONST_FLASH_0019GBLEN. . . . . .  N NUMB   002BH   A   
CONST_FLASH_0019H. . . . . . . .  N NUMB   0072H   A   
CONST_FLASH_0019L. . . . . . . .  N NUMB   00AFH   A   
CONST_FLASH_0019LEN. . . . . . .  N NUMB   003CH   A   
CONST_FLASH_BEACONIDUNIXTIMEH. .  N NUMB   0072H   A   
CONST_FLASH_BEACONIDUNIXTIMEL. .  N NUMB   00ECH   A   
CONST_FLASH_BEACONIDUNIXTIMELEN.  N NUMB   0008H   A   
CONST_FLASH_BLOCK01. . . . . . .  N NUMB   0072H   A   
CONST_FLASH_CARDTYPELEN. . . . .  N NUMB   0001H   A   
CONST_FLASH_FILELEN. . . . . . .  N NUMB   00ECH   A   
CONST_FLASH_LASTCARDH. . . . . .  N NUMB   0072H   A   
CONST_FLASH_LASTCARDL. . . . . .  N NUMB   00EBH   A   
CONST_FLASH_STARTHIGH. . . . . .  N NUMB   0072H   A   
CONST_FLASH_STARTLOW . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYS0020H . . . . . .  N NUMB   006CH   A   
CONST_FLASH_SYS0020L . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYS0020NUMH. . . . .  N NUMB   006AH   A   
CONST_FLASH_SYS0020NUML. . . . .  N NUMB   0000H   A   
CONST_FLASH_SYSINFOH . . . . . .  N NUMB   0072H   A   
CONST_FLASH_SYSINFOL . . . . . .  N NUMB   0000H   A   
CONST_FLASH_SYSINFOLEN . . . . .  N NUMB   0058H   A   
CONST_GDO2_MCSM2 . . . . . . . .  N NUMB   0002H   A   
CONST_GDO2_VALUE . . . . . . . .  N NUMB   0046H   A   
CONST_GSM_MAXNUM . . . . . . . .  N NUMB   00F0H   A   
CONST_GSM_NUM. . . . . . . . . .  N NUMB   0008H   A   
CONST_GSM_PJNUM. . . . . . . . .  N NUMB   0014H   A   
CONST_HANDSECOND . . . . . . . .  N NUMB   0015H   A   
CONST_HOLD_5823RX. . . . . . . .  N NUMB   0000H   A   
CONST_HOLD_5823TX. . . . . . . .  N NUMB   0001H   A   
CONST_INPUT_ISENABLE . . . . . .  N NUMB   0001H   A   
CONST_LHX_FLAG . . . . . . . . .  N NUMB   0002H   A   
CONST_MAX_RXNUM. . . . . . . . .  N NUMB   0005H   A   
CONST_MCU_WKCTH. . . . . . . . .  N NUMB   0008H   A   
CONST_MCU_WKCTL. . . . . . . . .  N NUMB   00FFH   A   
CONST_MF_DECREMENT . . . . . . .  N NUMB   0002H   A   
CONST_MF_INCREMENT . . . . . . .  N NUMB   0003H   A   
CONST_MF_RC500DECREMENT. . . . .  N NUMB   00C0H   A   
CONST_MF_RC500INCREMENT. . . . .  N NUMB   00C1H   A   
CONST_MF_READ. . . . . . . . . .  N NUMB   0000H   A   
CONST_MF_RESTOR. . . . . . . . .  N NUMB   0004H   A   
CONST_MF_WRITE . . . . . . . . .  N NUMB   0001H   A   
CONST_MTC_INPUT. . . . . . . . .  N NUMB   0001H   A   
CONST_PPS_115200 . . . . . . . .  N NUMB   0018H   A   
CONST_PPS_230000 . . . . . . . .  N NUMB   0096H   A   
CONST_PPS_38400. . . . . . . . .  N NUMB   0013H   A   
CONST_PPS_9600 . . . . . . . . .  N NUMB   0010H   A   
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    64

CONST_PRO_OVERTIME2S . . . . . .  N NUMB   00FAH   A   
CONST_RTCOVERFLOW. . . . . . . .  N NUMB   0090H   A   
CONST_RTC_OFF. . . . . . . . . .  N NUMB   00FFH   A   
CONST_RTC_ON . . . . . . . . . .  N NUMB   0055H   A   
CONST_SOF. . . . . . . . . . . .  N NUMB   0000H   A   
CONST_SOFTBYTESP . . . . . . . .  N NUMB   0014H   A   
CONST_SOFTFIRSTSCANTIME. . . . .  N NUMB   0010H   A   
CONST_SOFTFIRSTSCANTIMEXX. . . .  N NUMB   00FFH   A   
CONST_SOFTSECOND . . . . . . . .  N NUMB   0070H   A   
CONST_SSRC_FID . . . . . . . . .  N NUMB   000CH   A   
CONST_STATE_5823INIER. . . . . .  N NUMB   0007H   A   
CONST_STATE_5823SLEEPER. . . . .  N NUMB   0008H   A   
CONST_STATE_ACCEPTOVER . . . . .  N NUMB   0003H   A   
CONST_STATE_ACCEPTOVERLEN. . . .  N NUMB   0004H   A   
CONST_STATE_ACTCARDINVALID . . .  N NUMB   0006H   A   
CONST_STATE_ACTIVEFAIL . . . . .  N NUMB   0004H   A   
CONST_STATE_AUTHER . . . . . . .  N NUMB   0006H   A   
CONST_STATE_BASE01ANTICOLL . . .  N NUMB   001DH   A   
CONST_STATE_BASE01CONTACT. . . .  N NUMB   0015H   A   
CONST_STATE_BASE01ESAMDF01 . . .  N NUMB   0014H   A   
CONST_STATE_BASE01RATS . . . . .  N NUMB   001FH   A   
CONST_STATE_BASE01RE . . . . . .  N NUMB   001CH   A   
CONST_STATE_BASE01SEL. . . . . .  N NUMB   001EH   A   
CONST_STATE_BASE02ANTICOLL . . .  N NUMB   0019H   A   
CONST_STATE_BASE02CONTACT. . . .  N NUMB   0016H   A   
CONST_STATE_BASE02RATS . . . . .  N NUMB   001BH   A   
CONST_STATE_BASE02RE . . . . . .  N NUMB   0018H   A   
CONST_STATE_BASE02SEL. . . . . .  N NUMB   001AH   A   
CONST_STATE_BASEESAMDF01 . . . .  N NUMB   000BH   A   
CONST_STATE_BASEN01INIT. . . . .  N NUMB   0013H   A   
CONST_STATE_BASENINIT. . . . . .  N NUMB   000AH   A   
CONST_STATE_CARDPREDEAL0002. . .  N NUMB   000DH   A   
CONST_STATE_CARDPREDEAL0012. . .  N NUMB   000EH   A   
CONST_STATE_CARDPREDEAL0015. . .  N NUMB   000FH   A   
CONST_STATE_CARDPREDEAL0019. . .  N NUMB   0010H   A   
CONST_STATE_CARDPREDEAL1001. . .  N NUMB   000CH   A   
CONST_STATE_CARDPREDEAL3F00. . .  N NUMB   0011H   A   
CONST_STATE_CARDPREDEAL81. . . .  N NUMB   0012H   A   
CONST_STATE_EXMEMORYER . . . . .  N NUMB   0021H   A   
CONST_STATE_EXMEMORYER02 . . . .  N NUMB   0022H   A   
CONST_STATE_FALSE. . . . . . . .  N NUMB   00FFH   A   
CONST_STATE_GETSECURESELFILEER .  N NUMB   0009H   A   
CONST_STATE_ILLEGALACTCARD . . .  N NUMB   0005H   A   
CONST_STATE_ILLEGALINPUTCARD . .  N NUMB   0002H   A   
CONST_STATE_INPUTCARDINVALID . .  N NUMB   0003H   A   
CONST_STATE_INPUTFAIL. . . . . .  N NUMB   0001H   A   
CONST_STATE_MEMORYER . . . . . .  N NUMB   0020H   A   
CONST_STATE_RSTCPUER . . . . . .  N NUMB   0005H   A   
CONST_STATE_SERIALACCPET . . . .  N NUMB   0001H   A   
CONST_STATE_SERIALOVERTIME . . .  N NUMB   0002H   A   
CONST_STATE_TEST . . . . . . . .  N NUMB   0017H   A   
CONST_STATE_TRUE . . . . . . . .  N NUMB   0000H   A   
CONST_SYS_55 . . . . . . . . . .  N NUMB   0055H   A   
CONST_SYS_AA . . . . . . . . . .  N NUMB   00AAH   A   
CONST_SYS_OBUIDLEN . . . . . . .  N NUMB   0004H   A   
CONST_SYS_POWERONTIMER . . . . .  N NUMB   000AH   A   
CONST_SYS_PREFLAG. . . . . . . .  N NUMB   0088H   A   
CONST_SYS_RTCOVERTIME. . . . . .  N NUMB   0064H   A   
CONST_SYS_TRADECONFINE . . . . .  N NUMB   00FFH   A   
CONST_TIMEER02 . . . . . . . . .  N NUMB   0001H   A   
CONST_TIMEER03 . . . . . . . . .  N NUMB   00FEH   A   
CONST_TIMEER04 . . . . . . . . .  N NUMB   0001H   A   
CONST_VSTLIMIT . . . . . . . . .  N NUMB   00FFH   A   
CONST_WHITE_H. . . . . . . . . .  N NUMB   0000H   A   
CONST_WHITE_L. . . . . . . . . .  N NUMB   0031H   A   
CONST_WORKSTAION_0 . . . . . . .  N NUMB   0000H   A   
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    65

CONST_WORKSTAION_1 . . . . . . .  N NUMB   0001H   A   
CONST_WORKSTAION_2 . . . . . . .  N NUMB   0002H   A   
CONST_WORKSTAION_3 . . . . . . .  N NUMB   0003H   A   
CR . . . . . . . . . . . . . . .  B ADDR   00D8H.6 A   
DATA_DSRCRXLEN . . . . . . . . .  D ADDR   -----       EXT
DATA_DSRCTXLEN . . . . . . . . .  D ADDR   -----       EXT
DATA_POWERONTIMER. . . . . . . .  D ADDR   -----       EXT
DATA_RXBUF . . . . . . . . . . .  D ADDR   -----       EXT
DPH. . . . . . . . . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . . . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . . . . . . . . .  B ADDR   00A8H.7 A   
EPCAI. . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
EPCA_LVD . . . . . . . . . . . .  B ADDR   00A8H.6 A   
HDLC . . . . . . . . . . . . . .  N NUMB   -----       
HDLC_5823_CLEARRXER. . . . . . .  C ADDR   020EH   R   SEG=?PR?HDLC?MATER
HDLC_5823_RECEVICEDATA . . . . .  C ADDR   0231H   R   SEG=?PR?HDLC?MATER
HDLC_5823_RXFIFO . . . . . . . .  C ADDR   0285H   R   SEG=?PR?HDLC?MATER
HDLC_5823_RXFIFOLENOK. . . . . .  C ADDR   0291H   R   SEG=?PR?HDLC?MATER
HDLC_5823_RXLOOP . . . . . . . .  C ADDR   01F0H   R   SEG=?PR?HDLC?MATER
HDLC_5823_RXLOOPS. . . . . . . .  C ADDR   01CFH   R   SEG=?PR?HDLC?MATER
HDLC_5823_RXSETFIFOLENOK . . . .  C ADDR   0AA7H   R   SEG=?PR?HDLC?MATER
HDLC_5823_RXSETMMILOOPS. . . . .  C ADDR   09E1H   R   SEG=?PR?HDLC?MATER
HDLC_CHANGECHANNEL_1 . . . . . .  C ADDR   0AF9H   R   SEG=?PR?HDLC?MATER
HDLC_CHECKREG9TO18_COMP17CON . .  C ADDR   0BD2H   R   SEG=?PR?HDLC?MATER
HDLC_CHECKREG9TO18_COMP17LOOP. .  C ADDR   0BBCH   R   SEG=?PR?HDLC?MATER
HDLC_CHECKREG9TO18_COMP18CON . .  C ADDR   0C07H   R   SEG=?PR?HDLC?MATER
HDLC_CHECKREG9TO18_COMP18LOOP. .  C ADDR   0BF1H   R   SEG=?PR?HDLC?MATER
HDLC_CHECKREG9TO18_COMPCON . . .  C ADDR   0B85H   R   SEG=?PR?HDLC?MATER
HDLC_CHECKREG9TO18_COMPLOOP. . .  C ADDR   0B69H   R   SEG=?PR?HDLC?MATER
HDLC_CHECKREG9TO18_ERR . . . . .  C ADDR   0C0EH   R   SEG=?PR?HDLC?MATER
HDLC_CHECKREG9TO18_LOOP. . . . .  C ADDR   0B4DH   R   SEG=?PR?HDLC?MATER
HDLC_SWRX_0. . . . . . . . . . .  C ADDR   0C2BH   R   SEG=?PR?HDLC?MATER
HDLC_SWRX_01OVER . . . . . . . .  C ADDR   0C31H   R   SEG=?PR?HDLC?MATER
HDLC_SWRX_1. . . . . . . . . . .  C ADDR   0C2FH   R   SEG=?PR?HDLC?MATER
HDLC_TX7E_FALGCODE . . . . . . .  C ADDR   0185H   R   SEG=?PR?HDLC?MATER
HDLC_TX7E_FALGCODE0. . . . . . .  C ADDR   0195H   R   SEG=?PR?HDLC?MATER
HDLC_TX_DATAFLAGCODE . . . . . .  C ADDR   00E1H   R   SEG=?PR?HDLC?MATER
HDLC_TX_DATAFLAGCODE_0 . . . . .  C ADDR   0110H   R   SEG=?PR?HDLC?MATER
HDLC_TX_DATAFLAGCODE_0FZC. . . .  C ADDR   0134H   R   SEG=?PR?HDLC?MATER
HDLC_TX_DATAFLAGCODE_0ZC . . . .  C ADDR   011DH   R   SEG=?PR?HDLC?MATER
HDLC_TX_DATAFLAGCODE_1 . . . . .  C ADDR   00E4H   R   SEG=?PR?HDLC?MATER
HDLC_TX_DATAFLAGCODE_1ZC . . . .  C ADDR   00F3H   R   SEG=?PR?HDLC?MATER
HDLC_TX_DATAFLAGCODE_1ZCOVER . .  C ADDR   0101H   R   SEG=?PR?HDLC?MATER
HDLC_TX_ENDCODE. . . . . . . . .  C ADDR   0158H   R   SEG=?PR?HDLC?MATER
HDLC_TX_FALGCODESTART. . . . . .  C ADDR   00D5H   R   SEG=?PR?HDLC?MATER
HDLC_TX_OVER . . . . . . . . . .  C ADDR   016AH   R   SEG=?PR?HDLC?MATER
HDLC_TX_PRECODE. . . . . . . . .  C ADDR   00C3H   R   SEG=?PR?HDLC?MATER
HDLC_TX_SENDDATA . . . . . . . .  C ADDR   00DEH   R   SEG=?PR?HDLC?MATER
HDLC_TX_SENDDATASTART. . . . . .  C ADDR   00DCH   R   SEG=?PR?HDLC?MATER
HDLC_TX_SENDENDCODE. . . . . . .  C ADDR   0150H   R   SEG=?PR?HDLC?MATER
HDLC_TX_SET. . . . . . . . . . .  C ADDR   00AEH   R   SEG=?PR?HDLC?MATER
HDLC_TX_SETOVER. . . . . . . . .  C ADDR   00BEH   R   SEG=?PR?HDLC?MATER
HDLC_TX_T. . . . . . . . . . . .  C ADDR   00A1H   R   SEG=?PR?HDLC?MATER
HDLC_TX_UNFIX. . . . . . . . . .  C ADDR   003DH   R   SEG=?PR?HDLC?MATER
HDLC_TX_WDT. . . . . . . . . . .  C ADDR   0069H   R   SEG=?PR?HDLC?MATER
HOLD_DIOPOINT_0. . . . . . . . .  C ADDR   0C58H   R   SEG=?PR?HDLC?MATER
HOLD_DIOPOINT_1. . . . . . . . .  C ADDR   0C5CH   R   SEG=?PR?HDLC?MATER
HOLD_DIOPOINT_10 . . . . . . . .  C ADDR   0C5EH   R   SEG=?PR?HDLC?MATER
IE . . . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE2. . . . . . . . . . . . . . .  N NUMB   00AFH   A   
IPH. . . . . . . . . . . . . . .  N NUMB   00B7H   A   
ISP_CONTR. . . . . . . . . . . .  N NUMB   00C7H   A   
P0 . . . . . . . . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P3 . . . . . . . . . . . . . . .  D ADDR   00B0H   A   
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    66

P4 . . . . . . . . . . . . . . .  N NUMB   00C0H   A   
PCA_PWM0 . . . . . . . . . . . .  N NUMB   00F2H   A   
PCA_PWM1 . . . . . . . . . . . .  N NUMB   00F3H   A   
PCA_PWM2 . . . . . . . . . . . .  N NUMB   00F4H   A   
PCA_PWM3 . . . . . . . . . . . .  N NUMB   00F5H   A   
PCA_PWM4 . . . . . . . . . . . .  N NUMB   00F6H   A   
PCA_PWM5 . . . . . . . . . . . .  N NUMB   00F7H   A   
PIN_522_MISO . . . . . . . . . .  B ADDR   00C0H.1 A   
PIN_522_MOSI . . . . . . . . . .  B ADDR   00C0H.6 A   
PIN_522_RST. . . . . . . . . . .  B ADDR   0080H.4 A   
PIN_522_SCLK . . . . . . . . . .  B ADDR   0080H.7 A   
PIN_522_SS . . . . . . . . . . .  B ADDR   0080H.6 A   
PIN_5823BK_CS. . . . . . . . . .  B ADDR   0090H.0 A   
PIN_5823BK_IRQ . . . . . . . . .  B ADDR   0090H.2 A   
PIN_5823BK_MISO. . . . . . . . .  B ADDR   0080H.0 A   
PIN_5823BK_MOSI. . . . . . . . .  B ADDR   0080H.1 A   
PIN_5823BK_SCLK. . . . . . . . .  B ADDR   00C0H.2 A   
PIN_BELL_01. . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_BELL_02. . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_BK_CE. . . . . . . . . . . .  B ADDR   0090H.1 A   
PIN_CARD_EXIST . . . . . . . . .  B ADDR   00B0H.3 A   
PIN_ESAM_RST . . . . . . . . . .  B ADDR   0080H.5 A   
PIN_ESAM_RX. . . . . . . . . . .  B ADDR   0080H.3 A   
PIN_ESAM_TX. . . . . . . . . . .  B ADDR   0080H.3 A   
PIN_ES_RST . . . . . . . . . . .  B ADDR   00A0H.6 A   
PIN_GRE. . . . . . . . . . . . .  B ADDR   00C0H.4 A   
PIN_LCD_CS . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_DC . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_RST. . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_SCL. . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_LCD_SDA. . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_OUTPUT_CLK . . . . . . . . .  B ADDR   00B0H.4 A   
PIN_PWRDWN . . . . . . . . . . .  B ADDR   00A0H.4 A   
PIN_PWRDWN_LCD . . . . . . . . .  B ADDR   0090H.5 A   
PIN_PWR_GSM. . . . . . . . . . .  B ADDR   00A0H.3 A   
PIN_PWR_LOWIO. . . . . . . . . .  B ADDR   0090H.5 A   
PIN_PWR_SE . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_RED. . . . . . . . . . . . .  B ADDR   00C0H.5 A   
PIN_SE_IO1 . . . . . . . . . . .  B ADDR   00B0H.4 A   
PIN_SOFTSERIALRX . . . . . . . .  B ADDR   00B0H.0 A   
PIN_SOFTSERIALTXH. . . . . . . .  B ADDR   00B0H.1 A   
PIN_SW . . . . . . . . . . . . .  B ADDR   0090H.5 A   
PIN_UART2_RX . . . . . . . . . .  B ADDR   0090H.6 A   
PIN_UART2_TX . . . . . . . . . .  B ADDR   0090H.7 A   
PIN_UNFIX. . . . . . . . . . . .  B ADDR   00B0H.5 A   
PIN_WAVE_CHANNEL1. . . . . . . .  B ADDR   0080H.2 A   
PIN_WAVE_RX. . . . . . . . . . .  B ADDR   0080H.2 A   
POWER_UP_1 . . . . . . . . . . .  C ADDR   04C1H   R   SEG=?PR?HDLC?MATER
POWER_UP_2 . . . . . . . . . . .  C ADDR   04C6H   R   SEG=?PR?HDLC?MATER
READ_BURST . . . . . . . . . . .  N NUMB   00C0H   A   
REGARRASKANALOGREG17 . . . . . .  C ADDR   0040H   R   SEG=?CO?HDLC?FLASHSTR
REGARRASKANALOGREG18 . . . . . .  C ADDR   004EH   R   SEG=?CO?HDLC?FLASHSTR
REGARRASKANALOGREG18_H . . . . .  C ADDR   0059H   R   SEG=?CO?HDLC?FLASHSTR
REGARRASKANALOGREG18_L . . . . .  C ADDR   0064H   R   SEG=?CO?HDLC?FLASHSTR
REGARROBU. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?CO?HDLC?FLASHSTR
REGARROBU14. . . . . . . . . . .  C ADDR   0038H   R   SEG=?CO?HDLC?FLASHSTR
REGARROBU15. . . . . . . . . . .  C ADDR   003CH   R   SEG=?CO?HDLC?FLASHSTR
REGARROBU_09 . . . . . . . . . .  C ADDR   0024H   R   SEG=?CO?HDLC?FLASHSTR
REG_51_AUXR1 . . . . . . . . . .  N NUMB   00A2H   A   
REG_5412AD_AUXR. . . . . . . . .  N NUMB   008EH   A   
REG_5412AD_P0M0. . . . . . . . .  N NUMB   0094H   A   
REG_5412AD_P0M1. . . . . . . . .  N NUMB   0093H   A   
REG_5412AD_P1M0. . . . . . . . .  N NUMB   0092H   A   
REG_5412AD_P1M1. . . . . . . . .  N NUMB   0091H   A   
REG_5412AD_P2M0. . . . . . . . .  N NUMB   0096H   A   
REG_5412AD_P2M1. . . . . . . . .  N NUMB   0095H   A   
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    67

REG_5412AD_P3M0. . . . . . . . .  N NUMB   00B2H   A   
REG_5412AD_P3M1. . . . . . . . .  N NUMB   00B1H   A   
REG_5412AD_P4M0. . . . . . . . .  N NUMB   00B4H   A   
REG_5412AD_P4M1. . . . . . . . .  N NUMB   00B3H   A   
REG_5412AD_P4SW. . . . . . . . .  N NUMB   00BBH   A   
REG_5412AD_SPCTL . . . . . . . .  N NUMB   0085H   A   
REG_5412AD_SPDAT . . . . . . . .  N NUMB   0086H   A   
REG_5412AD_SPSTAT. . . . . . . .  N NUMB   0084H   A   
REG_MCU_WKCTH. . . . . . . . . .  N NUMB   00ABH   A   
REG_MCU_WKCTL. . . . . . . . . .  N NUMB   00AAH   A   
REG_RC522_BITFRAMINGREG. . . . .  N NUMB   000DH   A   
REG_RC522_COLLREG. . . . . . . .  N NUMB   000EH   A   
REG_RC522_COMIENREG. . . . . . .  N NUMB   0002H   A   
REG_RC522_COMIRQREG. . . . . . .  N NUMB   0004H   A   
REG_RC522_COMMANDREG . . . . . .  N NUMB   0001H   A   
REG_RC522_CONTROLREG . . . . . .  N NUMB   000CH   A   
REG_RC522_CRCRESULTREGH. . . . .  N NUMB   0021H   A   
REG_RC522_CRCRESULTREGL. . . . .  N NUMB   0022H   A   
REG_RC522_CWGSPREG . . . . . . .  N NUMB   0028H   A   
REG_RC522_DEMODREG . . . . . . .  N NUMB   0019H   A   
REG_RC522_DIVIENREG. . . . . . .  N NUMB   0003H   A   
REG_RC522_DIVIRQREG. . . . . . .  N NUMB   0005H   A   
REG_RC522_ERRORREG . . . . . . .  N NUMB   0006H   A   
REG_RC522_FIFODATAREG. . . . . .  N NUMB   0009H   A   
REG_RC522_FIFOLEVELREG . . . . .  N NUMB   000AH   A   
REG_RC522_GSNREG . . . . . . . .  N NUMB   0027H   A   
REG_RC522_MIFAREREG. . . . . . .  N NUMB   001CH   A   
REG_RC522_MODEREG. . . . . . . .  N NUMB   0011H   A   
REG_RC522_MODGSPREG. . . . . . .  N NUMB   0029H   A   
REG_RC522_MODWIDTHREG. . . . . .  N NUMB   0024H   A   
REG_RC522_RC522PAGE. . . . . . .  N NUMB   0000H   A   
REG_RC522_RFCFGREG . . . . . . .  N NUMB   0026H   A   
REG_RC522_RFU. . . . . . . . . .  N NUMB   000FH   A   
REG_RC522_RXMODEREG. . . . . . .  N NUMB   0013H   A   
REG_RC522_RXSELREG . . . . . . .  N NUMB   0017H   A   
REG_RC522_RXTHRESHOLDREG . . . .  N NUMB   0018H   A   
REG_RC522_SERIALSPEEDREG . . . .  N NUMB   001FH   A   
REG_RC522_STATUS1REG . . . . . .  N NUMB   0007H   A   
REG_RC522_STATUS2REG . . . . . .  N NUMB   0008H   A   
REG_RC522_TCOUNTERVALUEREGH. . .  N NUMB   002EH   A   
REG_RC522_TCOUNTERVALUEREGL. . .  N NUMB   002FH   A   
REG_RC522_TMODEREG . . . . . . .  N NUMB   002AH   A   
REG_RC522_TPRESCALERREG. . . . .  N NUMB   002BH   A   
REG_RC522_TRELOADREGH. . . . . .  N NUMB   002CH   A   
REG_RC522_TRELOADREGL. . . . . .  N NUMB   002DH   A   
REG_RC522_TXAUTOREG. . . . . . .  N NUMB   0015H   A   
REG_RC522_TXCONTROLREG . . . . .  N NUMB   0014H   A   
REG_RC522_TXMODEREG. . . . . . .  N NUMB   0012H   A   
REG_RC522_TXSELREG . . . . . . .  N NUMB   0016H   A   
REG_RC522_WATERLEVELREG. . . . .  N NUMB   000BH   A   
REG_SYS_BRT. . . . . . . . . . .  N NUMB   009CH   A   
REG_WAKECLK0 . . . . . . . . . .  N NUMB   008FH   A   
REG_WAKECLK_04 . . . . . . . . .  B ADDR   00D8H.4 A   
REG_WAKECLK_05 . . . . . . . . .  B ADDR   00D8H.5 A   
REG_WAKE_CLK0. . . . . . . . . .  N NUMB   008FH   A   
REG_WDT_CONTR. . . . . . . . . .  N NUMB   00C1H   A   
RELOAD2_CONTR. . . . . . . . . .  N NUMB   00EAH   A   
RX_CARRIER_EN. . . . . . . . . .  C ADDR   0452H   R   SEG=?PR?HDLC?MATER
RX_CARRIER_EN_0. . . . . . . . .  C ADDR   0465H   R   SEG=?PR?HDLC?MATER
RX_CARRIER_EN_1. . . . . . . . .  C ADDR   0486H   R   SEG=?PR?HDLC?MATER
RX_EN. . . . . . . . . . . . . .  C ADDR   03BEH   R   SEG=?PR?HDLC?MATER
RX_EN_1. . . . . . . . . . . . .  C ADDR   03D8H   R   SEG=?PR?HDLC?MATER
RX_EN_2. . . . . . . . . . . . .  C ADDR   03DDH   R   SEG=?PR?HDLC?MATER
S2BUF. . . . . . . . . . . . . .  N NUMB   009BH   A   
S2CON. . . . . . . . . . . . . .  N NUMB   009AH   A   
SEG_HDLC_TX7E. . . . . . . . . .  C ADDR   0171H   R   SEG=?PR?HDLC?MATER
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    68

SPI_R. . . . . . . . . . . . . .  C ADDR   02F1H   R   SEG=?PR?HDLC?MATER
SPI_READ_REG . . . . . . . . . .  C ADDR   032AH   R   SEG=?PR?HDLC?MATER
SPI_READ_REG_1 . . . . . . . . .  C ADDR   0336H   R   SEG=?PR?HDLC?MATER
SPI_READ_REG_MOV . . . . . . . .  C ADDR   033EH   R   SEG=?PR?HDLC?MATER
SPI_READ_REG_MOVOV . . . . . . .  C ADDR   034FH   R   SEG=?PR?HDLC?MATER
SPI_READ_REG_MOVX. . . . . . . .  C ADDR   0341H   R   SEG=?PR?HDLC?MATER
SPI_RW . . . . . . . . . . . . .  C ADDR   02DAH   R   SEG=?PR?HDLC?MATER
SPI_RW_1 . . . . . . . . . . . .  C ADDR   02E0H   R   SEG=?PR?HDLC?MATER
SPI_W. . . . . . . . . . . . . .  C ADDR   0359H   R   SEG=?PR?HDLC?MATER
SPI_WRITE_REG. . . . . . . . . .  C ADDR   0394H   R   SEG=?PR?HDLC?MATER
SPI_WRITE_REG_1. . . . . . . . .  C ADDR   03A3H   R   SEG=?PR?HDLC?MATER
TI_CCXXX0_ADDR . . . . . . . . .  N NUMB   0009H   A   
TI_CCXXX0_AGCCTRL0 . . . . . . .  N NUMB   001DH   A   
TI_CCXXX0_AGCCTRL1 . . . . . . .  N NUMB   001CH   A   
TI_CCXXX0_AGCCTRL2 . . . . . . .  N NUMB   001BH   A   
TI_CCXXX0_AGCTEST. . . . . . . .  N NUMB   002BH   A   
TI_CCXXX0_BSCFG. . . . . . . . .  N NUMB   001AH   A   
TI_CCXXX0_CHANNR . . . . . . . .  N NUMB   000AH   A   
TI_CCXXX0_DEVIATN. . . . . . . .  N NUMB   0015H   A   
TI_CCXXX0_FIFOTHR. . . . . . . .  N NUMB   0003H   A   
TI_CCXXX0_FOCCFG . . . . . . . .  N NUMB   0019H   A   
TI_CCXXX0_FREND0 . . . . . . . .  N NUMB   0022H   A   
TI_CCXXX0_FREND1 . . . . . . . .  N NUMB   0021H   A   
TI_CCXXX0_FREQ0. . . . . . . . .  N NUMB   000FH   A   
TI_CCXXX0_FREQ1. . . . . . . . .  N NUMB   000EH   A   
TI_CCXXX0_FREQ2. . . . . . . . .  N NUMB   000DH   A   
TI_CCXXX0_FREQEST. . . . . . . .  N NUMB   0032H   A   
TI_CCXXX0_FSCAL0 . . . . . . . .  N NUMB   0026H   A   
TI_CCXXX0_FSCAL1 . . . . . . . .  N NUMB   0025H   A   
TI_CCXXX0_FSCAL2 . . . . . . . .  N NUMB   0024H   A   
TI_CCXXX0_FSCAL3 . . . . . . . .  N NUMB   0023H   A   
TI_CCXXX0_FSCTRL0. . . . . . . .  N NUMB   000CH   A   
TI_CCXXX0_FSCTRL1. . . . . . . .  N NUMB   000BH   A   
TI_CCXXX0_FSTEST . . . . . . . .  N NUMB   0029H   A   
TI_CCXXX0_IOCFG0 . . . . . . . .  N NUMB   0002H   A   
TI_CCXXX0_IOCFG1 . . . . . . . .  N NUMB   0001H   A   
TI_CCXXX0_IOCFG2 . . . . . . . .  N NUMB   0000H   A   
TI_CCXXX0_LQI. . . . . . . . . .  N NUMB   0033H   A   
TI_CCXXX0_MARCSTATE. . . . . . .  N NUMB   0035H   A   
TI_CCXXX0_MCSM0. . . . . . . . .  N NUMB   0018H   A   
TI_CCXXX0_MCSM1. . . . . . . . .  N NUMB   0017H   A   
TI_CCXXX0_MCSM2. . . . . . . . .  N NUMB   0016H   A   
TI_CCXXX0_MDMCFG0. . . . . . . .  N NUMB   0014H   A   
TI_CCXXX0_MDMCFG1. . . . . . . .  N NUMB   0013H   A   
TI_CCXXX0_MDMCFG2. . . . . . . .  N NUMB   0012H   A   
TI_CCXXX0_MDMCFG3. . . . . . . .  N NUMB   0011H   A   
TI_CCXXX0_MDMCFG4. . . . . . . .  N NUMB   0010H   A   
TI_CCXXX0_NUM_RXBYTES. . . . . .  N NUMB   007FH   A   
TI_CCXXX0_PARTNUM. . . . . . . .  N NUMB   0030H   A   
TI_CCXXX0_PATABLE. . . . . . . .  N NUMB   003EH   A   
TI_CCXXX0_PKTCTRL0 . . . . . . .  N NUMB   0008H   A   
TI_CCXXX0_PKTCTRL1 . . . . . . .  N NUMB   0007H   A   
TI_CCXXX0_PKTLEN . . . . . . . .  N NUMB   0006H   A   
TI_CCXXX0_PKTSTATUS. . . . . . .  N NUMB   0038H   A   
TI_CCXXX0_PTEST. . . . . . . . .  N NUMB   002AH   A   
TI_CCXXX0_RCCTRL0. . . . . . . .  N NUMB   0028H   A   
TI_CCXXX0_RCCTRL1. . . . . . . .  N NUMB   0027H   A   
TI_CCXXX0_RSSI . . . . . . . . .  N NUMB   0034H   A   
TI_CCXXX0_RXBYTES. . . . . . . .  N NUMB   003BH   A   
TI_CCXXX0_RXFIFO . . . . . . . .  N NUMB   003FH   A   
TI_CCXXX0_SAFC . . . . . . . . .  N NUMB   0037H   A   
TI_CCXXX0_SCAL . . . . . . . . .  N NUMB   0033H   A   
TI_CCXXX0_SFRX . . . . . . . . .  N NUMB   003AH   A   
TI_CCXXX0_SFTX . . . . . . . . .  N NUMB   003BH   A   
TI_CCXXX0_SIDLE. . . . . . . . .  N NUMB   0036H   A   
TI_CCXXX0_SNOP . . . . . . . . .  N NUMB   003DH   A   
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    69

TI_CCXXX0_SPWD . . . . . . . . .  N NUMB   0039H   A   
TI_CCXXX0_SRES . . . . . . . . .  N NUMB   0030H   A   
TI_CCXXX0_SRX. . . . . . . . . .  N NUMB   0034H   A   
TI_CCXXX0_STX. . . . . . . . . .  N NUMB   0035H   A   
TI_CCXXX0_SWOR . . . . . . . . .  N NUMB   0038H   A   
TI_CCXXX0_SWORRST. . . . . . . .  N NUMB   003CH   A   
TI_CCXXX0_SXOFF. . . . . . . . .  N NUMB   0032H   A   
TI_CCXXX0_SYNC0. . . . . . . . .  N NUMB   0005H   A   
TI_CCXXX0_SYNC1. . . . . . . . .  N NUMB   0004H   A   
TI_CCXXX0_TEST0. . . . . . . . .  N NUMB   002EH   A   
TI_CCXXX0_TEST1. . . . . . . . .  N NUMB   002DH   A   
TI_CCXXX0_TEST2. . . . . . . . .  N NUMB   002CH   A   
TI_CCXXX0_TXBYTES. . . . . . . .  N NUMB   003AH   A   
TI_CCXXX0_TXFIFO . . . . . . . .  N NUMB   003FH   A   
TI_CCXXX0_VCO_VC_DAC . . . . . .  N NUMB   0039H   A   
TI_CCXXX0_VERSION. . . . . . . .  N NUMB   0031H   A   
TI_CCXXX0_WORCTRL. . . . . . . .  N NUMB   0020H   A   
TI_CCXXX0_WOREVT0. . . . . . . .  N NUMB   001FH   A   
TI_CCXXX0_WOREVT1. . . . . . . .  N NUMB   001EH   A   
TI_CCXXX0_WORTIME0 . . . . . . .  N NUMB   0037H   A   
TI_CCXXX0_WORTIME1 . . . . . . .  N NUMB   0036H   A   
TX_CARRIER_EN. . . . . . . . . .  C ADDR   03F9H   R   SEG=?PR?HDLC?MATER
TX_CARRIER_EN_0. . . . . . . . .  C ADDR   040CH   R   SEG=?PR?HDLC?MATER
TX_CARRIER_EN_1. . . . . . . . .  C ADDR   042FH   R   SEG=?PR?HDLC?MATER
WAKE_CLKO. . . . . . . . . . . .  N NUMB   008FH   A   
WAKE_UP. . . . . . . . . . . . .  C ADDR   04E2H   R   SEG=?PR?HDLC?MATER
WAKE_UP_1. . . . . . . . . . . .  C ADDR   050EH   R   SEG=?PR?HDLC?MATER
WIRTE_REG7 . . . . . . . . . . .  C ADDR   0861H   R   SEG=?PR?HDLC?MATER
WKOUP_SJ . . . . . . . . . . . .  C ADDR   07F4H   R   SEG=?PR?HDLC?MATER
WKO_BK . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
WKO_SJ_1 . . . . . . . . . . . .  C ADDR   0780H   R   SEG=?PR?HDLC?MATER
WKO_SJ_2 . . . . . . . . . . . .  C ADDR   0783H   R   SEG=?PR?HDLC?MATER
WKO_SJ_3 . . . . . . . . . . . .  C ADDR   07ABH   R   SEG=?PR?HDLC?MATER
WKO_SJ_4 . . . . . . . . . . . .  C ADDR   07AEH   R   SEG=?PR?HDLC?MATER
WKO_SJ_5 . . . . . . . . . . . .  C ADDR   07D6H   R   SEG=?PR?HDLC?MATER
WKO_SJ_6 . . . . . . . . . . . .  C ADDR   07D9H   R   SEG=?PR?HDLC?MATER
XDATA_HOLD . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_NUM. . . . . . . . . . . .  X ADDR   -----       EXT
XDATA_TOTALNUML. . . . . . . . .  X ADDR   -----       EXT
XDATA_TXBUF. . . . . . . . . . .  X ADDR   -----       EXT
_AUTOASKREG. . . . . . . . . . .  C ADDR   0663H   R   SEG=?PR?HDLC?MATER
_BK5822_RST. . . . . . . . . . .  C ADDR   0648H   R   SEG=?PR?HDLC?MATER
_BK_SPIRST . . . . . . . . . . .  C ADDR   0615H   R   SEG=?PR?HDLC?MATER
_DISABLE_WAKE_UP . . . . . . . .  C ADDR   05E8H   R   SEG=?PR?HDLC?MATER
_ENABLE_WAKE_UP. . . . . . . . .  C ADDR   05BBH   R   SEG=?PR?HDLC?MATER
_ENTER_IDLE_MODE . . . . . . . .  C ADDR   0519H   R   SEG=?PR?HDLC?MATER
_ENTER_RECEIVE_MODE. . . . . . .  C ADDR   0588H   R   SEG=?PR?HDLC?MATER
_ENTER_SLEEP_MODE. . . . . . . .  C ADDR   0539H   R   SEG=?PR?HDLC?MATER
_ENTER_TX_CARRIER_MODE . . . . .  C ADDR   05A8H   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_5822INIT . . . . . . .  C ADDR   08ECH   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_5830INIT . . . . . . .  C ADDR   02CFH   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_CHANGECHANNEL. . . . .  C ADDR   0AC6H   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_CHECKREG9TO18. . . . .  C ADDR   0B48H   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_CLOSECLR . . . . . . .  C ADDR   0B29H   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_FREXIAODUI . . . . . .  C ADDR   08F3H   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_ISSLEEPMOD . . . . . .  C ADDR   0B32H   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_RX . . . . . . . . . .  C ADDR   01A8H   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_RXSETMMI . . . . . . .  C ADDR   09BDH   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_SWRX . . . . . . . . .  C ADDR   0C11H   R   SEG=?PR?HDLC?MATER
_FUN_HDLC_TX . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?HDLC?MATER
_FUN_HOLD_DIOPOINT . . . . . . .  C ADDR   0C3EH   R   SEG=?PR?HDLC?MATER
_FUN_LIB_BEEP. . . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY . . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY10 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY11 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY12 . . . . . . . .  C ADDR   -----       EXT
A51 MACRO ASSEMBLER  HDLC                                                                 10/09/2016 12:08:01 PAGE    70

_FUN_LIB_DELAY13 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY14 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY15 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY16 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY17 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY18 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY19 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY20 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY21 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY22 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY23 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY24 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY25 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY26 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY27 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY28 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY29 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY30 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY31 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY32 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY33 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY34 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY35 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY36 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY37 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY38 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY39 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY40 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY41 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY42 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY43 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY44 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY45 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY46 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY47 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY48 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY49 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_DELAY50 . . . . . . . .  C ADDR   -----       EXT
_FUN_LIB_FLASHTOXDATA. . . . . .  C ADDR   -----       EXT
_FUN_LIB_FLASHTOXDATALEN . . . .  C ADDR   -----       EXT
_FUN_TEST_BEEP . . . . . . . . .  C ADDR   -----       EXT
_FUN_TEST_DISPLAY. . . . . . . .  C ADDR   -----       EXT
_GETNEWCRC . . . . . . . . . . .  C ADDR   -----       EXT
_GETNEWCRC_XR. . . . . . . . . .  C ADDR   -----       EXT
_HDLC_RXSETMMICLEARRXER. . . . .  C ADDR   0A24H   R   SEG=?PR?HDLC?MATER
_HDLC_RXSETMMIRECEVICEDATA . . .  C ADDR   0A47H   R   SEG=?PR?HDLC?MATER
_HDLC_RXSETMMIRXFIFO . . . . . .  C ADDR   0A9BH   R   SEG=?PR?HDLC?MATER
_HDLC_RXSETMMIRXLOOP . . . . . .  C ADDR   0A02H   R   SEG=?PR?HDLC?MATER
_HDLC_RXSETMMIRXLOOP02 . . . . .  C ADDR   0A04H   R   SEG=?PR?HDLC?MATER
_POWER_UP. . . . . . . . . . . .  C ADDR   04A7H   R   SEG=?PR?HDLC?MATER
_WRITE_18_H. . . . . . . . . . .  C ADDR   0C6BH   R   SEG=?PR?HDLC?MATER
_WRITE_18_H_LOOP . . . . . . . .  C ADDR   0C8FH   R   SEG=?PR?HDLC?MATER
_WRITE_18_L. . . . . . . . . . .  C ADDR   0CA6H   R   SEG=?PR?HDLC?MATER
_WRITE_18_L_LOOP . . . . . . . .  C ADDR   0CC2H   R   SEG=?PR?HDLC?MATER


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
